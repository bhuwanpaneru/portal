var O$=Object.defineProperty,F$=Object.defineProperties,L$=Object.getOwnPropertyDescriptors,CL=Object.getOwnPropertySymbols,U$=Object.prototype.hasOwnProperty,V$=Object.prototype.propertyIsEnumerable,TL=(Qe,Ee,U)=>Ee in Qe?O$(Qe,Ee,{enumerable:!0,configurable:!0,writable:!0,value:U}):Qe[Ee]=U,DL=(Qe,Ee)=>{for(var U in Ee||(Ee={}))U$.call(Ee,U)&&TL(Qe,U,Ee[U]);if(CL)for(var U of CL(Ee))V$.call(Ee,U)&&TL(Qe,U,Ee[U]);return Qe},SL=(Qe,Ee)=>F$(Qe,L$(Ee));(self.webpackChunkportal=self.webpackChunkportal||[]).push([[179],{8255:Qe=>{function Ee(U){return Promise.resolve().then(()=>{var m=new Error("Cannot find module '"+U+"'");throw m.code="MODULE_NOT_FOUND",m})}Ee.keys=()=>[],Ee.resolve=Ee,Ee.id=8255,Qe.exports=Ee},7716:(Qe,Ee,U)=>{"use strict";U.d(Ee,{deG:()=>Nh,tb:()=>ib,AFp:()=>Em,ip1:()=>Xd,CZH:()=>tp,hGG:()=>mP,z2F:()=>ip,sBO:()=>jT,Sil:()=>rp,_Vd:()=>Ud,EJc:()=>JD,SBq:()=>Gi,qLn:()=>Qh,vpe:()=>Co,gxx:()=>fd,tBr:()=>Cu,XFs:()=>tt,OlP:()=>xn,zs3:()=>Un,ZZ4:()=>ia,aQg:()=>Za,soG:()=>ua,YKP:()=>Ty,v3s:()=>eP,h0i:()=>rl,PXZ:()=>QN,R0b:()=>Ws,FiY:()=>Os,Lbi:()=>QD,g9A:()=>tc,Qsj:()=>kx,FYo:()=>_y,JOm:()=>Ba,Tiy:()=>Gw,q3G:()=>Ze,tp0:()=>Fn,EAV:()=>_b,Rgc:()=>sa,dDg:()=>rh,DyG:()=>Na,q4F:()=>em,GfV:()=>VT,s_b:()=>jf,ifc:()=>qe,eFA:()=>wm,G48:()=>KN,X6Q:()=>hb,_c5:()=>Ib,VLi:()=>zN,c2e:()=>np,zSh:()=>Mu,wAp:()=>_t,vHH:()=>Te,EiD:()=>_e,mCW:()=>La,qzn:()=>kc,JVY:()=>Yv,pB0:()=>Qo,eBb:()=>id,L6k:()=>l_,LAX:()=>Gp,cg1:()=>Vg,Tjo:()=>cO,kL8:()=>Tr,yhl:()=>c_,dqk:()=>yt,sIi:()=>_f,CqO:()=>bf,QGY:()=>Ge,F4k:()=>Gu,RDi:()=>Rl,AaK:()=>te,z3N:()=>Yo,TTD:()=>No,xp6:()=>go,uIk:()=>wg,Suo:()=>_m,Xpm:()=>_n,lG2:()=>Nt,Yz7:()=>Kt,cJS:()=>Tn,oAB:()=>Z,Yjl:()=>Pt,Y36:()=>Dg,_UZ:()=>mw,qZA:()=>Sg,TgZ:()=>Hu,EpF:()=>_w,Ikx:()=>dy,LFG:()=>er,$8M:()=>wu,NdJ:()=>Wu,CRH:()=>Zy,Q6J:()=>gw,s9C:()=>ty,iGM:()=>Ky,MAs:()=>Dd,CHM:()=>uu,LSH:()=>Mr,kYT:()=>Se,YNc:()=>cw,_uU:()=>oy,Oqu:()=>Mg});var m=U(9765),$=U(5319),O=U(7574),ae=U(6682),le=U(8819);function ne(i){for(let s in i)if(i[s]===ne)return s;throw Error("Could not find renamed property on target object.")}function te(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(te).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function oe(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const V=ne({__forward_ref__:ne});function H(i){return i.__forward_ref__=H,i.toString=function(){return te(this())},i}function q(i){return function(i){return"function"==typeof i&&i.hasOwnProperty(V)&&i.__forward_ref__===H}(i)?i():i}class Te extends Error{constructor(s,a){super(function(i,s){return`${i?`NG0${i}: `:""}${s}`}(s,a)),this.code=s}}function fe(i){return"string"==typeof i?i:null==i?"":String(i)}function De(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():fe(i)}function Wt(i,s){const a=s?` in ${s}`:"";throw new Te("201",`No provider for ${De(i)} found${a}`)}function Pn(i,s){null==i&&function(i,s,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${s} <=Actual]`))}(s,i,null,"!=")}function Kt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Tn(i){return{providers:i.providers||[],imports:i.imports||[]}}function qn(i){return pn(i,ti)||pn(i,zn)}function pn(i,s){return i.hasOwnProperty(s)?i[s]:null}function ei(i){return i&&(i.hasOwnProperty(Ne)||i.hasOwnProperty(dr))?i[Ne]:null}const ti=ne({\u0275prov:ne}),Ne=ne({\u0275inj:ne}),zn=ne({ngInjectableDef:ne}),dr=ne({ngInjectorDef:ne});var tt=(()=>((tt=tt||{})[tt.Default=0]="Default",tt[tt.Host=1]="Host",tt[tt.Self=2]="Self",tt[tt.SkipSelf=4]="SkipSelf",tt[tt.Optional=8]="Optional",tt))();let Zt;function Kn(i){const s=Zt;return Zt=i,s}function Zn(i,s,a){const c=qn(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&tt.Optional?null:void 0!==s?s:void Wt(te(i),"Injector")}function kn(i){return{toString:i}.toString()}var mn=(()=>((mn=mn||{})[mn.OnPush=0]="OnPush",mn[mn.Default=1]="Default",mn))(),qe=(()=>((qe=qe||{})[qe.Emulated=0]="Emulated",qe[qe.None=2]="None",qe[qe.ShadowDom=3]="ShadowDom",qe))();const ot="undefined"!=typeof globalThis&&globalThis,fs="undefined"!=typeof window&&window,hi="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,yt=ot||"undefined"!=typeof global&&global||fs||hi,K={},G=[],Q=ne({\u0275cmp:ne}),ve=ne({\u0275dir:ne}),z=ne({\u0275pipe:ne}),ie=ne({\u0275mod:ne}),Me=ne({\u0275loc:ne}),Ke=ne({\u0275fac:ne}),ht=ne({__NG_ELEMENT_ID__:ne});let Rt=0;function _n(i){return kn(()=>{const a={},c={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===mn.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||G,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||qe.Emulated,id:"c",styles:i.styles||G,_:null,setInput:null,schemas:i.schemas||null,tView:null},l=i.directives,h=i.features,g=i.pipes;return c.id+=Rt++,c.inputs=He(i.inputs,a),c.outputs=He(i.outputs),h&&h.forEach(v=>v(c)),c.directiveDefs=l?()=>("function"==typeof l?l():l).map(hr):null,c.pipeDefs=g?()=>("function"==typeof g?g():g).map(de):null,c})}function hr(i){return Tt(i)||function(i){return i[ve]||null}(i)}function de(i){return function(i){return i[z]||null}(i)}const ee={};function Z(i){return kn(()=>{const s={type:i.type,bootstrap:i.bootstrap||G,declarations:i.declarations||G,imports:i.imports||G,exports:i.exports||G,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(ee[i.id]=i.type),s})}function Se(i,s){return kn(()=>{const a=On(i,!0);a.declarations=s.declarations||G,a.imports=s.imports||G,a.exports=s.exports||G})}function He(i,s){if(null==i)return K;const a={};for(const c in i)if(i.hasOwnProperty(c)){let l=i[c],h=l;Array.isArray(l)&&(h=l[1],l=l[0]),a[l]=c,s&&(s[l]=h)}return a}const Nt=_n;function Pt(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Tt(i){return i[Q]||null}function On(i,s){const a=i[ie]||null;if(!a&&!0===s)throw new Error(`Type ${te(i)} does not have '\u0275mod' property.`);return a}function to(i){return Array.isArray(i)&&"object"==typeof i[1]}function cn(i){return Array.isArray(i)&&!0===i[1]}function bl(i){return 0!=(8&i.flags)}function lc(i){return 2==(2&i.flags)}function ou(i){return 1==(1&i.flags)}function ps(i){return null!==i.template}function Pi(i){return 0!=(512&i[2])}function ro(i,s){return i.hasOwnProperty(Ke)?i[Ke]:null}class Sl{constructor(s,a,c){this.previousValue=s,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function No(){return Zi}function Zi(i){return i.type.prototype.ngOnChanges&&(i.setInput=_a),Eh}function Eh(){const i=Dp(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===K)i.previous=s;else for(let c in s)a[c]=s[c];i.current=null,this.ngOnChanges(s)}}function _a(i,s,a,c){const l=Dp(i)||function(i,s){return i[sr]=s}(i,{previous:K,current:null}),h=l.current||(l.current={}),g=l.previous,v=this.declaredInputs[a],I=g[v];h[v]=new Sl(I&&I.currentValue,s,g===K),i[c]=s}No.ngInherit=!0;const sr="__ngSimpleChanges__";function Dp(i){return i[sr]||null}let fc;function Rl(i){fc=i}function Rn(i){return!!i.listen}const Mo={createRenderer:(i,s)=>void 0!==fc?fc:"undefined"!=typeof document?document:void 0};function Xt(i){for(;Array.isArray(i);)i=i[0];return i}function ki(i,s){return Xt(s[i.index])}function xl(i,s){return i.data[s]}function _i(i,s){const a=s[i];return to(a)?a:a[0]}function wa(i){return 4==(4&i[2])}function Nl(i){return 128==(128&i[2])}function Qi(i,s){return null==s?null:i[s]}function jr(i){i[18]=0}function ba(i,s){i[5]+=s;let a=i,c=i[3];for(;null!==c&&(1===s&&1===a[5]||-1===s&&0===a[5]);)c[5]+=s,a=c,c=c[3]}const wt={lFrame:Ap(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ml(){return wt.bindingsEnabled}function Ae(){return wt.lFrame.lView}function Ot(){return wt.lFrame.tView}function uu(i){return wt.lFrame.contextLView=i,i[8]}function bn(){let i=cu();for(;null!==i&&64===i.type;)i=i.parent;return i}function cu(){return wt.lFrame.currentTNode}function ii(i,s){const a=wt.lFrame;a.currentTNode=i,a.isParent=s}function Lo(){return wt.lFrame.isParent}function lu(){return wt.isInCheckNoChangesMode}function io(i){wt.isInCheckNoChangesMode=i}function gs(){return wt.lFrame.bindingIndex++}function Ll(i,s){const a=wt.lFrame;a.bindingIndex=a.bindingRootIndex=i,Ul(s)}function Ul(i){wt.lFrame.currentDirectiveIndex=i}function Th(){return wt.lFrame.currentQueryIndex}function Bo(i){wt.lFrame.currentQueryIndex=i}function hu(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function fu(i,s,a){if(a&tt.SkipSelf){let l=s,h=i;for(;!(l=l.parent,null!==l||a&tt.Host||(l=hu(h),null===l||(h=h[15],10&l.type))););if(null===l)return!1;s=l,i=h}const c=wt.lFrame=_c();return c.currentTNode=s,c.lView=i,!0}function pu(i){const s=_c(),a=i[1];wt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function _c(){const i=wt.lFrame,s=null===i?null:i.child;return null===s?Ap(i):s}function Ap(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function yc(){const i=wt.lFrame;return wt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Dh=yc;function jo(){const i=yc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Nr(){return wt.lFrame.selectedIndex}function so(i){wt.lFrame.selectedIndex=i}function Qn(){const i=wt.lFrame;return xl(i.tView,i.selectedIndex)}function Ca(i,s){for(let a=s.directiveStart,c=s.directiveEnd;a<c;a++){const h=i.data[a].type.prototype,{ngAfterContentInit:g,ngAfterContentChecked:v,ngAfterViewInit:I,ngAfterViewChecked:C,ngOnDestroy:R}=h;g&&(i.contentHooks||(i.contentHooks=[])).push(-a,g),v&&((i.contentHooks||(i.contentHooks=[])).push(a,v),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,v)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),C&&((i.viewHooks||(i.viewHooks=[])).push(a,C),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,C)),null!=R&&(i.destroyHooks||(i.destroyHooks=[])).push(a,R)}}function Ta(i,s,a){gu(i,s,3,a)}function $o(i,s,a,c){(3&i[2])===a&&gu(i,s,a,c)}function ar(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function gu(i,s,a,c){const h=null!=c?c:-1,g=s.length-1;let v=0;for(let I=void 0!==c?65535&i[18]:0;I<g;I++)if("number"==typeof s[I+1]){if(v=s[I],null!=c&&v>=c)break}else s[I]<0&&(i[18]+=65536),(v<h||-1==h)&&(Rp(i,a,s,I),i[18]=(4294901760&i[18])+I+2),I++}function Rp(i,s,a,c){const l=a[c]<0,h=a[c+1],v=i[l?-a[c]:a[c]];if(l){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{h.call(v)}finally{}}}else try{h.call(v)}finally{}}class mu{constructor(s,a,c){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function Hl(i,s,a){const c=Rn(i);let l=0;for(;l<a.length;){const h=a[l];if("number"==typeof h){if(0!==h)break;l++;const g=a[l++],v=a[l++],I=a[l++];c?i.setAttribute(s,v,I,g):s.setAttributeNS(g,v,I)}else{const g=h,v=a[++l];xs(g)?c&&i.setProperty(s,g,v):c?i.setAttribute(s,g,v):s.setAttribute(g,v),l++}}return l}function Pp(i){return 3===i||4===i||6===i}function xs(i){return 64===i.charCodeAt(0)}function Ic(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let c=0;c<s.length;c++){const l=s[c];"number"==typeof l?a=l:0===a||kp(i,a,l,null,-1===a||2===a?s[++c]:null)}}return i}function kp(i,s,a,c,l){let h=0,g=i.length;if(-1===s)g=-1;else for(;h<i.length;){const v=i[h++];if("number"==typeof v){if(v===s){g=-1;break}if(v>s){g=h-1;break}}}for(;h<i.length;){const v=i[h];if("number"==typeof v)break;if(v===a){if(null===c)return void(null!==l&&(i[h+1]=l));if(c===i[h+1])return void(i[h+2]=l)}h++,null!==c&&h++,null!==l&&h++}-1!==g&&(i.splice(g,0,s),h=g+1),i.splice(h++,0,a),null!==c&&i.splice(h++,0,c),null!==l&&i.splice(h++,0,l)}function Gl(i){return-1!==i}function ao(i){return 32767&i}function Da(i,s){let a=function(i){return i>>16}(i),c=s;for(;a>0;)c=c[15],a--;return c}let _u=!0;function Oi(i){const s=_u;return _u=i,s}let n_=0;function Ho(i,s){const a=Cc(i,s);if(-1!==a)return a;const c=s[1];c.firstCreatePass&&(i.injectorIndex=s.length,Sa(c.data,i),Sa(s,null),Sa(c.blueprint,null));const l=jt(i,s),h=i.injectorIndex;if(Gl(l)){const g=ao(l),v=Da(l,s),I=v[1].data;for(let C=0;C<8;C++)s[h+C]=v[g+C]|I[g+C]}return s[h+8]=l,h}function Sa(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Cc(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function jt(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,l=s;for(;null!==l;){const h=l[1],g=h.type;if(c=2===g?h.declTNode:1===g?l[6]:null,null===c)return-1;if(a++,l=l[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function at(i,s,a){!function(i,s,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(ht)&&(c=a[ht]),null==c&&(c=a[ht]=n_++);const l=255&c;s.data[i+(l>>5)]|=1<<l}(i,s,a)}function Aa(i,s,a){if(a&tt.Optional)return i;Wt(s,"NodeInjector")}function yi(i,s,a,c){if(a&tt.Optional&&void 0===c&&(c=null),0==(a&(tt.Self|tt.Host))){const l=i[9],h=Kn(void 0);try{return l?l.get(s,c,a&tt.Optional):Zn(s,c,a&tt.Optional)}finally{Kn(h)}}return Aa(c,s,a)}function Wl(i,s,a,c=tt.Default,l){if(null!==i){const h=function(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(ht)?i[ht]:void 0;return"number"==typeof s?s>=0?255&s:oi:s}(a);if("function"==typeof h){if(!fu(s,i,c))return c&tt.Host?Aa(l,a,c):yi(s,a,c,l);try{const g=h(c);if(null!=g||c&tt.Optional)return g;Wt(a)}finally{Dh()}}else if("number"==typeof h){let g=null,v=Cc(i,s),I=-1,C=c&tt.Host?s[16][6]:null;for((-1===v||c&tt.SkipSelf)&&(I=-1===v?jt(i,s):s[v+8],-1!==I&&Jn(c,!1)?(g=s[1],v=ao(I),s=Da(I,s)):v=-1);-1!==v;){const R=s[1];if(vu(h,v,R.data)){const k=ql(v,s,a,g,c,C);if(k!==Go)return k}I=s[v+8],-1!==I&&Jn(c,s[1].data[v+8]===C)&&vu(h,v,s)?(g=R,v=ao(I),s=Da(I,s)):v=-1}}}return yi(s,a,c,l)}const Go={};function oi(){return new Ps(bn(),Ae())}function ql(i,s,a,c,l,h){const g=s[1],v=g.data[i+8],R=Tc(v,g,a,null==c?lc(v)&&_u:c!=g&&0!=(3&v.type),l&tt.Host&&h===v);return null!==R?yu(s,g,R,v):Go}function Tc(i,s,a,c,l){const h=i.providerIndexes,g=s.data,v=1048575&h,I=i.directiveStart,R=h>>20,L=l?v+R:i.directiveEnd;for(let W=c?v:v+R;W<L;W++){const X=g[W];if(W<I&&a===X||W>=I&&X.type===a)return W}if(l){const W=g[I];if(W&&ps(W)&&W.type===a)return I}return null}function yu(i,s,a,c){let l=i[a];const h=s.data;if(function(i){return i instanceof mu}(l)){const g=l;g.resolving&&function(i,s){throw new Te("200",`Circular dependency in DI detected for ${i}`)}(De(h[a]));const v=Oi(g.canSeeViewProviders);g.resolving=!0;const I=g.injectImpl?Kn(g.injectImpl):null;fu(i,c,tt.Default);try{l=i[a]=g.factory(void 0,h,i,c),s.firstCreatePass&&a>=c.directiveStart&&function(i,s,a){const{ngOnChanges:c,ngOnInit:l,ngDoCheck:h}=s.type.prototype;if(c){const g=Zi(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,g),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,g)}l&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,l),h&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,h),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,h))}(a,h[a],s)}finally{null!==I&&Kn(I),Oi(v),g.resolving=!1,Dh()}}return l}function vu(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function Jn(i,s){return!(i&tt.Self||i&tt.Host&&s)}class Ps{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,c){return Wl(this._tNode,this._lView,s,c,a)}}function wu(i){return function(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const c=a.length;let l=0;for(;l<c;){const h=a[l];if(Pp(h))break;if(0===h)l+=2;else if("number"==typeof h)for(l++;l<c&&"string"==typeof a[l];)l++;else{if(h===s)return a[l+1];l+=2}}}return null}(bn(),i)}const ks="__parameters__";function $r(i,s,a){return kn(()=>{const c=function(i){return function(...a){if(i){const c=i(...a);for(const l in c)this[l]=c[l]}}}(s);function l(...h){if(this instanceof l)return c.apply(this,h),this;const g=new l(...h);return v.annotation=g,v;function v(I,C,R){const k=I.hasOwnProperty(ks)?I[ks]:Object.defineProperty(I,ks,{value:[]})[ks];for(;k.length<=R;)k.push(null);return(k[R]=k[R]||[]).push(g),I}}return a&&(l.prototype=Object.create(a.prototype)),l.prototype.ngMetadataName=i,l.annotationCls=l,l})}class xn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Kt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Nh=new xn("AnalyzeForEntryComponents"),Na=Function;function vi(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let c=i[a];Array.isArray(c)?(s===i&&(s=i.slice(0,a)),vi(c,s)):s!==i&&s.push(c)}return s}function ms(i,s){i.forEach(a=>Array.isArray(a)?ms(a,s):s(a))}function ka(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Ei(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}const ft={},Yt="__NG_DI_FLAG__",bt="ngTempTokenPath",Xn=/\n/gm,Iu="__source",Xi=ne({provide:String,useValue:ne});let _s;function ys(i){const s=_s;return _s=i,s}function qt(i,s=tt.Default){if(void 0===_s)throw new Error("inject() must be called from an injection context");return null===_s?Zn(i,void 0,s):_s.get(i,s&tt.Optional?null:void 0,s)}function er(i,s=tt.Default){return(Zt||qt)(q(i),s)}function es(i){const s=[];for(let a=0;a<i.length;a++){const c=q(i[a]);if(Array.isArray(c)){if(0===c.length)throw new Error("Arguments array must have arguments.");let l,h=tt.Default;for(let g=0;g<c.length;g++){const v=c[g],I=Wv(v);"number"==typeof I?-1===I?l=v.token:h|=I:l=v}s.push(er(l,h))}else s.push(er(c))}return s}function Yl(i,s){return i[Yt]=s,i.prototype[Yt]=s,i}function Wv(i){return i[Yt]}function Uh(i,s,a,c){const l=i[bt];throw s[Iu]&&l.unshift(s[Iu]),i.message=function(i,s,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let l=te(s);if(Array.isArray(s))l=s.map(te).join(" -> ");else if("object"==typeof s){let h=[];for(let g in s)if(s.hasOwnProperty(g)){let v=s[g];h.push(g+":"+("string"==typeof v?JSON.stringify(v):te(v)))}l=`{${h.join(", ")}}`}return`${a}${c?"("+c+")":""}[${l}]: ${i.replace(Xn,"\n  ")}`}("\n"+i.message,l,a,c),i.ngTokenPath=l,i[bt]=null,i}const Cu=Yl($r("Inject",i=>({token:i})),-1),Os=Yl($r("Optional"),8),Fn=Yl($r("SkipSelf"),4);let Du;function Nc(i){var s;return(null===(s=function(){if(void 0===Du&&(Du=null,yt.trustedTypes))try{Du=yt.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch(i){}return Du}())||void 0===s?void 0:s.createHTML(i))||i}class Zo{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class zv extends Zo{getTypeName(){return"HTML"}}class Bh extends Zo{getTypeName(){return"Style"}}class Kv extends Zo{getTypeName(){return"Script"}}class jh extends Zo{getTypeName(){return"URL"}}class Zv extends Zo{getTypeName(){return"ResourceURL"}}function Yo(i){return i instanceof Zo?i.changingThisBreaksApplicationSecurity:i}function kc(i,s){const a=c_(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}function c_(i){return i instanceof Zo&&i.getTypeName()||null}function Yv(i){return new zv(i)}function l_(i){return new Bh(i)}function id(i){return new Kv(i)}function Gp(i){return new jh(i)}function Qo(i){return new Zv(i)}class d_{constructor(s){this.inertDocumentHelper=s}getInertBodyElement(s){s="<body><remove></remove>"+s;try{const a=(new window.DOMParser).parseFromString(Nc(s),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(s):(a.removeChild(a.firstChild),a)}catch(a){return null}}}class h_{constructor(s){if(this.defaultDoc=s,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const a=this.inertDocument.createElement("html");this.inertDocument.appendChild(a);const c=this.inertDocument.createElement("body");a.appendChild(c)}}getInertBodyElement(s){const a=this.inertDocument.createElement("template");if("content"in a)return a.innerHTML=Nc(s),a;const c=this.inertDocument.createElement("body");return c.innerHTML=Nc(s),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(s){const a=s.attributes;for(let l=a.length-1;0<l;l--){const g=a.item(l).name;("xmlns:ns1"===g||0===g.indexOf("ns1:"))&&s.removeAttribute(g)}let c=s.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const Oc=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Jv=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function La(i){return(i=String(i)).match(Oc)||i.match(Jv)?i:"unsafe:"+i}function vs(i){const s={};for(const a of i.split(","))s[a]=!0;return s}function Ua(...i){const s={};for(const a of i)for(const c in a)a.hasOwnProperty(c)&&(s[c]=!0);return s}const $h=vs("area,br,col,hr,img,wbr"),od=vs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),p_=vs("rp,rt"),Hh=Ua($h,Ua(od,vs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ua(p_,vs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ua(p_,od)),Wp=vs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Fc=vs("srcset"),E=Ua(Wp,Fc,vs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),vs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),p=vs("script,style,template");class _{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(s){let a=s.firstChild,c=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?c=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,c&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let l=this.checkClobberedElement(a,a.nextSibling);if(l){a=l;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(s){const a=s.nodeName.toLowerCase();if(!Hh.hasOwnProperty(a))return this.sanitizedSomething=!0,!p.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const c=s.attributes;for(let l=0;l<c.length;l++){const h=c.item(l),g=h.name,v=g.toLowerCase();if(!E.hasOwnProperty(v)){this.sanitizedSomething=!0;continue}let I=h.value;Wp[v]&&(I=La(I)),Fc[v]&&(i=I,I=(i=String(i)).split(",").map(s=>La(s.trim())).join(", ")),this.buf.push(" ",g,'="',N(I),'"')}var i;return this.buf.push(">"),!0}endElement(s){const a=s.nodeName.toLowerCase();Hh.hasOwnProperty(a)&&!$h.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(s){this.buf.push(N(s))}checkClobberedElement(s,a){if(a&&(s.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${s.outerHTML}`);return a}}const b=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,x=/([^\#-~ |!])/g;function N(i){return i.replace(/&/g,"&amp;").replace(b,function(s){return"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";"}).replace(x,function(s){return"&#"+s.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let J;function _e(i,s){let a=null;try{J=J||function(i){const s=new h_(i);return function(){try{return!!(new window.DOMParser).parseFromString(Nc(""),"text/html")}catch(i){return!1}}()?new d_(s):s}(i);let c=s?String(s):"";a=J.getInertBodyElement(c);let l=5,h=c;do{if(0===l)throw new Error("Failed to sanitize html because the input is unstable");l--,c=h,h=a.innerHTML,a=J.getInertBodyElement(c)}while(c!==h);return Nc((new _).sanitizeChildren(je(a)||a))}finally{if(a){const c=je(a)||a;for(;c.firstChild;)c.removeChild(c.firstChild)}}}function je(i){return"content"in i&&function(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var Ze=(()=>((Ze=Ze||{})[Ze.NONE=0]="NONE",Ze[Ze.HTML=1]="HTML",Ze[Ze.STYLE=2]="STYLE",Ze[Ze.SCRIPT=3]="SCRIPT",Ze[Ze.URL=4]="URL",Ze[Ze.RESOURCE_URL=5]="RESOURCE_URL",Ze))();function Mr(i){const s=function(){const i=Ae();return i&&i[12]}();return s?s.sanitize(Ze.URL,i)||"":kc(i,"URL")?Yo(i):La(fe(i))}const Lc="__ngContext__";function Or(i,s){i[Lc]=s}function m_(i){const s=function(i){return i[Lc]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function Zp(i){return i.ngOriginalError}function bI(i,...s){i.error(...s)}class Qh{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),c=this._findContext(s),l=(i=s)&&i.ngErrorLogger||bI;var i;l(this._console,"ERROR",s),a&&l(this._console,"ORIGINAL ERROR",a),c&&l(this._console,"ERROR CONTEXT",c)}_findContext(s){return s?s.ngDebugContext||this._findContext(Zp(s)):null}_findOriginalError(s){let a=s&&Zp(s);for(;a&&Zp(a);)a=Zp(a);return a||null}}const Jh=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(yt))();function Va(i){return i instanceof Function?i():i}var Ba=(()=>((Ba=Ba||{})[Ba.Important=1]="Important",Ba[Ba.DashCase=2]="DashCase",Ba))();function aE(i,s){return undefined(i,s)}function Xp(i){const s=i[3];return cn(s)?s[3]:s}function uE(i){return HA(i[13])}function w_(i){return HA(i[4])}function HA(i){for(;null!==i&&!cn(i);)i=i[4];return i}function ud(i,s,a,c,l){if(null!=c){let h,g=!1;cn(c)?h=c:to(c)&&(g=!0,c=c[0]);const v=Xt(c);0===i&&null!==a?null==l?pE(s,a,v):cd(s,a,v,l||null,!0):1===i&&null!==a?cd(s,a,v,l||null,!0):2===i?function(i,s,a){const c=Fr(i,s);c&&function(i,s,a,c){Rn(i)?i.removeChild(s,a,c):s.removeChild(a)}(i,c,s,a)}(s,v,g):3===i&&s.destroyNode(v),null!=h&&function(i,s,a,c,l){const h=a[7];h!==Xt(a)&&ud(s,i,c,h,l);for(let v=10;v<a.length;v++){const I=a[v];nf(I[1],I,i,s,c,h)}}(s,i,h,a,l)}}function lE(i,s,a){return Rn(i)?i.createElement(s,a):null===a?i.createElement(s):i.createElementNS(a,s)}function AI(i,s){const a=i[9],c=a.indexOf(s),l=s[3];1024&s[2]&&(s[2]&=-1025,ba(l,-1)),a.splice(c,1)}function eg(i,s){if(i.length<=10)return;const a=10+s,c=i[a];if(c){const l=c[17];null!==l&&l!==i&&AI(l,c),s>0&&(i[a-1][4]=c[4]);const h=Ei(i,10+s);!function(i,s){nf(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(c[1],c);const g=h[19];null!==g&&g.detachView(h[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function hE(i,s){if(!(256&s[2])){const a=s[11];Rn(a)&&a.destroyNode&&nf(i,s,a,3,null,null),function(i){let s=i[13];if(!s)return fE(i[1],i);for(;s;){let a=null;if(to(s))a=s[13];else{const c=s[10];c&&(a=c)}if(!a){for(;s&&!s[4]&&s!==i;)to(s)&&fE(s[1],s),s=s[3];null===s&&(s=i),to(s)&&fE(s[1],s),a=s&&s[4]}s=a}}(s)}}function fE(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const l=s[a[c]];if(!(l instanceof mu)){const h=a[c+1];if(Array.isArray(h))for(let g=0;g<h.length;g+=2){const v=l[h[g]],I=h[g+1];try{I.call(v)}finally{}}else try{h.call(l)}finally{}}}}(i,s),function(i,s){const a=i.cleanup,c=s[7];let l=-1;if(null!==a)for(let h=0;h<a.length-1;h+=2)if("string"==typeof a[h]){const g=a[h+1],v="function"==typeof g?g(s):Xt(s[g]),I=c[l=a[h+2]],C=a[h+3];"boolean"==typeof C?v.removeEventListener(a[h],I,C):C>=0?c[l=C]():c[l=-C].unsubscribe(),h+=2}else{const g=c[l=a[h+1]];a[h].call(g)}if(null!==c){for(let h=l+1;h<c.length;h++)c[h]();s[7]=null}}(i,s),1===s[1].type&&Rn(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&cn(s[3])){a!==s[3]&&AI(a,s);const c=s[19];null!==c&&c.detachView(i)}}}function RI(i,s,a){return function(i,s,a){let c=s;for(;null!==c&&40&c.type;)c=(s=c).parent;if(null===c)return a[0];if(2&c.flags){const l=i.data[c.directiveStart].encapsulation;if(l===qe.None||l===qe.Emulated)return null}return ki(c,a)}(i,s.parent,a)}function cd(i,s,a,c,l){Rn(i)?i.insertBefore(s,a,c,l):s.insertBefore(a,c,l)}function pE(i,s,a){Rn(i)?i.appendChild(s,a):s.appendChild(a)}function NI(i,s,a,c,l){null!==c?cd(i,s,a,c,l):pE(i,s,a)}function Fr(i,s){return Rn(i)?i.parentNode(s):s.parentNode}let I_=function(i,s,a){return 40&i.type?ki(i,a):null};function C_(i,s,a,c){const l=RI(i,c,s),h=s[11],v=function(i,s,a){return I_(i,s,a)}(c.parent||s[6],c,s);if(null!=l)if(Array.isArray(a))for(let I=0;I<a.length;I++)NI(h,l,a[I],v,!1);else NI(h,l,a,v,!1)}function tf(i,s){if(null!==s){const a=s.type;if(3&a)return ki(s,i);if(4&a)return T_(-1,i[s.index]);if(8&a){const c=s.child;if(null!==c)return tf(i,c);{const l=i[s.index];return cn(l)?T_(-1,l):Xt(l)}}if(32&a)return aE(s,i)()||Xt(i[s.index]);{const c=kI(i,s);return null!==c?Array.isArray(c)?c[0]:tf(Xp(i[16]),c):tf(i,s.next)}}return null}function kI(i,s){return null!==s?i[16][6].projection[s.projection]:null}function T_(i,s){const a=10+i+1;if(a<s.length){const c=s[a],l=c[1].firstChild;if(null!==l)return tf(c,l)}return s[7]}function D_(i,s,a,c,l,h,g){for(;null!=a;){const v=c[a.index],I=a.type;if(g&&0===s&&(v&&Or(Xt(v),c),a.flags|=4),64!=(64&a.flags))if(8&I)D_(i,s,a.child,c,l,h,!1),ud(s,i,l,v,h);else if(32&I){const C=aE(a,c);let R;for(;R=C();)ud(s,i,l,R,h);ud(s,i,l,v,h)}else 16&I?eR(i,s,c,a,l,h):ud(s,i,l,v,h);a=g?a.projectionNext:a.next}}function nf(i,s,a,c,l,h){D_(a,c,i.firstChild,s,l,h,!1)}function eR(i,s,a,c,l,h){const g=a[16],I=g[6].projection[c.projection];if(Array.isArray(I))for(let C=0;C<I.length;C++)ud(s,i,l,I[C],h);else D_(i,s,I,g[3],l,h,!0)}function FI(i,s,a){Rn(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function mE(i,s,a){Rn(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function LI(i,s,a){let c=i.length;for(;;){const l=i.indexOf(s,a);if(-1===l)return l;if(0===l||i.charCodeAt(l-1)<=32){const h=s.length;if(l+h===c||i.charCodeAt(l+h)<=32)return l}a=l+1}}const UI="ng-template";function nR(i,s,a){let c=0;for(;c<i.length;){let l=i[c++];if(a&&"class"===l){if(l=i[c],-1!==LI(l.toLowerCase(),s,0))return!0}else if(1===l){for(;c<i.length&&"string"==typeof(l=i[c++]);)if(l.toLowerCase()===s)return!0;return!1}}return!1}function VI(i){return 4===i.type&&i.value!==UI}function BI(i,s,a){return s===(4!==i.type||a?i.value:UI)}function rR(i,s,a){let c=4;const l=i.attrs||[],h=function(i){for(let s=0;s<i.length;s++)if(Pp(i[s]))return s;return i.length}(l);let g=!1;for(let v=0;v<s.length;v++){const I=s[v];if("number"!=typeof I){if(!g)if(4&c){if(c=2|1&c,""!==I&&!BI(i,I,a)||""===I&&1===s.length){if(Xo(c))return!1;g=!0}}else{const C=8&c?I:s[++v];if(8&c&&null!==i.attrs){if(!nR(i.attrs,C,a)){if(Xo(c))return!1;g=!0}continue}const k=iR(8&c?"class":I,l,VI(i),a);if(-1===k){if(Xo(c))return!1;g=!0;continue}if(""!==C){let L;L=k>h?"":l[k+1].toLowerCase();const W=8&c?L:null;if(W&&-1!==LI(W,C,0)||2&c&&C!==L){if(Xo(c))return!1;g=!0}}}}else{if(!g&&!Xo(c)&&!Xo(I))return!1;if(g&&Xo(I))continue;g=!1,c=I|1&c}}return Xo(c)||g}function Xo(i){return 0==(1&i)}function iR(i,s,a,c){if(null===s)return-1;let l=0;if(c||!a){let h=!1;for(;l<s.length;){const g=s[l];if(g===i)return l;if(3===g||6===g)h=!0;else{if(1===g||2===g){let v=s[++l];for(;"string"==typeof v;)v=s[++l];continue}if(4===g)break;if(0===g){l+=4;continue}}l+=h?1:2}return-1}return function(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===s)return a;a++}return-1}(s,i)}function S_(i,s,a=!1){for(let c=0;c<s.length;c++)if(rR(i,s[c],a))return!0;return!1}function uR(i,s){return i?":not("+s.trim()+")":s}function cR(i){let s=i[0],a=1,c=2,l="",h=!1;for(;a<i.length;){let g=i[a];if("string"==typeof g)if(2&c){const v=i[++a];l+="["+g+(v.length>0?'="'+v+'"':"")+"]"}else 8&c?l+="."+g:4&c&&(l+=" "+g);else""!==l&&!Xo(g)&&(s+=uR(h,l),l=""),c=g,h=h||!Xo(c);a++}return""!==l&&(s+=uR(h,l)),s}const pt={};function go(i){A_(Ot(),Ae(),Nr()+i,lu())}function A_(i,s,a,c){if(!c)if(3==(3&s[2])){const h=i.preOrderCheckHooks;null!==h&&Ta(s,h,a)}else{const h=i.preOrderHooks;null!==h&&$o(s,h,0,a)}so(a)}function M_(i,s){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const l=a[c],h=a[c+1];if(-1!==h){const g=i.data[h];Bo(l),g.contentQueries(2,s[h],h)}}}function uf(i,s,a,c,l,h,g,v,I,C){const R=s.blueprint.slice();return R[0]=l,R[2]=140|c,jr(R),R[3]=R[15]=i,R[8]=a,R[10]=g||i&&i[10],R[11]=v||i&&i[11],R[12]=I||i&&i[12]||null,R[9]=C||i&&i[9]||null,R[6]=h,R[16]=2==s.type?i[16]:R,R}function ku(i,s,a,c,l){let h=i.data[s];if(null===h)h=function(i,s,a,c,l){const h=cu(),g=Lo(),I=i.data[s]=function(i,s,a,c,l,h){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,g?h:h&&h.parent,a,s,c,l);return null===i.firstChild&&(i.firstChild=I),null!==h&&(g?null==h.child&&null!==I.parent&&(h.child=I):null===h.next&&(h.next=I)),I}(i,s,a,c,l),wt.lFrame.inI18n&&(h.flags|=64);else if(64&h.type){h.type=a,h.value=c,h.attrs=l;const g=function(){const i=wt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();h.injectorIndex=null===g?-1:g.injectorIndex}return ii(h,!0),h}function jc(i,s,a,c){if(0===a)return-1;const l=s.length;for(let h=0;h<a;h++)s.push(c),i.blueprint.push(c),i.data.push(null);return l}function hd(i,s,a){pu(s);try{const c=i.viewQuery;null!==c&&LE(1,c,a);const l=i.template;null!==l&&O_(i,s,l,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&M_(i,s),i.staticViewQueries&&LE(2,i.viewQuery,a);const h=i.components;null!==h&&function(i,s){for(let a=0;a<s.length;a++)TR(i,s[a])}(s,h)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{s[2]&=-5,jo()}}function cf(i,s,a,c){const l=s[2];if(256==(256&l))return;pu(s);const h=lu();try{jr(s),function(i){wt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&O_(i,s,a,2,c);const g=3==(3&l);if(!h)if(g){const C=i.preOrderCheckHooks;null!==C&&Ta(s,C,null)}else{const C=i.preOrderHooks;null!==C&&$o(s,C,0,null),ar(s,0)}if(function(i){for(let s=uE(i);null!==s;s=w_(s)){if(!s[2])continue;const a=s[9];for(let c=0;c<a.length;c++){const l=a[c],h=l[3];0==(1024&l[2])&&ba(h,1),l[2]|=1024}}}(s),function(i){for(let s=uE(i);null!==s;s=w_(s))for(let a=10;a<s.length;a++){const c=s[a],l=c[1];Nl(c)&&cf(l,c,l.template,c[8])}}(s),null!==i.contentQueries&&M_(i,s),!h)if(g){const C=i.contentCheckHooks;null!==C&&Ta(s,C)}else{const C=i.contentHooks;null!==C&&$o(s,C,1),ar(s,1)}!function(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const l=a[c];if(l<0)so(~l);else{const h=l,g=a[++c],v=a[++c];Ll(g,h),v(2,s[h])}}}finally{so(-1)}}(i,s);const v=i.components;null!==v&&function(i,s){for(let a=0;a<s.length;a++)OE(i,s[a])}(s,v);const I=i.viewQuery;if(null!==I&&LE(2,I,c),!h)if(g){const C=i.viewCheckHooks;null!==C&&Ta(s,C)}else{const C=i.viewHooks;null!==C&&$o(s,C,2),ar(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),h||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,ba(s[3],-1))}finally{jo()}}function _R(i,s,a,c){const l=s[10],h=!lu(),g=wa(s);try{h&&!g&&l.begin&&l.begin(),g&&hd(i,s,c),cf(i,s,a,c)}finally{h&&!g&&l.end&&l.end()}}function O_(i,s,a,c,l){const h=Nr(),g=2&c;try{so(-1),g&&s.length>20&&A_(i,s,20,lu()),a(c,l)}finally{so(h)}}function CE(i,s,a){!Ml()||(function(i,s,a,c){const l=a.directiveStart,h=a.directiveEnd;i.firstCreatePass||Ho(a,s),Or(c,s);const g=a.initialInputs;for(let v=l;v<h;v++){const I=i.data[v],C=ps(I);C&&bR(s,a,I);const R=yu(s,i,v,a);Or(R,s),null!==g&&IR(0,v-l,R,I,0,g),C&&(_i(a.index,s)[8]=R)}}(i,s,a,ki(a,s)),128==(128&a.flags)&&function(i,s,a){const c=a.directiveStart,l=a.directiveEnd,g=a.index,v=wt.lFrame.currentDirectiveIndex;try{so(g);for(let I=c;I<l;I++){const C=i.data[I],R=s[I];Ul(I),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&ci(C,R)}}finally{so(-1),Ul(v)}}(i,s,a))}function TE(i,s,a=ki){const c=s.localNames;if(null!==c){let l=s.index+1;for(let h=0;h<c.length;h+=2){const g=c[h+1],v=-1===g?a(s,i):i[g];i[l++]=v}}}function Ii(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=$c(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function $c(i,s,a,c,l,h,g,v,I,C){const R=20+c,k=R+l,L=function(i,s){const a=[];for(let c=0;c<s;c++)a.push(c<i?null:pt);return a}(R,k),W="function"==typeof C?C():C;return L[1]={type:i,blueprint:L,template:a,queries:null,viewQuery:v,declTNode:s,data:L.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof g?g():g,firstChild:null,schemas:I,consts:W,incompleteFirstPass:!1}}function ig(i,s,a,c){const l=ug(s);null===a?l.push(c):(l.push(a),i.firstCreatePass&&UE(i).push(c,l.length-1))}function L_(i,s,a){for(let c in i)if(i.hasOwnProperty(c)){const l=i[c];(a=null===a?{}:a).hasOwnProperty(c)?a[c].push(s,l):a[c]=[s,l]}return a}function is(i,s,a,c,l,h,g,v){const I=ki(s,a);let R,C=s.inputs;!v&&null!=C&&(R=C[c])?($i(i,a,R,c,l),lc(s)&&function(i,s){const a=_i(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(c=function(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),l=null!=g?g(l,s.value||"",c):l,Rn(h)?h.setProperty(I,c,l):xs(c)||(I.setProperty?I.setProperty(c,l):I[c]=l))}function RE(i,s,a,c){let l=!1;if(Ml()){const h=function(i,s,a){const c=i.directiveRegistry;let l=null;if(c)for(let h=0;h<c.length;h++){const g=c[h];S_(a,g.selectors,!1)&&(l||(l=[]),at(Ho(a,s),i,g.type),ps(g)?(B_(i,a),l.unshift(g)):l.push(g))}return l}(i,s,a),g=null===c?null:{"":-1};if(null!==h){l=!0,PE(a,i.data.length,h.length);for(let R=0;R<h.length;R++){const k=h[R];k.providersResolver&&k.providersResolver(k)}let v=!1,I=!1,C=jc(i,s,h.length,null);for(let R=0;R<h.length;R++){const k=h[R];a.mergedAttrs=Ic(a.mergedAttrs,k.hostAttrs),nC(i,a,s,C,k),wR(C,k,g),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const L=k.type.prototype;!v&&(L.ngOnChanges||L.ngOnInit||L.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),v=!0),!I&&(L.ngOnChanges||L.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),C++}!function(i,s){const c=s.directiveEnd,l=i.data,h=s.attrs,g=[];let v=null,I=null;for(let C=s.directiveStart;C<c;C++){const R=l[C],k=R.inputs,L=null===h||VI(s)?null:kE(k,h);g.push(L),v=L_(k,C,v),I=L_(R.outputs,C,I)}null!==v&&(v.hasOwnProperty("class")&&(s.flags|=16),v.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=g,s.inputs=v,s.outputs=I}(i,a)}g&&function(i,s,a){if(s){const c=i.localNames=[];for(let l=0;l<s.length;l+=2){const h=a[s[l+1]];if(null==h)throw new Te("301",`Export of name '${s[l+1]}' not found!`);c.push(s[l],h)}}}(a,c,g)}return a.mergedAttrs=Ic(a.mergedAttrs,a.attrs),l}function U_(i,s,a,c,l,h){const g=h.hostBindings;if(g){let v=i.hostBindingOpCodes;null===v&&(v=i.hostBindingOpCodes=[]);const I=~s.index;(function(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(v)!=I&&v.push(I),v.push(c,l,g)}}function ci(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function B_(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function wR(i,s,a){if(a){if(s.exportAs)for(let c=0;c<s.exportAs.length;c++)a[s.exportAs[c]]=i;ps(s)&&(a[""]=i)}}function PE(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function nC(i,s,a,c,l){i.data[c]=l;const h=l.factory||(l.factory=ro(l.type)),g=new mu(h,ps(l),null);i.blueprint[c]=g,a[c]=g,U_(i,s,0,c,jc(i,a,l.hostVars,pt),l)}function bR(i,s,a){const c=ki(s,i),l=Ii(a),h=i[10],g=ag(i,uf(i,l,null,a.onPush?64:16,c,s,h,h.createRenderer(c,a),null,null));i[s.index]=g}function mo(i,s,a,c,l,h){const g=ki(i,s);!function(i,s,a,c,l,h,g){if(null==h)Rn(i)?i.removeAttribute(s,l,a):s.removeAttribute(l);else{const v=null==g?fe(h):g(h,c||"",l);Rn(i)?i.setAttribute(s,l,v,a):a?s.setAttributeNS(a,l,v):s.setAttribute(l,v)}}(s[11],g,h,i.value,a,c,l)}function IR(i,s,a,c,l,h){const g=h[s];if(null!==g){const v=c.setInput;for(let I=0;I<g.length;){const C=g[I++],R=g[I++],k=g[I++];null!==v?c.setInput(a,k,C,R):a[R]=k}}}function kE(i,s){let a=null,c=0;for(;c<s.length;){const l=s[c];if(0!==l)if(5!==l){if("number"==typeof l)break;i.hasOwnProperty(l)&&(null===a&&(a=[]),a.push(l,i[l],s[c+1])),c+=2}else c+=2;else c+=4}return a}function rC(i,s,a,c){return new Array(i,!0,!1,s,null,0,c,a,null,null)}function OE(i,s){const a=_i(s,i);if(Nl(a)){const c=a[1];80&a[2]?cf(c,a,c.template,a[8]):a[5]>0&&$_(a)}}function $_(i){for(let c=uE(i);null!==c;c=w_(c))for(let l=10;l<c.length;l++){const h=c[l];if(1024&h[2]){const g=h[1];cf(g,h,g.template,h[8])}else h[5]>0&&$_(h)}const a=i[1].components;if(null!==a)for(let c=0;c<a.length;c++){const l=_i(a[c],i);Nl(l)&&l[5]>0&&$_(l)}}function TR(i,s){const a=_i(s,i),c=a[1];(function(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(c,a),hd(c,a,a[8])}function ag(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function H_(i){for(;i;){i[2]|=64;const s=Xp(i);if(Pi(i)&&!s)return i;i=s}return null}function FE(i,s,a){const c=s[10];c.begin&&c.begin();try{cf(i,s,i.template,a)}catch(l){throw VE(s,l),l}finally{c.end&&c.end()}}function sC(i){!function(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],c=m_(a),l=c[1];_R(l,c,l.template,a)}}(i[8])}function LE(i,s,a){Bo(0),s(i,a)}const oC=(()=>Promise.resolve(null))();function ug(i){return i[7]||(i[7]=[])}function UE(i){return i.cleanup||(i.cleanup=[])}function VE(i,s){const a=i[9],c=a?a.get(Qh,null):null;c&&c.handleError(s)}function $i(i,s,a,c,l){for(let h=0;h<a.length;){const g=a[h++],v=a[h++],I=s[g],C=i.data[g];null!==C.setInput?C.setInput(I,l,c,v):I[v]=l}}function ja(i,s,a){const c=function(i,s){return Xt(s[i])}(s,i);!function(i,s,a){Rn(i)?i.setValue(s,a):s.textContent=a}(i[11],c,a)}function Hc(i,s,a){let c=a?i.styles:null,l=a?i.classes:null,h=0;if(null!==s)for(let g=0;g<s.length;g++){const v=s[g];"number"==typeof v?h=v:1==h?l=oe(l,v):2==h&&(c=oe(c,v+": "+s[++g]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=l:i.classesWithoutHost=l}const fd=new xn("INJECTOR",-1);class BE{get(s,a=ft){if(a===ft){const c=new Error(`NullInjectorError: No provider for ${te(s)}!`);throw c.name="NullInjectorError",c}return a}}const Mu=new xn("Set Injector scope."),pd={},jE={};let cg;function lg(){return void 0===cg&&(cg=new BE),cg}function $E(i,s=null,a=null,c){return new SR(i,a,s||lg(),c)}class SR{constructor(s,a,c,l=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const h=[];a&&ms(a,v=>this.processProvider(v,s,a)),ms([s],v=>this.processInjectorType(v,[],h)),this.records.set(fd,gd(void 0,this));const g=this.records.get(Mu);this.scope=null!=g?g.value:null,this.source=l||("object"==typeof s?null:te(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=ft,c=tt.Default){this.assertNotDestroyed();const l=ys(this),h=Kn(void 0);try{if(!(c&tt.SkipSelf)){let v=this.records.get(s);if(void 0===v){const I=("function"==typeof(i=s)||"object"==typeof i&&i instanceof xn)&&qn(s);v=I&&this.injectableDefInScope(I)?gd(hg(s),pd):null,this.records.set(s,v)}if(null!=v)return this.hydrate(s,v)}return(c&tt.Self?lg():this.parent).get(s,a=c&tt.Optional&&a===ft?null:a)}catch(g){if("NullInjectorError"===g.name){if((g[bt]=g[bt]||[]).unshift(te(s)),l)throw g;return Uh(g,s,"R3InjectorError",this.source)}throw g}finally{Kn(h),ys(l)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((c,l)=>s.push(te(l))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(s,a,c){if(!(s=q(s)))return!1;let l=ei(s);const h=null==l&&s.ngModule||void 0,g=void 0===h?s:h,v=-1!==c.indexOf(g);if(void 0!==h&&(l=ei(h)),null==l)return!1;if(null!=l.imports&&!v){let R;c.push(g);try{ms(l.imports,k=>{this.processInjectorType(k,a,c)&&(void 0===R&&(R=[]),R.push(k))})}finally{}if(void 0!==R)for(let k=0;k<R.length;k++){const{ngModule:L,providers:W}=R[k];ms(W,X=>this.processProvider(X,L,W||G))}}this.injectorDefTypes.add(g);const I=ro(g)||(()=>new g);this.records.set(g,gd(I,pd));const C=l.providers;if(null!=C&&!v){const R=s;ms(C,k=>this.processProvider(k,R,C))}return void 0!==h&&void 0!==s.providers}processProvider(s,a,c){let l=md(s=q(s))?s:q(s&&s.provide);const h=WE(i=s)?gd(void 0,i.useValue):gd(function(i,s,a){let c;if(md(i)){const l=q(i);return ro(l)||hg(l)}if(WE(i))c=()=>q(i.useValue);else if(function(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...es(i.deps||[]));else if(function(i){return!(!i||!i.useExisting)}(i))c=()=>er(q(i.useExisting));else{const l=q(i&&(i.useClass||i.provide));if(!function(i){return!!i.deps}(i))return ro(l)||hg(l);c=()=>new l(...es(i.deps))}return c}(i),pd);var i;if(md(s)||!0!==s.multi)this.records.get(l);else{let g=this.records.get(l);g||(g=gd(void 0,pd,!0),g.factory=()=>es(g.multi),this.records.set(l,g)),l=s,g.multi.push(s)}this.records.set(l,h)}hydrate(s,a){return a.value===pd&&(a.value=jE,a.value=a.factory()),"object"==typeof a.value&&a.value&&null!==(i=a.value)&&"object"==typeof i&&"function"==typeof i.ngOnDestroy&&this.onDestroy.add(a.value),a.value;var i}injectableDefInScope(s){if(!s.providedIn)return!1;const a=q(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function hg(i){const s=qn(i),a=null!==s?s.factory:ro(i);if(null!==a)return a;if(i instanceof xn)throw new Error(`Token ${te(i)} is missing a \u0275prov definition.`);if(i instanceof Function)return function(i){const s=i.length;if(s>0){const c=function(i,s){const a=[];for(let c=0;c<i;c++)a.push(s);return a}(s,"?");throw new Error(`Can't resolve all parameters for ${te(i)}: (${c.join(", ")}).`)}const a=function(i){const s=i&&(i[ti]||i[zn]);if(s){const a=function(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Error("unreachable")}function gd(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function WE(i){return null!==i&&"object"==typeof i&&Xi in i}function md(i){return"function"==typeof i}const yd=function(i,s,a){return function(i,s=null,a=null,c){const l=$E(i,s,a,c);return l._resolveInjectorDefTypes(),l}({name:a},s,i,a)};let Un=(()=>{class i{static create(a,c){return Array.isArray(a)?yd(a,c,""):yd(a.providers,a.parent,a.name||"")}}return i.THROW_IF_NOT_FOUND=ft,i.NULL=new BE,i.\u0275prov=Kt({token:i,providedIn:"any",factory:()=>er(fd)}),i.__NG_ELEMENT_ID__=-1,i})();function J_(i,s){Ca(m_(i)[1],bn())}let Eg=null;function Ed(){if(!Eg){const i=yt.Symbol;if(i&&i.iterator)Eg=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const c=s[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Eg=c)}}}return Eg}function _f(i){return!!nw(i)&&(Array.isArray(i)||!(i instanceof Map)&&Ed()in i)}function nw(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Ci(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function wg(i,s,a,c){const l=Ae();return Ci(l,gs(),s)&&(Ot(),mo(Qn(),l,i,s,a,c)),wg}function yf(i,s,a,c){return Ci(i,gs(),a)?s+fe(a)+c:pt}function cw(i,s,a,c,l,h,g,v){const I=Ae(),C=Ot(),R=i+20,k=C.firstCreatePass?function(i,s,a,c,l,h,g,v,I){const C=s.consts,R=ku(s,i,4,g||null,Qi(C,v));RE(s,a,R,Qi(C,I)),Ca(s,R);const k=R.tViews=$c(2,R,c,l,h,s.directiveRegistry,s.pipeRegistry,null,s.schemas,C);return null!==s.queries&&(s.queries.template(s,R),k.queries=s.queries.embeddedTView(R)),R}(R,C,I,s,a,c,l,h,g):C.data[R];ii(k,!1);const L=I[11].createComment("");C_(C,I,L,k),Or(L,I),ag(I,I[R]=rC(L,I,L,k)),ou(k)&&CE(C,I,k),null!=g&&TE(I,k,v)}function Dd(i){return function(i,s){return i[s]}(wt.lFrame.contextLView,20+i)}function Dg(i,s=tt.Default){const a=Ae();return null===a?er(i,s):Wl(bn(),a,q(i),s)}function gw(i,s,a){const c=Ae();return Ci(c,gs(),s)&&is(Ot(),Qn(),c,i,s,c[11],a,!1),gw}function Ha(i,s,a,c,l){const g=l?"class":"style";$i(i,a,s.inputs[g],g,c)}function Hu(i,s,a,c){const l=Ae(),h=Ot(),g=20+i,v=l[11],I=l[g]=lE(v,s,wt.lFrame.currentNamespace),C=h.firstCreatePass?function(i,s,a,c,l,h,g){const v=s.consts,C=ku(s,i,2,l,Qi(v,h));return RE(s,a,C,Qi(v,g)),null!==C.attrs&&Hc(C,C.attrs,!1),null!==C.mergedAttrs&&Hc(C,C.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,C),C}(g,h,l,0,s,a,c):h.data[g];ii(C,!0);const R=C.mergedAttrs;null!==R&&Hl(v,I,R);const k=C.classes;null!==k&&mE(v,I,k);const L=C.styles;null!==L&&FI(v,I,L),64!=(64&C.flags)&&C_(h,l,I,C),0===wt.lFrame.elementDepthCount&&Or(I,l),wt.lFrame.elementDepthCount++,ou(C)&&(CE(h,l,C),function(i,s,a){if(bl(s)){const l=s.directiveEnd;for(let h=s.directiveStart;h<l;h++){const g=i.data[h];g.contentQueries&&g.contentQueries(1,a[h],h)}}}(h,C,l)),null!==c&&TE(l,C)}function Sg(){let i=bn();Lo()?wt.lFrame.isParent=!1:(i=i.parent,ii(i,!1));const s=i;wt.lFrame.elementDepthCount--;const a=Ot();a.firstCreatePass&&(Ca(a,i),bl(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function(i){return 0!=(16&i.flags)}(s)&&Ha(a,s,Ae(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function(i){return 0!=(32&i.flags)}(s)&&Ha(a,s,Ae(),s.stylesWithoutHost,!1)}function mw(i,s,a,c){Hu(i,s,a,c),Sg()}function _w(){return Ae()}function Ge(i){return!!i&&"function"==typeof i.then}function Gu(i){return!!i&&"function"==typeof i.subscribe}const bf=Gu;function Wu(i,s,a,c){const l=Ae(),h=Ot(),g=bn();return function(i,s,a,c,l,h,g,v){const I=ou(c),R=i.firstCreatePass&&UE(i),k=s[8],L=ug(s);let W=!0;if(3&c.type||v){const se=ki(c,s),Le=v?v(se):se,Ce=L.length,ut=v?At=>v(Xt(At[c.index])):c.index;if(Rn(a)){let At=null;if(!v&&I&&(At=function(i,s,a,c){const l=i.cleanup;if(null!=l)for(let h=0;h<l.length-1;h+=2){const g=l[h];if(g===a&&l[h+1]===c){const v=s[7],I=l[h+2];return v.length>I?v[I]:null}"string"==typeof g&&(h+=2)}return null}(i,s,l,c.index)),null!==At)(At.__ngLastListenerFn__||At).__ngNextListenerFn__=h,At.__ngLastListenerFn__=h,W=!1;else{h=Zc(c,s,k,h,!1);const en=a.listen(Le,l,h);L.push(h,en),R&&R.push(l,ut,Ce,Ce+1)}}else h=Zc(c,s,k,h,!0),Le.addEventListener(l,h,g),L.push(h),R&&R.push(l,ut,Ce,g)}else h=Zc(c,s,k,h,!1);const X=c.outputs;let he;if(W&&null!==X&&(he=X[l])){const se=he.length;if(se)for(let Le=0;Le<se;Le+=2){const Qr=s[he[Le]][he[Le+1]].subscribe(h),Do=L.length;L.push(h,Qr),R&&R.push(l,c.index,Do,-(Do+1))}}}(h,l,l[11],g,i,s,!!a,c),Wu}function yw(i,s,a,c){try{return!1!==a(c)}catch(l){return VE(i,l),!1}}function Zc(i,s,a,c,l){return function h(g){if(g===Function)return c;const v=2&i.flags?_i(i.index,s):s;0==(32&s[2])&&H_(v);let I=yw(s,0,c,g),C=h.__ngNextListenerFn__;for(;C;)I=yw(s,0,C,g)&&I,C=C.__ngNextListenerFn__;return l&&!1===I&&(g.preventDefault(),g.returnValue=!1),I}}function ty(i,s,a){return ny(i,"",s,"",a),ty}function ny(i,s,a,c,l){const h=Ae(),g=yf(h,s,a,c);return g!==pt&&is(Ot(),Qn(),h,i,g,h[11],l,!1),ny}function oy(i,s=""){const a=Ae(),c=Ot(),l=i+20,h=c.firstCreatePass?ku(c,l,1,s,null):c.data[l],g=a[l]=function(i,s){return Rn(i)?i.createText(s):i.createTextNode(s)}(a[11],s);C_(c,a,g,h),ii(h,!1)}function Mg(i){return Og("",i,""),Mg}function Og(i,s,a){const c=Ae(),l=yf(c,i,s,a);return l!==pt&&ja(c,Nr(),l),Og}function dy(i,s,a){const c=Ae();return Ci(c,gs(),s)&&is(Ot(),Qn(),c,i,s,c[11],a,!0),dy}const Hs=void 0;var aT=["en",[["a","p"],["AM","PM"],Hs],[["AM","PM"],Hs,Hs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Hs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Hs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Hs,"{1} 'at' {0}",Hs],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(i){const s=Math.floor(Math.abs(i)),a=i.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let Fd={};function Vg(i){const s=function(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=an(s);if(a)return a;const c=s.split("-")[0];if(a=an(c),a)return a;if("en"===c)return aT;throw new Error(`Missing locale data for the locale "${i}".`)}function Tr(i){return Vg(i)[_t.PluralCase]}function an(i){return i in Fd||(Fd[i]=yt.ng&&yt.ng.common&&yt.ng.common.locales&&yt.ng.common.locales[i]),Fd[i]}var _t=(()=>((_t=_t||{})[_t.LocaleId=0]="LocaleId",_t[_t.DayPeriodsFormat=1]="DayPeriodsFormat",_t[_t.DayPeriodsStandalone=2]="DayPeriodsStandalone",_t[_t.DaysFormat=3]="DaysFormat",_t[_t.DaysStandalone=4]="DaysStandalone",_t[_t.MonthsFormat=5]="MonthsFormat",_t[_t.MonthsStandalone=6]="MonthsStandalone",_t[_t.Eras=7]="Eras",_t[_t.FirstDayOfWeek=8]="FirstDayOfWeek",_t[_t.WeekendRange=9]="WeekendRange",_t[_t.DateFormat=10]="DateFormat",_t[_t.TimeFormat=11]="TimeFormat",_t[_t.DateTimeFormat=12]="DateTimeFormat",_t[_t.NumberSymbols=13]="NumberSymbols",_t[_t.NumberFormats=14]="NumberFormats",_t[_t.CurrencyCode=15]="CurrencyCode",_t[_t.CurrencySymbol=16]="CurrencySymbol",_t[_t.CurrencyName=17]="CurrencyName",_t[_t.Currencies=18]="Currencies",_t[_t.Directionality=19]="Directionality",_t[_t.PluralCase=20]="PluralCase",_t[_t.ExtraData=21]="ExtraData",_t))();const fy="en-US";let uT=fy;function kf(i){Pn(i,"Expected localeId to be defined"),"string"==typeof i&&(uT=i.toLowerCase().replace(/_/g,"-"))}class Kg{}const tl="ngComponent";class Yg{resolveComponentFactory(s){throw function(i){const s=Error(`No component factory found for ${te(i)}. Did you add it to @NgModule.entryComponents?`);return s[tl]=i,s}(s)}}let Ud=(()=>{class i{}return i.NULL=new Yg,i})();function Jg(...i){}function Vd(i,s){return new Gi(ki(i,s))}const Xg=function(){return Vd(bn(),Ae())};let Gi=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=Xg,i})();function LT(i){return i instanceof Gi?i.nativeElement:i}class _y{}let kx=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>Bd(),i})();const Bd=function(){const i=Ae(),a=_i(bn().index,i);return function(i){return i[11]}(to(a)?a:i)};let Gw=(()=>{class i{}return i.\u0275prov=Kt({token:i,providedIn:"root",factory:()=>null}),i})();class VT{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const em=new VT("12.2.16");class tm{constructor(){}supports(s){return _f(s)}create(s){return new nm(s)}}const Ox=(i,s)=>s;class nm{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||Ox}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,c=this._removalsHead,l=0,h=null;for(;a||c;){const g=!c||a&&a.currentIndex<os(c,l,h)?a:c,v=os(g,l,h),I=g.currentIndex;if(g===c)l--,c=c._nextRemoved;else if(a=a._next,null==g.previousIndex)l++;else{h||(h=[]);const C=v-l,R=I-l;if(C!=R){for(let L=0;L<C;L++){const W=L<h.length?h[L]:h[L]=0,X=W+L;R<=X&&X<C&&(h[L]=W+1)}h[g.previousIndex]=R-C}}v!==I&&s(g,v,I)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!_f(s))throw new Error(`Error trying to diff '${te(s)}'. Only arrays and iterables are allowed`);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let l,h,g,a=this._itHead,c=!1;if(Array.isArray(s)){this.length=s.length;for(let v=0;v<this.length;v++)h=s[v],g=this._trackByFn(v,h),null!==a&&Object.is(a.trackById,g)?(c&&(a=this._verifyReinsertion(a,h,g,v)),Object.is(a.item,h)||this._addIdentityChange(a,h)):(a=this._mismatch(a,h,g,v),c=!0),a=a._next}else l=0,function(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Ed()]();let c;for(;!(c=a.next()).done;)s(c.value)}}(s,v=>{g=this._trackByFn(l,v),null!==a&&Object.is(a.trackById,g)?(c&&(a=this._verifyReinsertion(a,v,g,l)),Object.is(a.item,v)||this._addIdentityChange(a,v)):(a=this._mismatch(a,v,g,l),c=!0),a=a._next,l++}),this.length=l;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,c,l){let h;return null===s?h=this._itTail:(h=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,h,l)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(c,l))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,h,l)):s=this._addAfter(new vy(a,c),h,l),s}_verifyReinsertion(s,a,c,l){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==h?s=this._reinsertAfter(h,s._prev,l):s.currentIndex!=l&&(s.currentIndex=l,this._addToMoves(s,l)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const l=s._prevRemoved,h=s._nextRemoved;return null===l?this._removalsHead=h:l._nextRemoved=h,null===h?this._removalsTail=l:h._prevRemoved=l,this._insertAfter(s,a,c),this._addToMoves(s,c),s}_moveAfter(s,a,c){return this._unlink(s),this._insertAfter(s,a,c),this._addToMoves(s,c),s}_addAfter(s,a,c){return this._insertAfter(s,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,c){const l=null===a?this._itHead:a._next;return s._next=l,s._prev=a,null===l?this._itTail=s:l._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new Ww),this._linkedRecords.put(s),s.currentIndex=c,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,c=s._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ww),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class vy{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ey{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,s))return c;return null}remove(s){const a=s._prevDup,c=s._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class Ww{constructor(){this.map=new Map}put(s){const a=s.trackById;let c=this.map.get(a);c||(c=new Ey,this.map.set(a,c)),c.add(s)}get(s,a){const l=this.map.get(s);return l?l.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function os(i,s,a){const c=i.previousIndex;if(null===c)return c;let l=0;return a&&c<a.length&&(l=a[c]),c+s+l}class qw{constructor(){}supports(s){return s instanceof Map||nw(s)}create(){return new wy}}class wy{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||nw(s)))throw new Error(`Error trying to diff '${te(s)}'. Only maps and objects are allowed`)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(c,l)=>{if(a&&a.key===l)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const h=this._getOrCreateRecordForKey(l,c);a=this._insertBeforeOrAppend(a,h)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const c=s._prev;return a._next=s,a._prev=c,s._prev=a,c&&(c._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const l=this._records.get(s);this._maybeAddToChanges(l,a);const h=l._prev,g=l._next;return h&&(h._next=g),g&&(g._prev=h),l._next=null,l._prev=null,l}const c=new zw(s);return this._records.set(s,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(c=>a(s[c],c))}}class zw{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Kw(){return new ia([new tm])}let ia=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const l=c.factories.slice();a=a.concat(l)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||Kw()),deps:[[i,new Fn,new Os]]}}find(a){const c=this.factories.find(l=>l.supports(a));if(null!=c)return c;throw new Error(`Cannot find a differ supporting object '${a}' of type '${function(i){return i.name||typeof i}(a)}'`)}}return i.\u0275prov=Kt({token:i,providedIn:"root",factory:Kw}),i})();function Zw(){return new Za([new qw])}let Za=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const l=c.factories.slice();a=a.concat(l)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||Zw()),deps:[[i,new Fn,new Os]]}}find(a){const c=this.factories.find(l=>l.supports(a));if(c)return c;throw new Error(`Cannot find a differ supporting object '${a}'`)}}return i.\u0275prov=Kt({token:i,providedIn:"root",factory:Zw}),i})();function by(i,s,a,c,l=!1){for(;null!==a;){const h=s[a.index];if(null!==h&&c.push(Xt(h)),cn(h))for(let v=10;v<h.length;v++){const I=h[v],C=I[1].firstChild;null!==C&&by(I[1],I,C,c)}const g=a.type;if(8&g)by(i,s,a.child,c);else if(32&g){const v=aE(a,s);let I;for(;I=v();)c.push(I)}else if(16&g){const v=kI(s,a);if(Array.isArray(v))c.push(...v);else{const I=Xp(s[16]);by(I[1],I,v,c,!0)}}a=l?a.projectionNext:a.next}return c}class Ya{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return by(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(cn(s)){const a=s[8],c=a?a.indexOf(this):-1;c>-1&&(eg(s,c),Ei(a,c))}this._attachedToViewContainer=!1}hE(this._lView[1],this._lView)}onDestroy(s){ig(this._lView[1],this._lView,null,s)}markForCheck(){H_(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){FE(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(i,s,a){io(!0);try{FE(i,s,a)}finally{io(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var s;this._appRef=null,nf(this._lView[1],s=this._lView,s[11],2,null,null)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=s}}class BT extends Ya{constructor(s){super(s),this._view=s}detectChanges(){sC(this._view)}checkNoChanges(){!function(i){io(!0);try{sC(i)}finally{io(!1)}}(this._view)}get context(){return null}}const Yw=function(i){return function(i,s,a){if(lc(i)&&!a){const c=_i(i.index,s);return new Ya(c,c)}return 47&i.type?new Ya(s[16],s):null}(bn(),Ae(),16==(16&i))};let jT=(()=>{class i{}return i.__NG_ELEMENT_ID__=Yw,i})();const Vx=[new qw],Iy=new ia([new tm]),$T=new Za(Vx),HT=function(){return Cy(bn(),Ae())};let sa=(()=>{class i{}return i.__NG_ELEMENT_ID__=HT,i})();const rm=sa,GT=class extends rm{constructor(s,a,c){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(s){const a=this._declarationTContainer.tViews,c=uf(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const h=this._declarationLView[19];return null!==h&&(c[19]=h.createEmbeddedView(a)),hd(a,c,s),new Ya(c)}};function Cy(i,s){return 4&i.type?new GT(s,i,Vd(i,s)):null}class rl{}class Ty{}const Sy=function(){return e0(bn(),Ae())};let jf=(()=>{class i{}return i.__NG_ELEMENT_ID__=Sy,i})();const Jw=jf,Xw=class extends Jw{constructor(s,a,c){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=c}get element(){return Vd(this._hostTNode,this._hostLView)}get injector(){return new Ps(this._hostTNode,this._hostLView)}get parentInjector(){const s=jt(this._hostTNode,this._hostLView);if(Gl(s)){const a=Da(s,this._hostLView),c=ao(s);return new Ps(a[1].data[c+8],a)}return new Ps(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=qT(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,c){const l=s.createEmbeddedView(a||{});return this.insert(l,c),l}createComponent(s,a,c,l,h){const g=c||this.parentInjector;if(!h&&null==s.ngModule&&g){const I=g.get(rl,null);I&&(h=I)}const v=s.create(g,l,void 0,h);return this.insert(v.hostView,a),v}insert(s,a){const c=s._lView,l=c[1];if(cn(c[3])){const R=this.indexOf(s);if(-1!==R)this.detach(R);else{const k=c[3],L=new Xw(k,k[6],k[3]);L.detach(L.indexOf(s))}}const h=this._adjustIndex(a),g=this._lContainer;!function(i,s,a,c){const l=10+c,h=a.length;c>0&&(a[l-1][4]=s),c<h-10?(s[4]=a[l],ka(a,10+c,s)):(a.push(s),s[4]=null),s[3]=a;const g=s[17];null!==g&&a!==g&&function(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(g,s);const v=s[19];null!==v&&v.insertView(i),s[2]|=128}(l,c,g,h);const v=T_(h,g),I=c[11],C=Fr(I,g[7]);return null!==C&&function(i,s,a,c,l,h){c[0]=l,c[6]=s,nf(i,c,a,1,l,h)}(l,g[6],I,c,C,v),s.attachToViewContainerRef(),ka(Ay(g),h,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=qT(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),c=eg(this._lContainer,a);c&&(Ei(Ay(this._lContainer),a),hE(c[1],c))}detach(s){const a=this._adjustIndex(s,-1),c=eg(this._lContainer,a);return c&&null!=Ei(Ay(this._lContainer),a)?new Ya(c):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function qT(i){return i[8]}function Ay(i){return i[8]||(i[8]=[])}function e0(i,s){let a;const c=s[i.index];if(cn(c))a=c;else{let l;if(8&i.type)l=Xt(c);else{const h=s[11];l=h.createComment("");const g=ki(i,s);cd(h,Fr(h,g),l,function(i,s){return Rn(i)?i.nextSibling(s):s.nextSibling}(h,g),!1)}s[i.index]=a=rC(c,s,l,i),ag(s,a)}return new Xw(a,i,s)}const Zd={};class By extends Ud{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Tt(s);return new $y(a,this.ngModule)}}function jy(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}const S0=new xn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Jh});class $y extends Kg{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=s.selectors.map(cR).join(","),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return jy(this.componentDef.inputs)}get outputs(){return jy(this.componentDef.outputs)}create(s,a,c,l){const h=(l=l||this.ngModule)?function(i,s){return{get:(a,c,l)=>{const h=i.get(a,Zd,l);return h!==Zd||c===Zd?h:s.get(a,c,l)}}}(s,l.injector):s,g=h.get(_y,Mo),v=h.get(Gw,null),I=g.createRenderer(null,this.componentDef),C=this.componentDef.selectors[0][0]||"div",R=c?function(i,s,a){if(Rn(i))return i.selectRootElement(s,a===qe.ShadowDom);let c="string"==typeof s?i.querySelector(s):s;return c.textContent="",c}(I,c,this.componentDef.encapsulation):lE(g.createRenderer(null,this.componentDef),C,function(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(C)),k=this.componentDef.onPush?576:528,L=function(i,s){return{components:[],scheduler:i||Jh,clean:oC,playerHandler:s||null,flags:0}}(),W=$c(0,null,null,1,0,null,null,null,null,null),X=uf(null,W,L,k,null,null,g,I,v,h);let he,se;pu(X);try{const Le=function(i,s,a,c,l,h){const g=a[1];a[20]=i;const I=ku(g,20,2,"#host",null),C=I.mergedAttrs=s.hostAttrs;null!==C&&(Hc(I,C,!0),null!==i&&(Hl(l,i,C),null!==I.classes&&mE(l,i,I.classes),null!==I.styles&&FI(l,i,I.styles)));const R=c.createRenderer(i,s),k=uf(a,Ii(s),null,s.onPush?64:16,a[20],I,c,R,h||null,null);return g.firstCreatePass&&(at(Ho(I,a),g,s.type),B_(g,I),PE(I,a.length,1)),ag(a,k),a[20]=k}(R,this.componentDef,X,g,I);if(R)if(c)Hl(I,R,["ng-version",em.full]);else{const{attrs:Ce,classes:ut}=function(i){const s=[],a=[];let c=1,l=2;for(;c<i.length;){let h=i[c];if("string"==typeof h)2===l?""!==h&&s.push(h,i[++c]):8===l&&a.push(h);else{if(!Xo(l))break;l=h}c++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Ce&&Hl(I,R,Ce),ut&&ut.length>0&&mE(I,R,ut.join(" "))}if(se=xl(W,20),void 0!==a){const Ce=se.projection=[];for(let ut=0;ut<this.ngContentSelectors.length;ut++){const At=a[ut];Ce.push(null!=At?Array.from(At):null)}}he=function(i,s,a,c,l){const h=a[1],g=function(i,s,a){const c=bn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),nC(i,c,s,jc(i,s,1,null),a));const l=yu(s,i,c.directiveStart,c);Or(l,s);const h=ki(c,s);return h&&Or(h,s),l}(h,a,s);if(c.components.push(g),i[8]=g,l&&l.forEach(I=>I(g,s)),s.contentQueries){const I=bn();s.contentQueries(1,g,I.directiveStart)}const v=bn();return!h.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(so(v.index),U_(a[1],v,0,v.directiveStart,v.directiveEnd,s),ci(s,g)),g}(Le,this.componentDef,X,L,[J_]),hd(W,X,null)}finally{jo()}return new ED(this.componentType,he,Vd(se,X),X,se)}}class ED extends class{}{constructor(s,a,c,l,h){super(),this.location=c,this._rootLView=l,this._tNode=h,this.instance=a,this.hostView=this.changeDetectorRef=new BT(l),this.componentType=s}get injector(){return new Ps(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}const al=new Map;class A0 extends rl{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new By(this);const c=On(s),l=s[Me]||null;l&&kf(l),this._bootstrapComponents=Va(c.bootstrap),this._r3Injector=$E(s,a,[{provide:rl,useValue:this},{provide:Ud,useValue:this.componentFactoryResolver}],te(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=Un.THROW_IF_NOT_FOUND,c=tt.Default){return s===Un||s===rl||s===fd?this:this._r3Injector.get(s,a,c)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class lm extends Ty{constructor(s){super(),this.moduleType=s,null!==On(s)&&function(i){const s=new Set;!function a(c){const l=On(c,!0),h=l.id;null!==h&&(function(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${te(s)} vs ${te(s.name)}`)}(h,al.get(h),c),al.set(h,c));const g=Va(l.imports);for(const v of g)s.has(v)||(s.add(v),a(v))}(i)}(s)}create(s){return new A0(this.moduleType,s)}}function fm(i){return s=>{setTimeout(i,void 0,s)}}const Co=class extends m.xQ{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,c){var l,h,g;let v=s,I=a||(()=>null),C=c;if(s&&"object"==typeof s){const k=s;v=null===(l=k.next)||void 0===l?void 0:l.bind(k),I=null===(h=k.error)||void 0===h?void 0:h.bind(k),C=null===(g=k.complete)||void 0===g?void 0:g.bind(k)}this.__isAsync&&(I=fm(I),v&&(v=fm(v)),C&&(C=fm(C)));const R=super.subscribe({next:v,error:I,complete:C});return s instanceof $.w&&s.add(R),R}};function L0(){return this._results[Ed()]()}class qy{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Ed(),c=qy.prototype;c[a]||(c[a]=L0)}get changes(){return this._changes||(this._changes=new Co)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const c=this;c.dirty=!1;const l=vi(s);(this._changesDetected=!function(i,s,a){if(i.length!==s.length)return!1;for(let c=0;c<i.length;c++){let l=i[c],h=s[c];if(a&&(l=a(l),h=a(h)),h!==l)return!1}return!0}(c._results,l,a))&&(c._results=l,c.length=l.length,c.last=l[this.length-1],c.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class pm{constructor(s){this.queryList=s,this.matches=null}clone(){return new pm(this.queryList)}setDirty(){this.queryList.setDirty()}}class zy{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const c=null!==s.contentQueries?s.contentQueries[0]:a.length,l=[];for(let h=0;h<c;h++){const g=a.getByIndex(h);l.push(this.queries[g.indexInDeclarationView].clone())}return new zy(l)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==Qd(s,a).matches&&this.queries[a].setDirty()}}class gm{constructor(s,a,c=null){this.predicate=s,this.flags=a,this.read=c}}class U0{constructor(s=[]){this.queries=s}elementStart(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let c=0;c<this.length;c++){const l=null!==a?a.length:0,h=this.getByIndex(c).embeddedTView(s,l);h&&(h.indexInDeclarationView=c,null!==a?a.push(h):a=[h])}return null!==a?new U0(a):null}template(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class V0{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new V0(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=s.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let l=0;l<c.length;l++){const h=c[l];this.matchTNodeWithReadOption(s,a,mN(a,h)),this.matchTNodeWithReadOption(s,a,Tc(a,s,h,!1,!1))}else c===sa?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Tc(a,s,c,!1,!1))}matchTNodeWithReadOption(s,a,c){if(null!==c){const l=this.metadata.read;if(null!==l)if(l===Gi||l===jf||l===sa&&4&a.type)this.addMatch(a.index,-2);else{const h=Tc(a,s,l,!1,!1);null!==h&&this.addMatch(a.index,h)}else this.addMatch(a.index,c)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function mN(i,s){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===s)return a[c+1];return null}function ND(i,s,a,c){return-1===a?function(i,s){return 11&i.type?Vd(i,s):4&i.type?Cy(i,s):null}(s,i):-2===a?function(i,s,a){return a===Gi?Vd(s,i):a===sa?Cy(s,i):a===jf?e0(s,i):void 0}(i,s,c):yu(i,i[1],a,s)}function j0(i,s,a,c){const l=s[19].queries[c];if(null===l.matches){const h=i.data,g=a.matches,v=[];for(let I=0;I<g.length;I+=2){const C=g[I];v.push(C<0?null:ND(s,h[C],g[I+1],a.metadata.read))}l.matches=v}return l.matches}function mm(i,s,a,c){const l=i.queries.getByIndex(a),h=l.matches;if(null!==h){const g=j0(i,s,l,a);for(let v=0;v<h.length;v+=2){const I=h[v];if(I>0)c.push(g[v/2]);else{const C=h[v+1],R=s[-I];for(let k=10;k<R.length;k++){const L=R[k];L[17]===L[3]&&mm(L[1],L,C,c)}if(null!==R[9]){const k=R[9];for(let L=0;L<k.length;L++){const W=k[L];mm(W[1],W,C,c)}}}}}return c}function Ky(i){const s=Ae(),a=Ot(),c=Th();Bo(c+1);const l=Qd(a,c);if(i.dirty&&wa(s)===(2==(2&l.metadata.flags))){if(null===l.matches)i.reset([]);else{const h=l.crossesNgTemplate?mm(a,s,c,[]):j0(a,s,l,c);i.reset(h,LT),i.notifyOnChanges()}return!0}return!1}function _m(i,s,a,c){const l=Ot();if(l.firstCreatePass){const h=bn();(function(i,s,a){null===i.queries&&(i.queries=new U0),i.queries.track(new V0(s,a))})(l,new gm(s,a,c),h.index),function(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(l,i),2==(2&a)&&(l.staticContentQueries=!0)}!function(i,s,a){const c=new qy(4==(4&a));ig(i,s,c,c.destroy),null===s[19]&&(s[19]=new zy),s[19].queries.push(new pm(c))}(l,Ae(),a)}function Zy(){return i=Ae(),s=Th(),i[19].queries[s].queryList;var i,s}function Qd(i,s){return i.queries.getByIndex(s)}const Xd=new xn("Application Initializer");let tp=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Jg,this.reject=Jg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,l)=>{this.resolve=c,this.reject=l})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const h=this.appInits[l]();if(Ge(h))a.push(h);else if(bf(h)){const g=new Promise((v,I)=>{h.subscribe({complete:v,error:I})});a.push(g)}}Promise.all(a).then(()=>{c()}).catch(l=>{this.reject(l)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(er(Xd,8))},i.\u0275prov=Kt({token:i,factory:i.\u0275fac}),i})();const Em=new xn("AppId"),ec={provide:Em,useFactory:function(){return`${th()}${th()}${th()}`},deps:[]};function th(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const tc=new xn("Platform Initializer"),QD=new xn("Platform ID"),ib=new xn("appBootstrapListener");let np=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Kt({token:i,factory:i.\u0275fac}),i})();const ua=new xn("LocaleId"),JD=new xn("DefaultCurrencyCode");class eS{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}const rv=function(i){return new lm(i)},LN=rv,tS=function(i){return Promise.resolve(rv(i))},sb=function(i){const s=rv(i),c=Va(On(i).declarations).reduce((l,h)=>{const g=Tt(h);return g&&l.push(new $y(g)),l},[]);return new eS(s,c)},BN=sb,jN=function(i){return Promise.resolve(sb(i))};let rp=(()=>{class i{constructor(){this.compileModuleSync=LN,this.compileModuleAsync=tS,this.compileModuleAndAllComponentsSync=BN,this.compileModuleAndAllComponentsAsync=jN}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Kt({token:i,factory:i.\u0275fac}),i})();const nh=(()=>Promise.resolve(0))();function ab(i){"undefined"==typeof Zone?nh.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Ws{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Co(!1),this.onMicrotaskEmpty=new Co(!1),this.onStable=new Co(!1),this.onError=new Co(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!c&&a,l.shouldCoalesceRunChangeDetection=c,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function(){let i=yt.requestAnimationFrame,s=yt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function(i){const s=()=>{!function(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(yt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,cb(i),i.isCheckStableRunning=!0,ub(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),cb(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,l,h,g,v)=>{try{return sS(i),a.invokeTask(l,h,g,v)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||i.shouldCoalesceRunChangeDetection)&&s(),lb(i)}},onInvoke:(a,c,l,h,g,v,I)=>{try{return sS(i),a.invoke(l,h,g,v,I)}finally{i.shouldCoalesceRunChangeDetection&&s(),lb(i)}},onHasTask:(a,c,l,h)=>{a.hasTask(l,h),c===l&&("microTask"==h.change?(i._hasPendingMicrotasks=h.microTask,cb(i),ub(i)):"macroTask"==h.change&&(i.hasPendingMacrotasks=h.macroTask))},onHandleError:(a,c,l,h)=>(a.handleError(l,h),i.runOutsideAngular(()=>i.onError.emit(h)),!1)})}(l)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ws.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ws.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,c){return this._inner.run(s,a,c)}runTask(s,a,c,l){const h=this._inner,g=h.scheduleEventTask("NgZoneEvent: "+l,s,GN,Jg,Jg);try{return h.runTask(g,a,c)}finally{h.cancelTask(g)}}runGuarded(s,a,c){return this._inner.runGuarded(s,a,c)}runOutsideAngular(s){return this._outer.run(s)}}const GN={};function ub(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function cb(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function sS(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function lb(i){i._nesting--,ub(i)}class WN{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Co,this.onMicrotaskEmpty=new Co,this.onStable=new Co,this.onError=new Co}run(s,a,c){return s.apply(a,c)}runGuarded(s,a,c){return s.apply(a,c)}runOutsideAngular(s){return s()}runTask(s,a,c,l){return s.apply(a,c)}}let rh=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ws.assertNotInAngularZone(),ab(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ab(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,l){let h=-1;c&&c>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(g=>g.timeoutId!==h),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:h,updateCb:l})}whenStable(a,c,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,c,l){return[]}}return i.\u0275fac=function(a){return new(a||i)(er(Ws))},i.\u0275prov=Kt({token:i,factory:i.\u0275fac}),i})(),iv=(()=>{class i{constructor(){this._applications=new Map,db.addToWindow(this)}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return db.findTestabilityInTree(this,a,c)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Kt({token:i,factory:i.\u0275fac}),i})();class qN{addToWindow(s){}findTestabilityInTree(s,a,c){return null}}function zN(i){db=i}let db=new qN,oS=!0,aS=!1;function hb(){return aS=!0,oS}function KN(){if(aS)throw new Error("Cannot enable prod mode after platform setup.");oS=!1}let Ja;const lS=new xn("AllowMultipleToken");class QN{constructor(s,a){this.name=s,this.token=a}}function wm(i,s,a=[]){const c=`Platform: ${s}`,l=new xn(c);return(h=[])=>{let g=gb();if(!g||g.injector.get(lS,!1))if(i)i(a.concat(h).concat({provide:l,useValue:!0}));else{const v=a.concat(h).concat({provide:l,useValue:!0},{provide:Mu,useValue:"platform"});!function(i){if(Ja&&!Ja.destroyed&&!Ja.injector.get(lS,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Ja=i.get(ll);const s=i.get(tc,null);s&&s.forEach(a=>a())}(Un.create({providers:v,name:c}))}return function(i){const s=gb();if(!s)throw new Error("No platform exists!");if(!s.injector.get(i,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return s}(l)}}function gb(){return Ja&&!Ja.destroyed?Ja:null}let ll=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const v=function(i,s){let a;return a="noop"===i?new WN:("zone.js"===i?void 0:i)||new Ws({enableLongStackTrace:hb(),shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),I=[{provide:Ws,useValue:v}];return v.run(()=>{const C=Un.create({providers:I,parent:this.injector,name:a.moduleType.name}),R=a.create(C),k=R.injector.get(Qh,null);if(!k)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return v.runOutsideAngular(()=>{const L=v.onError.subscribe({next:W=>{k.handleError(W)}});R.onDestroy(()=>{ih(this._modules,R),L.unsubscribe()})}),function(i,s,a){try{const c=a();return Ge(c)?c.catch(l=>{throw s.runOutsideAngular(()=>i.handleError(l)),l}):c}catch(c){throw s.runOutsideAngular(()=>i.handleError(c)),c}}(k,v,()=>{const L=R.injector.get(tp);return L.runInitializers(),L.donePromise.then(()=>(kf(R.injector.get(ua,fy)||fy),this._moduleDoBootstrap(R),R))})})}bootstrapModule(a,c=[]){const l=mb({},c);return function(i,s,a){const c=new lm(a);return Promise.resolve(c)}(0,0,a).then(h=>this.bootstrapModuleFactory(h,l))}_moduleDoBootstrap(a){const c=a.injector.get(ip);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(l=>c.bootstrap(l));else{if(!a.instance.ngDoBootstrap)throw new Error(`The module ${te(a.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(er(Un))},i.\u0275prov=Kt({token:i,factory:i.\u0275fac}),i})();function mb(i,s){return Array.isArray(s)?s.reduce(mb,i):Object.assign(Object.assign({},i),s)}let ip=(()=>{class i{constructor(a,c,l,h,g){this._zone=a,this._injector=c,this._exceptionHandler=l,this._componentFactoryResolver=h,this._initStatus=g,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new O.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),I=new O.y(C=>{let R;this._zone.runOutsideAngular(()=>{R=this._zone.onStable.subscribe(()=>{Ws.assertNotInAngularZone(),ab(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const k=this._zone.onUnstable.subscribe(()=>{Ws.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{R.unsubscribe(),k.unsubscribe()}});this.isStable=(0,ae.T)(v,I.pipe((0,le.B)()))}bootstrap(a,c){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let l;l=a instanceof Kg?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(l.componentType);const h=function(i){return i.isBoundToModule}(l)?void 0:this._injector.get(rl),v=l.create(Un.NULL,[],c||l.selector,h),I=v.location.nativeElement,C=v.injector.get(rh,null),R=C&&v.injector.get(iv);return C&&R&&R.registerApplication(I,C),v.onDestroy(()=>{this.detachView(v.hostView),ih(this.components,v),R&&R.unregisterApplication(I)}),this._loadComponent(v),v}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;ih(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(ib,[]).concat(this._bootstrapListeners).forEach(l=>l(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(er(Ws),er(Un),er(Qh),er(Ud),er(tp))},i.\u0275prov=Kt({token:i,factory:i.\u0275fac}),i})();function ih(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}class eP{}class nP{}const rP={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let _b=(()=>{class i{constructor(a,c){this._compiler=a,this._config=c||rP}load(a){return this.loadAndCompile(a)}loadAndCompile(a){let[c,l]=a.split("#");return void 0===l&&(l="default"),U(8255)(c).then(h=>h[l]).then(h=>ap(h,c,l)).then(h=>this._compiler.compileModuleAsync(h))}loadFactory(a){let[c,l]=a.split("#"),h="NgFactory";return void 0===l&&(l="default",h=""),U(8255)(this._config.factoryPathPrefix+c+this._config.factoryPathSuffix).then(g=>g[l+h]).then(g=>ap(g,c,l))}}return i.\u0275fac=function(a){return new(a||i)(er(rp),er(nP,8))},i.\u0275prov=Kt({token:i,factory:i.\u0275fac}),i})();function ap(i,s,a){if(!i)throw new Error(`Cannot find '${a}' in '${s}'`);return i}const cO=function(i){return null},Ib=wm(null,"core",[{provide:QD,useValue:"unknown"},{provide:ll,deps:[Un]},{provide:iv,deps:[]},{provide:np,deps:[]}]),pP=[{provide:ip,useClass:ip,deps:[Ws,Un,Qh,Ud,tp]},{provide:S0,deps:[Ws],useFactory:function(i){let s=[];return i.onStable.subscribe(()=>{for(;s.length;)s.pop()()}),function(a){s.push(a)}}},{provide:tp,useClass:tp,deps:[[new Os,Xd]]},{provide:rp,useClass:rp,deps:[]},ec,{provide:ia,useFactory:function(){return Iy},deps:[]},{provide:Za,useFactory:function(){return $T},deps:[]},{provide:ua,useFactory:function(i){return kf(i=i||"undefined"!=typeof $localize&&$localize.locale||fy),i},deps:[[new Cu(ua),new Os,new Fn]]},{provide:JD,useValue:"USD"}];let mP=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(er(ip))},i.\u0275mod=Z({type:i}),i.\u0275inj=Tn({providers:pP}),i})()},8939:(Qe,Ee,U)=>{"use strict";U.d(Ee,{hO:()=>ce,xv:()=>oe,Dh:()=>te,GT:()=>ne,cc:()=>pe,on:()=>V,pX:()=>le});var m=U(7716),$=U(7841),O=U(2871);Qe=U.hmd(Qe);const ae=["ngOnDestroy"],le=(fe,De,xe,Xe={})=>new Proxy(fe,{get:(dt,Wt)=>xe.runOutsideAngular(()=>{var Lt;if(fe[Wt])return(null===(Lt=null==Xe?void 0:Xe.spy)||void 0===Lt?void 0:Lt.get)&&Xe.spy.get(Wt,fe[Wt]),fe[Wt];if(ae.indexOf(Wt)>-1)return()=>{};const vt=De.toPromise().then(Oe=>{const Fe=Oe&&Oe[Wt];return"function"==typeof Fe?Fe.bind(Oe):Fe&&Fe.then?Fe.then($e=>xe.run(()=>$e)):xe.run(()=>Fe)});return new Proxy(()=>{},{get:(Oe,Fe)=>vt[Fe],apply:(Oe,Fe,$e)=>vt.then(mt=>{var it;const Et=mt&&mt(...$e);return(null===(it=null==Xe?void 0:Xe.spy)||void 0===it?void 0:it.apply)&&Xe.spy.apply(Wt,$e,Et),Et})})})}),ne=(fe,De)=>{De.forEach(xe=>{Object.getOwnPropertyNames(xe.prototype||xe).forEach(Xe=>{Object.defineProperty(fe.prototype,Xe,Object.getOwnPropertyDescriptor(xe.prototype||xe,Xe))})})};class be{constructor(De){return De}}const te=new m.OlP("angularfire2.app.options"),oe=new m.OlP("angularfire2.app.name");function V(fe,De,xe){const dt="object"==typeof xe&&xe||{};dt.name=dt.name||"string"==typeof xe&&xe||"[DEFAULT]";const Lt=$.Z.apps.filter(vt=>vt&&vt.name===dt.name)[0]||De.runOutsideAngular(()=>$.Z.initializeApp(fe,dt));try{JSON.stringify(fe)!==JSON.stringify(Lt.options)&&H("error",`${Lt.name} Firebase App already initialized with different options${Qe.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(vt){}return new be(Lt)}const H=(fe,...De)=>{(0,m.X6Q)()&&"undefined"!=typeof console&&console[fe](...De)},q={provide:be,useFactory:V,deps:[te,m.R0b,[new m.FiY,oe]]};let ce=(()=>{class fe{constructor(xe){$.Z.registerVersion("angularfire",O.q4.full,"core"),$.Z.registerVersion("angularfire",O.q4.full,"app-compat"),$.Z.registerVersion("angular",m.q4F.full,xe.toString())}static initializeApp(xe,Xe){return{ngModule:fe,providers:[{provide:te,useValue:xe},{provide:oe,useValue:Xe}]}}}return fe.\u0275fac=function(xe){return new(xe||fe)(m.LFG(m.Lbi))},fe.\u0275mod=m.oAB({type:fe}),fe.\u0275inj=m.cJS({providers:[q]}),fe})();function pe(fe,De,xe,Xe,dt){const[,Wt,Lt]=globalThis.\u0275AngularfireInstanceCache.find(vt=>vt[0]===fe)||[];if(Wt)return function(fe,De){try{return fe.toString()===De.toString()}catch(xe){return fe===De}}(dt,Lt)||(Be("error",`${De} was already initialized on the ${xe} Firebase App with different settings.${we?" You may need to reload as Firebase is not HMR aware.":""}`),Be("warn",{is:dt,was:Lt})),Wt;{const vt=Xe();return globalThis.\u0275AngularfireInstanceCache.push([fe,vt,dt]),vt}}const we=!!Qe.hot,Be=(fe,...De)=>{(0,m.X6Q)()&&"undefined"!=typeof console&&console[fe](...De)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2871:(Qe,Ee,U)=>{"use strict";U.d(Ee,{q4:()=>i_,iC:()=>Vi,fc:()=>Zl,HU:()=>Fp,vb:()=>ka,JM:()=>ms});var m=U(7716),$=U(2329),O=U(8239),ae=U(8026),le=U(3854),ne=U(3910),be=U(5422),te=U(4544);const oe="@firebase/installations",V="0.5.9",q=`w:${V}`,ce="FIS_v2",De=new le.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function xe(T){return T instanceof le.ZR&&T.code.includes("request-failed")}function Xe({projectId:T}){return`https://firebaseinstallations.googleapis.com/v1/projects/${T}/installations`}function dt(T){return{token:T.token,requestStatus:2,expiresIn:mt(T.expiresIn),creationTime:Date.now()}}function Wt(T,S){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,O.Z)(function*(T,S){const B=(yield S.json()).error;return De.create("request-failed",{requestName:T,serverCode:B.code,serverMessage:B.message,serverStatus:B.status})})).apply(this,arguments)}function vt({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function Oe(T,{refreshToken:S}){const P=vt(T);return P.append("Authorization",function(T){return`${ce} ${T}`}(S)),P}function Fe(T){return $e.apply(this,arguments)}function $e(){return($e=(0,O.Z)(function*(T){const S=yield T();return S.status>=500&&S.status<600?T():S})).apply(this,arguments)}function mt(T){return Number(T.replace("s","000"))}function Et(T,S){return We.apply(this,arguments)}function We(){return(We=(0,O.Z)(function*({appConfig:T,heartbeatServiceProvider:S},{fid:P}){const B=Xe(T),re=vt(T),ue=S.getImmediate({optional:!0});if(ue){const ft=yield ue.getHeartbeatsHeader();ft&&re.append("x-firebase-client",ft)}const Je={method:"POST",headers:re,body:JSON.stringify({fid:P,authVersion:ce,appId:T.appId,sdkVersion:q})},gt=yield Fe(()=>fetch(B,Je));if(gt.ok){const ft=yield gt.json();return{fid:ft.fid||P,registrationStatus:2,refreshToken:ft.refreshToken,authToken:dt(ft.authToken)}}throw yield Wt("Create Installation",gt)})).apply(this,arguments)}function Br(T){return new Promise(S=>{setTimeout(S,T)})}const zi=/^[cdef][\w-]{21}$/;function Pn(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const P=function(T){return function(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return zi.test(P)?P:""}catch(T){return""}}function Xr(T){return`${T.appName}!${T.appId}`}const Ki=new Map;function hs(T,S){const P=Xr(T);Tn(P,S),function(T,S){const P=(!pn&&"BroadcastChannel"in self&&(pn=new BroadcastChannel("[Firebase] FID Change"),pn.onmessage=T=>{Tn(T.data.key,T.data.fid)}),pn);P&&P.postMessage({key:T,fid:S}),0===Ki.size&&pn&&(pn.close(),pn=null)}(P,S)}function Tn(T,S){const P=Ki.get(T);if(P)for(const B of P)B(S)}let pn=null;const Ne="firebase-installations-store";let zn=null;function dr(){return zn||(zn=(0,te.X3)("firebase-installations-database",1,{upgrade:(T,S)=>{switch(S){case 0:T.createObjectStore(Ne)}}})),zn}function tt(T,S){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,O.Z)(function*(T,S){const P=Xr(T),re=(yield dr()).transaction(Ne,"readwrite"),ue=re.objectStore(Ne),ke=yield ue.get(P);return yield ue.put(S,P),yield re.done,(!ke||ke.fid!==S.fid)&&hs(T,S.fid),S})).apply(this,arguments)}function Dn(T){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,O.Z)(function*(T){const S=Xr(T),B=(yield dr()).transaction(Ne,"readwrite");yield B.objectStore(Ne).delete(S),yield B.done})).apply(this,arguments)}function Zn(T,S){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,O.Z)(function*(T,S){const P=Xr(T),re=(yield dr()).transaction(Ne,"readwrite"),ue=re.objectStore(Ne),ke=yield ue.get(P),Je=S(ke);return void 0===Je?yield ue.delete(P):yield ue.put(Je,P),yield re.done,Je&&(!ke||ke.fid!==Je.fid)&&hs(T,Je.fid),Je})).apply(this,arguments)}function kn(T){return mn.apply(this,arguments)}function mn(){return(mn=(0,O.Z)(function*(T){let S;const P=yield Zn(T.appConfig,B=>{const re=Ro(B),ue=ln(T,re);return S=ue.registrationPromise,ue.installationEntry});return""===P.fid?{installationEntry:yield S}:{installationEntry:P,registrationPromise:S}})).apply(this,arguments)}function Ro(T){return yt(T||{fid:Pn(),registrationStatus:0})}function ln(T,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(De.create("app-offline"))};const P={fid:S.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:P,registrationPromise:function(T,S){return ot.apply(this,arguments)}(T,P)}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:fs(T)}:{installationEntry:S}}function ot(){return(ot=(0,O.Z)(function*(T,S){try{const P=yield Et(T,S);return tt(T.appConfig,P)}catch(P){throw xe(P)&&409===P.customData.serverCode?yield Dn(T.appConfig):yield tt(T.appConfig,{fid:S.fid,registrationStatus:0}),P}})).apply(this,arguments)}function fs(T){return hi.apply(this,arguments)}function hi(){return(hi=(0,O.Z)(function*(T){let S=yield Jt(T.appConfig);for(;1===S.registrationStatus;)yield Br(100),S=yield Jt(T.appConfig);if(0===S.registrationStatus){const{installationEntry:P,registrationPromise:B}=yield kn(T);return B||P}return S})).apply(this,arguments)}function Jt(T){return Zn(T,S=>{if(!S)throw De.create("installation-not-found");return yt(S)})}function yt(T){return function(T){return 1===T.registrationStatus&&T.registrationTime+1e4<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function jn(T,S){return K.apply(this,arguments)}function K(){return(K=(0,O.Z)(function*({appConfig:T,heartbeatServiceProvider:S},P){const B=G(T,P),re=Oe(T,P),ue=S.getImmediate({optional:!0});if(ue){const ft=yield ue.getHeartbeatsHeader();ft&&re.append("x-firebase-client",ft)}const Je={method:"POST",headers:re,body:JSON.stringify({installation:{sdkVersion:q,appId:T.appId}})},gt=yield Fe(()=>fetch(B,Je));if(gt.ok)return dt(yield gt.json());throw yield Wt("Generate Auth Token",gt)})).apply(this,arguments)}function G(T,{fid:S}){return`${Xe(T)}/${S}/authTokens:generate`}function Q(T){return ve.apply(this,arguments)}function ve(){return(ve=(0,O.Z)(function*(T,S=!1){let P;const B=yield Zn(T.appConfig,ue=>{if(!Rt(ue))throw De.create("not-registered");const ke=ue.authToken;if(!S&&_n(ke))return ue;if(1===ke.requestStatus)return P=z(T,S),ue;{if(!navigator.onLine)throw De.create("app-offline");const Je=hr(ue);return P=Ke(T,Je),Je}});return P?yield P:B.authToken})).apply(this,arguments)}function z(T,S){return ie.apply(this,arguments)}function ie(){return(ie=(0,O.Z)(function*(T,S){let P=yield Me(T.appConfig);for(;1===P.authToken.requestStatus;)yield Br(100),P=yield Me(T.appConfig);const B=P.authToken;return 0===B.requestStatus?Q(T,S):B})).apply(this,arguments)}function Me(T){return Zn(T,S=>{if(!Rt(S))throw De.create("not-registered");return function(T){return 1===T.requestStatus&&T.requestTime+1e4<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function Ke(T,S){return ht.apply(this,arguments)}function ht(){return(ht=(0,O.Z)(function*(T,S){try{const P=yield jn(T,S),B=Object.assign(Object.assign({},S),{authToken:P});return yield tt(T.appConfig,B),P}catch(P){if(!xe(P)||401!==P.customData.serverCode&&404!==P.customData.serverCode){const B=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield tt(T.appConfig,B)}else yield Dn(T.appConfig);throw P}})).apply(this,arguments)}function Rt(T){return void 0!==T&&2===T.registrationStatus}function _n(T){return 2===T.requestStatus&&!function(T){const S=Date.now();return S<T.creationTime||T.creationTime+T.expiresIn<S+36e5}(T)}function hr(T){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:S})}function Z(){return(Z=(0,O.Z)(function*(T){const S=T,{installationEntry:P,registrationPromise:B}=yield kn(S);return B?B.catch(console.error):Q(S).catch(console.error),P.fid})).apply(this,arguments)}function He(){return(He=(0,O.Z)(function*(T,S=!1){const P=T;return yield Nt(P),(yield Q(P,S)).token})).apply(this,arguments)}function Nt(T){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,O.Z)(function*(T){const{registrationPromise:S}=yield kn(T);S&&(yield S)})).apply(this,arguments)}function yn(T){return De.create("missing-app-config-values",{valueName:T})}const ni="installations";(0,ae._registerComponent)(new ne.wA(ni,T=>{const S=T.getProvider("app").getImmediate();return{app:S,appConfig:function(T){if(!T||!T.options)throw yn("App Configuration");if(!T.name)throw yn("App Name");const S=["projectId","apiKey","appId"];for(const P of S)if(!T.options[P])throw yn(P);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(S),heartbeatServiceProvider:(0,ae._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,ae._registerComponent)(new ne.wA("installations-internal",T=>{const S=T.getProvider("app").getImmediate(),P=(0,ae._getProvider)(S,ni).getImmediate();return{getId:()=>function(T){return Z.apply(this,arguments)}(P),getToken:re=>function(T){return He.apply(this,arguments)}(P,re)}},"PRIVATE")),(0,ae.registerVersion)(oe,V),(0,ae.registerVersion)(oe,V,"esm2017");const pi="@firebase/remote-config",br=new le.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ou{constructor(S,P,B,re){this.client=S,this.storage=P,this.storageCache=B,this.logger=re}isCachedDataFresh(S,P){if(!P)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const B=Date.now()-P,re=B<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${B}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${re}.`),re}fetch(S){var P=this;return(0,O.Z)(function*(){const[B,re]=yield Promise.all([P.storage.getLastSuccessfulFetchTimestampMillis(),P.storage.getLastSuccessfulFetchResponse()]);if(re&&P.isCachedDataFresh(S.cacheMaxAgeMillis,B))return re;S.eTag=re&&re.eTag;const ue=yield P.client.fetch(S),ke=[P.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ue.status&&ke.push(P.storage.setLastSuccessfulFetchResponse(ue)),yield Promise.all(ke),ue})()}}function ps(T=navigator){return T.languages&&T.languages[0]||T.language}class Pi{constructor(S,P,B,re,ue,ke){this.firebaseInstallations=S,this.sdkVersion=P,this.namespace=B,this.projectId=re,this.apiKey=ue,this.appId=ke}fetch(S){var P=this;return(0,O.Z)(function*(){const[B,re]=yield Promise.all([P.firebaseInstallations.getId(),P.firebaseInstallations.getToken()]),ke=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${P.projectId}/namespaces/${P.namespace}:fetch?key=${P.apiKey}`,Je={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},gt={sdk_version:P.sdkVersion,app_instance_id:B,app_instance_id_token:re,app_id:P.appId,language_code:ps()},ft={method:"POST",headers:Je,body:JSON.stringify(gt)},Yt=fetch(ke,ft),bt=new Promise((Xi,_s)=>{S.signal.addEventListener(()=>{const ys=new Error("The operation was aborted.");ys.name="AbortError",_s(ys)})});let Bi;try{yield Promise.race([Yt,bt]),Bi=yield Yt}catch(Xi){let _s="fetch-client-network";throw"AbortError"===Xi.name&&(_s="fetch-timeout"),br.create(_s,{originalErrorMessage:Xi.message})}let Xn=Bi.status;const Oa=Bi.headers.get("ETag")||void 0;let Iu,Rc;if(200===Bi.status){let Xi;try{Xi=yield Bi.json()}catch(_s){throw br.create("fetch-client-parse",{originalErrorMessage:_s.message})}Iu=Xi.entries,Rc=Xi.state}if("INSTANCE_STATE_UNSPECIFIED"===Rc?Xn=500:"NO_CHANGE"===Rc?Xn=304:("NO_TEMPLATE"===Rc||"EMPTY_CONFIG"===Rc)&&(Iu={}),304!==Xn&&200!==Xn)throw br.create("fetch-status",{httpStatus:Xn});return{status:Xn,eTag:Oa,config:Iu}})()}}class fh{constructor(S,P){this.client=S,this.storage=P}fetch(S){var P=this;return(0,O.Z)(function*(){const B=(yield P.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return P.attemptFetch(S,B)})()}attemptFetch(S,{throttleEndTimeMillis:P,backoffCount:B}){var re=this;return(0,O.Z)(function*(){yield function(T,S){return new Promise((P,B)=>{const re=Math.max(S-Date.now(),0),ue=setTimeout(P,re);T.addEventListener(()=>{clearTimeout(ue),B(br.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,P);try{const ue=yield re.client.fetch(S);return yield re.storage.deleteThrottleMetadata(),ue}catch(ue){if(!function(T){if(!(T instanceof le.ZR&&T.customData))return!1;const S=Number(T.customData.httpStatus);return 429===S||500===S||503===S||504===S}(ue))throw ue;const ke={throttleEndTimeMillis:Date.now()+(0,le.$s)(B),backoffCount:B+1};return yield re.storage.setThrottleMetadata(ke),re.attemptFetch(S,ke)}})()}}class gh{constructor(S,P,B,re,ue){this.app=S,this._client=P,this._storageCache=B,this._storage=re,this._logger=ue,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Il(T,S){const P=T.target.error||void 0;return br.create(S,{originalErrorMessage:P&&P.message})}const no="app_namespace_store";class _h{constructor(S,P,B,re=function(){return new Promise((T,S)=>{try{const P=indexedDB.open("firebase_remote_config",1);P.onerror=B=>{S(Il(B,"storage-open"))},P.onsuccess=B=>{T(B.target.result)},P.onupgradeneeded=B=>{const re=B.target.result;switch(B.oldVersion){case 0:re.createObjectStore(no,{keyPath:"compositeKey"})}}}catch(P){S(br.create("storage-open",{originalErrorMessage:P}))}})}()){this.appId=S,this.appName=P,this.namespace=B,this.openDbPromise=re}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var P=this;return(0,O.Z)(function*(){const B=yield P.openDbPromise;return new Promise((re,ue)=>{const Je=B.transaction([no],"readonly").objectStore(no),gt=P.createCompositeKey(S);try{const ft=Je.get(gt);ft.onerror=Yt=>{ue(Il(Yt,"storage-get"))},ft.onsuccess=Yt=>{const bt=Yt.target.result;re(bt?bt.value:void 0)}}catch(ft){ue(br.create("storage-get",{originalErrorMessage:ft&&ft.message}))}})})()}set(S,P){var B=this;return(0,O.Z)(function*(){const re=yield B.openDbPromise;return new Promise((ue,ke)=>{const gt=re.transaction([no],"readwrite").objectStore(no),ft=B.createCompositeKey(S);try{const Yt=gt.put({compositeKey:ft,value:P});Yt.onerror=bt=>{ke(Il(bt,"storage-set"))},Yt.onsuccess=()=>{ue()}}catch(Yt){ke(br.create("storage-set",{originalErrorMessage:Yt&&Yt.message}))}})})()}delete(S){var P=this;return(0,O.Z)(function*(){const B=yield P.openDbPromise;return new Promise((re,ue)=>{const Je=B.transaction([no],"readwrite").objectStore(no),gt=P.createCompositeKey(S);try{const ft=Je.delete(gt);ft.onerror=Yt=>{ue(Il(Yt,"storage-delete"))},ft.onsuccess=()=>{re()}}catch(ft){ue(br.create("storage-delete",{originalErrorMessage:ft&&ft.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class Xm{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,O.Z)(function*(){const P=S.storage.getLastFetchStatus(),B=S.storage.getLastSuccessfulFetchTimestampMillis(),re=S.storage.getActiveConfig(),ue=yield P;ue&&(S.lastFetchStatus=ue);const ke=yield B;ke&&(S.lastSuccessfulFetchTimestampMillis=ke);const Je=yield re;Je&&(S.activeConfig=Je)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function Tp(){return ma.apply(this,arguments)}function ma(){return(ma=(0,O.Z)(function*(){if(!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch(T){return!1}})).apply(this,arguments)}(0,ae._registerComponent)(new ne.wA("remote-config",function(S,{instanceIdentifier:P}){const B=S.getProvider("app").getImmediate(),re=S.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw br.create("registration-window");if(!(0,le.hl)())throw br.create("indexed-db-unavailable");const{projectId:ue,apiKey:ke,appId:Je}=B.options;if(!ue)throw br.create("registration-project-id");if(!ke)throw br.create("registration-api-key");if(!Je)throw br.create("registration-app-id");const gt=new _h(Je,B.name,P=P||"firebase"),ft=new Xm(gt),Yt=new be.Yd(pi);Yt.logLevel=be.in.ERROR;const bt=new Pi(re,ae.SDK_VERSION,P,ue,ke,Je),Bi=new fh(bt,gt),Xn=new ou(Bi,gt,ft,Yt),Oa=new gh(B,Xn,ft,gt,Yt);return function(T){const S=(0,le.m9)(T);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(Oa),Oa},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(pi,"0.3.8"),(0,ae.registerVersion)(pi,"0.3.8","esm2017");const Tl="/firebase-messaging-sw.js",vh="/firebase-cloud-messaging-push-scope",Dl="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ro="google.c.a.c_id",Sl="google.c.a.c_l",No="google.c.a.ts",Zi="google.c.a.e";var _a=(()=>{return(T=_a||(_a={})).PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",_a;var T})();function sr(T){const S=new Uint8Array(T);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Dp(T){const P=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),B=atob(P),re=new Uint8Array(B.length);for(let ue=0;ue<B.length;++ue)re[ue]=B.charCodeAt(ue);return re}const ya="fcm_token_details_db",Al="fcm_token_object_Store";function Yi(T){return Po.apply(this,arguments)}function Po(){return(Po=(0,O.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ue=>ue.name).includes(ya))return null;let S=null;return(yield(0,te.X3)(ya,5,{upgrade:(B=(0,O.Z)(function*(re,ue,ke,Je){var gt;if(ue<2||!re.objectStoreNames.contains(Al))return;const ft=Je.objectStore(Al),Yt=yield ft.index("fcmSenderId").get(T);if(yield ft.clear(),Yt)if(2===ue){const bt=Yt;if(!bt.auth||!bt.p256dh||!bt.endpoint)return;S={token:bt.fcmToken,createTime:null!==(gt=bt.createTime)&&void 0!==gt?gt:Date.now(),subscriptionOptions:{auth:bt.auth,p256dh:bt.p256dh,endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:"string"==typeof bt.vapidKey?bt.vapidKey:sr(bt.vapidKey)}}}else if(3===ue){const bt=Yt;S={token:bt.fcmToken,createTime:bt.createTime,subscriptionOptions:{auth:sr(bt.auth),p256dh:sr(bt.p256dh),endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:sr(bt.vapidKey)}}}else if(4===ue){const bt=Yt;S={token:bt.fcmToken,createTime:bt.createTime,subscriptionOptions:{auth:sr(bt.auth),p256dh:sr(bt.p256dh),endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:sr(bt.vapidKey)}}}}),function(ue,ke,Je,gt){return B.apply(this,arguments)})})).close(),yield(0,te.Lj)(ya),yield(0,te.Lj)("fcm_vapid_details_db"),yield(0,te.Lj)("undefined"),bh(S)?S:null;var B})).apply(this,arguments)}function bh(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:S}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}const ri="firebase-messaging-store";let Ih=null;function Rn(){return Ih||(Ih=(0,te.X3)("firebase-messaging-database",1,{upgrade:(T,S)=>{switch(S){case 0:T.createObjectStore(ri)}}})),Ih}function ko(T){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,O.Z)(function*(T){const S=Ea(T),B=yield(yield Rn()).transaction(ri).objectStore(ri).get(S);if(B)return B;{const re=yield Yi(T.appConfig.senderId);if(re)return yield au(T,re),re}})).apply(this,arguments)}function au(T,S){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,O.Z)(function*(T,S){const P=Ea(T),re=(yield Rn()).transaction(ri,"readwrite");return yield re.objectStore(ri).put(S,P),yield re.done,S})).apply(this,arguments)}function va(T){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,O.Z)(function*(T){const S=Ea(T),B=(yield Rn()).transaction(ri,"readwrite");yield B.objectStore(ri).delete(S),yield B.done})).apply(this,arguments)}function Ea({appConfig:T}){return T.appId}const or=new le.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function xl(T,S){return mi.apply(this,arguments)}function mi(){return(mi=(0,O.Z)(function*(T,S){const P=yield jr(T),B=wt(S),re={method:"POST",headers:P,body:JSON.stringify(B)};let ue;try{ue=yield(yield fetch(Qi(T.appConfig),re)).json()}catch(ke){throw or.create("token-subscribe-failed",{errorInfo:ke})}if(ue.error)throw or.create("token-subscribe-failed",{errorInfo:ue.error.message});if(!ue.token)throw or.create("token-subscribe-no-token");return ue.token})).apply(this,arguments)}function _i(T,S){return wa.apply(this,arguments)}function wa(){return(wa=(0,O.Z)(function*(T,S){const P=yield jr(T),B=wt(S.subscriptionOptions),re={method:"PATCH",headers:P,body:JSON.stringify(B)};let ue;try{ue=yield(yield fetch(`${Qi(T.appConfig)}/${S.token}`,re)).json()}catch(ke){throw or.create("token-update-failed",{errorInfo:ke})}if(ue.error)throw or.create("token-update-failed",{errorInfo:ue.error.message});if(!ue.token)throw or.create("token-update-no-token");return ue.token})).apply(this,arguments)}function Nl(T,S){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,O.Z)(function*(T,S){const B={method:"DELETE",headers:yield jr(T)};try{const ue=yield(yield fetch(`${Qi(T.appConfig)}/${S}`,B)).json();if(ue.error)throw or.create("token-unsubscribe-failed",{errorInfo:ue.error.message})}catch(re){throw or.create("token-unsubscribe-failed",{errorInfo:re})}})).apply(this,arguments)}function Qi({projectId:T}){return`https://fcmregistrations.googleapis.com/v1/projects/${T}/registrations`}function jr(T){return ba.apply(this,arguments)}function ba(){return(ba=(0,O.Z)(function*({appConfig:T,installations:S}){const P=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${P}`})})).apply(this,arguments)}function wt({p256dh:T,auth:S,endpoint:P,vapidKey:B}){const re={web:{endpoint:P,auth:S,p256dh:T}};return B!==Dl&&(re.web.applicationPubKey=B),re}const Pl=6048e5;function pc(T){return gc.apply(this,arguments)}function gc(){return(gc=(0,O.Z)(function*(T){const S=yield uu(T.swRegistration,T.vapidKey),P={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:S.endpoint,auth:sr(S.getKey("auth")),p256dh:sr(S.getKey("p256dh"))},B=yield ko(T.firebaseDependencies);if(B){if(cu(B.subscriptionOptions,P))return Date.now()>=B.createTime+Pl?Ol(T,{token:B.token,createTime:Date.now(),subscriptionOptions:P}):B.token;try{yield Nl(T.firebaseDependencies,B.token)}catch(re){console.warn(re)}return Ae(T.firebaseDependencies,P)}return Ae(T.firebaseDependencies,P)})).apply(this,arguments)}function kl(T){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,O.Z)(function*(T){const S=yield ko(T.firebaseDependencies);S&&(yield Nl(T.firebaseDependencies,S.token),yield va(T.firebaseDependencies));const P=yield T.swRegistration.pushManager.getSubscription();return!P||P.unsubscribe()})).apply(this,arguments)}function Ol(T,S){return As.apply(this,arguments)}function As(){return(As=(0,O.Z)(function*(T,S){try{const P=yield _i(T.firebaseDependencies,S),B=Object.assign(Object.assign({},S),{token:P,createTime:Date.now()});return yield au(T.firebaseDependencies,B),P}catch(P){throw yield kl(T),P}})).apply(this,arguments)}function Ae(T,S){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,O.Z)(function*(T,S){const B={token:yield xl(T,S),createTime:Date.now(),subscriptionOptions:S};return yield au(T,B),B.token})).apply(this,arguments)}function uu(T,S){return bn.apply(this,arguments)}function bn(){return(bn=(0,O.Z)(function*(T,S){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Dp(S)})})).apply(this,arguments)}function cu(T,S){return S.vapidKey===T.vapidKey&&S.endpoint===T.endpoint&&S.auth===T.auth&&S.p256dh===T.p256dh}function Rs(T){const S={from:T.from,collapseKey:T.collapse_key,messageId:T.fcmMessageId};return function(T,S){if(!S.notification)return;T.notification={};const P=S.notification.title;P&&(T.notification.title=P);const B=S.notification.body;B&&(T.notification.body=B);const re=S.notification.image;re&&(T.notification.image=re)}(S,T),function(T,S){!S.data||(T.data=S.data)}(S,T),function(T,S){if(!S.fcmOptions)return;T.fcmOptions={};const P=S.fcmOptions.link;P&&(T.fcmOptions.link=P);const B=S.fcmOptions.analytics_label;B&&(T.fcmOptions.analyticsLabel=B)}(S,T),S}function Sp(T){return"object"==typeof T&&!!T&&ro in T}function mc(T,S){const P=[];for(let B=0;B<T.length;B++)P.push(T.charAt(B)),B<S.length&&P.push(S.charAt(B));return P.join("")}function io(T){return or.create("missing-app-config-values",{valueName:T})}mc("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),mc("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class fr{constructor(S,P,B){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const re=function(T){if(!T||!T.options)throw io("App Configuration Object");if(!T.name)throw io("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:P}=T;for(const B of S)if(!P[B])throw io(B);return{appName:T.name,projectId:P.projectId,apiKey:P.apiKey,appId:P.appId,senderId:P.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:re,installations:P,analyticsProvider:B}}_delete(){return Promise.resolve()}}function si(T){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,O.Z)(function*(T){try{T.swRegistration=yield navigator.serviceWorker.register(Tl,{scope:vh}),T.swRegistration.update().catch(()=>{})}catch(S){throw or.create("failed-service-worker-registration",{browserErrorMessage:S.message})}})).apply(this,arguments)}function gs(T,S){return xr.apply(this,arguments)}function xr(){return(xr=(0,O.Z)(function*(T,S){if(!S&&!T.swRegistration&&(yield si(T)),S||!T.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw or.create("invalid-sw-registration");T.swRegistration=S}})).apply(this,arguments)}function Ch(T,S){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,O.Z)(function*(T,S){S?T.vapidKey=S:T.vapidKey||(T.vapidKey=Dl)})).apply(this,arguments)}function du(){return(du=(0,O.Z)(function*(T,S){if(!navigator)throw or.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw or.create("permission-blocked");return yield Ch(T,null==S?void 0:S.vapidKey),yield gs(T,null==S?void 0:S.serviceWorkerRegistration),pc(T)})).apply(this,arguments)}function Ul(T,S,P){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,O.Z)(function*(T,S,P){const B=Th(S);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent(B,{message_id:P[ro],message_name:P[Sl],message_time:P[No],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Th(T){switch(T){case _a.NOTIFICATION_CLICKED:return"notification_open";case _a.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function hu(){return(hu=(0,O.Z)(function*(T,S){const P=S.data;if(!P.isFirebaseMessaging)return;T.onMessageHandler&&P.messageType===_a.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(Rs(P)):T.onMessageHandler.next(Rs(P)));const B=P.data;Sp(B)&&"1"===B[Zi]&&(yield Ul(T,P.messageType,B))})).apply(this,arguments)}const fu="@firebase/messaging";function Dh(){return jo.apply(this,arguments)}function jo(){return(jo=(0,O.Z)(function*(){try{yield(0,le.eu)()}catch(T){return!1}return"undefined"!=typeof window&&(0,le.hl)()&&(0,le.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,ae._registerComponent)(new ne.wA("messaging",T=>{const S=new fr(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",P=>function(T,S){return hu.apply(this,arguments)}(S,P)),S},"PUBLIC")),(0,ae._registerComponent)(new ne.wA("messaging-internal",T=>{const S=T.getProvider("messaging").getImmediate();return{getToken:B=>function(T,S){return du.apply(this,arguments)}(S,B)}},"PRIVATE")),(0,ae.registerVersion)(fu,"0.9.13"),(0,ae.registerVersion)(fu,"0.9.13","esm2017");const Ec="analytics",jl="firebase_id",Ta="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",$o="https://www.googletagmanager.com/gtag/js",ar=new be.Yd("@firebase/analytics");function gu(T){return Promise.all(T.map(S=>S.catch(P=>P)))}function Rp(T,S){const P=document.createElement("script");P.src=`${$o}?l=${T}&id=${S}`,P.async=!0,document.head.appendChild(P)}function mu(T,S,P,B,re,ue){return wc.apply(this,arguments)}function wc(){return(wc=(0,O.Z)(function*(T,S,P,B,re,ue){const ke=B[re];try{if(ke)yield S[ke];else{const gt=(yield gu(P)).find(ft=>ft.measurementId===re);gt&&(yield S[gt.appId])}}catch(Je){ar.error(Je)}T("config",re,ue)})).apply(this,arguments)}function xp(T,S,P,B,re){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,O.Z)(function*(T,S,P,B,re){try{let ue=[];if(re&&re.send_to){let ke=re.send_to;Array.isArray(ke)||(ke=[ke]);const Je=yield gu(P);for(const gt of ke){const ft=Je.find(bt=>bt.measurementId===gt),Yt=ft&&S[ft.appId];if(!Yt){ue=[];break}ue.push(Yt)}}0===ue.length&&(ue=Object.values(S)),yield Promise.all(ue),T("event",B,re||{})}catch(ue){ar.error(ue)}})).apply(this,arguments)}function e_(){const T=window.document.getElementsByTagName("script");for(const S of Object.values(T))if(S.src&&S.src.includes($o))return S;return null}const Ji=new le.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ic=new class{constructor(S={},P=1e3){this.throttleMetadata=S,this.intervalMillis=P}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,P){this.throttleMetadata[S]=P}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function kp(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function Gl(T){return ao.apply(this,arguments)}function ao(){return(ao=(0,O.Z)(function*(T){var S;const{appId:P,apiKey:B}=T,re={method:"GET",headers:kp(B)},ue=Ta.replace("{app-id}",P),ke=yield fetch(ue,re);if(200!==ke.status&&304!==ke.status){let Je="";try{const gt=yield ke.json();(null===(S=gt.error)||void 0===S?void 0:S.message)&&(Je=gt.error.message)}catch(gt){}throw Ji.create("config-fetch-failed",{httpStatus:ke.status,responseMessage:Je})}return ke.json()})).apply(this,arguments)}function $v(T){return Da.apply(this,arguments)}function Da(){return(Da=(0,O.Z)(function*(T,S=Ic,P){const{appId:B,apiKey:re,measurementId:ue}=T.options;if(!B)throw Ji.create("no-app-id");if(!re){if(ue)return{measurementId:ue,appId:B};throw Ji.create("no-api-key")}const ke=S.getThrottleMetadata(B)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Je=new Op;return setTimeout((0,O.Z)(function*(){Je.abort()}),void 0!==P?P:6e4),_u({appId:B,apiKey:re,measurementId:ue},ke,Je,S)})).apply(this,arguments)}function _u(T,S,P){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,O.Z)(function*(T,{throttleEndTimeMillis:S,backoffCount:P},B,re=Ic){const{appId:ue,measurementId:ke}=T;try{yield Mp(B,S)}catch(Je){if(ke)return ar.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ke} provided in the "measurementId" field in the local Firebase config. [${Je.message}]`),{appId:ue,measurementId:ke};throw Je}try{const Je=yield Gl(T);return re.deleteThrottleMetadata(ue),Je}catch(Je){if(!Ah(Je)){if(re.deleteThrottleMetadata(ue),ke)return ar.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ke} provided in the "measurementId" field in the local Firebase config. [${Je.message}]`),{appId:ue,measurementId:ke};throw Je}const gt=503===Number(Je.customData.httpStatus)?(0,le.$s)(P,re.intervalMillis,30):(0,le.$s)(P,re.intervalMillis),ft={throttleEndTimeMillis:Date.now()+gt,backoffCount:P+1};return re.setThrottleMetadata(ue,ft),ar.debug(`Calling attemptFetch again in ${gt} millis`),_u(T,ft,B,re)}})).apply(this,arguments)}function Mp(T,S){return new Promise((P,B)=>{const re=Math.max(S-Date.now(),0),ue=setTimeout(P,re);T.addEventListener(()=>{clearTimeout(ue),B(Ji.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}function Ah(T){if(!(T instanceof le.ZR&&T.customData))return!1;const S=Number(T.customData.httpStatus);return 429===S||500===S||503===S||504===S}class Op{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}function n_(){return Rh.apply(this,arguments)}function Rh(){return(Rh=(0,O.Z)(function*(){if(!(0,le.hl)())return ar.warn(Ji.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,le.eu)()}catch(T){return ar.warn(Ji.create("indexeddb-unavailable",{errorInfo:T}).message),!1}return!0})).apply(this,arguments)}function Sa(){return(Sa=(0,O.Z)(function*(T,S,P,B,re,ue,ke){var Je;const gt=$v(T);gt.then(Xn=>{P[Xn.measurementId]=Xn.appId,T.options.measurementId&&Xn.measurementId!==T.options.measurementId&&ar.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${Xn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Xn=>ar.error(Xn)),S.push(gt);const ft=n_().then(Xn=>{if(Xn)return B.getId()}),[Yt,bt]=yield Promise.all([gt,ft]);e_()||Rp(ue,Yt.measurementId),re("js",new Date);const Bi=null!==(Je=null==ke?void 0:ke.config)&&void 0!==Je?Je:{};return Bi.origin="firebase",Bi.update=!0,null!=bt&&(Bi[jl]=bt),re("config",Yt.measurementId,Bi),Yt.measurementId})).apply(this,arguments)}class Cc{constructor(S){this.app=S}_delete(){return delete jt[this.app.options.appId],Promise.resolve()}}let jt={},at=[];const Ns={};let Wl,Go,Aa="dataLayer",oi=!1;function yu(T,S,P){!function(){const T=[];if((0,le.ru)()&&T.push("This is a browser extension environment."),(0,le.zI)()||T.push("Cookies are not available."),T.length>0){const S=T.map((B,re)=>`(${re+1}) ${B}`).join(" "),P=Ji.create("invalid-analytics-context",{errorInfo:S});ar.warn(P.message)}}();const B=T.options.appId;if(!B)throw Ji.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw Ji.create("no-api-key");ar.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=jt[B])throw Ji.create("already-exists",{id:B});if(!oi){!function(T){let S=[];Array.isArray(window[T])?S=window[T]:window[T]=S}(Aa);const{wrappedGtag:ue,gtagCore:ke}=function(T,S,P,B,re){let ue=function(...ke){window[B].push(arguments)};return window[re]&&"function"==typeof window[re]&&(ue=window[re]),window[re]=function(T,S,P,B){function ue(){return(ue=(0,O.Z)(function*(ke,Je,gt){try{"event"===ke?yield xp(T,S,P,Je,gt):"config"===ke?yield mu(T,S,P,B,Je,gt):T("set",Je)}catch(ft){ar.error(ft)}})).apply(this,arguments)}return function(ke,Je,gt){return ue.apply(this,arguments)}}(ue,T,S,P),{gtagCore:ue,wrappedGtag:window[re]}}(jt,at,Ns,Aa,"gtag");Go=ue,Wl=ke,oi=!0}return jt[B]=function(T,S,P,B,re,ue,ke){return Sa.apply(this,arguments)}(T,at,Ns,S,Wl,Aa,P),new Cc(T)}function vu(){return(vu=(0,O.Z)(function*(T,S,P,B,re){if(re&&re.global)T("event",P,B);else{const ue=yield S;T("event",P,Object.assign(Object.assign({},B),{send_to:ue}))}})).apply(this,arguments)}function $r(){return qo.apply(this,arguments)}function qo(){return(qo=(0,O.Z)(function*(){if((0,le.ru)()||!(0,le.zI)()||!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch(T){return!1}})).apply(this,arguments)}const Nh="@firebase/analytics";(0,ae._registerComponent)(new ne.wA(Ec,(S,{options:P})=>yu(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),P),"PUBLIC")),(0,ae._registerComponent)(new ne.wA("analytics-internal",function(S){try{const P=S.getProvider(Ec).getImmediate();return{logEvent:(B,re,ue)=>function(T,S,P,B){T=(0,le.m9)(T),function(T,S,P,B,re){return vu.apply(this,arguments)}(Go,jt[T.app.options.appId],S,P,B).catch(re=>ar.error(re))}(P,B,re,ue)}}catch(P){throw Ji.create("interop-component-reg-failed",{reason:P})}},"PRIVATE")),(0,ae.registerVersion)(Nh,"0.7.9"),(0,ae.registerVersion)(Nh,"0.7.9","esm2017");var kh=U(7771),r_=U(3637),Hv=U(3342),bu=U(309),xa=U(3101);const i_=new m.GfV("7.3.0"),Mh="__angularfire_symbol__analyticsIsSupportedValue",Li="__angularfire_symbol__analyticsIsSupported",zo="__angularfire_symbol__remoteConfigIsSupportedValue",Kl="__angularfire_symbol__remoteConfigIsSupported",En="__angularfire_symbol__messagingIsSupportedValue",Na="__angularfire_symbol__messagingIsSupported";function ms(T,S,P){if(S){if(1===S.length)return S[0];const ue=S.filter(ke=>ke.app===P);if(1===ue.length)return ue[0]}return P.container.getProvider(T).getImmediate({optional:!0})}globalThis[Li]||(globalThis[Li]=$r().then(T=>globalThis[Mh]=T).catch(()=>globalThis[Mh]=!1)),globalThis[Na]||(globalThis[Na]=Dh().then(T=>globalThis[En]=T).catch(()=>globalThis[En]=!1)),globalThis[Kl]||(globalThis[Kl]=Tp().then(T=>globalThis[zo]=T).catch(()=>globalThis[zo]=!1));const ka=(T,S)=>{const P=S?[S]:(0,$.C6)(),B=[];return P.forEach(re=>{re.container.getProvider(T).instances.forEach(ke=>{B.includes(ke)||B.push(ke)})}),B};function Ei(){}class Ms{constructor(S,P=kh.N){this.zone=S,this.delegate=P}now(){return this.delegate.now()}schedule(S,P,B){const re=this.zone;return this.delegate.schedule(function(ke){re.runGuarded(()=>{S.apply(this,[ke])})},P,B)}}class Oh{constructor(S){this.zone=S,this.task=null}call(S,P){const B=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ei,{},Ei,Ei)),P.pipe((0,Hv.b)({next:B,complete:B,error:B})).subscribe(S).add(B)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Fp=(()=>{class T{constructor(P){this.ngZone=P,this.outsideAngular=P.runOutsideAngular(()=>new Ms(Zone.current)),this.insideAngular=P.run(()=>new Ms(Zone.current,r_.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(P){return new(P||T)(m.LFG(m.R0b))},T.\u0275prov=m.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function co(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function Zl(T){return T.pipe((0,bu.QV)(co().outsideAngular))}function Vi(T){return co(),function(T){return function(P){return(P=P.lift(new Oh(T.ngZone))).pipe((0,xa.R)(T.outsideAngular),(0,bu.QV)(T.insideAngular))}}(co())(T)}},7014:(Qe,Ee,U)=>{"use strict";U.d(Ee,{$:()=>Fl,A:()=>Pn,B:()=>Ki,G:()=>lc,H:()=>ga,J:()=>sr,L:()=>Dt,M:()=>au,N:()=>Ea,P:()=>Je,Q:()=>ki,R:()=>Zl,T:()=>or,U:()=>Oo,V:()=>wa,W:()=>Nl,X:()=>wt,Y:()=>Lo,Z:()=>Sp,_:()=>lu,a:()=>ql,a0:()=>Ll,a1:()=>Ul,a2:()=>Th,a3:()=>hu,a4:()=>pu,a5:()=>Ap,a6:()=>Dh,a7:()=>jo,a8:()=>Bl,a9:()=>Nr,aA:()=>u_,aB:()=>ho,aC:()=>Os,aD:()=>Cu,aE:()=>cn,aI:()=>Pr,aL:()=>mi,aa:()=>jv,ab:()=>Ec,ac:()=>$l,af:()=>ar,ag:()=>Rp,ah:()=>oo,ak:()=>Ml,al:()=>Hl,an:()=>Ah,ao:()=>Cc,ap:()=>Xs,aq:()=>dr,ar:()=>su,as:()=>gi,at:()=>pn,au:()=>sd,av:()=>nd,aw:()=>gn,ax:()=>Ne,ay:()=>Zt,az:()=>xi,b:()=>Go,c:()=>Rc,d:()=>qt,e:()=>_s,f:()=>lo,g:()=>o_,h:()=>Jl,i:()=>bu,j:()=>a_,k:()=>od,l:()=>Lh,m:()=>Xv,o:()=>Sr,r:()=>S,s:()=>pr,u:()=>ue});var m=U(8239),$=U(3854),O=U(8026);function be(E,p){var _={};for(var b in E)Object.prototype.hasOwnProperty.call(E,b)&&p.indexOf(b)<0&&(_[b]=E[b]);if(null!=E&&"function"==typeof Object.getOwnPropertySymbols){var x=0;for(b=Object.getOwnPropertySymbols(E);x<b.length;x++)p.indexOf(b[x])<0&&Object.prototype.propertyIsEnumerable.call(E,b[x])&&(_[b[x]]=E[b[x]])}return _}var Et=U(5422),We=U(3910);const Sr={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Pn={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ki=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},hs=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Kt=new $.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Tn=new Et.Yd("@firebase/auth");function qn(E,...p){Tn.logLevel<=Et.in.ERROR&&Tn.error(`Auth (${O.SDK_VERSION}): ${E}`,...p)}function pn(E,...p){throw ti(E,...p)}function gn(E,...p){return ti(E,...p)}function Qs(E,p,_){const b=Object.assign(Object.assign({},hs()),{[p]:_});return new $.LL("auth","Firebase",b).create(p,{appName:E.name})}function ei(E,p,_){if(!(p instanceof _))throw _.name!==p.constructor.name&&pn(E,"argument-error"),Qs(E,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ti(E,...p){if("string"!=typeof E){const _=p[0],b=[...p.slice(1)];return b[0]&&(b[0].appName=E.name),E._errorFactory.create(_,...b)}return Kt.create(E,...p)}function Ne(E,p,..._){if(!E)throw ti(p,..._)}function zn(E){const p="INTERNAL ASSERTION FAILED: "+E;throw qn(p),new Error(p)}function dr(E,p){E||zn(p)}const tt=new Map;function Zt(E){dr(E instanceof Function,"Expected a class definition");let p=tt.get(E);return p?(dr(p instanceof E,"Instance stored in cache mismatched with class"),p):(p=new E,tt.set(E,p),p)}function Zn(){var E;return"undefined"!=typeof self&&(null===(E=self.location)||void 0===E?void 0:E.href)||""}function Ds(){return"http:"===kn()||"https:"===kn()}function kn(){var E;return"undefined"!=typeof self&&(null===(E=self.location)||void 0===E?void 0:E.protocol)||null}class ln{constructor(p,_){this.shortDelay=p,this.longDelay=_,dr(_>p,"Short delay should be less than long delay!"),this.isMobile=(0,$.uI)()||(0,$.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ds()||(0,$.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function qe(E,p){dr(E.emulator,"Emulator should always be set here");const{url:_}=E.emulator;return p?`${_}${p.startsWith("/")?p.slice(1):p}`:_}class ot{static initialize(p,_,b){this.fetchImpl=p,_&&(this.headersImpl=_),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void zn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void zn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void zn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const fs={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},hi=new ln(3e4,6e4);function Jt(E,p){return E.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:E.tenantId}):p}function yt(E,p,_,b){return ir.apply(this,arguments)}function ir(){return(ir=(0,m.Z)(function*(E,p,_,b,x={}){return jn(E,x,(0,m.Z)(function*(){let N={},J={};b&&("GET"===p?J=b:N={body:JSON.stringify(b)});const _e=(0,$.xO)(Object.assign({key:E.config.apiKey},J)).slice(1),je=yield E._getAdditionalHeaders();return je["Content-Type"]="application/json",E.languageCode&&(je["X-Firebase-Locale"]=E.languageCode),ot.fetch()(ve(E,E.config.apiHost,_,_e),Object.assign({method:p,headers:je,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function jn(E,p,_){return K.apply(this,arguments)}function K(){return(K=(0,m.Z)(function*(E,p,_){E._canInitEmulator=!1;const b=Object.assign(Object.assign({},fs),p);try{const x=new z(E),N=yield Promise.race([_(),x.promise]);x.clearNetworkTimeout();const J=yield N.json();if("needConfirmation"in J)throw ie(E,"account-exists-with-different-credential",J);if(N.ok&&!("errorMessage"in J))return J;{const _e=N.ok?J.errorMessage:J.error.message,[je,Ue]=_e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===je)throw ie(E,"credential-already-in-use",J);if("EMAIL_EXISTS"===je)throw ie(E,"email-already-in-use",J);if("USER_DISABLED"===je)throw ie(E,"user-disabled",J);const Ze=b[je]||je.toLowerCase().replace(/[_\s]+/g,"-");if(Ue)throw Qs(E,Ze,Ue);pn(E,Ze)}}catch(x){if(x instanceof $.ZR)throw x;pn(E,"network-request-failed")}})).apply(this,arguments)}function G(E,p,_,b){return Q.apply(this,arguments)}function Q(){return(Q=(0,m.Z)(function*(E,p,_,b,x={}){const N=yield yt(E,p,_,b,x);return"mfaPendingCredential"in N&&pn(E,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function ve(E,p,_,b){const x=`${p}${_}?${b}`;return E.config.emulator?qe(E.config,x):`${E.config.apiScheme}://${x}`}class z{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((_,b)=>{this.timer=setTimeout(()=>b(gn(this.auth,"network-request-failed")),hi.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ie(E,p,_){const b={appName:E.name};_.email&&(b.email=_.email),_.phoneNumber&&(b.phoneNumber=_.phoneNumber);const x=gn(E,p,b);return x.customData._tokenResponse=_,x}function Ke(){return(Ke=(0,m.Z)(function*(E,p){return yt(E,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function ht(E,p){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,m.Z)(function*(E,p){return yt(E,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function _n(E,p){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,m.Z)(function*(E,p){return yt(E,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function hr(E){if(E)try{const p=new Date(Number(E));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function Z(){return(Z=(0,m.Z)(function*(E,p=!1){const _=(0,$.m9)(E),b=yield _.getIdToken(p),x=He(b);Ne(x&&x.exp&&x.auth_time&&x.iat,_.auth,"internal-error");const N="object"==typeof x.firebase?x.firebase:void 0,J=null==N?void 0:N.sign_in_provider;return{claims:x,token:b,authTime:hr(Se(x.auth_time)),issuedAtTime:hr(Se(x.iat)),expirationTime:hr(Se(x.exp)),signInProvider:J||null,signInSecondFactor:(null==N?void 0:N.sign_in_second_factor)||null}})).apply(this,arguments)}function Se(E){return 1e3*Number(E)}function He(E){const[p,_,b]=E.split(".");if(void 0===p||void 0===_||void 0===b)return qn("JWT malformed, contained fewer than 3 sections"),null;try{const x=(0,$.tV)(_);return x?JSON.parse(x):(qn("Failed to decode base64 JWT payload"),null)}catch(x){return qn("Caught error parsing JWT payload as JSON",x),null}}function Pt(E,p){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,m.Z)(function*(E,p,_=!1){if(_)return p;try{return yield p}catch(b){throw b instanceof $.ZR&&un(b)&&E.auth.currentUser===E&&(yield E.auth.signOut()),b}})).apply(this,arguments)}function un({code:E}){return"auth/user-disabled"===E||"auth/user-token-expired"===E}class Mn{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var _;if(p){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const x=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(p=!1){var _=this;if(!this.isRunning)return;const b=this.getInterval(p);this.timerId=setTimeout((0,m.Z)(function*(){yield _.iteration()}),b)}iteration(){var p=this;return(0,m.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_.code&&p.schedule(!0))}p.schedule()})()}}class On{constructor(p,_){this.createdAt=p,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=hr(this.lastLoginAt),this.creationTime=hr(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Bt(E){return An.apply(this,arguments)}function An(){return(An=(0,m.Z)(function*(E){var p;const _=E.auth,b=yield E.getIdToken(),x=yield Pt(E,_n(_,{idToken:b}));Ne(null==x?void 0:x.users.length,_,"internal-error");const N=x.users[0];E._notifyReloadListener(N);const J=(null===(p=N.providerUserInfo)||void 0===p?void 0:p.length)?ni(N.providerUserInfo):[],_e=yn(E.providerData,J),Ze=!!E.isAnonymous&&!(E.email&&N.passwordHash||(null==_e?void 0:_e.length)),hn={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:_e,metadata:new On(N.createdAt,N.lastLoginAt),isAnonymous:Ze};Object.assign(E,hn)})).apply(this,arguments)}function Ut(){return(Ut=(0,m.Z)(function*(E){const p=(0,$.m9)(E);yield Bt(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function yn(E,p){return[...E.filter(b=>!p.some(x=>x.providerId===b.providerId)),...p]}function ni(E){return E.map(p=>{var{providerId:_}=p,b=be(p,["providerId"]);return{providerId:_,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function Yn(){return(Yn=(0,m.Z)(function*(E,p){const _=yield jn(E,{},(0,m.Z)(function*(){const b=(0,$.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:x,apiKey:N}=E.config,J=ve(E,x,"/v1/token",`key=${N}`),_e=yield E._getAdditionalHeaders();return _e["Content-Type"]="application/x-www-form-urlencoded",ot.fetch()(J,{method:"POST",headers:_e,body:b})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class fi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){Ne(p.idToken,"internal-error"),Ne(void 0!==p.idToken,"internal-error"),Ne(void 0!==p.refreshToken,"internal-error");const _="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function(E){const p=He(E);return Ne(p,"internal-error"),Ne(void 0!==p.exp,"internal-error"),Ne(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,_)}getToken(p,_=!1){var b=this;return(0,m.Z)(function*(){return Ne(!b.accessToken||b.refreshToken,p,"user-token-expired"),_||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(p,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,_){var b=this;return(0,m.Z)(function*(){const{accessToken:x,refreshToken:N,expiresIn:J}=yield function(E,p){return Yn.apply(this,arguments)}(p,_);b.updateTokensAndExpiration(x,N,Number(J))})()}updateTokensAndExpiration(p,_,b){this.refreshToken=_||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(p,_){const{refreshToken:b,accessToken:x,expirationTime:N}=_,J=new fi;return b&&(Ne("string"==typeof b,"internal-error",{appName:p}),J.refreshToken=b),x&&(Ne("string"==typeof x,"internal-error",{appName:p}),J.accessToken=x),N&&(Ne("number"==typeof N,"internal-error",{appName:p}),J.expirationTime=N),J}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new fi,this.toJSON())}_performRefresh(){return zn("not implemented")}}function vn(E,p){Ne("string"==typeof E||void 0===E,"internal-error",{appName:p})}class pi{constructor(p){var{uid:_,auth:b,stsTokenManager:x}=p,N=be(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Mn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=b,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new On(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(p){var _=this;return(0,m.Z)(function*(){const b=yield Pt(_,_.stsTokenManager.getToken(_.auth,p));return Ne(b,_.auth,"internal-error"),_.accessToken!==b&&(_.accessToken=b,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),b})()}getIdTokenResult(p){return function(E){return Z.apply(this,arguments)}(this,p)}reload(){return function(E){return Ut.apply(this,arguments)}(this)}_assign(p){this!==p&&(Ne(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(_=>Object.assign({},_)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new pi(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,_=!1){var b=this;return(0,m.Z)(function*(){let x=!1;p.idToken&&p.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(p),x=!0),_&&(yield Bt(b)),yield b.auth._persistUserIfCurrent(b),x&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var p=this;return(0,m.Z)(function*(){const _=yield p.getIdToken();return yield Pt(p,function(E,p){return Ke.apply(this,arguments)}(p.auth,{idToken:_})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,_){var b,x,N,J,_e,je,Ue,Ze;const hn=null!==(b=_.displayName)&&void 0!==b?b:void 0,In=null!==(x=_.email)&&void 0!==x?x:void 0,Mr=null!==(N=_.phoneNumber)&&void 0!==N?N:void 0,Jo=null!==(J=_.photoURL)&&void 0!==J?J:void 0,Wh=null!==(_e=_.tenantId)&&void 0!==_e?_e:void 0,qh=null!==(je=_._redirectEventId)&&void 0!==je?je:void 0,g_=null!==(Ue=_.createdAt)&&void 0!==Ue?Ue:void 0,zh=null!==(Ze=_.lastLoginAt)&&void 0!==Ze?Ze:void 0,{uid:fo,emailVerified:nE,isAnonymous:Ru,providerData:xu,stsTokenManager:ai}=_;Ne(fo&&ai,p,"internal-error");const qp=fi.fromJSON(this.name,ai);Ne("string"==typeof fo,p,"internal-error"),vn(hn,p.name),vn(In,p.name),Ne("boolean"==typeof nE,p,"internal-error"),Ne("boolean"==typeof Ru,p,"internal-error"),vn(Mr,p.name),vn(Jo,p.name),vn(Wh,p.name),vn(qh,p.name),vn(g_,p.name),vn(zh,p.name);const Kh=new pi({uid:fo,auth:p,email:In,emailVerified:nE,displayName:hn,isAnonymous:Ru,photoURL:Jo,phoneNumber:Mr,tenantId:Wh,stsTokenManager:qp,createdAt:g_,lastLoginAt:zh});return xu&&Array.isArray(xu)&&(Kh.providerData=xu.map(Lc=>Object.assign({},Lc))),qh&&(Kh._redirectEventId=qh),Kh}static _fromIdTokenResponse(p,_,b=!1){return(0,m.Z)(function*(){const x=new fi;x.updateFromServerResponse(_);const N=new pi({uid:_.localId,auth:p,stsTokenManager:x,isAnonymous:b});return yield Bt(N),N})()}}const Dt=(()=>{class E{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,m.Z)(function*(){return!0})()}_set(_,b){var x=this;return(0,m.Z)(function*(){x.storage[_]=b})()}_get(_){var b=this;return(0,m.Z)(function*(){const x=b.storage[_];return void 0===x?null:x})()}_remove(_){var b=this;return(0,m.Z)(function*(){delete b.storage[_]})()}_addListener(_,b){}_removeListener(_,b){}}return E.type="NONE",E})();function xi(E,p,_){return`firebase:${E}:${p}:${_}`}class Ni{constructor(p,_,b){this.persistence=p,this.auth=_,this.userKey=b;const{config:x,name:N}=this.auth;this.fullUserKey=xi(this.userKey,x.apiKey,N),this.fullPersistenceKey=xi("persistence",x.apiKey,N),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,m.Z)(function*(){const _=yield p.persistence._get(p.fullUserKey);return _?pi._fromJSON(p.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var _=this;return(0,m.Z)(function*(){if(_.persistence===p)return;const b=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=p,b?_.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,_,b="authUser"){return(0,m.Z)(function*(){if(!_.length)return new Ni(Zt(Dt),p,b);const x=(yield Promise.all(_.map(function(){var Ue=(0,m.Z)(function*(Ze){if(yield Ze._isAvailable())return Ze});return function(Ze){return Ue.apply(this,arguments)}}()))).filter(Ue=>Ue);let N=x[0]||Zt(Dt);const J=xi(b,p.config.apiKey,p.name);let _e=null;for(const Ue of _)try{const Ze=yield Ue._get(J);if(Ze){const hn=pi._fromJSON(p,Ze);Ue!==N&&(_e=hn),N=Ue;break}}catch(Ze){}const je=x.filter(Ue=>Ue._shouldAllowMigration);return N._shouldAllowMigration&&je.length?(N=je[0],_e&&(yield N._set(J,_e.toJSON())),yield Promise.all(_.map(function(){var Ue=(0,m.Z)(function*(Ze){if(Ze!==N)try{yield Ze._remove(J)}catch(hn){}});return function(Ze){return Ue.apply(this,arguments)}}())),new Ni(N,p,b)):new Ni(N,p,b)})()}}function br(E){const p=E.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Js(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(ha(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(dn(p))return"Blackberry";if(hh(p))return"Webos";if(Ar(p))return"Safari";if((p.includes("chrome/")||fa(p))&&!p.includes("edge/"))return"Chrome";if(gi(p))return"Android";{const b=E.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==b?void 0:b.length))return b[1]}return"Other"}function ha(E=(0,$.z$)()){return/firefox\//i.test(E)}function Ar(E=(0,$.z$)()){const p=E.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function fa(E=(0,$.z$)()){return/crios\//i.test(E)}function Js(E=(0,$.z$)()){return/iemobile/i.test(E)}function gi(E=(0,$.z$)()){return/android/i.test(E)}function dn(E=(0,$.z$)()){return/blackberry/i.test(E)}function hh(E=(0,$.z$)()){return/webos/i.test(E)}function su(E=(0,$.z$)()){return/iphone|ipad|ipod/i.test(E)}function Xs(E=(0,$.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(E)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(E)}function Ss(E=(0,$.z$)()){return su(E)||gi(E)||hh(E)||dn(E)||/windows phone/i.test(E)||Js(E)}function Rr(E,p=[]){let _;switch(E){case"Browser":_=br((0,$.z$)());break;case"Worker":_=`${br((0,$.z$)())}-${E}`;break;default:_=E}const b=p.length?p.join(","):"FirebaseCore-web";return`${_}/JsCore/${O.SDK_VERSION}/${b}`}class Ym{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,_){const b=N=>new Promise((J,_e)=>{try{J(p(N))}catch(je){_e(je)}});b.onAbort=_,this.queue.push(b);const x=this.queue.length-1;return()=>{this.queue[x]=()=>Promise.resolve()}}runMiddleware(p){var _=this;return(0,m.Z)(function*(){if(_.auth.currentUser===p)return;const b=[];try{for(const x of _.queue)yield x(p),x.onAbort&&b.push(x.onAbort)}catch(x){b.reverse();for(const N of b)try{N()}catch(J){}throw _.auth._errorFactory.create("login-blocked",{originalMessage:x.message})}})()}}class to{constructor(p,_,b){this.app=p,this.heartbeatServiceProvider=_,this.config=b,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bl(this),this.idTokenSubscription=new bl(this),this.beforeStateQueue=new Ym(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Kt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=b.sdkClientVersion}_initializeWithPersistence(p,_){var b=this;return _&&(this._popupRedirectResolver=Zt(_)),this._initializationPromise=this.queue((0,m.Z)(function*(){var x,N;if(!b._deleted&&(b.persistenceManager=yield Ni.create(b,p),!b._deleted)){if(null===(x=b._popupRedirectResolver)||void 0===x?void 0:x._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch(J){}yield b.initializeCurrentUser(_),b.lastNotifiedUid=(null===(N=b.currentUser)||void 0===N?void 0:N.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,m.Z)(function*(){if(p._deleted)return;const _=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||_){if(p.currentUser&&_&&p.currentUser.uid===_.uid)return p._currentUser._assign(_),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(_,!0)}})()}initializeCurrentUser(p){var _=this;return(0,m.Z)(function*(){var b;const x=yield _.assertedPersistence.getCurrentUser();let N=x,J=!1;if(p&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const _e=null===(b=_.redirectUser)||void 0===b?void 0:b._redirectEventId,je=null==N?void 0:N._redirectEventId,Ue=yield _.tryRedirectSignIn(p);(!_e||_e===je)&&(null==Ue?void 0:Ue.user)&&(N=Ue.user,J=!0)}if(!N)return _.directlySetCurrentUser(null);if(!N._redirectEventId){if(J)try{yield _.beforeStateQueue.runMiddleware(N)}catch(_e){N=x,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(_e))}return N?_.reloadAndSetCurrentUserOrClear(N):_.directlySetCurrentUser(null)}return Ne(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===N._redirectEventId?_.directlySetCurrentUser(N):_.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(p){var _=this;return(0,m.Z)(function*(){let b=null;try{b=yield _._popupRedirectResolver._completeRedirectFn(_,p,!0)}catch(x){yield _._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(p){var _=this;return(0,m.Z)(function*(){try{yield Bt(p)}catch(b){if("auth/network-request-failed"!==b.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const E=navigator;return E.languages&&E.languages[0]||E.language||null}()}_delete(){var p=this;return(0,m.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var _=this;return(0,m.Z)(function*(){const b=p?(0,$.m9)(p):null;return b&&Ne(b.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(b&&b._clone(_))})()}_updateCurrentUser(p,_=!1){var b=this;return(0,m.Z)(function*(){if(!b._deleted)return p&&Ne(b.tenantId===p.tenantId,b,"tenant-id-mismatch"),_||(yield b.beforeStateQueue.runMiddleware(p)),b.queue((0,m.Z)(function*(){yield b.directlySetCurrentUser(p),b.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,m.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var _=this;return this.queue((0,m.Z)(function*(){yield _.assertedPersistence.setPersistence(Zt(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new $.LL("auth","Firebase",p())}onAuthStateChanged(p,_,b){return this.registerStateListener(this.authStateSubscription,p,_,b)}beforeAuthStateChanged(p,_){return this.beforeStateQueue.pushCallback(p,_)}onIdTokenChanged(p,_,b){return this.registerStateListener(this.idTokenSubscription,p,_,b)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,_){var b=this;return(0,m.Z)(function*(){const x=yield b.getOrInitRedirectPersistenceManager(_);return null===p?x.removeCurrentUser():x.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var _=this;return(0,m.Z)(function*(){if(!_.redirectPersistenceManager){const b=p&&Zt(p)||_._popupRedirectResolver;Ne(b,_,"argument-error"),_.redirectPersistenceManager=yield Ni.create(_,[Zt(b._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(p){var _=this;return(0,m.Z)(function*(){var b,x;return _._isInitialized&&(yield _.queue((0,m.Z)(function*(){}))),(null===(b=_._currentUser)||void 0===b?void 0:b._redirectEventId)===p?_._currentUser:(null===(x=_.redirectUser)||void 0===x?void 0:x._redirectEventId)===p?_.redirectUser:null})()}_persistUserIfCurrent(p){var _=this;return(0,m.Z)(function*(){if(p===_.currentUser)return _.queue((0,m.Z)(function*(){return _.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(_=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,_,b,x){if(this._deleted)return()=>{};const N="function"==typeof _?_:_.next.bind(_),J=this._isInitialized?Promise.resolve():this._initializationPromise;return Ne(J,this,"internal-error"),J.then(()=>N(this.currentUser)),"function"==typeof _?p.addObserver(_,b,x):p.addObserver(_)}directlySetCurrentUser(p){var _=this;return(0,m.Z)(function*(){_.currentUser&&_.currentUser!==p&&(_._currentUser._stopProactiveRefresh(),p&&_.isProactiveRefreshEnabled&&p._startProactiveRefresh()),_.currentUser=p,p?yield _.assertedPersistence.setCurrentUser(p):yield _.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Rr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,m.Z)(function*(){var _;const b={"X-Client-Version":p.clientVersion};p.app.options.appId&&(b["X-Firebase-gmpid"]=p.app.options.appId);const x=yield null===(_=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return x&&(b["X-Firebase-Client"]=x),b})()}}function cn(E){return(0,$.m9)(E)}class bl{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,$.ne)(_=>this.observer=_)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function lc(E,p,_){const b=cn(E);Ne(b._canInitEmulator,b,"emulator-config-failed"),Ne(/^https?:\/\//.test(p),b,"invalid-emulator-scheme");const x=!!(null==_?void 0:_.disableWarnings),N=ou(p),{host:J,port:_e}=function(E){const p=ou(E),_=/(\/\/)?([^?#/]+)/.exec(E.substr(p.length));if(!_)return{host:"",port:null};const b=_[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(b);if(x){const N=x[1];return{host:N,port:Pi(b.substr(N.length+1))}}{const[N,J]=b.split(":");return{host:N,port:Pi(J)}}}(p);b.config.emulator={url:`${N}//${J}${null===_e?"":`:${_e}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:J,port:_e,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function(){function E(){const p=document.createElement("p"),_=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",E):E())}()}function ou(E){const p=E.indexOf(":");return p<0?"":E.substr(0,p+1)}function Pi(E){if(!E)return null;const p=Number(E);return isNaN(p)?null:p}class ga{constructor(p,_){this.providerId=p,this.signInMethod=_}toJSON(){return zn("not implemented")}_getIdTokenResponse(p){return zn("not implemented")}_linkToIdToken(p,_){return zn("not implemented")}_getReauthenticationResolver(p){return zn("not implemented")}}function fh(E,p){return ph.apply(this,arguments)}function ph(){return(ph=(0,m.Z)(function*(E,p){return yt(E,"POST","/v1/accounts:resetPassword",Jt(E,p))})).apply(this,arguments)}function Cp(E,p){return gh.apply(this,arguments)}function gh(){return(gh=(0,m.Z)(function*(E,p){return yt(E,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Il(E,p){return no.apply(this,arguments)}function no(){return(no=(0,m.Z)(function*(E,p){return yt(E,"POST","/v1/accounts:update",Jt(E,p))})).apply(this,arguments)}function mh(){return(mh=(0,m.Z)(function*(E,p){return G(E,"POST","/v1/accounts:signInWithPassword",Jt(E,p))})).apply(this,arguments)}function Cl(E,p){return _h.apply(this,arguments)}function _h(){return(_h=(0,m.Z)(function*(E,p){return yt(E,"POST","/v1/accounts:sendOobCode",Jt(E,p))})).apply(this,arguments)}function Xm(E,p){return yh.apply(this,arguments)}function yh(){return(yh=(0,m.Z)(function*(E,p){return Cl(E,p)})).apply(this,arguments)}function Bv(E,p){return dc.apply(this,arguments)}function dc(){return(dc=(0,m.Z)(function*(E,p){return Cl(E,p)})).apply(this,arguments)}function Tp(E,p){return ma.apply(this,arguments)}function ma(){return(ma=(0,m.Z)(function*(E,p){return Cl(E,p)})).apply(this,arguments)}function Tl(E,p){return vh.apply(this,arguments)}function vh(){return(vh=(0,m.Z)(function*(E,p){return Cl(E,p)})).apply(this,arguments)}function hc(){return(hc=(0,m.Z)(function*(E,p){return G(E,"POST","/v1/accounts:signInWithEmailLink",Jt(E,p))})).apply(this,arguments)}function Sl(){return(Sl=(0,m.Z)(function*(E,p){return G(E,"POST","/v1/accounts:signInWithEmailLink",Jt(E,p))})).apply(this,arguments)}class No extends ga{constructor(p,_,b,x=null){super("password",b),this._email=p,this._password=_,this._tenantId=x}static _fromEmailAndPassword(p,_){return new No(p,_,"password")}static _fromEmailAndCode(p,_,b=null){return new No(p,_,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(p){var _=this;return(0,m.Z)(function*(){switch(_.signInMethod){case"password":return function(E,p){return mh.apply(this,arguments)}(p,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function(E,p){return hc.apply(this,arguments)}(p,{email:_._email,oobCode:_._password});default:pn(p,"internal-error")}})()}_linkToIdToken(p,_){var b=this;return(0,m.Z)(function*(){switch(b.signInMethod){case"password":return Cp(p,{idToken:_,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function(E,p){return Sl.apply(this,arguments)}(p,{idToken:_,email:b._email,oobCode:b._password});default:pn(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Zi(E,p){return Eh.apply(this,arguments)}function Eh(){return(Eh=(0,m.Z)(function*(E,p){return G(E,"POST","/v1/accounts:signInWithIdp",Jt(E,p))})).apply(this,arguments)}class sr extends ga{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const _=new sr(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(_.idToken=p.idToken),p.accessToken&&(_.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(_.nonce=p.nonce),p.pendingToken&&(_.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(_.accessToken=p.oauthToken,_.secret=p.oauthTokenSecret):pn("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:b,signInMethod:x}=_,N=be(_,["providerId","signInMethod"]);if(!b||!x)return null;const J=new sr(b,x);return J.idToken=N.idToken||void 0,J.accessToken=N.accessToken||void 0,J.secret=N.secret,J.nonce=N.nonce,J.pendingToken=N.pendingToken||null,J}_getIdTokenResponse(p){return Zi(p,this.buildRequest())}_linkToIdToken(p,_){const b=this.buildRequest();return b.idToken=_,Zi(p,b)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,Zi(p,_)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),p.postBody=(0,$.xO)(_)}return p}}function Dp(E,p){return ya.apply(this,arguments)}function ya(){return(ya=(0,m.Z)(function*(E,p){return yt(E,"POST","/v1/accounts:sendVerificationCode",Jt(E,p))})).apply(this,arguments)}function Al(){return(Al=(0,m.Z)(function*(E,p){return G(E,"POST","/v1/accounts:signInWithPhoneNumber",Jt(E,p))})).apply(this,arguments)}function Po(){return(Po=(0,m.Z)(function*(E,p){const _=yield G(E,"POST","/v1/accounts:signInWithPhoneNumber",Jt(E,p));if(_.temporaryProof)throw ie(E,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const bh={USER_NOT_FOUND:"user-not-found"};function Rl(){return(Rl=(0,m.Z)(function*(E,p){return G(E,"POST","/v1/accounts:signInWithPhoneNumber",Jt(E,Object.assign(Object.assign({},p),{operation:"REAUTH"})),bh)})).apply(this,arguments)}class ri extends ga{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,_){return new ri({verificationId:p,verificationCode:_})}static _fromTokenResponse(p,_){return new ri({phoneNumber:p,temporaryProof:_})}_getIdTokenResponse(p){return function(E,p){return Al.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,_){return function(E,p){return Po.apply(this,arguments)}(p,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function(E,p){return Rl.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:_,verificationId:b,verificationCode:x}=this.params;return p&&_?{temporaryProof:p,phoneNumber:_}:{sessionInfo:b,code:x}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:_,verificationCode:b,phoneNumber:x,temporaryProof:N}=p;return b||_||x||N?new ri({verificationId:_,verificationCode:b,phoneNumber:x,temporaryProof:N}):null}}class ko{constructor(p){var _,b,x,N,J,_e;const je=(0,$.zd)((0,$.pd)(p)),Ue=null!==(_=je.apiKey)&&void 0!==_?_:null,Ze=null!==(b=je.oobCode)&&void 0!==b?b:null,hn=function(E){switch(E){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=je.mode)&&void 0!==x?x:null);Ne(Ue&&Ze&&hn,"argument-error"),this.apiKey=Ue,this.operation=hn,this.code=Ze,this.continueUrl=null!==(N=je.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(J=je.languageCode)&&void 0!==J?J:null,this.tenantId=null!==(_e=je.tenantId)&&void 0!==_e?_e:null}static parseLink(p){const _=function(E){const p=(0,$.zd)((0,$.pd)(E)).link,_=p?(0,$.zd)((0,$.pd)(p)).deep_link_id:null,b=(0,$.zd)((0,$.pd)(E)).deep_link_id;return(b?(0,$.zd)((0,$.pd)(b)).link:null)||b||_||p||E}(p);try{return new ko(_)}catch(b){return null}}}let au=(()=>{class E{constructor(){this.providerId=E.PROVIDER_ID}static credential(_,b){return No._fromEmailAndPassword(_,b)}static credentialWithLink(_,b){const x=ko.parseLink(b);return Ne(x,"argument-error"),No._fromEmailAndCode(_,x.code,x.tenantId)}}return E.PROVIDER_ID="password",E.EMAIL_PASSWORD_SIGN_IN_METHOD="password",E.EMAIL_LINK_SIGN_IN_METHOD="emailLink",E})();class Xt{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class va extends Xt{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class Oo extends va{static credentialFromJSON(p){const _="string"==typeof p?JSON.parse(p):p;return Ne("providerId"in _&&"signInMethod"in _,"argument-error"),sr._fromParams(_)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return Ne(p.idToken||p.accessToken,"argument-error"),sr._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return Oo.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return Oo.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:b,oauthTokenSecret:x,pendingToken:N,nonce:J,providerId:_e}=p;if(!b&&!x&&!_&&!N||!_e)return null;try{return new Oo(_e)._credential({idToken:_,accessToken:b,nonce:J,pendingToken:N})}catch(je){return null}}}let Ea=(()=>{class E extends va{constructor(){super("facebook.com")}static credential(_){return sr._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return E.credential(_.oauthAccessToken)}catch(b){return null}}}return E.FACEBOOK_SIGN_IN_METHOD="facebook.com",E.PROVIDER_ID="facebook.com",E})(),ki=(()=>{class E extends va{constructor(){super("google.com"),this.addScope("profile")}static credential(_,b){return sr._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:b})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:b,oauthAccessToken:x}=_;if(!b&&!x)return null;try{return E.credential(b,x)}catch(N){return null}}}return E.GOOGLE_SIGN_IN_METHOD="google.com",E.PROVIDER_ID="google.com",E})(),or=(()=>{class E extends va{constructor(){super("github.com")}static credential(_){return sr._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return E.credential(_.oauthAccessToken)}catch(b){return null}}}return E.GITHUB_SIGN_IN_METHOD="github.com",E.PROVIDER_ID="github.com",E})();class mi extends ga{constructor(p,_){super(p,p),this.pendingToken=_}_getIdTokenResponse(p){return Zi(p,this.buildRequest())}_linkToIdToken(p,_){const b=this.buildRequest();return b.idToken=_,Zi(p,b)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,Zi(p,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:b,signInMethod:x,pendingToken:N}=_;return b&&x&&N&&b===x?new mi(b,N):null}static _create(p,_){return new mi(p,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class wa extends Xt{constructor(p){Ne(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return wa.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return wa.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const _=mi.fromJSON(p);return Ne(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:_,providerId:b}=p;if(!_||!b)return null;try{return mi._create(b,_)}catch(x){return null}}}let Nl=(()=>{class E extends va{constructor(){super("twitter.com")}static credential(_,b){return sr._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:b})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:b,oauthTokenSecret:x}=_;if(!b||!x)return null;try{return E.credential(b,x)}catch(N){return null}}}return E.TWITTER_SIGN_IN_METHOD="twitter.com",E.PROVIDER_ID="twitter.com",E})();function Fo(E,p){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,m.Z)(function*(E,p){return G(E,"POST","/v1/accounts:signUp",Jt(E,p))})).apply(this,arguments)}class jr{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,_,b,x=!1){return(0,m.Z)(function*(){const N=yield pi._fromIdTokenResponse(p,b,x),J=ba(b);return new jr({user:N,providerId:J,_tokenResponse:b,operationType:_})})()}static _forOperation(p,_,b){return(0,m.Z)(function*(){yield p._updateTokensIfNecessary(b,!0);const x=ba(b);return new jr({user:p,providerId:x,_tokenResponse:b,operationType:_})})()}}function ba(E){return E.providerId?E.providerId:"phoneNumber"in E?"phone":null}function wt(E){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,m.Z)(function*(E){var p;const _=cn(E);if(yield _._initializationPromise,null===(p=_.currentUser)||void 0===p?void 0:p.isAnonymous)return new jr({user:_.currentUser,providerId:null,operationType:"signIn"});const b=yield Fo(_,{returnSecureToken:!0}),x=yield jr._fromIdTokenResponse(_,"signIn",b,!0);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class pc extends $.ZR{constructor(p,_,b,x){var N;super(_.code,_.message),this.operationType=b,this.user=x,Object.setPrototypeOf(this,pc.prototype),this.customData={appName:p.name,tenantId:null!==(N=p.tenantId)&&void 0!==N?N:void 0,_serverResponse:_.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(p,_,b,x){return new pc(p,_,b,x)}}function gc(E,p,_,b){return("reauthenticate"===p?_._getReauthenticationResolver(E):_._getIdTokenResponse(E)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?pc._fromErrorAndOperation(E,N,p,b):N})}function kl(E){return new Set(E.map(({providerId:p})=>p).filter(p=>!!p))}function Ml(E,p){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,m.Z)(function*(E,p){const _=(0,$.m9)(E);yield Ot(!0,_,p);const{providerUserInfo:b}=yield ht(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[p]}),x=kl(b||[]);return _.providerData=_.providerData.filter(N=>x.has(N.providerId)),x.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function As(E,p){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,m.Z)(function*(E,p,_=!1){const b=yield Pt(E,p._linkToIdToken(E.auth,yield E.getIdToken()),_);return jr._forOperation(E,"link",b)})).apply(this,arguments)}function Ot(E,p,_){return uu.apply(this,arguments)}function uu(){return(uu=(0,m.Z)(function*(E,p,_){yield Bt(p);const x=!1===E?"provider-already-linked":"no-such-provider";Ne(kl(p.providerData).has(_)===E,p.auth,x)})).apply(this,arguments)}function bn(E,p){return cu.apply(this,arguments)}function cu(){return(cu=(0,m.Z)(function*(E,p,_=!1){const{auth:b}=E,x="reauthenticate";try{const N=yield Pt(E,gc(b,x,p,E),_);Ne(N.idToken,b,"internal-error");const J=He(N.idToken);Ne(J,b,"internal-error");const{sub:_e}=J;return Ne(E.uid===_e,b,"user-mismatch"),jr._forOperation(E,x,N)}catch(N){throw"auth/user-not-found"===(null==N?void 0:N.code)&&pn(b,"user-mismatch"),N}})).apply(this,arguments)}function Rs(E,p){return ii.apply(this,arguments)}function ii(){return(ii=(0,m.Z)(function*(E,p,_=!1){const b="signIn",x=yield gc(E,b,p),N=yield jr._fromIdTokenResponse(E,b,x);return _||(yield E._updateCurrentUser(N.user)),N})).apply(this,arguments)}function Lo(E,p){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,m.Z)(function*(E,p){return Rs(cn(E),p)})).apply(this,arguments)}function Sp(E,p){return mc.apply(this,arguments)}function mc(){return(mc=(0,m.Z)(function*(E,p){const _=(0,$.m9)(E);return yield Ot(!1,_,p.providerId),As(_,p)})).apply(this,arguments)}function lu(E,p){return io.apply(this,arguments)}function io(){return(io=(0,m.Z)(function*(E,p){return bn((0,$.m9)(E),p)})).apply(this,arguments)}function fr(E,p){return si.apply(this,arguments)}function si(){return(si=(0,m.Z)(function*(E,p){return G(E,"POST","/v1/accounts:signInWithCustomToken",Jt(E,p))})).apply(this,arguments)}function Fl(E,p){return gs.apply(this,arguments)}function gs(){return(gs=(0,m.Z)(function*(E,p){const _=cn(E),b=yield fr(_,{token:p,returnSecureToken:!0}),x=yield jr._fromIdTokenResponse(_,"signIn",b);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class xr{constructor(p,_){this.factorId=p,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(p,_){return"phoneInfo"in _?Ch._fromServerResponse(p,_):pn(p,"internal-error")}}class Ch extends xr{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,_){return new Ch(_)}}function Uo(E,p,_){var b;Ne((null===(b=_.url)||void 0===b?void 0:b.length)>0,E,"invalid-continue-uri"),Ne(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,E,"invalid-dynamic-link-domain"),p.continueUrl=_.url,p.dynamicLinkDomain=_.dynamicLinkDomain,p.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(Ne(_.iOS.bundleId.length>0,E,"missing-ios-bundle-id"),p.iOSBundleId=_.iOS.bundleId),_.android&&(Ne(_.android.packageName.length>0,E,"missing-android-pkg-name"),p.androidInstallApp=_.android.installApp,p.androidMinimumVersionCode=_.android.minimumVersion,p.androidPackageName=_.android.packageName)}function Ll(E,p,_){return du.apply(this,arguments)}function du(){return(du=(0,m.Z)(function*(E,p,_){const b=(0,$.m9)(E),x={requestType:"PASSWORD_RESET",email:p};_&&Uo(b,x,_),yield Bv(b,x)})).apply(this,arguments)}function Ul(E,p,_){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,m.Z)(function*(E,p,_){yield fh((0,$.m9)(E),{oobCode:p,newPassword:_})})).apply(this,arguments)}function Th(E,p){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,m.Z)(function*(E,p){yield Il((0,$.m9)(E),{oobCode:p})})).apply(this,arguments)}function hu(E,p){return fu.apply(this,arguments)}function fu(){return(fu=(0,m.Z)(function*(E,p){const _=(0,$.m9)(E),b=yield fh(_,{oobCode:p}),x=b.requestType;switch(Ne(x,_,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ne(b.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ne(b.mfaInfo,_,"internal-error");default:Ne(b.email,_,"internal-error")}let N=null;return b.mfaInfo&&(N=xr._fromServerResponse(cn(_),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:N},operation:x}})).apply(this,arguments)}function pu(E,p){return _c.apply(this,arguments)}function _c(){return(_c=(0,m.Z)(function*(E,p){const{data:_}=yield hu((0,$.m9)(E),p);return _.email})).apply(this,arguments)}function Ap(E,p,_){return yc.apply(this,arguments)}function yc(){return(yc=(0,m.Z)(function*(E,p,_){const b=cn(E),x=yield Fo(b,{returnSecureToken:!0,email:p,password:_}),N=yield jr._fromIdTokenResponse(b,"signIn",x);return yield b._updateCurrentUser(N.user),N})).apply(this,arguments)}function Dh(E,p,_){return Lo((0,$.m9)(E),au.credential(p,_))}function jo(E,p,_){return Vl.apply(this,arguments)}function Vl(){return(Vl=(0,m.Z)(function*(E,p,_){const b=(0,$.m9)(E),x={requestType:"EMAIL_SIGNIN",email:p};Ne(_.handleCodeInApp,b,"argument-error"),_&&Uo(b,x,_),yield Tp(b,x)})).apply(this,arguments)}function Bl(E,p){const _=ko.parseLink(p);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}function Nr(E,p,_){return so.apply(this,arguments)}function so(){return(so=(0,m.Z)(function*(E,p,_){const b=(0,$.m9)(E),x=au.credentialWithLink(p,_||Zn());return Ne(x._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),Lo(b,x)})).apply(this,arguments)}function Qn(E,p){return vc.apply(this,arguments)}function vc(){return(vc=(0,m.Z)(function*(E,p){return yt(E,"POST","/v1/accounts:createAuthUri",Jt(E,p))})).apply(this,arguments)}function jv(E,p){return Sh.apply(this,arguments)}function Sh(){return(Sh=(0,m.Z)(function*(E,p){const b={identifier:p,continueUri:Ds()?Zn():"http://localhost"},{signinMethods:x}=yield Qn((0,$.m9)(E),b);return x||[]})).apply(this,arguments)}function Ec(E,p){return jl.apply(this,arguments)}function jl(){return(jl=(0,m.Z)(function*(E,p){const _=(0,$.m9)(E),x={requestType:"VERIFY_EMAIL",idToken:yield E.getIdToken()};p&&Uo(_.auth,x,p);const{email:N}=yield Xm(_.auth,x);N!==E.email&&(yield E.reload())})).apply(this,arguments)}function $l(E,p,_){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,m.Z)(function*(E,p,_){const b=(0,$.m9)(E),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield E.getIdToken(),newEmail:p};_&&Uo(b.auth,N,_);const{email:J}=yield Tl(b.auth,N);J!==E.email&&(yield E.reload())})).apply(this,arguments)}function Ta(E,p){return $o.apply(this,arguments)}function $o(){return($o=(0,m.Z)(function*(E,p){return yt(E,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function ar(E,p){return gu.apply(this,arguments)}function gu(){return(gu=(0,m.Z)(function*(E,{displayName:p,photoURL:_}){if(void 0===p&&void 0===_)return;const b=(0,$.m9)(E),N={idToken:yield b.getIdToken(),displayName:p,photoUrl:_,returnSecureToken:!0},J=yield Pt(b,Ta(b.auth,N));b.displayName=J.displayName||null,b.photoURL=J.photoUrl||null;const _e=b.providerData.find(({providerId:je})=>"password"===je);_e&&(_e.displayName=b.displayName,_e.photoURL=b.photoURL),yield b._updateTokensIfNecessary(J)})).apply(this,arguments)}function Rp(E,p){return mu((0,$.m9)(E),p,null)}function oo(E,p){return mu((0,$.m9)(E),null,p)}function mu(E,p,_){return wc.apply(this,arguments)}function wc(){return(wc=(0,m.Z)(function*(E,p,_){const{auth:b}=E,N={idToken:yield E.getIdToken(),returnSecureToken:!0};p&&(N.email=p),_&&(N.password=_);const J=yield Pt(E,Cp(b,N));yield E._updateTokensIfNecessary(J,!0)})).apply(this,arguments)}class Mi{constructor(p,_,b={}){this.isNewUser=p,this.providerId=_,this.profile=b}}class bc extends Mi{constructor(p,_,b,x){super(p,_,b),this.username=x}}class Np extends Mi{constructor(p,_){super(p,"facebook.com",_)}}class e_ extends bc{constructor(p,_){super(p,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class t_ extends Mi{constructor(p,_){super(p,"google.com",_)}}class Ji extends bc{constructor(p,_,b){super(p,"twitter.com",_,b)}}function Hl(E){const{user:p,_tokenResponse:_}=E;return p.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function(E){var p,_;if(!E)return null;const{providerId:b}=E,x=E.rawUserInfo?JSON.parse(E.rawUserInfo):{},N=E.isNewUser||"identitytoolkit#SignupNewUserResponse"===E.kind;if(!b&&(null==E?void 0:E.idToken)){const J=null===(_=null===(p=He(E.idToken))||void 0===p?void 0:p.firebase)||void 0===_?void 0:_.sign_in_provider;if(J)return new Mi(N,"anonymous"!==J&&"custom"!==J?J:null)}if(!b)return null;switch(b){case"facebook.com":return new Np(N,x);case"github.com":return new e_(N,x);case"google.com":return new t_(N,x);case"twitter.com":return new Ji(N,x,E.screenName||null);case"custom":case"anonymous":return new Mi(N,null);default:return new Mi(N,b,x)}}(_)}class Oi{constructor(p,_){this.type=p,this.credential=_}static _fromIdtoken(p){return new Oi("enroll",p)}static _fromMfaPendingCredential(p){return new Oi("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var _,b;if(null==p?void 0:p.multiFactorSession){if(null===(_=p.multiFactorSession)||void 0===_?void 0:_.pendingCredential)return Oi._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(b=p.multiFactorSession)||void 0===b?void 0:b.idToken)return Oi._fromIdtoken(p.multiFactorSession.idToken)}return null}}class Mp{constructor(p,_,b){this.session=p,this.hints=_,this.signInResolver=b}static _fromError(p,_){const b=cn(p),x=_.customData._serverResponse,N=(x.mfaInfo||[]).map(_e=>xr._fromServerResponse(b,_e));Ne(x.mfaPendingCredential,b,"internal-error");const J=Oi._fromMfaPendingCredential(x.mfaPendingCredential);return new Mp(J,N,function(){var _e=(0,m.Z)(function*(je){const Ue=yield je._process(b,J);delete x.mfaInfo,delete x.mfaPendingCredential;const Ze=Object.assign(Object.assign({},x),{idToken:Ue.idToken,refreshToken:Ue.refreshToken});switch(_.operationType){case"signIn":const hn=yield jr._fromIdTokenResponse(b,_.operationType,Ze);return yield b._updateCurrentUser(hn.user),hn;case"reauthenticate":return Ne(_.user,b,"internal-error"),jr._forOperation(_.user,_.operationType,Ze);default:pn(b,"internal-error")}});return function(je){return _e.apply(this,arguments)}}())}resolveSignIn(p){var _=this;return(0,m.Z)(function*(){return _.signInResolver(p)})()}}function Ah(E,p){var _;const b=(0,$.m9)(E),x=p;return Ne(p.customData.operationType,b,"argument-error"),Ne(null===(_=x.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,b,"argument-error"),Mp._fromError(b,x)}function Op(E,p){return yt(E,"POST","/v2/accounts/mfaEnrollment:start",Jt(E,p))}class Ho{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(b=>xr._fromServerResponse(p.auth,b)))})}static _fromUser(p){return new Ho(p)}getSession(){var p=this;return(0,m.Z)(function*(){return Oi._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,_){var b=this;return(0,m.Z)(function*(){const x=p,N=yield b.getSession(),J=yield Pt(b.user,x._process(b.user.auth,N,_));return yield b.user._updateTokensIfNecessary(J),b.user.reload()})()}unenroll(p){var _=this;return(0,m.Z)(function*(){const b="string"==typeof p?p:p.uid,x=yield _.user.getIdToken(),N=yield Pt(_.user,function(E,p){return yt(E,"POST","/v2/accounts/mfaEnrollment:withdraw",Jt(E,p))}(_.user.auth,{idToken:x,mfaEnrollmentId:b}));_.enrolledFactors=_.enrolledFactors.filter(({uid:J})=>J!==b),yield _.user._updateTokensIfNecessary(N);try{yield _.user.reload()}catch(J){if("auth/user-token-expired"!==J.code)throw J}})()}}const Sa=new WeakMap;function Cc(E){const p=(0,$.m9)(E);return Sa.has(p)||Sa.set(p,Ho._fromUser(p)),Sa.get(p)}const jt="__sak";class at{constructor(p,_){this.storageRetriever=p,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(jt,"1"),this.storage.removeItem(jt),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,_){return this.storage.setItem(p,JSON.stringify(_)),Promise.resolve()}_get(p){const _=this.storage.getItem(p);return Promise.resolve(_?JSON.parse(_):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Go=(()=>{class E extends at{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,b)=>this.onStorageEvent(_,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const E=(0,$.z$)();return Ar(E)||su(E)}()&&function(){try{return!(!window||window===window.top)}catch(E){return!1}}(),this.fallbackToPolling=Ss(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const b of Object.keys(this.listeners)){const x=this.storage.getItem(b),N=this.localCache[b];x!==N&&_(b,N,x)}}onStorageEvent(_,b=!1){if(!_.key)return void this.forAllChangedKeys((_e,je,Ue)=>{this.notifyListeners(_e,Ue)});const x=_.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const _e=this.storage.getItem(x);if(_.newValue!==_e)null!==_.newValue?this.storage.setItem(x,_.newValue):this.storage.removeItem(x);else if(this.localCache[x]===_.newValue&&!b)return}const N=()=>{const _e=this.storage.getItem(x);!b&&this.localCache[x]===_e||this.notifyListeners(x,_e)},J=this.storage.getItem(x);(0,$.w1)()&&10===document.documentMode&&J!==_.newValue&&_.newValue!==_.oldValue?setTimeout(N,10):N()}notifyListeners(_,b){this.localCache[_]=b;const x=this.listeners[_];if(x)for(const N of Array.from(x))N(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,b,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:b,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(b)}_removeListener(_,b){this.listeners[_]&&(this.listeners[_].delete(b),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,b){var x=()=>super._set,N=this;return(0,m.Z)(function*(){yield x().call(N,_,b),N.localCache[_]=JSON.stringify(b)})()}_get(_){var b=()=>super._get,x=this;return(0,m.Z)(function*(){const N=yield b().call(x,_);return x.localCache[_]=JSON.stringify(N),N})()}_remove(_){var b=()=>super._remove,x=this;return(0,m.Z)(function*(){yield b().call(x,_),delete x.localCache[_]})()}}return E.type="LOCAL",E})(),ql=(()=>{class E extends at{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,b){}_removeListener(_,b){}}return E.type="SESSION",E})();let yu=(()=>{class E{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const b=this.receivers.find(N=>N.isListeningto(_));if(b)return b;const x=new E(_);return this.receivers.push(x),x}isListeningto(_){return this.eventTarget===_}handleEvent(_){var b=this;return(0,m.Z)(function*(){const x=_,{eventId:N,eventType:J,data:_e}=x.data,je=b.handlersMap[J];if(!(null==je?void 0:je.size))return;x.ports[0].postMessage({status:"ack",eventId:N,eventType:J});const Ue=Array.from(je).map(function(){var hn=(0,m.Z)(function*(In){return In(x.origin,_e)});return function(In){return hn.apply(this,arguments)}}()),Ze=yield function(E){return Promise.all(E.map(function(){var p=(0,m.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(b){return{fulfilled:!1,reason:b}}});return function(_){return p.apply(this,arguments)}}()))}(Ue);x.ports[0].postMessage({status:"done",eventId:N,eventType:J,response:Ze})})()}_subscribe(_,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(b)}_unsubscribe(_,b){this.handlersMap[_]&&b&&this.handlersMap[_].delete(b),(!b||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return E.receivers=[],E})();function Pr(E="",p=10){let _="";for(let b=0;b<p;b++)_+=Math.floor(10*Math.random());return E+_}class vu{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,_,b=50){var x=this;return(0,m.Z)(function*(){const N="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let J,_e;return new Promise((je,Ue)=>{const Ze=Pr("",20);N.port1.start();const hn=setTimeout(()=>{Ue(new Error("unsupported_event"))},b);_e={messageChannel:N,onMessage(In){const Mr=In;if(Mr.data.eventId===Ze)switch(Mr.data.status){case"ack":clearTimeout(hn),J=setTimeout(()=>{Ue(new Error("timeout"))},3e3);break;case"done":clearTimeout(J),je(Mr.data.response);break;default:clearTimeout(hn),clearTimeout(J),Ue(new Error("invalid_response"))}}},x.handlers.add(_e),N.port1.addEventListener("message",_e.onMessage),x.target.postMessage({eventType:p,eventId:Ze,data:_},[N.port2])}).finally(()=>{_e&&x.removeMessageHandler(_e)})})()}}function Jn(){return window}function zl(){return void 0!==Jn().WorkerGlobalScope&&"function"==typeof Jn().importScripts}function wu(){return(wu=(0,m.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(E){return null}})).apply(this,arguments)}const Fi="firebaseLocalStorageDb",uo="firebaseLocalStorage",$r="fbase_key";class qo{constructor(p){this.request=p}toPromise(){return new Promise((p,_)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function xh(E,p){return E.transaction([uo],p?"readwrite":"readonly").objectStore(uo)}function Ra(){const E=indexedDB.open(Fi,1);return new Promise((p,_)=>{E.addEventListener("error",()=>{_(E.error)}),E.addEventListener("upgradeneeded",()=>{const b=E.result;try{b.createObjectStore(uo,{keyPath:$r})}catch(x){_(x)}}),E.addEventListener("success",(0,m.Z)(function*(){const b=E.result;b.objectStoreNames.contains(uo)?p(b):(b.close(),yield function(){const E=indexedDB.deleteDatabase(Fi);return new qo(E).toPromise()}(),p(yield Ra()))}))})}function ur(E,p,_){return xn.apply(this,arguments)}function xn(){return(xn=(0,m.Z)(function*(E,p,_){const b=xh(E,!0).put({[$r]:p,value:_});return new qo(b).toPromise()})).apply(this,arguments)}function Sc(){return(Sc=(0,m.Z)(function*(E,p){const _=xh(E,!1).get(p),b=yield new qo(_).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function Ph(E,p){const _=xh(E,!0).delete(p);return new qo(_).toPromise()}const bu=(()=>{class E{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,m.Z)(function*(){return _.db||(_.db=yield Ra()),_.db})()}_withRetries(_){var b=this;return(0,m.Z)(function*(){let x=0;for(;;)try{const N=yield b._openDb();return yield _(N)}catch(N){if(x++>3)throw N;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,m.Z)(function*(){return zl()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,m.Z)(function*(){_.receiver=yu._getInstance(zl()?self:null),_.receiver._subscribe("keyChanged",function(){var b=(0,m.Z)(function*(x,N){return{keyProcessed:(yield _._poll()).includes(N.key)}});return function(x,N){return b.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var b=(0,m.Z)(function*(x,N){return["keyChanged"]});return function(x,N){return b.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,m.Z)(function*(){var b,x;if(_.activeServiceWorker=yield function(){return wu.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new vu(_.activeServiceWorker);const N=yield _.sender._send("ping",{},800);!N||(null===(b=N[0])||void 0===b?void 0:b.fulfilled)&&(null===(x=N[0])||void 0===x?void 0:x.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var b=this;return(0,m.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function(){var E;return(null===(E=null==navigator?void 0:navigator.serviceWorker)||void 0===E?void 0:E.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:_},b.serviceWorkerReceiverAvailable?800:50)}catch(x){}})()}_isAvailable(){return(0,m.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Ra();return yield ur(_,jt,"1"),yield Ph(_,jt),!0}catch(_){}return!1})()}_withPendingWrite(_){var b=this;return(0,m.Z)(function*(){b.pendingWrites++;try{yield _()}finally{b.pendingWrites--}})()}_set(_,b){var x=this;return(0,m.Z)(function*(){return x._withPendingWrite((0,m.Z)(function*(){return yield x._withRetries(N=>ur(N,_,b)),x.localCache[_]=b,x.notifyServiceWorker(_)}))})()}_get(_){var b=this;return(0,m.Z)(function*(){const x=yield b._withRetries(N=>function(E,p){return Sc.apply(this,arguments)}(N,_));return b.localCache[_]=x,x})()}_remove(_){var b=this;return(0,m.Z)(function*(){return b._withPendingWrite((0,m.Z)(function*(){return yield b._withRetries(x=>Ph(x,_)),delete b.localCache[_],b.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,m.Z)(function*(){const b=yield _._withRetries(J=>{const _e=xh(J,!1).getAll();return new qo(_e).toPromise()});if(!b)return[];if(0!==_.pendingWrites)return[];const x=[],N=new Set;for(const{fbase_key:J,value:_e}of b)N.add(J),JSON.stringify(_.localCache[J])!==JSON.stringify(_e)&&(_.notifyListeners(J,_e),x.push(J));for(const J of Object.keys(_.localCache))_.localCache[J]&&!N.has(J)&&(_.notifyListeners(J,null),x.push(J));return x})()}notifyListeners(_,b){this.localCache[_]=b;const x=this.listeners[_];if(x)for(const N of Array.from(x))N(b)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,m.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(b)}_removeListener(_,b){this.listeners[_]&&(this.listeners[_].delete(b),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return E.type="LOCAL",E})();function xa(E,p){return yt(E,"POST","/v2/accounts/mfaSignIn:start",Jt(E,p))}function Li(){return(Li=(0,m.Z)(function*(E){return(yield yt(E,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Kl(E){return new Promise((p,_)=>{const b=document.createElement("script");b.setAttribute("src",E),b.onload=p,b.onerror=x=>{const N=gn("internal-error");N.customData=x,_(N)},b.type="text/javascript",b.charset="UTF-8",function(){var E,p;return null!==(p=null===(E=document.getElementsByTagName("head"))||void 0===E?void 0:E[0])&&void 0!==p?p:document}().appendChild(b)})}function En(E){return`__${E}${Math.floor(1e6*Math.random())}`}const kr=1e12;class Ac{constructor(p){this.auth=p,this.counter=kr,this._widgets=new Map}render(p,_){const b=this.counter;return this._widgets.set(b,new vi(p,this.auth.name,_||{})),this.counter++,b}reset(p){var _;const b=p||kr;null===(_=this._widgets.get(b))||void 0===_||_.delete(),this._widgets.delete(b)}getResponse(p){var _;return(null===(_=this._widgets.get(p||kr))||void 0===_?void 0:_.getResponse())||""}execute(p){var _=this;return(0,m.Z)(function*(){var b;return null===(b=_._widgets.get(p||kr))||void 0===b||b.execute(),""})()}}class vi{constructor(p,_,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof p?document.getElementById(p):p;Ne(x,"argument-error",{appName:_}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(E){const p=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<50;b++)p.push(_.charAt(Math.floor(Math.random()*_.length)));return p.join("")}();const{callback:p,"expired-callback":_}=this.params;if(p)try{p(this.responseToken)}catch(b){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(b){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ka=En("rcb"),Ei=new ln(3e4,6e4);class Oh{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Jn().grecaptcha}load(p,_=""){return Ne((E=_).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(E),p,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(Jn().grecaptcha):new Promise((b,x)=>{const N=Jn().setTimeout(()=>{x(gn(p,"network-request-failed"))},Ei.get());Jn()[ka]=()=>{Jn().clearTimeout(N),delete Jn()[ka];const _e=Jn().grecaptcha;if(!_e)return void x(gn(p,"internal-error"));const je=_e.render;_e.render=(Ue,Ze)=>{const hn=je(Ue,Ze);return this.counter++,hn},this.hostLanguage=_,b(_e)},Kl(`https://www.google.com/recaptcha/api.js??${(0,$.xO)({onload:ka,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(N),x(gn(p,"internal-error"))})});var E}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){return!!Jn().grecaptcha&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class co{load(p){return(0,m.Z)(function*(){return new Ac(p)})()}clearedOneInstance(){}}const Lp="recaptcha",Ma={theme:"light",type:"image"};class Zl{constructor(p,_=Object.assign({},Ma),b){this.parameters=_,this.type=Lp,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=cn(b),this.isInvisible="invisible"===this.parameters.size,Ne("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof p?document.getElementById(p):p;Ne(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new co:new Oh,this.validateStartingState()}verify(){var p=this;return(0,m.Z)(function*(){p.assertNotDestroyed();const _=yield p.render(),b=p.getAssertedRecaptcha();return b.getResponse(_)||new Promise(N=>{const J=_e=>{!_e||(p.tokenChangeListeners.delete(J),N(_e))};p.tokenChangeListeners.add(J),p.isInvisible&&b.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){Ne(!this.parameters.sitekey,this.auth,"argument-error"),Ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ne("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return _=>{if(this.tokenChangeListeners.forEach(b=>b(_)),"function"==typeof p)p(_);else if("string"==typeof p){const b=Jn()[p];"function"==typeof b&&b(_)}}}assertNotDestroyed(){Ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,m.Z)(function*(){if(yield p.init(),!p.widgetId){let _=p.container;if(!p.isInvisible){const b=document.createElement("div");_.appendChild(b),_=b}p.widgetId=p.getAssertedRecaptcha().render(_,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,m.Z)(function*(){Ne(Ds()&&!zl(),p.auth,"internal-error"),yield function(){let E=null;return new Promise(p=>{"complete"!==document.readyState?(E=()=>p(),window.addEventListener("load",E)):p()}).catch(p=>{throw E&&window.removeEventListener("load",E),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const _=yield function(E){return Li.apply(this,arguments)}(p.auth);Ne(_,p.auth,"internal-error"),p.parameters.sitekey=_})()}getAssertedRecaptcha(){return Ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Vi{constructor(p,_){this.verificationId=p,this.onConfirmation=_}confirm(p){const _=ri._fromVerification(this.verificationId,p);return this.onConfirmation(_)}}function pr(E,p,_){return Fh.apply(this,arguments)}function Fh(){return(Fh=(0,m.Z)(function*(E,p,_){const b=cn(E),x=yield B(b,p,(0,$.m9)(_));return new Vi(x,N=>Lo(b,N))})).apply(this,arguments)}function Lh(E,p,_){return T.apply(this,arguments)}function T(){return(T=(0,m.Z)(function*(E,p,_){const b=(0,$.m9)(E);yield Ot(!1,b,"phone");const x=yield B(b.auth,p,(0,$.m9)(_));return new Vi(x,N=>Sp(b,N))})).apply(this,arguments)}function S(E,p,_){return P.apply(this,arguments)}function P(){return(P=(0,m.Z)(function*(E,p,_){const b=(0,$.m9)(E),x=yield B(b.auth,p,(0,$.m9)(_));return new Vi(x,N=>lu(b,N))})).apply(this,arguments)}function B(E,p,_){return re.apply(this,arguments)}function re(){return(re=(0,m.Z)(function*(E,p,_){var b;const x=yield _.verify();try{let N;if(Ne("string"==typeof x,E,"argument-error"),Ne(_.type===Lp,E,"argument-error"),N="string"==typeof p?{phoneNumber:p}:p,"session"in N){const J=N.session;if("phoneNumber"in N)return Ne("enroll"===J.type,E,"internal-error"),(yield Op(E,{idToken:J.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{Ne("signin"===J.type,E,"internal-error");const _e=(null===(b=N.multiFactorHint)||void 0===b?void 0:b.uid)||N.multiFactorUid;return Ne(_e,E,"missing-multi-factor-info"),(yield xa(E,{mfaPendingCredential:J.credential,mfaEnrollmentId:_e,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:J}=yield Dp(E,{phoneNumber:N.phoneNumber,recaptchaToken:x});return J}}finally{_._reset()}})).apply(this,arguments)}function ue(E,p){return ke.apply(this,arguments)}function ke(){return(ke=(0,m.Z)(function*(E,p){yield As((0,$.m9)(E),p)})).apply(this,arguments)}let Je=(()=>{class E{constructor(_){this.providerId=E.PROVIDER_ID,this.auth=cn(_)}verifyPhoneNumber(_,b){return B(this.auth,_,(0,$.m9)(b))}static credential(_,b){return ri._fromVerification(_,b)}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:b,temporaryProof:x}=_;return b&&x?ri._fromTokenResponse(b,x):null}}return E.PROVIDER_ID="phone",E.PHONE_SIGN_IN_METHOD="phone",E})();function gt(E,p){return p?Zt(p):(Ne(E._popupRedirectResolver,E,"argument-error"),E._popupRedirectResolver)}class ft extends ga{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Zi(p,this._buildIdpRequest())}_linkToIdToken(p,_){return Zi(p,this._buildIdpRequest(_))}_getReauthenticationResolver(p){return Zi(p,this._buildIdpRequest())}_buildIdpRequest(p){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(_.idToken=p),_}}function Yt(E){return Rs(E.auth,new ft(E),E.bypassAuthState)}function bt(E){const{auth:p,user:_}=E;return Ne(_,p,"internal-error"),bn(_,new ft(E),E.bypassAuthState)}function Bi(E){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,m.Z)(function*(E){const{auth:p,user:_}=E;return Ne(_,p,"internal-error"),As(_,new ft(E),E.bypassAuthState)})).apply(this,arguments)}class Oa{constructor(p,_,b,x,N=!1){this.auth=p,this.resolver=b,this.user=x,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var p=this;return new Promise(function(){var _=(0,m.Z)(function*(b,x){p.pendingPromise={resolve:b,reject:x};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(N){p.reject(N)}});return function(b,x){return _.apply(this,arguments)}}())}onAuthEvent(p){var _=this;return(0,m.Z)(function*(){const{urlResponse:b,sessionId:x,postBody:N,tenantId:J,error:_e,type:je}=p;if(_e)return void _.reject(_e);const Ue={auth:_.auth,requestUri:b,sessionId:x,tenantId:J||void 0,postBody:N||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(je)(Ue))}catch(Ze){_.reject(Ze)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Yt;case"linkViaPopup":case"linkViaRedirect":return Bi;case"reauthViaPopup":case"reauthViaRedirect":return bt;default:pn(this.auth,"internal-error")}}resolve(p){dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Iu=new ln(2e3,1e4);function Rc(E,p,_){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,m.Z)(function*(E,p,_){const b=cn(E);ei(E,p,Xt);const x=gt(b,_);return new Ko(b,"signInViaPopup",p,x).executeNotNull()})).apply(this,arguments)}function _s(E,p,_){return ys.apply(this,arguments)}function ys(){return(ys=(0,m.Z)(function*(E,p,_){const b=(0,$.m9)(E);ei(b.auth,p,Xt);const x=gt(b.auth,_);return new Ko(b.auth,"reauthViaPopup",p,x,b).executeNotNull()})).apply(this,arguments)}function qt(E,p,_){return er.apply(this,arguments)}function er(){return(er=(0,m.Z)(function*(E,p,_){const b=(0,$.m9)(E);ei(b.auth,p,Xt);const x=gt(b.auth,_);return new Ko(b.auth,"linkViaPopup",p,x,b).executeNotNull()})).apply(this,arguments)}let Ko=(()=>{class E extends Oa{constructor(_,b,x,N,J){super(_,b,N,J),this.provider=x,this.authWindow=null,this.pollId=null,E.currentPopupAction&&E.currentPopupAction.cancel(),E.currentPopupAction=this}executeNotNull(){var _=this;return(0,m.Z)(function*(){const b=yield _.execute();return Ne(b,_.auth,"internal-error"),b})()}onExecution(){var _=this;return(0,m.Z)(function*(){dr(1===_.filter.length,"Popup operations only handle one event");const b=Pr();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],b),_.authWindow.associatedEvent=b,_.resolver._originValidation(_.auth).catch(x=>{_.reject(x)}),_.resolver._isIframeWebStorageSupported(_.auth,x=>{x||_.reject(gn(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(gn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,E.currentPopupAction=null}pollUserCancellation(){const _=()=>{var b,x;this.pollId=(null===(x=null===(b=this.authWindow)||void 0===b?void 0:b.window)||void 0===x?void 0:x.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(gn(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,Iu.get())};_()}}return E.currentPopupAction=null,E})();const es=new Map;class Yl extends Oa{constructor(p,_,b=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,b),this.eventId=null}execute(){var p=()=>super.execute,_=this;return(0,m.Z)(function*(){let b=es.get(_.auth._key());if(!b){try{const N=(yield function(E,p){return Uh.apply(this,arguments)}(_.resolver,_.auth))?yield p().call(_):null;b=()=>Promise.resolve(N)}catch(x){b=()=>Promise.reject(x)}es.set(_.auth._key(),b)}return _.bypassAuthState||es.set(_.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(p){var _=()=>super.onAuthEvent,b=this;return(0,m.Z)(function*(){if("signInViaRedirect"===p.type)return _().call(b,p);if("unknown"!==p.type){if(p.eventId){const x=yield b.auth._redirectUserForId(p.eventId);if(x)return b.user=x,_().call(b,p);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,m.Z)(function*(){})()}cleanUp(){}}function Uh(){return(Uh=(0,m.Z)(function*(E,p){const _=Fn(p),b=Vh(E);if(!(yield b._isAvailable()))return!1;const x="true"===(yield b._get(_));return yield b._remove(_),x})).apply(this,arguments)}function ts(E,p){return Up.apply(this,arguments)}function Up(){return(Up=(0,m.Z)(function*(E,p){return Vh(E)._set(Fn(p),"true")})).apply(this,arguments)}function Cu(){es.clear()}function Os(E,p){es.set(E._key(),p)}function Vh(E){return Zt(E._redirectPersistence)}function Fn(E){return xi("pendingRedirect",E.config.apiKey,E.name)}function lo(E,p,_){return function(E,p,_){return Ql.apply(this,arguments)}(E,p,_)}function Ql(){return(Ql=(0,m.Z)(function*(E,p,_){const b=cn(E);ei(E,p,Xt);const x=gt(b,_);return yield ts(x,b),x._openRedirect(b,p,"signInViaRedirect")})).apply(this,arguments)}function Jl(E,p,_){return function(E,p,_){return Bp.apply(this,arguments)}(E,p,_)}function Bp(){return(Bp=(0,m.Z)(function*(E,p,_){const b=(0,$.m9)(E);ei(b.auth,p,Xt);const x=gt(b.auth,_);yield ts(x,b.auth);const N=yield ed(b);return x._openRedirect(b.auth,p,"reauthViaRedirect",N)})).apply(this,arguments)}function o_(E,p,_){return function(E,p,_){return Fa.apply(this,arguments)}(E,p,_)}function Fa(){return(Fa=(0,m.Z)(function*(E,p,_){const b=(0,$.m9)(E);ei(b.auth,p,Xt);const x=gt(b.auth,_);yield Ot(!1,b,p.providerId),yield ts(x,b.auth);const N=yield ed(b);return x._openRedirect(b.auth,p,"linkViaRedirect",N)})).apply(this,arguments)}function a_(E,p){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,m.Z)(function*(E,p){return yield cn(E)._initializationPromise,ho(E,p,!1)})).apply(this,arguments)}function ho(E,p){return zt.apply(this,arguments)}function zt(){return(zt=(0,m.Z)(function*(E,p,_=!1){const b=cn(E),x=gt(b,p),J=yield new Yl(b,x,_).execute();return J&&!_&&(delete J.user._redirectEventId,yield b._persistUserIfCurrent(J.user),yield b._setRedirectUser(null,p)),J})).apply(this,arguments)}function ed(E){return jp.apply(this,arguments)}function jp(){return(jp=(0,m.Z)(function*(E){const p=Pr(`${E.uid}:::`);return E._redirectEventId=p,yield E.auth._setRedirectUser(E),yield E.auth._persistUserIfCurrent(E),p})).apply(this,arguments)}class u_{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let _=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(p,b)&&(_=!0,this.sendToConsumer(p,b),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function(E){switch(E.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return td(E);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=p,_=!0)),_}sendToConsumer(p,_){var b;if(p.error&&!td(p)){const x=(null===(b=p.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";_.onError(gn(this.auth,x))}else _.onAuthEvent(p)}isEventForConsumer(p,_){const b=null===_.eventId||!!p.eventId&&p.eventId===_.eventId;return _.filter.includes(p.type)&&b}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Du(p))}saveEventToCache(p){this.cachedEventUids.add(Du(p)),this.lastProcessedEventTime=Date.now()}}function Du(E){return[E.type,E.eventId,E.sessionId,E.tenantId].filter(p=>p).join("-")}function td({type:E,error:p}){return"unknown"===E&&"auth/no-auth-event"===(null==p?void 0:p.code)}function nd(E){return Su.apply(this,arguments)}function Su(){return(Su=(0,m.Z)(function*(E,p={}){return yt(E,"GET","/v1/projects",p)})).apply(this,arguments)}const qv=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Au=/^https?/;function Pc(){return(Pc=(0,m.Z)(function*(E){if(E.config.emulator)return;const{authorizedDomains:p}=yield nd(E);for(const _ of p)try{if(rd(_))return}catch(b){}pn(E,"unauthorized-domain")})).apply(this,arguments)}function rd(E){const p=Zn(),{protocol:_,hostname:b}=new URL(p);if(E.startsWith("chrome-extension://")){const J=new URL(E);return""===J.hostname&&""===b?"chrome-extension:"===_&&E.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===_&&J.hostname===b}if(!Au.test(_))return!1;if(qv.test(E))return b===E;const x=E.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(b)}const Hp=new ln(3e4,6e4);function Zo(){const E=Jn().___jsl;if(null==E?void 0:E.H)for(const p of Object.keys(E.H))if(E.H[p].r=E.H[p].r||[],E.H[p].L=E.H[p].L||[],E.H[p].r=[...E.H[p].L],E.CP)for(let _=0;_<E.CP.length;_++)E.CP[_]=null}let Bh=null;function Kv(E){return Bh=Bh||function(E){return new Promise((p,_)=>{var b,x,N;function J(){Zo(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Zo(),_(gn(E,"network-request-failed"))},timeout:Hp.get()})}if(null===(x=null===(b=Jn().gapi)||void 0===b?void 0:b.iframes)||void 0===x?void 0:x.Iframe)p(gapi.iframes.getContext());else{if(!(null===(N=Jn().gapi)||void 0===N?void 0:N.load)){const _e=En("iframefcb");return Jn()[_e]=()=>{gapi.load?J():_(gn(E,"network-request-failed"))},Kl(`https://apis.google.com/js/api.js?onload=${_e}`).catch(je=>_(je))}J()}}).catch(p=>{throw Bh=null,p})}(E),Bh}const jh=new ln(5e3,15e3),kc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},c_=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Yv(E){const p=E.config;Ne(p.authDomain,E,"auth-domain-config-required");const _=p.emulator?qe(p,"emulator/auth/iframe"):`https://${E.config.authDomain}/__/auth/iframe`,b={apiKey:p.apiKey,appName:E.name,v:O.SDK_VERSION},x=c_.get(E.config.apiHost);x&&(b.eid=x);const N=E._getFrameworks();return N.length&&(b.fw=N.join(",")),`${_}?${(0,$.xO)(b).slice(1)}`}function id(){return(id=(0,m.Z)(function*(E){const p=yield Kv(E),_=Jn().gapi;return Ne(_,E,"internal-error"),p.open({where:document.body,url:Yv(E),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kc,dontclear:!0},b=>new Promise(function(){var x=(0,m.Z)(function*(N,J){yield b.restyle({setHideOnLeave:!1});const _e=gn(E,"network-request-failed"),je=Jn().setTimeout(()=>{J(_e)},jh.get());function Ue(){Jn().clearTimeout(je),N(b)}b.ping(Ue).then(Ue,()=>{J(_e)})});return function(N,J){return x.apply(this,arguments)}}()))})).apply(this,arguments)}const Gp={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class f_{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function sd(E,p,_,b,x,N){Ne(E.config.authDomain,E,"auth-domain-config-required"),Ne(E.config.apiKey,E,"invalid-api-key");const J={apiKey:E.config.apiKey,appName:E.name,authType:_,redirectUrl:b,v:O.SDK_VERSION,eventId:x};if(p instanceof Xt){p.setDefaultLanguage(E.languageCode),J.providerId=p.providerId||"",(0,$.xb)(p.getCustomParameters())||(J.customParameters=JSON.stringify(p.getCustomParameters()));for(const[je,Ue]of Object.entries(N||{}))J[je]=Ue}if(p instanceof va){const je=p.getScopes().filter(Ue=>""!==Ue);je.length>0&&(J.scopes=je.join(","))}E.tenantId&&(J.tid=E.tenantId);const _e=J;for(const je of Object.keys(_e))void 0===_e[je]&&delete _e[je];return`${function({config:E}){return E.emulator?qe(E,"emulator/auth/handler"):`https://${E.authDomain}/__/auth/handler`}(E)}?${(0,$.xO)(_e).slice(1)}`}const Ua="webStorageSupport",od=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ql,this._completeRedirectFn=ho,this._overrideRedirectResult=Os}_openPopup(p,_,b,x){var N=this;return(0,m.Z)(function*(){var J;dr(null===(J=N.eventManagers[p._key()])||void 0===J?void 0:J.manager,"_initialize() not called before _openPopup()");const _e=sd(p,_,b,Zn(),x);return function(E,p,_,b=500,x=600){const N=Math.max((window.screen.availHeight-x)/2,0).toString(),J=Math.max((window.screen.availWidth-b)/2,0).toString();let _e="";const je=Object.assign(Object.assign({},Gp),{width:b.toString(),height:x.toString(),top:N,left:J}),Ue=(0,$.z$)().toLowerCase();_&&(_e=fa(Ue)?"_blank":_),ha(Ue)&&(p=p||"http://localhost",je.scrollbars="yes");const Ze=Object.entries(je).reduce((In,[Mr,Jo])=>`${In}${Mr}=${Jo},`,"");if(function(E=(0,$.z$)()){var p;return su(E)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(Ue)&&"_self"!==_e)return function(E,p){const _=document.createElement("a");_.href=E,_.target=p;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(b)}(p||"",_e),new f_(null);const hn=window.open(p||"",_e,Ze);Ne(hn,E,"popup-blocked");try{hn.focus()}catch(In){}return new f_(hn)}(p,_e,Pr())})()}_openRedirect(p,_,b,x){var N=this;return(0,m.Z)(function*(){return yield N._originValidation(p),E=sd(p,_,b,Zn(),x),Jn().location.href=E,new Promise(()=>{});var E})()}_initialize(p){const _=p._key();if(this.eventManagers[_]){const{manager:x,promise:N}=this.eventManagers[_];return x?Promise.resolve(x):(dr(N,"If manager is not set, promise should be"),N)}const b=this.initAndGetManager(p);return this.eventManagers[_]={promise:b},b.catch(()=>{delete this.eventManagers[_]}),b}initAndGetManager(p){var _=this;return(0,m.Z)(function*(){const b=yield function(E){return id.apply(this,arguments)}(p),x=new u_(p);return b.register("authEvent",N=>(Ne(null==N?void 0:N.authEvent,p,"invalid-auth-event"),{status:x.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[p._key()]={manager:x},_.iframes[p._key()]=b,x})()}_isIframeWebStorageSupported(p,_){this.iframes[p._key()].send(Ua,{type:Ua},x=>{var N;const J=null===(N=null==x?void 0:x[0])||void 0===N?void 0:N[Ua];void 0!==J&&_(!!J),pn(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function(E){return Pc.apply(this,arguments)}(p)),this.originValidationPromises[_]}get _shouldInitProactively(){return Ss()||Ar()||su()}};class ad extends class{constructor(p){this.factorId=p}_process(p,_,b){switch(_.type){case"enroll":return this._finalizeEnroll(p,_.credential,b);case"signin":return this._finalizeSignIn(p,_.credential);default:return zn("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new ad(p)}_finalizeEnroll(p,_,b){return function(E,p){return yt(E,"POST","/v2/accounts/mfaEnrollment:finalize",Jt(E,p))}(p,{idToken:_,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,_){return function(E,p){return yt(E,"POST","/v2/accounts/mfaSignIn:finalize",Jt(E,p))}(p,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Xv=(()=>{class E{constructor(){}static assertion(_){return ad._fromCredential(_)}}return E.FACTOR_ID="phone",E})();var E,eE="@firebase/auth";class Wp{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var _=this;return(0,m.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const _=this.auth.onIdTokenChanged(b=>{var x;p((null===(x=b)||void 0===x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,_),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const _=this.internalListeners.get(p);!_||(this.internalListeners.delete(p),_(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}E="Browser",(0,O._registerComponent)(new We.wA("auth",(p,{options:_})=>{const b=p.getProvider("app").getImmediate(),x=p.getProvider("heartbeat"),{apiKey:N,authDomain:J}=b.options;return((_e,je)=>{Ne(N&&!N.includes(":"),"invalid-api-key",{appName:_e.name}),Ne(!(null==J?void 0:J.includes(":")),"argument-error",{appName:_e.name});const Ue={apiKey:N,authDomain:J,clientPlatform:E,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Rr(E)},Ze=new to(_e,je,Ue);return function(E,p){const _=(null==p?void 0:p.persistence)||[],b=(Array.isArray(_)?_:[_]).map(Zt);(null==p?void 0:p.errorMap)&&E._updateErrorMap(p.errorMap),E._initializeWithPersistence(b,null==p?void 0:p.popupRedirectResolver)}(Ze,_),Ze})(b,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,_,b)=>{p.getProvider("auth-internal").initialize()})),(0,O._registerComponent)(new We.wA("auth-internal",p=>{const _=cn(p.getProvider("auth").getImmediate());return new Wp(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,O.registerVersion)(eE,"0.20.2",void 0),(0,O.registerVersion)(eE,"0.20.2","esm2017")},3854:(Qe,Ee,U)=>{"use strict";U.d(Ee,{BH:()=>ce,LL:()=>We,ZR:()=>Et,gQ:()=>Ne,zI:()=>$e,hu:()=>$,g5:()=>O,US:()=>ne,tV:()=>oe,h$:()=>be,L:()=>te,$s:()=>Jt,r3:()=>Kt,Sg:()=>pe,ne:()=>zn,p$:()=>V,vZ:()=>pn,ZB:()=>H,gK:()=>Zn,pd:()=>ti,m9:()=>jn,z$:()=>Te,GJ:()=>hs,jU:()=>fe,ru:()=>De,d:()=>Xe,xb:()=>Tn,w1:()=>dt,hl:()=>Oe,uI:()=>we,UG:()=>Be,Yr:()=>Lt,b$:()=>xe,G6:()=>vt,Mn:()=>Wt,w9:()=>Ki,cI:()=>zi,UI:()=>qn,xO:()=>Qs,zd:()=>ei,DV:()=>Ts,ug:()=>ln,dS:()=>Ro,Pz:()=>Jr,Dv:()=>Kn,Wj:()=>kn,lb:()=>mn,eu:()=>Fe});const $=function(K,G){if(!K)throw O(G)},O=function(K){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+K)},ae=function(K){const G=[];let Q=0;for(let ve=0;ve<K.length;ve++){let z=K.charCodeAt(ve);z<128?G[Q++]=z:z<2048?(G[Q++]=z>>6|192,G[Q++]=63&z|128):55296==(64512&z)&&ve+1<K.length&&56320==(64512&K.charCodeAt(ve+1))?(z=65536+((1023&z)<<10)+(1023&K.charCodeAt(++ve)),G[Q++]=z>>18|240,G[Q++]=z>>12&63|128,G[Q++]=z>>6&63|128,G[Q++]=63&z|128):(G[Q++]=z>>12|224,G[Q++]=z>>6&63|128,G[Q++]=63&z|128)}return G},ne={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(K,G){if(!Array.isArray(K))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Q=G?this.byteToCharMapWebSafe_:this.byteToCharMap_,ve=[];for(let z=0;z<K.length;z+=3){const ie=K[z],Me=z+1<K.length,Ke=Me?K[z+1]:0,ht=z+2<K.length,Rt=ht?K[z+2]:0;let hr=(15&Ke)<<2|Rt>>6,de=63&Rt;ht||(de=64,Me||(hr=64)),ve.push(Q[ie>>2],Q[(3&ie)<<4|Ke>>4],Q[hr],Q[de])}return ve.join("")},encodeString(K,G){return this.HAS_NATIVE_SUPPORT&&!G?btoa(K):this.encodeByteArray(ae(K),G)},decodeString(K,G){return this.HAS_NATIVE_SUPPORT&&!G?atob(K):function(K){const G=[];let Q=0,ve=0;for(;Q<K.length;){const z=K[Q++];if(z<128)G[ve++]=String.fromCharCode(z);else if(z>191&&z<224){const ie=K[Q++];G[ve++]=String.fromCharCode((31&z)<<6|63&ie)}else if(z>239&&z<365){const ht=((7&z)<<18|(63&K[Q++])<<12|(63&K[Q++])<<6|63&K[Q++])-65536;G[ve++]=String.fromCharCode(55296+(ht>>10)),G[ve++]=String.fromCharCode(56320+(1023&ht))}else{const ie=K[Q++],Me=K[Q++];G[ve++]=String.fromCharCode((15&z)<<12|(63&ie)<<6|63&Me)}}return G.join("")}(this.decodeStringToByteArray(K,G))},decodeStringToByteArray(K,G){this.init_();const Q=G?this.charToByteMapWebSafe_:this.charToByteMap_,ve=[];for(let z=0;z<K.length;){const ie=Q[K.charAt(z++)],Ke=z<K.length?Q[K.charAt(z)]:0;++z;const Rt=z<K.length?Q[K.charAt(z)]:64;++z;const Ct=z<K.length?Q[K.charAt(z)]:64;if(++z,null==ie||null==Ke||null==Rt||null==Ct)throw Error();ve.push(ie<<2|Ke>>4),64!==Rt&&(ve.push(Ke<<4&240|Rt>>2),64!==Ct&&ve.push(Rt<<6&192|Ct))}return ve},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let K=0;K<this.ENCODED_VALS.length;K++)this.byteToCharMap_[K]=this.ENCODED_VALS.charAt(K),this.charToByteMap_[this.byteToCharMap_[K]]=K,this.byteToCharMapWebSafe_[K]=this.ENCODED_VALS_WEBSAFE.charAt(K),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[K]]=K,K>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(K)]=K,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(K)]=K)}}},be=function(K){const G=ae(K);return ne.encodeByteArray(G,!0)},te=function(K){return be(K).replace(/\./g,"")},oe=function(K){try{return ne.decodeString(K,!0)}catch(G){console.error("base64Decode failed: ",G)}return null};function V(K){return H(void 0,K)}function H(K,G){if(!(G instanceof Object))return G;switch(G.constructor){case Date:return new Date(G.getTime());case Object:void 0===K&&(K={});break;case Array:K=[];break;default:return G}for(const Q in G)!G.hasOwnProperty(Q)||!q(Q)||(K[Q]=H(K[Q],G[Q]));return K}function q(K){return"__proto__"!==K}class ce{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((G,Q)=>{this.resolve=G,this.reject=Q})}wrapCallback(G){return(Q,ve)=>{Q?this.reject(Q):this.resolve(ve),"function"==typeof G&&(this.promise.catch(()=>{}),1===G.length?G(Q):G(Q,ve))}}}function pe(K,G){if(K.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ve=G||"demo-project",z=K.iat||0,ie=K.sub||K.user_id;if(!ie)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Me=Object.assign({iss:`https://securetoken.google.com/${ve}`,aud:ve,iat:z,exp:z+3600,auth_time:z,sub:ie,user_id:ie,firebase:{sign_in_provider:"custom",identities:{}}},K);return[te(JSON.stringify({alg:"none",type:"JWT"})),te(JSON.stringify(Me)),""].join(".")}function Te(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function we(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Te())}function Be(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(K){return!1}}function fe(){return"object"==typeof self&&self.self===self}function De(){const K="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof K&&void 0!==K.id}function xe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Xe(){return Te().indexOf("Electron/")>=0}function dt(){const K=Te();return K.indexOf("MSIE ")>=0||K.indexOf("Trident/")>=0}function Wt(){return Te().indexOf("MSAppHost/")>=0}function Lt(){return!1}function vt(){return!Be()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Oe(){return"object"==typeof indexedDB}function Fe(){return new Promise((K,G)=>{try{let Q=!0;const ve="validate-browser-context-for-indexeddb-analytics-module",z=self.indexedDB.open(ve);z.onsuccess=()=>{z.result.close(),Q||self.indexedDB.deleteDatabase(ve),K(!0)},z.onupgradeneeded=()=>{Q=!1},z.onerror=()=>{var ie;G((null===(ie=z.error)||void 0===ie?void 0:ie.message)||"")}}catch(Q){G(Q)}})}function $e(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Et extends Error{constructor(G,Q,ve){super(Q),this.code=G,this.customData=ve,this.name="FirebaseError",Object.setPrototypeOf(this,Et.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,We.prototype.create)}}class We{constructor(G,Q,ve){this.service=G,this.serviceName=Q,this.errors=ve}create(G,...Q){const ve=Q[0]||{},z=`${this.service}/${G}`,ie=this.errors[G],Me=ie?function(K,G){return K.replace(Sr,(Q,ve)=>{const z=G[ve];return null!=z?String(z):`<${ve}?>`})}(ie,ve):"Error";return new Et(z,`${this.serviceName}: ${Me} (${z}).`,ve)}}const Sr=/\{\$([^}]+)}/g;function zi(K){return JSON.parse(K)}function Jr(K){return JSON.stringify(K)}const Pn=function(K){let G={},Q={},ve={},z="";try{const ie=K.split(".");G=zi(oe(ie[0])||""),Q=zi(oe(ie[1])||""),z=ie[2],ve=Q.d||{},delete Q.d}catch(ie){}return{header:G,claims:Q,data:ve,signature:z}},Ki=function(K){const Q=Pn(K).claims;return!!Q&&"object"==typeof Q&&Q.hasOwnProperty("iat")},hs=function(K){const G=Pn(K).claims;return"object"==typeof G&&!0===G.admin};function Kt(K,G){return Object.prototype.hasOwnProperty.call(K,G)}function Ts(K,G){if(Object.prototype.hasOwnProperty.call(K,G))return K[G]}function Tn(K){for(const G in K)if(Object.prototype.hasOwnProperty.call(K,G))return!1;return!0}function qn(K,G,Q){const ve={};for(const z in K)Object.prototype.hasOwnProperty.call(K,z)&&(ve[z]=G.call(Q,K[z],z,K));return ve}function pn(K,G){if(K===G)return!0;const Q=Object.keys(K),ve=Object.keys(G);for(const z of Q){if(!ve.includes(z))return!1;const ie=K[z],Me=G[z];if(gn(ie)&&gn(Me)){if(!pn(ie,Me))return!1}else if(ie!==Me)return!1}for(const z of ve)if(!Q.includes(z))return!1;return!0}function gn(K){return null!==K&&"object"==typeof K}function Qs(K){const G=[];for(const[Q,ve]of Object.entries(K))Array.isArray(ve)?ve.forEach(z=>{G.push(encodeURIComponent(Q)+"="+encodeURIComponent(z))}):G.push(encodeURIComponent(Q)+"="+encodeURIComponent(ve));return G.length?"&"+G.join("&"):""}function ei(K){const G={};return K.replace(/^\?/,"").split("&").forEach(ve=>{if(ve){const[z,ie]=ve.split("=");G[decodeURIComponent(z)]=decodeURIComponent(ie)}}),G}function ti(K){const G=K.indexOf("?");if(!G)return"";const Q=K.indexOf("#",G);return K.substring(G,Q>0?Q:void 0)}class Ne{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let G=1;G<this.blockSize;++G)this.pad_[G]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(G,Q){Q||(Q=0);const ve=this.W_;if("string"==typeof G)for(let Ct=0;Ct<16;Ct++)ve[Ct]=G.charCodeAt(Q)<<24|G.charCodeAt(Q+1)<<16|G.charCodeAt(Q+2)<<8|G.charCodeAt(Q+3),Q+=4;else for(let Ct=0;Ct<16;Ct++)ve[Ct]=G[Q]<<24|G[Q+1]<<16|G[Q+2]<<8|G[Q+3],Q+=4;for(let Ct=16;Ct<80;Ct++){const hr=ve[Ct-3]^ve[Ct-8]^ve[Ct-14]^ve[Ct-16];ve[Ct]=4294967295&(hr<<1|hr>>>31)}let Rt,_n,z=this.chain_[0],ie=this.chain_[1],Me=this.chain_[2],Ke=this.chain_[3],ht=this.chain_[4];for(let Ct=0;Ct<80;Ct++){Ct<40?Ct<20?(Rt=Ke^ie&(Me^Ke),_n=1518500249):(Rt=ie^Me^Ke,_n=1859775393):Ct<60?(Rt=ie&Me|Ke&(ie|Me),_n=2400959708):(Rt=ie^Me^Ke,_n=3395469782);const hr=(z<<5|z>>>27)+Rt+ht+_n+ve[Ct]&4294967295;ht=Ke,Ke=Me,Me=4294967295&(ie<<30|ie>>>2),ie=z,z=hr}this.chain_[0]=this.chain_[0]+z&4294967295,this.chain_[1]=this.chain_[1]+ie&4294967295,this.chain_[2]=this.chain_[2]+Me&4294967295,this.chain_[3]=this.chain_[3]+Ke&4294967295,this.chain_[4]=this.chain_[4]+ht&4294967295}update(G,Q){if(null==G)return;void 0===Q&&(Q=G.length);const ve=Q-this.blockSize;let z=0;const ie=this.buf_;let Me=this.inbuf_;for(;z<Q;){if(0===Me)for(;z<=ve;)this.compress_(G,z),z+=this.blockSize;if("string"==typeof G){for(;z<Q;)if(ie[Me]=G.charCodeAt(z),++Me,++z,Me===this.blockSize){this.compress_(ie),Me=0;break}}else for(;z<Q;)if(ie[Me]=G[z],++Me,++z,Me===this.blockSize){this.compress_(ie),Me=0;break}}this.inbuf_=Me,this.total_+=Q}digest(){const G=[];let Q=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let z=this.blockSize-1;z>=56;z--)this.buf_[z]=255&Q,Q/=256;this.compress_(this.buf_);let ve=0;for(let z=0;z<5;z++)for(let ie=24;ie>=0;ie-=8)G[ve]=this.chain_[z]>>ie&255,++ve;return G}}function zn(K,G){const Q=new dr(K,G);return Q.subscribe.bind(Q)}class dr{constructor(G,Q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Q,this.task.then(()=>{G(this)}).catch(ve=>{this.error(ve)})}next(G){this.forEachObserver(Q=>{Q.next(G)})}error(G){this.forEachObserver(Q=>{Q.error(G)}),this.close(G)}complete(){this.forEachObserver(G=>{G.complete()}),this.close()}subscribe(G,Q,ve){let z;if(void 0===G&&void 0===Q&&void 0===ve)throw new Error("Missing Observer.");z=function(K,G){if("object"!=typeof K||null===K)return!1;for(const Q of["next","error","complete"])if(Q in K&&"function"==typeof K[Q])return!0;return!1}(G)?G:{next:G,error:Q,complete:ve},void 0===z.next&&(z.next=Dn),void 0===z.error&&(z.error=Dn),void 0===z.complete&&(z.complete=Dn);const ie=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?z.error(this.finalError):z.complete()}catch(Me){}}),this.observers.push(z),ie}unsubscribeOne(G){void 0===this.observers||void 0===this.observers[G]||(delete this.observers[G],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(G){if(!this.finalized)for(let Q=0;Q<this.observers.length;Q++)this.sendOne(Q,G)}sendOne(G,Q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[G])try{Q(this.observers[G])}catch(ve){"undefined"!=typeof console&&console.error&&console.error(ve)}})}close(G){this.finalized||(this.finalized=!0,void 0!==G&&(this.finalError=G),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Dn(){}const Kn=function(K,G,Q,ve){let z;if(ve<G?z="at least "+G:ve>Q&&(z=0===Q?"none":"no more than "+Q),z)throw new Error(K+" failed: Was called with "+ve+(1===ve?" argument.":" arguments.")+" Expects "+z+".")};function Zn(K,G){return`${K} failed: ${G} argument `}function kn(K,G,Q,ve){if((!ve||Q)&&"function"!=typeof Q)throw new Error(Zn(K,G)+"must be a valid function.")}function mn(K,G,Q,ve){if((!ve||Q)&&("object"!=typeof Q||null===Q))throw new Error(Zn(K,G)+"must be a valid context object.")}const Ro=function(K){const G=[];let Q=0;for(let ve=0;ve<K.length;ve++){let z=K.charCodeAt(ve);if(z>=55296&&z<=56319){const ie=z-55296;ve++,$(ve<K.length,"Surrogate pair missing trail surrogate."),z=65536+(ie<<10)+(K.charCodeAt(ve)-56320)}z<128?G[Q++]=z:z<2048?(G[Q++]=z>>6|192,G[Q++]=63&z|128):z<65536?(G[Q++]=z>>12|224,G[Q++]=z>>6&63|128,G[Q++]=63&z|128):(G[Q++]=z>>18|240,G[Q++]=z>>12&63|128,G[Q++]=z>>6&63|128,G[Q++]=63&z|128)}return G},ln=function(K){let G=0;for(let Q=0;Q<K.length;Q++){const ve=K.charCodeAt(Q);ve<128?G++:ve<2048?G+=2:ve>=55296&&ve<=56319?(G+=4,Q++):G+=3}return G};function Jt(K,G=1e3,Q=2){const ve=G*Math.pow(Q,K),z=Math.round(.5*ve*(Math.random()-.5)*2);return Math.min(144e5,ve+z)}function jn(K){return K&&K._delegate?K._delegate:K}},2329:(Qe,Ee,U)=>{"use strict";U.d(Ee,{Mq:()=>m.getApp,C6:()=>m.getApps});var m=U(8026);(0,m.registerVersion)("firebase","9.8.2","app")},7841:(Qe,Ee,U)=>{"use strict";U.d(Ee,{Z:()=>m.Z});var m=U(3394);m.Z.registerVersion("firebase","9.8.2","app-compat")},4828:(Qe,Ee,U)=>{"use strict";U.r(Ee);var m=U(8239),$=U(3394),O=U(7014),ae=U(3854),be=(U(8026),U(5422),U(3910));function te(){return window}function H(){return(H=(0,m.Z)(function*(de,ee,Z){var Se;const{BuildInfo:He}=te();(0,O.aq)(ee.sessionId,"AuthEvent did not contain a session ID");const Nt=yield fe(ee.sessionId),Pt={};return(0,O.ar)()?Pt.ibi=He.packageName:(0,O.as)()?Pt.apn=He.packageName:(0,O.at)(de,"operation-not-supported-in-this-environment"),He.displayName&&(Pt.appDisplayName=He.displayName),Pt.sessionId=Nt,(0,O.au)(de,Z,ee.type,void 0,null!==(Se=ee.eventId)&&void 0!==Se?Se:void 0,Pt)})).apply(this,arguments)}function ce(){return(ce=(0,m.Z)(function*(de){const{BuildInfo:ee}=te(),Z={};(0,O.ar)()?Z.iosBundleId=ee.packageName:(0,O.as)()?Z.androidPackageName=ee.packageName:(0,O.at)(de,"operation-not-supported-in-this-environment"),yield(0,O.av)(de,Z)})).apply(this,arguments)}function we(){return(we=(0,m.Z)(function*(de,ee,Z){const{cordova:Se}=te();let He=()=>{};try{yield new Promise((Nt,Pt)=>{let Tt=null;function un(){var Bt;Nt();const An=null===(Bt=Se.plugins.browsertab)||void 0===Bt?void 0:Bt.close;"function"==typeof An&&An(),"function"==typeof(null==Z?void 0:Z.close)&&Z.close()}function Mn(){Tt||(Tt=window.setTimeout(()=>{Pt((0,O.aw)(de,"redirect-cancelled-by-user"))},2e3))}function On(){"visible"===(null==document?void 0:document.visibilityState)&&Mn()}ee.addPassiveListener(un),document.addEventListener("resume",Mn,!1),(0,O.as)()&&document.addEventListener("visibilitychange",On,!1),He=()=>{ee.removePassiveListener(un),document.removeEventListener("resume",Mn,!1),document.removeEventListener("visibilitychange",On,!1),Tt&&window.clearTimeout(Tt)}})}finally{He()}})).apply(this,arguments)}function fe(de){return De.apply(this,arguments)}function De(){return(De=(0,m.Z)(function*(de){const ee=xe(de),Z=yield crypto.subtle.digest("SHA-256",ee);return Array.from(new Uint8Array(Z)).map(He=>He.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function xe(de){if((0,O.aq)(/[0-9a-zA-Z]+/.test(de),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(de);const ee=new ArrayBuffer(de.length),Z=new Uint8Array(ee);for(let Se=0;Se<de.length;Se++)Z[Se]=de.charCodeAt(Se);return Z}class dt extends O.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(ee=>{this.resolveInialized=ee})}addPassiveListener(ee){this.passiveListeners.add(ee)}removePassiveListener(ee){this.passiveListeners.delete(ee)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(ee){return this.resolveInialized(),this.passiveListeners.forEach(Z=>Z(ee)),super.onEvent(ee)}initialized(){var ee=this;return(0,m.Z)(function*(){yield ee.initPromise})()}}function vt(de){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,m.Z)(function*(de){const ee=yield mt()._get(it(de));return ee&&(yield mt()._remove(it(de))),ee})).apply(this,arguments)}function $e(){const de=[],ee="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let Z=0;Z<20;Z++){const Se=Math.floor(Math.random()*ee.length);de.push(ee.charAt(Se))}return de.join("")}function mt(){return(0,O.ay)(O.b)}function it(de){return(0,O.az)("authEvent",de.config.apiKey,de.name)}function Br(de){if(!(null==de?void 0:de.includes("?")))return{};const[ee,...Z]=de.split("?");return(0,ae.zd)(Z.join("?"))}function Pn(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,O.aw)("no-auth-event")}}function Kt(){var de;return(null===(de=null==self?void 0:self.location)||void 0===de?void 0:de.protocol)||null}function Tn(de=(0,ae.z$)()){return!("file:"!==Kt()&&"ionic:"!==Kt()&&"capacitor:"!==Kt()||!de.toLowerCase().match(/iphone|ipad|ipod|android/))}function ei(){try{const de=self.localStorage,ee=O.aI();if(de)return de.setItem(ee,"1"),de.removeItem(ee),!function(de=(0,ae.z$)()){return(0,ae.w1)()&&11===(null==document?void 0:document.documentMode)||function(de=(0,ae.z$)()){return/Edge\/\d+/.test(de)}(de)}()||(0,ae.hl)()}catch(de){return ti()&&(0,ae.hl)()}return!1}function ti(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ne(){return("http:"===Kt()||"https:"===Kt()||(0,ae.ru)()||Tn())&&!((0,ae.b$)()||(0,ae.UG)())&&ei()&&!ti()}function zn(){return Tn()&&"undefined"!=typeof document}function tt(){return(tt=(0,m.Z)(function*(){return!!zn()&&new Promise(de=>{const ee=setTimeout(()=>{de(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(ee),de(!0)})})})).apply(this,arguments)}const Dn={LOCAL:"local",NONE:"none",SESSION:"session"},Kn=O.ax,Zn="persistence";function kn(de){return mn.apply(this,arguments)}function mn(){return(mn=(0,m.Z)(function*(de){yield de._initializationPromise;const ee=ln(),Z=O.az(Zn,de.config.apiKey,de.name);ee&&ee.setItem(Z,de._getPersistence())})).apply(this,arguments)}function ln(){var de;try{return(null===(de="undefined"!=typeof window?window:null)||void 0===de?void 0:de.sessionStorage)||null}catch(ee){return null}}const qe=O.ax;class ot{constructor(){this.browserResolver=O.ay(O.k),this.cordovaResolver=O.ay(class{constructor(){this._redirectPersistence=O.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=O.aB,this._overrideRedirectResult=O.aC}_initialize(ee){var Z=this;return(0,m.Z)(function*(){const Se=ee._key();let He=Z.eventManagers.get(Se);return He||(He=new dt(ee),Z.eventManagers.set(Se,He),Z.attachCallbackListeners(ee,He)),He})()}_openPopup(ee){(0,O.at)(ee,"operation-not-supported-in-this-environment")}_openRedirect(ee,Z,Se,He){var Nt=this;return(0,m.Z)(function*(){!function(de){var ee,Z,Se,He,Nt,Pt,Tt,un,Mn,On;const Bt=te();(0,O.ax)("function"==typeof(null===(ee=null==Bt?void 0:Bt.universalLinks)||void 0===ee?void 0:ee.subscribe),de,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,O.ax)(void 0!==(null===(Z=null==Bt?void 0:Bt.BuildInfo)||void 0===Z?void 0:Z.packageName),de,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,O.ax)("function"==typeof(null===(Nt=null===(He=null===(Se=null==Bt?void 0:Bt.cordova)||void 0===Se?void 0:Se.plugins)||void 0===He?void 0:He.browsertab)||void 0===Nt?void 0:Nt.openUrl),de,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.ax)("function"==typeof(null===(un=null===(Tt=null===(Pt=null==Bt?void 0:Bt.cordova)||void 0===Pt?void 0:Pt.plugins)||void 0===Tt?void 0:Tt.browsertab)||void 0===un?void 0:un.isAvailable),de,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.ax)("function"==typeof(null===(On=null===(Mn=null==Bt?void 0:Bt.cordova)||void 0===Mn?void 0:Mn.InAppBrowser)||void 0===On?void 0:On.open),de,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(ee);const Pt=yield Nt._initialize(ee);yield Pt.initialized(),Pt.resetRedirect(),(0,O.aD)(),yield Nt._originValidation(ee);const Tt=function(de,ee,Z=null){return{type:ee,eventId:Z,urlResponse:null,sessionId:$e(),postBody:null,tenantId:de.tenantId,error:(0,O.aw)(de,"no-auth-event")}}(ee,Se,He);yield function(de,ee){return mt()._set(it(de),ee)}(ee,Tt);const un=yield function(de,ee,Z){return H.apply(this,arguments)}(ee,Tt,Z),Mn=yield function(de){const{cordova:ee}=te();return new Promise(Z=>{ee.plugins.browsertab.isAvailable(Se=>{let He=null;Se?ee.plugins.browsertab.openUrl(de):He=ee.InAppBrowser.open(de,(0,O.ap)()?"_blank":"_system","location=yes"),Z(He)})})}(un);return function(de,ee,Z){return we.apply(this,arguments)}(ee,Pt,Mn)})()}_isIframeWebStorageSupported(ee,Z){throw new Error("Method not implemented.")}_originValidation(ee){const Z=ee._key();return this.originValidationPromises[Z]||(this.originValidationPromises[Z]=function(de){return ce.apply(this,arguments)}(ee)),this.originValidationPromises[Z]}attachCallbackListeners(ee,Z){const{universalLinks:Se,handleOpenURL:He,BuildInfo:Nt}=te(),Pt=setTimeout((0,m.Z)(function*(){yield vt(ee),Z.onEvent(Pn())}),500),Tt=function(){var On=(0,m.Z)(function*(Bt){clearTimeout(Pt);const An=yield vt(ee);let ze=null;An&&(null==Bt?void 0:Bt.url)&&(ze=function(de,ee){var Z,Se;const He=function(de){const ee=Br(de),Z=ee.link?decodeURIComponent(ee.link):void 0,Se=Br(Z).link,He=ee.deep_link_id?decodeURIComponent(ee.deep_link_id):void 0;return Br(He).link||He||Se||Z||de}(ee);if(He.includes("/__/auth/callback")){const Nt=Br(He),Pt=Nt.firebaseError?function(de){try{return JSON.parse(de)}catch(ee){return null}}(decodeURIComponent(Nt.firebaseError)):null,Tt=null===(Se=null===(Z=null==Pt?void 0:Pt.code)||void 0===Z?void 0:Z.split("auth/"))||void 0===Se?void 0:Se[1],un=Tt?(0,O.aw)(Tt):null;return un?{type:de.type,eventId:de.eventId,tenantId:de.tenantId,error:un,urlResponse:null,sessionId:null,postBody:null}:{type:de.type,eventId:de.eventId,tenantId:de.tenantId,sessionId:de.sessionId,urlResponse:He,postBody:null}}return null}(An,Bt.url)),Z.onEvent(ze||Pn())});return function(An){return On.apply(this,arguments)}}();void 0!==Se&&"function"==typeof Se.subscribe&&Se.subscribe(null,Tt);const un=He,Mn=`${Nt.packageName.toLowerCase()}://`;te().handleOpenURL=function(){var On=(0,m.Z)(function*(Bt){if(Bt.toLowerCase().startsWith(Mn)&&Tt({url:Bt}),"function"==typeof un)try{un(Bt)}catch(An){console.error(An)}});return function(Bt){return On.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=O.a,this._completeRedirectFn=O.aB,this._overrideRedirectResult=O.aC}_initialize(ee){var Z=this;return(0,m.Z)(function*(){return yield Z.selectUnderlyingResolver(),Z.assertedUnderlyingResolver._initialize(ee)})()}_openPopup(ee,Z,Se,He){var Nt=this;return(0,m.Z)(function*(){return yield Nt.selectUnderlyingResolver(),Nt.assertedUnderlyingResolver._openPopup(ee,Z,Se,He)})()}_openRedirect(ee,Z,Se,He){var Nt=this;return(0,m.Z)(function*(){return yield Nt.selectUnderlyingResolver(),Nt.assertedUnderlyingResolver._openRedirect(ee,Z,Se,He)})()}_isIframeWebStorageSupported(ee,Z){this.assertedUnderlyingResolver._isIframeWebStorageSupported(ee,Z)}_originValidation(ee){return this.assertedUnderlyingResolver._originValidation(ee)}get _shouldInitProactively(){return zn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return qe(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var ee=this;return(0,m.Z)(function*(){if(ee.underlyingResolver)return;const Z=yield function(){return tt.apply(this,arguments)}();ee.underlyingResolver=Z?ee.cordovaResolver:ee.browserResolver})()}}function fs(de){return de.unwrap()}function Jt(de){return ir(de)}function ir(de){const{_tokenResponse:ee}=de instanceof ae.ZR?de.customData:de;if(!ee)return null;if(!(de instanceof ae.ZR)&&"temporaryProof"in ee&&"phoneNumber"in ee)return O.P.credentialFromResult(de);const Z=ee.providerId;if(!Z||Z===O.o.PASSWORD)return null;let Se;switch(Z){case O.o.GOOGLE:Se=O.Q;break;case O.o.FACEBOOK:Se=O.N;break;case O.o.GITHUB:Se=O.T;break;case O.o.TWITTER:Se=O.W;break;default:const{oauthIdToken:He,oauthAccessToken:Nt,oauthTokenSecret:Pt,pendingToken:Tt,nonce:un}=ee;return Nt||Pt||He||Tt?Tt?Z.startsWith("saml.")?O.aL._create(Z,Tt):O.J._fromParams({providerId:Z,signInMethod:Z,pendingToken:Tt,idToken:He,accessToken:Nt}):new O.U(Z).credential({idToken:He,accessToken:Nt,rawNonce:un}):null}return de instanceof ae.ZR?Se.credentialFromError(de):Se.credentialFromResult(de)}function jn(de,ee){return ee.catch(Z=>{throw Z instanceof ae.ZR&&function(de,ee){var Z;const Se=null===(Z=ee.customData)||void 0===Z?void 0:Z._tokenResponse;if("auth/multi-factor-auth-required"===ee.code)ee.resolver=new Q(de,O.an(de,ee));else if(Se){const He=ir(ee),Nt=ee;He&&(Nt.credential=He,Nt.tenantId=Se.tenantId||void 0,Nt.email=Se.email||void 0,Nt.phoneNumber=Se.phoneNumber||void 0)}}(de,Z),Z}).then(Z=>{const He=Z.user;return{operationType:Z.operationType,credential:Jt(Z),additionalUserInfo:O.al(Z),user:ve.getOrCreate(He)}})}function K(de,ee){return G.apply(this,arguments)}function G(){return(G=(0,m.Z)(function*(de,ee){const Z=yield ee;return{verificationId:Z.verificationId,confirm:Se=>jn(de,Z.confirm(Se))}})).apply(this,arguments)}class Q{constructor(ee,Z){this.resolver=Z,this.auth=ee.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(ee){return jn(fs(this.auth),this.resolver.resolveSignIn(ee))}}class ve{constructor(ee){this._delegate=ee,this.multiFactor=O.ao(ee)}static getOrCreate(ee){return ve.USER_MAP.has(ee)||ve.USER_MAP.set(ee,new ve(ee)),ve.USER_MAP.get(ee)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(ee){return this._delegate.getIdTokenResult(ee)}getIdToken(ee){return this._delegate.getIdToken(ee)}linkAndRetrieveDataWithCredential(ee){return this.linkWithCredential(ee)}linkWithCredential(ee){var Z=this;return(0,m.Z)(function*(){return jn(Z.auth,O.Z(Z._delegate,ee))})()}linkWithPhoneNumber(ee,Z){var Se=this;return(0,m.Z)(function*(){return K(Se.auth,O.l(Se._delegate,ee,Z))})()}linkWithPopup(ee){var Z=this;return(0,m.Z)(function*(){return jn(Z.auth,O.d(Z._delegate,ee,ot))})()}linkWithRedirect(ee){var Z=this;return(0,m.Z)(function*(){return yield kn(O.aE(Z.auth)),O.g(Z._delegate,ee,ot)})()}reauthenticateAndRetrieveDataWithCredential(ee){return this.reauthenticateWithCredential(ee)}reauthenticateWithCredential(ee){var Z=this;return(0,m.Z)(function*(){return jn(Z.auth,O._(Z._delegate,ee))})()}reauthenticateWithPhoneNumber(ee,Z){return K(this.auth,O.r(this._delegate,ee,Z))}reauthenticateWithPopup(ee){return jn(this.auth,O.e(this._delegate,ee,ot))}reauthenticateWithRedirect(ee){var Z=this;return(0,m.Z)(function*(){return yield kn(O.aE(Z.auth)),O.h(Z._delegate,ee,ot)})()}sendEmailVerification(ee){return O.ab(this._delegate,ee)}unlink(ee){var Z=this;return(0,m.Z)(function*(){return yield O.ak(Z._delegate,ee),Z})()}updateEmail(ee){return O.ag(this._delegate,ee)}updatePassword(ee){return O.ah(this._delegate,ee)}updatePhoneNumber(ee){return O.u(this._delegate,ee)}updateProfile(ee){return O.af(this._delegate,ee)}verifyBeforeUpdateEmail(ee,Z){return O.ac(this._delegate,ee,Z)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ve.USER_MAP=new WeakMap;const z=O.ax;let ie=(()=>{class de{constructor(Z,Se){if(this.app=Z,Se.isInitialized())return this._delegate=Se.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:He}=Z.options;z(He,"invalid-api-key",{appName:Z.name}),z(He,"invalid-api-key",{appName:Z.name});const Nt="undefined"!=typeof window?ot:void 0;this._delegate=Se.initialize({options:{persistence:Ke(He,Z.name),popupRedirectResolver:Nt}}),this._delegate._updateErrorMap(O.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ve.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(Z){this._delegate.languageCode=Z}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(Z){this._delegate.tenantId=Z}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(Z,Se){O.G(this._delegate,Z,Se)}applyActionCode(Z){return O.a2(this._delegate,Z)}checkActionCode(Z){return O.a3(this._delegate,Z)}confirmPasswordReset(Z,Se){return O.a1(this._delegate,Z,Se)}createUserWithEmailAndPassword(Z,Se){var He=this;return(0,m.Z)(function*(){return jn(He._delegate,O.a5(He._delegate,Z,Se))})()}fetchProvidersForEmail(Z){return this.fetchSignInMethodsForEmail(Z)}fetchSignInMethodsForEmail(Z){return O.aa(this._delegate,Z)}isSignInWithEmailLink(Z){return O.a8(this._delegate,Z)}getRedirectResult(){var Z=this;return(0,m.Z)(function*(){z(Ne(),Z._delegate,"operation-not-supported-in-this-environment");const Se=yield O.j(Z._delegate,ot);return Se?jn(Z._delegate,Promise.resolve(Se)):{credential:null,user:null}})()}addFrameworkForLogging(Z){!function(de,ee){(0,O.aE)(de)._logFramework(ee)}(this._delegate,Z)}onAuthStateChanged(Z,Se,He){const{next:Nt,error:Pt,complete:Tt}=Me(Z,Se,He);return this._delegate.onAuthStateChanged(Nt,Pt,Tt)}onIdTokenChanged(Z,Se,He){const{next:Nt,error:Pt,complete:Tt}=Me(Z,Se,He);return this._delegate.onIdTokenChanged(Nt,Pt,Tt)}sendSignInLinkToEmail(Z,Se){return O.a7(this._delegate,Z,Se)}sendPasswordResetEmail(Z,Se){return O.a0(this._delegate,Z,Se||void 0)}setPersistence(Z){var Se=this;return(0,m.Z)(function*(){let He;switch(function(de,ee){Kn(Object.values(Dn).includes(ee),de,"invalid-persistence-type"),(0,ae.b$)()?Kn(ee!==Dn.SESSION,de,"unsupported-persistence-type"):(0,ae.UG)()?Kn(ee===Dn.NONE,de,"unsupported-persistence-type"):ti()?Kn(ee===Dn.NONE||ee===Dn.LOCAL&&(0,ae.hl)(),de,"unsupported-persistence-type"):Kn(ee===Dn.NONE||ei(),de,"unsupported-persistence-type")}(Se._delegate,Z),Z){case Dn.SESSION:He=O.a;break;case Dn.LOCAL:He=(yield O.ay(O.i)._isAvailable())?O.i:O.b;break;case Dn.NONE:He=O.L;break;default:return O.at("argument-error",{appName:Se._delegate.name})}return Se._delegate.setPersistence(He)})()}signInAndRetrieveDataWithCredential(Z){return this.signInWithCredential(Z)}signInAnonymously(){return jn(this._delegate,O.X(this._delegate))}signInWithCredential(Z){return jn(this._delegate,O.Y(this._delegate,Z))}signInWithCustomToken(Z){return jn(this._delegate,O.$(this._delegate,Z))}signInWithEmailAndPassword(Z,Se){return jn(this._delegate,O.a6(this._delegate,Z,Se))}signInWithEmailLink(Z,Se){return jn(this._delegate,O.a9(this._delegate,Z,Se))}signInWithPhoneNumber(Z,Se){return K(this._delegate,O.s(this._delegate,Z,Se))}signInWithPopup(Z){var Se=this;return(0,m.Z)(function*(){return z(Ne(),Se._delegate,"operation-not-supported-in-this-environment"),jn(Se._delegate,O.c(Se._delegate,Z,ot))})()}signInWithRedirect(Z){var Se=this;return(0,m.Z)(function*(){return z(Ne(),Se._delegate,"operation-not-supported-in-this-environment"),yield kn(Se._delegate),O.f(Se._delegate,Z,ot)})()}updateCurrentUser(Z){return this._delegate.updateCurrentUser(Z)}verifyPasswordResetCode(Z){return O.a4(this._delegate,Z)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return de.Persistence=Dn,de})();function Me(de,ee,Z){let Se=de;"function"!=typeof de&&({next:Se,error:ee,complete:Z}=de);const He=Se;return{next:Pt=>He(Pt&&ve.getOrCreate(Pt)),error:ee,complete:Z}}function Ke(de,ee){const Z=function(de,ee){const Z=ln();if(!Z)return[];const Se=O.az(Zn,de,ee);switch(Z.getItem(Se)){case Dn.NONE:return[O.L];case Dn.LOCAL:return[O.i,O.a];case Dn.SESSION:return[O.a];default:return[]}}(de,ee);if("undefined"!=typeof self&&!Z.includes(O.i)&&Z.push(O.i),"undefined"!=typeof window)for(const Se of[O.b,O.a])Z.includes(Se)||Z.push(Se);return Z.includes(O.L)||Z.push(O.L),Z}class ht{constructor(){this.providerId="phone",this._delegate=new O.P(fs($.Z.auth()))}static credential(ee,Z){return O.P.credential(ee,Z)}verifyPhoneNumber(ee,Z){return this._delegate.verifyPhoneNumber(ee,Z)}unwrap(){return this._delegate}}ht.PHONE_SIGN_IN_METHOD=O.P.PHONE_SIGN_IN_METHOD,ht.PROVIDER_ID=O.P.PROVIDER_ID;const Rt=O.ax;var de;(de=$.Z).INTERNAL.registerComponent(new be.wA("auth-compat",ee=>{const Z=ee.getProvider("app-compat").getImmediate(),Se=ee.getProvider("auth");return new ie(Z,Se)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:O.A.EMAIL_SIGNIN,PASSWORD_RESET:O.A.PASSWORD_RESET,RECOVER_EMAIL:O.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:O.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:O.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:O.A.VERIFY_EMAIL}},EmailAuthProvider:O.M,FacebookAuthProvider:O.N,GithubAuthProvider:O.T,GoogleAuthProvider:O.Q,OAuthProvider:O.U,SAMLAuthProvider:O.V,PhoneAuthProvider:ht,PhoneMultiFactorGenerator:O.m,RecaptchaVerifier:class{constructor(ee,Z,Se=$.Z.app()){var He;Rt(null===(He=Se.options)||void 0===He?void 0:He.apiKey,"invalid-api-key",{appName:Se.name}),this._delegate=new O.R(ee,Z,Se.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:O.W,Auth:ie,AuthCredential:O.H,Error:ae.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),de.registerVersion("@firebase/auth-compat","0.2.15")},7574:(Qe,Ee,U)=>{"use strict";U.d(Ee,{y:()=>H});var m=U(7393),O=U(9181),ae=U(6490),ne=U(6554),be=U(4487);var V=U(2494);let H=(()=>{class ce{constructor(Te){this._isScalar=!1,Te&&(this._subscribe=Te)}lift(Te){const we=new ce;return we.source=this,we.operator=Te,we}subscribe(Te,we,Be){const{operator:fe}=this,De=function(ce,pe,Te){if(ce){if(ce instanceof m.L)return ce;if(ce[O.b])return ce[O.b]()}return ce||pe||Te?new m.L(ce,pe,Te):new m.L(ae.c)}(Te,we,Be);if(De.add(fe?fe.call(De,this.source):this.source||V.v.useDeprecatedSynchronousErrorHandling&&!De.syncErrorThrowable?this._subscribe(De):this._trySubscribe(De)),V.v.useDeprecatedSynchronousErrorHandling&&De.syncErrorThrowable&&(De.syncErrorThrowable=!1,De.syncErrorThrown))throw De.syncErrorValue;return De}_trySubscribe(Te){try{return this._subscribe(Te)}catch(we){V.v.useDeprecatedSynchronousErrorHandling&&(Te.syncErrorThrown=!0,Te.syncErrorValue=we),function(ce){for(;ce;){const{closed:pe,destination:Te,isStopped:we}=ce;if(pe||we)return!1;ce=Te&&Te instanceof m.L?Te:null}return!0}(Te)?Te.error(we):console.warn(we)}}forEach(Te,we){return new(we=q(we))((Be,fe)=>{let De;De=this.subscribe(xe=>{try{Te(xe)}catch(Xe){fe(Xe),De&&De.unsubscribe()}},fe,Be)})}_subscribe(Te){const{source:we}=this;return we&&we.subscribe(Te)}[ne.L](){return this}pipe(...Te){return 0===Te.length?this:function(ce){return 0===ce.length?be.y:1===ce.length?ce[0]:function(Te){return ce.reduce((we,Be)=>Be(we),Te)}}(Te)(this)}toPromise(Te){return new(Te=q(Te))((we,Be)=>{let fe;this.subscribe(De=>fe=De,De=>Be(De),()=>we(fe))})}}return ce.create=pe=>new ce(pe),ce})();function q(ce){if(ce||(ce=V.v.Promise||Promise),!ce)throw new Error("no Promise impl found");return ce}},6490:(Qe,Ee,U)=>{"use strict";U.d(Ee,{c:()=>O});var m=U(2494),$=U(4449);const O={closed:!0,next(ae){},error(ae){if(m.v.useDeprecatedSynchronousErrorHandling)throw ae;(0,$.z)(ae)},complete(){}}},9765:(Qe,Ee,U)=>{"use strict";U.d(Ee,{Yc:()=>be,xQ:()=>te});var m=U(7574),$=U(7393),O=U(5319),ae=U(7971),le=U(8858),ne=U(9181);class be extends $.L{constructor(H){super(H),this.destination=H}}let te=(()=>{class V extends m.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[ne.b](){return new be(this)}lift(q){const ce=new oe(this,this);return ce.operator=q,ce}next(q){if(this.closed)throw new ae.N;if(!this.isStopped){const{observers:ce}=this,pe=ce.length,Te=ce.slice();for(let we=0;we<pe;we++)Te[we].next(q)}}error(q){if(this.closed)throw new ae.N;this.hasError=!0,this.thrownError=q,this.isStopped=!0;const{observers:ce}=this,pe=ce.length,Te=ce.slice();for(let we=0;we<pe;we++)Te[we].error(q);this.observers.length=0}complete(){if(this.closed)throw new ae.N;this.isStopped=!0;const{observers:q}=this,ce=q.length,pe=q.slice();for(let Te=0;Te<ce;Te++)pe[Te].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(q){if(this.closed)throw new ae.N;return super._trySubscribe(q)}_subscribe(q){if(this.closed)throw new ae.N;return this.hasError?(q.error(this.thrownError),O.w.EMPTY):this.isStopped?(q.complete(),O.w.EMPTY):(this.observers.push(q),new le.W(this,q))}asObservable(){const q=new m.y;return q.source=this,q}}return V.create=(H,q)=>new oe(H,q),V})();class oe extends te{constructor(H,q){super(),this.destination=H,this.source=q}next(H){const{destination:q}=this;q&&q.next&&q.next(H)}error(H){const{destination:q}=this;q&&q.error&&this.destination.error(H)}complete(){const{destination:H}=this;H&&H.complete&&this.destination.complete()}_subscribe(H){const{source:q}=this;return q?this.source.subscribe(H):O.w.EMPTY}}},8858:(Qe,Ee,U)=>{"use strict";U.d(Ee,{W:()=>$});var m=U(5319);class $ extends m.w{constructor(ae,le){super(),this.subject=ae,this.subscriber=le,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const ae=this.subject,le=ae.observers;if(this.subject=null,!le||0===le.length||ae.isStopped||ae.closed)return;const ne=le.indexOf(this.subscriber);-1!==ne&&le.splice(ne,1)}}},7393:(Qe,Ee,U)=>{"use strict";U.d(Ee,{L:()=>be});var m=U(9105),$=U(6490),O=U(5319),ae=U(9181),le=U(2494),ne=U(4449);class be extends O.w{constructor(V,H,q){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=$.c;break;case 1:if(!V){this.destination=$.c;break}if("object"==typeof V){V instanceof be?(this.syncErrorThrowable=V.syncErrorThrowable,this.destination=V,V.add(this)):(this.syncErrorThrowable=!0,this.destination=new te(this,V));break}default:this.syncErrorThrowable=!0,this.destination=new te(this,V,H,q)}}[ae.b](){return this}static create(V,H,q){const ce=new be(V,H,q);return ce.syncErrorThrowable=!1,ce}next(V){this.isStopped||this._next(V)}error(V){this.isStopped||(this.isStopped=!0,this._error(V))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(V){this.destination.next(V)}_error(V){this.destination.error(V),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:V}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=V,this}}class te extends be{constructor(V,H,q,ce){super(),this._parentSubscriber=V;let pe,Te=this;(0,m.m)(H)?pe=H:H&&(pe=H.next,q=H.error,ce=H.complete,H!==$.c&&(Te=Object.create(H),(0,m.m)(Te.unsubscribe)&&this.add(Te.unsubscribe.bind(Te)),Te.unsubscribe=this.unsubscribe.bind(this))),this._context=Te,this._next=pe,this._error=q,this._complete=ce}next(V){if(!this.isStopped&&this._next){const{_parentSubscriber:H}=this;le.v.useDeprecatedSynchronousErrorHandling&&H.syncErrorThrowable?this.__tryOrSetError(H,this._next,V)&&this.unsubscribe():this.__tryOrUnsub(this._next,V)}}error(V){if(!this.isStopped){const{_parentSubscriber:H}=this,{useDeprecatedSynchronousErrorHandling:q}=le.v;if(this._error)q&&H.syncErrorThrowable?(this.__tryOrSetError(H,this._error,V),this.unsubscribe()):(this.__tryOrUnsub(this._error,V),this.unsubscribe());else if(H.syncErrorThrowable)q?(H.syncErrorValue=V,H.syncErrorThrown=!0):(0,ne.z)(V),this.unsubscribe();else{if(this.unsubscribe(),q)throw V;(0,ne.z)(V)}}}complete(){if(!this.isStopped){const{_parentSubscriber:V}=this;if(this._complete){const H=()=>this._complete.call(this._context);le.v.useDeprecatedSynchronousErrorHandling&&V.syncErrorThrowable?(this.__tryOrSetError(V,H),this.unsubscribe()):(this.__tryOrUnsub(H),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(V,H){try{V.call(this._context,H)}catch(q){if(this.unsubscribe(),le.v.useDeprecatedSynchronousErrorHandling)throw q;(0,ne.z)(q)}}__tryOrSetError(V,H,q){if(!le.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{H.call(this._context,q)}catch(ce){return le.v.useDeprecatedSynchronousErrorHandling?(V.syncErrorValue=ce,V.syncErrorThrown=!0,!0):((0,ne.z)(ce),!0)}return!1}_unsubscribe(){const{_parentSubscriber:V}=this;this._context=null,this._parentSubscriber=null,V.unsubscribe()}}},5319:(Qe,Ee,U)=>{"use strict";U.d(Ee,{w:()=>ne});var m=U(9796),$=U(1555),O=U(9105);const le=(()=>{function te(oe){return Error.call(this),this.message=oe?`${oe.length} errors occurred during unsubscription:\n${oe.map((V,H)=>`${H+1}) ${V.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=oe,this}return te.prototype=Object.create(Error.prototype),te})();class ne{constructor(oe){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,oe&&(this._ctorUnsubscribe=!0,this._unsubscribe=oe)}unsubscribe(){let oe;if(this.closed)return;let{_parentOrParents:V,_ctorUnsubscribe:H,_unsubscribe:q,_subscriptions:ce}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,V instanceof ne)V.remove(this);else if(null!==V)for(let pe=0;pe<V.length;++pe)V[pe].remove(this);if((0,O.m)(q)){H&&(this._unsubscribe=void 0);try{q.call(this)}catch(pe){oe=pe instanceof le?be(pe.errors):[pe]}}if((0,m.k)(ce)){let pe=-1,Te=ce.length;for(;++pe<Te;){const we=ce[pe];if((0,$.K)(we))try{we.unsubscribe()}catch(Be){oe=oe||[],Be instanceof le?oe=oe.concat(be(Be.errors)):oe.push(Be)}}}if(oe)throw new le(oe)}add(oe){let V=oe;if(!oe)return ne.EMPTY;switch(typeof oe){case"function":V=new ne(oe);case"object":if(V===this||V.closed||"function"!=typeof V.unsubscribe)return V;if(this.closed)return V.unsubscribe(),V;if(!(V instanceof ne)){const ce=V;V=new ne,V._subscriptions=[ce]}break;default:throw new Error("unrecognized teardown "+oe+" added to Subscription.")}let{_parentOrParents:H}=V;if(null===H)V._parentOrParents=this;else if(H instanceof ne){if(H===this)return V;V._parentOrParents=[H,this]}else{if(-1!==H.indexOf(this))return V;H.push(this)}const q=this._subscriptions;return null===q?this._subscriptions=[V]:q.push(V),V}remove(oe){const V=this._subscriptions;if(V){const H=V.indexOf(oe);-1!==H&&V.splice(H,1)}}}var te;function be(te){return te.reduce((oe,V)=>oe.concat(V instanceof le?V.errors:V),[])}ne.EMPTY=((te=new ne).closed=!0,te)},2494:(Qe,Ee,U)=>{"use strict";U.d(Ee,{v:()=>$});let m=!1;const $={Promise:void 0,set useDeprecatedSynchronousErrorHandling(O){if(O){const ae=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+ae.stack)}else m&&console.log("RxJS: Back to a better error behavior. Thank you. <3");m=O},get useDeprecatedSynchronousErrorHandling(){return m}}},5345:(Qe,Ee,U)=>{"use strict";U.d(Ee,{IY:()=>ae,Ds:()=>ne,ft:()=>te});var m=U(7393),$=U(7574),O=U(7444);class ae extends m.L{constructor(V){super(),this.parent=V}_next(V){this.parent.notifyNext(V)}_error(V){this.parent.notifyError(V),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class ne extends m.L{notifyNext(V){this.destination.next(V)}notifyError(V){this.destination.error(V)}notifyComplete(){this.destination.complete()}}function te(oe,V){if(V.closed)return;if(oe instanceof $.y)return oe.subscribe(V);let H;try{H=(0,O.s)(oe)(V)}catch(q){V.error(q)}return H}},2441:(Qe,Ee,U)=>{"use strict";U.d(Ee,{c:()=>le,N:()=>ne});var m=U(9765),$=U(7574),O=U(5319),ae=U(1307);class le extends $.y{constructor(H,q){super(),this.source=H,this.subjectFactory=q,this._refCount=0,this._isComplete=!1}_subscribe(H){return this.getSubject().subscribe(H)}getSubject(){const H=this._subject;return(!H||H.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let H=this._connection;return H||(this._isComplete=!1,H=this._connection=new O.w,H.add(this.source.subscribe(new be(this.getSubject(),this))),H.closed&&(this._connection=null,H=O.w.EMPTY)),H}refCount(){return(0,ae.x)()(this)}}const ne=(()=>{const V=le.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:V._subscribe},_isComplete:{value:V._isComplete,writable:!0},getSubject:{value:V.getSubject},connect:{value:V.connect},refCount:{value:V.refCount}}})();class be extends m.Yc{constructor(H,q){super(H),this.connectable=q}_error(H){this._unsubscribe(),super._error(H)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const H=this.connectable;if(H){this.connectable=null;const q=H._connection;H._refCount=0,H._subject=null,H._connection=null,q&&q.unsubscribe()}}}},9193:(Qe,Ee,U)=>{"use strict";U.d(Ee,{E:()=>$,c:()=>O});var m=U(7574);const $=new m.y(le=>le.complete());function O(le){return le?function(le){return new m.y(ne=>le.schedule(()=>ne.complete()))}(le):$}},4402:(Qe,Ee,U)=>{"use strict";U.d(Ee,{D:()=>Te});var m=U(7574),$=U(7444),O=U(5319),ae=U(6554),be=U(4087),te=U(377),H=U(4072),q=U(9489);function Te(we,Be){return Be?function(we,Be){if(null!=we){if(function(we){return we&&"function"==typeof we[ae.L]}(we))return function(we,Be){return new m.y(fe=>{const De=new O.w;return De.add(Be.schedule(()=>{const xe=we[ae.L]();De.add(xe.subscribe({next(Xe){De.add(Be.schedule(()=>fe.next(Xe)))},error(Xe){De.add(Be.schedule(()=>fe.error(Xe)))},complete(){De.add(Be.schedule(()=>fe.complete()))}}))})),De})}(we,Be);if((0,H.t)(we))return function(we,Be){return new m.y(fe=>{const De=new O.w;return De.add(Be.schedule(()=>we.then(xe=>{De.add(Be.schedule(()=>{fe.next(xe),De.add(Be.schedule(()=>fe.complete()))}))},xe=>{De.add(Be.schedule(()=>fe.error(xe)))}))),De})}(we,Be);if((0,q.z)(we))return(0,be.r)(we,Be);if(function(we){return we&&"function"==typeof we[te.hZ]}(we)||"string"==typeof we)return function(we,Be){if(!we)throw new Error("Iterable cannot be null");return new m.y(fe=>{const De=new O.w;let xe;return De.add(()=>{xe&&"function"==typeof xe.return&&xe.return()}),De.add(Be.schedule(()=>{xe=we[te.hZ](),De.add(Be.schedule(function(){if(fe.closed)return;let Xe,dt;try{const Wt=xe.next();Xe=Wt.value,dt=Wt.done}catch(Wt){return void fe.error(Wt)}dt?fe.complete():(fe.next(Xe),this.schedule())}))})),De})}(we,Be)}throw new TypeError((null!==we&&typeof we||we)+" is not observable")}(we,Be):we instanceof m.y?we:new m.y((0,$.s)(we))}},6693:(Qe,Ee,U)=>{"use strict";U.d(Ee,{n:()=>ae});var m=U(7574),$=U(5015),O=U(4087);function ae(le,ne){return ne?(0,O.r)(le,ne):new m.y((0,$.V)(le))}},6682:(Qe,Ee,U)=>{"use strict";U.d(Ee,{T:()=>le});var m=U(7574),$=U(4869),O=U(3282),ae=U(6693);function le(...ne){let be=Number.POSITIVE_INFINITY,te=null,oe=ne[ne.length-1];return(0,$.K)(oe)?(te=ne.pop(),ne.length>1&&"number"==typeof ne[ne.length-1]&&(be=ne.pop())):"number"==typeof oe&&(be=ne.pop()),null===te&&1===ne.length&&ne[0]instanceof m.y?ne[0]:(0,O.J)(be)((0,ae.n)(ne,te))}},5917:(Qe,Ee,U)=>{"use strict";U.d(Ee,{of:()=>ae});var m=U(4869),$=U(6693),O=U(4087);function ae(...le){let ne=le[le.length-1];return(0,m.K)(ne)?(le.pop(),(0,O.r)(le,ne)):(0,$.n)(le)}},8002:(Qe,Ee,U)=>{"use strict";U.d(Ee,{U:()=>$});var m=U(7393);function $(le,ne){return function(te){if("function"!=typeof le)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return te.lift(new O(le,ne))}}class O{constructor(ne,be){this.project=ne,this.thisArg=be}call(ne,be){return be.subscribe(new ae(ne,this.project,this.thisArg))}}class ae extends m.L{constructor(ne,be,te){super(ne),this.project=be,this.count=0,this.thisArg=te||this}_next(ne){let be;try{be=this.project.call(this.thisArg,ne,this.count++)}catch(te){return void this.destination.error(te)}this.destination.next(be)}}},3282:(Qe,Ee,U)=>{"use strict";U.d(Ee,{J:()=>O});var m=U(9773),$=U(4487);function O(ae=Number.POSITIVE_INFINITY){return(0,m.zg)($.y,ae)}},9773:(Qe,Ee,U)=>{"use strict";U.d(Ee,{zg:()=>ae});var m=U(8002),$=U(4402),O=U(5345);function ae(te,oe,V=Number.POSITIVE_INFINITY){return"function"==typeof oe?H=>H.pipe(ae((q,ce)=>(0,$.D)(te(q,ce)).pipe((0,m.U)((pe,Te)=>oe(q,pe,ce,Te))),V)):("number"==typeof oe&&(V=oe),H=>H.lift(new le(te,V)))}class le{constructor(oe,V=Number.POSITIVE_INFINITY){this.project=oe,this.concurrent=V}call(oe,V){return V.subscribe(new ne(oe,this.project,this.concurrent))}}class ne extends O.Ds{constructor(oe,V,H=Number.POSITIVE_INFINITY){super(oe),this.project=V,this.concurrent=H,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(oe){this.active<this.concurrent?this._tryNext(oe):this.buffer.push(oe)}_tryNext(oe){let V;const H=this.index++;try{V=this.project(oe,H)}catch(q){return void this.destination.error(q)}this.active++,this._innerSub(V)}_innerSub(oe){const V=new O.IY(this),H=this.destination;H.add(V);const q=(0,O.ft)(oe,V);q!==V&&H.add(q)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(oe){this.destination.next(oe)}notifyComplete(){const oe=this.buffer;this.active--,oe.length>0?this._next(oe.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(Qe,Ee,U)=>{"use strict";U.d(Ee,{ht:()=>H,QV:()=>oe});var m=U(7393),$=U(9193),O=U(5917),ae=U(7574);class te{constructor(pe,Te,we){this.kind=pe,this.value=Te,this.error=we,this.hasValue="N"===pe}observe(pe){switch(this.kind){case"N":return pe.next&&pe.next(this.value);case"E":return pe.error&&pe.error(this.error);case"C":return pe.complete&&pe.complete()}}do(pe,Te,we){switch(this.kind){case"N":return pe&&pe(this.value);case"E":return Te&&Te(this.error);case"C":return we&&we()}}accept(pe,Te,we){return pe&&"function"==typeof pe.next?this.observe(pe):this.do(pe,Te,we)}toObservable(){switch(this.kind){case"N":return(0,O.of)(this.value);case"E":return ce=this.error,new ae.y(Te=>Te.error(ce));case"C":return(0,$.c)()}var ce;throw new Error("unexpected notification kind value")}static createNext(pe){return void 0!==pe?new te("N",pe):te.undefinedValueNotification}static createError(pe){return new te("E",void 0,pe)}static createComplete(){return te.completeNotification}}function oe(ce,pe=0){return function(we){return we.lift(new V(ce,pe))}}te.completeNotification=new te("C"),te.undefinedValueNotification=new te("N",void 0);class V{constructor(pe,Te=0){this.scheduler=pe,this.delay=Te}call(pe,Te){return Te.subscribe(new H(pe,this.scheduler,this.delay))}}class H extends m.L{constructor(pe,Te,we=0){super(pe),this.scheduler=Te,this.delay=we}static dispatch(pe){const{notification:Te,destination:we}=pe;Te.observe(we),this.unsubscribe()}scheduleMessage(pe){this.destination.add(this.scheduler.schedule(H.dispatch,this.delay,new q(pe,this.destination)))}_next(pe){this.scheduleMessage(te.createNext(pe))}_error(pe){this.scheduleMessage(te.createError(pe)),this.unsubscribe()}_complete(){this.scheduleMessage(te.createComplete()),this.unsubscribe()}}class q{constructor(pe,Te){this.notification=pe,this.destination=Te}}},1307:(Qe,Ee,U)=>{"use strict";U.d(Ee,{x:()=>$});var m=U(7393);function $(){return function(ne){return ne.lift(new O(ne))}}class O{constructor(ne){this.connectable=ne}call(ne,be){const{connectable:te}=this;te._refCount++;const oe=new ae(ne,te),V=be.subscribe(oe);return oe.closed||(oe.connection=te.connect()),V}}class ae extends m.L{constructor(ne,be){super(ne),this.connectable=be}_unsubscribe(){const{connectable:ne}=this;if(!ne)return void(this.connection=null);this.connectable=null;const be=ne._refCount;if(be<=0)return void(this.connection=null);if(ne._refCount=be-1,be>1)return void(this.connection=null);const{connection:te}=this,oe=ne._connection;this.connection=null,oe&&(!te||oe===te)&&oe.unsubscribe()}}},8819:(Qe,Ee,U)=>{"use strict";U.d(Ee,{B:()=>be});var m=U(2441);var ae=U(1307),le=U(9765);function ne(){return new le.xQ}function be(){return te=>(0,ae.x)()(function(te,oe){return function(H){let q;q="function"==typeof te?te:function(){return te};const ce=Object.create(H,m.N);return ce.source=H,ce.subjectFactory=q,ce}}(ne)(te))}},3101:(Qe,Ee,U)=>{"use strict";U.d(Ee,{R:()=>Be});var m=U(7574);let $=1;const O=Promise.resolve(),ae={};function le(De){return De in ae&&(delete ae[De],!0)}const ne={setImmediate(De){const xe=$++;return ae[xe]=!0,O.then(()=>le(xe)&&De()),xe},clearImmediate(De){le(De)}};var te=U(6465),V=U(6102);const ce=new class extends V.v{flush(xe){this.active=!0,this.scheduled=void 0;const{actions:Xe}=this;let dt,Wt=-1,Lt=Xe.length;xe=xe||Xe.shift();do{if(dt=xe.execute(xe.state,xe.delay))break}while(++Wt<Lt&&(xe=Xe.shift()));if(this.active=!1,dt){for(;++Wt<Lt&&(xe=Xe.shift());)xe.unsubscribe();throw dt}}}(class extends te.o{constructor(xe,Xe){super(xe,Xe),this.scheduler=xe,this.work=Xe}requestAsyncId(xe,Xe,dt=0){return null!==dt&&dt>0?super.requestAsyncId(xe,Xe,dt):(xe.actions.push(this),xe.scheduled||(xe.scheduled=ne.setImmediate(xe.flush.bind(xe,null))))}recycleAsyncId(xe,Xe,dt=0){if(null!==dt&&dt>0||null===dt&&this.delay>0)return super.recycleAsyncId(xe,Xe,dt);0===xe.actions.length&&(ne.clearImmediate(Xe),xe.scheduled=void 0)}});var pe=U(9796);class we extends m.y{constructor(xe,Xe=0,dt=ce){var De;super(),this.source=xe,this.delayTime=Xe,this.scheduler=dt,(!(!(0,pe.k)(De=Xe)&&De-parseFloat(De)+1>=0)||Xe<0)&&(this.delayTime=0),(!dt||"function"!=typeof dt.schedule)&&(this.scheduler=ce)}static create(xe,Xe=0,dt=ce){return new we(xe,Xe,dt)}static dispatch(xe){const{source:Xe,subscriber:dt}=xe;return this.add(Xe.subscribe(dt))}_subscribe(xe){return this.scheduler.schedule(we.dispatch,this.delayTime,{source:this.source,subscriber:xe})}}function Be(De,xe=0){return function(dt){return dt.lift(new fe(De,xe))}}class fe{constructor(xe,Xe){this.scheduler=xe,this.delay=Xe}call(xe,Xe){return new we(Xe,this.delay,this.scheduler).subscribe(xe)}}},3342:(Qe,Ee,U)=>{"use strict";U.d(Ee,{b:()=>ae});var m=U(7393);function $(){}var O=U(9105);function ae(be,te,oe){return function(H){return H.lift(new le(be,te,oe))}}class le{constructor(te,oe,V){this.nextOrObserver=te,this.error=oe,this.complete=V}call(te,oe){return oe.subscribe(new ne(te,this.nextOrObserver,this.error,this.complete))}}class ne extends m.L{constructor(te,oe,V,H){super(te),this._tapNext=$,this._tapError=$,this._tapComplete=$,this._tapError=V||$,this._tapComplete=H||$,(0,O.m)(oe)?(this._context=this,this._tapNext=oe):oe&&(this._context=oe,this._tapNext=oe.next||$,this._tapError=oe.error||$,this._tapComplete=oe.complete||$)}_next(te){try{this._tapNext.call(this._context,te)}catch(oe){return void this.destination.error(oe)}this.destination.next(te)}_error(te){try{this._tapError.call(this._context,te)}catch(oe){return void this.destination.error(oe)}this.destination.error(te)}_complete(){try{this._tapComplete.call(this._context)}catch(te){return void this.destination.error(te)}return this.destination.complete()}}},4087:(Qe,Ee,U)=>{"use strict";U.d(Ee,{r:()=>O});var m=U(7574),$=U(5319);function O(ae,le){return new m.y(ne=>{const be=new $.w;let te=0;return be.add(le.schedule(function(){te!==ae.length?(ne.next(ae[te++]),ne.closed||be.add(this.schedule())):ne.complete()})),be})}},6465:(Qe,Ee,U)=>{"use strict";U.d(Ee,{o:()=>O});var m=U(5319);class $ extends m.w{constructor(le,ne){super()}schedule(le,ne=0){return this}}class O extends ${constructor(le,ne){super(le,ne),this.scheduler=le,this.work=ne,this.pending=!1}schedule(le,ne=0){if(this.closed)return this;this.state=le;const be=this.id,te=this.scheduler;return null!=be&&(this.id=this.recycleAsyncId(te,be,ne)),this.pending=!0,this.delay=ne,this.id=this.id||this.requestAsyncId(te,this.id,ne),this}requestAsyncId(le,ne,be=0){return setInterval(le.flush.bind(le,this),be)}recycleAsyncId(le,ne,be=0){if(null!==be&&this.delay===be&&!1===this.pending)return ne;clearInterval(ne)}execute(le,ne){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const be=this._execute(le,ne);if(be)return be;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(le,ne){let te,be=!1;try{this.work(le)}catch(oe){be=!0,te=!!oe&&oe||new Error(oe)}if(be)return this.unsubscribe(),te}_unsubscribe(){const le=this.id,ne=this.scheduler,be=ne.actions,te=be.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==te&&be.splice(te,1),null!=le&&(this.id=this.recycleAsyncId(ne,le,null)),this.delay=null}}},6102:(Qe,Ee,U)=>{"use strict";U.d(Ee,{v:()=>$});let m=(()=>{class O{constructor(le,ne=O.now){this.SchedulerAction=le,this.now=ne}schedule(le,ne=0,be){return new this.SchedulerAction(this,le).schedule(be,ne)}}return O.now=()=>Date.now(),O})();class $ extends m{constructor(ae,le=m.now){super(ae,()=>$.delegate&&$.delegate!==this?$.delegate.now():le()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(ae,le=0,ne){return $.delegate&&$.delegate!==this?$.delegate.schedule(ae,le,ne):super.schedule(ae,le,ne)}flush(ae){const{actions:le}=this;if(this.active)return void le.push(ae);let ne;this.active=!0;do{if(ne=ae.execute(ae.state,ae.delay))break}while(ae=le.shift());if(this.active=!1,ne){for(;ae=le.shift();)ae.unsubscribe();throw ne}}}},3637:(Qe,Ee,U)=>{"use strict";U.d(Ee,{z:()=>O,P:()=>ae});var m=U(6465);const O=new(U(6102).v)(m.o),ae=O},7771:(Qe,Ee,U)=>{"use strict";U.d(Ee,{c:()=>ne,N:()=>le});var m=U(6465),O=U(6102);const le=new class extends O.v{}(class extends m.o{constructor(te,oe){super(te,oe),this.scheduler=te,this.work=oe}schedule(te,oe=0){return oe>0?super.schedule(te,oe):(this.delay=oe,this.state=te,this.scheduler.flush(this),this)}execute(te,oe){return oe>0||this.closed?super.execute(te,oe):this._execute(te,oe)}requestAsyncId(te,oe,V=0){return null!==V&&V>0||null===V&&this.delay>0?super.requestAsyncId(te,oe,V):te.flush(this)}}),ne=le},377:(Qe,Ee,U)=>{"use strict";U.d(Ee,{hZ:()=>$});const $="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(Qe,Ee,U)=>{"use strict";U.d(Ee,{L:()=>m});const m="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(Qe,Ee,U)=>{"use strict";U.d(Ee,{b:()=>m});const m="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(Qe,Ee,U)=>{"use strict";U.d(Ee,{N:()=>$});const $=(()=>{function O(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return O.prototype=Object.create(Error.prototype),O})()},4449:(Qe,Ee,U)=>{"use strict";function m($){setTimeout(()=>{throw $},0)}U.d(Ee,{z:()=>m})},4487:(Qe,Ee,U)=>{"use strict";function m($){return $}U.d(Ee,{y:()=>m})},9796:(Qe,Ee,U)=>{"use strict";U.d(Ee,{k:()=>m});const m=Array.isArray||($=>$&&"number"==typeof $.length)},9489:(Qe,Ee,U)=>{"use strict";U.d(Ee,{z:()=>m});const m=$=>$&&"number"==typeof $.length&&"function"!=typeof $},9105:(Qe,Ee,U)=>{"use strict";function m($){return"function"==typeof $}U.d(Ee,{m:()=>m})},1555:(Qe,Ee,U)=>{"use strict";function m($){return null!==$&&"object"==typeof $}U.d(Ee,{K:()=>m})},4072:(Qe,Ee,U)=>{"use strict";function m($){return!!$&&"function"!=typeof $.subscribe&&"function"==typeof $.then}U.d(Ee,{t:()=>m})},4869:(Qe,Ee,U)=>{"use strict";function m($){return $&&"function"==typeof $.schedule}U.d(Ee,{K:()=>m})},7444:(Qe,Ee,U)=>{"use strict";U.d(Ee,{s:()=>H});var m=U(5015),$=U(4449),ae=U(377),ne=U(6554),te=U(9489),oe=U(4072),V=U(1555);const H=q=>{if(q&&"function"==typeof q[ne.L])return(q=>ce=>{const pe=q[ne.L]();if("function"!=typeof pe.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return pe.subscribe(ce)})(q);if((0,te.z)(q))return(0,m.V)(q);if((0,oe.t)(q))return(q=>ce=>(q.then(pe=>{ce.closed||(ce.next(pe),ce.complete())},pe=>ce.error(pe)).then(null,$.z),ce))(q);if(q&&"function"==typeof q[ae.hZ])return(q=>ce=>{const pe=q[ae.hZ]();for(;;){let Te;try{Te=pe.next()}catch(we){return ce.error(we),ce}if(Te.done){ce.complete();break}if(ce.next(Te.value),ce.closed)break}return"function"==typeof pe.return&&ce.add(()=>{pe.return&&pe.return()}),ce})(q);{const pe=`You provided ${(0,V.K)(q)?"an invalid object":`'${q}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(pe)}}},5015:(Qe,Ee,U)=>{"use strict";U.d(Ee,{V:()=>m});const m=$=>O=>{for(let ae=0,le=$.length;ae<le&&!O.closed;ae++)O.next($[ae]);O.complete()}},152:(Qe,Ee,U)=>{"use strict";var m=U(7716);let $=null;function O(){return $}const be=new m.OlP("DocumentToken");let te=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,m.Yz7)({factory:oe,token:n,providedIn:"platform"}),n})();function oe(){return(0,m.LFG)(H)}const V=new m.OlP("Location Initialized");let H=(()=>{class n extends te{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){q()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){q()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(be))},n.\u0275prov=(0,m.Yz7)({factory:ce,token:n,providedIn:"platform"}),n})();function q(){return!!window.history.pushState}function ce(){return new H((0,m.LFG)(be))}function pe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Te(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function we(n){return n&&"?"!==n[0]?"?"+n:n}let Be=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,m.Yz7)({factory:fe,token:n,providedIn:"root"}),n})();function fe(n){const e=(0,m.LFG)(be).location;return new xe((0,m.LFG)(te),e&&e.origin||"")}const De=new m.OlP("appBaseHref");let xe=(()=>{class n extends Be{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return pe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+we(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const d=this.prepareExternalUrl(o+we(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){const d=this.prepareExternalUrl(o+we(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(te),m.LFG(De,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Xe=(()=>{class n extends Be{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=pe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let d=this.prepareExternalUrl(o+we(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){let d=this.prepareExternalUrl(o+we(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(te),m.LFG(De,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),dt=(()=>{class n{constructor(t,r){this._subject=new m.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Te(vt(o)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+we(r))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,vt(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+we(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+we(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Be),m.LFG(te))},n.normalizeQueryParams=we,n.joinWithSlash=pe,n.stripTrailingSlash=Te,n.\u0275prov=(0,m.Yz7)({factory:Wt,token:n,providedIn:"root"}),n})();function Wt(){return new dt((0,m.LFG)(Be),(0,m.LFG)(te))}function vt(n){return n.replace(/\/index.html$/,"")}var $e=(()=>(($e=$e||{})[$e.Zero=0]="Zero",$e[$e.One=1]="One",$e[$e.Two=2]="Two",$e[$e.Few=3]="Few",$e[$e.Many=4]="Many",$e[$e.Other=5]="Other",$e))();const ti=m.kL8;class xi{}let br=(()=>{class n extends xi{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(ti(r||this.locale)(t)){case $e.Zero:return"zero";case $e.One:return"one";case $e.Two:return"two";case $e.Few:return"few";case $e.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.soG))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Xs=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new wl,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){pa("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){pa("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class wl{constructor(){this.$implicit=null,this.ngIf=null}}function pa(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,m.AaK)(e)}'.`)}let No=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[{provide:xi,useClass:br}]}),n})();function ya(n){return"server"===n}let Po=(()=>{class n{}return n.\u0275prov=(0,m.Yz7)({token:n,providedIn:"root",factory:()=>new bh((0,m.LFG)(be),window)}),n})();class bh{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=fc(this.window.history)||fc(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function fc(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ko extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new ko,$||($=n)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(Mo=Mo||document.querySelector("base"),Mo?Mo.getAttribute("href"):null);return null==t?null:function(n){Xt=Xt||document.createElement("a"),Xt.setAttribute("href",n);const e=Xt.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Mo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Xt,Mo=null;const Oo=new m.OlP("TRANSITION_ID"),ki=[{provide:m.ip1,useFactory:function(n,e,t){return()=>{t.get(m.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[Oo,be,m.zs3],multi:!0}];class or{static init(){(0,m.VLi)(new or)}addToWindow(e){m.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},m.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),m.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),m.dqk.frameworkStabilizers||(m.dqk.frameworkStabilizers=[]),m.dqk.frameworkStabilizers.push(r=>{const o=m.dqk.getAllAngularTestabilities();let u=o.length,d=!1;const f=function(y){d=d||y,u--,0==u&&r(d)};o.forEach(function(y){y.whenStable(f)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let xl=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const As=new m.OlP("EventManagerPlugins");let Ae=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const d=o[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(As),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class Ot{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let uu=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),bn=(()=>{class n extends uu{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(cu),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(cu))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(be))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function cu(n){O().remove(n)}const Rs={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ii=/%COMP%/g;function fr(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?fr(n,o,t):(o=o.replace(ii,n),t.push(o))}return t}function si(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let gs=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new xr(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case m.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new du(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case m.ifc.ShadowDom:return new Ul(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=fr(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Ae),m.LFG(bn),m.LFG(m.AFp))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class xr{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(Rs[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=Rs[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=Rs[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(m.JOm.DashCase|m.JOm.Important)?e.style.setProperty(t,r,o&m.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&m.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,si(r)):this.eventManager.addEventListener(e,t,si(r))}}class du extends xr{constructor(e,t,r,o){super(e),this.component=r;const u=fr(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr="_ngcontent-%COMP%".replace(ii,o+"-"+r.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(ii,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Ul extends xr{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=fr(o.id,o.styles,[]);for(let d=0;d<u.length;d++){const f=document.createElement("style");f.textContent=u[d],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Vo=(()=>{class n extends Ot{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(be))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const jo=["alt","control","meta","shift"],Bl={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Nr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Sh={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ec=(()=>{class n extends Ot{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let d="";if(jo.forEach(y=>{const w=r.indexOf(y);w>-1&&(r.splice(w,1),d+=y+".")}),d+=u,0!=r.length||0===u.length)return null;const f={};return f.domEventName=o,f.fullKey=d,f}static getEventFullKey(t){let r="",o=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Nr.hasOwnProperty(e)&&(e=Nr[e]))}return Bl[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),jo.forEach(u=>{u!=o&&Sh[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(be))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Mi=(0,m.eFA)(m._c5,"browser",[{provide:m.Lbi,useValue:"browser"},{provide:m.g9A,useValue:function(){ko.makeCurrent(),or.init()},multi:!0},{provide:be,useFactory:function(){return(0,m.RDi)(document),document},deps:[]}]),bc=[[],{provide:m.zSh,useValue:"root"},{provide:m.qLn,useFactory:function(){return new m.qLn},deps:[]},{provide:As,useClass:Vo,multi:!0,deps:[be,m.R0b,m.Lbi]},{provide:As,useClass:Ec,multi:!0,deps:[be]},[],{provide:gs,useClass:gs,deps:[Ae,bn,m.AFp]},{provide:m.FYo,useExisting:gs},{provide:uu,useExisting:bn},{provide:bn,useClass:bn,deps:[be]},{provide:m.dDg,useClass:m.dDg,deps:[m.R0b]},{provide:Ae,useClass:Ae,deps:[As,m.R0b]},{provide:class{},useClass:xl,deps:[]},[]];let Np=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:m.AFp,useValue:t.appId},{provide:Oo,useExisting:m.AFp},ki]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(n,12))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:bc,imports:[No,m.hGG]}),n})();"undefined"!=typeof window&&window;const Cc_firebase={apiKey:"AIzaSyACAe5MLGpzHwnmmudbq_G6PYxdFGJudZs",authDomain:"portal-ae5ef.firebaseapp.com",projectId:"portal-ae5ef",storageBucket:"portal-ae5ef.appspot.com",messagingSenderId:"172240261404",appId:"1:172240261404:web:2a4c96f816f170a8bdaad9",measurementId:"G-JLDG13LNCR"};var jt=U(4402),at=U(5917),Ns=U(9765),Aa=U(7971);class yi extends Ns.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Aa.N;return this._value}next(e){super.next(this._value=e)}}var Wl=U(4869),Go=U(9796),oi=U(7393);class ql extends oi.L{notifyNext(e,t,r,o,u){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class Tc extends oi.L{constructor(e,t,r){super(),this.parent=e,this.outerValue=t,this.outerIndex=r,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var yu=U(7444),Pr=U(7574);function vu(n,e,t,r,o=new Tc(n,t,r)){if(!o.closed)return e instanceof Pr.y?e.subscribe(o):(0,yu.s)(e)(o)}var Jn=U(6693);const Ps={};class Eu{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new wu(e,this.resultSelector))}}class wu extends ql{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(Ps),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let r=0;r<t;r++)this.add(vu(this,e[r],void 0,r))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,r){const o=this.values,d=this.toRespond?o[r]===Ps?--this.toRespond:this.toRespond:0;o[r]=t,0===d&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}const ks=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();var Fi=U(3282);function uo(...n){return(0,Fi.J)(1)((0,at.of)(...n))}var $r=U(9193);function qo(n){return new Pr.y(e=>{let t;try{t=n()}catch(o){return void e.error(o)}return(t?(0,jt.D)(t):(0,$r.c)()).subscribe(e)})}var xh=U(2441),kt=U(8002),Ra=U(5345);function ur(n,e){return"function"==typeof e?t=>t.pipe(ur((r,o)=>(0,jt.D)(n(r,o)).pipe((0,kt.U)((u,d)=>e(r,u,o,d))))):t=>t.lift(new xn(n))}class xn{constructor(e){this.project=e}call(e,t){return t.subscribe(new Nh(e,this.project))}}class Nh extends Ra.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const r=this.index++;try{t=this.project(e,r)}catch(o){return void this.destination.error(o)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const r=new Ra.IY(this),o=this.destination;o.add(r),this.innerSubscription=(0,Ra.ft)(e,r),this.innerSubscription!==r&&o.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const Ph=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function kh(n){return e=>0===n?(0,$r.c)():e.lift(new r_(n))}class r_{constructor(e){if(this.total=e,this.total<0)throw new Ph}call(e,t){return t.subscribe(new Hv(e,this.total))}}class Hv extends oi.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))}}function bu(...n){const e=n[n.length-1];return(0,Wl.K)(e)?(n.pop(),t=>uo(n,t,e)):t=>uo(n,t)}function xa(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(o){return o.lift(new i_(n,e,t))}}class i_{constructor(e,t,r=!1){this.accumulator=e,this.seed=t,this.hasSeed=r}call(e,t){return t.subscribe(new Mh(e,this.accumulator,this.seed,this.hasSeed))}}class Mh extends oi.L{constructor(e,t,r,o){super(e),this.accumulator=t,this._seed=r,this.hasSeed=o,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let r;try{r=this.accumulator(this.seed,e,t)}catch(o){this.destination.error(o)}this.seed=r,this.destination.next(r)}}function Li(n,e){return function(r){return r.lift(new zo(n,e))}}class zo{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new Kl(e,this.predicate,this.thisArg))}}class Kl extends oi.L{constructor(e,t,r){super(e),this.predicate=t,this.thisArg=r,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}t&&this.destination.next(e)}}function En(n){return function(t){const r=new Na(n),o=t.lift(r);return r.caught=o}}class Na{constructor(e){this.selector=e}call(e,t){return t.subscribe(new Pa(e,this.selector,this.caught))}}class Pa extends Ra.Ds{constructor(e,t,r){super(e),this.selector=t,this.caught=r}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(u){return void super.error(u)}this._unsubscribeAndRecycle();const r=new Ra.IY(this);this.add(r);const o=(0,Ra.ft)(t,r);o!==r&&this.add(o)}}}var kr=U(9773);function Ac(n,e){return(0,kr.zg)(n,e,1)}function vi(n){return function(t){return 0===n?(0,$r.c)():t.lift(new ms(n))}}class ms{constructor(e){if(this.total=e,this.total<0)throw new Ph}call(e,t){return t.subscribe(new ka(e,this.total))}}class ka extends oi.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,r=this.total,o=this.count++;t.length<r?t.push(e):t[o%r]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const r=this.count>=this.total?this.total:this.count,o=this.ring;for(let u=0;u<r;u++){const d=t++%r;e.next(o[d])}}e.complete()}}function Ei(n=Fp){return e=>e.lift(new Ms(n))}class Ms{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new Oh(e,this.errorFactory))}}class Oh extends oi.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function Fp(){return new ks}function co(n=null){return e=>e.lift(new Lp(n))}class Lp{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new Ma(e,this.defaultValue))}}class Ma extends oi.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var Zl=U(4487);function Vi(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Li((o,u)=>n(o,u,r)):Zl.y,kh(1),t?co(e):Ei(()=>new ks))}var pr=U(3342),Fh=U(1307),Lh=U(5319);class S{constructor(e){this.callback=e}call(e,t){return t.subscribe(new P(e,this.callback))}}class P extends oi.L{constructor(e,t){super(e),this.add(new Lh.w(t))}}class B{constructor(e,t){this.id=e,this.url=t}}class re extends B{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ue extends B{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ke extends B{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Je extends B{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class gt extends B{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ft extends B{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yt extends B{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class bt extends B{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bi extends B{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xn{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Oa{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Iu{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Rc{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xi{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _s{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ys{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const qt="primary";class er{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ko(n){return new er(n)}const Gv="ngNavigationCancelingError";function es(n){const e=Error("NavigationCancelingError: "+n);return e[Gv]=!0,e}function Wv(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const d=r[u],f=n[u];if(d.startsWith(":"))o[d.substring(1)]=f;else if(d!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function ts(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!Up(n[o],e[o]))return!1;return!0}function Up(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function Cu(n){return Array.prototype.concat.apply([],n)}function Os(n){return n.length>0?n[n.length-1]:null}function Fn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function lo(n){return(0,m.CqO)(n)?n:(0,m.QGY)(n)?(0,jt.D)(Promise.resolve(n)):(0,at.of)(n)}const Ql={exact:function o_(n,e,t){if(!Tu(n.segments,e.segments)||!Xl(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!o_(n.children[r],e.children[r],t))return!1;return!0},subset:Fa},Jl={exact:function(n,e){return ts(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Up(n[t],e[t]))},ignored:()=>!0};function Vp(n,e,t){return Ql[t.paths](n.root,e.root,t.matrixParams)&&Jl[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Fa(n,e,t){return a_(n,e,e.segments,t)}function a_(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!Tu(o,t)||e.hasChildren()||!Xl(o,t,r))}if(n.segments.length===t.length){if(!Tu(n.segments,t)||!Xl(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!Fa(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Tu(n.segments,o)&&Xl(n.segments,o,r)&&n.children[qt])&&a_(n.children[qt],e,u,r)}}function Xl(n,e,t){return e.every((r,o)=>Jl[t](n[o].parameters,r.parameters))}class ho{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ko(this.queryParams)),this._queryParamMap}toString(){return Nc.serialize(this)}}class zt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Fn(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return nd(this)}}class ed{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ko(this.parameters)),this._parameterMap}toString(){return Zo(this)}}function Tu(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Du{}class td{parse(e){const t=new Yv(e);return new ho(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){var n;return`${`/${Su(e.root,!0)}`}${function(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Au(t)}=${Au(o)}`).join("&"):`${Au(t)}=${Au(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${n=e.fragment,encodeURI(n)}`:""}`}}const Nc=new td;function nd(n){return n.segments.map(e=>Zo(e)).join("/")}function Su(n,e){if(!n.hasChildren())return nd(n);if(e){const t=n.children[qt]?Su(n.children[qt],!1):"",r=[];return Fn(n.children,(o,u)=>{u!==qt&&r.push(`${u}:${Su(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function(n,e){let t=[];return Fn(n.children,(r,o)=>{o===qt&&(t=t.concat(e(r,o)))}),Fn(n.children,(r,o)=>{o!==qt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===qt?[Su(n.children[qt],!1)]:[`${o}:${Su(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[qt]?`${nd(n)}/${t[0]}`:`${nd(n)}/(${t.join("//")})`}}function qv(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Au(n){return qv(n).replace(/%3B/gi,";")}function Pc(n){return qv(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function rd(n){return decodeURIComponent(n)}function Hp(n){return rd(n.replace(/\+/g,"%20"))}function Zo(n){return`${Pc(n.path)}${function(n){return Object.keys(n).map(e=>`;${Pc(e)}=${Pc(n[e])}`).join("")}(n.parameters)}`}const Kv=/^[^\/()?;=#]+/;function jh(n){const e=n.match(Kv);return e?e[0]:""}const Zv=/^[^=?&#]+/,kc=/^[^?&#]+/;class Yv{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new zt([],{}):new zt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[qt]=new zt(e,t)),r}parseSegment(){const e=jh(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new ed(rd(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=jh(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=jh(this.remaining);o&&(r=o,this.capture(r))}e[rd(t)]=rd(r)}parseQueryParam(e){const t=function(n){const e=n.match(Zv);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function(n){const e=n.match(kc);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=Hp(t),u=Hp(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=jh(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=qt);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[qt]:new zt([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class l_{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=id(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=id(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Gp(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Gp(e,this._root).map(t=>t.value)}}function id(n,e){if(n===e.value)return e;for(const t of e.children){const r=id(n,t);if(r)return r}return null}function Gp(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Gp(n,t);if(r.length)return r.unshift(e),r}return[]}class Qo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Mc(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class d_ extends l_{constructor(e,t){super(e),this.snapshot=t,vs(this,e)}toString(){return this.snapshot.toString()}}function h_(n,e){const t=function(n,e){const d=new La([],{},{},"",{},qt,e,null,n.root,-1,{});return new sd("",new Qo(d,[]))}(n,e),r=new yi([new ed("",{})]),o=new yi({}),u=new yi({}),d=new yi({}),f=new yi(""),y=new Oc(r,o,d,f,u,qt,e,t.root);return y.snapshot=t.root,new d_(new Qo(y,[]),t)}class Oc{constructor(e,t,r,o,u,d,f,y){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=f,this._futureSnapshot=y}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,kt.U)(e=>Ko(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,kt.U)(e=>Ko(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Qv(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class La{constructor(e,t,r,o,u,d,f,y,w,D,A){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=f,this.routeConfig=y,this._urlSegment=w,this._lastPathIndex=D,this._resolve=A}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ko(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ko(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class sd extends l_{constructor(e,t){super(t),this.url=e,vs(this,t)}toString(){return Ua(this._root)}}function vs(n,e){e.value._routerState=n,e.children.forEach(t=>vs(n,t))}function Ua(n){const e=n.children.length>0?` { ${n.children.map(Ua).join(", ")} } `:"";return`${n.value}${e}`}function $h(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ts(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ts(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ts(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ts(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function od(n,e){return ts(n.params,e.params)&&function(n,e){return Tu(n,e)&&n.every((t,r)=>ts(t.parameters,e[r].parameters))}(n.url,e.url)&&!(!n.parent!=!e.parent)&&(!n.parent||od(n.parent,e.parent))}function ad(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return ad(n,r,o);return ad(n,r)})}(n,e,t);return new Qo(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return Xv(e,d),d}}const r=function(n){return new Oc(new yi(n.url),new yi(n.params),new yi(n.queryParams),new yi(n.fragment),new yi(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>ad(n,u));return new Qo(r,o)}}function Xv(n,e){if(n.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=n.value;for(let t=0;t<n.children.length;++t)Xv(n.children[t],e.children[t])}function Fc(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Gh(n){return"object"==typeof n&&null!=n&&n.outlets}function tE(n,e,t,r,o){let u={};return r&&Fn(r,(d,f)=>{u[f]=Array.isArray(d)?d.map(y=>`${y}`):`${d}`}),new ho(t.root===n?e:E(t.root,n,e),u,o)}function E(n,e,t){const r={};return Fn(n.children,(o,u)=>{r[u]=o===e?t:E(o,e,t)}),new zt(n.segments,r)}class p{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Fc(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(Gh);if(o&&o!==Os(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class b{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function _e(n,e,t){if(n||(n=new zt([],{})),0===n.segments.length&&n.hasChildren())return je(n,e,t);const r=function(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const d=n.segments[o],f=t[r];if(Gh(f))break;const y=`${f}`,w=r<t.length-1?t[r+1]:null;if(o>0&&void 0===y)break;if(y&&w&&"object"==typeof w&&void 0===w.outlets){if(!Mr(y,w,d))return u;r+=2}else{if(!Mr(y,{},d))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new zt(n.segments.slice(0,r.pathIndex),{});return u.children[qt]=new zt(n.segments.slice(r.pathIndex),n.children),je(u,0,o)}return r.match&&0===o.length?new zt(n.segments,{}):r.match&&!n.hasChildren()?Ze(n,e,t):r.match?je(n,0,o):Ze(n,e,t)}function je(n,e,t){if(0===t.length)return new zt(n.segments,{});{const r=function(n){return Gh(n[0])?n[0].outlets:{[qt]:n}}(t),o={};return Fn(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[d]=_e(n.children[d],e,u))}),Fn(n.children,(u,d)=>{void 0===r[d]&&(o[d]=u)}),new zt(n.segments,o)}}function Ze(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(Gh(u)){const y=hn(u.outlets);return new zt(r,y)}if(0===o&&Fc(t[0])){r.push(new ed(n.segments[e].path,In(t[0]))),o++;continue}const d=Gh(u)?u.outlets[qt]:`${u}`,f=o<t.length-1?t[o+1]:null;d&&f&&Fc(f)?(r.push(new ed(d,In(f))),o+=2):(r.push(new ed(d,{})),o++)}return new zt(r,{})}function hn(n){const e={};return Fn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Ze(new zt([],{}),0,t))}),e}function In(n){const e={};return Fn(n,(t,r)=>e[r]=`${t}`),e}function Mr(n,e,t){return n==t.path&&ts(e,t.parameters)}class Wh{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),$h(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=Mc(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,o[d],r),delete o[d]}),Fn(o,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet);if(r&&r.outlet){const o=r.outlet.detach(),u=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:u})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Mc(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=Mc(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new _s(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Rc(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if($h(o),o===u)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const f=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(f.contexts),d.attachRef=f.componentRef,d.route=f.route.value,d.outlet&&d.outlet.attach(f.componentRef,f.route.value),qh(f.route)}else{const f=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),y=f?f.module.componentFactoryResolver:null;d.attachRef=null,d.route=o,d.resolver=y,d.outlet&&d.outlet.activateWith(o,y),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}function qh(n){$h(n.value),n.children.forEach(qh)}class zh{constructor(e,t){this.routes=e,this.module=t}}function fo(n){return"function"==typeof n}function Ru(n){return n instanceof ho}const Lc=Symbol("INITIAL_VALUE");function Or(){return ur(n=>function(...n){let e,t;return(0,Wl.K)(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&(0,Go.k)(n[0])&&(n=n[0]),(0,Jn.n)(n,t).lift(new Eu(e))}(n.map(e=>e.pipe(kh(1),bu(Lc)))).pipe(xa((e,t)=>{let r=!1;return t.reduce((o,u,d)=>o!==Lc?o:(u===Lc&&(r=!0),r||!1!==u&&d!==t.length-1&&!Ru(u)?o:u),e)},Lc),Li(e=>e!==Lc),(0,kt.U)(e=>Ru(e)?e:!0===e),kh(1)))}let Zh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&m._UZ(0,"router-outlet")},directives:function(){return[tf]},encapsulation:2}),n})();function m_(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];xA(r,NA(e,r))}}function xA(n,e){n.children&&m_(n.children,e)}function NA(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function __(n){const e=n.children&&n.children.map(__),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==qt&&(t.component=Zh),t}function po(n){return n.outlet||qt}function rE(n,e){const t=n.filter(r=>po(r)===e);return t.push(...n.filter(r=>po(r)!==e)),t}const vI={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function zp(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},vI):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const u=(e.matcher||Wv)(t,n,e);if(!u)return Object.assign({},vI);const d={};Fn(u.posParams,(y,w)=>{d[w]=y.path});const f=u.consumed.length>0?Object.assign(Object.assign({},d),u.consumed[u.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:u.consumed,lastChild:u.consumed.length,parameters:f,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function y_(n,e,t,r,o="corrected"){if(t.length>0&&function(n,e,t){return t.some(r=>Kp(n,e,r)&&po(r)!==qt)}(n,t,r)){const d=new zt(e,function(n,e,t,r){const o={};o[qt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&po(u)!==qt){const d=new zt([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[po(u)]=d}return o}(n,e,r,new zt(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(r=>Kp(n,e,r))}(n,t,r)){const d=new zt(n.segments,function(n,e,t,r,o,u){const d={};for(const f of r)if(Kp(n,t,f)&&!o[po(f)]){const y=new zt([],{});y._sourceSegment=n,y._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[po(f)]=y}return Object.assign(Object.assign({},o),d)}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new zt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Kp(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function wI(n,e,t,r){return!!(po(n)===r||r!==qt&&Kp(e,t,n))&&("**"===n.path||zp(e,n,t).matched)}function MA(n,e,t){return 0===e.length&&!n.children[t]}class Yh{constructor(e){this.segmentGroup=e||null}}class Zp{constructor(e){this.urlTree=e}}function v_(n){return new Pr.y(e=>e.error(new Yh(n)))}function bI(n){return new Pr.y(e=>e.error(new Zp(n)))}function Qh(n){return new Pr.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class LA{constructor(e,t,r,o,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(m.h0i)}apply(){const e=y_(this.urlTree.root,[],[],this.config).segmentGroup,t=new zt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,qt).pipe((0,kt.U)(u=>this.createUrlTree(sE(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(En(u=>{if(u instanceof Zp)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Yh?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,qt).pipe((0,kt.U)(o=>this.createUrlTree(sE(o),e.queryParams,e.fragment))).pipe(En(o=>{throw o instanceof Yh?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new zt([],{[qt]:e}):e;return new ho(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,kt.U)(u=>new zt([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,jt.D)(o).pipe(Ac(u=>{const d=r.children[u],f=rE(t,u);return this.expandSegmentGroup(e,f,d,u).pipe((0,kt.U)(y=>({segment:y,outlet:u})))}),xa((u,d)=>(u[d.outlet]=d.segment,u),{}),function(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Li((o,u)=>n(o,u,r)):Zl.y,vi(1),t?co(e):Ei(()=>new ks))}())}expandSegment(e,t,r,o,u,d){return(0,jt.D)(r).pipe(Ac(f=>this.expandSegmentAgainstRoute(e,t,r,f,o,u,d).pipe(En(w=>{if(w instanceof Yh)return(0,at.of)(null);throw w}))),Vi(f=>!!f),En((f,y)=>{if(f instanceof ks||"EmptyError"===f.name){if(MA(t,o,u))return(0,at.of)(new zt([],{}));throw new Yh(t)}throw f}))}expandSegmentAgainstRoute(e,t,r,o,u,d,f){return wI(o,t,u,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,d):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d):v_(t):v_(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?bI(u):this.lineralizeSegments(r,u).pipe((0,kr.zg)(d=>{const f=new zt(d,{});return this.expandSegment(e,f,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){const{matched:f,consumedSegments:y,lastChild:w,positionalParamSegments:D}=zp(t,o,u);if(!f)return v_(t);const A=this.applyRedirectCommands(y,o.redirectTo,D);return o.redirectTo.startsWith("/")?bI(A):this.lineralizeSegments(o,A).pipe((0,kr.zg)(M=>this.expandSegment(e,t,r,M.concat(u.slice(w)),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?(0,at.of)(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,kt.U)(M=>(r._loadedConfig=M,new zt(o,{})))):(0,at.of)(new zt(o,{}));const{matched:d,consumedSegments:f,lastChild:y}=zp(t,r,o);if(!d)return v_(t);const w=o.slice(y);return this.getChildConfig(e,r,o).pipe((0,kr.zg)(A=>{const M=A.module,j=A.routes,{segmentGroup:Y,slicedSegments:ye}=y_(t,f,w,j),Re=new zt(Y.segments,Y.children);if(0===ye.length&&Re.hasChildren())return this.expandChildren(M,j,Re).pipe((0,kt.U)(st=>new zt(f,st)));if(0===j.length&&0===ye.length)return(0,at.of)(new zt(f,{}));const lt=po(r)===u;return this.expandSegment(M,Re,j,ye,lt?qt:u,!0).pipe((0,kt.U)(rt=>new zt(f.concat(rt.segments),rt.children)))}))}getChildConfig(e,t,r){return t.children?(0,at.of)(new zh(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,at.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,kr.zg)(o=>{return o?this.configLoader.load(e.injector,t).pipe((0,kt.U)(u=>(t._loadedConfig=u,u))):(n=t,new Pr.y(e=>e.error(es(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):(0,at.of)(new zh([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;if(!o||0===o.length)return(0,at.of)(!0);const u=o.map(d=>{const f=e.get(d);let y;if((n=f)&&fo(n.canLoad))y=f.canLoad(t,r);else{if(!fo(f))throw new Error("Invalid CanLoad guard");y=f(t,r)}var n;return lo(y)});return(0,at.of)(u).pipe(Or(),(0,pr.b)(d=>{if(!Ru(d))return;const f=es(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw f.url=d,f}),(0,kt.U)(d=>!0===d))}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return(0,at.of)(r);if(o.numberOfChildren>1||!o.children[qt])return Qh(e.redirectTo);o=o.children[qt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new ho(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Fn(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const f=o.substring(1);r[u]=t[f]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let d={};return Fn(t.children,(f,y)=>{d[y]=this.createSegmentGroup(e,f,r,o)}),new zt(u,d)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function sE(n){const e={};for(const r of Object.keys(n.children)){const u=sE(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function(n){if(1===n.numberOfChildren&&n.children[qt]){const e=n.children[qt];return new zt(n.segments.concat(e.segments),e.children)}return n}(new zt(n.segments,e))}class Fs{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Yp{constructor(e,t){this.component=e,this.route=t}}function VA(n,e,t){const r=n._root;return Jh(r,e?e._root:null,t,[r.value])}function Qp(n,e,t){const r=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Jh(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=Mc(e);return n.children.forEach(d=>{(function(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const y=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Tu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Tu(n.url,e.url)||!ts(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!od(n,e)||!ts(n.queryParams,e.queryParams);case"paramsChange":default:return!od(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);y?o.canActivateChecks.push(new Fs(r)):(u.data=d.data,u._resolvedData=d._resolvedData),Jh(n,e,u.component?f?f.children:null:t,r,o),y&&f&&f.outlet&&f.outlet.isActivated&&o.canDeactivateChecks.push(new Yp(f.outlet.component,d))}else d&&Jp(e,f,o),o.canActivateChecks.push(new Fs(r)),Jh(n,null,u.component?f?f.children:null:t,r,o)})(d,u[d.value.outlet],t,r.concat([d.value]),o),delete u[d.value.outlet]}),Fn(u,(d,f)=>Jp(d,t.getContext(f),o)),o}function Jp(n,e,t){const r=Mc(n),o=n.value;Fn(r,(u,d)=>{Jp(u,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new Yp(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class aE{}function CI(n){return new Pr.y(e=>e.error(n))}class Xp{constructor(e,t,r,o,u,d){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=d}recognize(){const e=y_(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,qt);if(null===t)return null;const r=new La([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},qt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Qo(r,t),u=new sd(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=Qv(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const d=t.children[u],f=rE(e,u),y=this.processSegmentGroup(f,d,u);if(null===y)return null;r.push(...y)}const o=w_(r);return o.sort((e,t)=>e.value.outlet===qt?-1:t.value.outlet===qt?1:e.value.outlet.localeCompare(t.value.outlet)),o}processSegment(e,t,r,o){for(const u of e){const d=this.processSegmentAgainstRoute(u,t,r,o);if(null!==d)return d}return MA(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!wI(e,t,r,o))return null;let u,d=[],f=[];if("**"===e.path){const j=r.length>0?Os(r).parameters:{};u=new La(r,j,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,b_(e),po(e),e.component,e,GA(t),ud(t)+r.length,cE(e))}else{const j=zp(t,e,r);if(!j.matched)return null;d=j.consumedSegments,f=r.slice(j.lastChild),u=new La(d,j.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,b_(e),po(e),e.component,e,GA(t),ud(t)+d.length,cE(e))}const y=(n=e).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:w,slicedSegments:D}=y_(t,d,f,y.filter(j=>void 0===j.redirectTo),this.relativeLinkResolution);var n;if(0===D.length&&w.hasChildren()){const j=this.processChildren(y,w);return null===j?null:[new Qo(u,j)]}if(0===y.length&&0===D.length)return[new Qo(u,[])];const A=po(e)===o,M=this.processSegment(y,w,D,A?qt:o);return null===M?null:[new Qo(u,M)]}}function uE(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function w_(n){const e=[],t=new Set;for(const r of n){if(!uE(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=w_(r.children);e.push(new Qo(r.value,o))}return e.filter(r=>!t.has(r))}function GA(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function ud(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function b_(n){return n.data||{}}function cE(n){return n.resolve||{}}function dE(n){return ur(e=>{const t=n(e);return t?(0,jt.D)(t).pipe((0,kt.U)(()=>e)):(0,at.of)(e)})}class AI extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const eg=new m.OlP("ROUTES");class hE{constructor(e,t,r,o){this.loader=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,kt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const d=u.create(e);return new zh(Cu(d.injector.get(eg,void 0,m.XFs.Self|m.XFs.Optional)).map(__),d)}),En(u=>{throw t._loader$=void 0,u}));return t._loader$=new xh.c(o,()=>new Ns.xQ).pipe((0,Fh.x)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?(0,jt.D)(this.loader.load(e)):lo(e()).pipe((0,kr.zg)(t=>t instanceof m.YKP?(0,at.of)(t):(0,jt.D)(this.compiler.compileModuleAsync(t))))}}class fE{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ef,this.attachRef=null}}class ef{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new fE,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class RI{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function xI(n){throw n}function cd(n,e,t){return e.parse("/")}function pE(n,e){return(0,at.of)(null)}const NI={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},JA={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Fr=(()=>{class n{constructor(t,r,o,u,d,f,y,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ns.xQ,this.errorHandler=xI,this.malformedUriErrorHandler=cd,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:pE,afterPreactivation:pE},this.urlHandlingStrategy=new RI,this.routeReuseStrategy=new AI,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(m.h0i),this.console=d.get(m.c2e);const M=d.get(m.R0b);this.isNgZoneEnabled=M instanceof m.R0b&&m.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=new ho(new zt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new hE(f,y,j=>this.triggerEvent(new Xn(j)),j=>this.triggerEvent(new Oa(j))),this.routerState=h_(this.currentUrlTree,this.rootComponentType),this.transitions=new yi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Li(o=>0!==o.id),(0,kt.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),ur(o=>{let u=!1,d=!1;return(0,at.of)(o).pipe((0,pr.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.currentRawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),ur(f=>{const y=this.browserUrlTree.toString(),w=!this.navigated||f.extractedUrl.toString()!==y||y!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||w)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return tg(f.source)&&(this.browserUrlTree=f.extractedUrl),(0,at.of)(f).pipe(ur(A=>{const M=this.transitions.getValue();return r.next(new re(A.id,this.serializeUrl(A.extractedUrl),A.source,A.restoredState)),M!==this.transitions.getValue()?$r.E:Promise.resolve(A)}),function(n,e,t,r){return ur(o=>function(n,e,t,r,o){return new LA(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,kt.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,pr.b)(A=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:A.urlAfterRedirects})}),function(n,e,t,r,o){return(0,kr.zg)(u=>function(n,e,t,r,o="emptyOnly",u="legacy"){try{const d=new Xp(n,e,t,r,o,u).recognize();return null===d?CI(new aE):(0,at.of)(d)}catch(d){return CI(d)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,kt.U)(d=>Object.assign(Object.assign({},u),{targetSnapshot:d}))))}(this.rootComponentType,this.config,A=>this.serializeUrl(A),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,pr.b)(A=>{"eager"===this.urlUpdateStrategy&&(A.extras.skipLocationChange||this.setBrowserUrl(A.urlAfterRedirects,A),this.browserUrlTree=A.urlAfterRedirects);const M=new gt(A.id,this.serializeUrl(A.extractedUrl),this.serializeUrl(A.urlAfterRedirects),A.targetSnapshot);r.next(M)}));if(w&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:M,extractedUrl:j,source:Y,restoredState:ye,extras:Re}=f,lt=new re(M,this.serializeUrl(j),Y,ye);r.next(lt);const ct=h_(j,this.rootComponentType).snapshot;return(0,at.of)(Object.assign(Object.assign({},f),{targetSnapshot:ct,urlAfterRedirects:j,extras:Object.assign(Object.assign({},Re),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=f.rawUrl,this.browserUrlTree=f.urlAfterRedirects,f.resolve(null),$r.E}),dE(f=>{const{targetSnapshot:y,id:w,extractedUrl:D,rawUrl:A,extras:{skipLocationChange:M,replaceUrl:j}}=f;return this.hooks.beforePreactivation(y,{navigationId:w,appliedUrlTree:D,rawUrlTree:A,skipLocationChange:!!M,replaceUrl:!!j})}),(0,pr.b)(f=>{const y=new ft(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(y)}),(0,kt.U)(f=>Object.assign(Object.assign({},f),{guards:VA(f.targetSnapshot,f.currentSnapshot,this.rootContexts)})),function(n,e){return(0,kr.zg)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?(0,at.of)(Object.assign(Object.assign({},t),{guardsResult:!0})):function(n,e,t,r){return(0,jt.D)(n).pipe((0,kr.zg)(o=>function(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!u||0===u.length)return(0,at.of)(!0);const d=u.map(f=>{const y=Qp(f,e,o);let w;if(function(n){return n&&fo(n.canDeactivate)}(y))w=lo(y.canDeactivate(n,e,t,r));else{if(!fo(y))throw new Error("Invalid CanDeactivate guard");w=lo(y(n,e,t,r))}return w.pipe(Vi())});return(0,at.of)(d).pipe(Or())}(o.component,o.route,t,e,r)),Vi(o=>!0!==o,!0))}(d,r,o,n).pipe((0,kr.zg)(f=>f&&function(n){return"boolean"==typeof n}(f)?function(n,e,t,r){return(0,jt.D)(e).pipe(Ac(o=>uo(function(n,e){return null!==n&&e&&e(new Iu(n)),(0,at.of)(!0)}(o.route.parent,r),function(n,e){return null!==n&&e&&e(new Xi(n)),(0,at.of)(!0)}(o.route,r),function(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>qo(()=>{const f=d.guards.map(y=>{const w=Qp(y,d.node,t);let D;if(function(n){return n&&fo(n.canActivateChild)}(w))D=lo(w.canActivateChild(r,n));else{if(!fo(w))throw new Error("Invalid CanActivateChild guard");D=lo(w(r,n))}return D.pipe(Vi())});return(0,at.of)(f).pipe(Or())}));return(0,at.of)(u).pipe(Or())}(n,o.path,t),function(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,at.of)(!0);const o=r.map(u=>qo(()=>{const d=Qp(u,e,t);let f;if(function(n){return n&&fo(n.canActivate)}(d))f=lo(d.canActivate(e,n));else{if(!fo(d))throw new Error("Invalid CanActivate guard");f=lo(d(e,n))}return f.pipe(Vi())}));return(0,at.of)(o).pipe(Or())}(n,o.route,t))),Vi(o=>!0!==o,!0))}(r,u,n,e):(0,at.of)(f)),(0,kt.U)(f=>Object.assign(Object.assign({},t),{guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),(0,pr.b)(f=>{if(Ru(f.guardsResult)){const w=es(`Redirecting to "${this.serializeUrl(f.guardsResult)}"`);throw w.url=f.guardsResult,w}const y=new Yt(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(y)}),Li(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,""),!1)),dE(f=>{if(f.guards.canActivateChecks.length)return(0,at.of)(f).pipe((0,pr.b)(y=>{const w=new bt(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(w)}),ur(y=>{let w=!1;return(0,at.of)(y).pipe(function(n,e){return(0,kr.zg)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return(0,at.of)(t);let u=0;return(0,jt.D)(o).pipe(Ac(d=>function(n,e,t,r){return function(n,e,t,r){const o=Object.keys(n);if(0===o.length)return(0,at.of)({});const u={};return(0,jt.D)(o).pipe((0,kr.zg)(d=>function(n,e,t,r){const o=Qp(n,e,r);return lo(o.resolve?o.resolve(e,t):o(e,t))}(n[d],e,t,r).pipe((0,pr.b)(f=>{u[d]=f}))),vi(1),(0,kr.zg)(()=>Object.keys(u).length===o.length?(0,at.of)(u):$r.E))}(n._resolve,n,e,r).pipe((0,kt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),Qv(n,t).resolve),null)))}(d.route,r,n,e)),(0,pr.b)(()=>u++),vi(1),(0,kr.zg)(d=>u===o.length?(0,at.of)(t):$r.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,pr.b)({next:()=>w=!0,complete:()=>{w||(this.restoreHistory(y),this.cancelNavigationTransition(y,"At least one route resolver didn't emit any value."))}}))}),(0,pr.b)(y=>{const w=new Bi(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(w)}))}),dE(f=>{const{targetSnapshot:y,id:w,extractedUrl:D,rawUrl:A,extras:{skipLocationChange:M,replaceUrl:j}}=f;return this.hooks.afterPreactivation(y,{navigationId:w,appliedUrlTree:D,rawUrlTree:A,skipLocationChange:!!M,replaceUrl:!!j})}),(0,kt.U)(f=>{const y=function(n,e,t){const r=ad(n,e._root,t?t._root:void 0);return new d_(r,e)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return Object.assign(Object.assign({},f),{targetRouterState:y})}),(0,pr.b)(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((n,e,t)=>(0,kt.U)(r=>(new Wh(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),(0,pr.b)({next(){u=!0},complete(){u=!0}}),function(n){return e=>e.lift(new S(n))}(()=>{var f;if(!u&&!d){const y=`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(o),this.cancelNavigationTransition(o,y)):this.cancelNavigationTransition(o,y)}(null===(f=this.currentNavigation)||void 0===f?void 0:f.id)===o.id&&(this.currentNavigation=null)}),En(f=>{if(d=!0,function(n){return n&&n[Gv]}(f)){const y=Ru(f.url);y||(this.navigated=!0,this.restoreHistory(o,!0));const w=new ke(o.id,this.serializeUrl(o.extractedUrl),f.message);r.next(w),y?setTimeout(()=>{const D=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),A={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||tg(o.source)};this.scheduleNavigation(D,"imperative",null,A,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const y=new Je(o.id,this.serializeUrl(o.extractedUrl),f);r.next(y);try{o.resolve(this.errorHandler(f))}catch(w){o.reject(w)}}return $r.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,r)&&setTimeout(()=>{const{source:o,state:u,urlTree:d}=r,f={replaceUrl:!0};if(u){const y=Object.assign({},u);delete y.navigationId,delete y.\u0275routerPageId,0!==Object.keys(y).length&&(f.state=y)}this.scheduleNavigation(d,o,u,f)},0),this.lastLocationChangeInfo=r}))}extractLocationChangeInfoFromEvent(t){var r;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(r=t.state)||void 0===r?void 0:r.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,r){if(!t)return!0;const o=r.urlTree.toString()===t.urlTree.toString();return r.transitionId!==t.transitionId||!o||!("hashchange"===r.source&&"popstate"===t.source||"popstate"===r.source&&"hashchange"===t.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){m_(t),this.config=t.map(__),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:d,queryParamsHandling:f,preserveFragment:y}=r,w=o||this.routerState.root,D=y?this.currentUrlTree.fragment:d;let A=null;switch(f){case"merge":A=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":A=this.currentUrlTree.queryParams;break;default:A=u||null}return null!==A&&(A=this.removeEmptyProps(A)),function(n,e,t,r,o){if(0===t.length)return tE(e.root,e.root,e,r,o);const u=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new p(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const f={};return Fn(u.outlets,(y,w)=>{f[w]="string"==typeof y?y.split("/"):y}),[...o,{outlets:f}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===d?(u.split("/").forEach((f,y)=>{0==y&&"."===f||(0==y&&""===f?t=!0:".."===f?e++:""!=f&&o.push(f))}),o):[...o,u]},[]);return new p(t,e,r)}(t);if(u.toRoot())return tE(e.root,new zt([],{}),e,r,o);const d=function(n,e,t){if(n.isAbsolute)return new b(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new b(u,u===e.root,0)}const r=Fc(n.commands[0])?0:1;return function(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new b(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),f=d.processChildren?je(d.segmentGroup,d.index,u.commands):_e(d.segmentGroup,d.index,u.commands);return tE(d.segmentGroup,f,e,r,o)}(w,this.currentUrlTree,t,A,null!=D?D:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Ru(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},NI):!1===r?Object.assign({},JA):r,Ru(t))return Vp(this.currentUrlTree,t,o);const u=this.parseUrl(t);return Vp(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new ue(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,d){var f,y;if(this.disposed)return Promise.resolve(!1);const w=this.getTransition(),D=tg(r)&&w&&!tg(w.source),j=(this.lastSuccessfulId===w.id||this.currentNavigation?w.rawUrl:w.urlAfterRedirects).toString()===t.toString();if(D&&j)return Promise.resolve(!0);let Y,ye,Re;d?(Y=d.resolve,ye=d.reject,Re=d.promise):Re=new Promise((rt,st)=>{Y=rt,ye=st});const lt=++this.navigationId;let ct;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),ct=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(f=this.browserPageId)&&void 0!==f?f:0:(null!==(y=this.browserPageId)&&void 0!==y?y:0)+1):ct=0,this.setTransition({id:lt,targetPageId:ct,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:Y,reject:ye,promise:Re,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Re.catch(rt=>Promise.reject(rt))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===d?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===d&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new ke(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.DyG),m.LFG(Du),m.LFG(ef),m.LFG(dt),m.LFG(m.zs3),m.LFG(m.v3s),m.LFG(m.Sil),m.LFG(void 0))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function tg(n){return"imperative"!==n}let Uc=(()=>{class n{constructor(t,r,o,u,d){this.router=t,this.route=r,this.commands=[],this.onChanges=new Ns.xQ,null==o&&u.setAttribute(d.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:Vc(this.skipLocationChange),replaceUrl:Vc(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Vc(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Fr),m.Y36(Oc),m.$8M("tabindex"),m.Y36(m.Qsj),m.Y36(m.SBq))},n.\u0275dir=m.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&m.NdJ("click",function(){return r.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[m.TTD]}),n})();function Vc(n){return""===n||!!n}let tf=(()=>{class n{constructor(t,r,o,u,d){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.name=u||qt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const d=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),f=this.parentContexts.getOrCreateContext(this.name).children,y=new kI(t,f,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,y),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(ef),m.Y36(m.s_b),m.Y36(m._Vd),m.$8M("name"),m.Y36(m.sBO))},n.\u0275dir=m.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),n})();class kI{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Oc?this.route:e===ef?this.childContexts:this.parent.get(e,t)}}class T_{}class D_{preload(e,t){return(0,at.of)(null)}}let nf=(()=>{class n{constructor(t,r,o,u,d){this.router=t,this.injector=u,this.preloadingStrategy=d,this.loader=new hE(r,o,w=>t.triggerEvent(new Xn(w)),w=>t.triggerEvent(new Oa(w)))}setUpPreloading(){this.subscription=this.router.events.pipe(Li(t=>t instanceof ue),Ac(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(m.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const d=u._loadedConfig;o.push(this.processRoutes(d.module,d.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children));return(0,jt.D)(o).pipe((0,Fi.J)(),(0,kt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?(0,at.of)(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,kr.zg)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Fr),m.LFG(m.v3s),m.LFG(m.Sil),m.LFG(m.zs3),m.LFG(T_))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),gE=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof re?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ue&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ys&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new ys(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Fr),m.LFG(Po),m.LFG(void 0))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const ld=new m.OlP("ROUTER_CONFIGURATION"),OI=new m.OlP("ROUTER_FORROOT_GUARD"),mE=[dt,{provide:Du,useClass:td},{provide:Fr,useFactory:function(n,e,t,r,o,u,d,f={},y,w){const D=new Fr(null,n,e,t,r,o,u,Cu(d));return y&&(D.urlHandlingStrategy=y),w&&(D.routeReuseStrategy=w),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy)}(f,D),f.enableTracing&&D.events.subscribe(A=>{var M,j;null===(M=console.group)||void 0===M||M.call(console,`Router Event: ${A.constructor.name}`),console.log(A.toString()),console.log(A),null===(j=console.groupEnd)||void 0===j||j.call(console)}),D},deps:[Du,ef,dt,m.zs3,m.v3s,m.Sil,eg,ld,[class{},new m.FiY],[class{},new m.FiY]]},ef,{provide:Oc,useFactory:function(n){return n.routerState.root},deps:[Fr]},{provide:m.v3s,useClass:m.EAV},nf,D_,class{preload(e,t){return t().pipe(En(()=>(0,at.of)(null)))}},{provide:ld,useValue:{enableTracing:!1}}];function LI(){return new m.PXZ("Router",Fr)}let tR=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[mE,BI(t),{provide:OI,useFactory:VI,deps:[[Fr,new m.FiY,new m.tp0]]},{provide:ld,useValue:r||{}},{provide:Be,useFactory:nR,deps:[te,[new m.tBr(De),new m.FiY],ld]},{provide:gE,useFactory:UI,deps:[Fr,Po,ld]},{provide:T_,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:D_},{provide:m.PXZ,multi:!0,useFactory:LI},[S_,{provide:m.ip1,multi:!0,useFactory:sR,deps:[S_]},{provide:jI,useFactory:oR,deps:[S_]},{provide:m.tb,multi:!0,useExisting:jI}]]}}static forChild(t){return{ngModule:n,providers:[BI(t)]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(OI,8),m.LFG(Fr,8))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();function UI(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new gE(n,e,t)}function nR(n,e,t={}){return t.useHash?new Xe(n,e):new xe(n,e)}function VI(n){return"guarded"}function BI(n){return[{provide:m.deG,multi:!0,useValue:n},{provide:eg,multi:!0,useValue:n}]}let S_=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Ns.xQ}appInitializer(){return this.injector.get(V,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(f=>r=f),u=this.injector.get(Fr),d=this.injector.get(ld);return"disabled"===d.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?(0,at.of)(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(ld),o=this.injector.get(nf),u=this.injector.get(gE),d=this.injector.get(Fr),f=this.injector.get(m.z2F);t===f.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),o.setUpPreloading(),u.init(),d.resetRootComponentType(f.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.zs3))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function sR(n){return n.appInitializer.bind(n)}function oR(n){return n.bootstrapListener.bind(n)}const jI=new m.OlP("Router Initializer");var cR=U(7014),F=U(3854),ns=U(8026),pt=U(5422),go=U(3910),A_=U(3637),on=U(2871);function Ls(){return n=>n.lift(new $I)}class $I{call(e,t){return t.subscribe(new lR(e))}}class lR extends oi.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}function R_(n,e){return t=>t.lift(new Nu(n,e))}class Nu{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new _E(e,this.compare,this.keySelector))}}class _E extends oi.L{constructor(e,t,r){super(e),this.keySelector=r,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:o}=this;t=o?o(e):e}catch(o){return this.destination.error(o)}let r=!1;if(this.hasKey)try{const{compare:o}=this;r=o(this.key,t)}catch(o){return this.destination.error(o)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))}}var et,Lr=U(8939),GI=(U(4828),U(3394)),Ie=U(8239),_M="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},wi={},rf=rf||{},Mt=_M||self;function yE(){}function vE(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function sf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var EE="closure_uid_"+(1e9*Math.random()>>>0),vM=0;function WI(n,e,t){return n.call.apply(n.bind,arguments)}function qI(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function bi(n,e,t){return(bi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?WI:qI).apply(null,arguments)}function af(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ji(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var d=Array(arguments.length-2),f=2;f<arguments.length;f++)d[f-2]=arguments[f];return e.prototype[o].apply(r,d)}}function dd(){this.s=this.s,this.o=this.o}var wM={};dd.prototype.s=!1,dd.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,EE)&&n[EE]||(n[EE]=++vM)}(this);delete wM[n]}},dd.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const dR=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},hR=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function fR(n){return Array.prototype.concat.apply([],arguments)}function zI(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function wE(n){return/^[\s\xa0]*$/.test(n)}var rs,pR=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function gr(n,e){return-1!=n.indexOf(e)}function ng(n,e){return n<e?-1:n>e?1:0}e:{var bE=Mt.navigator;if(bE){var x_=bE.userAgent;if(x_){rs=x_;break e}}rs=""}function N_(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function P_(n){const e={};for(const t in n)e[t]=n[t];return e}var KI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Pu(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<KI.length;u++)t=KI[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function k_(n){return k_[" "](n),n}k_[" "]=yE;var ku,n,IM=gr(rs,"Opera"),Bc=gr(rs,"Trident")||gr(rs,"MSIE"),ZI=gr(rs,"Edge"),M_=ZI||Bc,YI=gr(rs,"Gecko")&&!(gr(rs.toLowerCase(),"webkit")&&!gr(rs,"Edge"))&&!(gr(rs,"Trident")||gr(rs,"MSIE"))&&!gr(rs,"Edge"),mR=gr(rs.toLowerCase(),"webkit")&&!gr(rs,"Edge");function uf(){var n=Mt.document;return n?n.documentMode:void 0}e:{var rg="",jc=(n=rs,YI?/rv:([^\);]+)(\)|;)/.exec(n):ZI?/Edge\/([\d\.]+)/.exec(n):Bc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):mR?/WebKit\/(\S+)/.exec(n):IM?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(jc&&(rg=jc?jc[1]:""),Bc){var hd=uf();if(null!=hd&&hd>parseFloat(rg)){ku=String(hd);break e}}ku=rg}var cf={};function _R(){return e=cf,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let n=0;const e=pR(String(ku)).split("."),t=pR("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",u=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=ng(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||ng(0==o[2].length,0==u[2].length)||ng(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n}();var e}var CE=Mt.document&&Bc&&(uf()||parseInt(ku,10))||void 0,TE=function(){if(!Mt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Mt.addEventListener("test",yE,e),Mt.removeEventListener("test",yE,e)}catch(t){}return n}();function Ii(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function $c(n,e){if(Ii.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(YI){e:{try{k_(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:yR[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&$c.Z.h.call(this)}}Ii.prototype.h=function(){this.defaultPrevented=!0},ji($c,Ii);var yR={2:"touch",3:"pen",4:"mouse"};$c.prototype.h=function(){$c.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var lf="closure_listenable_"+(1e6*Math.random()|0),CM=0;function QI(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++CM,this.ca=this.fa=!1}function ig(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function F_(n){this.src=n,this.g={},this.h=0}function L_(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=dR(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(ig(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function DE(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}F_.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=DE(n,e,r,o);return-1<d?(e=n[d],t||(e.fa=!1)):((e=new QI(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var SE="closure_lm_"+(1e6*Math.random()|0),is={};function JI(n,e,t,r,o){if(r&&r.once)return vR(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)JI(n,e[u],t,r,o);return null}return t=NE(t),n&&n[lf]?n.N(e,t,sf(r)?!!r.capture:!!r,o):XI(n,e,t,!1,r,o)}function XI(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var d=sf(o)?!!o.capture:!!o,f=U_(n);if(f||(n[SE]=f=new F_(n)),(t=f.add(e,t,r,d,u)).proxy)return t;if(r=function(){var e=RE;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)TE||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(tC(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function vR(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)vR(n,e[u],t,r,o);return null}return t=NE(t),n&&n[lf]?n.O(e,t,sf(r)?!!r.capture:!!r,o):XI(n,e,t,!0,r,o)}function AE(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)AE(n,e[u],t,r,o);else r=sf(r)?!!r.capture:!!r,t=NE(t),n&&n[lf]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=DE(u=n.g[e],t,r,o))&&(ig(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=U_(n))&&(e=n.g[e.toString()],n=-1,e&&(n=DE(e,t,r,o)),(t=-1<n?e[n]:null)&&eC(t))}function eC(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[lf])L_(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(tC(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=U_(e))?(L_(t,n),0==t.h&&(t.src=null,e[SE]=null)):ig(n)}}}function tC(n){return n in is?is[n]:is[n]="on"+n}function RE(n,e){if(n.ca)n=!0;else{e=new $c(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&eC(n),n=t.call(r,e)}return n}function U_(n){return(n=n[SE])instanceof F_?n:null}var xE="__closure_events_fn_"+(1e9*Math.random()>>>0);function NE(n){return"function"==typeof n?n:(n[xE]||(n[xE]=function(e){return n.handleEvent(e)}),n[xE])}function ui(){dd.call(this),this.i=new F_(this),this.P=this,this.I=null}function ci(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Ii(e,n);else if(e instanceof Ii)e.target=e.target||n;else{var o=e;Pu(e=new Ii(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];o=V_(d,r,!0,e)&&o}if(o=V_(d=e.g=n,r,!0,e)&&o,o=V_(d,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=V_(d=e.g=t[u],r,!1,e)&&o}function V_(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ca&&d.capture==t){var f=d.listener,y=d.ia||d.src;d.fa&&L_(n.i,d),o=!1!==f.call(y,r)&&o}}return o&&!r.defaultPrevented}ji(ui,dd),ui.prototype[lf]=!0,ui.prototype.removeEventListener=function(n,e,t,r){AE(this,n,e,t,r)},ui.prototype.M=function(){if(ui.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)ig(t[r]);delete n.g[e],n.h--}}this.I=null},ui.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ui.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var B_=Mt.JSON.stringify;function ER(){var n=CR;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var sg,PE=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new nC,n=>n.reset());class nC{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function bR(n){Mt.setTimeout(()=>{throw n},0)}function mo(n,e){sg||function(){var n=Mt.Promise.resolve(void 0);sg=function(){n.then(rC)}}(),kE||(sg(),kE=!0),CR.add(n,e)}var kE=!1,CR=new class{constructor(){this.h=this.g=null}add(e,t){const r=PE.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function rC(){for(var n;n=ER();){try{n.h.call(n.g)}catch(t){bR(t)}var e=PE;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}kE=!1}function j_(n,e){ui.call(this),this.h=n||1,this.g=e||Mt,this.j=bi(this.kb,this),this.l=Date.now()}function ME(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function OE(n,e,t){if("function"==typeof n)t&&(n=bi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=bi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Mt.setTimeout(n,e||0)}function $_(n){n.g=OE(()=>{n.g=null,n.i&&(n.i=!1,$_(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ji(j_,ui),(et=j_.prototype).da=!1,et.S=null,et.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ci(this,"tick"),this.da&&(ME(this),this.start()))}},et.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},et.M=function(){j_.Z.M.call(this),ME(this),delete this.g};class TR extends dd{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:$_(this)}M(){super.M(),this.g&&(Mt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function og(n){dd.call(this),this.h=n,this.g={}}ji(og,dd);var ag=[];function H_(n,e,t,r){Array.isArray(t)||(t&&(ag[0]=t.toString()),t=ag);for(var o=0;o<t.length;o++){var u=JI(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function iC(n){N_(n.g,function(e,t){this.g.hasOwnProperty(t)&&eC(e)},n),n.g={}}function df(){this.g=!0}function hf(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<o.length;d++)o[d]=""}}}return B_(t)}catch(f){return e}}(n,t)+(r?" "+r:"")})}og.prototype.M=function(){og.Z.M.call(this),iC(this)},og.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},df.prototype.Aa=function(){this.g=!1},df.prototype.info=function(){};var ff={},oC=null;function ug(){return oC=oC||new ui}function UE(n){Ii.call(this,ff.Ma,n)}function pf(n){const e=ug();ci(e,new UE(e,n))}function VE(n,e){Ii.call(this,ff.STAT_EVENT,n),this.stat=e}function $i(n){const e=ug();ci(e,new VE(e,n))}function ja(n,e){Ii.call(this,ff.Na,n),this.size=e}function Hc(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Mt.setTimeout(function(){n()},e)}ff.Ma="serverreachability",ji(UE,Ii),ff.STAT_EVENT="statevent",ji(VE,Ii),ff.Na="timingevent",ji(ja,Ii);var G_={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},aC={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function uC(){}function BE(){}uC.prototype.h=null;var cg,Mu={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function pd(){Ii.call(this,"d")}function jE(){Ii.call(this,"c")}function lg(){}function dg(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new og(this),this.P=SR,this.W=new j_(n=M_?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new $E}function $E(){this.i=null,this.g="",this.h=!1}ji(pd,Ii),ji(jE,Ii),ji(lg,uC),lg.prototype.g=function(){return new XMLHttpRequest},lg.prototype.i=function(){return{}},cg=new lg;var SR=45e3,hg={},W_={};function HE(n,e,t){n.K=1,n.v=gg(ea(e)),n.s=t,n.U=!0,GE(n,null)}function GE(n,e){n.F=Date.now(),fg(n),n.A=ea(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),PR(t.h,"t",r),n.C=0,t=n.l.H,n.h=new $E,n.g=aw(n.l,t?e:null,!n.s),0<n.O&&(n.L=new TR(bi(n.Ia,n,n.g),n.O)),H_(n.V,n.g,"readystatechange",n.gb),e=n.H?P_(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),pf(1),function(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var d="",f=u.split("&"),y=0;y<f.length;y++){var w=f[y].split("=");if(1<w.length){var D=w[0];w=w[1];var A=D.split("_");d=2<=A.length&&"type"==A[1]?d+(D+"=")+w+"&":d+(D+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function gd(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function WE(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=AR(n,t),o==W_){4==e&&(n.o=4,$i(14),r=!1),hf(n.j,n.m,null,"[Incomplete Response]");break}if(o==hg){n.o=4,$i(15),hf(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}hf(n.j,n.m,o,null),qE(n,o)}gd(n)&&o!=W_&&o!=hg&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,$i(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),qc(e),e.L=!0,$i(11))):(hf(n.j,n.m,t,"[Invalid Chunked Response]"),_d(n),pg(n))}function AR(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?W_:(t=Number(e.substring(t,r)),isNaN(t)?hg:(r+=1)+t>e.length?W_:(e=e.substr(r,t),n.C=r+t,e))}function fg(n){n.Y=Date.now()+n.P,md(n,n.P)}function md(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Hc(bi(n.eb,n),e)}function q_(n){n.B&&(Mt.clearTimeout(n.B),n.B=null)}function pg(n){0==n.l.G||n.I||rw(n.l,n)}function _d(n){q_(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,ME(n.W),iC(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function qE(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Y_(t.i,n)))if(t.I=n.N,!n.J&&Y_(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(w){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=Hc(bi(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;bg(t),wd(t)}Wc(t),$i(18)}if(1>=pC(t.i)&&t.ka){try{t.ka()}catch(w){}t.ka=void 0}}else zc(t,11)}else if((n.J||t.g==n)&&bg(t),!wE(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let w=o[e];if(t.U=w[0],w=w[1],2==t.G)if("c"==w[0]){t.J=w[1],t.la=w[2];const D=w[3];null!=D&&(t.ma=D,t.h.info("VER="+t.ma));const A=w[4];null!=A&&(t.za=A,t.h.info("SVER="+t.za));const M=w[5];null!=M&&"number"==typeof M&&0<M&&(t.K=r=1.5*M,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const j=n.g;if(j){const Y=j.g?j.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Y){var u=r.i;!u.g&&(gr(Y,"spdy")||gr(Y,"quic")||gr(Y,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(Q_(u,u.h),u.h=null))}if(r.D){const ye=j.g?j.g.getResponseHeader("X-HTTP-Session-Id"):null;ye&&(r.sa=ye,$n(r.F,r.D,ye))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var d=n;if((r=t).oa=ow(r,r.H?r.la:null,r.W),d.J){FR(r.i,d);var f=d,y=r.K;y&&f.setTimeout(y),f.B&&(q_(f),fg(f)),r.g=d}else Cd(r);0<t.l.length&&$u(t)}else"stop"!=w[0]&&"close"!=w[0]||zc(t,7);else 3==t.G&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?zc(t,7):ju(t):"noop"!=w[0]&&t.j&&t.j.wa(w),t.A=0)}pf(4)}catch(w){}}function zE(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(vE(n)||"string"==typeof n)hR(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(vE(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;o=(r=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(vE(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n)).length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function yd(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof yd)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Un(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Ou(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)Ou(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function Ou(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(et=dg.prototype).setTimeout=function(n){this.P=n},et.gb=function(n){n=n.target;const e=this.L;e&&3==Vu(n)?e.l():this.Ia(n)},et.Ia=function(n){try{if(n==this.g)e:{const D=Vu(this.g);var e=this.g.Da();const A=this.g.ba();if(!(3>D)&&(3!=D||M_||this.g&&(this.h.h||this.g.ga()||vC(this.g)))){this.I||4!=D||7==e||pf(8==e||0>=A?3:2),q_(this);var t=this.g.ba();this.N=t;t:if(gd(this)){var r=vC(this.g);n="";var o=r.length,u=4==Vu(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){_d(this),pg(this);var d="";break t}this.h.i=new Mt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==t,function(n,e,t,r,o,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.X,D,t),this.i){if(this.$&&!this.J){t:{if(this.g){var f,y=this.g;if((f=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!wE(f)){var w=f;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,$i(12),_d(this),pg(this);break e}hf(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,qE(this,t)}this.U?(WE(this,D,d),M_&&this.i&&3==D&&(H_(this.V,this.W,"tick",this.fb),this.W.start())):(hf(this.j,this.m,d,null),qE(this,d)),4==D&&_d(this),this.i&&!this.I&&(4==D?rw(this.l,this):(this.i=!1,fg(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,$i(12)):(this.o=0,$i(13)),_d(this),pg(this)}}}catch(D){}},et.fb=function(){if(this.g){var n=Vu(this.g),e=this.g.ga();this.C<e.length&&(q_(this),WE(this,n,e),this.i&&4!=n&&fg(this))}},et.cancel=function(){this.I=!0,_d(this)},et.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(pf(3),$i(17)),_d(this),this.o=2,pg(this)):md(this,this.Y-n)},(et=yd.prototype).R=function(){Un(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},et.T=function(){return Un(this),this.g.concat()},et.get=function(n,e){return Ou(this.h,n)?this.h[n]:e},et.set=function(n,e){Ou(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},et.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var RR=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Lu(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Lu){this.g=void 0!==e?e:n.g,KE(this,n.j),this.s=n.s,z_(this,n.i),K_(this,n.m),this.l=n.l,e=n.h;var t=new _g;t.i=e.i,e.g&&(t.g=new yd(e.g),t.h=e.h),ZE(this,t),this.o=n.o}else n&&(t=String(n).match(RR))?(this.g=!!e,KE(this,t[1]||"",!0),this.s=mg(t[2]||""),z_(this,t[3]||"",!0),K_(this,t[4]),this.l=mg(t[5]||"",!0),ZE(this,t[6]||"",!0),this.o=mg(t[7]||"")):(this.g=!!e,this.h=new _g(null,this.g))}function ea(n){return new Lu(n)}function KE(n,e,t){n.j=t?mg(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function z_(n,e,t){n.i=t?mg(e,!0):e}function K_(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function ZE(n,e,t){e instanceof _g?(n.h=e,function(n,e){e&&!n.j&&(Gc(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(fC(this,r),PR(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Uu(e,hC)),n.h=new _g(e,n.g))}function $n(n,e,t){n.h.set(e,t)}function gg(n){return $n(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function mg(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Uu(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,YE),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function YE(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Lu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Uu(e,QE,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Uu(e,QE,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Uu(t,"/"==t.charAt(0)?dC:lC,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Uu(t,NR)),n.join("")};var QE=/[#\/\?@]/g,lC=/[#\?:]/g,dC=/[#\?]/g,hC=/[#\?@]/g,NR=/#/g;function _g(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Gc(n){n.g||(n.g=new yd,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function fC(n,e){Gc(n),e=vd(n,e),Ou(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Ou((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Un(n)))}function JE(n,e){return Gc(n),e=vd(n,e),Ou(n.g.h,e)}function PR(n,e,t){fC(n,e),0<t.length&&(n.i=null,n.g.set(vd(n,e),zI(t)),n.h+=t.length)}function vd(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function OR(n){this.l=n||SM,n=Mt.PerformanceNavigationTiming?0<(n=Mt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Mt.g&&Mt.g.Ea&&Mt.g.Ea()&&Mt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(et=_g.prototype).add=function(n,e){Gc(this),this.i=null,n=vd(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},et.forEach=function(n,e){Gc(this),this.g.forEach(function(t,r){hR(t,function(o){n.call(e,o,r,this)},this)},this)},et.T=function(){Gc(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},et.R=function(n){Gc(this);var e=[];if("string"==typeof n)JE(this,n)&&(e=fR(e,this.g.get(vd(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=fR(e,n[t])}return e},et.set=function(n,e){return Gc(this),this.i=null,JE(this,n=vd(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},et.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},et.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var d=o;""!==r[u]&&(d+="="+encodeURIComponent(String(r[u]))),n.push(d)}}return this.i=n.join("&")};var SM=10;function Z_(n){return!!n.h||!!n.g&&n.g.size>=n.j}function pC(n){return n.h?1:n.g?n.g.size:0}function Y_(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Q_(n,e){n.g?n.g.add(e):n.h=e}function FR(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function _o(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return zI(n.i)}function gC(){}function AM(){this.g=new gC}function RM(n,e,t){const r=t||"";try{zE(n,function(o,u){let d=o;sf(o)&&(d=B_(o)),e.push(r+u+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function yg(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function gf(n){this.l=n.$b||null,this.j=n.ib||!1}function J_(n,e){ui.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=_C,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}OR.prototype.cancel=function(){if(this.i=_o(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},gC.prototype.stringify=function(n){return Mt.JSON.stringify(n,void 0)},gC.prototype.parse=function(n){return Mt.JSON.parse(n,void 0)},ji(gf,uC),gf.prototype.g=function(){return new J_(this.l,this.j)},gf.prototype.i=function(n){return function(){return n}}({}),ji(J_,ui);var _C=0;function XE(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function mf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,vg(n)}function vg(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(et=J_.prototype).open=function(n,e){if(this.readyState!=_C)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,vg(this)},et.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Mt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},et.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,mf(this)),this.readyState=_C},et.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,vg(this)),this.g&&(this.readyState=3,vg(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Mt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;XE(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},et.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?mf(this):vg(this),3==this.readyState&&XE(this)}},et.Ua=function(n){this.g&&(this.response=this.responseText=n,mf(this))},et.Ta=function(n){this.g&&(this.response=n,mf(this))},et.ha=function(){this.g&&mf(this)},et.setRequestHeader=function(n,e){this.v.append(n,e)},et.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},et.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(J_.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var ew=Mt.JSON.parse;function Ur(n){ui.call(this),this.headers=new yd,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=yC,this.K=this.L=!1}ji(Ur,ui);var yC="",LR=/^https?$/i,UR=["POST","PUT"];function BR(n){return"content-type"==n.toLowerCase()}function Eg(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Ed(n),Es(n)}function Ed(n){n.D||(n.D=!0,ci(n,"complete"),ci(n,"error"))}function tw(n){if(n.h&&void 0!==rf&&(!n.C[1]||4!=Vu(n)||2!=n.ba()))if(n.v&&4==Vu(n))OE(n.Fa,0,n);else if(ci(n,"readystatechange"),4==Vu(n)){n.h=!1;try{const f=n.ba();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===f){var o=String(n.H).match(RR)[1]||null;if(!o&&Mt.self&&Mt.self.location){var u=Mt.self.location.protocol;o=u.substr(0,u.length-1)}r=!LR.test(o?o.toLowerCase():"")}t=r}if(t)ci(n,"complete"),ci(n,"success");else{n.m=6;try{var d=2<Vu(n)?n.g.statusText:""}catch(y){d=""}n.j=d+" ["+n.ba()+"]",Ed(n)}}finally{Es(n)}}}function Es(n,e){if(n.g){_f(n);const t=n.g,r=n.C[0]?yE:null;n.g=null,n.C=null,e||ci(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function _f(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Mt.clearTimeout(n.A),n.A=null)}function Vu(n){return n.g?n.g.readyState:0}function vC(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case yC:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function yo(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function(n){let e="";return N_(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):$n(n,e,t))}function Bu(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Ci(n){this.za=0,this.l=[],this.h=new df,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Bu("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Bu("baseRetryDelayMs",5e3,n),this.$a=Bu("retryDelaySeedMs",1e4,n),this.Ya=Bu("forwardChannelMaxRetries",2,n),this.ra=Bu("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new OR(n&&n.concurrentRequestLimit),this.Ca=new AM,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function ju(n){if(Us(n),3==n.G){var e=n.V++,t=ea(n.F);$n(t,"SID",n.J),$n(t,"RID",e),$n(t,"TYPE","terminate"),$a(n,t),(e=new dg(n,n.h,e,void 0)).K=2,e.v=gg(ea(t)),t=!1,Mt.navigator&&Mt.navigator.sendBeacon&&(t=Mt.navigator.sendBeacon(e.v.toString(),"")),!t&&Mt.Image&&((new Image).src=e.v,t=!0),t||(e.g=aw(e.l,null),e.g.ea(e.v)),e.F=Date.now(),fg(e)}sw(n)}function wd(n){n.g&&(qc(n),n.g.cancel(),n.g=null)}function Us(n){wd(n),n.u&&(Mt.clearTimeout(n.u),n.u=null),bg(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Mt.clearTimeout(n.m),n.m=null)}function wg(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&$u(n)}function $u(n){Z_(n.i)||n.m||(n.m=!0,mo(n.Ha,n),n.C=0)}function bd(n,e){var t;t=e?e.m:n.V++;const r=ea(n.F);$n(r,"SID",n.J),$n(r,"RID",t),$n(r,"AID",n.U),$a(n,r),n.o&&n.s&&yo(r,n.o,n.s),t=new dg(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Id(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Q_(n.i,t),HE(t,r,e)}function $a(n,e){n.j&&zE({},function(t,r){$n(e,r,t)})}function Id(n,e,t){t=Math.min(n.l.length,t);var r=n.j?bi(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=o[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let f=!0;for(let y=0;y<t;y++){let w=o[y].h;const D=o[y].g;if(w-=u,0>w)u=Math.max(0,o[y].h-100),f=!1;else try{RM(D,d,"req"+w+"_")}catch(A){r&&r(D)}}if(f){r=d.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Cd(n){n.g||n.u||(n.Y=1,mo(n.Ga,n),n.A=0)}function Wc(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Hc(bi(n.Ga,n),iw(n,n.A)),n.A++,0))}function qc(n){null!=n.B&&(Mt.clearTimeout(n.B),n.B=null)}function Td(n){n.g=new dg(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=ea(n.oa);$n(e,"RID","rpc"),$n(e,"SID",n.J),$n(e,"CI",n.N?"0":"1"),$n(e,"AID",n.U),$a(n,e),$n(e,"TYPE","xmlhttp"),n.o&&n.s&&yo(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=gg(ea(e)),t.s=null,t.U=!0,GE(t,n)}function bg(n){null!=n.v&&(Mt.clearTimeout(n.v),n.v=null)}function rw(n,e){var t=null;if(n.g==e){bg(n),qc(n),n.g=null;var r=2}else{if(!Y_(n.i,e))return;t=e.D,FR(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;ci(r=ug(),new ja(r,t,e,o)),$u(n)}else Cd(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function(n,e){return!(pC(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Hc(bi(n.Ha,n,e),iw(n,n.C)),n.C++,0)))}(n,e)||2==r&&Wc(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:zc(n,5);break;case 4:zc(n,10);break;case 3:zc(n,6);break;default:zc(n,2)}}function iw(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function zc(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=bi(n.jb,n);t||(t=new Lu("//www.google.com/images/cleardot.gif"),Mt.location&&"http"==Mt.location.protocol||KE(t,"https"),gg(t)),function(n,e){const t=new df;if(Mt.Image){const r=new Image;r.onload=af(yg,t,r,"TestLoadImage: loaded",!0,e),r.onerror=af(yg,t,r,"TestLoadImage: error",!1,e),r.onabort=af(yg,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=af(yg,t,r,"TestLoadImage: timeout",!1,e),Mt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else $i(2);n.G=0,n.j&&n.j.va(e),sw(n),Us(n)}function sw(n){n.G=0,n.I=-1,n.j&&((0!=_o(n.i).length||0!=n.l.length)&&(n.i.i.length=0,zI(n.l),n.l.length=0),n.j.ua())}function ow(n,e,t){let r=function(n){return n instanceof Lu?ea(n):new Lu(n,void 0)}(t);if(""!=r.i)e&&z_(r,e+"."+r.i),K_(r,r.m);else{const o=Mt.location;r=function(n,e,t,r){var o=new Lu(null,void 0);return n&&KE(o,n),e&&z_(o,e),t&&K_(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&N_(n.aa,function(o,u){$n(r,u,o)}),t=n.sa,(e=n.D)&&t&&$n(r,e,t),$n(r,"VER",n.ma),$a(n,r),r}function aw(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ur(t&&n.Ba&&!n.qa?new gf({ib:!0}):n.qa)).L=n.H,e}function uw(){}function Ig(){if(Bc&&!(10<=Number(CE)))throw Error("Environmental error: no available transport.")}function Vs(n,e){ui.call(this),this.g=new Ci(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!wE(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!wE(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Dd(this)}function cw(n){pd.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function EC(){jE.call(this),this.status=1}function Dd(n){this.g=n}(et=Ur.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():cg.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:cg),this.g.onreadystatechange=bi(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void Eg(this,u)}n=t||"";const o=new yd(this.headers);r&&zE(r,function(u,d){o.set(d,u)}),r=function(n){e:{var e=BR;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=Mt.FormData&&n instanceof Mt.FormData,!(0<=dR(UR,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,d){this.g.setRequestHeader(d,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{_f(this),0<this.B&&((this.K=function(n){return Bc&&_R()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=bi(this.pa,this)):this.A=OE(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Eg(this,u)}},et.pa=function(){void 0!==rf&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ci(this,"timeout"),this.abort(8))},et.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ci(this,"complete"),ci(this,"abort"),Es(this))},et.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Es(this,!0)),Ur.Z.M.call(this)},et.Fa=function(){this.s||(this.F||this.v||this.l?tw(this):this.cb())},et.cb=function(){tw(this)},et.ba=function(){try{return 2<Vu(this)?this.g.status:-1}catch(n){return-1}},et.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},et.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),ew(e)}},et.Da=function(){return this.m},et.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(et=Ci.prototype).ma=8,et.G=1,et.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},et.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new dg(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=P_(u),Pu(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Id(this,o,e),$n(t=ea(this.F),"RID",n),$n(t,"CVER",22),this.D&&$n(t,"X-HTTP-Session-Id",this.D),$a(this,t),this.o&&u&&yo(t,this.o,u),Q_(this.i,o),this.Ra&&$n(t,"TYPE","init"),this.ja?($n(t,"$req",e),$n(t,"SID","null"),o.$=!0,HE(o,t,null)):HE(o,t,e),this.G=2}}else 3==this.G&&(n?bd(this,n):0==this.l.length||Z_(this.i)||bd(this))},et.Ga=function(){if(this.u=null,Td(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Hc(bi(this.bb,this),n)}},et.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,$i(10),wd(this),Td(this))},et.ab=function(){null!=this.v&&(this.v=null,wd(this),Wc(this),$i(19))},et.jb=function(n){n?(this.h.info("Successfully pinged google.com"),$i(2)):(this.h.info("Failed to ping google.com"),$i(1))},(et=uw.prototype).xa=function(){},et.wa=function(){},et.va=function(){},et.ua=function(){},et.Oa=function(){},Ig.prototype.g=function(n,e){return new Vs(n,e)},ji(Vs,ui),Vs.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),mo(bi(n.hb,n,e))),$i(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=ow(n,null,n.W),$u(n)},Vs.prototype.close=function(){ju(this.g)},Vs.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,wg(this.g,e)}else this.v?((e={}).__data__=B_(n),wg(this.g,e)):wg(this.g,n)},Vs.prototype.M=function(){this.g.j=null,delete this.j,ju(this.g),delete this.g,Vs.Z.M.call(this)},ji(cw,pd),ji(EC,jE),ji(Dd,uw),Dd.prototype.xa=function(){ci(this.g,"a")},Dd.prototype.wa=function(n){ci(this.g,new cw(n))},Dd.prototype.va=function(n){ci(this.g,new EC(n))},Dd.prototype.ua=function(){ci(this.g,"b")},Ig.prototype.createWebChannel=Ig.prototype.g,Vs.prototype.send=Vs.prototype.u,Vs.prototype.open=Vs.prototype.m,Vs.prototype.close=Vs.prototype.close,G_.NO_ERROR=0,G_.TIMEOUT=8,G_.HTTP_ERROR=6,aC.COMPLETE="complete",BE.EventType=Mu,Mu.OPEN="a",Mu.CLOSE="b",Mu.ERROR="c",Mu.MESSAGE="d",ui.prototype.listen=ui.prototype.N,Ur.prototype.listenOnce=Ur.prototype.O,Ur.prototype.getLastError=Ur.prototype.La,Ur.prototype.getLastErrorCode=Ur.prototype.Da,Ur.prototype.getStatus=Ur.prototype.ba,Ur.prototype.getResponseJson=Ur.prototype.Qa,Ur.prototype.getResponseText=Ur.prototype.ga,Ur.prototype.send=Ur.prototype.ea;var wC=wi.createWebChannelTransport=function(){return new Ig},jR=wi.getStatEventTarget=function(){return ug()},bC=wi.ErrorCode=G_,$R=wi.EventType=aC,IC=wi.Event=ff,CC=wi.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},TC=wi.FetchXmlHttpFactory=gf,X_=wi.WebChannel=BE,HR=wi.XhrIo=Ur;const GR="@firebase/firestore";class Ti{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ti.UNAUTHENTICATED=new Ti(null),Ti.GOOGLE_CREDENTIALS=new Ti("google-credentials-uid"),Ti.FIRST_PARTY=new Ti("first-party-uid"),Ti.MOCK_USER=new Ti("mock-user");let Sd="9.8.0";const Ad=new pt.Yd("@firebase/firestore");function DC(){return Ad.logLevel}function Ve(n,...e){if(Ad.logLevel<=pt.in.DEBUG){const t=e.map(lw);Ad.debug(`Firestore (${Sd}): ${n}`,...t)}}function Hr(n,...e){if(Ad.logLevel<=pt.in.ERROR){const t=e.map(lw);Ad.error(`Firestore (${Sd}): ${n}`,...t)}}function Cg(n,...e){if(Ad.logLevel<=pt.in.WARN){const t=e.map(lw);Ad.warn(`Firestore (${Sd}): ${n}`,...t)}}function lw(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function nt(n="Unexpected state"){const e=`FIRESTORE (${Sd}) INTERNAL ASSERTION FAILED: `+n;throw Hr(e),new Error(e)}function St(n,e){n||nt()}function Ye(n,e){return n}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends F.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class li{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class dw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class NM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ti.UNAUTHENTICATED))}shutdown(){}}class qR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class vf{constructor(e){this.t=e,this.currentUser=Ti.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=w=>this.i!==o?(o=this.i,t(w)):Promise.resolve();let d=new li;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new li,e.enqueueRetryable(()=>u(this.currentUser))};const f=()=>{const w=d;e.enqueueRetryable((0,Ie.Z)(function*(){yield w.promise,yield u(r.currentUser)}))},y=w=>{Ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(w=>y(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?y(w):(Ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new li)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(St("string"==typeof r.accessToken),new dw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return St(null===e||"string"==typeof e),new Ti(e)}}class zR{constructor(e,t,r){this.type="FirstParty",this.user=Ti.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class SC{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new zR(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ti.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class AC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class RC{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.p;return this.p=u.token,Ve("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?o(u):Ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(St("string"==typeof t.token),this.p=t.token,new AC(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Bs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function xC(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Bs.A=-1;class NC{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=xC(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function $t(n,e){return n<e?-1:n>e?1:0}function Ef(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function PC(n){return n+"\0"}class Ir{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Pe(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Pe(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Pe(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ir.fromMillis(Date.now())}static fromDate(e){return Ir.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Ir(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?$t(this.nanoseconds,e.nanoseconds):$t(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class It{constructor(e){this.timestamp=e}static fromTimestamp(e){return new It(e)}static min(){return new It(new Ir(0,0))}static max(){return new It(new Ir(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function kC(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Kc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function fw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Rd{constructor(e,t,r){void 0===t?t=0:t>e.length&&nt(),void 0===r?r=e.length-t:r>e.length-t&&nt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Rd.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Rd?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),d=t.get(o);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class fn extends Rd{construct(e,t,r){return new fn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Pe(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new fn(t)}static emptyPath(){return new fn([])}}const pw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gr extends Rd{construct(e,t,r){return new Gr(e,t,r)}static isValidIdentifier(e){return pw.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Gr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Pe(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const f=e[o];if("\\"===f){if(o+1===e.length)throw new Pe(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if("\\"!==y&&"."!==y&&"`"!==y)throw new Pe(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,o+=2}else"`"===f?(d=!d,o++):"."!==f||d?(r+=f,o++):(u(),o++)}if(u(),d)throw new Pe(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Gr(t)}static emptyPath(){return new Gr([])}}class Tg{constructor(e){this.fields=e,e.sort(Gr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ef(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Wr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Wr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Wr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $t(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wr.EMPTY_BYTE_STRING=new Wr("");const gw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ha(n){if(St(!!n),"string"==typeof n){let e=0;const t=gw.exec(n);if(St(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:mr(n.seconds),nanos:mr(n.nanos)}}function mr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Hu(n){return"string"==typeof n?Wr.fromBase64String(n):Wr.fromUint8Array(n)}function Sg(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function mw(n){const e=n.mapValue.fields.__previous_value__;return Sg(e)?mw(e):e}function ey(n){const e=Ha(n.mapValue.fields.__local_write_time__.timestampValue);return new Ir(e.seconds,e.nanos)}class KR{constructor(e,t,r,o,u,d,f,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=f,this.useFetchStreams=y}}class Ga{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ga("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ga&&e.projectId===this.projectId&&e.database===this.database}}function wf(n){return null==n}function Ag(n){return 0===n&&1/n==-1/0}function _w(n){return"number"==typeof n&&Number.isInteger(n)&&!Ag(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Ge{constructor(e){this.path=e}static fromPath(e){return new Ge(fn.fromString(e))}static fromName(e){return new Ge(fn.fromString(e).popFirst(5))}static empty(){return new Ge(fn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===fn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return fn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ge(new fn(e.slice()))}}const Gu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},bf={nullValue:"NULL_VALUE"};function Wu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Sg(n)?4:ww(n)?9007199254740991:10:nt()}function ta(n,e){if(n===e)return!0;const t=Wu(n);if(t!==Wu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ey(n).isEqual(ey(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Ha(r.timestampValue),d=Ha(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Hu(n.bytesValue).isEqual(Hu(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return mr(r.geoPointValue.latitude)===mr(o.geoPointValue.latitude)&&mr(r.geoPointValue.longitude)===mr(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return mr(r.integerValue)===mr(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=mr(r.doubleValue),d=mr(o.doubleValue);return u===d?Ag(u)===Ag(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return Ef(n.arrayValue.values||[],e.arrayValue.values||[],ta);case 10:return function(r,o){const u=r.mapValue.fields||{},d=o.mapValue.fields||{};if(kC(u)!==kC(d))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(void 0===d[f]||!ta(u[f],d[f])))return!1;return!0}(n,e);default:return nt()}var o}function Rg(n,e){return void 0!==(n.values||[]).find(t=>ta(t,e))}function qu(n,e){if(n===e)return 0;const t=Wu(n),r=Wu(e);if(t!==r)return $t(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return $t(n.booleanValue,e.booleanValue);case 2:return function(o,u){const d=mr(o.integerValue||o.doubleValue),f=mr(u.integerValue||u.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1}(n,e);case 3:return yw(n.timestampValue,e.timestampValue);case 4:return yw(ey(n),ey(e));case 5:return $t(n.stringValue,e.stringValue);case 6:return function(o,u){const d=Hu(o),f=Hu(u);return d.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const d=o.split("/"),f=u.split("/");for(let y=0;y<d.length&&y<f.length;y++){const w=$t(d[y],f[y]);if(0!==w)return w}return $t(d.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const d=$t(mr(o.latitude),mr(u.latitude));return 0!==d?d:$t(mr(o.longitude),mr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const d=o.values||[],f=u.values||[];for(let y=0;y<d.length&&y<f.length;++y){const w=qu(d[y],f[y]);if(w)return w}return $t(d.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===Gu.mapValue&&u===Gu.mapValue)return 0;if(o===Gu.mapValue)return 1;if(u===Gu.mapValue)return-1;const d=o.fields||{},f=Object.keys(d),y=u.fields||{},w=Object.keys(y);f.sort(),w.sort();for(let D=0;D<f.length&&D<w.length;++D){const A=$t(f[D],w[D]);if(0!==A)return A;const M=qu(d[f[D]],y[w[D]]);if(0!==M)return M}return $t(f.length,w.length)}(n.mapValue,e.mapValue);default:throw nt()}}function yw(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return $t(n,e);const t=Ha(n),r=Ha(e),o=$t(t.seconds,r.seconds);return 0!==o?o:$t(t.nanos,r.nanos)}function Zc(n){return vw(n)}function vw(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Ha(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Hu(n.bytesValue).toBase64():"referenceValue"in n?Ge.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=vw(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const f of o)d?d=!1:u+=",",u+=`${f}:${vw(r.fields[f])}`;return u+"}"}(n.mapValue):nt();var e}function xd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ew(n){return!!n&&"integerValue"in n}function xg(n){return!!n&&"arrayValue"in n}function ty(n){return!!n&&"nullValue"in n}function ny(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ng(n){return!!n&&"mapValue"in n}function If(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Kc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=If(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=If(n.arrayValue.values[t]);return e}return Object.assign({},n)}function ww(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function MC(n){return"nullValue"in n?bf:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?xd(Ga.empty(),Ge.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:nt()}function OC(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?xd(Ga.empty(),Ge.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Gu:nt()}function bw(n,e){const t=qu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Iw(n,e){const t=qu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Di{constructor(e){this.value=e}static empty(){return new Di({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ng(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=If(t)}setAll(e){let t=Gr.emptyPath(),r={},o=[];e.forEach((d,f)=>{if(!t.isImmediateParentOf(f)){const y=this.getFieldsMap(t);this.applyChanges(y,r,o),r={},o=[],t=f.popLast()}d?r[f.lastSegment()]=If(d):o.push(f.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());Ng(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ta(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Ng(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Kc(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new Di(If(this.value))}}function ZR(n){const e=[];return Kc(n.fields,(t,r)=>{const o=new Gr([t]);if(Ng(r)){const u=ZR(r.mapValue).fields;if(0===u.length)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new Tg(e)}class Hn{constructor(e,t,r,o,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=d}static newInvalidDocument(e){return new Hn(e,0,It.min(),It.min(),Di.empty(),0)}static newFoundDocument(e,t,r){return new Hn(e,1,t,It.min(),r,0)}static newNoDocument(e,t){return new Hn(e,2,t,It.min(),Di.empty(),0)}static newUnknownDocument(e,t){return new Hn(e,3,t,It.min(),Di.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Di.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Di.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Hn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ry{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function iy(n){return n.fields.find(e=>2===e.kind)}function Nd(n){return n.fields.filter(e=>2!==e.kind)}ry.UNKNOWN_ID=-1;class _r{constructor(e,t){this.fieldPath=e,this.kind=t}}class Cf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Cf(0,vo.min())}}function FC(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=It.fromTimestamp(1e9===r?new Ir(t+1,0):new Ir(t,r));return new vo(o,Ge.empty(),e)}function YR(n){return new vo(n.readTime,n.key,-1)}class vo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new vo(It.min(),Ge.empty(),-1)}static max(){return new vo(It.max(),Ge.empty(),-1)}}function LC(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ge.comparator(n.documentKey,e.documentKey),0!==t?t:$t(n.largestBatchId,e.largestBatchId))}class yr{constructor(e,t){this.comparator=e,this.root=t||vr.EMPTY}insert(e,t){return new yr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,vr.BLACK,null,null))}remove(e){return new yr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Pg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Pg(this.root,e,this.comparator,!1)}getReverseIterator(){return new Pg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Pg(this.root,e,this.comparator,!0)}}class Pg{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vr{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:vr.RED,this.left=null!=o?o:vr.EMPTY,this.right=null!=u?u:vr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new vr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return vr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return vr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw nt();const e=this.left.check();if(e!==this.right.check())throw nt();return e+(this.isRed()?0:1)}}vr.EMPTY=null,vr.RED=!0,vr.BLACK=!1,vr.EMPTY=new class{constructor(){this.size=0}get key(){throw nt()}get value(){throw nt()}get color(){throw nt()}get left(){throw nt()}get right(){throw nt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new vr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Vn{constructor(e){this.comparator=e,this.data=new yr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new UC(this.data.getIterator())}getIteratorFrom(e){return new UC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Vn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Vn(this.comparator);return t.data=e,t}}class UC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Pd(n){return n.hasNext()?n.getNext():void 0}class QR{constructor(e,t=null,r=[],o=[],u=null,d=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=f,this.P=null}}function Cw(n,e=null,t=[],r=[],o=null,u=null,d=null){return new QR(n,e,t,r,o,u,d)}function Tf(n){const e=Ye(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+Zc(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),wf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Zc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Zc(r)).join(",")),e.P=t}return e.P}function Df(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!GC(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!ta(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Dw(n.startAt,e.startAt)&&Dw(n.endAt,e.endAt)}function js(n){return Ge.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function sy(n,e){return n.filters.filter(t=>t instanceof Ln&&t.field.isEqual(e))}function BC(n,e,t){let r=bf,o=!0;for(const u of sy(n,e)){let d=bf,f=!0;switch(u.op){case"<":case"<=":d=MC(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,f=!1;break;case"!=":case"not-in":d=bf}bw({value:r,inclusive:o},{value:d,inclusive:f})<0&&(r=d,o=f)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];bw({value:r,inclusive:o},{value:d,inclusive:t.inclusive})<0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}function na(n,e,t){let r=Gu,o=!0;for(const u of sy(n,e)){let d=Gu,f=!0;switch(u.op){case">=":case">":d=OC(u.value),f=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,f=!1;break;case"!=":case"not-in":d=Gu}Iw({value:r,inclusive:o},{value:d,inclusive:f})>0&&(r=d,o=f)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];Iw({value:r,inclusive:o},{value:d,inclusive:t.inclusive})>0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}class Ln extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new ra(e,t,r):"array-contains"===t?new JR(e,r):"in"===t?new XR(e,r):"not-in"===t?new ex(e,r):"array-contains-any"===t?new Tw(e,r):new Ln(e,t,r)}static V(e,t,r){return"in"===t?new jC(e,r):new $C(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(qu(t,this.value)):null!==t&&Wu(this.value)===Wu(t)&&this.v(qu(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return nt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class ra extends Ln{constructor(e,t,r){super(e,t,r),this.key=Ge.fromName(r.referenceValue)}matches(e){const t=Ge.comparator(e.key,this.key);return this.v(t)}}class jC extends Ln{constructor(e,t){super(e,"in",t),this.keys=HC(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class $C extends Ln{constructor(e,t){super(e,"not-in",t),this.keys=HC(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function HC(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ge.fromName(r.referenceValue))}class JR extends Ln{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return xg(t)&&Rg(t.arrayValue,this.value)}}class XR extends Ln{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Rg(this.value.arrayValue,t)}}class ex extends Ln{constructor(e,t){super(e,"not-in",t)}matches(e){if(Rg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Rg(this.value.arrayValue,t)}}class Tw extends Ln{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!xg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Rg(this.value.arrayValue,r))}}class Eo{constructor(e,t){this.position=e,this.inclusive=t}}class Sf{constructor(e,t="asc"){this.field=e,this.dir=t}}function GC(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function WC(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],d=n.position[o];if(r=u.field.isKeyField()?Ge.comparator(Ge.fromName(d.referenceValue),t.key):qu(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function Dw(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ta(n.position[t],e.position[t]))return!1;return!0}class Wa{constructor(e,t=null,r=[],o=[],u=null,d="F",f=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=f,this.endAt=y,this.D=null,this.C=null}}function kg(n,e,t,r,o,u,d,f){return new Wa(n,e,t,r,o,u,d,f)}function Af(n){return new Wa(n)}function oy(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Mg(n){for(const e of n.filters)if(e.S())return e.field;return null}function Og(n){return null!==n.collectionGroup}function kd(n){const e=Ye(n);if(null===e.D){e.D=[];const t=Mg(e),r=oy(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Sf(t)),e.D.push(new Sf(Gr.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Sf(Gr.keyField(),u))}}}return e.D}function $s(n){const e=Ye(n);if(!e.C)if("F"===e.limitType)e.C=Cw(e.path,e.collectionGroup,kd(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of kd(e))t.push(new Sf(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Eo(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new Eo(e.startAt.position,e.startAt.inclusive):null;e.C=Cw(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.C}function Sw(n,e,t){return new Wa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Rf(n,e){return Df($s(n),$s(e))&&n.limitType===e.limitType}function Aw(n){return`${Tf($s(n))}|lt:${n.limitType}`}function ay(n){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Zc(r.value)}`;var r}).join(", ")}]`),wf(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Zc(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Zc(t)).join(",")),`Target(${e})`}($s(n))}; limitType=${n.limitType})`}function uy(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Ge.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,d){const f=WC(o,u,d);return o.inclusive?f<=0:f<0}(t.startAt,kd(t),r)||t.endAt&&!function(o,u,d){const f=WC(o,u,d);return o.inclusive?f>=0:f>0}(t.endAt,kd(t),r)));var t,r}function Rw(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function zC(n){return(e,t)=>{let r=!1;for(const o of kd(n)){const u=tx(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function tx(n,e,t){const r=n.field.isKeyField()?Ge.comparator(e.key,t.key):function(o,u,d){const f=u.data.field(o),y=d.data.field(o);return null!==f&&null!==y?qu(f,y):nt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return nt()}}function KC(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ag(e)?"-0":e}}function ZC(n){return{integerValue:""+n}}function YC(n,e){return _w(e)?ZC(e):KC(n,e)}class cy{constructor(){this._=void 0}}function nx(n,e,t){return n instanceof xf?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof Md?JC(n,e):n instanceof Od?XC(n,e):function(r,o){const u=QC(r,o),d=eT(u)+eT(r.k);return Ew(u)&&Ew(r.k)?ZC(d):KC(r.M,d)}(n,e)}function rx(n,e,t){return n instanceof Md?JC(n,e):n instanceof Od?XC(n,e):t}function QC(n,e){return n instanceof Nf?Ew(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class xf extends cy{}class Md extends cy{constructor(e){super(),this.elements=e}}function JC(n,e){const t=tT(e);for(const r of n.elements)t.some(o=>ta(o,r))||t.push(r);return{arrayValue:{values:t}}}class Od extends cy{constructor(e){super(),this.elements=e}}function XC(n,e){let t=tT(e);for(const r of n.elements)t=t.filter(o=>!ta(o,r));return{arrayValue:{values:t}}}class Nf extends cy{constructor(e,t){super(),this.M=e,this.k=t}}function eT(n){return mr(n.integerValue||n.doubleValue)}function tT(n){return xg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Fg{constructor(e,t){this.field=e,this.transform=t}}class rT{constructor(e,t){this.version=e,this.transformResults=t}}class Cr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Cr}static exists(e){return new Cr(void 0,e)}static updateTime(e){return new Cr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Lg(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Ug{}function iT(n,e,t){n instanceof Pf?function(r,o,u){const d=r.value.clone(),f=aT(r.fieldTransforms,o,u.transformResults);d.setAll(f),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof Hs?function(r,o,u){if(!Lg(r.precondition,o))return void o.convertToUnknownDocument(u.version);const d=aT(r.fieldTransforms,o,u.transformResults),f=o.data;f.setAll(oT(r)),f.setAll(d),o.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function ly(n,e,t){var o;n instanceof Pf?function(r,o,u){if(!Lg(r.precondition,o))return;const d=r.value.clone(),f=Fd(r.fieldTransforms,u,o);d.setAll(f),o.convertToFoundDocument(dy(o),d).setHasLocalMutations()}(n,e,t):n instanceof Hs?function(r,o,u){if(!Lg(r.precondition,o))return;const d=Fd(r.fieldTransforms,u,o),f=o.data;f.setAll(oT(r)),f.setAll(d),o.convertToFoundDocument(dy(o),f).setHasLocalMutations()}(n,e,t):Lg(n.precondition,o=e)&&o.convertToNoDocument(It.min())}function sT(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=QC(r.transform,o||null);null!=u&&(null==t&&(t=Di.empty()),t.set(r.field,u))}return t||null}function xw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Ef(t,r,(o,u)=>function(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Md&&r instanceof Md||t instanceof Od&&r instanceof Od?Ef(t.elements,r.elements,ta):t instanceof Nf&&r instanceof Nf?ta(t.k,r.k):t instanceof xf&&r instanceof xf);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function dy(n){return n.isFoundDocument()?n.version:It.min()}class Pf extends Ug{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class Hs extends Ug{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}}function oT(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function aT(n,e,t){const r=new Map;St(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],d=u.transform,f=e.data.field(u.field);r.set(u.field,rx(d,f,t[o]))}return r}function Fd(n,e,t){const r=new Map;for(const o of n){const u=o.transform,d=t.data.field(o.field);r.set(o.field,nx(u,d,e))}return r}class hy extends Ug{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Vg extends Ug{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class PM{constructor(e){this.count=e}}var Tr,an;function ix(n){switch(n){default:return nt();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0}}function _t(n){if(void 0===n)return Hr("GRPC error has no .code"),ge.UNKNOWN;switch(n){case Tr.OK:return ge.OK;case Tr.CANCELLED:return ge.CANCELLED;case Tr.UNKNOWN:return ge.UNKNOWN;case Tr.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case Tr.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case Tr.INTERNAL:return ge.INTERNAL;case Tr.UNAVAILABLE:return ge.UNAVAILABLE;case Tr.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case Tr.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case Tr.NOT_FOUND:return ge.NOT_FOUND;case Tr.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case Tr.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case Tr.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case Tr.ABORTED:return ge.ABORTED;case Tr.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case Tr.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case Tr.DATA_LOSS:return ge.DATA_LOSS;default:return nt()}}(an=Tr||(Tr={}))[an.OK=0]="OK",an[an.CANCELLED=1]="CANCELLED",an[an.UNKNOWN=2]="UNKNOWN",an[an.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",an[an.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",an[an.NOT_FOUND=5]="NOT_FOUND",an[an.ALREADY_EXISTS=6]="ALREADY_EXISTS",an[an.PERMISSION_DENIED=7]="PERMISSION_DENIED",an[an.UNAUTHENTICATED=16]="UNAUTHENTICATED",an[an.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",an[an.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",an[an.ABORTED=10]="ABORTED",an[an.OUT_OF_RANGE=11]="OUT_OF_RANGE",an[an.UNIMPLEMENTED=12]="UNIMPLEMENTED",an[an.INTERNAL=13]="INTERNAL",an[an.UNAVAILABLE=14]="UNAVAILABLE",an[an.DATA_LOSS=15]="DATA_LOSS";class Yc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Kc(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return fw(this.inner)}size(){return this.innerSize}}const sx=new yr(Ge.comparator);function wo(){return sx}const fy=new yr(Ge.comparator);function Nw(...n){let e=fy;for(const t of n)e=e.insert(t.key,t);return e}function Qc(){return new Yc(n=>n.toString(),(n,e)=>n.isEqual(e))}const py=new yr(Ge.comparator),Er=new Vn(Ge.comparator);function Sn(...n){let e=Er;for(const t of n)e=e.add(t);return e}const uT=new Vn($t);function kf(){return uT}class Bg{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Mf.createSynthesizedTargetChangeForCurrentChange(e,t)),new Bg(It.min(),r,kf(),wo(),Sn())}}class Mf{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Mf(Wr.EMPTY_BYTE_STRING,t,Sn(),Sn(),Sn())}}class jg{constructor(e,t,r,o){this.O=e,this.removedTargetIds=t,this.key=r,this.F=o}}class Pw{constructor(e,t){this.targetId=e,this.$=t}}class kw{constructor(e,t,r=Wr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class cT{constructor(){this.B=0,this.L=Of(),this.U=Wr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=Sn(),t=Sn(),r=Sn();return this.L.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:nt()}}),new Mf(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=Of()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class ox{constructor(e){this.nt=e,this.st=new Map,this.it=wo(),this.rt=lT(),this.ot=new Vn($t)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:nt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,o)=>{this.ft(o)&&t(o)})}_t(e){const t=e.targetId,r=e.$.count,o=this.wt(t);if(o){const u=o.target;if(js(u))if(0===r){const d=new Ge(u.path);this.ct(t,d,Hn.newNoDocument(d,It.min()))}else St(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,d)=>{const f=this.wt(d);if(f){if(u.current&&js(f.target)){const y=new Ge(f.target.path);null!==this.it.get(y)||this.It(d,y)||this.ct(d,y,Hn.newNoDocument(y,e))}u.j&&(t.set(d,u.H()),u.J())}});let r=Sn();this.rt.forEach((u,d)=>{let f=!0;d.forEachWhile(y=>{const w=this.wt(y);return!w||2===w.purpose||(f=!1,!1)}),f&&(r=r.add(u))}),this.it.forEach((u,d)=>d.setReadTime(e));const o=new Bg(e,t,this.ot,this.it,r);return this.it=wo(),this.rt=lT(),this.ot=new Vn($t),o}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,t)?o.Y(t,1):o.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new cT,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Vn($t),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Ve("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new cT),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function lT(){return new yr(Ge.comparator)}function Of(){return new yr(Ge.comparator)}const ax={asc:"ASCENDING",desc:"DESCENDING"},ux={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class cx{constructor(e,t){this.databaseId=e,this.N=t}}function Jc(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Mw(n,e){return n.N?e.toBase64():e.toUint8Array()}function dT(n,e){return Jc(n,e.toTimestamp())}function qr(n){return St(!!n),It.fromTimestamp(function(e){const t=Ha(e);return new Ir(t.seconds,t.nanos)}(n))}function Ow(n,e){return(t=n,new fn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Ff(n){const e=fn.fromString(n);return St(yT(e)),e}function zu(n,e){return Ow(n.databaseId,e.path)}function qa(n,e){const t=Ff(e);if(t.get(1)!==n.databaseId.projectId)throw new Pe(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Pe(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ge(Lw(t))}function Fw(n,e){return Ow(n.databaseId,e)}function hT(n){const e=Ff(n);return 4===e.length?fn.emptyPath():Lw(e)}function Lf(n){return new fn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Lw(n){return St(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Uw(n,e,t){return{name:zu(n,e),fields:t.value.mapValue.fields}}function fT(n,e,t){const r=qa(n,e.name),o=qr(e.updateTime),u=new Di({mapValue:{fields:e.fields}}),d=Hn.newFoundDocument(r,o,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function $g(n,e){let t;if(e instanceof Pf)t={update:Uw(n,e.key,e.value)};else if(e instanceof hy)t={delete:zu(n,e.key)};else if(e instanceof Hs)t={update:Uw(n,e.key,e.data),updateMask:mx(e.fieldMask)};else{if(!(e instanceof Vg))return nt();t={verify:zu(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const d=u.transform;if(d instanceof xf)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Md)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Od)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Nf)return{fieldPath:u.field.canonicalString(),increment:d.k};throw nt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:dT(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:nt()),t;var o}function gT(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Cr.updateTime(qr(o.updateTime)):void 0!==o.exists?Cr.exists(o.exists):Cr.none():Cr.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,d){let f=null;"setToServerValue"in d?(St("REQUEST_TIME"===d.setToServerValue),f=new xf):"appendMissingElements"in d?f=new Md(d.appendMissingElements.values||[]):"removeAllFromArray"in d?f=new Od(d.removeAllFromArray.values||[]):"increment"in d?f=new Nf(u,d.increment):nt();const y=Gr.fromServerFormat(d.fieldPath);return new Fg(y,f)}(n,o)):[];var o;if(e.update){const o=qa(n,e.update.name),u=new Di({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new Tg((e.updateMask.fieldPaths||[]).map(w=>Gr.fromServerFormat(w)));return new Hs(o,u,d,t,r)}return new Pf(o,u,t,r)}if(e.delete){const o=qa(n,e.delete);return new hy(o,t)}if(e.verify){const o=qa(n,e.verify);return new Vg(o,t)}return nt()}function dx(n,e){return{documents:[Fw(n,e.path)]}}function hx(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Fw(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Fw(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(y){if(0===y.length)return;const w=y.map(D=>function(A){if("=="===A.op){if(ny(A.value))return{unaryFilter:{field:za(A.field),op:"IS_NAN"}};if(ty(A.value))return{unaryFilter:{field:za(A.field),op:"IS_NULL"}}}else if("!="===A.op){if(ny(A.value))return{unaryFilter:{field:za(A.field),op:"IS_NOT_NAN"}};if(ty(A.value))return{unaryFilter:{field:za(A.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:za(A.field),op:_T(A.op),value:A.value}}}(D));return 1===w.length?w[0]:{compositeFilter:{op:"AND",filters:w}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(y){if(0!==y.length)return y.map(w=>{return{field:za((D=w).field),direction:fx(D.dir)};var D})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(w=e.limit,n.N||wf(w)?w:{value:w});var w,f,y;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(y=e.endAt).inclusive,values:y.position}),t}function Vw(n){let e=hT(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){St(1===r);const D=t.from[0];D.allDescendants?o=D.collectionId:e=e.child(D.collectionId)}let u=[];t.where&&(u=mT(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(D=>{return new Sf(Uf((A=D).field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction));var A}));let f=null;t.limit&&(f=function(D){let A;return A="object"==typeof D?D.value:D,wf(A)?null:A}(t.limit));let y=null;var D;t.startAt&&(y=new Eo((D=t.startAt).values||[],!!D.before));let w=null;return t.endAt&&(w=function(D){return new Eo(D.values||[],!D.before)}(t.endAt)),kg(e,o,d,u,f,"F",y,w)}function mT(n){return n?void 0!==n.unaryFilter?[gx(n)]:void 0!==n.fieldFilter?[px(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>mT(e)).reduce((e,t)=>e.concat(t)):nt():[]}function fx(n){return ax[n]}function _T(n){return ux[n]}function za(n){return{fieldPath:n.canonicalString()}}function Uf(n){return Gr.fromServerFormat(n.fieldPath)}function px(n){return Ln.create(Uf(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return nt()}}(n.fieldFilter.op),n.fieldFilter.value)}function gx(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Uf(n.unaryFilter.field);return Ln.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Uf(n.unaryFilter.field);return Ln.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Uf(n.unaryFilter.field);return Ln.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Uf(n.unaryFilter.field);return Ln.create(o,"!=",{nullValue:"NULL_VALUE"});default:return nt()}}function mx(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function yT(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Hi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=vT(e)),e=_x(n.get(t),e);return vT(e)}function _x(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function vT(n){return n+"\x01\x01"}function ss(n){const e=n.length;if(St(e>=2),2===e)return St("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),fn.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&nt(),n.charAt(d+1)){case"\x01":const f=n.substring(u,d);let y;0===o.length?y=f:(o+=f,y=o,o=""),r.push(y);break;case"\x10":o+=n.substring(u,d),o+="\0";break;case"\x11":o+=n.substring(u,d+1);break;default:nt()}u=d+2}return new fn(r)}const ET=["userId","batchId"];function Hg(n,e){return[n,Hi(e)]}function wT(n,e,t){return[n,Hi(e),t]}const bT={},yx=["prefixPath","collectionGroup","readTime","documentId"],IT=["prefixPath","collectionGroup","documentId"],vx=["collectionGroup","readTime","prefixPath","documentId"],Bw=["canonicalId","targetId"],Ex=["targetId","path"],CT=["path","targetId"],TT=["collectionId","parent"],wx=["indexId","uid"],bx=["uid","sequenceNumber"],Ix=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],jw=["indexId","uid","orderedDocumentKey"],Cx=["userId","collectionPath","documentId"],DT=["userId","collectionPath","largestBatchId"],Tx=["userId","collectionGroup","largestBatchId"],ST=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Dx=[...ST,"documentOverlays"],AT=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Sx=[...AT,"indexConfiguration","indexState","indexEntries"],RT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&nt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new me((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof me?t:me.resolve(t)}catch(t){return me.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):me.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):me.reject(t)}static resolve(e){return new me((t,r)=>{t(e)})}static reject(e){return new me((t,r)=>{r(e)})}static waitFor(e){return new me((t,r)=>{let o=0,u=0,d=!1;e.forEach(f=>{++o,f.next(()=>{++u,d&&u===o&&t()},y=>r(y))}),d=!0,u===o&&t()})}static or(e){let t=me.resolve(!1);for(const r of e)t=t.next(o=>o?me.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}}class Gg{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new li,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Wg(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const o=qg(r.target.error);this.At.reject(new Wg(e,o))}}static open(e,t,r,o){try{return new Gg(t,e.transaction(o,r))}catch(u){throw new Wg(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Ve("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Rx(t)}}class bo{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===bo.Vt((0,F.z$)())&&Hr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ve("SimpleDb","Removing database:",e),Ld(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,F.hl)())return!1;if(bo.St())return!0;const e=(0,F.z$)(),t=bo.Vt(e),r=0<t&&t<10,o=bo.Dt(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,Ie.Z)(function*(){return t.db||(Ve("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{o(new Wg(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const f=d.target.error;o("VersionError"===f.name?new Pe(ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Pe(ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new Wg(e,f))},u.onupgradeneeded=d=>{Ve("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.Pt.kt(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{Ve("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,Ie.Z)(function*(){const d="readonly"===t;let f=0;for(;;){++f;try{u.db=yield u.Nt(e);const y=Gg.open(u.db,e,d?"readonly":"readwrite",r),w=o(y).next(D=>(y.bt(),D)).catch(D=>(y.abort(D),me.reject(D))).toPromise();return w.catch(()=>{}),yield y.Rt,w}catch(y){const w="FirebaseError"!==y.name&&f<3;if(Ve("SimpleDb","Transaction failed with error:",y.message,"Retrying:",w),u.close(),!w)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Ax{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Ld(this.Ft.delete())}}class Wg extends Pe{constructor(e,t){super(ge.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Xc(n){return"IndexedDbTransactionError"===n.name}class Rx{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ve("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ve("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ld(r)}add(e){return Ve("SimpleDb","ADD",this.store.name,e,e),Ld(this.store.add(e))}get(e){return Ld(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ve("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ve("SimpleDb","DELETE",this.store.name,e),Ld(this.store.delete(e))}count(){return Ve("SimpleDb","COUNT",this.store.name),Ld(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.Kt(o,(d,f)=>{u.push(f)}).next(()=>u)}{const o=this.store.getAll(r.range);return new me((u,d)=>{o.onerror=f=>{d(f.target.error)},o.onsuccess=f=>{u(f.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new me((o,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}Qt(e,t){Ve("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const o=this.cursor(r);return this.Kt(o,(u,d,f)=>f.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Kt(o,t)}zt(e){const t=this.cursor({});return new me((r,o)=>{t.onerror=u=>{const d=qg(u.target.error);o(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(f=>{f?d.continue():r()}):r()}})}Kt(e,t){const r=[];return new me((o,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const f=d.target.result;if(!f)return void o();const y=new Ax(f),w=t(f.primaryKey,f.value,y);if(w instanceof me){const D=w.catch(A=>(y.done(),me.reject(A)));r.push(D)}y.isDone?o():null===y.Lt?f.continue():f.continue(y.Lt)}}).next(()=>me.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ld(n){return new me((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=qg(r.target.error);t(o)}})}let NT=!1;function qg(n){const e=bo.Vt((0,F.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return NT||(NT=!0,setTimeout(()=>{throw r},0)),r}}return n}class my extends xT{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function zr(n,e){const t=Ye(n);return bo.xt(t.Ht,e)}class zg{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&iT(u,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&ly(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&ly(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(It.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Sn())}isEqual(e){return this.batchId===e.batchId&&Ef(this.mutations,e.mutations,(t,r)=>xw(t,r))&&Ef(this.baseMutations,e.baseMutations,(t,r)=>xw(t,r))}}class $w{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){St(e.mutations.length===r.length);let o=py;const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new $w(e,t,r,o)}}class Hw{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ka{constructor(e,t,r,o,u=It.min(),d=It.min(),f=Wr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=f}withSequenceNumber(e){return new Ka(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ka(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ka(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class PT{constructor(e){this.Jt=e}}function kT(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Kg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:zu(o=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Jc(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:el(e.version)};else{if(!e.isUnknownDocument())return nt();r.unknownDocument={path:t.path.toArray(),version:el(e.version)}}var o,u;return r}function Kg(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function el(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function tl(n){const e=new Ir(n.seconds,n.nanoseconds);return It.fromTimestamp(e)}function Zg(n,e){const t=(e.baseMutations||[]).map(u=>gT(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>gT(n.Jt,u)),o=Ir.fromMillis(e.localWriteTimeMs);return new zg(e.batchId,o,t,r)}function Yg(n){const e=tl(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?tl(n.lastLimboFreeSnapshotVersion):It.min();let r;var o;return void 0!==n.query.documents?(St(1===(o=n.query).documents.length),r=$s(Af(hT(o.documents[0])))):r=$s(Vw(n.query)),new Ka(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Wr.fromBase64String(n.resumeToken))}function Ud(n,e){const t=el(e.snapshotVersion),r=el(e.lastLimboFreeSnapshotVersion);let o;o=js(e.target)?dx(n.Jt,e.target):hx(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Tf(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function MT(n){const e=Vw({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Sw(e,e.limit,"L"):e}function Qg(n,e){return new Hw(e.largestBatchId,gT(n.Jt,e.overlayMutation))}function Jg(n,e){const t=e.path.lastSegment();return[n,Hi(e.path.popLast()),t]}class Nx{getBundleMetadata(e,t){return Vd(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:tl(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return Vd(e).put({bundleId:(r=t).id,createTime:el(qr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return OT(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:MT(o.bundledQuery),readTime:tl(o.readTime)};var o})}saveNamedQuery(e,t){return OT(e).put({name:(r=t).name,readTime:el(qr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Vd(n){return zr(n,"bundles")}function OT(n){return zr(n,"namedQueries")}class FT{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new FT(e,t.uid||"")}getOverlay(e,t){return Xg(e).get(Jg(this.userId,t)).next(r=>r?Qg(this.M,r):null)}saveOverlays(e,t,r){const o=[];return r.forEach((u,d)=>{const f=new Hw(t,d);o.push(this.Xt(e,f))}),me.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(Hi(d.getCollectionPath())));const u=[];return o.forEach(d=>{const f=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(Xg(e).Qt("collectionPathOverlayIndex",f))}),me.waitFor(u)}getOverlaysForCollection(e,t,r){const o=Qc(),u=Hi(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Xg(e).qt("collectionPathOverlayIndex",d).next(f=>{for(const y of f){const w=Qg(this.M,y);o.set(w.getKey(),w)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=Qc();let d;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Xg(e).Wt({index:"collectionGroupOverlayIndex",range:f},(y,w,D)=>{const A=Qg(this.M,w);u.size()<o||A.largestBatchId===d?(u.set(A.getKey(),A),d=A.largestBatchId):D.done()}).next(()=>u)}Xt(e,t){return Xg(e).put(function(r,o,u){const[d,f,y]=Jg(o,u.mutation.key);return{userId:o,collectionPath:f,documentId:y,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:$g(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function Xg(n){return zr(n,"documentOverlays")}class Gi{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(mr(e.integerValue));else if("doubleValue"in e){const r=mr(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),Ag(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Hu(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?ww(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):nt()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const o of Object.keys(r))this.re(o,t),this.te(r[o],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const o of r)this.te(o,t)}ae(e,t){this.ne(t,37),Ge.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function LT(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Px(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=LT(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Gi.fe=new Gi;class _y{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const o=t.codePointAt(0);this._e(240|o>>>18),this._e(128|63&o>>>12),this._e(128|63&o>>>6),this._e(128|63&o)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const o=t.codePointAt(0);this.ge(240|o>>>18),this.ge(128|63&o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o)}}this.ye()}Te(e){const t=this.Ee(e),r=Px(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Re(e){const t=this.Ee(e),r=Px(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class kx{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class Mx{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class yy{constructor(){this.De=new _y,this.Ce=new kx(this.De),this.xe=new Mx(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Bd{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Bd(this.indexId,this.documentKey,this.arrayValue,r)}}function jd(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=UT(n.arrayValue,e.arrayValue),0!==t?t:(t=UT(n.directionalValue,e.directionalValue),0!==t?t:Ge.comparator(n.documentKey,e.documentKey)))}function UT(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Gw{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=iy(e);if(void 0!==t&&!this.Be(t))return!1;const r=Nd(e);let o=0,u=0;for(;o<r.length&&this.Be(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Fe){const d=r[o];if(!this.Le(this.Fe,d)||!this.Ue(this.Me[u++],d))return!1;++o}for(;o<r.length;++o){const d=r[o];if(u>=this.Me.length||!this.Ue(this.Me[u++],d))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class VT{constructor(){this.qe=new em}addToCollectionParentIndex(e,t){return this.qe.add(t),me.resolve()}getCollectionParents(e,t){return me.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return me.resolve()}deleteFieldIndex(e,t){return me.resolve()}getDocumentsMatchingTarget(e,t){return me.resolve(null)}getIndexType(e,t){return me.resolve(0)}getFieldIndexes(e,t){return me.resolve([])}getNextCollectionGroupToUpdate(e){return me.resolve(null)}getMinOffset(e,t){return me.resolve(vo.min())}updateCollectionGroup(e,t,r){return me.resolve()}updateIndexEntries(e,t){return me.resolve()}}class em{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Vn(fn.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Vn(fn.comparator)).toArray()}}const tm=new Uint8Array(0);class Ox{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new em,this.Ge=new Yc(r=>Tf(r),(r,o)=>Df(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:Hi(o)};return Fx(e).put(u)}return me.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[PC(t),""],!1,!0);return Fx(e).qt(o).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(ss(d.parent))}return r})}addFieldIndex(e,t){const r=vy(e),o={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var u;return delete o.indexId,r.add(o).next()}deleteFieldIndex(e,t){const r=vy(e),o=Ey(e),u=nm(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=nm(e);let o=!0;const u=new Map;return me.forEach(this.Qe(t),d=>this.je(e,d).next(f=>{o&&(o=!!f),u.set(d,f)})).next(()=>{if(o){let d=Sn();const f=[];return me.forEach(u,(y,w)=>{var D;Ve("IndexedDbIndexManager",`Using index ${D=y,`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map(rt=>`${rt.fieldPath}:${rt.kind}`).join(",")}`} to execute ${Tf(t)}`);const A=function(rt,st){const Vt=iy(st);if(void 0===Vt)return null;for(const sn of sy(rt,Vt.fieldPath))switch(sn.op){case"array-contains-any":return sn.value.arrayValue.values||[];case"array-contains":return[sn.value]}return null}(w,y),M=function(rt,st){const Vt=new Map;for(const sn of Nd(st))for(const di of sy(rt,sn.fieldPath))switch(di.op){case"==":case"in":Vt.set(sn.fieldPath.canonicalString(),di.value);break;case"not-in":case"!=":return Vt.set(sn.fieldPath.canonicalString(),di.value),Array.from(Vt.values())}return null}(w,y),j=function(rt,st){const Vt=[];let sn=!0;for(const di of Nd(st)){const cc=0===di.kind?BC(rt,di.fieldPath,rt.startAt):na(rt,di.fieldPath,rt.startAt);Vt.push(cc.value),sn&&(sn=cc.inclusive)}return new Eo(Vt,sn)}(w,y),Y=function(rt,st){const Vt=[];let sn=!0;for(const di of Nd(st)){const cc=0===di.kind?na(rt,di.fieldPath,rt.endAt):BC(rt,di.fieldPath,rt.endAt);Vt.push(cc.value),sn&&(sn=cc.inclusive)}return new Eo(Vt,sn)}(w,y),ye=this.We(y,w,j),Re=this.We(y,w,Y),lt=this.ze(y,w,M),ct=this.He(y.indexId,A,ye,j.inclusive,Re,Y.inclusive,lt);return me.forEach(ct,rt=>r.Gt(rt,t.limit).next(st=>{st.forEach(Vt=>{const sn=Ge.fromSegments(Vt.documentKey);d.has(sn)||(d=d.add(sn),f.push(sn))})}))}).next(()=>f)}return me.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,o,u,d,f){const y=(null!=t?t.length:1)*Math.max(r.length,u.length),w=y/(null!=t?t.length:1),D=[];for(let A=0;A<y;++A){const M=t?this.Je(t[A/w]):tm,j=this.Ye(e,M,r[A%w],o),Y=this.Xe(e,M,u[A%w],d),ye=f.map(Re=>this.Ye(e,M,Re,!0));D.push(...this.createRange(j,Y,ye))}return D}Ye(e,t,r,o){const u=new Bd(e,Ge.empty(),t,r);return o?u:u.ke()}Xe(e,t,r,o){const u=new Bd(e,Ge.empty(),t,r);return o?u.ke():u}je(e,t){const r=new Gw(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let d=null;for(const f of u)r.$e(f)&&(!d||f.fields.length>d.fields.length)&&(d=f);return d})}getIndexType(e,t){let r=2;return me.forEach(this.Qe(t),o=>this.je(e,o).next(u=>{u?0!==r&&u.fields.length<function(d){let f=new Vn(Gr.comparator),y=!1;for(const w of d.filters){const D=w;D.field.isKeyField()||("array-contains"===D.op||"array-contains-any"===D.op?y=!0:f=f.add(D.field))}for(const w of d.orderBy)w.field.isKeyField()||(f=f.add(w.field));return f.size+(y?1:0)}(o)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new yy;for(const o of Nd(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const d=r.Ne(o.kind);Gi.fe.Zt(u,d)}return r.Se()}Je(e){const t=new yy;return Gi.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new yy;return Gi.fe.Zt(xd(this.databaseId,t),r.Ne(function(o){const u=Nd(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let o=[];o.push(new yy);let u=0;for(const d of Nd(e)){const f=r[u++];for(const y of o)if(this.en(t,d.fieldPath)&&xg(f))o=this.nn(o,d,f);else{const w=y.Ne(d.kind);Gi.fe.Zt(f,w)}}return this.sn(o)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const o=[...e],u=[];for(const d of r.arrayValue.values||[])for(const f of o){const y=new yy;y.seed(f.Se()),Gi.fe.Zt(d,y.Ne(t.kind)),u.push(y)}return u}en(e,t){return!!e.filters.find(r=>r instanceof Ln&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=vy(e),o=Ey(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const d=[];return me.forEach(u,f=>o.get([f.indexId,this.uid]).next(y=>{d.push(function(w,D){const A=D?new Cf(D.sequenceNumber,new vo(tl(D.readTime),new Ge(ss(D.documentKey)),D.largestBatchId)):Cf.empty(),M=w.fields.map(([j,Y])=>new _r(Gr.fromServerFormat(j),Y));return new ry(w.indexId,w.collectionGroup,M,A)}(f,y))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:$t(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=vy(e),u=Ey(e);return this.rn(e).next(d=>o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>me.forEach(f,y=>{return u.put({indexId:y.indexId,uid:this.user.uid||"",sequenceNumber:d,readTime:el((M=r).readTime),documentKey:Hi(M.documentKey.path),largestBatchId:M.largestBatchId});var M})))}updateIndexEntries(e,t){const r=new Map;return me.forEach(t,(o,u)=>{const d=r.get(o.collectionGroup);return(d?me.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(f=>(r.set(o.collectionGroup,f),me.forEach(f,y=>this.on(e,o,y).next(w=>{const D=this.un(u,y);return w.isEqual(D)?me.resolve():this.an(e,u,y,w,D)}))))})}cn(e,t,r,o){return nm(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,o){return nm(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const o=nm(e);let u=new Vn(jd);return o.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(d,f)=>{u=u.add(new Bd(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>u)}un(e,t){let r=new Vn(jd);const o=this.Ze(t,e);if(null==o)return r;const u=iy(t);if(null!=u){const d=e.data.field(u.fieldPath);if(xg(d))for(const f of d.arrayValue.values||[])r=r.add(new Bd(t.indexId,e.key,this.Je(f),o))}else r=r.add(new Bd(t.indexId,e.key,tm,o));return r}an(e,t,r,o,u){Ve("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(f,y,w,D,A){const M=f.getIterator(),j=y.getIterator();let Y=Pd(M),ye=Pd(j);for(;Y||ye;){let Re=!1,lt=!1;if(Y&&ye){const ct=w(Y,ye);ct<0?lt=!0:ct>0&&(Re=!0)}else null!=Y?lt=!0:Re=!0;Re?(D(ye),ye=Pd(j)):lt?(A(Y),Y=Pd(M)):(Y=Pd(M),ye=Pd(j))}}(o,u,jd,f=>{d.push(this.cn(e,t,r,f))},f=>{d.push(this.hn(e,t,r,f))}),me.waitFor(d)}rn(e){let t=1;return Ey(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,f)=>jd(d,f)).filter((d,f,y)=>!f||0!==jd(d,y[f-1]));const o=[];o.push(e);for(const d of r){const f=jd(d,e),y=jd(d,t);if(0===f)o[0]=e.ke();else if(f>0&&y<0)o.push(d),o.push(d.ke());else if(y>0)break}o.push(t);const u=[];for(let d=0;d<o.length;d+=2)u.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,tm,[]],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,tm,[]]));return u}getMinOffset(e,t){let r;return me.forEach(this.Qe(t),o=>this.je(e,o).next(u=>{u?(!r||LC(u.indexState.offset,r)<0)&&(r=u.indexState.offset):r=vo.min()})).next(()=>r)}}function Fx(n){return zr(n,"collectionParents")}function nm(n){return zr(n,"indexEntries")}function vy(n){return zr(n,"indexConfiguration")}function Ey(n){return zr(n,"indexState")}const Ww={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class os{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new os(e,os.DEFAULT_COLLECTION_PERCENTILE,os.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function qw(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let f=0;const y=r.Wt({range:d},(D,A,M)=>(f++,M.delete()));u.push(y.next(()=>{St(1===f)}));const w=[];for(const D of t.mutations){const A=wT(e,D.key.path,t.batchId);u.push(o.delete(A)),w.push(D.key)}return me.waitFor(u).next(()=>w)}function wy(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw nt();e=n.noDocument}return JSON.stringify(e).length}os.DEFAULT_COLLECTION_PERCENTILE=10,os.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,os.DEFAULT=new os(41943040,os.DEFAULT_COLLECTION_PERCENTILE,os.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),os.DISABLED=new os(-1,0,0);class zw{constructor(e,t,r,o){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=o,this.ln={}}static Yt(e,t,r,o){St(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new zw(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ia(e).Wt({index:"userMutationsIndex",range:r},(o,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=Vf(e),d=ia(e);return d.add({}).next(f=>{St("number"==typeof f);const y=new zg(f,t,r,o),w=function(M,j,Y){const ye=Y.baseMutations.map(lt=>$g(M.Jt,lt)),Re=Y.mutations.map(lt=>$g(M.Jt,lt));return{userId:j,batchId:Y.batchId,localWriteTimeMs:Y.localWriteTime.toMillis(),baseMutations:ye,mutations:Re}}(this.M,this.userId,y),D=[];let A=new Vn((M,j)=>$t(M.canonicalString(),j.canonicalString()));for(const M of o){const j=wT(this.userId,M.key.path,f);A=A.add(M.key.path.popLast()),D.push(d.put(w)),D.push(u.put(j,bT))}return A.forEach(M=>{D.push(this.indexManager.addToCollectionParentIndex(e,M))}),e.addOnCommittedListener(()=>{this.ln[f]=y.keys()}),me.waitFor(D).next(()=>y)})}lookupMutationBatch(e,t){return ia(e).get(t).next(r=>r?(St(r.userId===this.userId),Zg(this.M,r)):null)}fn(e,t){return this.ln[t]?me.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.ln[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return ia(e).Wt({index:"userMutationsIndex",range:o},(d,f,y)=>{f.userId===this.userId&&(St(f.batchId>=r),u=Zg(this.M,f)),y.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ia(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(o,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ia(e).qt("userMutationsIndex",t).next(r=>r.map(o=>Zg(this.M,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Hg(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Vf(e).Wt({range:o},(d,f,y)=>{const[w,D,A]=d,M=ss(D);if(w===this.userId&&t.path.isEqual(M))return ia(e).get(A).next(j=>{if(!j)throw nt();St(j.userId===this.userId),u.push(Zg(this.M,j))});y.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Vn($t);const o=[];return t.forEach(u=>{const d=Hg(this.userId,u.path),f=IDBKeyRange.lowerBound(d),y=Vf(e).Wt({range:f},(w,D,A)=>{const[M,j,Y]=w,ye=ss(j);M===this.userId&&u.path.isEqual(ye)?r=r.add(Y):A.done()});o.push(y)}),me.waitFor(o).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=Hg(this.userId,r),d=IDBKeyRange.lowerBound(u);let f=new Vn($t);return Vf(e).Wt({range:d},(y,w,D)=>{const[A,M,j]=y,Y=ss(M);A===this.userId&&r.isPrefixOf(Y)?Y.length===o&&(f=f.add(j)):D.done()}).next(()=>this.dn(e,f))}dn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(ia(e).get(u).next(d=>{if(null===d)throw nt();St(d.userId===this.userId),r.push(Zg(this.M,d))}))}),me.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return qw(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),me.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return me.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Vf(e).Wt({range:r},(u,d,f)=>{if(u[0]===this.userId){const y=ss(u[1]);o.push(y)}else f.done()}).next(()=>{St(0===o.length)})})}containsKey(e,t){return Kw(e,this.userId,t)}wn(e){return Zw(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Kw(n,e,t){const r=Hg(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return Vf(n).Wt({range:u,jt:!0},(f,y,w)=>{const[D,A,M]=f;D===e&&A===o&&(d=!0),w.done()}).next(()=>d)}function ia(n){return zr(n,"mutations")}function Vf(n){return zr(n,"documentMutations")}function Zw(n){return zr(n,"mutationQueues")}class Za{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new Za(0)}static yn(){return new Za(-1)}}class by{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new Za(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>It.fromTimestamp(new Ir(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.In(e,o)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ya(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(St(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return Ya(e).Wt((d,f)=>{const y=Yg(f);y.sequenceNumber<=t&&null===r.get(y.targetId)&&(o++,u.push(this.removeTargetData(e,y)))}).next(()=>me.waitFor(u)).next(()=>o)}forEachTarget(e,t){return Ya(e).Wt((r,o)=>{const u=Yg(o);t(u)})}pn(e){return BT(e).get("targetGlobalKey").next(t=>(St(null!==t),t))}In(e,t){return BT(e).put("targetGlobalKey",t)}Tn(e,t){return Ya(e).put(Ud(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Tf(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Ya(e).Wt({range:o,index:"queryTargetsIndex"},(d,f,y)=>{const w=Yg(f);Df(t,w.target)&&(u=w,y.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=nl(e);return t.forEach(d=>{const f=Hi(d.path);o.push(u.put({targetId:r,path:f})),o.push(this.referenceDelegate.addReference(e,r,d))}),me.waitFor(o)}removeMatchingKeys(e,t,r){const o=nl(e);return me.forEach(t,u=>{const d=Hi(u.path);return me.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=nl(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=nl(e);let u=Sn();return o.Wt({range:r,jt:!0},(d,f,y)=>{const w=ss(d[1]),D=new Ge(w);u=u.add(D)}).next(()=>u)}containsKey(e,t){const r=Hi(t.path),o=IDBKeyRange.bound([r],[PC(r)],!1,!0);let u=0;return nl(e).Wt({index:"documentTargetsIndex",jt:!0,range:o},([d,f],y,w)=>{0!==d&&(u++,w.done())}).next(()=>u>0)}Et(e,t){return Ya(e).get(t).next(r=>r?Yg(r):null)}}function Ya(n){return zr(n,"targets")}function BT(n){return zr(n,"targetGlobal")}function nl(n){return zr(n,"targetDocuments")}function Bf(n){return Yw.apply(this,arguments)}function Yw(){return(Yw=(0,Ie.Z)(function*(n){if(n.code!==ge.FAILED_PRECONDITION||n.message!==RT)throw n;Ve("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function jT([n,e],[t,r]){const o=$t(n,t);return 0===o?$t(e,r):o}class Lx{constructor(e){this.An=e,this.buffer=new Vn(jT),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();jT(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Ux{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Ve("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,Ie.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){Xc(o)?Ve("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield Bf(o)}yield t.Sn(e)}))}}class Vx{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return me.resolve(Bs.A);const r=new Lx(t);return this.Dn.forEachTarget(e,o=>r.Pn(o.sequenceNumber)).next(()=>this.Dn.xn(e,o=>r.Pn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(Ww)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ww):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,o,u,d,f,y,w;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(Ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),o=this.params.maximumSequenceNumbersToCollect):o=A,d=Date.now(),this.nthSequenceNumber(e,o))).next(A=>(r=A,f=Date.now(),this.removeTargets(e,r,t))).next(A=>(u=A,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(A=>(w=Date.now(),DC()<=pt.in.DEBUG&&Ve("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-D}ms\n\tDetermined least recently used ${o} in `+(f-d)+`ms\n\tRemoved ${u} targets in `+(y-f)+`ms\n\tRemoved ${A} documents in `+(w-y)+`ms\nTotal Duration: ${w-D}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:A})))}}class Bx{constructor(e,t){this.db=e,this.garbageCollector=new Vx(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,o)=>t(o))}addReference(e,t,r){return Iy(e,r)}removeReference(e,t,r){return Iy(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Iy(e,t)}On(e,t){return function(r,o){let u=!1;return Zw(r).zt(d=>Kw(r,d,o).next(f=>(f&&(u=!0),me.resolve(!f)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Mn(e,(d,f)=>{if(f<=t){const y=this.On(e,d).next(w=>{if(!w)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,It.min()),nl(e).delete([0,Hi(d.path)])))});o.push(y)}}).next(()=>me.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Iy(e,t)}Mn(e,t){const r=nl(e);let o,u=Bs.A;return r.Wt({index:"documentTargetsIndex"},([d,f],{path:y,sequenceNumber:w})=>{0===d?(u!==Bs.A&&t(new Ge(ss(o)),u),u=w,o=y):u=Bs.A}).next(()=>{u!==Bs.A&&t(new Ge(ss(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Iy(n,e){return nl(n).put((r=n.currentSequenceNumber,{targetId:0,path:Hi(e.path),sequenceNumber:r}));var r}class $T{constructor(){this.changes=new Yc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Hn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?me.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class jx{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return sa(e).put(r)}removeEntry(e,t,r){return sa(e).delete(function(o,u){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Kg(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=Hn.newInvalidDocument(t);return sa(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(rm(t))},(o,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:Hn.newInvalidDocument(t)};return sa(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(rm(t))},(o,u)=>{r={document:this.$n(t,u),size:wy(u)}}).next(()=>r)}getEntries(e,t){let r=wo();return this.Ln(e,t,(o,u)=>{const d=this.$n(o,u);r=r.insert(o,d)}).next(()=>r)}Un(e,t){let r=wo(),o=new yr(Ge.comparator);return this.Ln(e,t,(u,d)=>{const f=this.$n(u,d);r=r.insert(u,f),o=o.insert(u,wy(d))}).next(()=>({documents:r,qn:o}))}Ln(e,t,r){if(t.isEmpty())return me.resolve();let o=new Vn(WT);t.forEach(y=>o=o.add(y));const u=IDBKeyRange.bound(rm(o.first()),rm(o.last())),d=o.getIterator();let f=d.getNext();return sa(e).Wt({index:"documentKeyIndex",range:u},(y,w,D)=>{const A=Ge.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;f&&WT(f,A)<0;)r(f,null),f=d.getNext();f&&f.isEqual(A)&&(r(f,w),f=d.hasNext()?d.getNext():null),f?D.Ut(rm(f)):D.done()}).next(()=>{for(;f;)r(f,null),f=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),Kg(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return sa(e).qt(IDBKeyRange.bound(o,u,!0)).next(d=>{let f=wo();for(const y of d){const w=this.$n(Ge.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);f=f.insert(w.key,w)}return f})}getAllFromCollectionGroup(e,t,r,o){let u=wo();const d=GT(t,r),f=GT(t,vo.max());return sa(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,f,!0)},(y,w,D)=>{const A=this.$n(Ge.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);u=u.insert(A.key,A),u.size===o&&D.done()}).next(()=>u)}newChangeBuffer(e){return new MM(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return HT(e).get("remoteDocumentGlobalKey").next(t=>(St(!!t),t))}Fn(e,t){return HT(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function(n,e){let t;if(e.document)t=fT(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ge.fromSegments(e.noDocument.path),o=tl(e.noDocument.readTime);t=Hn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return nt();{const r=Ge.fromSegments(e.unknownDocument.path),o=tl(e.unknownDocument.version);t=Hn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Ir(r[0],r[1]);return It.fromTimestamp(o)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(It.min()))return r}return Hn.newInvalidDocument(e)}}class MM extends $T{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new Yc(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new Vn((u,d)=>$t(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const f=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,f.readTime)),d.isValidDocument()){const y=kT(this.Kn.M,d);o=o.add(u.path.popLast()),r+=wy(y)-f.size,t.push(this.Kn.addEntry(e,u,y))}else if(r-=f.size,this.trackRemovals){const y=kT(this.Kn.M,d.convertToNoDocument(It.min()));t.push(this.Kn.addEntry(e,u,y))}}),o.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),me.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:o})=>(o.forEach((u,d)=>{this.Gn.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function HT(n){return zr(n,"remoteDocumentGlobal")}function sa(n){return zr(n,"remoteDocumentsV14")}function rm(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function GT(n,e){const t=e.documentKey.path.toArray();return[n,Kg(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function WT(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=$t(t[u],r[u]),o)return o;return o=$t(t.length,r.length),o||(o=$t(t[t.length-2],r[r.length-2]),o||$t(t[t.length-1],r[r.length-1]))}class Cy{constructor(e){this.M=e}kt(e,t,r,o){const u=new Gg("createOrUpgrade",t);var f;r<1&&o>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ET,{unique:!0}),f.createObjectStore("documentMutations"),rl(e),function(f){f.createObjectStore("remoteDocuments")}(e));let d=me.resolve();return r<3&&o>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),rl(e)),d=d.next(()=>function(f){const y=f.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:It.min().toTimestamp(),targetCount:0};return y.put("targetGlobalKey",w)}(u))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(f,y){return y.store("mutations").qt().next(w=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ET,{unique:!0});const D=y.store("mutations"),A=w.map(M=>D.put(M));return me.waitFor(A)})}(e,u))),d=d.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.Qn(u))),r<6&&o>=6&&(d=d.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&o>=7&&(d=d.next(()=>this.Wn(u))),r<8&&o>=8&&(d=d.next(()=>this.zn(e,u))),r<9&&o>=9&&(d=d.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.Hn(u))),r<11&&o>=11&&(d=d.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(f){const y=f.createObjectStore("documentOverlays",{keyPath:Cx});y.createIndex("collectionPathOverlayIndex",DT,{unique:!1}),y.createIndex("collectionGroupOverlayIndex",Tx,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(f){const y=f.createObjectStore("remoteDocumentsV14",{keyPath:yx});y.createIndex("documentKeyIndex",IT),y.createIndex("collectionGroupIndex",vx)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>{!function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:wx}).createIndex("sequenceNumberIndex",bx,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:Ix}).createIndex("documentKeyIndex",jw,{unique:!1})}(e)})),d}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,o)=>{t+=wy(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(o=>me.forEach(o,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",d).next(f=>me.forEach(f,y=>{St(y.userId===u.userId);const w=Zg(this.M,y);return qw(e,u.userId,w).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Wt((d,f)=>{const y=new fn(d),w=[0,Hi(y)];u.push(t.get(w).next(D=>D?me.resolve():t.put({targetId:0,path:Hi(y),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>me.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:TT});const r=t.store("collectionParents"),o=new em,u=d=>{if(o.add(d)){const f=d.lastSegment(),y=d.popLast();return r.put({collectionId:f,parent:Hi(y)})}};return t.store("remoteDocuments").Wt({jt:!0},(d,f)=>{const y=new fn(d);return u(y.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([d,f,y],w)=>{const D=ss(f);return u(D.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,o)=>{const u=Yg(o),d=Ud(this.M,u);return t.put(d)})}Jn(e,t){const r=t.store("remoteDocuments"),o=[];return r.Wt((u,d)=>{const f=t.store("remoteDocumentsV14"),y=(w=d,w.document?new Ge(fn.fromString(w.document.name).popFirst(5)):w.noDocument?Ge.fromSegments(w.noDocument.path):w.unknownDocument?Ge.fromSegments(w.unknownDocument.path):nt()).path.toArray();var w;const D={prefixPath:y.slice(0,y.length-2),collectionGroup:y[y.length-2],documentId:y[y.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(f.put(D))}).next(()=>me.waitFor(o))}}function rl(n){n.createObjectStore("targetDocuments",{keyPath:Ex}).createIndex("documentTargetsIndex",CT,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Bw,{unique:!0}),n.createObjectStore("targetGlobal")}const Ty="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Qw{constructor(e,t,r,o,u,d,f,y,w,D,A=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=d,this.document=f,this.Xn=w,this.Zn=D,this.ts=A,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=M=>Promise.resolve(),!Qw.vt())throw new Pe(ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Bx(this,o),this.hs=t+"main",this.M=new PT(y),this.ls=new bo(this.hs,this.ts,new Cy(this.M)),this.fs=new by(this.referenceDelegate,this.M),this.ds=new jx(this.M),this._s=new Nx,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===D&&Hr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Pe(ge.FAILED_PRECONDITION,Ty);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Bs(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,Ie.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,Ie.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,Ie.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Sy(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(Xc(e))return Ve("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ve("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return Dy(e).get("owner").next(t=>me.resolve(this.Ps(t)))}Vs(e){return Sy(e).delete(this.clientId)}vs(){var e=this;return(0,Ie.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=zr(r,"clientMetadata");return o.qt().next(u=>{const d=e.Ds(u,18e5),f=u.filter(y=>-1===d.indexOf(y));return me.forEach(f,y=>o.delete(y.clientId)).next(()=>f)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?me.resolve(!0):Dy(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new Pe(ge.FAILED_PRECONDITION,Ty);return!1}}return!(!this.networkEnabled||!this.inForeground)||Sy(e).qt().next(r=>void 0===this.Ds(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,f=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&f)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ve("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ie.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new my(t,Bs.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>Sy(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return zw.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new Ox(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return FT.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Ve("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=14===(d=this.ts)?Sx:13===d?AT:12===d?Dx:11===d?ST:void nt();var d;let f;return this.ls.runTransaction(e,o,u,y=>(f=new my(y,this.es?this.es.next():Bs.A),"readwrite-primary"===t?this.Es(f).next(w=>!!w||this.As(f)).next(w=>{if(!w)throw Hr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Pe(ge.FAILED_PRECONDITION,RT);return r(f)}).next(w=>this.bs(f).next(()=>w)):this.$s(f).next(()=>r(f)))).then(y=>(f.raiseOnCommittedEvent(),y))}$s(e){return Dy(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Pe(ge.FAILED_PRECONDITION,Ty)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Dy(e).put("owner",t)}static vt(){return bo.vt()}Rs(e){const t=Dy(e);return t.get("owner").next(r=>this.Ps(r)?(Ve("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):me.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(Hr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,F.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Ve("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Hr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){Hr("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Dy(n){return zr(n,"owner")}function Sy(n){return zr(n,"clientMetadata")}function jf(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class $x{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(o=>{for(const u of r)u.applyToLocalView(o);return o})}qs(e,t){e.forEach((r,o)=>{for(const u of t)u.applyToLocalView(o)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return Ge.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.js(e,t.path):Og(t)?this.Ws(e,t,r):this.zs(e,t,r);var o}js(e,t){return this.Ls(e,new Ge(t)).next(r=>{let o=Nw();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Ws(e,t,r){const o=t.collectionGroup;let u=Nw();return this.indexManager.getCollectionParents(e,o).next(d=>me.forEach(d,f=>{const y=(w=t,D=f.child(o),new Wa(D,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,D;return this.zs(e,y,r).next(w=>{w.forEach((D,A)=>{u=u.insert(D,A)})})}).next(()=>u))}zs(e,t,r){let o;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const d of u)for(const f of d.mutations){const y=f.key;let w=o.get(y);null==w&&(w=Hn.newInvalidDocument(y),o=o.insert(y,w)),ly(f,w,d.localWriteTime),w.isFoundDocument()||(o=o.remove(y))}}).next(()=>(o.forEach((u,d)=>{uy(t,d)||(o=o.remove(u))}),o))}}class Jw{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=o}static Ys(e,t){let r=Sn(),o=Sn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Jw(e,t.fromCache,r,o)}}class Xw{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,o){return this.ti(e,t).next(u=>u||this.ei(e,t,o,r)).next(u=>u||this.ni(e,t))}ti(e,t){return me.resolve(null)}ei(e,t,r,o){return function(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||o.isEqual(It.min())?this.ni(e,t):this.Zs.Ks(e,r).next(u=>{const d=this.si(t,u);return this.ii(t,d,r,o)?this.ni(e,t):(DC()<=pt.in.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ay(t)),this.ri(e,d,t,FC(o,-1)))})}si(e,t){let r=new Vn(zC(e));return t.forEach((o,u)=>{uy(e,u)&&(r=r.add(u))}),r}ii(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ni(e,t){return DC()<=pt.in.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",ay(t)),this.Zs.Qs(e,t,vo.min())}ri(e,t,r,o){return this.Zs.Qs(e,r,o).next(u=>(t.forEach(d=>{u=u.insert(d.key,d)}),u))}}class qT{constructor(e,t,r,o){this.persistence=e,this.oi=t,this.M=o,this.ui=new yr($t),this.ai=new Yc(u=>Tf(u),Df),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new $x(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function Ay(n,e,t,r){return new qT(n,e,t,r)}function e0(n,e){return Ry.apply(this,arguments)}function Ry(){return(Ry=(0,Ie.Z)(function*(n,e){const t=Ye(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.Bs.getAllMutationBatches(r).next(u=>(o=u,t.li(e),t.Bs.getAllMutationBatches(r))).next(u=>{const d=[],f=[];let y=Sn();for(const w of o){d.push(w.batchId);for(const D of w.mutations)y=y.add(D.key)}for(const w of u){f.push(w.batchId);for(const D of w.mutations)y=y.add(D.key)}return t.fi.Ks(r,y).next(w=>({di:w,removedBatchIds:d,addedBatchIds:f}))})})})).apply(this,arguments)}function Hx(n,e){const t=Ye(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.hi.newChangeBuffer({trackRemovals:!0});return function(d,f,y,w){const D=y.batch,A=D.keys();let M=me.resolve();return A.forEach(j=>{M=M.next(()=>w.getEntry(f,j)).next(Y=>{const ye=y.docVersions.get(j);St(null!==ye),Y.version.compareTo(ye)<0&&(D.applyToRemoteDocument(Y,y),Y.isValidDocument()&&(Y.setReadTime(y.commitVersion),w.addEntry(Y)))})}),M.next(()=>d.Bs.removeMutationBatch(f,D))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,o))})}function zT(n){const e=Ye(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function KT(n,e){const t=Ye(n),r=e.snapshotVersion;let o=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.hi.newChangeBuffer({trackRemovals:!0});o=t.ui;const f=[];e.targetChanges.forEach((w,D)=>{const A=o.get(D);if(!A)return;f.push(t.fs.removeMatchingKeys(u,w.removedDocuments,D).next(()=>t.fs.addMatchingKeys(u,w.addedDocuments,D)));let M=A.withSequenceNumber(u.currentSequenceNumber);var j,Y,ye;e.targetMismatches.has(D)?M=M.withResumeToken(Wr.EMPTY_BYTE_STRING,It.min()).withLastLimboFreeSnapshotVersion(It.min()):w.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(w.resumeToken,r)),o=o.insert(D,M),Y=M,ye=w,(0===(j=A).resumeToken.approximateByteSize()||Y.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=3e8||ye.addedDocuments.size+ye.modifiedDocuments.size+ye.removedDocuments.size>0)&&f.push(t.fs.updateTargetData(u,M))});let y=wo();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(u,w))}),f.push(ZT(u,d,e.documentUpdates).next(w=>{y=w})),!r.isEqual(It.min())){const w=t.fs.getLastRemoteSnapshotVersion(u).next(D=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));f.push(w)}return me.waitFor(f).next(()=>d.apply(u)).next(()=>t.fi.Gs(u,y)).next(()=>y)}).then(u=>(t.ui=o,u))}function ZT(n,e,t){let r=Sn();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=wo();return t.forEach((d,f)=>{const y=o.get(d);f.isNoDocument()&&f.version.isEqual(It.min())?(e.removeEntry(d,f.readTime),u=u.insert(d,f)):!y.isValidDocument()||f.version.compareTo(y.version)>0||0===f.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(f),u=u.insert(d,f)):Ve("LocalStore","Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",f.version)}),u})}function YT(n,e){const t=Ye(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function Ku(n,e){const t=Ye(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.fs.getTargetData(r,e).next(u=>u?(o=u,me.resolve(o)):t.fs.allocateTargetId(r).next(d=>(o=new Ka(e,d,0,r.currentSequenceNumber),t.fs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.ui.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function Zu(n,e,t){return QT.apply(this,arguments)}function QT(){return(QT=(0,Ie.Z)(function*(n,e,t){const r=Ye(n),o=r.ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Xc(d))throw d;Ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.ui=r.ui.remove(e),r.ai.delete(o.target)})).apply(this,arguments)}function il(n,e,t){const r=Ye(n);let o=It.min(),u=Sn();return r.persistence.runTransaction("Execute query","readonly",d=>function(f,y,w){const D=Ye(f),A=D.ai.get(w);return void 0!==A?me.resolve(D.ui.get(A)):D.fs.getTargetData(y,w)}(r,d,$s(e)).next(f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(d,f.targetId).next(y=>{u=y})}).next(()=>r.oi.Qs(d,e,t?o:It.min(),t?u:Sn())).next(f=>($d(r,Rw(e),f),{documents:f,_i:u})))}function wn(n,e){const t=Ye(n),r=Ye(t.fs),o=t.ui.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(d=>d?d.target:null))}function Yu(n,e){const t=Ye(n),r=t.ci.get(e)||It.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.hi.getAllFromCollectionGroup(o,e,FC(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>($d(t,e,o),o))}function $d(n,e,t){let r=It.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ci.set(e,r)}function JT(){return(JT=(0,Ie.Z)(function*(n,e,t,r){const o=Ye(n);let u=Sn(),d=wo();for(const w of t){const D=e.wi(w.metadata.name);w.document&&(u=u.add(D));const A=e.mi(w);A.setReadTime(e.gi(w.metadata.readTime)),d=d.insert(D,A)}const f=o.hi.newChangeBuffer({trackRemovals:!0}),y=yield Ku(o,(w=r,$s(Af(fn.fromString(`__bundle__/docs/${w}`)))));var w;return o.persistence.runTransaction("Apply bundle documents","readwrite",w=>ZT(w,f,d).next(D=>(f.apply(w),D)).next(D=>o.fs.removeMatchingKeysForTargetId(w,y.targetId).next(()=>o.fs.addMatchingKeys(w,u,y.targetId)).next(()=>o.fi.Gs(w,D)).next(()=>D)))})).apply(this,arguments)}function Ft(n,e){return ws.apply(this,arguments)}function ws(){return(ws=(0,Ie.Z)(function*(n,e,t=Sn()){const r=yield Ku(n,$s(MT(e.bundledQuery))),o=Ye(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const d=qr(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o._s.saveNamedQuery(u,e);const f=r.withResumeToken(Wr.EMPTY_BYTE_STRING,d);return o.ui=o.ui.insert(f.targetId,f),o.fs.updateTargetData(u,f).next(()=>o.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.fs.addMatchingKeys(u,t,r.targetId)).next(()=>o._s.saveNamedQuery(u,e))})})).apply(this,arguments)}class t0{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return me.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:qr(r.createTime)}),me.resolve()}getNamedQuery(e,t){return me.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:MT(r.bundledQuery),readTime:qr(r.readTime)}),me.resolve();var r}}class Hd{constructor(){this.overlays=new yr(Ge.comparator),this.Ii=new Map}getOverlay(e,t){return me.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.Xt(e,t,u)}),me.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Ii.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Ii.delete(r)),me.resolve()}getOverlaysForCollection(e,t,r){const o=Qc(),u=t.length+1,d=new Ge(t.child("")),f=this.overlays.getIteratorFrom(d);for(;f.hasNext();){const y=f.getNext().value,w=y.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===u&&y.largestBatchId>r&&o.set(y.getKey(),y)}return me.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new yr((w,D)=>w-D);const d=this.overlays.getIterator();for(;d.hasNext();){const w=d.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let D=u.get(w.largestBatchId);null===D&&(D=Qc(),u=u.insert(w.largestBatchId,D)),D.set(w.getKey(),w)}}const f=Qc(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((w,D)=>f.set(w,D)),!(f.size()>=o)););return me.resolve(f)}Xt(e,t,r){if(null===r)return;const o=this.overlays.get(r.key);if(null!==o){const d=this.Ii.get(o.largestBatchId).delete(r.key);this.Ii.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new Hw(t,r));let u=this.Ii.get(t);void 0===u&&(u=Sn(),this.Ii.set(t,u)),this.Ii.set(t,u.add(r.key))}}class XT{constructor(){this.Ti=new Vn(Kr.Ei),this.Ai=new Vn(Kr.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new Kr(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new Kr(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new Ge(new fn([])),r=new Kr(t,e),o=new Kr(t,e+1),u=[];return this.Ai.forEachInRange([r,o],d=>{this.Pi(d),u.push(d.key)}),u}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new Ge(new fn([])),r=new Kr(t,e),o=new Kr(t,e+1);let u=Sn();return this.Ai.forEachInRange([r,o],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new Kr(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Kr{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return Ge.comparator(e.key,t.key)||$t(e.Ci,t.Ci)}static Ri(e,t){return $t(e.Ci,t.Ci)||Ge.comparator(e.key,t.key)}}class eD{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new Vn(Kr.Ei)}checkEmpty(e){return me.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,o){const u=this.xi;this.xi++;const d=new zg(u,t,r,o);this.Bs.push(d);for(const f of o)this.Ni=this.Ni.add(new Kr(f.key,u)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return me.resolve(d)}lookupMutationBatch(e,t){return me.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.Mi(t+1),u=o<0?0:o;return me.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return me.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Kr(t,0),o=new Kr(t,Number.POSITIVE_INFINITY),u=[];return this.Ni.forEachInRange([r,o],d=>{const f=this.ki(d.Ci);u.push(f)}),me.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Vn($t);return t.forEach(o=>{const u=new Kr(o,0),d=new Kr(o,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([u,d],f=>{r=r.add(f.Ci)})}),me.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;Ge.isDocumentKey(u)||(u=u.child(""));const d=new Kr(new Ge(u),0);let f=new Vn($t);return this.Ni.forEachWhile(y=>{const w=y.key.path;return!!r.isPrefixOf(w)&&(w.length===o&&(f=f.add(y.Ci)),!0)},d),me.resolve(this.Oi(f))}Oi(e){const t=[];return e.forEach(r=>{const o=this.ki(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){St(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return me.forEach(t.mutations,o=>{const u=new Kr(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new Kr(t,0),o=this.Ni.firstAfterOrEqual(r);return me.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return me.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class OM{constructor(e){this.$i=e,this.docs=new yr(Ge.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,d=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return me.resolve(r?r.document.mutableCopy():Hn.newInvalidDocument(t))}getEntries(e,t){let r=wo();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Hn.newInvalidDocument(o))}),me.resolve(r)}getAllFromCollection(e,t,r){let o=wo();const u=new Ge(t.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:f,value:{document:y}}=d.getNext();if(!t.isPrefixOf(f.path))break;f.path.length>t.length+1||LC(YR(y),r)<=0||(o=o.insert(y.key,y.mutableCopy()))}return me.resolve(o)}getAllFromCollectionGroup(e,t,r,o){nt()}Bi(e,t){return me.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Gx(this)}getSize(e){return me.resolve(this.size)}}class Gx extends $T{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Kn.addEntry(e,o)):this.Kn.removeEntry(r)}),me.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class Wx{constructor(e){this.persistence=e,this.Li=new Yc(t=>Tf(t),Df),this.lastRemoteSnapshotVersion=It.min(),this.highestTargetId=0,this.Ui=0,this.qi=new XT,this.targetCount=0,this.Ki=Za.gn()}forEachTarget(e,t){return this.Li.forEach((r,o)=>t(o)),me.resolve()}getLastRemoteSnapshotVersion(e){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return me.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),me.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new Za(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,me.resolve()}updateTargetData(e,t){return this.Tn(t),me.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,me.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Li.forEach((d,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.Li.delete(d),u.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)}),me.waitFor(u).next(()=>o)}getTargetCount(e){return me.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return me.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),me.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),me.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),me.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return me.resolve(r)}containsKey(e,t){return me.resolve(this.qi.containsKey(t))}}class Io{constructor(e,t){this.Gi={},this.overlays={},this.es=new Bs(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new Wx(this),this.indexManager=new VT,this.ds=new OM(r=>this.referenceDelegate.Qi(r)),this.M=new PT(t),this._s=new t0(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Hd,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new eD(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Ve("MemoryPersistence","Starting transaction:",e);const o=new cr(this.es.next());return this.referenceDelegate.ji(),r(o).next(u=>this.referenceDelegate.Wi(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}zi(e,t){return me.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class cr extends xT{constructor(e){super(),this.currentSequenceNumber=e}}class Gs{constructor(e){this.persistence=e,this.Hi=new XT,this.Ji=null}static Yi(e){return new Gs(e)}get Xi(){if(this.Ji)return this.Ji;throw nt()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),me.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),me.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),me.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(o=>this.Xi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Xi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.Xi,r=>{const o=Ge.fromPath(r);return this.Zi(e,o).next(u=>{u||t.removeEntry(o,It.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return me.or([()=>me.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function n0(n,e){return`firestore_clients_${n}_${e}`}function tD(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function xy(n,e){return`firestore_targets_${n}_${e}`}class $f{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static tr(e,t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new Pe(o.error.code,o.error.message))),d?new $f(e,t,o.state,u):(Hr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Qa{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Pe(r.error.code,r.error.message))),u?new Qa(e,r.state,o):(Hr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sl{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=kf();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=_w(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return o?new sl(e,u):(Hr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class r0{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new r0(t.clientId,t.onlineState):(Hr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Qu{constructor(){this.activeTargetIds=kf()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class s0{constructor(e,t,r,o,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new yr($t),this.started=!1,this.cr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.hr=n0(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new Qu),this.dr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.syncEngine.Fs();for(const o of t){if(o===e.ir)continue;const u=e.getItem(n0(e.persistenceKey,o));if(u){const d=sl.tr(o,u);d&&(e.ar=e.ar.insert(d.clientId,d))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const o=e.pr(r);o&&e.Ir(o)}for(const o of e.cr)e.ur(o);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(xy(this.persistenceKey,e));if(r){const o=Qa.tr(e,r);o&&(t=o.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(xy(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Ar(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ve("SharedClientState","READ",e,t),t}setItem(e,t){Ve("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ve("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ve("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void Hr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,Ie.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const o=t.vr(r.key);return t.Sr(o,null)}{const o=t.Dr(r.key,r.newValue);if(o)return t.Sr(o.clientId,o)}}else if(t._r.test(r.key)){if(null!==r.newValue){const o=t.Cr(r.key,r.newValue);if(o)return t.Nr(o)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const o=t.kr(r.key,r.newValue);if(o)return t.Mr(o)}}else if(r.key===t.mr){if(null!==r.newValue){const o=t.pr(r.newValue);if(o)return t.Ir(o)}}else if(r.key===t.lr){const o=function(u){let d=Bs.A;if(null!=u)try{const f=JSON.parse(u);St("number"==typeof f),d=f}catch(f){Hr("SharedClientState","Failed to read sequence number from WebStorage",f)}return d}(r.newValue);o!==Bs.A&&t.sequenceNumberHandler(o)}else if(r.key===t.gr){const o=t.Or(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Fr(u)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const o=new $f(this.currentUser,e,t,r),u=tD(this.persistenceKey,this.currentUser,e);this.setItem(u,o.er())}Ar(e){const t=tD(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const o=xy(this.persistenceKey,e),u=new Qa(e,t,r);this.setItem(o,u.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return sl.tr(r,t)}Cr(e,t){const r=this._r.exec(e),o=Number(r[1]);return $f.tr(new Ti(void 0!==r[2]?r[2]:null),o,t)}kr(e,t){const r=this.wr.exec(e),o=Number(r[1]);return Qa.tr(o,t)}pr(e){return r0.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,Ie.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);Ve("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),o=this.Tr(this.ar),u=this.Tr(r),d=[],f=[];return u.forEach(y=>{o.has(y)||d.push(y)}),o.forEach(y=>{u.has(y)||f.push(y)}),this.syncEngine.Lr(d,f).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=kf();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class o0{constructor(){this.Ur=new Qu,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new Qu,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class a0{Kr(e){}shutdown(){}}class Hf{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){Ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){Ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const u0={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class nD{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class Gf extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,o,u){const d=this.ho(e,t);Ve("RestConnection","Sending: ",d,r);const f={};return this.lo(f,o,u),this.fo(e,d,f,r).then(y=>(Ve("RestConnection","Received: ",y),y),y=>{throw Cg("RestConnection",`${e} failed with error: `,y,"url: ",d,"request:",r),y})}_o(e,t,r,o,u){return this.co(e,t,r,o,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Sd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}ho(e,t){return`${this.uo}/v1/${t}:${u0[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,o){return new Promise((u,d)=>{const f=new HR;f.listenOnce($R.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case bC.NO_ERROR:const w=f.getResponseJson();Ve("Connection","XHR received:",JSON.stringify(w)),u(w);break;case bC.TIMEOUT:Ve("Connection",'RPC "'+e+'" timed out'),d(new Pe(ge.DEADLINE_EXCEEDED,"Request time out"));break;case bC.HTTP_ERROR:const D=f.getStatus();if(Ve("Connection",'RPC "'+e+'" failed with status:',D,"response text:",f.getResponseText()),D>0){const A=f.getResponseJson().error;if(A&&A.status&&A.message){const M=function(j){const Y=j.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(Y)>=0?Y:ge.UNKNOWN}(A.status);d(new Pe(M,A.message))}else d(new Pe(ge.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new Pe(ge.UNAVAILABLE,"Connection failed."));break;default:nt()}}finally{Ve("Connection",'RPC "'+e+'" completed.')}});const y=JSON.stringify(o);f.send(t,"POST",y,r,15)})}wo(e,t,r){const o=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=wC(),d=jR(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new TC({})),this.lo(f.initMessageHeaders,t,r),(0,F.uI)()||(0,F.b$)()||(0,F.d)()||(0,F.w1)()||(0,F.Mn)()||(0,F.ru)()||(f.httpHeadersOverwriteParam="$httpHeaders");const y=o.join("");Ve("Connection","Creating WebChannel: "+y,f);const w=u.createWebChannel(y,f);let D=!1,A=!1;const M=new nD({Jr:Y=>{A?Ve("Connection","Not sending because WebChannel is closed:",Y):(D||(Ve("Connection","Opening WebChannel transport."),w.open(),D=!0),Ve("Connection","WebChannel sending:",Y),w.send(Y))},Yr:()=>w.close()}),j=(Y,ye,Re)=>{Y.listen(ye,lt=>{try{Re(lt)}catch(ct){setTimeout(()=>{throw ct},0)}})};return j(w,X_.EventType.OPEN,()=>{A||Ve("Connection","WebChannel transport opened.")}),j(w,X_.EventType.CLOSE,()=>{A||(A=!0,Ve("Connection","WebChannel transport closed"),M.ro())}),j(w,X_.EventType.ERROR,Y=>{A||(A=!0,Cg("Connection","WebChannel transport errored:",Y),M.ro(new Pe(ge.UNAVAILABLE,"The operation could not be completed")))}),j(w,X_.EventType.MESSAGE,Y=>{var ye;if(!A){const Re=Y.data[0];St(!!Re);const lt=Re,ct=lt.error||(null===(ye=lt[0])||void 0===ye?void 0:ye.error);if(ct){Ve("Connection","WebChannel received error:",ct);const rt=ct.status;let st=function(sn){const di=Tr[sn];if(void 0!==di)return _t(di)}(rt),Vt=ct.message;void 0===st&&(st=ge.INTERNAL,Vt="Unknown error status: "+rt+" with message "+ct.message),A=!0,M.ro(new Pe(st,Vt)),w.close()}else Ve("Connection","WebChannel received:",Re),M.oo(Re)}}),j(d,IC.STAT_EVENT,Y=>{Y.stat===CC.PROXY?Ve("Connection","Detected buffering proxy"):Y.stat===CC.NOPROXY&&Ve("Connection","Detected no buffering proxy")}),setTimeout(()=>{M.io()},0),M}}function rD(){return"undefined"!=typeof window?window:null}function Gd(){return"undefined"!=typeof document?document:null}function Wf(n){return new cx(n,!0)}class Ny{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=o,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),o=Math.max(0,t-r);o>0&&Ve("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,o,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class c0{constructor(e,t,r,o,u,d,f,y){this.Yn=e,this.Vo=r,this.vo=o,this.So=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=f,this.listener=y,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new Ny(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Ie.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,Ie.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,Ie.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===ge.RESOURCE_EXHAUSTED?(Hr(t.toString()),Hr("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===ge.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Do===t&&this.Qo(r,o)},r=>{e(()=>{const o=new Pe(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(o)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(o=>{r(()=>this.jo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Oo(){var e=this;this.state=5,this.No.Ro((0,Ie.Z)(function*(){e.state=0,e.start()}))}jo(e){return Ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(Ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Py extends c0{constructor(e,t,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.M=u}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:nt(),o=e.targetChange.targetIds||[],u=function(y,w){return y.N?(St(void 0===w||"string"==typeof w),Wr.fromBase64String(w||"")):(St(void 0===w||w instanceof Uint8Array),Wr.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,f=d&&function(y){const w=void 0===y.code?ge.UNKNOWN:_t(y.code);return new Pe(w,y.message||"")}(d);t=new kw(r,o,u,f||null)}else if("documentChange"in e){const r=e.documentChange,o=qa(n,r.document.name),u=qr(r.document.updateTime),d=new Di({mapValue:{fields:r.document.fields}}),f=Hn.newFoundDocument(o,u,d);t=new jg(r.targetIds||[],r.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){const r=e.documentDelete,o=qa(n,r.document),u=r.readTime?qr(r.readTime):It.min(),d=Hn.newNoDocument(o,u);t=new jg([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=qa(n,r.document);t=new jg([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return nt();{const r=e.filter,u=new PM(r.count||0);t=new Pw(r.targetId,u)}}var y;return t}(this.M,e),r=function(o){if(!("targetChange"in o))return It.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?It.min():u.readTime?qr(u.readTime):It.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=Lf(this.M),t.addTarget=function(o,u){let d;const f=u.target;return d=js(f)?{documents:dx(o,f)}:{query:hx(o,f)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=Mw(o,u.resumeToken):u.snapshotVersion.compareTo(It.min())>0&&(d.readTime=Jc(o,u.snapshotVersion.toTimestamp())),d}(this.M,e);const r=function(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return nt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=Lf(this.M),t.removeTarget=e,this.Lo(t)}}class qx extends c0{constructor(e,t,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.M=u,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(St(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function(n,e){return n&&n.length>0?(St(void 0!==e),n.map(t=>function(r,o){let u=qr(r.updateTime?r.updateTime:o);return u.isEqual(It.min())&&(u=qr(o)),new rT(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=qr(e.commitTime);return this.listener.tu(r,t)}return St(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=Lf(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>$g(this.M,r))};this.Lo(t)}}class l0 extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=o,this.su=!1}iu(){if(this.su)throw new Pe(ge.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.So.co(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Pe(ge.UNKNOWN,o.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.So._o(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Pe(ge.UNKNOWN,o.toString())})}terminate(){this.su=!0}}class d0{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(Hr(t),this.uu=!1):Ve("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class FM{constructor(e,t,r,o,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=u,this.gu.Kr(f=>{r.enqueueAndForget((0,Ie.Z)(function*(){var y;lr(d)&&(Ve("RemoteStore","Restarting streams for network reachability change."),yield(y=(0,Ie.Z)(function*(w){const D=Ye(w);D.wu.add(4),yield sm(D),D.yu.set("Unknown"),D.wu.delete(4),yield ky(D)}),function(w){return y.apply(this,arguments)})(d))}))}),this.yu=new d0(r,o)}}function ky(n){return xt.apply(this,arguments)}function xt(){return(xt=(0,Ie.Z)(function*(n){if(lr(n))for(const e of n.mu)yield e(!0)})).apply(this,arguments)}function sm(n){return Wd.apply(this,arguments)}function Wd(){return(Wd=(0,Ie.Z)(function*(n){for(const e of n.mu)yield e(!1)})).apply(this,arguments)}function My(n,e){const t=Ye(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),f0(t)?iD(t):zd(t).Mo()&&h0(t,e))}function om(n,e){const t=Ye(n),r=zd(t);t._u.delete(e),r.Mo()&&zx(t,e),0===t._u.size&&(r.Mo()?r.$o():lr(t)&&t.yu.set("Unknown"))}function h0(n,e){n.pu.Z(e.targetId),zd(n).Ho(e)}function zx(n,e){n.pu.Z(e),zd(n).Jo(e)}function iD(n){n.pu=new ox({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),zd(n).start(),n.yu.au()}function f0(n){return lr(n)&&!zd(n).ko()&&n._u.size>0}function lr(n){return 0===Ye(n).wu.size}function sD(n){n.pu=void 0}function Kx(n){return am.apply(this,arguments)}function am(){return(am=(0,Ie.Z)(function*(n){n._u.forEach((e,t)=>{h0(n,e)})})).apply(this,arguments)}function Zx(n,e){return p0.apply(this,arguments)}function p0(){return(p0=(0,Ie.Z)(function*(n,e){sD(n),f0(n)?(n.yu.lu(e),iD(n)):n.yu.set("Unknown")})).apply(this,arguments)}function Yx(n,e,t){return g0.apply(this,arguments)}function g0(){return(g0=(0,Ie.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof kw&&2===e.state&&e.cause)try{yield(r=(0,Ie.Z)(function*(o,u){const d=u.cause;for(const f of u.targetIds)o._u.has(f)&&(yield o.remoteSyncer.rejectListen(f,d),o._u.delete(f),o.pu.removeTarget(f))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Oy(n,r)}else if(e instanceof jg?n.pu.ut(e):e instanceof Pw?n.pu._t(e):n.pu.ht(e),!t.isEqual(It.min()))try{const r=yield zT(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const d=o.pu.yt(u);return d.targetChanges.forEach((f,y)=>{if(f.resumeToken.approximateByteSize()>0){const w=o._u.get(y);w&&o._u.set(y,w.withResumeToken(f.resumeToken,u))}}),d.targetMismatches.forEach(f=>{const y=o._u.get(f);if(!y)return;o._u.set(f,y.withResumeToken(Wr.EMPTY_BYTE_STRING,y.snapshotVersion)),zx(o,f);const w=new Ka(y.target,f,1,y.sequenceNumber);h0(o,w)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Ve("RemoteStore","Failed to raise snapshot:",r),yield Oy(n,r)}var r})).apply(this,arguments)}function Oy(n,e,t){return m0.apply(this,arguments)}function m0(){return(m0=(0,Ie.Z)(function*(n,e,t){if(!Xc(e))throw e;n.wu.add(1),yield sm(n),n.yu.set("Offline"),t||(t=()=>zT(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ie.Z)(function*(){Ve("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield ky(n)}))})).apply(this,arguments)}function Fy(n,e){return e().catch(t=>Oy(n,t,e))}function qf(n){return _0.apply(this,arguments)}function _0(){return(_0=(0,Ie.Z)(function*(n){const e=Ye(n),t=ol(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;oD(e);)try{const o=yield YT(e.localStore,r);if(null===o){0===e.du.length&&t.$o();break}r=o.batchId,y0(e,o)}catch(o){yield Oy(e,o)}aD(e)&&Qx(e)})).apply(this,arguments)}function oD(n){return lr(n)&&n.du.length<10}function y0(n,e){n.du.push(e);const t=ol(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function aD(n){return lr(n)&&!ol(n).ko()&&n.du.length>0}function Qx(n){ol(n).start()}function Jx(n){return v0.apply(this,arguments)}function v0(){return(v0=(0,Ie.Z)(function*(n){ol(n).nu()})).apply(this,arguments)}function Xx(n){return E0.apply(this,arguments)}function E0(){return(E0=(0,Ie.Z)(function*(n){const e=ol(n);for(const t of n.du)e.Zo(t.mutations)})).apply(this,arguments)}function eN(n,e,t){return w0.apply(this,arguments)}function w0(){return(w0=(0,Ie.Z)(function*(n,e,t){const r=n.du.shift(),o=$w.from(r,e,t);yield Fy(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield qf(n)})).apply(this,arguments)}function um(n,e){return b0.apply(this,arguments)}function b0(){return(b0=(0,Ie.Z)(function*(n,e){var t;e&&ol(n).Xo&&(yield(t=(0,Ie.Z)(function*(r,o){if(ix(u=o.code)&&u!==ge.ABORTED){const d=r.du.shift();ol(r).Fo(),yield Fy(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield qf(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),aD(n)&&Qx(n)})).apply(this,arguments)}function uD(n,e){return Ly.apply(this,arguments)}function Ly(){return(Ly=(0,Ie.Z)(function*(n,e){const t=Ye(n);t.asyncQueue.verifyOperationInProgress(),Ve("RemoteStore","RemoteStore received new credentials");const r=lr(t);t.wu.add(3),yield sm(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield ky(t)})).apply(this,arguments)}function qd(n,e){return cD.apply(this,arguments)}function cD(){return(cD=(0,Ie.Z)(function*(n,e){const t=Ye(n);e?(t.wu.delete(2),yield ky(t)):e||(t.wu.add(2),yield sm(t),t.yu.set("Unknown"))})).apply(this,arguments)}function zd(n){return n.Iu||(n.Iu=function(e,t,r){const o=Ye(e);return o.iu(),new Py(t,o.So,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Xr:Kx.bind(null,n),eo:Zx.bind(null,n),zo:Yx.bind(null,n)}),n.mu.push(function(){var e=(0,Ie.Z)(function*(t){t?(n.Iu.Fo(),f0(n)?iD(n):n.yu.set("Unknown")):(yield n.Iu.stop(),sD(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function ol(n){return n.Tu||(n.Tu=function(e,t,r){const o=Ye(e);return o.iu(),new qx(t,o.So,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Xr:Jx.bind(null,n),eo:um.bind(null,n),eu:Xx.bind(null,n),tu:eN.bind(null,n)}),n.mu.push(function(){var e=(0,Ie.Z)(function*(t){t?(n.Tu.Fo(),yield qf(n)):(yield n.Tu.stop(),n.du.length>0&&(Ve("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class I0{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new li,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,u){const d=Date.now()+r,f=new I0(e,t,d,o,u);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pe(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zf(n,e){if(Hr("AsyncQueue",`${e}: ${n}`),Xc(n))return new Pe(ge.UNAVAILABLE,`${e}: ${n}`);throw n}class Kf{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ge.comparator(t.key,r.key):(t,r)=>Ge.comparator(t.key,r.key),this.keyedMap=Nw(),this.sortedSet=new yr(this.comparator)}static emptySet(e){return new Kf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Kf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Kf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class lD{constructor(){this.Eu=new yr(Ge.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):nt():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Kd{constructor(e,t,r,o,u,d,f,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=f,this.excludesMetadataChanges=y}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new Kd(e,t,Kf.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class tN{constructor(){this.Ru=void 0,this.listeners=[]}}class nN{constructor(){this.queries=new Yc(e=>Aw(e),Rf),this.onlineState="Unknown",this.bu=new Set}}function dD(n,e){return hD.apply(this,arguments)}function hD(){return(hD=(0,Ie.Z)(function*(n,e){const t=Ye(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new tN),o)try{u.Ru=yield t.onListen(r)}catch(d){const f=zf(d,`Initialization of query '${ay(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,u),u.listeners.push(e),e.Pu(t.onlineState),u.Ru&&e.Vu(u.Ru)&&C0(t)})).apply(this,arguments)}function fD(n,e){return cm.apply(this,arguments)}function cm(){return(cm=(0,Ie.Z)(function*(n,e){const t=Ye(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)})).apply(this,arguments)}function rN(n,e){const t=Ye(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const f of d.listeners)f.Vu(o)&&(r=!0);d.Ru=o}}r&&C0(t)}function iN(n,e,t){const r=Ye(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function C0(n){n.bu.forEach(e=>{e.next()})}class T0{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Kd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=Kd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class sN{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class pD{constructor(e){this.M=e}wi(e){return qa(this.M,e)}mi(e){return e.metadata.exists?fT(this.M,e.document,!1):Hn.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return qr(e)}}class gD{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Uy(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=fn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new pD(this.M);for(const o of e)if(o.metadata.queries){const u=r.wi(o.metadata.name);for(const d of o.metadata.queries){const f=(t.get(d)||Sn()).add(u);t.set(d,f)}}return t}complete(){var e=this;return(0,Ie.Z)(function*(){const t=yield function(n,e,t,r){return JT.apply(this,arguments)}(e.localStore,new pD(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const o of e.queries)yield Ft(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function Uy(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class mD{constructor(e){this.key=e}}class Zd{constructor(e){this.key=e}}class Si{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=Sn(),this.mutatedKeys=Sn(),this.Gu=zC(e),this.Qu=new Kf(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new lD,o=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,f=!1;const y="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,w="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((D,A)=>{const M=o.get(D),j=uy(this.query,A)?A:null,Y=!!M&&this.mutatedKeys.has(M.key),ye=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let Re=!1;M&&j?M.data.isEqual(j.data)?Y!==ye&&(r.track({type:3,doc:j}),Re=!0):this.Hu(M,j)||(r.track({type:2,doc:j}),Re=!0,(y&&this.Gu(j,y)>0||w&&this.Gu(j,w)<0)&&(f=!0)):!M&&j?(r.track({type:0,doc:j}),Re=!0):M&&!j&&(r.track({type:1,doc:M}),Re=!0,(y||w)&&(f=!0)),Re&&(j?(d=d.add(j),u=ye?u.add(D):u.delete(D)):(d=d.delete(D),u=u.delete(D)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const D="F"===this.query.limitType?d.last():d.first();d=d.delete(D.key),u=u.delete(D.key),r.track({type:1,doc:D})}return{Qu:d,zu:r,ii:f,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Au();u.sort((w,D)=>function(A,M){const j=Y=>{switch(Y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nt()}};return j(A)-j(M)}(w.type,D.type)||this.Gu(w.doc,D.doc)),this.Ju(r);const d=t?this.Yu():[],f=0===this.Ku.size&&this.current?1:0,y=f!==this.qu;return this.qu=f,0!==u.length||y?{snapshot:new Kd(this.query,e.Qu,o,u,e.mutatedKeys,0===f,y,!1),Xu:d}:{Xu:d}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new lD,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Sn(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new Zd(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new mD(r))}),t}ta(e){this.Uu=e._i,this.Ku=Sn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return Kd.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class _D{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class oa{constructor(e){this.key=e,this.na=!1}}class D0{constructor(e,t,r,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.sa={},this.ia=new Yc(f=>Aw(f),Rf),this.ra=new Map,this.oa=new Set,this.ua=new yr(Ge.comparator),this.aa=new Map,this.ca=new XT,this.ha={},this.la=new Map,this.fa=Za.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function oN(n,e){return Vy.apply(this,arguments)}function Vy(){return(Vy=(0,Ie.Z)(function*(n,e){const t=Co(n);let r,o;const u=t.ia.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.ea();else{const d=yield Ku(t.localStore,$s(e));t.isPrimaryClient&&My(t.remoteStore,d);const f=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield By(t,e,r,"current"===f)}return o})).apply(this,arguments)}function By(n,e,t,r){return jy.apply(this,arguments)}function jy(){return(jy=(0,Ie.Z)(function*(n,e,t,r){n._a=(D,A,M)=>{return(j=(0,Ie.Z)(function*(Y,ye,Re,lt){let ct=ye.view.Wu(Re);ct.ii&&(ct=yield il(Y.localStore,ye.query,!1).then(({documents:Vt})=>ye.view.Wu(Vt,ct)));const rt=lt&&lt.targetChanges.get(ye.targetId),st=ye.view.applyChanges(ct,Y.isPrimaryClient,rt);return x0(Y,ye.targetId,st.Xu),st.snapshot}),function(Y,ye,Re,lt){return j.apply(this,arguments)})(n,D,A,M);var j};const o=yield il(n.localStore,e,!0),u=new Si(e,o._i),d=u.Wu(o.documents),f=Mf.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),y=u.applyChanges(d,n.isPrimaryClient,f);x0(n,t,y.Xu);const w=new _D(e,t,u);return n.ia.set(e,w),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),y.snapshot})).apply(this,arguments)}function aN(n,e){return S0.apply(this,arguments)}function S0(){return(S0=(0,Ie.Z)(function*(n,e){const t=Ye(n),r=t.ia.get(e),o=t.ra.get(r.targetId);if(o.length>1)return t.ra.set(r.targetId,o.filter(u=>!Rf(u,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Zu(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),om(t.remoteStore,r.targetId),Zf(t,r.targetId)}).catch(Bf))):(Zf(t,r.targetId),yield Zu(t.localStore,r.targetId,!0))})).apply(this,arguments)}function $y(){return($y=(0,Ie.Z)(function*(n,e,t){const r=L0(n);try{const o=yield function(u,d){const f=Ye(u),y=Ir.now(),w=d.reduce((A,M)=>A.add(M.key),Sn());let D;return f.persistence.runTransaction("Locally write mutations","readwrite",A=>f.fi.Ks(A,w).next(M=>{D=M;const j=[];for(const Y of d){const ye=sT(Y,D.get(Y.key));null!=ye&&j.push(new Hs(Y.key,ye,ZR(ye.value.mapValue),Cr.exists(!0)))}return f.Bs.addMutationBatch(A,y,j,d)})).then(A=>(A.applyToLocalDocumentSet(D),{batchId:A.batchId,changes:D}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,d,f){let y=u.ha[u.currentUser.toKey()];y||(y=new yr($t)),y=y.insert(d,f),u.ha[u.currentUser.toKey()]=y}(r,o.batchId,t),yield Ju(r,o.changes),yield qf(r.remoteStore)}catch(o){const u=zf(o,"Failed to persist write");t.reject(u)}})).apply(this,arguments)}function yD(n,e){return vD.apply(this,arguments)}function vD(){return(vD=(0,Ie.Z)(function*(n,e){const t=Ye(n);try{const r=yield KT(t.localStore,e);e.targetChanges.forEach((o,u)=>{const d=t.aa.get(u);d&&(St(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.na=!0:o.modifiedDocuments.size>0?St(d.na):o.removedDocuments.size>0&&(St(d.na),d.na=!1))}),yield Ju(t,r,e)}catch(r){yield Bf(r)}})).apply(this,arguments)}function ED(n,e,t){const r=Ye(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ia.forEach((u,d)=>{const f=d.view.Pu(e);f.snapshot&&o.push(f.snapshot)}),function(u,d){const f=Ye(u);f.onlineState=d;let y=!1;f.queries.forEach((w,D)=>{for(const A of D.listeners)A.Pu(d)&&(y=!0)}),y&&C0(f)}(r.eventManager,e),o.length&&r.sa.zo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function cN(n,e,t){return al.apply(this,arguments)}function al(){return(al=(0,Ie.Z)(function*(n,e,t){const r=Ye(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.aa.get(e),u=o&&o.key;if(u){let d=new yr(Ge.comparator);d=d.insert(u,Hn.newNoDocument(u,It.min()));const f=Sn().add(u),y=new Bg(It.min(),new Map,new Vn($t),d,f);yield yD(r,y),r.ua=r.ua.remove(u),r.aa.delete(e),N0(r)}else yield Zu(r.localStore,e,!1).then(()=>Zf(r,e,t)).catch(Bf)})).apply(this,arguments)}function LM(n,e){return Hy.apply(this,arguments)}function Hy(){return(Hy=(0,Ie.Z)(function*(n,e){const t=Ye(n),r=e.batch.batchId;try{const o=yield Hx(t.localStore,e);R0(t,r,null),lm(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ju(t,o)}catch(o){yield Bf(o)}})).apply(this,arguments)}function lN(n,e,t){return wD.apply(this,arguments)}function wD(){return(wD=(0,Ie.Z)(function*(n,e,t){const r=Ye(n);try{const o=yield function(u,d){const f=Ye(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let w;return f.Bs.lookupMutationBatch(y,d).next(D=>(St(null!==D),w=D.keys(),f.Bs.removeMutationBatch(y,D))).next(()=>f.Bs.performConsistencyCheck(y)).next(()=>f.fi.Ks(y,w))})}(r.localStore,e);R0(r,e,t),lm(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ju(r,o)}catch(o){yield Bf(o)}})).apply(this,arguments)}function A0(){return(A0=(0,Ie.Z)(function*(n,e){const t=Ye(n);lr(t.remoteStore)||Ve("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=Ye(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>d.Bs.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const o=t.la.get(r)||[];o.push(e),t.la.set(r,o)}catch(r){const o=zf(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}})).apply(this,arguments)}function lm(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function R0(n,e,t){const r=Ye(n);let o=r.ha[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.ha[r.currentUser.toKey()]=o}}function Zf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||ID(n,r)})}function ID(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(om(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),N0(n))}function x0(n,e,t){for(const r of t)r instanceof mD?(n.ca.addReference(r.key,e),dN(n,r)):r instanceof Zd?(Ve("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||ID(n,r.key)):nt()}function dN(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||(Ve("SyncEngine","New document in limbo: "+t),n.oa.add(r),N0(n))}function N0(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new Ge(fn.fromString(e)),r=n.fa.next();n.aa.set(r,new oa(t)),n.ua=n.ua.insert(t,r),My(n.remoteStore,new Ka($s(Af(t.path)),r,2,Bs.A))}}function Ju(n,e,t){return P0.apply(this,arguments)}function P0(){return(P0=(0,Ie.Z)(function*(n,e,t){const r=Ye(n),o=[],u=[],d=[];var f;r.ia.isEmpty()||(r.ia.forEach((f,y)=>{d.push(r._a(y,e,t).then(w=>{if(w){r.isPrimaryClient&&r.sharedClientState.updateQueryState(y.targetId,w.fromCache?"not-current":"current"),o.push(w);const D=Jw.Ys(y.targetId,w);u.push(D)}}))}),yield Promise.all(d),r.sa.zo(o),yield(f=(0,Ie.Z)(function*(y,w){const D=Ye(y);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>me.forEach(w,M=>me.forEach(M.Hs,j=>D.persistence.referenceDelegate.addReference(A,M.targetId,j)).next(()=>me.forEach(M.Js,j=>D.persistence.referenceDelegate.removeReference(A,M.targetId,j)))))}catch(A){if(!Xc(A))throw A;Ve("LocalStore","Failed to update sequence numbers: "+A)}for(const A of w){const M=A.targetId;if(!A.fromCache){const j=D.ui.get(M),ye=j.withLastLimboFreeSnapshotVersion(j.snapshotVersion);D.ui=D.ui.insert(M,ye)}}}),function(y,w){return f.apply(this,arguments)})(r.localStore,u))})).apply(this,arguments)}function hN(n,e){return k0.apply(this,arguments)}function k0(){return(k0=(0,Ie.Z)(function*(n,e){const t=Ye(n);if(!t.currentUser.isEqual(e)){Ve("SyncEngine","User change. New user:",e.toKey());const r=yield e0(t.localStore,e);t.currentUser=e,(o=t).la.forEach(d=>{d.forEach(f=>{f.reject(new Pe(ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ju(t,r.di)}var o})).apply(this,arguments)}function dm(n,e){const t=Ye(n),r=t.aa.get(e);if(r&&r.na)return Sn().add(r.key);{let o=Sn();const u=t.ra.get(e);if(!u)return o;for(const d of u){const f=t.ia.get(d);o=o.unionWith(f.view.ju)}return o}}function CD(n,e){return Gy.apply(this,arguments)}function Gy(){return(Gy=(0,Ie.Z)(function*(n,e){const t=Ye(n),r=yield il(t.localStore,e.query,!0),o=e.view.ta(r);return t.isPrimaryClient&&x0(t,e.targetId,o.Xu),o})).apply(this,arguments)}function TD(n,e){return Wy.apply(this,arguments)}function Wy(){return(Wy=(0,Ie.Z)(function*(n,e){const t=Ye(n);return Yu(t.localStore,e).then(r=>Ju(t,r))})).apply(this,arguments)}function DD(n,e,t,r){return M0.apply(this,arguments)}function M0(){return(M0=(0,Ie.Z)(function*(n,e,t,r){const o=Ye(n),u=yield function(d,f){const y=Ye(d),w=Ye(y.Bs);return y.persistence.runTransaction("Lookup mutation documents","readonly",D=>w.fn(D,f).next(A=>A?y.fi.Ks(D,A):me.resolve(null)))}(o.localStore,e);var f;null!==u?("pending"===t?yield qf(o.remoteStore):"acknowledged"===t||"rejected"===t?(R0(o,e,r||null),lm(o,e),f=e,Ye(Ye(o.localStore).Bs)._n(f)):nt(),yield Ju(o,u)):Ve("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function O0(){return(O0=(0,Ie.Z)(function*(n,e){const t=Ye(n);if(Co(t),L0(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield SD(t,r.toArray());t.da=!0,yield qd(t.remoteStore,!0);for(const u of o)My(t.remoteStore,u)}else if(!1===e&&!1!==t.da){const r=[];let o=Promise.resolve();t.ra.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(Zf(t,d),Zu(t.localStore,d,!0))),om(t.remoteStore,d)}),yield o,yield SD(t,r),function(u){const d=Ye(u);d.aa.forEach((f,y)=>{om(d.remoteStore,y)}),d.ca.Si(),d.aa=new Map,d.ua=new yr(Ge.comparator)}(t),t.da=!1,yield qd(t.remoteStore,!1)}})).apply(this,arguments)}function SD(n,e,t){return F0.apply(this,arguments)}function F0(){return(F0=(0,Ie.Z)(function*(n,e,t){const r=Ye(n),o=[],u=[];for(const d of e){let f;const y=r.ra.get(d);if(y&&0!==y.length){f=yield Ku(r.localStore,$s(y[0]));for(const w of y){const D=r.ia.get(w),A=yield CD(r,D);A.snapshot&&u.push(A.snapshot)}}else{const w=yield wn(r.localStore,d);f=yield Ku(r.localStore,w),yield By(r,AD(w),d,!1)}o.push(f)}return r.sa.zo(u),o})).apply(this,arguments)}function AD(n){return kg(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function pN(n){const e=Ye(n);return Ye(Ye(e.localStore).persistence).Fs()}function hm(n,e,t,r){return Yd.apply(this,arguments)}function Yd(){return(Yd=(0,Ie.Z)(function*(n,e,t,r){const o=Ye(n);if(o.da)return void Ve("SyncEngine","Ignoring unexpected query state notification.");const u=o.ra.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield Yu(o.localStore,Rw(u[0])),f=Bg.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Ju(o,d,f);break}case"rejected":yield Zu(o.localStore,e,!0),Zf(o,e,r);break;default:nt()}})).apply(this,arguments)}function gN(n,e,t){return fm.apply(this,arguments)}function fm(){return(fm=(0,Ie.Z)(function*(n,e,t){const r=Co(n);if(r.da){for(const o of e){if(r.ra.has(o)){Ve("SyncEngine","Adding an already active target "+o);continue}const u=yield wn(r.localStore,o),d=yield Ku(r.localStore,u);yield By(r,AD(u),d.targetId,!1),My(r.remoteStore,d)}for(const o of t)r.ra.has(o)&&(yield Zu(r.localStore,o,!1).then(()=>{om(r.remoteStore,o),Zf(r,o)}).catch(Bf))}})).apply(this,arguments)}function Co(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=yD.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dm.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cN.bind(null,e),e.sa.zo=rN.bind(null,e.eventManager),e.sa.wa=iN.bind(null,e.eventManager),e}function L0(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=LM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lN.bind(null,e),e}class RD{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ie.Z)(function*(){t.M=Wf(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return Ay(this.persistence,new Xw,e.initialUser,this.M)}ya(e){return new Io(Gs.Yi,this.M)}ga(e){return new o0}terminate(){var e=this;return(0,Ie.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class xD extends RD{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ie.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield L0(r.Ta.syncEngine),yield qf(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return Ay(this.persistence,new Xw,e.initialUser,this.M)}pa(e){return new Ux(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=jf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?os.withCacheSize(this.cacheSizeBytes):os.DEFAULT;return new Qw(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,rD(),Gd(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new o0}}class UM extends xD{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ie.Z)(function*(){yield t().call(r,e);const o=r.Ta.syncEngine;r.sharedClientState instanceof s0&&(r.sharedClientState.syncEngine={$r:DD.bind(null,o),Br:hm.bind(null,o),Lr:gN.bind(null,o),Fs:pN.bind(null,o),Fr:TD.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,Ie.Z)(function*(d){yield function(n,e){return O0.apply(this,arguments)}(r.Ta.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):d||r.gcScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}ga(e){const t=rD();if(!s0.vt(t))throw new Pe(ge.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=jf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new s0(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class pm{initialize(e,t){var r=this;return(0,Ie.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>ED(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=hN.bind(null,r.syncEngine),yield qd(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new nN}createDatastore(e){const t=Wf(e.databaseInfo.databaseId),r=new Gf(e.databaseInfo);return new l0(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=f=>ED(this.syncEngine,f,0),d=Hf.vt()?new Hf:new a0,new FM(t,r,o,u,d);var t,r,o,u,d}createSyncEngine(e,t){return function(r,o,u,d,f,y,w){const D=new D0(r,o,u,d,f,y);return w&&(D.da=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ie.Z)(function*(t){const r=Ye(t);Ve("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield sm(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function zy(n,e=10240){let t=0;return{read:()=>(0,Ie.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ie.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class gm{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class U0{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new li,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,Ie.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,Ie.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),o=Number(r);isNaN(o)&&e.va(`length string (${r}) is not valid number`);const u=yield e.Sa(o);return new sN(JSON.parse(u),t.length+o)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,Ie.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,Ie.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class V0{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ie.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Pe(ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,Ie.Z)(function*(u,d){const f=Ye(u),y=Lf(f.M)+"/documents",w={documents:d.map(j=>zu(f.M,j))},D=yield f._o("BatchGetDocuments",y,w),A=new Map;D.forEach(j=>{const Y=function(n,e){return"found"in e?function(t,r){St(!!r.found);const o=qa(t,r.found.name),u=qr(r.found.updateTime),d=new Di({mapValue:{fields:r.found.fields}});return Hn.newFoundDocument(o,u,d)}(n,e):"missing"in e?function(t,r){St(!!r.missing),St(!!r.readTime);const o=qa(t,r.missing),u=qr(r.readTime);return Hn.newNoDocument(o,u)}(n,e):nt()}(f.M,j);A.set(Y.key.toString(),Y)});const M=[];return d.forEach(j=>{const Y=A.get(j.toString());St(!!Y),M.push(Y)}),M}),function(u,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new hy(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ie.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=Ge.fromPath(o);e.mutations.push(new Vg(u,e.precondition(u)))}),yield(r=(0,Ie.Z)(function*(o,u){const d=Ye(o),f=Lf(d.M)+"/documents",y={writes:u.map(w=>$g(d.M,w))};yield d.co("Commit",f,y)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw nt();t=It.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Pe(ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Cr.updateTime(t):Cr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(It.min()))throw new Pe(ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Cr.updateTime(t)}return Cr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class mN{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.xa=r.maxAttempts,this.No=new Ny(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,Ie.Z)(function*(){const t=new V0(e.datastore),r=e.ka(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Ma(u)}))}).catch(o=>{e.Ma(o)})}))}ka(e){try{const t=this.updateFunction(e);return!wf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!ix(t)}return!1}}class _N{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Ti.UNAUTHENTICATED,this.clientId=NC.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,Ie.Z)(function*(f){Ve("FirestoreClient","Received user=",f.uid),yield u.authCredentialListener(f),u.user=f});return function(f){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Ve("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,Ie.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Pe(ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new li;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=zf(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function ND(n,e){return B0.apply(this,arguments)}function B0(){return(B0=(0,Ie.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ve("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,Ie.Z)(function*(u){r.isEqual(u)||(yield e0(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e})).apply(this,arguments)}function j0(n,e){return mm.apply(this,arguments)}function mm(){return(mm=(0,Ie.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Ky(n);Ve("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>uD(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>uD(e.remoteStore,u)),n.onlineComponents=e})).apply(this,arguments)}function Ky(n){return $0.apply(this,arguments)}function $0(){return($0=(0,Ie.Z)(function*(n){return n.offlineComponents||(Ve("FirestoreClient","Using default OfflineComponentProvider"),yield ND(n,new RD)),n.offlineComponents})).apply(this,arguments)}function _m(n){return Zy.apply(this,arguments)}function Zy(){return(Zy=(0,Ie.Z)(function*(n){return n.onlineComponents||(Ve("FirestoreClient","Using default OnlineComponentProvider"),yield j0(n,new pm)),n.onlineComponents})).apply(this,arguments)}function PD(n){return Ky(n).then(e=>e.persistence)}function Yy(n){return Ky(n).then(e=>e.localStore)}function H0(n){return _m(n).then(e=>e.remoteStore)}function G0(n){return _m(n).then(e=>e.syncEngine)}function Qd(n){return W0.apply(this,arguments)}function W0(){return(W0=(0,Ie.Z)(function*(n){const e=yield _m(n),t=e.eventManager;return t.onListen=oN.bind(null,e.syncEngine),t.onUnlisten=aN.bind(null,e.syncEngine),t})).apply(this,arguments)}function kD(n,e,t={}){const r=new li;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(o,u,d,f,y){const w=new gm({next:A=>{u.enqueueAndForget(()=>fD(o,D));const M=A.docs.has(d);!M&&A.fromCache?y.reject(new Pe(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&A.fromCache&&f&&"server"===f.source?y.reject(new Pe(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(A)},error:A=>y.reject(A)}),D=new T0(Af(d.path),w,{includeMetadataChanges:!0,ku:!0});return dD(o,D)}(yield Qd(n),n.asyncQueue,e,t,r)})),r.promise}function vN(n,e,t={}){const r=new li;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(o,u,d,f,y){const w=new gm({next:A=>{u.enqueueAndForget(()=>fD(o,D)),A.fromCache&&"server"===f.source?y.reject(new Pe(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(A)},error:A=>y.reject(A)}),D=new T0(d,w,{includeMetadataChanges:!0,ku:!0});return dD(o,D)}(yield Qd(n),n.asyncQueue,e,t,r)})),r.promise}const z0=new Map;function K0(n,e,t){if(!t)throw new Pe(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function MD(n,e,t,r){if(!0===e&&!0===r)throw new Pe(ge.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Qy(n){if(!Ge.isDocumentKey(n))throw new Pe(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Z0(n){if(Ge.isDocumentKey(n))throw new Pe(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function vm(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":nt()}function Qt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Pe(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=vm(n);throw new Pe(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Jy(n,e){if(e<=0)throw new Pe(ge.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class bN{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Pe(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Pe(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,MD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qf{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bN({}),this._settingsFrozen=!1,e instanceof Ga?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Pe(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ga(o.options.projectId)}(e))}get app(){if(!this._app)throw new Pe(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Pe(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bN(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new NM;switch(t.type){case"gapi":const r=t.client;return St(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new SC(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Pe(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=z0.get(e);t&&(Ve("ComponentProvider","Removing Datastore"),z0.delete(e),t.terminate())}(this),Promise.resolve()}}class Bn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new aa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bn(this.firestore,e,this._key)}}class Zr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Zr(this.firestore,e,this._query)}}class aa extends Zr{constructor(e,t,r){super(e,t,Af(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bn(this.firestore,null,new Ge(e))}withConverter(e){return new aa(this.firestore,e,this._path)}}function OD(n,e,...t){if(n=(0,F.m9)(n),K0("collection","path",e),n instanceof Qf){const r=fn.fromString(e,...t);return Z0(r),new aa(n,null,r)}{if(!(n instanceof Bn||n instanceof aa))throw new Pe(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(fn.fromString(e,...t));return Z0(r),new aa(n.firestore,null,r)}}function Jf(n,e,...t){if(n=(0,F.m9)(n),1===arguments.length&&(e=NC.R()),K0("doc","path",e),n instanceof Qf){const r=fn.fromString(e,...t);return Qy(r),new Bn(n,null,new Ge(r))}{if(!(n instanceof Bn||n instanceof aa))throw new Pe(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(fn.fromString(e,...t));return Qy(r),new Bn(n.firestore,n instanceof aa?n.converter:null,new Ge(r))}}function FD(n,e){return n=(0,F.m9)(n),e=(0,F.m9)(e),(n instanceof Bn||n instanceof aa)&&(e instanceof Bn||e instanceof aa)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function LD(n,e){return n=(0,F.m9)(n),e=(0,F.m9)(e),n instanceof Zr&&e instanceof Zr&&n.firestore===e.firestore&&Rf(n._query,e._query)&&n.converter===e.converter}class UD{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new Ny(this,"async_queue_retry"),this.Qa=()=>{const t=Gd();t&&Ve("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=Gd();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=Gd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new li;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,Ie.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!Xc(t))throw t;Ve("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,Hr("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const o=I0.createAndSchedule(this,e,t,r,u=>this.Ha(u));return this.La.push(o),o}ja(){this.Ua&&nt()}verifyOperationInProgress(){}Ja(){var e=this;return(0,Ie.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function Xy(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class VD{constructor(){this._progressObserver={},this._taskCompletionResolver=new li,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Gn extends Qf{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new UD,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Q0(this),this._firestoreClient.terminate()}}function Vr(n){return n._firestoreClient||Q0(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Q0(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new KR(n._databaseId,u,n._persistenceKey,(f=t).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams));var u,f;n._firestoreClient=new _N(n._authCredentials,n._appCheckCredentials,n._queue,r)}function J0(n,e,t){const r=new li;return n.asyncQueue.enqueue((0,Ie.Z)(function*(){try{yield ND(n,t),yield j0(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(u=o).name?u.code===ge.FAILED_PRECONDITION||u.code===ge.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var u})).then(()=>r.promise)}function RN(n){if(n._initialized||n._terminated)throw new Pe(ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ul{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Pe(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Xu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xu(Wr.fromBase64String(e))}catch(t){throw new Pe(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Xu(Wr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Xf{constructor(e){this._methodName=e}}class X0{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Pe(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Pe(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $t(this._lat,e._lat)||$t(this._long,e._long)}}const HM=/^__.*__$/;class GM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Hs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pf(e,this.data,t,this.fieldTransforms)}}class xN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Hs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function NN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nt()}}class eb{constructor(e,t,r,o,u,d){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=o,void 0===u&&this.tc(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new eb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.nc({path:r,ic:!1});return o.rc(e),o}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.nc({path:r,ic:!1});return o.tc(),o}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return rb(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(NN(this.ec)&&HM.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class WM{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||Wf(e)}lc(e,t,r,o=!1){return new eb({ec:e,methodName:t,hc:r,path:Gr.emptyPath(),ic:!1,cc:o},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function ep(n){const e=n._freezeSettings(),t=Wf(n._databaseId);return new WM(n._databaseId,!!e.ignoreUndefinedProperties,t)}function tb(n,e,t,r,o,u={}){const d=n.lc(u.merge||u.mergeFields?2:0,e,t,o);KD("Data must be an object, but it was:",d,r);const f=zD(r,d);let y,w;if(u.merge)y=new Tg(d.fieldMask),w=d.fieldTransforms;else if(u.mergeFields){const D=[];for(const A of u.mergeFields){const M=ZD(e,A,t);if(!d.contains(M))throw new Pe(ge.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);YD(D,M)||D.push(M)}y=new Tg(D),w=d.fieldTransforms.filter(A=>y.covers(A.field))}else y=null,w=d.fieldTransforms;return new GM(new Di(f),y,w)}class ev extends Xf{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ev}}function PN(n,e,t){return new eb({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class nb extends Xf{_toFieldTransform(e){return new Fg(e.path,new xf)}isEqual(e){return e instanceof nb}}class kN extends Xf{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=PN(this,e,!0),r=this.fc.map(u=>Jd(u,t)),o=new Md(r);return new Fg(e.path,o)}isEqual(e){return this===e}}class MN extends Xf{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=PN(this,e,!0),r=this.fc.map(u=>Jd(u,t)),o=new Od(r);return new Fg(e.path,o)}isEqual(e){return this===e}}class qM extends Xf{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new Nf(e.M,YC(e.M,this.dc));return new Fg(e.path,t)}isEqual(e){return this===e}}function GD(n,e,t,r){const o=n.lc(1,e,t);KD("Data must be an object, but it was:",o,r);const u=[],d=Di.empty();Kc(r,(y,w)=>{const D=tv(e,y,t);w=(0,F.m9)(w);const A=o.oc(D);if(w instanceof ev)u.push(D);else{const M=Jd(w,A);null!=M&&(u.push(D),d.set(D,M))}});const f=new Tg(u);return new xN(d,f,o.fieldTransforms)}function WD(n,e,t,r,o,u){const d=n.lc(1,e,t),f=[ZD(e,r,t)],y=[o];if(u.length%2!=0)throw new Pe(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let M=0;M<u.length;M+=2)f.push(ZD(e,u[M])),y.push(u[M+1]);const w=[],D=Di.empty();for(let M=f.length-1;M>=0;--M)if(!YD(w,f[M])){const j=f[M];let Y=y[M];Y=(0,F.m9)(Y);const ye=d.oc(j);if(Y instanceof ev)w.push(j);else{const Re=Jd(Y,ye);null!=Re&&(w.push(j),D.set(j,Re))}}const A=new Tg(w);return new xN(D,A,d.fieldTransforms)}function qD(n,e,t,r=!1){return Jd(t,n.lc(r?4:3,e))}function Jd(n,e){if(ON(n=(0,F.m9)(n)))return KD("Unsupported field value:",e,n),zD(n,e);if(n instanceof Xf)return function(t,r){if(!NN(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const d of t){let f=Jd(d,r.uc(u));null==f&&(f={nullValue:"NULL_VALUE"}),o.push(f),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,F.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return YC(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Ir.fromDate(t);return{timestampValue:Jc(r.M,o)}}if(t instanceof Ir){const o=new Ir(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Jc(r.M,o)}}if(t instanceof X0)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Xu)return{bytesValue:Mw(r.M,t._byteString)};if(t instanceof Bn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.ac(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Ow(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${vm(t)}`)}(n,e)}function zD(n,e){const t={};return fw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Kc(n,(r,o)=>{const u=Jd(o,e.sc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function ON(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Ir||n instanceof X0||n instanceof Xu||n instanceof Bn||n instanceof Xf)}function KD(n,e,t){if(!ON(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=vm(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function ZD(n,e,t){if((e=(0,F.m9)(e))instanceof ul)return e._internalPath;if("string"==typeof e)return tv(n,e);throw rb("Field path arguments must be of type string or ",n,!1,void 0,t)}const zM=new RegExp("[~\\*/\\[\\]]");function tv(n,e,t){if(e.search(zM)>=0)throw rb(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ul(...e.split("."))._internalPath}catch(r){throw rb(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function rb(n,e,t,r,o){const u=r&&!r.isEmpty(),d=void 0!==o;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let y="";return(u||d)&&(y+=" (found",u&&(y+=` in field ${r}`),d&&(y+=` in document ${o}`),y+=")"),new Pe(ge.INVALID_ARGUMENT,f+n+y)}function YD(n,e){return n.some(t=>t.isEqual(e))}class Xd{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Bn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new tp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Em("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class tp extends Xd{data(){return super.data()}}function Em(n,e){return"string"==typeof e?tv(n,e):e instanceof ul?e._internalPath:e._delegate._internalPath}class eh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ec extends Xd{constructor(e,t,r,o,u,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new th(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Em("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class th extends ec{data(e={}){return super.data(e)}}class tc{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new eh(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new th(this._firestore,this._userDataWriter,r.key,r,new eh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Pe(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new th(r._firestore,r._userDataWriter,d.doc.key,d.doc,new eh(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const f=new th(r._firestore,r._userDataWriter,d.doc.key,d.doc,new eh(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let y=-1,w=-1;return 0!==d.type&&(y=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),w=u.indexOf(d.doc.key)),{type:QD(d.type),doc:f,oldIndex:y,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function QD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nt()}}function ib(n,e){return n instanceof ec&&e instanceof ec?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof tc&&e instanceof tc&&n._firestore===e._firestore&&LD(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function FN(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Pe(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class np{}function ua(n,...e){for(const t of e)n=t._apply(n);return n}class JD extends np{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=ep(e.firestore),r=function(o,u,d,f,y,w,D){let A;if(y.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Pe(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){VN(D,w);const j=[];for(const Y of D)j.push(tS(f,o,Y));A={arrayValue:{values:j}}}else A=tS(f,o,D)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||VN(D,w),A=qD(d,"where",D,"in"===w||"not-in"===w);const M=Ln.create(y,w,A);return function(j,Y){if(Y.S()){const Re=Mg(j);if(null!==Re&&!Re.isEqual(Y.field))throw new Pe(ge.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Re.toString()}' and '${Y.field.toString()}'`);const lt=oy(j);null!==lt&&sb(0,Y.field,lt)}const ye=function(Re,lt){for(const ct of Re.filters)if(lt.indexOf(ct.op)>=0)return ct.op;return null}(j,function(Re){switch(Re){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Y.op));if(null!==ye)throw new Pe(ge.INVALID_ARGUMENT,ye===Y.op?`Invalid query. You cannot use more than one '${Y.op.toString()}' filter.`:`Invalid query. You cannot use '${Y.op.toString()}' filters with '${ye.toString()}' filters.`)}(o,M),M}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new Zr(e.firestore,e.converter,function(o,u){const d=o.filters.concat([u]);return new Wa(o.path,o.collectionGroup,o.explicitOrderBy.slice(),d,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class ZM extends np{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Pe(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Pe(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Sf(o,u);return function(f,y){if(null===oy(f)){const w=Mg(f);null!==w&&sb(0,w,y.field)}}(r,d),d}(e._query,this._c,this.gc);return new Zr(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new Wa(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class XD extends np{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new Zr(e.firestore,e.converter,Sw(e._query,this.yc,this.Ic))}}class eS extends np{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=UN(e,this.type,this.Tc,this.Ec);return new Zr(e.firestore,e.converter,(o=t,new Wa((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class rv extends np{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=UN(e,this.type,this.Tc,this.Ec);return new Zr(e.firestore,e.converter,(o=t,new Wa((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function UN(n,e,t,r){if(t[0]=(0,F.m9)(t[0]),t[0]instanceof Xd)return function(o,u,d,f,y){if(!f)throw new Pe(ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const w=[];for(const D of kd(o))if(D.field.isKeyField())w.push(xd(u,f.key));else{const A=f.data.field(D.field);if(Sg(A))throw new Pe(ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===A){const M=D.field.canonicalString();throw new Pe(ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${M}' (used as the orderBy) does not exist.`)}w.push(A)}return new Eo(w,y)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=ep(n.firestore);return function(u,d,f,y,w,D){const A=u.explicitOrderBy;if(w.length>A.length)throw new Pe(ge.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const M=[];for(let j=0;j<w.length;j++){const Y=w[j];if(A[j].field.isKeyField()){if("string"!=typeof Y)throw new Pe(ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof Y}`);if(!Og(u)&&-1!==Y.indexOf("/"))throw new Pe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${Y}' contains a slash.`);const ye=u.path.child(fn.fromString(Y));if(!Ge.isDocumentKey(ye))throw new Pe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${ye}' is not because it contains an odd number of segments.`);const Re=new Ge(ye);M.push(xd(d,Re))}else{const ye=qD(f,y,Y);M.push(ye)}}return new Eo(M,D)}(n._query,n.firestore._databaseId,o,e,t,r)}}function tS(n,e,t){if("string"==typeof(t=(0,F.m9)(t))){if(""===t)throw new Pe(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Og(e)&&-1!==t.indexOf("/"))throw new Pe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(fn.fromString(t));if(!Ge.isDocumentKey(r))throw new Pe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return xd(n,new Ge(r))}if(t instanceof Bn)return xd(n,t._key);throw new Pe(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vm(t)}.`)}function VN(n,e){if(!Array.isArray(n)||0===n.length)throw new Pe(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Pe(ge.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function sb(n,e,t){if(!t.isEqual(e))throw new Pe(ge.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const BN={maxAttempts:5};class nS{convertValue(e,t="none"){switch(Wu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Hu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw nt()}}convertObject(e,t){const r={};return Kc(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new X0(mr(e.latitude),mr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=mw(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ey(e));default:return null}}convertTimestamp(e){const t=Ha(e);return new Ir(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=fn.fromString(e);St(yT(r));const o=new Ga(r.get(1),r.get(3)),u=new Ge(r.popFirst(5));return o.isEqual(t)||Hr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function ob(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class jN extends nS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bn(this.firestore,null,t)}}class rp{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ep(e)}set(e,t,r){this._verifyNotCommitted();const o=cl(e,this._firestore),u=ob(o.converter,t,r),d=tb(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,Cr.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=cl(e,this._firestore);let d;return d="string"==typeof(t=(0,F.m9)(t))||t instanceof ul?WD(this._dataReader,"WriteBatch.update",u._key,t,r,o):GD(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,Cr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=cl(e,this._firestore);return this._mutations=this._mutations.concat(new hy(t._key,Cr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Pe(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function cl(n,e){if((n=(0,F.m9)(n)).firestore!==e)throw new Pe(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class nh extends nS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bn(this.firestore,null,t)}}function rS(n,e,t){n=Qt(n,Bn);const r=Qt(n.firestore,Gn),o=ob(n.converter,e,t);return rh(r,[tb(ep(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Cr.none())])}function iS(n,e,t,...r){n=Qt(n,Bn);const o=Qt(n.firestore,Gn),u=ep(o);let d;return d="string"==typeof(e=(0,F.m9)(e))||e instanceof ul?WD(u,"updateDoc",n._key,e,t,r):GD(u,"updateDoc",n._key,e),rh(o,[d.toMutation(n._key,Cr.exists(!0))])}function lb(n,...e){var t,r,o;n=(0,F.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||Xy(e[d])||(u=e[d],d++);const f={includeMetadataChanges:u.includeMetadataChanges};if(Xy(e[d])){const A=e[d];e[d]=null===(t=A.next)||void 0===t?void 0:t.bind(A),e[d+1]=null===(r=A.error)||void 0===r?void 0:r.bind(A),e[d+2]=null===(o=A.complete)||void 0===o?void 0:o.bind(A)}let y,w,D;if(n instanceof Bn)w=Qt(n.firestore,Gn),D=Af(n._key.path),y={next:A=>{e[d]&&e[d](iv(w,n,A))},error:e[d+1],complete:e[d+2]};else{const A=Qt(n,Zr);w=Qt(A.firestore,Gn),D=A._query;const M=new nh(w);y={next:j=>{e[d]&&e[d](new tc(w,M,A,j))},error:e[d+1],complete:e[d+2]},FN(n._query)}return function(A,M,j,Y){const ye=new gm(Y),Re=new T0(M,ye,j);return A.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return dD(yield Qd(A),Re)})),()=>{ye.Aa(),A.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return fD(yield Qd(A),Re)}))}}(Vr(w),D,f,y)}function rh(n,e){return function(t,r){const o=new li;return t.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(n,e,t){return $y.apply(this,arguments)}(yield G0(t),r,o)})),o.promise}(Vr(n),e)}function iv(n,e,t){const r=t.docs.get(e._key),o=new nh(n);return new ec(n,o,e._key,r,new eh(t.hasPendingWrites,t.fromCache),e.converter)}class qN extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ep(e)}get(e){const t=cl(e,this._firestore),r=new jN(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return nt();const u=o[0];if(u.isFoundDocument())return new Xd(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new Xd(this._firestore,r,t._key,null,t.converter);throw nt()})}set(e,t,r){const o=cl(e,this._firestore),u=ob(o.converter,t,r),d=tb(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const u=cl(e,this._firestore);let d;return d="string"==typeof(t=(0,F.m9)(t))||t instanceof ul?WD(this._dataReader,"Transaction.update",u._key,t,r,o):GD(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=cl(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=cl(e,this._firestore),r=new nh(this._firestore);return super.get(e).then(o=>new ec(this._firestore,r,t._key,o._document,new eh(!1,!1),t.converter))}}function fb(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Pe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function uS(){if("undefined"==typeof Uint8Array)throw new Pe("unimplemented","Uint8Arrays are not available in this environment.")}function cS(){if("undefined"==typeof atob)throw new Pe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Sd=ns.SDK_VERSION,(0,ns._registerComponent)(new go.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new Gn(o,new vf(t.getProvider("auth-internal")),new RC(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,ns.registerVersion)(GR,"3.4.9",n),(0,ns.registerVersion)(GR,"3.4.9","esm2017")}();class sv{constructor(e){this._delegate=e}static fromBase64String(e){return cS(),new sv(Xu.fromBase64String(e))}static fromUint8Array(e){return uS(),new sv(Xu.fromUint8Array(e))}toBase64(){return cS(),this._delegate.toBase64()}toUint8Array(){return uS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function pb(n){return function(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of["next","error","complete"])if(r in t&&"function"==typeof t[r])return!0;return!1}(n)}class QN{enableIndexedDbPersistence(e,t){return function(n,e){RN(n=Qt(n,Gn));const t=Vr(n),r=n._freezeSettings(),o=new pm;return J0(t,o,new xD(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(n){RN(n=Qt(n,Gn));const e=Vr(n),t=n._freezeSettings(),r=new pm;return J0(e,r,new UM(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(n){if(n._initialized&&!n._terminated)throw new Pe(ge.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new li;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{yield(t=(0,Ie.Z)(function*(r){if(!bo.vt())return Promise.resolve();const o=r+"main";yield bo.delete(o)}),function(r){return t.apply(this,arguments)})(jf(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class dS{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ga||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Cg("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function(n,e,t,r={}){var o;const u=(n=Qt(n,Qf))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Cg("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,f;if("string"==typeof r.mockUserToken)d=r.mockUserToken,f=Ti.MOCK_USER;else{d=(0,F.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Pe(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Ti(y)}n._authCredentials=new qR(new dw(d,f))}}(this._delegate,e,t,r)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){const e=yield PD(n),t=yield H0(n);return e.setNetworkEnabled(!0),function(r){const o=Ye(r);return o.wu.delete(0),ky(o)}(t)}))}(Vr(n=Qt(n,Gn)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){const e=yield PD(n),t=yield H0(n);return e.setNetworkEnabled(!1),(r=(0,Ie.Z)(function*(o){const u=Ye(o);u.wu.add(0),yield sm(u),u.yu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Vr(n=Qt(n,Gn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,MD("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(e){const t=new li;return e.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(n,e){return A0.apply(this,arguments)}(yield G0(e),t)})),t.promise}(Vr(n=Qt(n,Gn)))}(this._delegate)}onSnapshotsInSync(e){return function(n,e){return function(n,e){const t=new gm(e);return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return r=yield Qd(n),o=t,Ye(r).bu.add(o),void o.next();var r,o})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return r=yield Qd(n),o=t,void Ye(r).bu.delete(o);var r,o}))}}(Vr(n=Qt(n,Gn)),Xy(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Pe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new bm(this,OD(this._delegate,e))}catch(t){throw us(t,"collection()","Firestore.collection()")}}doc(e){try{return new To(this,Jf(this._delegate,e))}catch(t){throw us(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new cs(this,function(n,e){if(n=Qt(n,Qf),K0("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Pe(ge.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Zr(n,null,(t=e,new Wa(fn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw us(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(n,e,t){n=Qt(n,Gn);const r=Object.assign(Object.assign({},BN),t);return function(o){if(o.maxAttempts<1)throw new Pe(ge.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(n,e,t){const r=new li;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){const o=yield(u=n,_m(u).then(d=>d.datastore));var u;new mN(n.asyncQueue,o,t,e,r).run()})),r.promise}(Vr(n),o=>e(new qN(n,o)),r)}(this._delegate,t=>e(new XN(this,t)))}batch(){return Vr(this._delegate),new gb(new rp(this._delegate,e=>rh(this._delegate,e)))}loadBundle(e){return function(n,e){const t=Vr(n=Qt(n,Gn)),r=new VD;return function(n,e,t,r){const o=function(u,d){let f;return f="string"==typeof u?(new TextEncoder).encode(u):u,y=function(y,w){if(y instanceof Uint8Array)return zy(y,w);if(y instanceof ArrayBuffer)return zy(new Uint8Array(y),w);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new U0(y,d);var y}(t,Wf(e));n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){!function(n,e,t){const r=Ye(n);var o;(o=(0,Ie.Z)(function*(u,d,f){try{const y=yield d.getMetadata();if(yield function(M,j){const Y=Ye(M),ye=qr(j.createTime);return Y.persistence.runTransaction("hasNewerBundle","readonly",Re=>Y._s.getBundleMetadata(Re,j.id)).then(Re=>!!Re&&Re.createTime.compareTo(ye)>=0)}(u.localStore,y))return yield d.close(),f._completeWith({taskState:"Success",documentsLoaded:(M=y).totalDocuments,bytesLoaded:M.totalBytes,totalDocuments:M.totalDocuments,totalBytes:M.totalBytes}),Promise.resolve(new Set);f._updateProgress(Uy(y));const w=new gD(y,u.localStore,d.M);let D=yield d.ma();for(;D;){const M=yield w.Fu(D);M&&f._updateProgress(M),D=yield d.ma()}const A=yield w.complete();return yield Ju(u,A.Lu,void 0),yield function(M,j){const Y=Ye(M);return Y.persistence.runTransaction("Save bundle","readwrite",ye=>Y._s.saveBundleMetadata(ye,j))}(u.localStore,y),f._completeWith(A.progress),Promise.resolve(A.Bu)}catch(y){return Cg("SyncEngine",`Loading bundle failed with ${y}`),f._failWith(y),Promise.resolve(new Set)}var M}),function(u,d,f){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield G0(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function(n,e){return function(n,e){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){return function(t,r){const o=Ye(t);return o.persistence.runTransaction("Get named query","readonly",u=>o._s.getNamedQuery(u,r))}(yield Yy(n),e)}))}(Vr(n=Qt(n,Gn)),e).then(t=>t?new Zr(n,null,t.query):null)}(this._delegate,e).then(t=>t?new cs(this,t):null)}}class wm extends nS{constructor(e){super(),this.firestore=e}convertBytes(e){return new sv(new Xu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return To.forKey(t,this.firestore,null)}}class XN{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new wm(e)}get(e){const t=op(e);return this._delegate.get(t).then(r=>new ih(this._firestore,new ec(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=op(e);return r?(fb("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=op(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=op(e);return this._delegate.delete(t),this}}class gb{constructor(e){this._delegate=e}set(e,t,r){const o=op(e);return r?(fb("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=op(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=op(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class ll{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new th(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new sp(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=ll.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new ll(e,new wm(e),t),o.set(t,u)),u}}ll.INSTANCES=new WeakMap;class To{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new wm(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Pe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new To(t,new Bn(t._delegate,r,new Ge(e)))}static forKey(e,t,r){return new To(t,new Bn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new bm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new bm(this.firestore,OD(this._delegate,e))}catch(t){throw us(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,F.m9)(e))instanceof Bn&&FD(this._delegate,e)}set(e,t){t=fb("DocumentReference.set",t);try{return t?rS(this._delegate,e,t):rS(this._delegate,e)}catch(r){throw us(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?iS(this._delegate,e):iS(this._delegate,e,t,...r)}catch(o){throw us(o,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return rh(Qt(n.firestore,Gn),[new hy(n._key,Cr.none())])}(this._delegate)}onSnapshot(...e){const t=mb(e),r=ip(e,o=>new ih(this.firestore,new ec(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return lb(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=Qt(n,Bn);const e=Qt(n.firestore,Gn),t=Vr(e),r=new nh(e);return function(n,e){const t=new li;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(r=(0,Ie.Z)(function*(o,u,d){try{const f=yield function(y,w){const D=Ye(y);return D.persistence.runTransaction("read document","readonly",A=>D.fi.Ls(A,w))}(o,u);f.isFoundDocument()?d.resolve(f):f.isNoDocument()?d.resolve(null):d.reject(new Pe(ge.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const y=zf(f,`Failed to get document '${u} from cache`);d.reject(y)}}),function(o,u,d){return r.apply(this,arguments)})(yield Yy(n),e,t);var r})),t.promise}(t,n._key).then(o=>new ec(e,r,n._key,o,new eh(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=Qt(n,Bn);const e=Qt(n.firestore,Gn);return kD(Vr(e),n._key,{source:"server"}).then(t=>iv(e,n,t))}(this._delegate):function(n){n=Qt(n,Bn);const e=Qt(n.firestore,Gn);return kD(Vr(e),n._key).then(t=>iv(e,n,t))}(this._delegate),t.then(r=>new ih(this.firestore,new ec(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new To(this.firestore,this._delegate.withConverter(e?ll.getInstance(this.firestore,e):null))}}function us(n,e,t){return n.message=n.message.replace(e,t),n}function mb(n){for(const e of n)if("object"==typeof e&&!pb(e))return e;return{}}function ip(n,e){var t,r;let o;return o=pb(n[0])?n[0]:pb(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class ih{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new To(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return ib(this._delegate,e._delegate)}}class sp extends ih{data(e){const t=this._delegate.data(e);return function(n,e){n||nt()}(void 0!==t),t}}class cs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new wm(e)}where(e,t,r){try{return new cs(this.firestore,ua(this._delegate,function(n,e,t){const r=e,o=Em("where",n);return new JD(o,r,t)}(e,t,r)))}catch(o){throw us(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new cs(this.firestore,ua(this._delegate,function(n,e="asc"){const t=e,r=Em("orderBy",n);return new ZM(r,t)}(e,t)))}catch(r){throw us(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new cs(this.firestore,ua(this._delegate,function(n){return Jy("limit",n),new XD("limit",n,"F")}(e)))}catch(t){throw us(t,"limit()","Query.limit()")}}limitToLast(e){try{return new cs(this.firestore,ua(this._delegate,function(n){return Jy("limitToLast",n),new XD("limitToLast",n,"L")}(e)))}catch(t){throw us(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new cs(this.firestore,ua(this._delegate,function(...n){return new eS("startAt",n,!0)}(...e)))}catch(t){throw us(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new cs(this.firestore,ua(this._delegate,function(...n){return new eS("startAfter",n,!1)}(...e)))}catch(t){throw us(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new cs(this.firestore,ua(this._delegate,function(...n){return new rv("endBefore",n,!1)}(...e)))}catch(t){throw us(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new cs(this.firestore,ua(this._delegate,function(...n){return new rv("endAt",n,!0)}(...e)))}catch(t){throw us(t,"endAt()","Query.endAt()")}}isEqual(e){return LD(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=Qt(n,Zr);const e=Qt(n.firestore,Gn),t=Vr(e),r=new nh(e);return function(n,e){const t=new li;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(r=(0,Ie.Z)(function*(o,u,d){try{const f=yield il(o,u,!0),y=new Si(u,f._i),w=y.Wu(f.documents),D=y.applyChanges(w,!1);d.resolve(D.snapshot)}catch(f){const y=zf(f,`Failed to execute query '${u} against cache`);d.reject(y)}}),function(o,u,d){return r.apply(this,arguments)})(yield Yy(n),e,t);var r})),t.promise}(t,n._query).then(o=>new tc(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=Qt(n,Zr);const e=Qt(n.firestore,Gn),t=Vr(e),r=new nh(e);return vN(t,n._query,{source:"server"}).then(o=>new tc(e,r,n,o))}(this._delegate):function(n){n=Qt(n,Zr);const e=Qt(n.firestore,Gn),t=Vr(e),r=new nh(e);return FN(n._query),vN(t,n._query).then(o=>new tc(e,r,n,o))}(this._delegate),t.then(r=>new hS(this.firestore,new tc(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=mb(e),r=ip(e,o=>new hS(this.firestore,new tc(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return lb(this._delegate,t,r)}withConverter(e){return new cs(this.firestore,this._delegate.withConverter(e?ll.getInstance(this.firestore,e):null))}}class eP{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new sp(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class hS{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new cs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new sp(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new eP(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new sp(this._firestore,r))})}isEqual(e){return ib(this._delegate,e._delegate)}}class bm extends cs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new To(this.firestore,e):null}doc(e){try{return new To(this.firestore,void 0===e?Jf(this._delegate):Jf(this._delegate,e))}catch(t){throw us(t,"doc()","CollectionReference.doc()")}}add(e){return function(n,e){const t=Qt(n.firestore,Gn),r=Jf(n),o=ob(n.converter,e);return rh(t,[tb(ep(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Cr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new To(this.firestore,t))}isEqual(e){return FD(this._delegate,e._delegate)}withConverter(e){return new bm(this.firestore,this._delegate.withConverter(e?ll.getInstance(this.firestore,e):null))}}function op(n){return Qt(n,Bn)}class ov{constructor(...e){this._delegate=new ul(...e)}static documentId(){return new ov(Gr.keyField().canonicalString())}isEqual(e){return(e=(0,F.m9)(e))instanceof ul&&this._delegate._internalPath.isEqual(e._internalPath)}}class dl{constructor(e){this._delegate=e}static serverTimestamp(){const e=new nb("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new dl(e)}static delete(){const e=new ev("deleteField");return e._methodName="FieldValue.delete",new dl(e)}static arrayUnion(...e){const t=function(...n){return new kN("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new dl(t)}static arrayRemove(...e){const t=function(...n){return new MN("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new dl(t)}static increment(e){const t=function(n){return new qM("increment",n)}(e);return t._methodName="FieldValue.increment",new dl(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const tP={Firestore:dS,GeoPoint:X0,Timestamp:Ir,Blob:sv,Transaction:XN,WriteBatch:gb,DocumentReference:To,DocumentSnapshot:ih,Query:cs,QueryDocumentSnapshot:sp,QuerySnapshot:hS,CollectionReference:bm,FieldPath:ov,FieldValue:dl,setLogLevel:function(n){!function(n){Ad.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function(n){(function(n,e){n.INTERNAL.registerComponent(new go.wA("firestore-compat",t=>((e,t)=>new dS(e,t,new QN))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},tP)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.18")}(GI.Z);var _b=U(6682),ap=U(309),rO=U(7771),iO=U(8858);class iP extends Ns.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new yb(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,r=t?this._events:this._trimBufferThenGetEvents(),o=this.scheduler,u=r.length;let d;if(this.closed)throw new Aa.N;if(this.isStopped||this.hasError?d=Lh.w.EMPTY:(this.observers.push(e),d=new iO.W(this,e)),o&&e.add(e=new ap.ht(e,o)),t)for(let f=0;f<u&&!e.closed;f++)e.next(r[f]);else for(let f=0;f<u&&!e.closed;f++)e.next(r[f].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),d}_getNow(){return(this.scheduler||rO.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,r=this._windowTime,o=this._events,u=o.length;let d=0;for(;d<u&&!(e-o[d].time<r);)d++;return u>t&&(d=Math.max(d,u-t)),d>0&&o.splice(0,d),o}}class yb{constructor(e,t){this.time=e,this.value=t}}function Yr(n,e,t){let r;return r=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},o=>o.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:r}){let o,d,u=0,f=!1,y=!1;return function(D){let A;u++,!o||f?(f=!1,o=new iP(n,e,r),A=o.subscribe(this),d=D.subscribe({next(M){o.next(M)},error(M){f=!0,o.error(M)},complete(){y=!0,d=void 0,o.complete()}}),y&&(d=void 0)):A=o.subscribe(this),this.add(()=>{u--,A.unsubscribe(),A=void 0,d&&!y&&t&&0===u&&(d.unsubscribe(),d=void 0,o=void 0)})}}(r))}function vb(n,e){return e?ur(()=>n,e):ur(()=>n)}var av=U(3101);U(2329);const cP=new Map,uv={activated:!1,tokenObservers:[]},lP={initialized:!1,enabled:!1};function Ri(n){return cP.get(n)||uv}function Xa(n,e){cP.set(n,e)}function bb(){return lP}class pP{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ie.Z)(function*(){t.stop();try{t.pending=new F.BH,yield function(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new F.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const bs=new F.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function yS(n){if(!Ri(n).activated)throw bs.create("use-before-activation",{appName:n.name})}function Db(n,e){return qs.apply(this,arguments)}function qs(){return(qs=(0,Ie.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const A=yield o.getHeartbeatsHeader();A&&(r["X-Firebase-Client"]=A)}const u={method:"POST",body:JSON.stringify(e),headers:r};let d,f;try{d=yield fetch(n,u)}catch(A){throw bs.create("fetch-network-error",{originalErrorMessage:A.message})}if(200!==d.status)throw bs.create("fetch-status-error",{httpStatus:d.status});try{f=yield d.json()}catch(A){throw bs.create("fetch-parse-error",{originalErrorMessage:A.message})}const y=f.ttl.match(/^([\d.]+)(s)$/);if(!y||!y[2]||isNaN(Number(y[1])))throw bs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const w=1e3*Number(y[1]),D=Date.now();return{token:f.token,expireTimeMillis:D+w,issuedAtTimeMillis:D}})).apply(this,arguments)}function EP(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const Im="firebase-app-check-store";let lv=null;function up(){return lv||(lv=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(bs.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{const o=r.target.result;switch(r.oldVersion){case 0:o.createObjectStore(Im,{keyPath:"compositeKey"})}}}catch(t){e(bs.create("storage-open",{originalErrorMessage:t.message}))}}),lv)}function wS(){return(wS=(0,Ie.Z)(function*(n,e){const r=(yield up()).transaction(Im,"readwrite"),u=r.objectStore(Im).put({compositeKey:n,value:e});return new Promise((d,f)=>{u.onsuccess=y=>{d()},r.onerror=y=>{var w;f(bs.create("storage-set",{originalErrorMessage:null===(w=y.target.error)||void 0===w?void 0:w.message}))}})})).apply(this,arguments)}const Cm=new pt.Yd("@firebase/app-check");function IS(n,e){return(0,F.hl)()?function(n,e){return function(n,e){return wS.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Cm.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function TP(){return bb().enabled}function Rb(){return xb.apply(this,arguments)}function xb(){return(xb=(0,Ie.Z)(function*(){const n=bb();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const TS={error:"UNKNOWN_ERROR"};function DS(n){return F.US.encodeString(JSON.stringify(n),!1)}function cp(n){return Tm.apply(this,arguments)}function Tm(){return(Tm=(0,Ie.Z)(function*(n,e=!1){const t=n.app;yS(t);const r=Ri(t);let u,o=r.token;if(!o){const y=yield r.cachedTokenPromise;y&&hv(y)&&(o=y)}if(!e&&o&&hv(o))return{token:o.token};let f,d=!1;if(TP()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Db(EP(t,yield Rb()),n.heartbeatServiceProvider).then(w=>(r.exchangeTokenPromise=void 0,w)),d=!0);const y=yield r.exchangeTokenPromise;return yield IS(t,y),Xa(t,Object.assign(Object.assign({},r),{token:y})),{token:y.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(y=>(r.exchangeTokenPromise=void 0,y)),d=!0),o=yield r.exchangeTokenPromise}catch(y){"appCheck/throttled"===y.code?Cm.warn(y.message):Cm.error(y),u=y}return o?(f={token:o.token},Xa(t,Object.assign(Object.assign({},r),{token:o})),yield IS(t,o)):f=DP(u),d&&Nb(t,f),f})).apply(this,arguments)}function lp(n,e){const t=Ri(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Xa(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function Sm(n){const{app:e}=n,t=Ri(e);let r=t.tokenRefresher;r||(r=function(n){const{app:e}=n;return new pP((0,Ie.Z)(function*(){let r;if(r=Ri(e).token?yield cp(n,!0):yield cp(n),r.error)throw r.error}),()=>!0,()=>{const t=Ri(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Xa(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Nb(n,e){const t=Ri(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function hv(n){return n.expireTimeMillis-Date.now()>0}function DP(n){return{token:DS(TS),error:n}}class AS{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ri(this.app);for(const t of e)lp(this.app,t.next);return Promise.resolve()}}const yv="app-check-internal";(0,ns._registerComponent)(new go.wA("app-check",n=>function(n,e){return new AS(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(yv).initialize()})),(0,ns._registerComponent)(new go.wA(yv,n=>function(n){return{getToken:e=>cp(n,e),addTokenListener:e=>function(n,e,t,r){const{app:o}=n,u=Ri(o),d={next:t,error:r,type:e};if(Xa(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,d]})),u.token&&hv(u.token)){const f=u.token;Promise.resolve().then(()=>{t({token:f.token}),Sm(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>Sm(n))}(n,"INTERNAL",e),removeTokenListener:e=>lp(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ns.registerVersion)("@firebase/app-check","0.5.8");class Nm{constructor(){return(0,on.vb)("app-check")}}"undefined"!=typeof window&&window;var wv=U(7841);const bv=new m.OlP("angularfire2.auth.use-emulator"),rc=new m.OlP("angularfire2.auth.settings"),Mm=new m.OlP("angularfire2.auth.tenant-id"),Lb=new m.OlP("angularfire2.auth.langugage-code"),Ub=new m.OlP("angularfire2.auth.use-device-language"),OS=new m.OlP("angularfire.auth.persistence"),FS=(n,e,t,r,o,u,d,f)=>(0,Lr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const y=e.runOutsideAngular(()=>n.auth());if(t&&y.useEmulator(...t),r&&(y.tenantId=r),y.languageCode=o,u&&y.useDeviceLanguage(),d)for(const[w,D]of Object.entries(d))y.settings[w]=D;return f&&y.setPersistence(f),y},[t,r,o,u,d,f]);let Iv=(()=>{class n{constructor(t,r,o,u,d,f,y,w,D,A,M,j){const Y=new Ns.xQ,ye=(0,at.of)(void 0).pipe((0,ap.QV)(d.outsideAngular),ur(()=>u.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,4828)))),(0,kt.U)(()=>(0,Lr.on)(t,u,r)),(0,kt.U)(Re=>FS(Re,u,f,w,D,A,y,M)),Yr({bufferSize:1,refCount:!1}));if(ya(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,at.of)(null);else{ye.pipe(Vi()).subscribe();const lt=ye.pipe(ur(st=>st.getRedirectResult().then(Vt=>Vt,()=>null)),on.iC,Yr({bufferSize:1,refCount:!1})),ct=ye.pipe(ur(st=>new Pr.y(Vt=>({unsubscribe:u.runOutsideAngular(()=>st.onAuthStateChanged(sn=>Vt.next(sn),sn=>Vt.error(sn),()=>Vt.complete()))})))),rt=ye.pipe(ur(st=>new Pr.y(Vt=>({unsubscribe:u.runOutsideAngular(()=>st.onIdTokenChanged(sn=>Vt.next(sn),sn=>Vt.error(sn),()=>Vt.complete()))}))));this.authState=lt.pipe(vb(ct),(0,av.R)(d.outsideAngular),(0,ap.QV)(d.insideAngular)),this.user=lt.pipe(vb(rt),(0,av.R)(d.outsideAngular),(0,ap.QV)(d.insideAngular)),this.idToken=this.user.pipe(ur(st=>st?(0,jt.D)(st.getIdToken()):(0,at.of)(null))),this.idTokenResult=this.user.pipe(ur(st=>st?(0,jt.D)(st.getIdTokenResult()):(0,at.of)(null))),this.credential=(0,_b.T)(lt,Y,this.authState.pipe(Li(st=>!st))).pipe((0,kt.U)(st=>(null==st?void 0:st.user)?st:null),(0,av.R)(d.outsideAngular),(0,ap.QV)(d.insideAngular))}return(0,Lr.pX)(this,ye,u,{spy:{apply:(Re,lt,ct)=>{(Re.startsWith("signIn")||Re.startsWith("createUser"))&&ct.then(rt=>Y.next(rt))}}})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Lr.Dh),m.LFG(Lr.xv,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(on.HU),m.LFG(bv,8),m.LFG(rc,8),m.LFG(Mm,8),m.LFG(Lb,8),m.LFG(Ub,8),m.LFG(OS,8),m.LFG(Nm,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),EO=(()=>{class n{constructor(){wv.Z.registerVersion("angularfire",on.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[Iv]}),n})();function LS(n,e){return function(n,e=A_.z){return new Pr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function US(n,e){return LS(n,e).pipe((0,kt.U)(t=>({payload:t,type:"query"})))}function Vb(n,e){return US(n,e).pipe(bu(void 0),Ls(),(0,kt.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,f)=>{const y=o.find(D=>D.doc.ref.isEqual(d.ref)),w=null==t?void 0:t.payload.docs.find(D=>D.ref.isEqual(d.ref));y&&JSON.stringify(y.doc.metadata)===JSON.stringify(d.metadata)||!y&&w&&JSON.stringify(w.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:d}})}),u}))}function $P(n,e,t){return Vb(n,t).pipe(xa((r,o)=>function(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return VS(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return VS(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return VS(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),R_(),(0,kt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function VS(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function GP(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class WP{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Vb(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,kt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(bu(void 0),Ls(),Li(([r,o])=>o.length>0||!r),(0,kt.U)(([r,o])=>o),on.iC)}auditTrail(e){return this.stateChanges(e).pipe(xa((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=GP(e);return $P(this.query,t,this.afs.schedulers.outsideAngular).pipe(on.iC)}valueChanges(e={}){return US(this.query,this.afs.schedulers.outsideAngular).pipe((0,kt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),on.iC)}get(e){return(0,jt.D)(this.query.get(e)).pipe(on.iC)}add(e){return this.ref.add(e)}doc(e){return new i(this.ref.doc(e),this.afs)}}class i{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=g(r,t);return new WP(o,u,this.afs)}snapshotChanges(){return function(n,e){return LS(n,e).pipe(bu(void 0),Ls(),(0,kt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(on.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,kt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,jt.D)(this.ref.get(e)).pipe(on.iC)}}class s{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Vb(this.query,this.afs.schedulers.outsideAngular).pipe((0,kt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Li(t=>t.length>0),on.iC):Vb(this.query,this.afs.schedulers.outsideAngular).pipe(on.iC)}auditTrail(e){return this.stateChanges(e).pipe(xa((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=GP(e);return $P(this.query,t,this.afs.schedulers.outsideAngular).pipe(on.iC)}valueChanges(e={}){return US(this.query,this.afs.schedulers.outsideAngular).pipe((0,kt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),on.iC)}get(e){return(0,jt.D)(this.query.get(e)).pipe(on.iC)}}const a=new m.OlP("angularfire2.enableFirestorePersistence"),c=new m.OlP("angularfire2.firestore.persistenceSettings"),l=new m.OlP("angularfire2.firestore.settings"),h=new m.OlP("angularfire2.firestore.use-emulator");function g(n,e=(t=>t)){return{query:e(n),ref:n}}let v=(()=>{class n{constructor(t,r,o,u,d,f,y,w,D,A,M,j,Y,ye,Re,lt,ct){this.schedulers=y;const rt=(0,Lr.on)(t,f,r),st=D;A&&FS(rt,f,M,Y,ye,Re,j,lt),[this.firestore,this.persistenceEnabled$]=(0,Lr.cc)(`${rt.name}.firestore`,"AngularFirestore",rt.name,()=>{const Vt=f.runOutsideAngular(()=>rt.firestore());if(u&&Vt.settings(u),st&&Vt.useEmulator(...st),o&&!ya(d)){const sn=()=>{try{return(0,jt.D)(Vt.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(di){return"undefined"!=typeof console&&console.warn(di),(0,at.of)(!1)}};return[Vt,f.runOutsideAngular(sn)]}return[Vt,(0,at.of)(!1)]},[u,st,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=g(o,r),f=this.schedulers.ngZone.run(()=>u);return new WP(f,d,this)}collectionGroup(t,r){const o=r||(d=>d),u=this.firestore.collectionGroup(t);return new s(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new i(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Lr.Dh),m.LFG(Lr.xv,8),m.LFG(a,8),m.LFG(l,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(on.HU),m.LFG(c,8),m.LFG(h,8),m.LFG(Iv,8),m.LFG(bv,8),m.LFG(rc,8),m.LFG(Mm,8),m.LFG(Lb,8),m.LFG(Ub,8),m.LFG(OS,8),m.LFG(Nm,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),I=(()=>{class n{constructor(){wv.Z.registerVersion("angularfire",on.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:a,useValue:!0},{provide:c,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[v]}),n})(),C=(()=>{class n{constructor(t,r,o,u){this.afs=t,this.afAuth=r,this.router=o,this.ngZone=u,this.afAuth.authState.subscribe(d=>{d?(this.userData=d,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(o=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(o.user)}).catch(o=>{window.alert(o.message)})}SignUp(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r).then(o=>{this.SendVerificationMail(),this.SetUserData(o.user)}).catch(o=>{window.alert(o.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}GoogleAuth(){return this.AuthLogin(new cR.Q).then(t=>{t&&this.router.navigate(["dashboard"])})}AuthLogin(t){return this.afAuth.signInWithPopup(t).then(r=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(r.user)}).catch(r=>{window.alert(r)})}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(v),m.LFG(Iv),m.LFG(Fr),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function R(n,e){if(1&n&&(m.TgZ(0,"div",4),m.TgZ(1,"div",18),m.TgZ(2,"div",19),m._UZ(3,"img",20),m.TgZ(4,"div",21),m.TgZ(5,"h1"),m._uU(6,"Hello: "),m.TgZ(7,"strong"),m._uU(8),m.qZA(),m.qZA(),m.TgZ(9,"p"),m._uU(10,"User ID: "),m.TgZ(11,"strong"),m._uU(12),m.qZA(),m.qZA(),m.TgZ(13,"p"),m._uU(14,"Email: "),m.TgZ(15,"strong"),m._uU(16),m.qZA(),m.qZA(),m.TgZ(17,"p"),m._uU(18,"Email Verified: "),m.TgZ(19,"strong"),m._uU(20),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&n){const t=e.ngIf;m.xp6(3),m.s9C("src",t.photoURL?t.photoURL:"/assets/dummy-user.png",m.LSH),m.s9C("alt",t.displayName),m.xp6(5),m.Oqu(t.displayName?t.displayName:"User"),m.xp6(4),m.Oqu(t.uid),m.xp6(4),m.Oqu(t.email),m.xp6(4),m.Oqu(t.emailVerified)}}let k=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(C))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-dashboard"]],decls:22,vars:1,consts:[[1,"navbar","navbar-dark","fixed-top","bg-dark","flex-md-nowrap","p-0","shadow"],[1,"navbar-brand","col-sm-3","col-md-2","mr-0"],["src","assets/logo-positronx-white.svg","alt","positronX.io Logo",1,"brand-logo"],[1,"container-fluid"],[1,"row"],[1,"col-md-2","d-md-block","bg-light","sidebar"],[1,"sidebar-sticky"],[1,"nav","flex-column"],[1,"nav-item"],[1,"nav-link","active"],[1,"fas","fa-user"],[1,"nav-link",3,"click"],[1,"fas","fa-sign-out-alt"],["role","main",1,"col-md-9","ml-sm-auto","col-lg-10","px-4"],[1,"inner-adjust"],[1,"pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],["class","row",4,"ngIf"],[1,"col-md-12"],[1,"media"],[1,"align-self-start","mr-5","img-thumbnail","rounded-circle",3,"src","alt"],[1,"media-body"]],template:function(t,r){1&t&&(m.TgZ(0,"nav",0),m.TgZ(1,"a",1),m._UZ(2,"img",2),m.qZA(),m.qZA(),m.TgZ(3,"div",3),m.TgZ(4,"div",4),m.TgZ(5,"nav",5),m.TgZ(6,"div",6),m.TgZ(7,"ul",7),m.TgZ(8,"li",8),m.TgZ(9,"a",9),m._UZ(10,"i",10),m._uU(11,"User Profile "),m.qZA(),m.qZA(),m.TgZ(12,"li",8),m.TgZ(13,"a",11),m.NdJ("click",function(){return r.authService.SignOut()}),m._UZ(14,"i",12),m._uU(15,"Log out "),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(16,"main",13),m.TgZ(17,"div",14),m.TgZ(18,"div",15),m.TgZ(19,"h1",16),m._uU(20,"User Profile"),m.qZA(),m.qZA(),m.YNc(21,R,21,6,"div",17),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&t&&(m.xp6(21),m.Q6J("ngIf",r.authService.userData))},directives:[Xs],styles:[""]}),n})(),L=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(C))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-forgot-password"]],decls:17,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"text-center"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["passwordResetEmail",""],["type","submit","value","Reset Password",1,"btn","btnPrimary",3,"click"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,r){if(1&t){const o=m.EpF();m.TgZ(0,"div",0),m.TgZ(1,"div",1),m.TgZ(2,"div",2),m.TgZ(3,"h3"),m._uU(4,"Reset Password"),m.qZA(),m.TgZ(5,"p",3),m._uU(6,"Please enter your email address to request a password reset."),m.qZA(),m.TgZ(7,"div",4),m._UZ(8,"input",5,6),m.qZA(),m.TgZ(10,"div",4),m.TgZ(11,"input",7),m.NdJ("click",function(){m.CHM(o);const d=m.MAs(9);return r.authService.ForgotPassword(d.value)}),m.qZA(),m.qZA(),m.qZA(),m.TgZ(12,"div",8),m.TgZ(13,"span"),m._uU(14,"Go back to ? "),m.TgZ(15,"span",9),m._uU(16,"Log In"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()}},directives:[Uc],styles:[""]}),n})(),W=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(C))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-sign-in"]],decls:29,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","text","placeholder","Username","required","",1,"formControl"],["userName",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPassword",""],["type","button","value","Log in",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],["type","button",1,"btn","googleBtn",3,"click"],[1,"fab","fa-google-plus-g"],[1,"forgotPassword"],["routerLink","/forgot-password"],[1,"redirectToLogin"],["routerLink","/register-user",1,"redirect"]],template:function(t,r){if(1&t){const o=m.EpF();m.TgZ(0,"div",0),m.TgZ(1,"div",1),m.TgZ(2,"div",2),m.TgZ(3,"h3"),m._uU(4,"Sign In"),m.qZA(),m.TgZ(5,"div",3),m._UZ(6,"input",4,5),m.qZA(),m.TgZ(8,"div",3),m._UZ(9,"input",6,7),m.qZA(),m.TgZ(11,"div",3),m.TgZ(12,"input",8),m.NdJ("click",function(){m.CHM(o);const d=m.MAs(7),f=m.MAs(10);return r.authService.SignIn(d.value,f.value)}),m.qZA(),m.qZA(),m.TgZ(13,"div",3),m.TgZ(14,"span",9),m.TgZ(15,"span",10),m._uU(16,"Or"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(17,"div",3),m.TgZ(18,"button",11),m.NdJ("click",function(){return r.authService.GoogleAuth()}),m._UZ(19,"i",12),m._uU(20," Log in with Google "),m.qZA(),m.qZA(),m.TgZ(21,"div",13),m.TgZ(22,"span",14),m._uU(23,"Forgot Password?"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(24,"div",15),m.TgZ(25,"span"),m._uU(26,"Don't have an account?"),m.TgZ(27,"span",16),m._uU(28," Sign Up"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()}},directives:[Uc],styles:[""]}),n})(),X=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(C))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-sign-up"]],decls:26,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["userEmail",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPwd",""],["type","button","value","Sign Up",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],["type","button",1,"btn","googleBtn",3,"click"],[1,"fab","fa-google-plus-g"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,r){if(1&t){const o=m.EpF();m.TgZ(0,"div",0),m.TgZ(1,"div",1),m.TgZ(2,"div",2),m.TgZ(3,"h3"),m._uU(4,"Sign Up"),m.qZA(),m.TgZ(5,"div",3),m._UZ(6,"input",4,5),m.qZA(),m.TgZ(8,"div",3),m._UZ(9,"input",6,7),m.qZA(),m.TgZ(11,"div",3),m.TgZ(12,"input",8),m.NdJ("click",function(){m.CHM(o);const d=m.MAs(7),f=m.MAs(10);return r.authService.SignUp(d.value,f.value)}),m.qZA(),m.qZA(),m.TgZ(13,"div",3),m.TgZ(14,"span",9),m.TgZ(15,"span",10),m._uU(16,"Or"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(17,"div",3),m.TgZ(18,"button",11),m.NdJ("click",function(){return r.authService.GoogleAuth()}),m._UZ(19,"i",12),m._uU(20," Continue with Google "),m.qZA(),m.qZA(),m.qZA(),m.TgZ(21,"div",13),m.TgZ(22,"span"),m._uU(23,"Already have an account? "),m.TgZ(24,"span",14),m._uU(25,"Log In"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()}},directives:[Uc],styles:[""]}),n})();function he(n,e){if(1&n&&(m.TgZ(0,"div",4),m.TgZ(1,"p",9),m._uU(2,"We have sent a confirmation email to "),m.TgZ(3,"strong"),m._uU(4),m.qZA(),m._uU(5,"."),m.qZA(),m.TgZ(6,"p",9),m._uU(7,"Please check your email and click on the link to verfiy your email address."),m.qZA(),m.qZA()),2&n){const t=e.ngIf;m.xp6(4),m.Oqu(t.email)}}let se=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(C))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-verify-email"]],decls:15,vars:1,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],["class","formGroup",4,"ngIf"],[1,"formGroup"],["type","button",1,"btn","btnPrimary",3,"click"],[1,"fas","fa-redo-alt"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"],[1,"text-center"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0),m.TgZ(1,"div",1),m.TgZ(2,"div",2),m.TgZ(3,"h3"),m._uU(4,"Thank You for Registering"),m.qZA(),m.YNc(5,he,8,1,"div",3),m.TgZ(6,"div",4),m.TgZ(7,"button",5),m.NdJ("click",function(){return r.authService.SendVerificationMail()}),m._UZ(8,"i",6),m._uU(9," Resend Verification Email "),m.qZA(),m.qZA(),m.qZA(),m.TgZ(10,"div",7),m.TgZ(11,"span"),m._uU(12,"Go back to?"),m.TgZ(13,"span",8),m._uU(14," Sign in"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&t&&(m.xp6(5),m.Q6J("ngIf",r.authService.userData))},directives:[Xs,Uc],styles:[""]}),n})(),Le=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return!0===this.authService.isLoggedIn||(this.router.navigate(["sign-in"]),!1)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(C),m.LFG(Fr))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ce=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return 1!=this.authService.isLoggedIn||(this.router.navigate(["dashboard"]),!1)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(C),m.LFG(Fr))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ut=[{path:"",redirectTo:"/sign-in",pathMatch:"full"},{path:"sign-in",component:W,canActivate:[Ce]},{path:"register-user",component:X,canActivate:[Ce]},{path:"dashboard",component:k,canActivate:[Le]},{path:"forgot-password",component:L,canActivate:[Ce]},{path:"verify-email-address",component:se,canActivate:[Ce]}];let At=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[[tR.forRoot(ut)],tR]}),n})(),en=(()=>{class n{constructor(){this.title="portal"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&m._UZ(0,"router-outlet")},directives:[tf],styles:[""]}),n})();class Do{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new Om(e,this.dueTime,this.scheduler))}}class Om extends oi.L{constructor(e,t,r){super(e),this.dueTime=t,this.scheduler=r,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(hp,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function hp(n){n.debouncedNext()}const oh="firebasestorage.googleapis.com",ah="storageBucket";class tr extends F.ZR{constructor(e,t){super(Fm(e),`Firebase Storage: ${t} (${Fm(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,tr.prototype)}_codeEquals(e){return Fm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Fm(n){return"storage/"+n}function Lm(){return new tr("unknown","An unknown error occurred, please check the error payload for server response.")}function IO(){return new tr("canceled","User canceled the upload/download.")}function CO(){return new tr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Cv(n){return new tr("invalid-argument",n)}function TO(){return new tr("app-deleted","The Firebase app was deleted.")}function DO(n){return new tr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function $b(n,e){return new tr("invalid-format","String does not match format '"+n+"': "+e)}function Hb(n){throw new tr("internal-error","Internal error: "+n)}class Is{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Is.makeFromUrl(e,t)}catch(o){return new Is(e,"")}if(""===r.path)return r;throw function(n){return new tr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const o="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+o+"(/(.*))?$","i");function w(st){st.path_=decodeURIComponent(st.path)}const A=t.replace(/[.]/g,"\\."),rt=[{regex:f,indices:{bucket:1,path:3},postModify:function(st){"/"===st.path.charAt(st.path.length-1)&&(st.path_=st.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${A}/v[A-Za-z0-9_]+/b/${o}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:w},{regex:new RegExp(`^https?://${t===oh?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${o}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:w}];for(let st=0;st<rt.length;st++){const Vt=rt[st],sn=Vt.regex.exec(e);if(sn){let cc=sn[Vt.indices.path];cc||(cc=""),r=new Is(sn[Vt.indices.bucket],cc),Vt.postModify(r);break}}if(null==r)throw function(n){return new tr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class jL{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function BS(n){return"string"==typeof n||n instanceof String}function SO(n){return qP()&&n instanceof Blob}function qP(){return"undefined"!=typeof Blob}function zP(n,e,t,r){if(r<e)throw Cv(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Cv(`Invalid value for '${n}'. Expected ${t} or less.`)}function uh(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function AO(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var fp=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(fp||(fp={})),fp))();class zL{constructor(e,t,r,o,u,d,f,y,w,D,A){this.url_=e,this.method_=t,this.headers_=r,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=d,this.callback_=f,this.errorCallback_=y,this.timeout_=w,this.progressCallback_=D,this.connectionFactory_=A,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((M,j)=>{this.resolve_=M,this.reject_=j,this.start_()})}start_(){const t=(r,o)=>{const u=this.resolve_,d=this.reject_,f=o.connection;if(o.wasSuccessCode)try{const y=this.callback_(f,f.getResponse());!function(n){return void 0!==n}(y)?u():u(y)}catch(y){d(y)}else if(null!==f){const y=Lm();y.serverResponse=f.getErrorText(),d(this.errorCallback_?this.errorCallback_(f,y):y)}else d(o.canceled?this.appDelete_?TO():IO():new tr("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))};this.canceled_?t(0,new jS(!1,null,!0)):this.backoffId_=function(n,e,t){let r=1,o=null,u=null,d=!1,f=0;function y(){return 2===f}let w=!1;function D(...Re){w||(w=!0,e.apply(null,Re))}function A(Re){o=setTimeout(()=>{o=null,n(j,y())},Re)}function M(){u&&clearTimeout(u)}function j(Re,...lt){if(w)return void M();if(Re)return M(),void D.call(null,Re,...lt);if(y()||d)return M(),void D.call(null,Re,...lt);let rt;r<64&&(r*=2),1===f?(f=2,rt=0):rt=1e3*(r+Math.random()),A(rt)}let Y=!1;function ye(Re){Y||(Y=!0,M(),!w&&(null!==o?(Re||(f=2),clearTimeout(o),A(0)):Re||(f=1)))}return A(0),u=setTimeout(()=>{d=!0,ye(!0)},t),ye}((r,o)=>{if(o)return void r(!1,new jS(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const d=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(d),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(d),this.pendingConnection_=null;const f=u.getErrorCode()===fp.NO_ERROR,y=u.getStatus();if(!f||this.isRetryStatusCode_(y)){const D=u.getErrorCode()===fp.ABORT;return void r(!1,new jS(!1,null,D))}const w=-1!==this.successCodes_.indexOf(y);r(!0,new jS(w,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,o=-1!==[408,429].indexOf(e),u=-1!==this.additionalRetryCodes_.indexOf(e);return t||o||u}}class jS{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function eU(...n){const e="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(qP())return new Blob(n);throw new tr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const ca={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class KP{constructor(e,t){this.data=e,this.contentType=t||null}}function ZP(n,e){switch(n){case ca.RAW:return new KP(RO(e));case ca.BASE64:case ca.BASE64URL:return new KP(xO(n,e));case ca.DATA_URL:return new KP(function(n){const e=new NO(n);return e.base64?xO(ca.BASE64,e.rest):function(n){let e;try{e=decodeURIComponent(n)}catch(t){throw $b(ca.DATA_URL,"Malformed data URL.")}return RO(e)}(e.rest)}(e),function(n){return new NO(n).contentType}(e))}throw Lm()}function RO(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function xO(n,e){switch(n){case ca.BASE64:{const o=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(o||u)throw $b(n,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case ca.BASE64URL:{const o=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(o||u)throw $b(n,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function(n){return atob(n)}(e)}catch(o){throw $b(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}class NO{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw $b(ca.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=e.substring(e.indexOf(",")+1)}}class pl{constructor(e,t){let r=0,o="";SO(e)?(this.data_=e,r=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(SO(this.data_)){const o=function(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===o?null:new pl(o)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new pl(r,!0)}}static getBlob(...e){if(qP()){const t=e.map(r=>r instanceof pl?r.data_:r);return new pl(eU.apply(null,t))}{const t=e.map(d=>BS(d)?ZP(ca.RAW,d).data:d.data_);let r=0;t.forEach(d=>{r+=d.byteLength});const o=new Uint8Array(r);let u=0;return t.forEach(d=>{for(let f=0;f<d.length;f++)o[u++]=d[f]}),new pl(o,!0)}}uploadData(){return this.data_}}function YP(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function PO(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function cU(n,e){return e}class Ks{constructor(e,t,r,o){this.server=e,this.local=t||e,this.writable=!!r,this.xform=o||cU}}let $S=null;function Gb(){if($S)return $S;const n=[];n.push(new Ks("bucket")),n.push(new Ks("generation")),n.push(new Ks("metageneration")),n.push(new Ks("name","fullPath",!0));const t=new Ks("name");t.xform=function(u,d){return function(n){return!BS(n)||n.length<2?n:PO(n)}(d)},n.push(t);const o=new Ks("size");return o.xform=function(u,d){return void 0!==d?Number(d):d},n.push(o),n.push(new Ks("timeCreated")),n.push(new Ks("updated")),n.push(new Ks("md5Hash",null,!0)),n.push(new Ks("cacheControl",null,!0)),n.push(new Ks("contentDisposition",null,!0)),n.push(new Ks("contentEncoding",null,!0)),n.push(new Ks("contentLanguage",null,!0)),n.push(new Ks("contentType",null,!0)),n.push(new Ks("metadata","customMetadata",!0)),$S=n,$S}function kO(n,e,t){const r=YP(e);return null===r?null:function(n,e,t){const r={type:"file"},o=t.length;for(let u=0;u<o;u++){const d=t[u];r[d.local]=d.xform(r,e[d.server])}return function(n,e){Object.defineProperty(n,"ref",{get:function(){const u=new Is(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function QP(n,e){const t={},r=e.length;for(let o=0;o<r;o++){const u=e[o];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const MO="prefixes";class gl{constructor(e,t,r,o){this.url=e,this.method=t,this.handler=r,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function ml(n){if(!n)throw Lm()}function HS(n,e){return function(r,o){const u=kO(n,o,e);return ml(null!==u),u}}function Tv(n){return function(t,r){let o;return o=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?new tr("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new tr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?function(n){return new tr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function(n){return new tr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,o.serverResponse=r.serverResponse,o}}function Wb(n){const e=Tv(n);return function(r,o){let u=e(r,o);return 404===r.getStatus()&&(u=function(n){return new tr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=o.serverResponse,u}}function FO(n,e,t){const o=uh(e.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,f=new gl(o,"GET",HS(n,t),d);return f.errorHandler=Wb(e),f}function yU(n,e,t,r,o){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),o&&(u.maxResults=o);const f=uh(e.bucketOnlyServerUrl(),n.host,n._protocol),w=n.maxOperationRetryTime,D=new gl(f,"GET",function(n,e){return function(r,o){const u=function(n,e,t){const r=YP(t);return null===r?null:function(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[MO])for(const o of t[MO]){const u=o.replace(/\/$/,""),d=n._makeStorageReference(new Is(e,u));r.prefixes.push(d)}if(t.items)for(const o of t.items){const u=n._makeStorageReference(new Is(e,o.name));r.items.push(u)}return r}(n,e,r)}(n,e,o);return ml(null!==u),u}}(n,e.bucket),w);return D.urlParams=u,D.errorHandler=Tv(e),D}function UO(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function(n,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}class GS{constructor(e,t,r,o){this.current=e,this.total=t,this.finalized=!!r,this.metadata=o||null}}function JP(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(o){ml(!1)}return ml(!!t&&-1!==(e||["active"]).indexOf(t)),t}const DU={STATE_CHANGED:"state_changed"},Zs={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function XP(n){switch(n){case"running":case"pausing":case"canceling":return Zs.RUNNING;case"paused":return Zs.PAUSED;case"success":return Zs.SUCCESS;case"canceled":return Zs.CANCELED;case"error":default:return Zs.ERROR}}class SU{constructor(e,t,r){if(function(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function Dv(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class RU extends class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=fp.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=fp.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=fp.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,o){if(this.sent_)throw Hb("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==o)for(const u in o)o.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,o[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Hb("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Hb("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw Hb("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Hb("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function ic(){return new RU}class $O{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Gb(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=o=>{this._request=void 0,this._chunkMultiplier=1,o._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=o,this._transition("error"))},this._metadataErrorHandler=o=>{this._request=void 0,o._codeEquals("canceled")?this.completeTransitions_():(this._error=o,this._transition("error"))},this._promise=new Promise((o,u)=>{this._resolve=o,this._reject=u,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function(n,e,t,r,o){const u=e.bucketOnlyServerUrl(),d=UO(e,r,o),f={name:d.fullPath},y=uh(u,n.host,n._protocol),D={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":d.contentType,"Content-Type":"application/json; charset=utf-8"},A=QP(d,t),Y=new gl(y,"POST",function(ye){let Re;JP(ye);try{Re=ye.getResponseHeader("X-Goog-Upload-URL")}catch(lt){ml(!1)}return ml(BS(Re)),Re},n.maxUploadRetryTime);return Y.urlParams=f,Y.headers=D,Y.body=A,Y.errorHandler=Tv(e),Y}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,ic,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const o=function(n,e,t,r){const y=new gl(t,"POST",function(w){const D=JP(w,["active","final"]);let A=null;try{A=w.getResponseHeader("X-Goog-Upload-Size-Received")}catch(j){ml(!1)}A||ml(!1);const M=Number(A);return ml(!isNaN(M)),new GS(M,r.size(),"final"===D)},n.maxUploadRetryTime);return y.headers={"X-Goog-Upload-Command":"query"},y.errorHandler=Tv(e),y}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(o,ic,t,r);this._request=u,u.getPromise().then(d=>{d=d,this._request=void 0,this._updateProgress(d.current),this._needToFetchStatus=!1,d.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new GS(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((o,u)=>{let d;try{d=function(n,e,t,r,o,u,d,f){const y=new GS(0,0);if(d?(y.current=d.current,y.total=d.total):(y.current=0,y.total=r.size()),r.size()!==y.total)throw new tr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");const w=y.total-y.current;let D=w;o>0&&(D=Math.min(D,o));const A=y.current,Y={"X-Goog-Upload-Command":D===w?"upload, finalize":"upload","X-Goog-Upload-Offset":`${y.current}`},ye=r.slice(A,A+D);if(null===ye)throw CO();const rt=new gl(t,"POST",function(st,Vt){const sn=JP(st,["active","final"]),di=y.current+D,cc=r.size();let hM;return hM="final"===sn?HS(e,u)(st,Vt):null,new GS(di,cc,"final"===sn,hM)},e.maxUploadRetryTime);return rt.headers=Y,rt.body=ye.uploadData(),rt.progressCallback=f||null,rt.errorHandler=Tv(n),rt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(y){return this._error=y,void this._transition("error")}const f=this._ref.storage._makeRequest(d,ic,o,u);this._request=f,f.getPromise().then(y=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(y.current),y.finalized?(this._metadata=y.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=FO(this._ref.storage,this._ref._location,this._mappings),o=this._ref.storage._makeRequest(r,ic,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function(n,e,t,r,o){const u=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"},y=function(){let rt="";for(let st=0;st<2;st++)rt+=Math.random().toString().slice(2);return rt}();d["Content-Type"]="multipart/related; boundary="+y;const w=UO(e,r,o),D=QP(w,t),j=pl.getBlob("--"+y+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+D+"\r\n--"+y+"\r\nContent-Type: "+w.contentType+"\r\n\r\n",r,"\r\n--"+y+"--");if(null===j)throw CO();const Y={name:w.fullPath},ye=uh(u,n.host,n._protocol),lt=n.maxUploadRetryTime,ct=new gl(ye,"POST",HS(n,t),lt);return ct.urlParams=Y,ct.headers=d,ct.body=j.uploadData(),ct.errorHandler=Tv(e),ct}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,ic,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=IO(),this._state=e,this._notifyObservers();break;case"error":case"success":this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=XP(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,o){const u=new SU(t||void 0,r||void 0,o||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(XP(this._state)){case Zs.SUCCESS:Dv(this._resolve.bind(null,this.snapshot))();break;case Zs.CANCELED:case Zs.ERROR:Dv(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(XP(this._state)){case Zs.RUNNING:case Zs.PAUSED:e.next&&Dv(e.next.bind(e,this.snapshot))();break;case Zs.SUCCESS:e.complete&&Dv(e.complete.bind(e))();break;case Zs.CANCELED:case Zs.ERROR:e.error&&Dv(e.error.bind(e,this._error))();break;default:e.error&&Dv(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Um{constructor(e,t){this._service=e,this._location=t instanceof Is?t:Is.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Um(e,t)}get root(){const e=new Is(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return PO(this._location.path)}get storage(){return this._service}get parent(){const e=function(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Is(this._location.bucket,e);return new Um(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw DO(e)}}function GO(n,e,t){return ek.apply(this,arguments)}function ek(){return(ek=(0,Ie.Z)(function*(n,e,t){const o=yield WO(n,{pageToken:t});e.prefixes.push(...o.prefixes),e.items.push(...o.items),null!=o.nextPageToken&&(yield GO(n,e,o.nextPageToken))})).apply(this,arguments)}function WO(n,e){null!=e&&"number"==typeof e.maxResults&&zP("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=yU(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,ic)}function jU(n){n._throwIfRoot("getDownloadURL");const e=function(n,e,t){const o=uh(e.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,f=new gl(o,"GET",function(n,e){return function(r,o){const u=kO(n,o,e);return ml(null!==u),function(n,e,t,r){const o=YP(e);if(null===o||!BS(o.downloadTokens))return null;const u=o.downloadTokens;if(0===u.length)return null;const d=encodeURIComponent;return u.split(",").map(w=>{const A=n.fullPath;return uh("/b/"+d(n.bucket)+"/o/"+d(A),t,r)+AO({alt:"media",token:w})})[0]}(u,o,n.host,n._protocol)}}(n,t),d);return f.errorHandler=Wb(e),f}(n.storage,n._location,Gb());return n.storage.makeRequestWithTokens(e,ic).then(t=>{if(null===t)throw new tr("no-download-url","The given file does not have any download URLs.");return t})}function qO(n,e){const t=function(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Is(n._location.bucket,t);return new Um(n.storage,r)}function zO(n,e){if(n instanceof tk){const t=n;if(null==t._bucket)throw new tr("no-default-bucket","No default bucket found. Did you set the '"+ah+"' property when initializing the app?");const r=new Um(t,t._bucket);return null!=e?zO(r,e):r}return void 0!==e?qO(n,e):n}function WU(n,e){if(e&&function(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof tk)return function(n,e){return new Um(n,e)}(n,e);throw Cv("To use ref(service, url), the first argument must be a Storage instance.")}return zO(n,e)}function KO(n,e){const t=null==e?void 0:e[ah];return null==t?null:Is.makeFromBucketSpec(t,n)}class tk{constructor(e,t,r,o,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=o,this._firebaseVersion=u,this._bucket=null,this._host=oh,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=o?Is.makeFromBucketSpec(o,this._host):KO(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Is.makeFromBucketSpec(this._url,e):KO(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){zP("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){zP("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Ie.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Ie.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Um(this,e)}_makeRequest(e,t,r,o){if(this._deleted)return new jL(TO());{const u=function(n,e,t,r,o,u){const d=AO(n.urlParams),f=n.url+d,y=Object.assign({},n.headers);return function(n,e){e&&(n["X-Firebase-GMPID"]=e)}(y,e),function(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(y,t),function(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(y,u),function(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(y,r),new zL(f,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o)}(e,this._appId,r,o,t,this._firebaseVersion);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e,t){var r=this;return(0,Ie.Z)(function*(){const[o,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,o,u).getPromise()})()}}const ZO="@firebase/storage";function JO(n,e){return WU(n=(0,F.m9)(n),e)}(0,ns._registerComponent)(new go.wA("storage",function(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new tk(t,r,o,e,ns.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,ns.registerVersion)(ZO,"0.9.6",""),(0,ns.registerVersion)(ZO,"0.9.6","esm2017");class WS{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class XO{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new WS(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new WS(r,this,this._ref))},t)}on(e,t,r,o){let u;return t&&(u="function"==typeof t?d=>t(new WS(d,this,this._ref)):{next:t.next?d=>t.next(new WS(d,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,o||void 0)}}class e1{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new ch(e,this._service))}get items(){return this._delegate.items.map(e=>new ch(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class ch{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function(n,e){return qO(n,e)}(this._delegate,e);return new ch(t,this.storage)}get root(){return new ch(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new ch(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new XO(function(n,e,t){return function(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new $O(n,new pl(e),t)}(n=(0,F.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=ca.RAW,r){this._throwIfRoot("putString");const o=ZP(t,e),u=Object.assign({},r);return null==u.contentType&&null!=o.contentType&&(u.contentType=o.contentType),new XO(new $O(this._delegate,new pl(o.data,!0),u),this)}listAll(){return function(n){return function(n){const e={prefixes:[],items:[]};return GO(n,e).then(()=>e)}(n=(0,F.m9)(n))}(this._delegate).then(e=>new e1(e,this.storage))}list(e){return function(n,e){return WO(n=(0,F.m9)(n),e)}(this._delegate,e||void 0).then(t=>new e1(t,this.storage))}getMetadata(){return function(n){return function(n){n._throwIfRoot("getMetadata");const e=FO(n.storage,n._location,Gb());return n.storage.makeRequestWithTokens(e,ic)}(n=(0,F.m9)(n))}(this._delegate)}updateMetadata(e){return function(n,e){return function(n,e){n._throwIfRoot("updateMetadata");const t=function(n,e,t,r){const u=uh(e.fullServerUrl(),n.host,n._protocol),f=QP(t,r),w=n.maxOperationRetryTime,D=new gl(u,"PATCH",HS(n,r),w);return D.headers={"Content-Type":"application/json; charset=utf-8"},D.body=f,D.errorHandler=Wb(e),D}(n.storage,n._location,e,Gb());return n.storage.makeRequestWithTokens(t,ic)}(n=(0,F.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function(n){return jU(n=(0,F.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(n){return function(n){n._throwIfRoot("deleteObject");const e=function(n,e){const r=uh(e.fullServerUrl(),n.host,n._protocol),f=new gl(r,"DELETE",function(y,w){},n.maxOperationRetryTime);return f.successCodes=[200,204],f.errorHandler=Wb(e),f}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,ic)}(n=(0,F.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw DO(e)}}class t1{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(n1(e))throw Cv("ref() expected a child path but got a URL, use refFromURL instead.");return new ch(JO(this._delegate,e),this)}refFromURL(e){if(!n1(e))throw Cv("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Is.makeFromUrl(e,this._delegate.host)}catch(t){throw Cv("refFromUrl() expected a valid full URL but got an invalid one.")}return new ch(JO(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function(n,e,t,r={}){!function(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:o}=r;o&&(n._overrideAuthToken="string"==typeof o?o:(0,F.Sg)(o,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function n1(n){return/^[A-Za-z]+:\/\//.test(n)}function aV(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new t1(t,r)}function r1(n){const e=function(n){return new Pr.y(e=>{const t=d=>e.next(d);t(n.snapshot);const u=n.on("state_changed",t);return n.then(d=>{t(d),e.complete()},d=>{t(n.snapshot),(d=>{e.error(d)})(d)}),function(){u()}}).pipe(function(n,e=A_.P){return t=>t.lift(new Do(n,e))}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,kt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function qS(n){return{getDownloadURL:()=>(0,at.of)(void 0).pipe(on.fc,ur(()=>n.getDownloadURL()),on.iC),getMetadata:()=>(0,at.of)(void 0).pipe(on.fc,ur(()=>n.getMetadata()),on.iC),delete:()=>(0,jt.D)(n.delete()),child:e=>qS(n.child(e)),updateMetadata:e=>(0,jt.D)(n.updateMetadata(e)),put:(e,t)=>r1(n.put(e,t)),putString:(e,t,r)=>r1(n.putString(e,t,r)),list:e=>(0,jt.D)(n.list(e)),listAll:()=>(0,jt.D)(n.listAll())}}!function(n){const e={TaskState:Zs,TaskEvent:DU,StringFormat:ca,Storage:t1,Reference:ch};n.INTERNAL.registerComponent(new go.wA("storage-compat",aV,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.14")}(GI.Z);const lV=new m.OlP("angularfire2.storageBucket"),dV=new m.OlP("angularfire2.storage.maxUploadRetryTime"),hV=new m.OlP("angularfire2.storage.maxOperationRetryTime"),fV=new m.OlP("angularfire2.storage.use-emulator");let pV=(()=>{class n{constructor(t,r,o,u,d,f,y,w,D,A){const M=(0,Lr.on)(t,d,r);this.storage=(0,Lr.cc)(`${M.name}.storage.${o}`,"AngularFireStorage",M.name,()=>{const j=d.runOutsideAngular(()=>M.storage(o||void 0)),Y=D;return Y&&j.useEmulator(...Y),y&&j.setMaxUploadRetryTime(y),w&&j.setMaxOperationRetryTime(w),j},[y,w])}ref(t){return qS(this.storage.ref(t))}refFromURL(t){return qS(this.storage.refFromURL(t))}upload(t,r,o){return qS(this.storage.ref(t)).put(r,o)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Lr.Dh),m.LFG(Lr.xv,8),m.LFG(lV,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(on.HU),m.LFG(dV,8),m.LFG(hV,8),m.LFG(fV,8),m.LFG(Nm,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),gV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})(),mV=(()=>{class n{constructor(){wv.Z.registerVersion("angularfire",on.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[pV],imports:[gV]}),n})();var _V=U(8819);class vV{constructor(e,t){this.observables=e,this.project=t}call(e,t){return t.subscribe(new EV(e,this.observables,this.project))}}class EV extends ql{constructor(e,t,r){super(e),this.observables=t,this.project=r,this.toRespond=[];const o=t.length;this.values=new Array(o);for(let u=0;u<o;u++)this.toRespond.push(u);for(let u=0;u<o;u++)this.add(vu(this,t[u],void 0,u))}notifyNext(e,t,r){this.values[r]=t;const o=this.toRespond;if(o.length>0){const u=o.indexOf(r);-1!==u&&o.splice(u,1)}}notifyComplete(){}_next(e){if(0===this.toRespond.length){const t=[e,...this.values];this.project?this._tryProject(t):this.destination.next(t)}}_tryProject(e){let t;try{t=this.project.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}class bV{constructor(e){this.predicate=e}call(e,t){return t.subscribe(new IV(e,this.predicate))}}class IV extends oi.L{constructor(e,t){super(e),this.predicate=t,this.skipping=!0,this.index=0}_next(e){const t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)}tryCallPredicate(e){try{const t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(t){this.destination.error(t)}}}const i1="@firebase/database";let nk="";function o1(n){nk=n}class CV{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,F.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,F.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class TV{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,F.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const a1=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new CV(e)}}catch(e){}return new TV},Vm=a1("localStorage"),rk=a1("sessionStorage"),Sv=new pt.Yd("@firebase/database"),u1=function(){let n=1;return function(){return n++}}(),c1=function(n){const e=(0,F.dS)(n),t=new F.gQ;t.update(e);const r=t.digest();return F.US.encodeByteArray(r)},qb=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=qb.apply(null,r):e+="object"==typeof r?(0,F.Pz)(r):r,e+=" "}return e};let Bm=null,l1=!0;const d1=function(n,e){(0,F.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Sv.logLevel=pt.in.VERBOSE,Bm=Sv.log.bind(Sv),e&&rk.set("logging_enabled",!0)):"function"==typeof n?Bm=n:(Bm=null,rk.remove("logging_enabled"))},Wi=function(...n){if(!0===l1&&(l1=!1,null===Bm&&!0===rk.get("logging_enabled")&&d1(!0)),Bm){const e=qb.apply(null,n);Bm(e)}},zb=function(n){return function(...e){Wi(n,...e)}},ik=function(...n){const e="FIREBASE INTERNAL ERROR: "+qb(...n);Sv.error(e)},_l=function(...n){const e=`FIREBASE FATAL ERROR: ${qb(...n)}`;throw Sv.error(e),new Error(e)},Cs=function(...n){const e="FIREBASE WARNING: "+qb(...n);Sv.warn(e)},zS=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},lh="[MIN_NAME]",yl="[MAX_NAME]",jm=function(n,e){if(n===e)return 0;if(n===lh||e===yl)return-1;if(e===lh||n===yl)return 1;{const t=KS(n),r=KS(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},AV=function(n,e){return n===e?0:n<e?-1:1},Kb=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,F.Pz)(e))},sk=function(n){if("object"!=typeof n||null===n)return(0,F.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,F.Pz)(e[r]),t+=":",t+=sk(n[e[r]]);return t+="}",t},h1=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let o=0;o<t;o+=e)r.push(n.substring(o,o+e>t?t:o+e));return r};function qi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const f1=function(n){(0,F.hu)(!zS(n),"Invalid JSON number");const r=1023;let o,u,d,f,y;0===n?(u=0,d=0,o=1/n==-1/0?1:0):(o=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),u=f+r,d=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(u=0,d=Math.round(n/Math.pow(2,-1074))));const w=[];for(y=52;y;y-=1)w.push(d%2?1:0),d=Math.floor(d/2);for(y=11;y;y-=1)w.push(u%2?1:0),u=Math.floor(u/2);w.push(o?1:0),w.reverse();const D=w.join("");let A="";for(y=0;y<64;y+=8){let M=parseInt(D.substr(y,8),2).toString(16);1===M.length&&(M="0"+M),A+=M}return A.toLowerCase()},PV=new RegExp("^-?(0*)\\d{1,10}$"),p1=-2147483648,ok=2147483647,KS=function(n){if(PV.test(n)){const e=Number(n);if(e>=p1&&e<=ok)return e}return null},Av=function(n){try{n()}catch(e){setTimeout(()=>{throw Cs("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Zb=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class MV{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Cs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class OV{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(o=>this.auth_=o)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Wi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Cs(e)}}let Yb=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const v1=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,b1="websocket",I1="long_polling";class uk{constructor(e,t,r,o,u=!1,d="",f=!1){this.secure=t,this.namespace=r,this.webSocketOnly=o,this.nodeAdmin=u,this.persistenceKey=d,this.includeNamespaceInQueryParams=f,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Vm.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Vm.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function C1(n,e,t){let r;if((0,F.hu)("string"==typeof e,"typeof type must == string"),(0,F.hu)("object"==typeof t,"typeof params must == object"),e===b1)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==I1)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const o=[];return qi(t,(u,d)=>{o.push(u+"="+d)}),r+o.join("&")}class LV{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,F.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,F.p$)(this.counters_)}}const ck={},lk={};function dk(n){const e=n.toString();return ck[e]||(ck[e]=new LV),ck[e]}class VV{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<r.length;++o)r[o]&&Av(()=>{this.onMessage_(r[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class pp{constructor(e,t,r,o,u,d,f){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=o,this.authToken=u,this.transportSessionId=d,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=zb(e),this.stats_=dk(t),this.urlFn=y=>(this.appCheckToken&&(y.ac=this.appCheckToken),C1(t,I1,y))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new VV(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,F.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new hk((...u)=>{const[d,f,y,w,D]=u;if(this.incrementIncomingBytes_(u),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===d)this.id=f,this.password=y;else{if("close"!==d)throw new Error("Unrecognized command received: "+d);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...u)=>{const[d,f]=u;this.incrementIncomingBytes_(u),this.myPacketOrderer.handleResponse(d,f)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&v1.test(location.hostname)&&(r.r="f");const o=this.urlFn(r);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){pp.forceAllow_=!0}static forceDisallow(){pp.forceDisallow_=!0}static isAvailable(){return!((0,F.Yr)()||!pp.forceAllow_&&(pp.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,F.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,F.h$)(t),o=h1(r,1840);for(let u=0;u<o.length;u++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[u]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,F.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,F.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class hk{constructor(e,t,r,o){if(this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,F.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=u1(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=hk.createIFrame_();let u="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(u='<script>document.domain="'+document.domain+'";<\/script>');const d="<html><body>"+u+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(d),this.myIFrame.doc.close()}catch(f){Wi("frame writing exception"),f.stack&&Wi(f.stack),Wi(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Wi("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const d=this.pendingSegs.shift();r=r+"&seg"+o+"="+d.seg+"&ts"+o+"="+d.ts+"&d"+o+"="+d.d,o++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},o=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(o),r()})}addTag(e,t){(0,F.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const o=r.readyState;(!o||"loaded"===o||"complete"===o)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Wi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let YS=null;"undefined"!=typeof MozWebSocket?YS=MozWebSocket:"undefined"!=typeof WebSocket&&(YS=WebSocket);let Rv=(()=>{class n{constructor(t,r,o,u,d,f,y){this.connId=t,this.applicationId=o,this.appCheckToken=u,this.authToken=d,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=zb(this.connId),this.stats_=dk(r),this.connURL=n.connectionURL_(r,f,y,u,o),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,o,u,d){const f={v:"5"};return!(0,F.Yr)()&&"undefined"!=typeof location&&location.hostname&&v1.test(location.hostname)&&(f.r="f"),r&&(f.s=r),o&&(f.ls=o),u&&(f.ac=u),d&&(f.p=d),C1(t,b1,f)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Vm.set("previous_websocket_failure",!0);try{let o;if((0,F.Yr)()){const d={headers:{"User-Agent":`Firebase/5/${nk}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(d.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(d.headers["X-Firebase-AppCheck"]=this.appCheckToken);const f=process.env,y=0===this.connURL.indexOf("wss://")?f.HTTPS_PROXY||f.https_proxy:f.HTTP_PROXY||f.http_proxy;y&&(d.proxy={origin:y})}this.mySock=new YS(this.connURL,[],o)}catch(o){this.log_("Error instantiating WebSocket.");const u=o.message||o.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=o=>{this.handleIncomingFrame(o)},this.mySock.onerror=o=>{this.log_("WebSocket error.  Closing connection.");const u=o.message||o.data;u&&this.log_(u),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const o=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);o&&o.length>1&&parseFloat(o[1])<4.4&&(t=!0)}return!t&&null!==YS&&!n.forceDisallow_}static previouslyFailed(){return Vm.isInMemoryStorage||!0===Vm.get("previous_websocket_failure")}markConnectionHealthy(){Vm.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const o=(0,F.cI)(r);this.onMessage(o)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,F.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const o=this.extractFrameCount_(r);null!==o&&this.appendFrame_(o)}}send(t){this.resetKeepAlive();const r=(0,F.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const o=h1(r,16384);o.length>1&&this.sendString_(String(o.length));for(let u=0;u<o.length;u++)this.sendString_(o[u])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),N1=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[pp,Rv]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Rv&&Rv.isAvailable();let o=r&&!Rv.previouslyFailed();if(t.webSocketOnly&&(r||Cs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[Rv];else{const u=this.transports_=[];for(const d of n.ALL_TRANSPORTS)d&&d.isAvailable()&&u.push(d);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class U1{constructor(e,t,r,o,u,d,f,y,w,D){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=o,this.authToken_=u,this.onMessage_=d,this.onReady_=f,this.onDisconnect_=y,this.onKill_=w,this.lastSessionId=D,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=zb("c:"+this.id+":"),this.transportManager_=new N1(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=Zb(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Kb("t",e),r=Kb("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Kb("t",e),r=Kb("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Kb("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?ik("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ik("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,o=e.h;this.sessionId=e.s,this.repoInfo_.host=o,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Cs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Zb(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Zb(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Vm.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class V1{put(e,t,r,o){}merge(e,t,r,o){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class B1{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,F.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let o=0;o<r.length;o++)r[o].callback.apply(r[o].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const o=this.getInitialEvent(e);o&&t.apply(r,o)}off(e,t,r){this.validateEventType_(e);const o=this.listeners_[e]||[];for(let u=0;u<o.length;u++)if(o[u].callback===t&&(!r||r===o[u].context))return void o.splice(u,1)}validateEventType_(e){(0,F.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class QS extends B1{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,F.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new QS}getInitialEvent(e){return(0,F.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Nn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[r]=this.pieces_[o],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Cn(){return new Nn("")}function tn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function gp(n){return n.pieces_.length-n.pieceNum_}function Wn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Nn(n.pieces_,e)}function pk(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Qb(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function H1(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Nn(e,0)}function wr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Nn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let o=0;o<r.length;o++)r[o].length>0&&t.push(r[o])}return new Nn(t,0)}function nn(n){return n.pieceNum_>=n.pieces_.length}function Ys(n,e){const t=tn(n),r=tn(e);if(null===t)return e;if(t===r)return Ys(Wn(n),Wn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function a2(n,e){const t=Qb(n,0),r=Qb(e,0);for(let o=0;o<t.length&&o<r.length;o++){const u=jm(t[o],r[o]);if(0!==u)return u}return t.length===r.length?0:t.length<r.length?-1:1}function gk(n,e){if(gp(n)!==gp(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function eu(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(gp(n)>gp(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class u2{constructor(e,t){this.errorPrefix_=t,this.parts_=Qb(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,F.ug)(this.parts_[r]);G1(this)}}function G1(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+$m(n))}function $m(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class mk extends B1{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new mk}getInitialEvent(e){return(0,F.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Jb=1e3;let XS,Hm=(()=>{class n extends V1{constructor(t,r,o,u,d,f,y,w){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=o,this.onConnectStatus_=u,this.onServerInfoUpdate_=d,this.authTokenProvider_=f,this.appCheckTokenProvider_=y,this.authOverride_=w,this.id=n.nextPersistentConnectionId_++,this.log_=zb("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Jb,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,w&&!(0,F.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");mk.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&QS.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,o){const u=++this.requestNumber_,d={r:u,a:t,b:r};this.log_((0,F.Pz)(d)),(0,F.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(d),o&&(this.requestCBHash_[u]=o)}get(t){this.initConnection_();const r=new F.BH,o={p:t._path.toString(),q:t._queryObject},u={action:"g",request:o,onComplete:f=>{const y=f.d;"ok"===f.s?(this.onDataUpdate_(o.p,y,!1,null),r.resolve(y)):r.reject(y)}};this.outstandingGets_.push(u),this.outstandingGetCount_++;const d=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const f=this.outstandingGets_[d];void 0===f||u!==f||(delete this.outstandingGets_[d],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+d+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(d),r.promise}listen(t,r,o,u){this.initConnection_();const d=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+d),this.listens.has(f)||this.listens.set(f,new Map),(0,F.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,F.hu)(!this.listens.get(f).has(d),"listen() called twice for same path/queryId.");const y={onComplete:u,hashFn:r,query:t,tag:o};this.listens.get(f).set(d,y),this.connected_&&this.sendListen_(y)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,o=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(o)})}sendListen_(t){const r=t.query,o=r._path.toString(),u=r._queryIdentifier;this.log_("Listen on "+o+" for "+u);const d={p:o};t.tag&&(d.q=r._queryObject,d.t=t.tag),d.h=t.hashFn(),this.sendRequest("q",d,y=>{const w=y.d,D=y.s;n.warnOnListenWarnings_(w,r),(this.listens.get(o)&&this.listens.get(o).get(u))===t&&(this.log_("listen response",y),"ok"!==D&&this.removeListen_(o,u),t.onComplete&&t.onComplete(D,w))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,F.r3)(t,"w")){const o=(0,F.DV)(t,"w");if(Array.isArray(o)&&~o.indexOf("no_index")){const u='".indexOn": "'+r._queryParams.getIndex().toString()+'"',d=r._path.toString();Cs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${u} at ${d} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,F.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,F.w9)(t)?"auth":"gauth",o={cred:t};null===this.authOverride_?o.noauth=!0:"object"==typeof this.authOverride_&&(o.authvar=this.authOverride_),this.sendRequest(r,o,u=>{const d=u.s,f=u.d||"error";this.authToken_===t&&("ok"===d?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(d,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,o=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,o)})}unlisten(t,r){const o=t._path.toString(),u=t._queryIdentifier;this.log_("Unlisten called for "+o+" "+u),(0,F.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(o,u)&&this.connected_&&this.sendUnlisten_(o,u,t._queryObject,r)}sendUnlisten_(t,r,o,u){this.log_("Unlisten on "+t+" for "+r);const d={p:t};u&&(d.q=o,d.t=u),this.sendRequest("n",d)}onDisconnectPut(t,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:o})}onDisconnectMerge(t,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:o})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,o,u){const d={p:r,d:o};this.log_("onDisconnect "+t,d),this.sendRequest(t,d,f=>{u&&setTimeout(()=>{u(f.s,f.d)},Math.floor(0))})}put(t,r,o,u){this.putInternal("p",t,r,o,u)}merge(t,r,o,u){this.putInternal("m",t,r,o,u)}putInternal(t,r,o,u,d){this.initConnection_();const f={p:r,d:o};void 0!==d&&(f.h=d),this.outstandingPuts_.push({action:t,request:f,onComplete:u}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,o=this.outstandingPuts_[t].request,u=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,o,d=>{this.log_(r+" response",d),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),u&&u(d.s,d.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,o=>{"ok"!==o.s&&this.log_("reportStats","Error sending stats: "+o.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,F.Pz)(t));const r=t.r,o=this.requestCBHash_[r];o&&(delete this.requestCBHash_[r],o(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):ik("Unrecognized action received from server: "+(0,F.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,F.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Jb,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Jb,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Jb),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Ie.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),o=t.onReady_.bind(t),u=t.onRealtimeDisconnect_.bind(t),d=t.id+":"+n.nextConnectionId_++,f=t.lastSessionId;let y=!1,w=null;const D=function(){w?w.close():(y=!0,u())};t.realtime_={close:D,sendRequest:function(j){(0,F.hu)(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(j)}};const M=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[j,Y]=yield Promise.all([t.authTokenProvider_.getToken(M),t.appCheckTokenProvider_.getToken(M)]);y?Wi("getToken() completed but was canceled"):(Wi("getToken() completed. Creating connection."),t.authToken_=j&&j.accessToken,t.appCheckToken_=Y&&Y.token,w=new U1(d,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,o,u,ye=>{Cs(ye+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},f))}catch(j){t.log_("Failed to get token: "+j),y||(t.repoInfo_.nodeAdmin&&Cs(j),D())}}})()}interrupt(t){Wi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Wi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,F.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Jb,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let o;o=r?r.map(d=>sk(d)).join("$"):"default";const u=this.removeListen_(t,o);u&&u.onComplete&&u.onComplete("permission_denied")}removeListen_(t,r){const o=new Nn(t).toString();let u;if(this.listens.has(o)){const d=this.listens.get(o);u=d.get(r),d.delete(r),0===d.size&&this.listens.delete(o)}else u=void 0;return u}onAuthRevoked_(t,r){Wi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Wi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,F.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+nk.replace(/\./g,"-")]=1,(0,F.uI)()?t["framework.cordova"]=1:(0,F.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=QS.getInstance().currentlyOnline();return(0,F.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class rn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new rn(e,t)}}class JS{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new rn(lh,e),o=new rn(lh,t);return 0!==this.compare(r,o)}minPost(){return rn.MIN}}class z1 extends JS{static get __EMPTY_NODE(){return XS}static set __EMPTY_NODE(e){XS=e}compare(e,t){return jm(e.name,t.name)}isDefinedOn(e){throw(0,F.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return rn.MIN}maxPost(){return new rn(yl,XS)}makePost(e,t){return(0,F.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new rn(e,XS)}toString(){return".key"}}const vl=new z1;class eA{constructor(e,t,r,o,u=null){this.isReverse_=o,this.resultGenerator_=u,this.nodeStack_=[];let d=1;for(;!e.isEmpty();)if(e=e,d=t?r(e.key,t):1,o&&(d*=-1),d<0)e=this.isReverse_?e.left:e.right;else{if(0===d){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let yk,sc=(()=>{class n{constructor(t,r,o,u,d){this.key=t,this.value=r,this.color=null!=o?o:n.RED,this.left=null!=u?u:So.EMPTY_NODE,this.right=null!=d?d:So.EMPTY_NODE}copy(t,r,o,u,d){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=o?o:this.color,null!=u?u:this.left,null!=d?d:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,o){let u=this;const d=o(t,u.key);return u=d<0?u.copy(null,null,null,u.left.insert(t,r,o),null):0===d?u.copy(null,r,null,null,null):u.copy(null,null,null,null,u.right.insert(t,r,o)),u.fixUp_()}removeMin_(){if(this.left.isEmpty())return So.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let o,u;if(o=this,r(t,o.key)<0)!o.left.isEmpty()&&!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.remove(t,r),null);else{if(o.left.isRed_()&&(o=o.rotateRight_()),!o.right.isEmpty()&&!o.right.isRed_()&&!o.right.left.isRed_()&&(o=o.moveRedRight_()),0===r(t,o.key)){if(o.right.isEmpty())return So.EMPTY_NODE;u=o.right.min_(),o=o.copy(u.key,u.value,null,null,o.right.removeMin_())}o=o.copy(null,null,null,null,o.right.remove(t,r))}return o.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class So{constructor(e,t=So.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new So(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,sc.BLACK,null,null))}remove(e){return new So(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,sc.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,o=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return o?o.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(o=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new eA(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new eA(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new eA(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new eA(this.root_,null,this.comparator_,!0,e)}}function _2(n,e){return jm(n.name,e.name)}function _k(n,e){return jm(n,e)}So.EMPTY_NODE=new class{copy(e,t,r,o,u){return this}insert(e,t,r){return new sc(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const K1=function(n){return"number"==typeof n?"number:"+f1(n):"string:"+n},Z1=function(n){if(n.isLeafNode()){const e=n.val();(0,F.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,F.r3)(e,".sv"),"Priority must be a string or number.")}else(0,F.hu)(n===yk||n.isEmpty(),"priority of unexpected type.");(0,F.hu)(n===yk||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Y1,Q1,J1,xv=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,F.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Z1(this.priorityNode_)}static set __childrenNodeConstructor(t){Y1=t}static get __childrenNodeConstructor(){return Y1}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return nn(t)?this:".priority"===tn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const o=tn(t);return null===o?r:r.isEmpty()&&".priority"!==o?this:((0,F.hu)(".priority"!==o||1===gp(t),".priority must be the last token in a path"),this.updateImmediateChild(o,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Wn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+K1(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?f1(this.value_):this.value_,this.lazyHash_=c1(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,F.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,o=typeof this.value_,u=n.VALUE_TYPE_ORDER.indexOf(r),d=n.VALUE_TYPE_ORDER.indexOf(o);return(0,F.hu)(u>=0,"Unknown leaf type: "+r),(0,F.hu)(d>=0,"Unknown leaf type: "+o),u===d?"object"===o?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:d-u}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const nr=new class extends JS{compare(e,t){const r=e.node.getPriority(),o=t.node.getPriority(),u=r.compareTo(o);return 0===u?jm(e.name,t.name):u}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return rn.MIN}maxPost(){return new rn(yl,new xv("[PRIORITY-POST]",J1))}makePost(e,t){const r=Q1(e);return new rn(t,new xv("[PRIORITY-POST]",r))}toString(){return".priority"}},b2=Math.log(2);class I2{constructor(e){this.count=parseInt(Math.log(e+1)/b2,10),this.current_=this.count-1;const o=(u=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&o}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const tA=function(n,e,t,r){n.sort(e);const o=function(y,w){const D=w-y;let A,M;if(0===D)return null;if(1===D)return A=n[y],M=t?t(A):A,new sc(M,A.node,sc.BLACK,null,null);{const j=parseInt(D/2,10)+y,Y=o(y,j),ye=o(j+1,w);return A=n[j],M=t?t(A):A,new sc(M,A.node,sc.BLACK,Y,ye)}},f=function(y){let w=null,D=null,A=n.length;const M=function(Y,ye){const Re=A-Y,lt=A;A-=Y;const ct=o(Re+1,lt),rt=n[Re],st=t?t(rt):rt;j(new sc(st,rt.node,ye,null,ct))},j=function(Y){w?(w.left=Y,w=Y):(D=Y,w=Y)};for(let Y=0;Y<y.count;++Y){const ye=y.nextBitIsOne(),Re=Math.pow(2,y.count-(Y+1));ye?M(Re,sc.BLACK):(M(Re,sc.BLACK),M(Re,sc.RED))}return D}(new I2(n.length));return new So(r||e,f)};let vk;const Nv={};class dh{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,F.hu)(Nv&&nr,"ChildrenNode.ts has not been loaded"),vk=vk||new dh({".priority":Nv},{".priority":nr}),vk}get(e){const t=(0,F.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof So?t:null}hasIndex(e){return(0,F.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,F.hu)(e!==vl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let o=!1;const u=t.getIterator(rn.Wrap);let f,d=u.getNext();for(;d;)o=o||e.isDefinedOn(d.node),r.push(d),d=u.getNext();f=o?tA(r,e.getCompare()):Nv;const y=e.toString(),w=Object.assign({},this.indexSet_);w[y]=e;const D=Object.assign({},this.indexes_);return D[y]=f,new dh(D,w)}addToIndexes(e,t){const r=(0,F.UI)(this.indexes_,(o,u)=>{const d=(0,F.DV)(this.indexSet_,u);if((0,F.hu)(d,"Missing index implementation for "+u),o===Nv){if(d.isDefinedOn(e.node)){const f=[],y=t.getIterator(rn.Wrap);let w=y.getNext();for(;w;)w.name!==e.name&&f.push(w),w=y.getNext();return f.push(e),tA(f,d.getCompare())}return Nv}{const f=t.get(e.name);let y=o;return f&&(y=y.remove(new rn(e.name,f))),y.insert(e,e.node)}});return new dh(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,F.UI)(this.indexes_,o=>{if(o===Nv)return o;{const u=t.get(e.name);return u?o.remove(new rn(e.name,u)):o}});return new dh(r,this.indexSet_)}}let Xb,Gt=(()=>{class n{constructor(t,r,o){this.children_=t,this.priorityNode_=r,this.indexMap_=o,this.lazyHash_=null,this.priorityNode_&&Z1(this.priorityNode_),this.children_.isEmpty()&&(0,F.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Xb||(Xb=new n(new So(_k),null,dh.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Xb}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Xb:r}}getChild(t){const r=tn(t);return null===r?this:this.getImmediateChild(r).getChild(Wn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,F.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const o=new rn(t,r);let u,d;r.isEmpty()?(u=this.children_.remove(t),d=this.indexMap_.removeFromIndexes(o,this.children_)):(u=this.children_.insert(t,r),d=this.indexMap_.addToIndexes(o,this.children_));const f=u.isEmpty()?Xb:this.priorityNode_;return new n(u,f,d)}}updateChild(t,r){const o=tn(t);if(null===o)return r;{(0,F.hu)(".priority"!==tn(t)||1===gp(t),".priority must be the last token in a path");const u=this.getImmediateChild(o).updateChild(Wn(t),r);return this.updateImmediateChild(o,u)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let o=0,u=0,d=!0;if(this.forEachChild(nr,(f,y)=>{r[f]=y.val(t),o++,d&&n.INTEGER_REGEXP_.test(f)?u=Math.max(u,Number(f)):d=!1}),!t&&d&&u<2*o){const f=[];for(const y in r)f[y]=r[y];return f}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+K1(this.getPriority().val())+":"),this.forEachChild(nr,(r,o)=>{const u=o.hash();""!==u&&(t+=":"+r+":"+u)}),this.lazyHash_=""===t?"":c1(t)}return this.lazyHash_}getPredecessorChildName(t,r,o){const u=this.resolveIndex_(o);if(u){const d=u.getPredecessorKey(new rn(t,r));return d?d.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const o=r.minKey();return o&&o.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new rn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const o=r.maxKey();return o&&o.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new rn(r,this.children_.get(r)):null}forEachChild(t,r){const o=this.resolveIndex_(t);return o?o.inorderTraversal(u=>r(u.name,u.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const o=this.resolveIndex_(r);if(o)return o.getIteratorFrom(t,u=>u);{const u=this.children_.getIteratorFrom(t.name,rn.Wrap);let d=u.peek();for(;null!=d&&r.compare(d,t)<0;)u.getNext(),d=u.peek();return u}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const o=this.resolveIndex_(r);if(o)return o.getReverseIteratorFrom(t,u=>u);{const u=this.children_.getReverseIteratorFrom(t.name,rn.Wrap);let d=u.peek();for(;null!=d&&r.compare(d,t)>0;)u.getNext(),d=u.peek();return u}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===eI?-1:0}withIndex(t){if(t===vl||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===vl||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const o=this.getIterator(nr),u=r.getIterator(nr);let d=o.getNext(),f=u.getNext();for(;d&&f;){if(d.name!==f.name||!d.node.equals(f.node))return!1;d=o.getNext(),f=u.getNext()}return null===d&&null===f}return!1}return!1}}resolveIndex_(t){return t===vl?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const eI=new class extends Gt{constructor(){super(new So(_k),Gt.EMPTY_NODE,dh.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Gt.EMPTY_NODE}isEmpty(){return!1}};function Dr(n,e=null){if(null===n)return Gt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,F.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new xv(n,Dr(e));if(n instanceof Array){let t=Gt.EMPTY_NODE;return qi(n,(r,o)=>{if((0,F.r3)(n,r)&&"."!==r.substring(0,1)){const u=Dr(o);(u.isLeafNode()||!u.isEmpty())&&(t=t.updateImmediateChild(r,u))}}),t.updatePriority(Dr(e))}{const t=[];let r=!1;if(qi(n,(d,f)=>{if("."!==d.substring(0,1)){const y=Dr(f);y.isEmpty()||(r=r||!y.getPriority().isEmpty(),t.push(new rn(d,y)))}}),0===t.length)return Gt.EMPTY_NODE;const u=tA(t,_2,d=>d.name,_k);if(r){const d=tA(t,nr.getCompare());return new Gt(u,Dr(e),new dh({".priority":d},{".priority":nr}))}return new Gt(u,Dr(e),dh.Default)}}Object.defineProperties(rn,{MIN:{value:new rn(lh,Gt.EMPTY_NODE)},MAX:{value:new rn(yl,eI)}}),z1.__EMPTY_NODE=Gt.EMPTY_NODE,xv.__childrenNodeConstructor=Gt,function(n){yk=n}(eI),function(n){J1=n}(eI),function(n){Q1=n}(Dr);class Ek extends JS{constructor(e){super(),this.indexPath_=e,(0,F.hu)(!nn(e)&&".priority"!==tn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),o=this.extractChild(t.node),u=r.compareTo(o);return 0===u?jm(e.name,t.name):u}makePost(e,t){const r=Dr(e),o=Gt.EMPTY_NODE.updateChild(this.indexPath_,r);return new rn(t,o)}maxPost(){const e=Gt.EMPTY_NODE.updateChild(this.indexPath_,eI);return new rn(yl,e)}toString(){return Qb(this.indexPath_,0).join("/")}}const wk=new class extends JS{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?jm(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return rn.MIN}maxPost(){return rn.MAX}makePost(e,t){const r=Dr(e);return new rn(t,r)}toString(){return".value"}},Pv="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",S2=function(){let n=0;const e=[];return function(t){const r=t===n;let o;n=t;const u=new Array(8);for(o=7;o>=0;o--)u[o]=Pv.charAt(t%64),t=Math.floor(t/64);(0,F.hu)(0===t,"Cannot push at time == 0");let d=u.join("");if(r){for(o=11;o>=0&&63===e[o];o--)e[o]=0;e[o]++}else for(o=0;o<12;o++)e[o]=Math.floor(64*Math.random());for(o=0;o<12;o++)d+=Pv.charAt(e[o]);return(0,F.hu)(20===d.length,"nextPushId: Length should be 20."),d}}(),tF=function(n){if(n===""+ok)return"-";const e=KS(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let d=0;d<t.length;d++)t[d]=n.charAt(d);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return yl;const u=Pv.charAt(Pv.indexOf(t[r])+1);return t[r]=u,t.slice(0,r+1).join("")},nF=function(n){if(n===""+p1)return lh;const e=KS(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+ok:(delete t[t.length-1],t.join("")):(t[t.length-1]=Pv.charAt(Pv.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function rF(n){return{type:"value",snapshotNode:n}}function kv(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function tI(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function nI(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Ik{constructor(e){this.index_=e}updateChild(e,t,r,o,u,d){(0,F.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=e.getImmediateChild(t);return f.getChild(o).equals(r.getChild(o))&&f.isEmpty()===r.isEmpty()||(null!=d&&(r.isEmpty()?e.hasChild(t)?d.trackChildChange(tI(t,f)):(0,F.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?d.trackChildChange(kv(t,r)):d.trackChildChange(nI(t,r,f))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(nr,(o,u)=>{t.hasChild(o)||r.trackChildChange(tI(o,u))}),t.isLeafNode()||t.forEachChild(nr,(o,u)=>{if(e.hasChild(o)){const d=e.getImmediateChild(o);d.equals(u)||r.trackChildChange(nI(o,u,d))}else r.trackChildChange(kv(o,u))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Gt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class rI{constructor(e){this.indexedFilter_=new Ik(e.getIndex()),this.index_=e.getIndex(),this.startPost_=rI.getStartPost_(e),this.endPost_=rI.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,o,u,d){return this.matches(new rn(t,r))||(r=Gt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,o,u,d)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Gt.EMPTY_NODE);let o=t.withIndex(this.index_);o=o.updatePriority(Gt.EMPTY_NODE);const u=this;return t.forEachChild(nr,(d,f)=>{u.matches(new rn(d,f))||(o=o.updateImmediateChild(d,Gt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,o,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class R2{constructor(e){this.rangedFilter_=new rI(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,o,u,d){return this.rangedFilter_.matches(new rn(t,r))||(r=Gt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,o,u,d):this.fullLimitUpdateChild_(e,t,r,u,d)}updateFullNode(e,t,r){let o;if(t.isLeafNode()||t.isEmpty())o=Gt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let u;o=Gt.EMPTY_NODE.withIndex(this.index_),u=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let d=0;for(;u.hasNext()&&d<this.limit_;){const f=u.getNext();let y;if(y=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),f)<=0:this.index_.compare(f,this.rangedFilter_.getEndPost())<=0,!y)break;o=o.updateImmediateChild(f.name,f.node),d++}}else{let u,d,f,y;if(o=t.withIndex(this.index_),o=o.updatePriority(Gt.EMPTY_NODE),this.reverse_){y=o.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),d=this.rangedFilter_.getStartPost();const A=this.index_.getCompare();f=(M,j)=>A(j,M)}else y=o.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),d=this.rangedFilter_.getEndPost(),f=this.index_.getCompare();let w=0,D=!1;for(;y.hasNext();){const A=y.getNext();!D&&f(u,A)<=0&&(D=!0),D&&w<this.limit_&&f(A,d)<=0?w++:o=o.updateImmediateChild(A.name,Gt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,o,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,o,u){let d;if(this.reverse_){const A=this.index_.getCompare();d=(M,j)=>A(j,M)}else d=this.index_.getCompare();const f=e;(0,F.hu)(f.numChildren()===this.limit_,"");const y=new rn(t,r),w=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),D=this.rangedFilter_.matches(y);if(f.hasChild(t)){const A=f.getImmediateChild(t);let M=o.getChildAfterChild(this.index_,w,this.reverse_);for(;null!=M&&(M.name===t||f.hasChild(M.name));)M=o.getChildAfterChild(this.index_,M,this.reverse_);const j=null==M?1:d(M,y);if(D&&!r.isEmpty()&&j>=0)return null!=u&&u.trackChildChange(nI(t,r,A)),f.updateImmediateChild(t,r);{null!=u&&u.trackChildChange(tI(t,A));const ye=f.updateImmediateChild(t,Gt.EMPTY_NODE);return null!=M&&this.rangedFilter_.matches(M)?(null!=u&&u.trackChildChange(kv(M.name,M.node)),ye.updateImmediateChild(M.name,M.node)):ye}}return r.isEmpty()?e:D&&d(w,y)>=0?(null!=u&&(u.trackChildChange(tI(w.name,w.node)),u.trackChildChange(kv(t,r))),f.updateImmediateChild(t,r).updateImmediateChild(w.name,Gt.EMPTY_NODE)):e}}class nA{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=nr}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:lh}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:yl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,F.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===nr}copy(){const e=new nA;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Ck(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function Tk(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function rA(n,e){const t=n.copy();return t.index_=e,t}function iF(n){const e={};if(n.isDefault())return e;let t;return n.index_===nr?t="$priority":n.index_===wk?t="$value":n.index_===vl?t="$key":((0,F.hu)(n.index_ instanceof Ek,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,F.Pz)(t),n.startSet_&&(e.startAt=(0,F.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,F.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,F.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,F.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function sF(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==nr&&(e.i=n.index_.toString()),e}class iA extends V1{constructor(e,t,r,o){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=o,this.log_=zb("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,F.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,o){const u=e._path.toString();this.log_("Listen called for "+u+" "+e._queryIdentifier);const d=iA.getListenId_(e,r),f={};this.listens_[d]=f;const y=iF(e._queryParams);this.restRequest_(u+".json",y,(w,D)=>{let A=D;if(404===w&&(A=null,w=null),null===w&&this.onDataUpdate_(u,A,!1,r),(0,F.DV)(this.listens_,d)===f){let M;M=w?401===w?"permission_denied":"rest_error:"+w:"ok",o(M,null)}})}unlisten(e,t){const r=iA.getListenId_(e,t);delete this.listens_[r]}get(e){const t=iF(e._queryParams),r=e._path.toString(),o=new F.BH;return this.restRequest_(r+".json",t,(u,d)=>{let f=d;404===u&&(f=null,u=null),null===u?(this.onDataUpdate_(r,f,!1,null),o.resolve(f)):o.reject(new Error(f))}),o.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,u])=>{o&&o.accessToken&&(t.auth=o.accessToken),u&&u.token&&(t.ac=u.token);const d=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,F.xO)(t);this.log_("Sending REST request for "+d);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&4===f.readyState){this.log_("REST Response for "+d+" received. status:",f.status,"response:",f.responseText);let y=null;if(f.status>=200&&f.status<300){try{y=(0,F.cI)(f.responseText)}catch(w){Cs("Failed to parse JSON response for "+d+": "+f.responseText)}r(null,y)}else 401!==f.status&&404!==f.status&&Cs("Got unsuccessful REST response for "+d+" Status: "+f.status),r(f.status);r=null}},f.open("GET",d,!0),f.send()})}}class O2{constructor(){this.rootNode_=Gt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function sA(){return{value:null,children:new Map}}function Mv(n,e,t){if(nn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=tn(e);n.children.has(r)||n.children.set(r,sA()),Mv(n.children.get(r),e=Wn(e),t)}}function Dk(n,e){if(nn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(nr,(r,o)=>{Mv(n,new Nn(r),o)}),Dk(n,e)}}if(n.children.size>0){const t=tn(e);return e=Wn(e),n.children.has(t)&&Dk(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function Sk(n,e,t){null!==n.value?t(e,n.value):function(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,o)=>{Sk(o,new Nn(e.toString()+"/"+r),t)})}class L2{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&qi(this.last_,(r,o)=>{t[r]=t[r]-o}),this.last_=e,t}}class B2{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new L2(e);const r=1e4+2e4*Math.random();Zb(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;qi(e,(o,u)=>{u>0&&(0,F.r3)(this.statsToReport_,o)&&(t[o]=u,r=!0)}),r&&this.server_.reportStats(t),Zb(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var tu=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(tu||(tu={})),tu))();function xk(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class oA{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=tu.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(nn(this.path)){if(null!=this.affectedTree.value)return(0,F.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Nn(e));return new oA(Cn(),t,this.revert)}}return(0,F.hu)(tn(this.path)===e,"operationForChild called for unrelated child."),new oA(Wn(this.path),this.affectedTree,this.revert)}}class iI{constructor(e,t){this.source=e,this.path=t,this.type=tu.LISTEN_COMPLETE}operationForChild(e){return nn(this.path)?new iI(this.source,Cn()):new iI(this.source,Wn(this.path))}}class Gm{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=tu.OVERWRITE}operationForChild(e){return nn(this.path)?new Gm(this.source,Cn(),this.snap.getImmediateChild(e)):new Gm(this.source,Wn(this.path),this.snap)}}class Ov{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=tu.MERGE}operationForChild(e){if(nn(this.path)){const t=this.children.subtree(new Nn(e));return t.isEmpty()?null:t.value?new Gm(this.source,Cn(),t.value):new Ov(this.source,Cn(),t)}return(0,F.hu)(tn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ov(this.source,Wn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class mp{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(nn(e))return this.isFullyInitialized()&&!this.filtered_;const t=tn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class j2{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function sI(n,e,t,r,o,u){const d=r.filter(f=>f.type===t);d.sort((f,y)=>function(n,e,t){if(null==e.childName||null==t.childName)throw(0,F.g5)("Should only compare child_ events.");const r=new rn(e.childName,e.snapshotNode),o=new rn(t.childName,t.snapshotNode);return n.index_.compare(r,o)}(n,f,y)),d.forEach(f=>{const y=function(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,f,u);o.forEach(w=>{w.respondsTo(f.type)&&e.push(w.createEvent(y,n.query_))})})}function aA(n,e){return{eventCache:n,serverCache:e}}function oI(n,e,t,r){return aA(new mp(e,t,r),n.serverCache)}function aF(n,e,t,r){return aA(n.eventCache,new mp(e,t,r))}function uA(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Wm(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Nk;class rr{constructor(e,t=(()=>(Nk||(Nk=new So(AV)),Nk))()){this.value=e,this.children=t}static fromObject(e){let t=new rr(null);return qi(e,(r,o)=>{t=t.set(new Nn(r),o)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Cn(),value:this.value};if(nn(e))return null;{const r=tn(e),o=this.children.get(r);if(null!==o){const u=o.findRootMostMatchingPathAndValue(Wn(e),t);return null!=u?{path:wr(new Nn(r),u.path),value:u.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(nn(e))return this;{const t=tn(e),r=this.children.get(t);return null!==r?r.subtree(Wn(e)):new rr(null)}}set(e,t){if(nn(e))return new rr(t,this.children);{const r=tn(e),u=(this.children.get(r)||new rr(null)).set(Wn(e),t),d=this.children.insert(r,u);return new rr(this.value,d)}}remove(e){if(nn(e))return this.children.isEmpty()?new rr(null):new rr(null,this.children);{const t=tn(e),r=this.children.get(t);if(r){const o=r.remove(Wn(e));let u;return u=o.isEmpty()?this.children.remove(t):this.children.insert(t,o),null===this.value&&u.isEmpty()?new rr(null):new rr(this.value,u)}return this}}get(e){if(nn(e))return this.value;{const t=tn(e),r=this.children.get(t);return r?r.get(Wn(e)):null}}setTree(e,t){if(nn(e))return t;{const r=tn(e),u=(this.children.get(r)||new rr(null)).setTree(Wn(e),t);let d;return d=u.isEmpty()?this.children.remove(r):this.children.insert(r,u),new rr(this.value,d)}}fold(e){return this.fold_(Cn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((o,u)=>{r[o]=u.fold_(wr(e,o),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Cn(),t)}findOnPath_(e,t,r){const o=!!this.value&&r(t,this.value);if(o)return o;if(nn(e))return null;{const u=tn(e),d=this.children.get(u);return d?d.findOnPath_(Wn(e),wr(t,u),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Cn(),t)}foreachOnPath_(e,t,r){if(nn(e))return this;{this.value&&r(t,this.value);const o=tn(e),u=this.children.get(o);return u?u.foreachOnPath_(Wn(e),wr(t,o),r):new rr(null)}}foreach(e){this.foreach_(Cn(),e)}foreach_(e,t){this.children.inorderTraversal((r,o)=>{o.foreach_(wr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class oc{constructor(e){this.writeTree_=e}static empty(){return new oc(new rr(null))}}function aI(n,e,t){if(nn(e))return new oc(new rr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const o=r.path;let u=r.value;const d=Ys(o,e);return u=u.updateChild(d,t),new oc(n.writeTree_.set(o,u))}{const o=new rr(t),u=n.writeTree_.setTree(e,o);return new oc(u)}}}function Pk(n,e,t){let r=n;return qi(t,(o,u)=>{r=aI(r,wr(e,o),u)}),r}function uF(n,e){if(nn(e))return oc.empty();{const t=n.writeTree_.setTree(e,new rr(null));return new oc(t)}}function kk(n,e){return null!=qm(n,e)}function qm(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Ys(t.path,e)):null}function cF(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(nr,(r,o)=>{e.push(new rn(r,o))}):n.writeTree_.children.inorderTraversal((r,o)=>{null!=o.value&&e.push(new rn(r,o.value))}),e}function _p(n,e){if(nn(e))return n;{const t=qm(n,e);return new oc(null!=t?new rr(t):n.writeTree_.subtree(e))}}function Mk(n){return n.writeTree_.isEmpty()}function Fv(n,e){return lF(Cn(),n.writeTree_,e)}function lF(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((o,u)=>{".priority"===o?((0,F.hu)(null!==u.value,"Priority writes must always be leaf nodes"),r=u.value):t=lF(wr(n,o),u,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(wr(n,".priority"),r)),t}}function cA(n,e){return gF(e,n)}function Y2(n,e){if(n.snap)return eu(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&eu(wr(n.path,t),e))return!0;return!1}function J2(n){return n.visible}function dF(n,e,t){let r=oc.empty();for(let o=0;o<n.length;++o){const u=n[o];if(e(u)){const d=u.path;let f;if(u.snap)eu(t,d)?(f=Ys(t,d),r=aI(r,f,u.snap)):eu(d,t)&&(f=Ys(d,t),r=aI(r,Cn(),u.snap.getChild(f)));else{if(!u.children)throw(0,F.g5)("WriteRecord should have .snap or .children");if(eu(t,d))f=Ys(t,d),r=Pk(r,f,u.children);else if(eu(d,t))if(f=Ys(d,t),nn(f))r=Pk(r,Cn(),u.children);else{const y=(0,F.DV)(u.children,tn(f));if(y){const w=y.getChild(Wn(f));r=aI(r,Cn(),w)}}}}}return r}function hF(n,e,t,r,o){if(r||o){const u=_p(n.visibleWrites,e);return!o&&Mk(u)?t:o||null!=t||kk(u,Cn())?Fv(dF(n.allWrites,function(w){return(w.visible||o)&&(!r||!~r.indexOf(w.writeId))&&(eu(w.path,e)||eu(e,w.path))},e),t||Gt.EMPTY_NODE):null}{const u=qm(n.visibleWrites,e);if(null!=u)return u;{const d=_p(n.visibleWrites,e);return Mk(d)?t:null!=t||kk(d,Cn())?Fv(d,t||Gt.EMPTY_NODE):null}}}function lA(n,e,t,r){return hF(n.writeTree,n.treePath,e,t,r)}function Ok(n,e){return function(n,e,t){let r=Gt.EMPTY_NODE;const o=qm(n.visibleWrites,e);if(o)return o.isLeafNode()||o.forEachChild(nr,(u,d)=>{r=r.updateImmediateChild(u,d)}),r;if(t){const u=_p(n.visibleWrites,e);return t.forEachChild(nr,(d,f)=>{const y=Fv(_p(u,new Nn(d)),f);r=r.updateImmediateChild(d,y)}),cF(u).forEach(d=>{r=r.updateImmediateChild(d.name,d.node)}),r}return cF(_p(n.visibleWrites,e)).forEach(d=>{r=r.updateImmediateChild(d.name,d.node)}),r}(n.writeTree,n.treePath,e)}function fF(n,e,t,r){return function(n,e,t,r,o){(0,F.hu)(r||o,"Either existingEventSnap or existingServerSnap must exist");const u=wr(e,t);if(kk(n.visibleWrites,u))return null;{const d=_p(n.visibleWrites,u);return Mk(d)?o.getChild(t):Fv(d,o.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function dA(n,e){return function(n,e){return qm(n.visibleWrites,e)}(n.writeTree,wr(n.treePath,e))}function Fk(n,e,t){return function(n,e,t,r){const o=wr(e,t),u=qm(n.visibleWrites,o);return null!=u?u:r.isCompleteForChild(t)?Fv(_p(n.visibleWrites,o),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function pF(n,e){return gF(wr(n.treePath,e),n.writeTree)}function gF(n,e){return{treePath:n,writeTree:e}}class oB{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,F.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,F.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const o=this.changeMap.get(r);if(o){const u=o.type;if("child_added"===t&&"child_removed"===u)this.changeMap.set(r,nI(r,e.snapshotNode,o.snapshotNode));else if("child_removed"===t&&"child_added"===u)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===u)this.changeMap.set(r,tI(r,o.oldSnap));else if("child_changed"===t&&"child_added"===u)this.changeMap.set(r,kv(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==u)throw(0,F.g5)("Illegal combination of changes: "+e+" occurred after "+o);this.changeMap.set(r,nI(r,e.snapshotNode,o.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const mF=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class Lk{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new mp(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Fk(this.writes_,e,r)}}getChildAfterChild(e,t,r){const o=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Wm(this.viewCache_),u=function(n,e,t,r,o,u){return function(n,e,t,r,o,u,d){let f;const y=_p(n.visibleWrites,e),w=qm(y,Cn());if(null!=w)f=w;else{if(null==t)return[];f=Fv(y,t)}if(f=f.withIndex(d),f.isEmpty()||f.isLeafNode())return[];{const D=[],A=d.getCompare(),M=u?f.getReverseIteratorFrom(r,d):f.getIteratorFrom(r,d);let j=M.getNext();for(;j&&D.length<o;)0!==A(j,r)&&D.push(j),j=M.getNext();return D}}(n.writeTree,n.treePath,e,t,r,o,u)}(this.writes_,o,t,1,r,e);return 0===u.length?null:u[0]}}function _F(n,e,t,r,o,u){const d=e.eventCache;if(null!=dA(r,t))return e;{let f,y;if(nn(t))if((0,F.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const w=Wm(e),A=Ok(r,w instanceof Gt?w:Gt.EMPTY_NODE);f=n.filter.updateFullNode(e.eventCache.getNode(),A,u)}else{const w=lA(r,Wm(e));f=n.filter.updateFullNode(e.eventCache.getNode(),w,u)}else{const w=tn(t);if(".priority"===w){(0,F.hu)(1===gp(t),"Can't have a priority with additional path components");const D=d.getNode();y=e.serverCache.getNode();const A=fF(r,t,D,y);f=null!=A?n.filter.updatePriority(D,A):d.getNode()}else{const D=Wn(t);let A;if(d.isCompleteForChild(w)){y=e.serverCache.getNode();const M=fF(r,t,d.getNode(),y);A=null!=M?d.getNode().getImmediateChild(w).updateChild(D,M):d.getNode().getImmediateChild(w)}else A=Fk(r,w,e.serverCache);f=null!=A?n.filter.updateChild(d.getNode(),w,A,D,o,u):d.getNode()}}return oI(e,f,d.isFullyInitialized()||nn(t),n.filter.filtersNodes())}}function hA(n,e,t,r,o,u,d,f){const y=e.serverCache;let w;const D=d?n.filter:n.filter.getIndexedFilter();if(nn(t))w=D.updateFullNode(y.getNode(),r,null);else if(D.filtersNodes()&&!y.isFiltered()){const j=y.getNode().updateChild(t,r);w=D.updateFullNode(y.getNode(),j,null)}else{const j=tn(t);if(!y.isCompleteForPath(t)&&gp(t)>1)return e;const Y=Wn(t),Re=y.getNode().getImmediateChild(j).updateChild(Y,r);w=".priority"===j?D.updatePriority(y.getNode(),Re):D.updateChild(y.getNode(),j,Re,Y,mF,null)}const A=aF(e,w,y.isFullyInitialized()||nn(t),D.filtersNodes());return _F(n,A,t,o,new Lk(o,A,u),f)}function Uk(n,e,t,r,o,u,d){const f=e.eventCache;let y,w;const D=new Lk(o,e,u);if(nn(t))w=n.filter.updateFullNode(e.eventCache.getNode(),r,d),y=oI(e,w,!0,n.filter.filtersNodes());else{const A=tn(t);if(".priority"===A)w=n.filter.updatePriority(e.eventCache.getNode(),r),y=oI(e,w,f.isFullyInitialized(),f.isFiltered());else{const M=Wn(t),j=f.getNode().getImmediateChild(A);let Y;if(nn(M))Y=r;else{const ye=D.getCompleteChild(A);Y=null!=ye?".priority"===pk(M)&&ye.getChild(H1(M)).isEmpty()?ye:ye.updateChild(M,r):Gt.EMPTY_NODE}y=j.equals(Y)?e:oI(e,n.filter.updateChild(f.getNode(),A,Y,M,D,d),f.isFullyInitialized(),n.filter.filtersNodes())}}return y}function yF(n,e){return n.eventCache.isCompleteForChild(e)}function vF(n,e,t){return t.foreach((r,o)=>{e=e.updateChild(r,o)}),e}function Vk(n,e,t,r,o,u,d,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let w,y=e;w=nn(t)?r:new rr(null).setTree(t,r);const D=e.serverCache.getNode();return w.children.inorderTraversal((A,M)=>{if(D.hasChild(A)){const Y=vF(0,e.serverCache.getNode().getImmediateChild(A),M);y=hA(n,y,new Nn(A),Y,o,u,d,f)}}),w.children.inorderTraversal((A,M)=>{const j=!e.serverCache.isCompleteForChild(A)&&void 0===M.value;if(!D.hasChild(A)&&!j){const ye=vF(0,e.serverCache.getNode().getImmediateChild(A),M);y=hA(n,y,new Nn(A),ye,o,u,d,f)}}),y}class mB{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,o=new Ik(r.getIndex()),u=function(n){return n.loadsAllData()?new Ik(n.getIndex()):n.hasLimit()?new R2(n):new rI(n)}(r);this.processor_=function(n){return{filter:n}}(u);const d=t.serverCache,f=t.eventCache,y=o.updateFullNode(Gt.EMPTY_NODE,d.getNode(),null),w=u.updateFullNode(Gt.EMPTY_NODE,f.getNode(),null),D=new mp(y,d.isFullyInitialized(),o.filtersNodes()),A=new mp(w,f.isFullyInitialized(),u.filtersNodes());this.viewCache_=aA(A,D),this.eventGenerator_=new j2(this.query_)}get query(){return this.query_}}function vB(n,e){const t=Wm(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!nn(e)&&!t.getImmediateChild(tn(e)).isEmpty())?t.getChild(e):null}function EF(n){return 0===n.eventRegistrations_.length}function wF(n,e,t){const r=[];if(t){(0,F.hu)(null==e,"A cancel should cancel all event registrations.");const o=n.query._path;n.eventRegistrations_.forEach(u=>{const d=u.createCancelEvent(t,o);d&&r.push(d)})}if(e){let o=[];for(let u=0;u<n.eventRegistrations_.length;++u){const d=n.eventRegistrations_[u];if(d.matches(e)){if(e.hasAnyCallback()){o=o.concat(n.eventRegistrations_.slice(u+1));break}}else o.push(d)}n.eventRegistrations_=o}else n.eventRegistrations_=[];return r}function bF(n,e,t,r){e.type===tu.MERGE&&null!==e.source.queryId&&((0,F.hu)(Wm(n.viewCache_),"We should always have a full cache before handling merges"),(0,F.hu)(uA(n.viewCache_),"Missing event cache, even though we have a server cache"));const o=n.viewCache_,u=function(n,e,t,r,o){const u=new oB;let d,f;if(t.type===tu.OVERWRITE){const w=t;w.source.fromUser?d=Uk(n,e,w.path,w.snap,r,o,u):((0,F.hu)(w.source.fromServer,"Unknown source."),f=w.source.tagged||e.serverCache.isFiltered()&&!nn(w.path),d=hA(n,e,w.path,w.snap,r,o,f,u))}else if(t.type===tu.MERGE){const w=t;w.source.fromUser?d=function(n,e,t,r,o,u,d){let f=e;return r.foreach((y,w)=>{const D=wr(t,y);yF(e,tn(D))&&(f=Uk(n,f,D,w,o,u,d))}),r.foreach((y,w)=>{const D=wr(t,y);yF(e,tn(D))||(f=Uk(n,f,D,w,o,u,d))}),f}(n,e,w.path,w.children,r,o,u):((0,F.hu)(w.source.fromServer,"Unknown source."),f=w.source.tagged||e.serverCache.isFiltered(),d=Vk(n,e,w.path,w.children,r,o,f,u))}else if(t.type===tu.ACK_USER_WRITE){const w=t;d=w.revert?function(n,e,t,r,o,u){let d;if(null!=dA(r,t))return e;{const f=new Lk(r,e,o),y=e.eventCache.getNode();let w;if(nn(t)||".priority"===tn(t)){let D;if(e.serverCache.isFullyInitialized())D=lA(r,Wm(e));else{const A=e.serverCache.getNode();(0,F.hu)(A instanceof Gt,"serverChildren would be complete if leaf node"),D=Ok(r,A)}D=D,w=n.filter.updateFullNode(y,D,u)}else{const D=tn(t);let A=Fk(r,D,e.serverCache);null==A&&e.serverCache.isCompleteForChild(D)&&(A=y.getImmediateChild(D)),w=null!=A?n.filter.updateChild(y,D,A,Wn(t),f,u):e.eventCache.getNode().hasChild(D)?n.filter.updateChild(y,D,Gt.EMPTY_NODE,Wn(t),f,u):y,w.isEmpty()&&e.serverCache.isFullyInitialized()&&(d=lA(r,Wm(e)),d.isLeafNode()&&(w=n.filter.updateFullNode(w,d,u)))}return d=e.serverCache.isFullyInitialized()||null!=dA(r,Cn()),oI(e,w,d,n.filter.filtersNodes())}}(n,e,w.path,r,o,u):function(n,e,t,r,o,u,d){if(null!=dA(o,t))return e;const f=e.serverCache.isFiltered(),y=e.serverCache;if(null!=r.value){if(nn(t)&&y.isFullyInitialized()||y.isCompleteForPath(t))return hA(n,e,t,y.getNode().getChild(t),o,u,f,d);if(nn(t)){let w=new rr(null);return y.getNode().forEachChild(vl,(D,A)=>{w=w.set(new Nn(D),A)}),Vk(n,e,t,w,o,u,f,d)}return e}{let w=new rr(null);return r.foreach((D,A)=>{const M=wr(t,D);y.isCompleteForPath(M)&&(w=w.set(D,y.getNode().getChild(M)))}),Vk(n,e,t,w,o,u,f,d)}}(n,e,w.path,w.affectedTree,r,o,u)}else{if(t.type!==tu.LISTEN_COMPLETE)throw(0,F.g5)("Unknown operation type: "+t.type);d=function(n,e,t,r,o){const u=e.serverCache;return _F(n,aF(e,u.getNode(),u.isFullyInitialized()||nn(t),u.isFiltered()),t,r,mF,o)}(n,e,t.path,r,u)}const y=u.getChanges();return function(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const o=r.getNode().isLeafNode()||r.getNode().isEmpty(),u=uA(n);(t.length>0||!n.eventCache.isFullyInitialized()||o&&!r.getNode().equals(u)||!r.getNode().getPriority().equals(u.getPriority()))&&t.push(rF(uA(e)))}}(e,d,y),{viewCache:d,changes:y}}(n.processor_,o,e,t,r);return function(n,e){(0,F.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,F.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,u.viewCache),(0,F.hu)(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=u.viewCache,IF(n,u.changes,u.viewCache.eventCache.getNode(),null)}function IF(n,e,t,r){return function(n,e,t,r){const o=[],u=[];return e.forEach(d=>{"child_changed"===d.type&&n.index_.indexedValueChanged(d.oldSnap,d.snapshotNode)&&u.push(function(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(d.childName,d.snapshotNode))}),sI(n,o,"child_removed",e,r,t),sI(n,o,"child_added",e,r,t),sI(n,o,"child_moved",u,r,t),sI(n,o,"child_changed",e,r,t),sI(n,o,"value",e,r,t),o}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let fA,gA;class CF{constructor(){this.views=new Map}}function Bk(n,e,t,r){const o=e.source.queryId;if(null!==o){const u=n.views.get(o);return(0,F.hu)(null!=u,"SyncTree gave us an op for an invalid query."),bF(u,e,t,r)}{let u=[];for(const d of n.views.values())u=u.concat(bF(d,e,t,r));return u}}function TF(n,e,t,r,o){const d=n.views.get(e._queryIdentifier);if(!d){let f=lA(t,o?r:null),y=!1;f?y=!0:r instanceof Gt?(f=Ok(t,r),y=!1):(f=Gt.EMPTY_NODE,y=!1);const w=aA(new mp(f,y,!1),new mp(r,o,!1));return new mB(e,w)}return d}function DF(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function yp(n,e){let t=null;for(const r of n.views.values())t=t||vB(r,e);return t}function SF(n,e){return e._queryParams.loadsAllData()?pA(n):n.views.get(e._queryIdentifier)}function AF(n,e){return null!=SF(n,e)}function vp(n){return null!=pA(n)}function pA(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let RB=1;class RF{constructor(e){this.listenProvider_=e,this.syncPointTree_=new rr(null),this.pendingWriteTree_={visibleWrites:oc.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function jk(n,e,t,r,o){return function(n,e,t,r,o){(0,F.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:o}),o&&(n.visibleWrites=aI(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,o),o?Lv(n,new Gm({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Ep(n,e,t=!1){const r=function(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function(n,e){const t=n.allWrites.findIndex(f=>f.writeId===e);(0,F.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let o=r.visible,u=!1,d=n.allWrites.length-1;for(;o&&d>=0;){const f=n.allWrites[d];f.visible&&(d>=t&&Y2(f,r.path)?o=!1:eu(r.path,f.path)&&(u=!0)),d--}return!!o&&(u?(function(n){n.visibleWrites=dF(n.allWrites,J2,Cn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=uF(n.visibleWrites,r.path):qi(r.children,y=>{n.visibleWrites=uF(n.visibleWrites,wr(r.path,y))}),!0))}(n.pendingWriteTree_,e)){let u=new rr(null);return null!=r.snap?u=u.set(Cn(),!0):qi(r.children,d=>{u=u.set(new Nn(d),!0)}),Lv(n,new oA(r.path,u,t))}return[]}function uI(n,e,t){return Lv(n,new Gm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function $k(n,e,t,r){const o=e._path,u=n.syncPointTree_.get(o);let d=[];if(u&&("default"===e._queryIdentifier||AF(u,e))){const f=function(n,e,t,r){const o=e._queryIdentifier,u=[];let d=[];const f=vp(n);if("default"===o)for(const[y,w]of n.views.entries())d=d.concat(wF(w,t,r)),EF(w)&&(n.views.delete(y),w.query._queryParams.loadsAllData()||u.push(w.query));else{const y=n.views.get(o);y&&(d=d.concat(wF(y,t,r)),EF(y)&&(n.views.delete(o),y.query._queryParams.loadsAllData()||u.push(y.query)))}return f&&!vp(n)&&u.push(new((0,F.hu)(fA,"Reference.ts has not been loaded"),fA)(e._repo,e._path)),{removed:u,events:d}}(u,e,t,r);(function(n){return 0===n.views.size})(u)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const y=f.removed;d=f.events;const w=-1!==y.findIndex(A=>A._queryParams.loadsAllData()),D=n.syncPointTree_.findOnPath(o,(A,M)=>vp(M));if(w&&!D){const A=n.syncPointTree_.subtree(o);if(!A.isEmpty()){const M=function(n){return n.fold((e,t,r)=>{if(t&&vp(t))return[pA(t)];{let o=[];return t&&(o=DF(t)),qi(r,(u,d)=>{o=o.concat(d)}),o}})}(A);for(let j=0;j<M.length;++j){const Y=M[j],ye=Y.query,Re=kF(n,Y);n.listenProvider_.startListening(cI(ye),_A(n,ye),Re.hashFn,Re.onComplete)}}}if(!D&&y.length>0&&!r)if(w){const A=null;n.listenProvider_.stopListening(cI(e),A)}else y.forEach(A=>{const M=n.queryToTagMap.get(yA(A));n.listenProvider_.stopListening(cI(A),M)});!function(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const o=yA(r),u=n.queryToTagMap.get(o);n.queryToTagMap.delete(o),n.tagToQueryMap.delete(u)}}}(n,y)}return d}function xF(n,e,t){const r=e._path;let o=null,u=!1;n.syncPointTree_.foreachOnPath(r,(A,M)=>{const j=Ys(A,r);o=o||yp(M,j),u=u||vp(M)});let f,d=n.syncPointTree_.get(r);d?(u=u||vp(d),o=o||yp(d,Cn())):(d=new CF,n.syncPointTree_=n.syncPointTree_.set(r,d)),null!=o?f=!0:(f=!1,o=Gt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((M,j)=>{const Y=yp(j,Cn());Y&&(o=o.updateImmediateChild(M,Y))}));const y=AF(d,e);if(!y&&!e._queryParams.loadsAllData()){const A=yA(e);(0,F.hu)(!n.queryToTagMap.has(A),"View does not exist, but we have a tag");const M=RB++;n.queryToTagMap.set(A,M),n.tagToQueryMap.set(M,A)}let D=function(n,e,t,r,o,u){const d=TF(n,e,r,o,u);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,d),function(n,e){n.eventRegistrations_.push(e)}(d,t),function(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(nr,(u,d)=>{r.push(kv(u,d))}),t.isFullyInitialized()&&r.push(rF(t.getNode())),IF(n,r,t.getNode(),e)}(d,t)}(d,e,t,cA(n.pendingWriteTree_,r),o,f);if(!y&&!u){const A=SF(d,e);D=D.concat(function(n,e,t){const r=e._path,o=_A(n,e),u=kF(n,t),d=n.listenProvider_.startListening(cI(e),o,u.hashFn,u.onComplete),f=n.syncPointTree_.subtree(r);if(o)(0,F.hu)(!vp(f.value),"If we're adding a query, it shouldn't be shadowed");else{const y=f.fold((w,D,A)=>{if(!nn(w)&&D&&vp(D))return[pA(D).query];{let M=[];return D&&(M=M.concat(DF(D).map(j=>j.query))),qi(A,(j,Y)=>{M=M.concat(Y)}),M}});for(let w=0;w<y.length;++w){const D=y[w];n.listenProvider_.stopListening(cI(D),_A(n,D))}}return d}(n,e,A))}return D}function mA(n,e,t){const o=n.pendingWriteTree_,u=n.syncPointTree_.findOnPath(e,(d,f)=>{const w=yp(f,Ys(d,e));if(w)return w});return hF(o,e,u,t,!0)}function Lv(n,e){return NF(e,n.syncPointTree_,null,cA(n.pendingWriteTree_,Cn()))}function NF(n,e,t,r){if(nn(n.path))return PF(n,e,t,r);{const o=e.get(Cn());null==t&&null!=o&&(t=yp(o,Cn()));let u=[];const d=tn(n.path),f=n.operationForChild(d),y=e.children.get(d);if(y&&f){const w=t?t.getImmediateChild(d):null,D=pF(r,d);u=u.concat(NF(f,y,w,D))}return o&&(u=u.concat(Bk(o,n,r,t))),u}}function PF(n,e,t,r){const o=e.get(Cn());null==t&&null!=o&&(t=yp(o,Cn()));let u=[];return e.children.inorderTraversal((d,f)=>{const y=t?t.getImmediateChild(d):null,w=pF(r,d),D=n.operationForChild(d);D&&(u=u.concat(PF(D,f,y,w)))}),o&&(u=u.concat(Bk(o,n,r,t))),u}function kF(n,e){const t=e.query,r=_A(n,t);return{hashFn:()=>(function(n){return n.viewCache_.serverCache.getNode()}(e)||Gt.EMPTY_NODE).hash(),onComplete:o=>{if("ok"===o)return r?function(n,e,t){const r=Hk(n,t);if(r){const o=Gk(r),u=o.path,d=o.queryId,f=Ys(u,e);return Wk(n,u,new iI(xk(d),f))}return[]}(n,t._path,r):function(n,e){return Lv(n,new iI({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const u=function(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(o,t);return $k(n,t,null,u)}}}}function _A(n,e){const t=yA(e);return n.queryToTagMap.get(t)}function yA(n){return n._path.toString()+"$"+n._queryIdentifier}function Hk(n,e){return n.tagToQueryMap.get(e)}function Gk(n){const e=n.indexOf("$");return(0,F.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Nn(n.substr(0,e))}}function Wk(n,e,t){const r=n.syncPointTree_.get(e);return(0,F.hu)(r,"Missing sync point for query tag that we're tracking"),Bk(r,t,cA(n.pendingWriteTree_,e),null)}function cI(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new((0,F.hu)(gA,"Reference.ts has not been loaded"),gA)(n._repo,n._path):n}class qk{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new qk(t)}node(){return this.node_}}class zk{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=wr(this.path_,e);return new zk(this.syncTree_,t)}node(){return mA(this.syncTree_,this.path_)}}const MF=function(n,e,t){return n&&"object"==typeof n?((0,F.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?$B(n[".sv"],e,t):"object"==typeof n[".sv"]?HB(n[".sv"],e):void(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},$B=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:(0,F.hu)(!1,"Unexpected server value: "+n)}},HB=function(n,e,t){n.hasOwnProperty("increment")||(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,F.hu)(!1,"Unexpected increment value: "+r);const o=e.node();if((0,F.hu)(null!=o,"Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;const d=o.getValue();return"number"!=typeof d?r:d+r},OF=function(n,e,t,r){return Zk(e,new zk(t,n),r)},Kk=function(n,e,t){return Zk(n,new qk(e),t)};function Zk(n,e,t){const r=n.getPriority().val(),o=MF(r,e.getImmediateChild(".priority"),t);let u;if(n.isLeafNode()){const d=n,f=MF(d.getValue(),e,t);return f!==d.getValue()||o!==d.getPriority().val()?new xv(f,Dr(o)):n}{const d=n;return u=d,o!==d.getPriority().val()&&(u=u.updatePriority(new xv(o))),d.forEachChild(nr,(f,y)=>{const w=Zk(y,e.getImmediateChild(f),t);w!==y&&(u=u.updateImmediateChild(f,w))}),u}}class Yk{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function vA(n,e){let t=e instanceof Nn?e:new Nn(e),r=n,o=tn(t);for(;null!==o;){const u=(0,F.DV)(r.node.children,o)||{children:{},childCount:0};r=new Yk(o,r,u),t=Wn(t),o=tn(t)}return r}function zm(n){return n.node.value}function Qk(n,e){n.node.value=e,Jk(n)}function FF(n){return n.node.childCount>0}function EA(n,e){qi(n.node.children,(t,r)=>{e(new Yk(t,n,r))})}function LF(n,e,t,r){t&&!r&&e(n),EA(n,o=>{LF(o,e,!0,r)}),t&&r&&e(n)}function lI(n){return new Nn(null===n.parent?n.name:lI(n.parent)+"/"+n.name)}function Jk(n){null!==n.parent&&function(n,e,t){const r=function(n){return void 0===zm(n)&&!FF(n)}(t),o=(0,F.r3)(n.node.children,e);r&&o?(delete n.node.children[e],n.node.childCount--,Jk(n)):!r&&!o&&(n.node.children[e]=t.node,n.node.childCount++,Jk(n))}(n.parent,n.name,n)}const zB=/[\[\].#$\/\u0000-\u001F\u007F]/,KB=/[\[\].#$\u0000-\u001F\u007F]/,Xk=10485760,wA=function(n){return"string"==typeof n&&0!==n.length&&!zB.test(n)},UF=function(n){return"string"==typeof n&&0!==n.length&&!KB.test(n)},dI=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!zS(n)||n&&"object"==typeof n&&(0,F.r3)(n,".sv")},El=function(n,e,t,r){r&&void 0===e||hI((0,F.gK)(n,"value"),e,t)},hI=function(n,e,t){const r=t instanceof Nn?new u2(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+$m(r));if("function"==typeof e)throw new Error(n+"contains a function "+$m(r)+" with contents = "+e.toString());if(zS(e))throw new Error(n+"contains "+e.toString()+" "+$m(r));if("string"==typeof e&&e.length>Xk/3&&(0,F.ug)(e)>Xk)throw new Error(n+"contains a string greater than "+Xk+" utf8 bytes "+$m(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let o=!1,u=!1;if(qi(e,(d,f)=>{if(".value"===d)o=!0;else if(".priority"!==d&&".sv"!==d&&(u=!0,!wA(d)))throw new Error(n+" contains an invalid key ("+d+") "+$m(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,F.ug)(e),G1(n)})(r,d),hI(n,f,r),function(n){const e=n.parts_.pop();n.byteLength_-=(0,F.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),o&&u)throw new Error(n+' contains ".value" child '+$m(r)+" in addition to actual children.")}},VF=function(n,e,t,r){if(r&&void 0===e)return;const o=(0,F.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(o+" must be an object containing the children to replace.");const u=[];qi(e,(d,f)=>{const y=new Nn(d);if(hI(o,f,wr(t,y)),".priority"===pk(y)&&!dI(f))throw new Error(o+"contains an invalid value for '"+y.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");u.push(y)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const u=Qb(r);for(let d=0;d<u.length;d++)if((".priority"!==u[d]||d!==u.length-1)&&!wA(u[d]))throw new Error(n+"contains an invalid key ("+u[d]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(a2);let o=null;for(t=0;t<e.length;t++){if(r=e[t],null!==o&&eu(o,r))throw new Error(n+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(o,u)},eM=function(n,e,t){if(!t||void 0!==e){if(zS(e))throw new Error((0,F.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!dI(e))throw new Error((0,F.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},fI=function(n,e,t,r){if(!(r&&void 0===t||wA(t)))throw new Error((0,F.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},pI=function(n,e,t,r){if(!(r&&void 0===t||UF(t)))throw new Error((0,F.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},nu=function(n,e){if(".info"===tn(e))throw new Error(n+" failed = Can't modify data under /.info/")},BF=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!wA(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),UF(n)}(t))throw new Error((0,F.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class JB{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function bA(n,e){let t=null;for(let r=0;r<e.length;r++){const o=e[r],u=o.getPath();null!==t&&!gk(u,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:u}),t.events.push(o)}t&&n.eventLists_.push(t)}function tM(n,e,t){bA(n,t),jF(n,r=>gk(r,e))}function ru(n,e,t){bA(n,t),jF(n,r=>eu(r,e)||eu(e,r))}function jF(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const o=n.eventLists_[r];o&&(e(o.path)?(XB(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function XB(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Bm&&Wi("event: "+t.toString()),Av(r)}}}const $F="repo_interrupt";class tj{constructor(e,t,r,o){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new JB,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=sA(),this.transactionQueueTree_=new Yk,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function HF(n){const t=n.infoData_.getNode(new Nn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function gI(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:HF(n)})}function GF(n,e,t,r,o){n.dataUpdateCount++;const u=new Nn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let d=[];if(o)if(r){const y=(0,F.UI)(t,w=>Dr(w));d=function(n,e,t,r){const o=Hk(n,r);if(o){const u=Gk(o),d=u.path,f=u.queryId,y=Ys(d,e),w=rr.fromObject(t);return Wk(n,d,new Ov(xk(f),y,w))}return[]}(n.serverSyncTree_,u,y,o)}else{const y=Dr(t);d=function(n,e,t,r){const o=Hk(n,r);if(null!=o){const u=Gk(o),d=u.path,f=u.queryId,y=Ys(d,e);return Wk(n,d,new Gm(xk(f),y,t))}return[]}(n.serverSyncTree_,u,y,o)}else if(r){const y=(0,F.UI)(t,w=>Dr(w));d=function(n,e,t){const r=rr.fromObject(t);return Lv(n,new Ov({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,u,y)}else{const y=Dr(t);d=uI(n.serverSyncTree_,u,y)}let f=u;d.length>0&&(f=Vv(n,u)),ru(n.eventQueue_,f,d)}function WF(n,e){nM(n,"connected",e),!1===e&&function(n){Uv(n,"onDisconnectEvents");const e=gI(n),t=sA();Sk(n.onDisconnect_,Cn(),(o,u)=>{const d=OF(o,u,n.serverSyncTree_,e);Mv(t,o,d)});let r=[];Sk(t,Cn(),(o,u)=>{r=r.concat(uI(n.serverSyncTree_,o,u));const d=oM(n,o);Vv(n,d)}),n.onDisconnect_=sA(),ru(n.eventQueue_,Cn(),r)}(n)}function nM(n,e,t){const r=new Nn("/.info/"+e),o=Dr(t);n.infoData_.updateSnapshot(r,o);const u=uI(n.infoSyncTree_,r,o);ru(n.eventQueue_,r,u)}function IA(n){return n.nextWriteId_++}function rM(n,e,t,r,o){Uv(n,"set",{path:e.toString(),value:t,priority:r});const u=gI(n),d=Dr(t,r),f=mA(n.serverSyncTree_,e),y=Kk(d,f,u),w=IA(n),D=jk(n.serverSyncTree_,e,y,w,!0);bA(n.eventQueue_,D),n.server_.put(e.toString(),d.val(!0),(M,j)=>{const Y="ok"===M;Y||Cs("set at "+e+" failed: "+M);const ye=Ep(n.serverSyncTree_,w,!Y);ru(n.eventQueue_,e,ye),wp(0,o,M,j)});const A=oM(n,e);Vv(n,A),ru(n.eventQueue_,A,[])}function aj(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,o)=>{"ok"===r&&Dk(n.onDisconnect_,e),wp(0,t,r,o)})}function qF(n,e,t,r){const o=Dr(t);n.server_.onDisconnectPut(e.toString(),o.val(!0),(u,d)=>{"ok"===u&&Mv(n.onDisconnect_,e,o),wp(0,r,u,d)})}function iM(n,e,t){let r;r=".info"===tn(e._path)?$k(n.infoSyncTree_,e,t):$k(n.serverSyncTree_,e,t),tM(n.eventQueue_,e._path,r)}function zF(n){n.persistentConnection_&&n.persistentConnection_.interrupt($F)}function Uv(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Wi(t,...e)}function wp(n,e,t,r){e&&Av(()=>{if("ok"===t)e(null);else{const o=(t||"error").toUpperCase();let u=o;r&&(u+=": "+r);const d=new Error(u);d.code=o,e(d)}})}function sM(n,e,t){return mA(n.serverSyncTree_,e,t)||Gt.EMPTY_NODE}function CA(n,e=n.transactionQueueTree_){if(e||TA(n,e),zm(e)){const t=ZF(n,e);(0,F.hu)(t.length>0,"Sending zero length transaction queue"),t.every(o=>0===o.status)&&function(n,e,t){const r=t.map(w=>w.currentWriteId),o=sM(n,e,r);let u=o;const d=o.hash();for(let w=0;w<t.length;w++){const D=t[w];(0,F.hu)(0===D.status,"tryToSendTransactionQueue_: items in queue should all be run."),D.status=1,D.retryCount++;const A=Ys(e,D.path);u=u.updateChild(A,D.currentOutputSnapshotRaw)}const f=u.val(!0),y=e;n.server_.put(y.toString(),f,w=>{Uv(n,"transaction put response",{path:y.toString(),status:w});let D=[];if("ok"===w){const A=[];for(let M=0;M<t.length;M++)t[M].status=2,D=D.concat(Ep(n.serverSyncTree_,t[M].currentWriteId)),t[M].onComplete&&A.push(()=>t[M].onComplete(null,!0,t[M].currentOutputSnapshotResolved)),t[M].unwatcher();TA(n,vA(n.transactionQueueTree_,e)),CA(n,n.transactionQueueTree_),ru(n.eventQueue_,e,D);for(let M=0;M<A.length;M++)Av(A[M])}else{if("datastale"===w)for(let A=0;A<t.length;A++)t[A].status=3===t[A].status?4:0;else{Cs("transaction at "+y.toString()+" failed: "+w);for(let A=0;A<t.length;A++)t[A].status=4,t[A].abortReason=w}Vv(n,e)}},d)}(n,lI(e),t)}else FF(e)&&EA(e,t=>{CA(n,t)})}function Vv(n,e){const t=KF(n,e),r=lI(t);return function(n,e,t){if(0===e.length)return;const r=[];let o=[];const d=e.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const y=e[f],w=Ys(t,y.path);let A,D=!1;if((0,F.hu)(null!==w,"rerunTransactionsUnderNode_: relativePath should not be null."),4===y.status)D=!0,A=y.abortReason,o=o.concat(Ep(n.serverSyncTree_,y.currentWriteId,!0));else if(0===y.status)if(y.retryCount>=25)D=!0,A="maxretry",o=o.concat(Ep(n.serverSyncTree_,y.currentWriteId,!0));else{const M=sM(n,y.path,d);y.currentInputSnapshot=M;const j=e[f].update(M.val());if(void 0!==j){hI("transaction failed: Data returned ",j,y.path);let Y=Dr(j);"object"==typeof j&&null!=j&&(0,F.r3)(j,".priority")||(Y=Y.updatePriority(M.getPriority()));const Re=y.currentWriteId,lt=gI(n),ct=Kk(Y,M,lt);y.currentOutputSnapshotRaw=Y,y.currentOutputSnapshotResolved=ct,y.currentWriteId=IA(n),d.splice(d.indexOf(Re),1),o=o.concat(jk(n.serverSyncTree_,y.path,ct,y.currentWriteId,y.applyLocally)),o=o.concat(Ep(n.serverSyncTree_,Re,!0))}else D=!0,A="nodata",o=o.concat(Ep(n.serverSyncTree_,y.currentWriteId,!0))}ru(n.eventQueue_,t,o),o=[],D&&(e[f].status=2,setTimeout(e[f].unwatcher,Math.floor(0)),e[f].onComplete&&r.push("nodata"===A?()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot):()=>e[f].onComplete(new Error(A),!1,null)))}TA(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)Av(r[f]);CA(n,n.transactionQueueTree_)}(n,ZF(n,t),r),r}function KF(n,e){let t,r=n.transactionQueueTree_;for(t=tn(e);null!==t&&void 0===zm(r);)r=vA(r,t),t=tn(e=Wn(e));return r}function ZF(n,e){const t=[];return YF(n,e,t),t.sort((r,o)=>r.order-o.order),t}function YF(n,e,t){const r=zm(e);if(r)for(let o=0;o<r.length;o++)t.push(r[o]);EA(e,o=>{YF(n,o,t)})}function TA(n,e){const t=zm(e);if(t){let r=0;for(let o=0;o<t.length;o++)2!==t[o].status&&(t[r]=t[o],r++);t.length=r,Qk(e,t.length>0?t:void 0)}EA(e,r=>{TA(n,r)})}function oM(n,e){const t=lI(KF(n,e)),r=vA(n.transactionQueueTree_,e);return function(n,e,t){let r=n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,o=>{aM(n,o)}),aM(n,r),LF(r,o=>{aM(n,o)}),t}function aM(n,e){const t=zm(e);if(t){const r=[];let o=[],u=-1;for(let d=0;d<t.length;d++)3===t[d].status||(1===t[d].status?((0,F.hu)(u===d-1,"All SENT items should be at beginning of queue."),u=d,t[d].status=3,t[d].abortReason="set"):((0,F.hu)(0===t[d].status,"Unexpected transaction status in abort"),t[d].unwatcher(),o=o.concat(Ep(n.serverSyncTree_,t[d].currentWriteId,!0)),t[d].onComplete&&r.push(t[d].onComplete.bind(null,new Error("set"),!1,null))));-1===u?Qk(e,void 0):t.length=u+1,ru(n.eventQueue_,lI(e),o);for(let d=0;d<r.length;d++)Av(r[d])}}const uM=function(n,e){const t=_j(n),r=t.namespace;return"firebase.com"===t.domain&&_l(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&_l("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Cs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new uk(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Nn(t.pathString)}},_j=function(n){let e="",t="",r="",o="",u="",d=!0,f="https",y=443;if("string"==typeof n){let w=n.indexOf("//");w>=0&&(f=n.substring(0,w-1),n=n.substring(w+2));let D=n.indexOf("/");-1===D&&(D=n.length);let A=n.indexOf("?");-1===A&&(A=n.length),e=n.substring(0,Math.min(D,A)),D<A&&(o=function(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let o=t[r];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch(u){}e+="/"+o}return e}(n.substring(D,A)));const M=function(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Cs(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,A)));w=e.indexOf(":"),w>=0?(d="https"===f||"wss"===f,y=parseInt(e.substring(w+1),10)):w=e.length;const j=e.slice(0,w);if("localhost"===j.toLowerCase())t="localhost";else if(j.split(".").length<=2)t=j;else{const Y=e.indexOf(".");r=e.substring(0,Y).toLowerCase(),t=e.substring(Y+1),u=r}"ns"in M&&(u=M.ns)}return{host:e,port:y,domain:t,subdomain:r,secure:d,scheme:f,pathString:o,namespace:u}};class QF{constructor(e,t,r,o){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=o}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,F.Pz)(this.snapshot.exportVal())}}class JF{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class XF{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,F.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class eL{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new F.BH;return aj(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){nu("OnDisconnect.remove",this._path);const e=new F.BH;return qF(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){nu("OnDisconnect.set",this._path),El("OnDisconnect.set",e,this._path,!1);const t=new F.BH;return qF(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){nu("OnDisconnect.setWithPriority",this._path),El("OnDisconnect.setWithPriority",e,this._path,!1),eM("OnDisconnect.setWithPriority",t,!1);const r=new F.BH;return function(n,e,t,r,o){const u=Dr(t,r);n.server_.onDisconnectPut(e.toString(),u.val(!0),(d,f)=>{"ok"===d&&Mv(n.onDisconnect_,e,u),wp(0,o,d,f)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){nu("OnDisconnect.update",this._path),VF("OnDisconnect.update",e,this._path,!1);const t=new F.BH;return function(n,e,t,r){if((0,F.xb)(t))return Wi("onDisconnect().update() called with empty data.  Don't do anything."),void wp(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(o,u)=>{"ok"===o&&qi(t,(d,f)=>{const y=Dr(f);Mv(n.onDisconnect_,wr(e,d),y)}),wp(0,r,o,u)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Ao{constructor(e,t,r,o){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=o}get key(){return nn(this._path)?null:pk(this._path)}get ref(){return new iu(this._repo,this._path)}get _queryIdentifier(){const e=sF(this._queryParams),t=sk(e);return"{}"===t?"default":t}get _queryObject(){return sF(this._queryParams)}isEqual(e){if(!((e=(0,F.m9)(e))instanceof Ao))return!1;const t=this._repo===e._repo,r=gk(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function DA(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function bp(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===vl){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==lh)throw new Error(r);if("string"!=typeof e)throw new Error(o)}if(n.hasEnd()){if(n.getIndexEndName()!==yl)throw new Error(r);if("string"!=typeof t)throw new Error(o)}}else if(n.getIndex()===nr){if(null!=e&&!dI(e)||null!=t&&!dI(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,F.hu)(n.getIndex()instanceof Ek||n.getIndex()===wk,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function SA(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class iu extends Ao{constructor(e,t){super(e,t,new nA,!1)}get parent(){const e=H1(this._path);return null===e?null:new iu(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Km{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Nn(e),r=Zm(this.ref,e);return new Km(this._node.getChild(t),r,nr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,o)=>e(new Km(o,Zm(this.ref,r),nr)))}hasChild(e){const t=new Nn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function tL(n,e){return(n=(0,F.m9)(n))._checkNotDeleted("ref"),void 0!==e?Zm(n._root,e):n._root}function nL(n,e){(n=(0,F.m9)(n))._checkNotDeleted("refFromURL");const t=uM(e,n._repo.repoInfo_.nodeAdmin);BF("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&_l("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),tL(n,t.path.toString())}function Zm(n,e){return null===tn((n=(0,F.m9)(n))._path)?((t=e)&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),pI("child","path",t,!1)):pI("child","path",e,!1),new iu(n._repo,wr(n._path,e));var t}function cM(n,e){n=(0,F.m9)(n),nu("set",n._path),El("set",e,n._path,!1);const t=new F.BH;return rM(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function bj(n,e){VF("update",e,n._path,!1);const t=new F.BH;return function(n,e,t,r){Uv(n,"update",{path:e.toString(),value:t});let o=!0;const u=gI(n),d={};if(qi(t,(f,y)=>{o=!1,d[f]=OF(wr(e,f),Dr(y),n.serverSyncTree_,u)}),o)Wi("update() called with empty data.  Don't do anything."),wp(0,r,"ok",void 0);else{const f=IA(n),y=function(n,e,t,r){!function(n,e,t,r){(0,F.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=Pk(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const o=rr.fromObject(t);return Lv(n,new Ov({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,o))}(n.serverSyncTree_,e,d,f);bA(n.eventQueue_,y),n.server_.merge(e.toString(),t,(w,D)=>{const A="ok"===w;A||Cs("update at "+e+" failed: "+w);const M=Ep(n.serverSyncTree_,f,!A),j=M.length>0?Vv(n,e):e;ru(n.eventQueue_,j,M),wp(0,r,w,D)}),qi(t,w=>{const D=oM(n,wr(e,w));Vv(n,D)}),ru(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function Ij(n){return function(n,e){const t=function(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(w,D)=>{const A=Ys(w,t);r=r||yp(D,A)});let o=n.syncPointTree_.get(t);o?r=r||yp(o,Cn()):(o=new CF,n.syncPointTree_=n.syncPointTree_.set(t,o));const u=null!=r,d=u?new mp(r,!0,!1):null;return function(n){return uA(n.viewCache_)}(TF(o,e,cA(n.pendingWriteTree_,e._path),u?d.getNode():Gt.EMPTY_NODE,u))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const o=Dr(r).withIndex(e._queryParams.getIndex()),u=uI(n.serverSyncTree_,e._path,o);return tM(n.eventQueue_,e._path,u),Promise.resolve(o)},r=>(Uv(n,"get for query "+(0,F.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,F.m9)(n))._repo,n).then(e=>new Km(e,new iu(n._repo,n._path),n._queryParams.getIndex()))}class AA{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new QF("value",this,new Km(e.snapshotNode,new iu(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new JF(this,e,t):null}matches(e){return e instanceof AA&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class RA{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new JF(this,e,t):null}createEvent(e,t){(0,F.hu)(null!=e.childName,"Child events should have a childName.");const r=Zm(new iu(t._repo,t._path),e.childName),o=t._queryParams.getIndex();return new QF(e.type,this,new Km(e.snapshotNode,r,o),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof RA&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function mI(n,e,t,r,o){let u;if("object"==typeof r&&(u=void 0,o=r),"function"==typeof r&&(u=r),o&&o.onlyOnce){const y=t,w=(D,A)=>{iM(n._repo,n,f),y(D,A)};w.userCallback=t.userCallback,w.context=t.context,t=w}const d=new XF(t,u||void 0),f="value"===e?new AA(d):new RA(e,d);return function(n,e,t){let r;r=".info"===tn(e._path)?xF(n.infoSyncTree_,e,t):xF(n.serverSyncTree_,e,t),tM(n.eventQueue_,e._path,r)}(n._repo,n,f),()=>iM(n._repo,n,f)}function lM(n,e,t,r){return mI(n,"value",e,t,r)}function rL(n,e,t,r){return mI(n,"child_added",e,t,r)}function iL(n,e,t,r){return mI(n,"child_changed",e,t,r)}function sL(n,e,t,r){return mI(n,"child_moved",e,t,r)}function oL(n,e,t,r){return mI(n,"child_removed",e,t,r)}function aL(n,e,t){let r=null;const o=t?new XF(t):null;"value"===e?r=new AA(o):e&&(r=new RA(e,o)),iM(n._repo,n,r)}class ac{}class uL extends ac{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){El("endAt",this._value,e._path,!0);const t=Tk(e._queryParams,this._value,this._key);if(SA(t),bp(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ao(e._repo,e._path,t,e._orderByCalled)}}class Tj extends ac{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){El("endBefore",this._value,e._path,!1);const t=function(n,e,t){let r,o;return n.index_===vl?("string"==typeof e&&(e=nF(e)),o=Tk(n,e,t)):(r=null==t?lh:nF(t),o=Tk(n,e,r)),o.endBeforeSet_=!0,o}(e._queryParams,this._value,this._key);if(SA(t),bp(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ao(e._repo,e._path,t,e._orderByCalled)}}class cL extends ac{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){El("startAt",this._value,e._path,!0);const t=Ck(e._queryParams,this._value,this._key);if(SA(t),bp(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ao(e._repo,e._path,t,e._orderByCalled)}}class Aj extends ac{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){El("startAfter",this._value,e._path,!1);const t=function(n,e,t){let r;if(n.index_===vl)"string"==typeof e&&(e=tF(e)),r=Ck(n,e,t);else{let o;o=null==t?yl:tF(t),r=Ck(n,e,o)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(SA(t),bp(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ao(e._repo,e._path,t,e._orderByCalled)}}class xj extends ac{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ao(e._repo,e._path,function(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class Pj extends ac{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ao(e._repo,e._path,function(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class Mj extends ac{constructor(e){super(),this._path=e}_apply(e){DA(e,"orderByChild");const t=new Nn(this._path);if(nn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Ek(t),o=rA(e._queryParams,r);return bp(o),new Ao(e._repo,e._path,o,!0)}}class Fj extends ac{_apply(e){DA(e,"orderByKey");const t=rA(e._queryParams,vl);return bp(t),new Ao(e._repo,e._path,t,!0)}}class Uj extends ac{_apply(e){DA(e,"orderByPriority");const t=rA(e._queryParams,nr);return bp(t),new Ao(e._repo,e._path,t,!0)}}class Bj extends ac{_apply(e){DA(e,"orderByValue");const t=rA(e._queryParams,wk);return bp(t),new Ao(e._repo,e._path,t,!0)}}class $j extends ac{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(El("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new uL(this._value,this._key)._apply(new cL(this._value,this._key)._apply(e))}}function uc(n,...e){let t=(0,F.m9)(n);for(const r of e)t=r._apply(t);return t}(function(n){(0,F.hu)(!fA,"__referenceConstructor has already been defined"),fA=n})(iu),function(n){(0,F.hu)(!gA,"__referenceConstructor has already been defined"),gA=n}(iu);const dM={};function dL(n,e,t,r,o){let u=r||n.options.databaseURL;void 0===u&&(n.options.projectId||_l("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Wi("Using default host for project ",n.options.projectId),u=`${n.options.projectId}-default-rtdb.firebaseio.com`);let y,w,d=uM(u,o),f=d.repoInfo;"undefined"!=typeof process&&process.env&&(w=process.env.FIREBASE_DATABASE_EMULATOR_HOST),w?(y=!0,u=`http://${w}?ns=${f.namespace}`,d=uM(u,o),f=d.repoInfo):y=!d.repoInfo.secure;const D=o&&y?new Yb(Yb.OWNER):new OV(n.name,n.options,e);BF("Invalid Firebase Database URL",d),nn(d.path)||_l("Database URL must point to the root of a Firebase Database (not including a child path).");const A=function(n,e,t,r){let o=dM[e.name];o||(o={},dM[e.name]=o);let u=o[n.toURLString()];return u&&_l("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),u=new tj(n,false,t,r),o[n.toURLString()]=u,u}(f,n,D,new MV(n.name,t));return new Zj(A,n)}class Zj{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(n,e,t){if(n.stats_=dk(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new iA(n.repoInfo_,(r,o,u,d)=>{GF(n,r,o,u,d)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>WF(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,F.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Hm(n.repoInfo_,e,(r,o,u,d)=>{GF(n,r,o,u,d)},r=>{WF(n,r)},r=>{!function(n,e){qi(e,(t,r)=>{nM(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function(n,e){const t=n.toString();return lk[t]||(lk[t]=e()),lk[t]}(n.repoInfo_,()=>new B2(n.stats_,n.server_)),n.infoData_=new O2,n.infoSyncTree_=new RF({startListening:(r,o,u,d)=>{let f=[];const y=n.infoData_.getNode(r._path);return y.isEmpty()||(f=uI(n.infoSyncTree_,r._path,y),setTimeout(()=>{d("ok")},0)),f},stopListening:()=>{}}),nM(n,"connected",!1),n.serverSyncTree_=new RF({startListening:(r,o,u,d)=>(n.server_.listen(r,u,o,(f,y)=>{const w=d(f,y);ru(n.eventQueue_,r._path,w)}),[]),stopListening:(r,o)=>{n.server_.unlisten(r,o)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new iu(this._repo,Cn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(n,e){const t=dM[e];(!t||t[n.key]!==n)&&_l(`Database ${e}(${n.repoInfo_}) has already been deleted.`),zF(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&_l("Cannot call "+e+" on a deleted database.")}}function hL(){N1.IS_TRANSPORT_INITIALIZED&&Cs("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Yj(){hL(),pp.forceDisallow()}function Qj(){hL(),Rv.forceDisallow(),pp.forceAllow()}function t$(n,e){d1(n,e)}class o${constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Hm.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Hm.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},o1(ns.SDK_VERSION),(0,ns._registerComponent)(new go.wA("database",(e,{instanceIdentifier:t})=>dL(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,ns.registerVersion)(i1,"0.13.0",void 0),(0,ns.registerVersion)(i1,"0.13.0","esm2017");const l$=new pt.Yd("@firebase/database-compat"),fL=function(n){l$.warn("FIREBASE WARNING: "+n)};class f${constructor(e){this._delegate=e}cancel(e){(0,F.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,F.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,F.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,F.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,F.Dv)("OnDisconnect.set",1,2,arguments.length),(0,F.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),o=>t(o)),r}setWithPriority(e,t,r){(0,F.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,F.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const o=this._delegate.setWithPriority(e,t);return r&&o.then(()=>r(null),u=>r(u)),o}update(e,t){if((0,F.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const o={};for(let u=0;u<e.length;++u)o[""+u]=e[u];e=o,fL("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,F.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),o=>t(o)),r}}class p${constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,F.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Ip{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,F.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,F.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,F.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,F.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,F.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),pI("DataSnapshot.child","path",e,!1),new Ip(this._database,this._delegate.child(e))}hasChild(e){return(0,F.Dv)("DataSnapshot.hasChild",1,1,arguments.length),pI("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,F.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,F.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,F.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Ip(this._database,t)))}hasChildren(){return(0,F.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,F.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,F.Dv)("DataSnapshot.ref",0,0,arguments.length),new la(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ds{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,o){var u;(0,F.Dv)("Query.on",2,4,arguments.length),(0,F.Wj)("Query.on","callback",t,!1);const d=ds.getCancelAndContextArgs_("Query.on",r,o),f=(w,D)=>{t.call(d.context,new Ip(this.database,w),D)};f.userCallback=t,f.context=d.context;const y=null===(u=d.cancel)||void 0===u?void 0:u.bind(d.context);switch(e){case"value":return lM(this._delegate,f,y),t;case"child_added":return rL(this._delegate,f,y),t;case"child_removed":return oL(this._delegate,f,y),t;case"child_changed":return iL(this._delegate,f,y),t;case"child_moved":return sL(this._delegate,f,y),t;default:throw new Error((0,F.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,F.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,F.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,F.Wj)("Query.off","callback",t,!0),(0,F.lb)("Query.off","context",r,!0),t){const o=()=>{};o.userCallback=t,o.context=r,aL(this._delegate,e,o)}else aL(this._delegate,e)}get(){return Ij(this._delegate).then(e=>new Ip(this.database,e))}once(e,t,r,o){(0,F.Dv)("Query.once",1,4,arguments.length),(0,F.Wj)("Query.once","callback",t,!0);const u=ds.getCancelAndContextArgs_("Query.once",r,o),d=new F.BH,f=(w,D)=>{const A=new Ip(this.database,w);t&&t.call(u.context,A,D),d.resolve(A)};f.userCallback=t,f.context=u.context;const y=w=>{u.cancel&&u.cancel.call(u.context,w),d.reject(w)};switch(e){case"value":lM(this._delegate,f,y,{onlyOnce:!0});break;case"child_added":rL(this._delegate,f,y,{onlyOnce:!0});break;case"child_removed":oL(this._delegate,f,y,{onlyOnce:!0});break;case"child_changed":iL(this._delegate,f,y,{onlyOnce:!0});break;case"child_moved":sL(this._delegate,f,y,{onlyOnce:!0});break;default:throw new Error((0,F.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return d.promise}limitToFirst(e){return(0,F.Dv)("Query.limitToFirst",1,1,arguments.length),new ds(this.database,uc(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new xj(n)}(e)))}limitToLast(e){return(0,F.Dv)("Query.limitToLast",1,1,arguments.length),new ds(this.database,uc(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Pj(n)}(e)))}orderByChild(e){return(0,F.Dv)("Query.orderByChild",1,1,arguments.length),new ds(this.database,uc(this._delegate,function(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return pI("orderByChild","path",n,!1),new Mj(n)}(e)))}orderByKey(){return(0,F.Dv)("Query.orderByKey",0,0,arguments.length),new ds(this.database,uc(this._delegate,new Fj))}orderByPriority(){return(0,F.Dv)("Query.orderByPriority",0,0,arguments.length),new ds(this.database,uc(this._delegate,new Uj))}orderByValue(){return(0,F.Dv)("Query.orderByValue",0,0,arguments.length),new ds(this.database,uc(this._delegate,new Bj))}startAt(e=null,t){return(0,F.Dv)("Query.startAt",0,2,arguments.length),new ds(this.database,uc(this._delegate,function(n=null,e){return fI("startAt","key",e,!0),new cL(n,e)}(e,t)))}startAfter(e=null,t){return(0,F.Dv)("Query.startAfter",0,2,arguments.length),new ds(this.database,uc(this._delegate,function(n,e){return fI("startAfter","key",e,!0),new Aj(n,e)}(e,t)))}endAt(e=null,t){return(0,F.Dv)("Query.endAt",0,2,arguments.length),new ds(this.database,uc(this._delegate,function(n,e){return fI("endAt","key",e,!0),new uL(n,e)}(e,t)))}endBefore(e=null,t){return(0,F.Dv)("Query.endBefore",0,2,arguments.length),new ds(this.database,uc(this._delegate,function(n,e){return fI("endBefore","key",e,!0),new Tj(n,e)}(e,t)))}equalTo(e,t){return(0,F.Dv)("Query.equalTo",1,2,arguments.length),new ds(this.database,uc(this._delegate,function(n,e){return fI("equalTo","key",e,!0),new $j(n,e)}(e,t)))}toString(){return(0,F.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,F.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,F.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof ds))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const o={cancel:void 0,context:void 0};if(t&&r)o.cancel=t,(0,F.Wj)(e,"cancel",o.cancel,!0),o.context=r,(0,F.lb)(e,"context",o.context,!0);else if(t)if("object"==typeof t&&null!==t)o.context=t;else{if("function"!=typeof t)throw new Error((0,F.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");o.cancel=t}return o}get ref(){return new la(this.database,new iu(this._delegate._repo,this._delegate._path))}}class la extends ds{constructor(e,t){super(e,new Ao(t._repo,t._path,new nA,!1)),this.database=e,this._delegate=t}getKey(){return(0,F.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,F.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new la(this.database,Zm(this._delegate,e))}getParent(){(0,F.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new la(this.database,e):null}getRoot(){return(0,F.Dv)("Reference.root",0,0,arguments.length),new la(this.database,this._delegate.root)}set(e,t){(0,F.Dv)("Reference.set",1,2,arguments.length),(0,F.Wj)("Reference.set","onComplete",t,!0);const r=cM(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}update(e,t){if((0,F.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const o={};for(let u=0;u<e.length;++u)o[""+u]=e[u];e=o,fL("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}nu("Reference.update",this._delegate._path),(0,F.Wj)("Reference.update","onComplete",t,!0);const r=bj(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}setWithPriority(e,t,r){(0,F.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,F.Wj)("Reference.setWithPriority","onComplete",r,!0);const o=function(n,e,t){if(nu("setWithPriority",n._path),El("setWithPriority",e,n._path,!1),eM("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new F.BH;return rM(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&o.then(()=>r(null),u=>r(u)),o}remove(e){(0,F.Dv)("Reference.remove",0,1,arguments.length),(0,F.Wj)("Reference.remove","onComplete",e,!0);const t=function(n){return nu("remove",n._path),cM(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,F.Dv)("Reference.transaction",1,3,arguments.length),(0,F.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,F.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,F.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const o=function(n,e,t){var r;if(n=(0,F.m9)(n),nu("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const o=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,u=new F.BH,f=lM(n,()=>{});return function(n,e,t,r,o,u){Uv(n,"transaction on "+e);const d={path:e,update:t,onComplete:r,status:null,order:u1(),applyLocally:u,retryCount:0,unwatcher:o,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},f=sM(n,e,void 0);d.currentInputSnapshot=f;const y=d.update(f.val());if(void 0===y)d.unwatcher(),d.currentOutputSnapshotRaw=null,d.currentOutputSnapshotResolved=null,d.onComplete&&d.onComplete(null,!1,d.currentInputSnapshot);else{hI("transaction failed: Data returned ",y,d.path),d.status=0;const w=vA(n.transactionQueueTree_,e),D=zm(w)||[];let A;D.push(d),Qk(w,D),"object"==typeof y&&null!==y&&(0,F.r3)(y,".priority")?(A=(0,F.DV)(y,".priority"),(0,F.hu)(dI(A),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):A=(mA(n.serverSyncTree_,e)||Gt.EMPTY_NODE).getPriority().val();const M=gI(n),j=Dr(y,A),Y=Kk(j,f,M);d.currentOutputSnapshotRaw=j,d.currentOutputSnapshotResolved=Y,d.currentWriteId=IA(n);const ye=jk(n.serverSyncTree_,e,Y,d.currentWriteId,d.applyLocally);ru(n.eventQueue_,e,ye),CA(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(y,w,D)=>{let A=null;y?u.reject(y):(A=new Km(D,new iu(n._repo,n._path),nr),u.resolve(new o$(w,A)))},f,o),u.promise}(this._delegate,e,{applyLocally:r}).then(u=>new p$(u.committed,new Ip(this.database,u.snapshot)));return t&&o.then(u=>t(null,u.committed,u.snapshot),u=>t(u,!1,null)),o}setPriority(e,t){(0,F.Dv)("Reference.setPriority",1,2,arguments.length),(0,F.Wj)("Reference.setPriority","onComplete",t,!0);const r=function(n,e){n=(0,F.m9)(n),nu("setPriority",n._path),eM("setPriority",e,!1);const t=new F.BH;return rM(n._repo,wr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}push(e,t){(0,F.Dv)("Reference.push",0,2,arguments.length),(0,F.Wj)("Reference.push","onComplete",t,!0);const r=function(n,e){n=(0,F.m9)(n),nu("push",n._path),El("push",e,n._path,!0);const t=HF(n._repo),r=S2(t),o=Zm(n,r),u=Zm(n,r);let d;return d=null!=e?cM(u,e).then(()=>u):Promise.resolve(u),o.then=d.then.bind(d),o.catch=d.then.bind(d,void 0),o}(this._delegate,e),o=r.then(d=>new la(this.database,d));t&&o.then(()=>t(null),d=>t(d));const u=new la(this.database,r);return u.then=o.then.bind(o),u.catch=o.catch.bind(o,void 0),u}onDisconnect(){return nu("Reference.onDisconnect",this._delegate._path),new f$(new eL(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class _I{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Yj,forceLongPolling:Qj}}useEmulator(e,t,r={}){!function(n,e,t,r={}){(n=(0,F.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&_l("Cannot call useEmulator() after instance has already been initialized.");const o=n._repoInternal;let u;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&_l('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),u=new Yb(Yb.OWNER);else if(r.mockUserToken){const d="string"==typeof r.mockUserToken?r.mockUserToken:(0,F.Sg)(r.mockUserToken,n.app.options.projectId);u=new Yb(d)}!function(n,e,t,r){n.repoInfo_=new uk(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(o,e,t,u)}(this._delegate,e,t,r)}ref(e){if((0,F.Dv)("database.ref",0,1,arguments.length),e instanceof la){const t=nL(this._delegate,e.toString());return new la(this,t)}{const t=tL(this._delegate,e);return new la(this,t)}}refFromURL(e){(0,F.Dv)("database.refFromURL",1,1,arguments.length);const r=nL(this._delegate,e);return new la(this,r)}goOffline(){return(0,F.Dv)("database.goOffline",0,0,arguments.length),function(n){(n=(0,F.m9)(n))._checkNotDeleted("goOffline"),zF(n._repo)}(this._delegate)}goOnline(){return(0,F.Dv)("database.goOnline",0,0,arguments.length),function(n){(n=(0,F.m9)(n))._checkNotDeleted("goOnline"),function(n){n.persistentConnection_&&n.persistentConnection_.resume($F)}(n._repo)}(this._delegate)}}_I.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:n=>function(n){return{".sv":{increment:n}}}(n)};var m$=Object.freeze({__proto__:null,initStandalone:function({app:n,url:e,version:t,customAuthImpl:r,namespace:o,nodeAdmin:u=!1}){o1(t);const d=new go.zt("auth-internal",new go.H0("database-standalone"));return d.setComponent(new go.wA("auth-internal",()=>r,"PRIVATE")),{instance:new _I(dL(n,d,void 0,e,u),n),namespace:o}}});const _$=_I.ServerValue;function pL(n){return null==n}function gL(n){return"function"==typeof n.set}function mL(n,e){return gL(e)?e:n.ref(e)}function _L(n,e){if(function(n){return"string"==typeof n}(n))return e.stringCase();if(gL(n))return e.firebaseCase();if(function(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function yI(n,e,t="on",r=A_.z){return new Pr.y(o=>{let u=null;return u=n[t](e,(d,f)=>{r.schedule(()=>{o.next({snapshot:d,prevKey:f})}),"once"===t&&r.schedule(()=>o.complete())},d=>{r.schedule(()=>o.error(d))}),"on"===t?{unsubscribe(){null!=u&&n.off(e,u)}}:{unsubscribe(){}}}).pipe((0,kt.U)(o=>{const{snapshot:u,prevKey:d}=o;let f=null;return u.exists()&&(f=u.key),{type:e,payload:u,prevKey:d,key:f}}),(0,_V.B)())}function yL(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function I$(n,e){const{payload:t,prevKey:r,key:o}=e,u=yL(n,o),d=function(n,e){if(pL(e))return 0;{const t=yL(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let f=null;e.payload.forEach(y=>{const w={payload:y,type:"value",prevKey:f,key:y.key};return f=y.key,n=[...n,w],!1})}return n;case"child_added":if(u>-1){const f=n[u-1];(f&&f.key||null)!==r&&(n=n.filter(y=>y.payload.key!==t.key)).splice(d,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(d,0,e)}return n;case"child_removed":return n.filter(f=>f.payload.key!==t.key);case"child_changed":return n.map(f=>f.payload.key===o?e:f);case"child_moved":if(u>-1){const f=n.splice(u,1)[0];return(n=n.slice()).splice(d,0,f),n}return n;default:return n}}function vL(n){return(pL(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function EL(n,e,t){return function(n,e,t){return yI(n,"value","once",t).pipe(ur(r=>{const o=[(0,at.of)(r)];return e.forEach(u=>o.push(yI(n,u,"on",t))),(0,_b.T)(...o).pipe(xa(I$,[]))}),R_())}(n,e=vL(e),t)}function wL(n,e,t){const r=(e=vL(e)).map(o=>yI(n,o,"on",t));return(0,_b.T)(...r)}function bL(n,e){return function(r,o){return _L(r,{stringCase:()=>n.child(r)[e](o),firebaseCase:()=>r[e](o),snapshotCase:()=>r.ref[e](o)})}}function S$(n){return function(t){return t?_L(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function IL(n,e){return function(){return yI(n,"value","on",e)}}!function(n){n.INTERNAL.registerComponent(new go.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),o=e.getProvider("database").getImmediate({identifier:t});return new _I(o,r)},"PUBLIC").setServiceProps({Reference:la,Query:ds,Database:_I,DataSnapshot:Ip,enableLogging:t$,INTERNAL:m$,ServerValue:_$}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.0")}(GI.Z);const x$=new m.OlP("angularfire2.realtimeDatabaseURL"),N$=new m.OlP("angularfire2.database.use-emulator");let P$=(()=>{class n{constructor(t,r,o,u,d,f,y,w,D,A,M,j,Y,ye,Re){this.schedulers=f;const lt=y,ct=(0,Lr.on)(t,d,r);w&&FS(ct,d,D,M,j,Y,A,ye),this.database=(0,Lr.cc)(`${ct.name}.database.${o}`,"AngularFireDatabase",ct.name,()=>{const rt=d.runOutsideAngular(()=>ct.database(o||void 0));return lt&&rt.useEmulator(...lt),rt},[lt])}list(t,r){const o=this.schedulers.ngZone.runOutsideAngular(()=>mL(this.database,t));let u=o;return r&&(u=r(o)),function(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:bL(r,"update"),set:bL(r,"set"),push:o=>r.push(o),remove:S$(r),snapshotChanges:o=>EL(n,o,t).pipe(on.iC),stateChanges:o=>wL(n,o,t).pipe(on.iC),auditTrail:o=>function(n,e,t){return function(n,e,t){return function(n,e){return yI(n,"value","on",e).pipe((0,kt.U)(t=>{let r;return t.payload.forEach(o=>(r=o.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function(...n){return e=>{let t;return"function"==typeof n[n.length-1]&&(t=n.pop()),e.lift(new vV(n,t))}}(e),(0,kt.U)(([o,u])=>{const d=o.lastKeyToLoad,f=u.map(y=>y.key);return{actions:u,lastKeyToLoad:d,loadedKeys:f}}),function(n){return e=>e.lift(new bV(n))}(o=>-1===o.loadedKeys.indexOf(o.lastKeyToLoad)),(0,kt.U)(o=>o.actions))}(n,wL(n,e).pipe(xa((o,u)=>[...o,u],[])),t)}(n,o,t).pipe(on.iC),valueChanges:(o,u)=>EL(n,o,t).pipe((0,kt.U)(f=>f.map(y=>u&&u.idField?Object.assign(Object.assign({},y.payload.val()),{[u.idField]:y.key}):y.payload.val())),on.iC)}}(u,this)}object(t){return function(n,e){return{query:n,snapshotChanges:()=>IL(n,e.schedulers.outsideAngular)().pipe(on.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>IL(n,e.schedulers.outsideAngular)().pipe(on.iC,(0,kt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>mL(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Lr.Dh),m.LFG(Lr.xv,8),m.LFG(x$,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(on.HU),m.LFG(N$,8),m.LFG(Iv,8),m.LFG(bv,8),m.LFG(rc,8),m.LFG(Mm,8),m.LFG(Lb,8),m.LFG(Ub,8),m.LFG(OS,8),m.LFG(Nm,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),k$=(()=>{class n{constructor(){wv.Z.registerVersion("angularfire",on.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[P$]}),n})(),M$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n,bootstrap:[en]}),n.\u0275inj=m.cJS({providers:[C],imports:[[Np,At,Lr.hO.initializeApp(Cc_firebase),EO,I,mV,k$]]}),n})();(0,m.G48)(),Mi().bootstrapModule(M$).catch(n=>console.error(n))},3394:(Qe,Ee,U)=>{"use strict";U.d(Ee,{Z:()=>Te});var m=U(3854),$=U(3910),O=U(8026),ae=U(5422);class le{constructor(Be,fe){this._delegate=Be,this.firebase=fe,(0,O._addComponent)(Be,new $.wA("app-compat",()=>this,"PUBLIC")),this.container=Be.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Be){this._delegate.automaticDataCollectionEnabled=Be}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Be=>{this._delegate.checkDestroyed(),Be()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(Be,fe=O._DEFAULT_ENTRY_NAME){var De;this._delegate.checkDestroyed();const xe=this._delegate.container.getProvider(Be);return!xe.isInitialized()&&"EXPLICIT"===(null===(De=xe.getComponent())||void 0===De?void 0:De.instantiationMode)&&xe.initialize(),xe.getImmediate({identifier:fe})}_removeServiceInstance(Be,fe=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Be).clearInstance(fe)}_addComponent(Be){(0,O._addComponent)(this._delegate,Be)}_addOrOverwriteComponent(Be){(0,O._addOrOverwriteComponent)(this._delegate,Be)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const be=new m.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),V=function oe(){const we=function(we){const Be={},fe={__esModule:!0,initializeApp:function(vt,Oe={}){const Fe=O.initializeApp(vt,Oe);if((0,m.r3)(Be,Fe.name))return Be[Fe.name];const $e=new we(Fe,fe);return Be[Fe.name]=$e,$e},app:xe,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function(vt){const Oe=vt.name,Fe=Oe.replace("-compat","");if(O._registerComponent(vt)&&"PUBLIC"===vt.type){const $e=(mt=xe())=>{if("function"!=typeof mt[Fe])throw be.create("invalid-app-argument",{appName:Oe});return mt[Fe]()};void 0!==vt.serviceProps&&(0,m.ZB)($e,vt.serviceProps),fe[Fe]=$e,we.prototype[Fe]=function(...mt){return this._getService.bind(this,Oe).apply(this,vt.multipleInstances?mt:[])}}return"PUBLIC"===vt.type?fe[Fe]:null},removeApp:function(vt){delete Be[vt]},useAsService:function(vt,Oe){return"serverAuth"===Oe?null:Oe},modularAPIs:O}};function xe(vt){if(!(0,m.r3)(Be,vt=vt||O._DEFAULT_ENTRY_NAME))throw be.create("no-app",{appName:vt});return Be[vt]}return fe.default=fe,Object.defineProperty(fe,"apps",{get:function(){return Object.keys(Be).map(vt=>Be[vt])}}),xe.App=we,fe}(le);return we.INTERNAL=Object.assign(Object.assign({},we.INTERNAL),{createFirebaseNamespace:oe,extendNamespace:function(fe){(0,m.ZB)(we,fe)},createSubscribe:m.ne,ErrorFactory:m.LL,deepExtend:m.ZB}),we}(),H=new ae.Yd("@firebase/app-compat");if((0,m.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const we=self.firebase.SDK_VERSION;we&&we.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Te=V;(0,O.registerVersion)("@firebase/app-compat","0.1.26",undefined)},8026:(Qe,Ee,U)=>{"use strict";U.r(Ee),U.d(Ee,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>ei,_DEFAULT_ENTRY_NAME:()=>Jr,_addComponent:()=>Ki,_addOrOverwriteComponent:()=>hs,_apps:()=>Ht,_clearComponents:()=>qn,_components:()=>Xr,_getProvider:()=>Ts,_registerComponent:()=>Kt,_removeServiceInstance:()=>Tn,deleteApp:()=>dr,getApp:()=>Ne,getApps:()=>zn,initializeApp:()=>ti,onLog:()=>Dn,registerVersion:()=>Zt,setLogLevel:()=>Kn});var m=U(8239),$=U(3910),O=U(5422),ae=U(3854),le=U(4544);class ne{constructor(ie){this.container=ie}getPlatformInfoString(){return this.container.getProviders().map(Me=>{if(function(z){const ie=z.getComponent();return"VERSION"===(null==ie?void 0:ie.type)}(Me)){const Ke=Me.getImmediate();return`${Ke.library}/${Ke.version}`}return null}).filter(Me=>Me).join(" ")}}const te="@firebase/app",V=new O.Yd("@firebase/app"),Jr="[DEFAULT]",Pn={[te]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ht=new Map,Xr=new Map;function Ki(z,ie){try{z.container.addComponent(ie)}catch(Me){V.debug(`Component ${ie.name} failed to register with FirebaseApp ${z.name}`,Me)}}function hs(z,ie){z.container.addOrOverwriteComponent(ie)}function Kt(z){const ie=z.name;if(Xr.has(ie))return V.debug(`There were multiple attempts to register component ${ie}.`),!1;Xr.set(ie,z);for(const Me of Ht.values())Ki(Me,z);return!0}function Ts(z,ie){const Me=z.container.getProvider("heartbeat").getImmediate({optional:!0});return Me&&Me.triggerHeartbeat(),z.container.getProvider(ie)}function Tn(z,ie,Me=Jr){Ts(z,ie).clearInstance(Me)}function qn(){Xr.clear()}const gn=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Qs{constructor(ie,Me,Ke){this._isDeleted=!1,this._options=Object.assign({},ie),this._config=Object.assign({},Me),this._name=Me.name,this._automaticDataCollectionEnabled=Me.automaticDataCollectionEnabled,this._container=Ke,this.container.addComponent(new $.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ie){this.checkDestroyed(),this._automaticDataCollectionEnabled=ie}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ie){this._isDeleted=ie}checkDestroyed(){if(this.isDeleted)throw gn.create("app-deleted",{appName:this._name})}}const ei="9.8.2";function ti(z,ie={}){"object"!=typeof ie&&(ie={name:ie});const Me=Object.assign({name:Jr,automaticDataCollectionEnabled:!1},ie),Ke=Me.name;if("string"!=typeof Ke||!Ke)throw gn.create("bad-app-name",{appName:String(Ke)});const ht=Ht.get(Ke);if(ht){if((0,ae.vZ)(z,ht.options)&&(0,ae.vZ)(Me,ht.config))return ht;throw gn.create("duplicate-app",{appName:Ke})}const Rt=new $.H0(Ke);for(const Ct of Xr.values())Rt.addComponent(Ct);const _n=new Qs(z,Me,Rt);return Ht.set(Ke,_n),_n}function Ne(z=Jr){const ie=Ht.get(z);if(!ie)throw gn.create("no-app",{appName:z});return ie}function zn(){return Array.from(Ht.values())}function dr(z){return tt.apply(this,arguments)}function tt(){return(tt=(0,m.Z)(function*(z){const ie=z.name;Ht.has(ie)&&(Ht.delete(ie),yield Promise.all(z.container.getProviders().map(Me=>Me.delete())),z.isDeleted=!0)})).apply(this,arguments)}function Zt(z,ie,Me){var Ke;let ht=null!==(Ke=Pn[z])&&void 0!==Ke?Ke:z;Me&&(ht+=`-${Me}`);const Rt=ht.match(/\s|\//),_n=ie.match(/\s|\//);if(Rt||_n){const Ct=[`Unable to register library "${ht}" with version "${ie}":`];return Rt&&Ct.push(`library name "${ht}" contains illegal characters (whitespace or "/")`),Rt&&_n&&Ct.push("and"),_n&&Ct.push(`version name "${ie}" contains illegal characters (whitespace or "/")`),void V.warn(Ct.join(" "))}Kt(new $.wA(`${ht}-version`,()=>({library:ht,version:ie}),"VERSION"))}function Dn(z,ie){if(null!==z&&"function"!=typeof z)throw gn.create("invalid-log-argument");(0,O.Am)(z,ie)}function Kn(z){(0,O.Ub)(z)}const kn="firebase-heartbeat-store";let mn=null;function Ro(){return mn||(mn=(0,le.X3)("firebase-heartbeat-database",1,{upgrade:(z,ie)=>{switch(ie){case 0:z.createObjectStore(kn)}}}).catch(z=>{throw gn.create("storage-open",{originalErrorMessage:z.message})})),mn}function qe(){return(qe=(0,m.Z)(function*(z){try{return(yield Ro()).transaction(kn).objectStore(kn).get(hi(z))}catch(ie){throw gn.create("storage-get",{originalErrorMessage:ie.message})}})).apply(this,arguments)}function ot(z,ie){return fs.apply(this,arguments)}function fs(){return(fs=(0,m.Z)(function*(z,ie){try{const Ke=(yield Ro()).transaction(kn,"readwrite");return yield Ke.objectStore(kn).put(ie,hi(z)),Ke.done}catch(Me){throw gn.create("storage-set",{originalErrorMessage:Me.message})}})).apply(this,arguments)}function hi(z){return`${z.name}!${z.options.appId}`}class ir{constructor(ie){this.container=ie,this._heartbeatsCache=null;const Me=this.container.getProvider("app").getImmediate();this._storage=new G(Me),this._heartbeatsCachePromise=this._storage.read().then(Ke=>(this._heartbeatsCache=Ke,Ke))}triggerHeartbeat(){var ie=this;return(0,m.Z)(function*(){const Ke=ie.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ht=jn();if(null===ie._heartbeatsCache&&(ie._heartbeatsCache=yield ie._heartbeatsCachePromise),ie._heartbeatsCache.lastSentHeartbeatDate!==ht&&!ie._heartbeatsCache.heartbeats.some(Rt=>Rt.date===ht))return ie._heartbeatsCache.heartbeats.push({date:ht,agent:Ke}),ie._heartbeatsCache.heartbeats=ie._heartbeatsCache.heartbeats.filter(Rt=>{const _n=new Date(Rt.date).valueOf();return Date.now()-_n<=2592e6}),ie._storage.overwrite(ie._heartbeatsCache)})()}getHeartbeatsHeader(){var ie=this;return(0,m.Z)(function*(){if(null===ie._heartbeatsCache&&(yield ie._heartbeatsCachePromise),null===ie._heartbeatsCache||0===ie._heartbeatsCache.heartbeats.length)return"";const Me=jn(),{heartbeatsToSend:Ke,unsentEntries:ht}=function(z,ie=1024){const Me=[];let Ke=z.slice();for(const ht of z){const Rt=Me.find(_n=>_n.agent===ht.agent);if(Rt){if(Rt.dates.push(ht.date),Q(Me)>ie){Rt.dates.pop();break}}else if(Me.push({agent:ht.agent,dates:[ht.date]}),Q(Me)>ie){Me.pop();break}Ke=Ke.slice(1)}return{heartbeatsToSend:Me,unsentEntries:Ke}}(ie._heartbeatsCache.heartbeats),Rt=(0,ae.L)(JSON.stringify({version:2,heartbeats:Ke}));return ie._heartbeatsCache.lastSentHeartbeatDate=Me,ht.length>0?(ie._heartbeatsCache.heartbeats=ht,yield ie._storage.overwrite(ie._heartbeatsCache)):(ie._heartbeatsCache.heartbeats=[],ie._storage.overwrite(ie._heartbeatsCache)),Rt})()}}function jn(){return(new Date).toISOString().substring(0,10)}class G{constructor(ie){this.app=ie,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,m.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ie=this;return(0,m.Z)(function*(){return(yield ie._canUseIndexedDBPromise)&&(yield function(z){return qe.apply(this,arguments)}(ie.app))||{heartbeats:[]}})()}overwrite(ie){var Me=this;return(0,m.Z)(function*(){var Ke;if(yield Me._canUseIndexedDBPromise){const Rt=yield Me.read();return ot(Me.app,{lastSentHeartbeatDate:null!==(Ke=ie.lastSentHeartbeatDate)&&void 0!==Ke?Ke:Rt.lastSentHeartbeatDate,heartbeats:ie.heartbeats})}})()}add(ie){var Me=this;return(0,m.Z)(function*(){var Ke;if(yield Me._canUseIndexedDBPromise){const Rt=yield Me.read();return ot(Me.app,{lastSentHeartbeatDate:null!==(Ke=ie.lastSentHeartbeatDate)&&void 0!==Ke?Ke:Rt.lastSentHeartbeatDate,heartbeats:[...Rt.heartbeats,...ie.heartbeats]})}})()}}function Q(z){return(0,ae.L)(JSON.stringify({version:2,heartbeats:z})).length}Kt(new $.wA("platform-logger",ie=>new ne(ie),"PRIVATE")),Kt(new $.wA("heartbeat",ie=>new ir(ie),"PRIVATE")),Zt(te,"0.7.25",""),Zt(te,"0.7.25","esm2017"),Zt("fire-js","")},3910:(Qe,Ee,U)=>{"use strict";U.d(Ee,{wA:()=>O,H0:()=>te,zt:()=>le});var m=U(8239),$=U(3854);class O{constructor(V,H,q){this.name=V,this.instanceFactory=H,this.type=q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(V){return this.instantiationMode=V,this}setMultipleInstances(V){return this.multipleInstances=V,this}setServiceProps(V){return this.serviceProps=V,this}setInstanceCreatedCallback(V){return this.onInstanceCreated=V,this}}const ae="[DEFAULT]";class le{constructor(V,H){this.name=V,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(V){const H=this.normalizeInstanceIdentifier(V);if(!this.instancesDeferred.has(H)){const q=new $.BH;if(this.instancesDeferred.set(H,q),this.isInitialized(H)||this.shouldAutoInitialize())try{const ce=this.getOrInitializeService({instanceIdentifier:H});ce&&q.resolve(ce)}catch(ce){}}return this.instancesDeferred.get(H).promise}getImmediate(V){var H;const q=this.normalizeInstanceIdentifier(null==V?void 0:V.identifier),ce=null!==(H=null==V?void 0:V.optional)&&void 0!==H&&H;if(!this.isInitialized(q)&&!this.shouldAutoInitialize()){if(ce)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:q})}catch(pe){if(ce)return null;throw pe}}getComponent(){return this.component}setComponent(V){if(V.name!==this.name)throw Error(`Mismatching Component ${V.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=V,this.shouldAutoInitialize()){if("EAGER"===V.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:ae})}catch(H){}for(const[H,q]of this.instancesDeferred.entries()){const ce=this.normalizeInstanceIdentifier(H);try{const pe=this.getOrInitializeService({instanceIdentifier:ce});q.resolve(pe)}catch(pe){}}}}clearInstance(V=ae){this.instancesDeferred.delete(V),this.instancesOptions.delete(V),this.instances.delete(V)}delete(){var V=this;return(0,m.Z)(function*(){const H=Array.from(V.instances.values());yield Promise.all([...H.filter(q=>"INTERNAL"in q).map(q=>q.INTERNAL.delete()),...H.filter(q=>"_delete"in q).map(q=>q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(V=ae){return this.instances.has(V)}getOptions(V=ae){return this.instancesOptions.get(V)||{}}initialize(V={}){const{options:H={}}=V,q=this.normalizeInstanceIdentifier(V.instanceIdentifier);if(this.isInitialized(q))throw Error(`${this.name}(${q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ce=this.getOrInitializeService({instanceIdentifier:q,options:H});for(const[pe,Te]of this.instancesDeferred.entries())q===this.normalizeInstanceIdentifier(pe)&&Te.resolve(ce);return ce}onInit(V,H){var q;const ce=this.normalizeInstanceIdentifier(H),pe=null!==(q=this.onInitCallbacks.get(ce))&&void 0!==q?q:new Set;pe.add(V),this.onInitCallbacks.set(ce,pe);const Te=this.instances.get(ce);return Te&&V(Te,ce),()=>{pe.delete(V)}}invokeOnInitCallbacks(V,H){const q=this.onInitCallbacks.get(H);if(q)for(const ce of q)try{ce(V,H)}catch(pe){}}getOrInitializeService({instanceIdentifier:V,options:H={}}){let q=this.instances.get(V);if(!q&&this.component&&(q=this.component.instanceFactory(this.container,{instanceIdentifier:(oe=V,oe===ae?void 0:oe),options:H}),this.instances.set(V,q),this.instancesOptions.set(V,H),this.invokeOnInitCallbacks(q,V),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,V,q)}catch(ce){}var oe;return q||null}normalizeInstanceIdentifier(V=ae){return this.component?this.component.multipleInstances?V:ae:V}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class te{constructor(V){this.name=V,this.providers=new Map}addComponent(V){const H=this.getProvider(V.name);if(H.isComponentSet())throw new Error(`Component ${V.name} has already been registered with ${this.name}`);H.setComponent(V)}addOrOverwriteComponent(V){this.getProvider(V.name).isComponentSet()&&this.providers.delete(V.name),this.addComponent(V)}getProvider(V){if(this.providers.has(V))return this.providers.get(V);const H=new le(V,this);return this.providers.set(V,H),H}getProviders(){return Array.from(this.providers.values())}}},5422:(Qe,Ee,U)=>{"use strict";U.d(Ee,{in:()=>$,Yd:()=>be,Ub:()=>te,Am:()=>oe});const m=[];var $=(()=>{return(V=$||($={}))[V.DEBUG=0]="DEBUG",V[V.VERBOSE=1]="VERBOSE",V[V.INFO=2]="INFO",V[V.WARN=3]="WARN",V[V.ERROR=4]="ERROR",V[V.SILENT=5]="SILENT",$;var V})();const O={debug:$.DEBUG,verbose:$.VERBOSE,info:$.INFO,warn:$.WARN,error:$.ERROR,silent:$.SILENT},ae=$.INFO,le={[$.DEBUG]:"log",[$.VERBOSE]:"log",[$.INFO]:"info",[$.WARN]:"warn",[$.ERROR]:"error"},ne=(V,H,...q)=>{if(H<V.logLevel)return;const ce=(new Date).toISOString(),pe=le[H];if(!pe)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[pe](`[${ce}]  ${V.name}:`,...q)};class be{constructor(H){this.name=H,this._logLevel=ae,this._logHandler=ne,this._userLogHandler=null,m.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in $))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?O[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,$.DEBUG,...H),this._logHandler(this,$.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,$.VERBOSE,...H),this._logHandler(this,$.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,$.INFO,...H),this._logHandler(this,$.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,$.WARN,...H),this._logHandler(this,$.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,$.ERROR,...H),this._logHandler(this,$.ERROR,...H)}}function te(V){m.forEach(H=>{H.setLogLevel(V)})}function oe(V,H){for(const q of m){let ce=null;H&&H.level&&(ce=O[H.level]),q.userLogHandler=null===V?null:(pe,Te,...we)=>{const Be=we.map(fe=>{if(null==fe)return null;if("string"==typeof fe)return fe;if("number"==typeof fe||"boolean"==typeof fe)return fe.toString();if(fe instanceof Error)return fe.message;try{return JSON.stringify(fe)}catch(De){return null}}).filter(fe=>fe).join(" ");Te>=(null!=ce?ce:pe.logLevel)&&V({level:$[Te].toLowerCase(),message:Be,args:we,type:pe.name})}}}},4544:(Qe,Ee,U)=>{"use strict";U.d(Ee,{Lj:()=>Xe,X3:()=>xe});var m=U(8239);let O,ae;const be=new WeakMap,te=new WeakMap,oe=new WeakMap,V=new WeakMap,H=new WeakMap;let pe={get(Oe,Fe,$e){if(Oe instanceof IDBTransaction){if("done"===Fe)return te.get(Oe);if("objectStoreNames"===Fe)return Oe.objectStoreNames||oe.get(Oe);if("store"===Fe)return $e.objectStoreNames[1]?void 0:$e.objectStore($e.objectStoreNames[0])}return fe(Oe[Fe])},set:(Oe,Fe,$e)=>(Oe[Fe]=$e,!0),has:(Oe,Fe)=>Oe instanceof IDBTransaction&&("done"===Fe||"store"===Fe)||Fe in Oe};function Be(Oe){return"function"==typeof Oe?function(Oe){return Oe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(Oe)?function(...Fe){return Oe.apply(De(this),Fe),fe(be.get(this))}:function(...Fe){return fe(Oe.apply(De(this),Fe))}:function(Fe,...$e){const mt=Oe.call(De(this),Fe,...$e);return oe.set(mt,Fe.sort?Fe.sort():[Fe]),fe(mt)}}(Oe):(Oe instanceof IDBTransaction&&function(Oe){if(te.has(Oe))return;const Fe=new Promise(($e,mt)=>{const it=()=>{Oe.removeEventListener("complete",Et),Oe.removeEventListener("error",We),Oe.removeEventListener("abort",We)},Et=()=>{$e(),it()},We=()=>{mt(Oe.error||new DOMException("AbortError","AbortError")),it()};Oe.addEventListener("complete",Et),Oe.addEventListener("error",We),Oe.addEventListener("abort",We)});te.set(Oe,Fe)}(Oe),((Oe,Fe)=>Fe.some($e=>Oe instanceof $e))(Oe,O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(Oe,pe):Oe)}function fe(Oe){if(Oe instanceof IDBRequest)return function(Oe){const Fe=new Promise(($e,mt)=>{const it=()=>{Oe.removeEventListener("success",Et),Oe.removeEventListener("error",We)},Et=()=>{$e(fe(Oe.result)),it()},We=()=>{mt(Oe.error),it()};Oe.addEventListener("success",Et),Oe.addEventListener("error",We)});return Fe.then($e=>{$e instanceof IDBCursor&&be.set($e,Oe)}).catch(()=>{}),H.set(Fe,Oe),Fe}(Oe);if(V.has(Oe))return V.get(Oe);const Fe=Be(Oe);return Fe!==Oe&&(V.set(Oe,Fe),H.set(Fe,Oe)),Fe}const De=Oe=>H.get(Oe);function xe(Oe,Fe,{blocked:$e,upgrade:mt,blocking:it,terminated:Et}={}){const We=indexedDB.open(Oe,Fe),Br=fe(We);return mt&&We.addEventListener("upgradeneeded",Sr=>{mt(fe(We.result),Sr.oldVersion,Sr.newVersion,fe(We.transaction))}),$e&&We.addEventListener("blocked",()=>$e()),Br.then(Sr=>{Et&&Sr.addEventListener("close",()=>Et()),it&&Sr.addEventListener("versionchange",()=>it())}).catch(()=>{}),Br}function Xe(Oe,{blocked:Fe}={}){const $e=indexedDB.deleteDatabase(Oe);return Fe&&$e.addEventListener("blocked",()=>Fe()),fe($e).then(()=>{})}const dt=["get","getKey","getAll","getAllKeys","count"],Wt=["put","add","delete","clear"],Lt=new Map;function vt(Oe,Fe){if(!(Oe instanceof IDBDatabase)||Fe in Oe||"string"!=typeof Fe)return;if(Lt.get(Fe))return Lt.get(Fe);const $e=Fe.replace(/FromIndex$/,""),mt=Fe!==$e,it=Wt.includes($e);if(!($e in(mt?IDBIndex:IDBObjectStore).prototype)||!it&&!dt.includes($e))return;const Et=function(){var We=(0,m.Z)(function*(Br,...Sr){const zi=this.transaction(Br,it?"readwrite":"readonly");let Jr=zi.store;return mt&&(Jr=Jr.index(Sr.shift())),(yield Promise.all([Jr[$e](...Sr),it&&zi.done]))[0]});return function(Sr){return We.apply(this,arguments)}}();return Lt.set(Fe,Et),Et}var Oe;pe=SL(DL({},Oe=pe),{get:(Fe,$e,mt)=>vt(Fe,$e)||Oe.get(Fe,$e,mt),has:(Fe,$e)=>!!vt(Fe,$e)||Oe.has(Fe,$e)})},8239:(Qe,Ee,U)=>{"use strict";function m(O,ae,le,ne,be,te,oe){try{var V=O[te](oe),H=V.value}catch(q){return void le(q)}V.done?ae(H):Promise.resolve(H).then(ne,be)}function $(O){return function(){var ae=this,le=arguments;return new Promise(function(ne,be){var te=O.apply(ae,le);function oe(H){m(te,ne,be,oe,V,"next",H)}function V(H){m(te,ne,be,oe,V,"throw",H)}oe(void 0)})}}U.d(Ee,{Z:()=>$})}},Qe=>{Qe(Qe.s=152)}]);