var DG=Object.defineProperty,AG=Object.defineProperties,SG=Object.getOwnPropertyDescriptors,QV=Object.getOwnPropertySymbols,xG=Object.prototype.hasOwnProperty,RG=Object.prototype.propertyIsEnumerable,JV=(Je,Ee,V)=>Ee in Je?DG(Je,Ee,{enumerable:!0,configurable:!0,writable:!0,value:V}):Je[Ee]=V,XV=(Je,Ee)=>{for(var V in Ee||(Ee={}))xG.call(Ee,V)&&JV(Je,V,Ee[V]);if(QV)for(var V of QV(Ee))RG.call(Ee,V)&&JV(Je,V,Ee[V]);return Je},eU=(Je,Ee)=>AG(Je,SG(Ee));(self.webpackChunkportal=self.webpackChunkportal||[]).push([[179],{8255:Je=>{function Ee(V){return Promise.resolve().then(()=>{var f=new Error("Cannot find module '"+V+"'");throw f.code="MODULE_NOT_FOUND",f})}Ee.keys=()=>[],Ee.resolve=Ee,Ee.id=8255,Je.exports=Ee},7716:(Je,Ee,V)=>{"use strict";V.d(Ee,{deG:()=>Ns,tb:()=>Dv,AFp:()=>Xd,ip1:()=>cc,CZH:()=>Jd,hGG:()=>Pr,z2F:()=>hc,sBO:()=>kf,Sil:()=>np,_Vd:()=>Od,EJc:()=>Av,SBq:()=>Ja,qLn:()=>yo,vpe:()=>Ro,gxx:()=>hd,tBr:()=>Ua,XFs:()=>et,OlP:()=>An,zs3:()=>nr,ZZ4:()=>cm,aQg:()=>zy,soG:()=>tp,YKP:()=>b0,v3s:()=>CM,h0i:()=>Bs,PXZ:()=>EM,R0b:()=>os,FiY:()=>Ps,Lbi:()=>Tv,g9A:()=>Iv,Qsj:()=>sD,FYo:()=>Gy,JOm:()=>Fi,Tiy:()=>am,q3G:()=>Ke,tp0:()=>go,EAV:()=>PA,Rgc:()=>Ud,dDg:()=>Rv,DyG:()=>co,q4F:()=>um,GfV:()=>qy,s_b:()=>Pf,ifc:()=>qe,eFA:()=>Mv,G48:()=>mM,Gpc:()=>H,X6Q:()=>Nm,_c5:()=>BA,VLi:()=>gM,c2e:()=>EA,zSh:()=>Tg,wAp:()=>yt,vHH:()=>Te,EiD:()=>ye,mCW:()=>rd,qzn:()=>xl,JVY:()=>bE,pB0:()=>zp,eBb:()=>Wh,L6k:()=>Zp,LAX:()=>CE,cg1:()=>u0,Tjo:()=>Wn,kL8:()=>Sy,yhl:()=>qh,dqk:()=>vt,sIi:()=>jr,CqO:()=>Lw,QGY:()=>bd,F4k:()=>Fw,RDi:()=>Mc,AaK:()=>te,z3N:()=>ms,qOj:()=>Br,TTD:()=>Fo,_Bn:()=>p0,xp6:()=>lI,uIk:()=>Ul,ekj:()=>Ey,Suo:()=>pv,Xpm:()=>yn,lG2:()=>Nt,Yz7:()=>zt,cJS:()=>Tn,oAB:()=>K,Yjl:()=>Mt,Y36:()=>_f,_UZ:()=>Pw,qZA:()=>Fg,TgZ:()=>ly,EpF:()=>Vg,n5z:()=>Ko,Ikx:()=>Ay,LFG:()=>$n,$8M:()=>ka,NdJ:()=>Ug,CRH:()=>Em,Q6J:()=>ay,s9C:()=>Cd,iGM:()=>Kd,MAs:()=>Ng,CHM:()=>mu,LSH:()=>Vr,kYT:()=>Ae,YNc:()=>aT,_uU:()=>Tf,Oqu:()=>Zw});var f=V(9765),$=V(5319),O=V(7574),ae=V(6682),ce=V(8819);function ne(i){for(let s in i)if(i[s]===ne)return s;throw Error("Could not find renamed property on target object.")}function be(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function te(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(te).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function oe(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const U=ne({__forward_ref__:ne});function H(i){return i.__forward_ref__=H,i.toString=function(){return te(this())},i}function W(i){return le(i)?i():i}function le(i){return"function"==typeof i&&i.hasOwnProperty(U)&&i.__forward_ref__===H}class Te extends Error{constructor(s,a){super(function(i,s){return`${i?`NG0${i}: `:""}${s}`}(s,a)),this.code=s}}function fe(i){return"string"==typeof i?i:null==i?"":String(i)}function De(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():fe(i)}function Wt(i,s){const a=s?` in ${s}`:"";throw new Te("201",`No provider for ${De(i)} found${a}`)}function kn(i,s){null==i&&function(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function zt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Tn(i){return{providers:i.providers||[],imports:i.imports||[]}}function zn(i){return gn(i,Yr)||gn(i,Kn)}function gn(i,s){return i.hasOwnProperty(s)?i[s]:null}function Kr(i){return i&&(i.hasOwnProperty(ke)||i.hasOwnProperty(hr))?i[ke]:null}const Yr=ne({\u0275prov:ne}),ke=ne({\u0275inj:ne}),Kn=ne({ngInjectableDef:ne}),hr=ne({ngInjectorDef:ne});var et=(()=>((et=et||{})[et.Default=0]="Default",et[et.Host=1]="Host",et[et.Self=2]="Self",et[et.SkipSelf=4]="SkipSelf",et[et.Optional=8]="Optional",et))();let Kt;function Yn(i){const s=Kt;return Kt=i,s}function Qn(i,s,a){const l=zn(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&et.Optional?null:void 0!==s?s:void Wt(te(i),"Injector")}function Pn(i){return{toString:i}.toString()}var _n=(()=>((_n=_n||{})[_n.OnPush=0]="OnPush",_n[_n.Default=1]="Default",_n))(),qe=(()=>((qe=qe||{})[qe.Emulated=0]="Emulated",qe[qe.None=2]="None",qe[qe.ShadowDom=3]="ShadowDom",qe))();const ot="undefined"!=typeof globalThis&&globalThis,cs="undefined"!=typeof window&&window,li="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,vt=ot||"undefined"!=typeof global&&global||cs||li,z={},G=[],Q=ne({\u0275cmp:ne}),ve=ne({\u0275dir:ne}),Z=ne({\u0275pipe:ne}),ie=ne({\u0275mod:ne}),Pe=ne({\u0275loc:ne}),Ze=ne({\u0275fac:ne}),ft=ne({__NG_ELEMENT_ID__:ne});let xt=0;function yn(i){return Pn(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===_n.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||G,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||qe.Emulated,id:"c",styles:i.styles||G,_:null,setInput:null,schemas:i.schemas||null,tView:null},d=i.directives,h=i.features,m=i.pipes;return l.id+=xt++,l.inputs=$e(i.inputs,a),l.outputs=$e(i.outputs),h&&h.forEach(v=>v(l)),l.directiveDefs=d?()=>("function"==typeof d?d():d).map(fr):null,l.pipeDefs=m?()=>("function"==typeof m?m():m).map(de):null,l})}function fr(i){return Dt(i)||function(i){return i[ve]||null}(i)}function de(i){return function(i){return i[Z]||null}(i)}const ee={};function K(i){return Pn(()=>{const s={type:i.type,bootstrap:i.bootstrap||G,declarations:i.declarations||G,imports:i.imports||G,exports:i.exports||G,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(ee[i.id]=i.type),s})}function Ae(i,s){return Pn(()=>{const a=Fn(i,!0);a.declarations=s.declarations||G,a.imports=s.imports||G,a.exports=s.exports||G})}function $e(i,s){if(null==i)return z;const a={};for(const l in i)if(i.hasOwnProperty(l)){let d=i[l],h=d;Array.isArray(d)&&(h=d[1],d=d[0]),a[d]=l,s&&(s[d]=h)}return a}const Nt=yn;function Mt(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Dt(i){return i[Q]||null}function Fn(i,s){const a=i[ie]||null;if(!a&&!0===s)throw new Error(`Type ${te(i)} does not have '\u0275mod' property.`);return a}function eo(i){return Array.isArray(i)&&"object"==typeof i[1]}function un(i){return Array.isArray(i)&&!0===i[1]}function Tc(i){return 0!=(8&i.flags)}function ul(i){return 2==(2&i.flags)}function pu(i){return 1==(1&i.flags)}function ds(i){return null!==i.template}function xi(i){return 0!=(512&i[2])}function no(i,s){return i.hasOwnProperty(Ze)?i[Ze]:null}class Rc{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function Fo(){return zi}function zi(i){return i.type.prototype.ngOnChanges&&(i.setInput=wa),Ch}function Ch(){const i=Cp(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===z)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function wa(i,s,a,l){const d=Cp(i)||function(i,s){return i[ar]=s}(i,{previous:z,current:null}),h=d.current||(d.current={}),m=d.previous,v=this.declaredInputs[a],C=m[v];h[v]=new Rc(C&&C.currentValue,s,m===z),i[l]=s}Fo.ngInherit=!0;const ar="__ngSimpleChanges__";function Cp(i){return i[ar]||null}let dl;function Mc(i){dl=i}function Rn(i){return!!i.listen}const Uo={createRenderer:(i,s)=>void 0!==dl?dl:"undefined"!=typeof document?document:void 0};function Qt(i){for(;Array.isArray(i);)i=i[0];return i}function Ia(i,s){return Qt(s[i])}function Ri(i,s){return Qt(s[i.index])}function kc(i,s){return i.data[s]}function pi(i,s){const a=s[i];return eo(a)?a:a[0]}function Ta(i){return 4==(4&i[2])}function Pc(i){return 128==(128&i[2])}function Yi(i,s){return null==s?null:i[s]}function Lr(i){i[18]=0}function Da(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const bt={lFrame:Tp(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Lc(){return bt.bindingsEnabled}function Se(){return bt.lFrame.lView}function Pt(){return bt.lFrame.tView}function mu(i){return bt.lFrame.contextLView=i,i[8]}function bn(){let i=_u();for(;null!==i&&64===i.type;)i=i.parent;return i}function _u(){return bt.lFrame.currentTNode}function Xr(i,s){const a=bt.lFrame;a.currentTNode=i,a.isParent=s}function $o(){return bt.lFrame.isParent}function yu(){return bt.isInCheckNoChangesMode}function ro(i){bt.isInCheckNoChangesMode=i}function hs(){return bt.lFrame.bindingIndex++}function Bc(i,s){const a=bt.lFrame;a.bindingIndex=a.bindingRootIndex=i,jc(s)}function jc(i){bt.lFrame.currentDirectiveIndex=i}function Sh(){return bt.lFrame.currentQueryIndex}function qo(i){bt.lFrame.currentQueryIndex=i}function Eu(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function wu(i,s,a){if(a&et.SkipSelf){let d=s,h=i;for(;!(d=d.parent,null!==d||a&et.Host||(d=Eu(h),null===d||(h=h[15],10&d.type))););if(null===d)return!1;s=d,i=h}const l=bt.lFrame=gl();return l.currentTNode=s,l.lView=i,!0}function bu(i){const s=gl(),a=i[1];bt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function gl(){const i=bt.lFrame,s=null===i?null:i.child;return null===s?Tp(i):s}function Tp(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function ml(){const i=bt.lFrame;return bt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const xh=ml;function Wo(){const i=ml();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function xr(){return bt.lFrame.selectedIndex}function io(i){bt.lFrame.selectedIndex=i}function Xn(){const i=bt.lFrame;return kc(i.tView,i.selectedIndex)}function Sa(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const h=i.data[a].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:v,ngAfterViewInit:C,ngAfterViewChecked:T,ngOnDestroy:x}=h;m&&(i.contentHooks||(i.contentHooks=[])).push(-a,m),v&&((i.contentHooks||(i.contentHooks=[])).push(a,v),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,v)),C&&(i.viewHooks||(i.viewHooks=[])).push(-a,C),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=x&&(i.destroyHooks||(i.destroyHooks=[])).push(a,x)}}function xa(i,s,a){Cu(i,s,3,a)}function Zo(i,s,a,l){(3&i[2])===a&&Cu(i,s,a,l)}function lr(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function Cu(i,s,a,l){const h=null!=l?l:-1,m=s.length-1;let v=0;for(let C=void 0!==l?65535&i[18]:0;C<m;C++)if("number"==typeof s[C+1]){if(v=s[C],null!=l&&v>=l)break}else s[C]<0&&(i[18]+=65536),(v<h||-1==h)&&(Dp(i,a,s,C),i[18]=(4294901760&i[18])+C+2),C++}function Dp(i,s,a,l){const d=a[l]<0,h=a[l+1],v=i[d?-a[l]:a[l]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{h.call(v)}finally{}}}else try{h.call(v)}finally{}}class Iu{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function Wc(i,s,a){const l=Rn(i);let d=0;for(;d<a.length;){const h=a[d];if("number"==typeof h){if(0!==h)break;d++;const m=a[d++],v=a[d++],C=a[d++];l?i.setAttribute(s,v,C,m):s.setAttributeNS(m,v,C)}else{const m=h,v=a[++d];As(m)?l&&i.setProperty(s,m,v):l?i.setAttribute(s,m,v):s.setAttribute(m,v),d++}}return d}function xp(i){return 3===i||4===i||6===i}function As(i){return 64===i.charCodeAt(0)}function wl(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const d=s[l];"number"==typeof d?a=d:0===a||Rp(i,a,d,null,-1===a||2===a?s[++l]:null)}}return i}function Rp(i,s,a,l,d){let h=0,m=i.length;if(-1===s)m=-1;else for(;h<i.length;){const v=i[h++];if("number"==typeof v){if(v===s){m=-1;break}if(v>s){m=h-1;break}}}for(;h<i.length;){const v=i[h];if("number"==typeof v)break;if(v===a){if(null===l)return void(null!==d&&(i[h+1]=d));if(l===i[h+1])return void(i[h+2]=d)}h++,null!==l&&h++,null!==d&&h++}-1!==m&&(i.splice(m,0,s),h=m+1),i.splice(h++,0,a),null!==l&&i.splice(h++,0,l),null!==d&&i.splice(h++,0,d)}function Zc(i){return-1!==i}function oo(i){return 32767&i}function Ra(i,s){let a=function(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let Tu=!0;function Mi(i){const s=Tu;return Tu=i,s}let l_=0;function zo(i,s){const a=bl(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,Na(l.data,i),Na(s,null),Na(l.blueprint,null));const d=Vt(i,s),h=i.injectorIndex;if(Zc(d)){const m=oo(d),v=Ra(d,s),C=v[1].data;for(let T=0;T<8;T++)s[h+T]=v[m+T]|C[m+T]}return s[h+8]=d,h}function Na(i,s){i.push(0,0,0,0,0,0,0,0,s)}function bl(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Vt(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,d=s;for(;null!==d;){const h=d[1],m=h.type;if(l=2===m?h.declTNode:1===m?d[6]:null,null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function gr(i,s,a){!function(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(ft)&&(l=a[ft]),null==l&&(l=a[ft]=l_++);const d=255&l;s.data[i+(d>>5)]|=1<<d}(i,s,a)}function pt(i,s,a){if(a&et.Optional)return i;Wt(s,"NodeInjector")}function zc(i,s,a,l){if(a&et.Optional&&void 0===l&&(l=null),0==(a&(et.Self|et.Host))){const d=i[9],h=Yn(void 0);try{return d?d.get(s,l,a&et.Optional):Qn(s,l,a&et.Optional)}finally{Yn(h)}}return pt(l,s,a)}function kh(i,s,a,l=et.Default,d){if(null!==i){const h=function(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(ft)?i[ft]:void 0;return"number"==typeof s?s>=0?255&s:Kc:s}(a);if("function"==typeof h){if(!wu(s,i,l))return l&et.Host?pt(d,a,l):zc(s,a,l,d);try{const m=h(l);if(null!=m||l&et.Optional)return m;Wt(a)}finally{xh()}}else if("number"==typeof h){let m=null,v=bl(i,s),C=-1,T=l&et.Host?s[16][6]:null;for((-1===v||l&et.SkipSelf)&&(C=-1===v?Vt(i,s):s[v+8],-1!==C&&er(l,!1)?(m=s[1],v=oo(C),s=Ra(C,s)):v=-1);-1!==v;){const x=s[1];if(Il(h,v,x.data)){const k=ao(v,s,a,m,l,T);if(k!==fs)return k}C=s[v+8],-1!==C&&er(l,s[1].data[v+8]===T)&&Il(h,v,s)?(m=x,v=oo(C),s=Ra(C,s)):v=-1}}}return zc(s,a,l,d)}const fs={};function Kc(){return new uo(bn(),Se())}function ao(i,s,a,l,d,h){const m=s[1],v=m.data[i+8],x=gi(v,m,a,null==l?ul(v)&&Tu:l!=m&&0!=(3&v.type),d&et.Host&&h===v);return null!==x?Du(s,m,x,v):fs}function gi(i,s,a,l,d){const h=i.providerIndexes,m=s.data,v=1048575&h,C=i.directiveStart,x=h>>20,L=d?v+x:i.directiveEnd;for(let q=l?v:v+x;q<L;q++){const X=m[q];if(q<C&&a===X||q>=C&&X.type===a)return q}if(d){const q=m[C];if(q&&ds(q)&&q.type===a)return C}return null}function Du(i,s,a,l){let d=i[a];const h=s.data;if(function(i){return i instanceof Iu}(d)){const m=d;m.resolving&&function(i,s){throw new Te("200",`Circular dependency in DI detected for ${i}`)}(De(h[a]));const v=Mi(m.canSeeViewProviders);m.resolving=!0;const C=m.injectImpl?Yn(m.injectImpl):null;wu(i,l,et.Default);try{d=i[a]=m.factory(void 0,h,i,l),s.firstCreatePass&&a>=l.directiveStart&&function(i,s,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:h}=s.type.prototype;if(l){const m=zi(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,m),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,m)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),h&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,h),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,h))}(a,h[a],s)}finally{null!==C&&Yn(C),Mi(v),m.resolving=!1,xh()}}return d}function Il(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function er(i,s){return!(i&et.Self||i&et.Host&&s)}class uo{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return kh(this._tNode,this._lView,s,l,a)}}function Ko(i){return Pn(()=>{const s=i.prototype.constructor,a=s[Ze]||ki(s),l=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==l;){const h=d[Ze]||ki(d);if(h&&h!==a)return h;d=Object.getPrototypeOf(d)}return h=>new h})}function ki(i){return le(i)?()=>{const s=ki(W(i));return s&&s()}:no(i)}function ka(i){return function(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const h=a[d];if(xp(h))break;if(0===h)d+=2;else if("number"==typeof h)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(h===s)return a[d+1];d+=2}}}return null}(bn(),i)}const mi="__parameters__";function Rs(i,s,a){return Pn(()=>{const l=function(i){return function(...a){if(i){const l=i(...a);for(const d in l)this[d]=l[d]}}}(s);function d(...h){if(this instanceof d)return l.apply(this,h),this;const m=new d(...h);return v.annotation=m,v;function v(C,T,x){const k=C.hasOwnProperty(mi)?C[mi]:Object.defineProperty(C,mi,{value:[]})[mi];for(;k.length<=x;)k.push(null);return(k[x]=k[x]||[]).push(m),C}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class An{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=zt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ns=new An("AnalyzeForEntryComponents"),co=Function;function Pi(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),Pi(l,s)):s!==i&&s.push(l)}return s}function Nn(i,s){i.forEach(a=>Array.isArray(a)?Nn(a,s):s(a))}function _i(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function yi(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function ti(i,s,a){let l=Au(i,s);return l>=0?i[1|l]=a:(l=~l,function(i,s,a,l){let d=i.length;if(d==s)i.push(a,l);else if(1===d)i.push(l,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>s;)i[d]=i[d-2],d--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function Fa(i,s){const a=Au(i,s);if(a>=0)return i[1|a]}function Au(i,s){return function(i,s,a){let l=0,d=i.length>>a;for(;d!==l;){const h=l+(d-l>>1),m=i[h<<a];if(s===m)return h<<a;m>s?d=h:l=h+1}return~(d<<a)}(i,s,1)}const ct={},Gt="__NG_DI_FLAG__",Ct="ngTempTokenPath",tr=/\n/gm,La="__source",ps=ne({provide:String,useValue:ne});let gs;function Ji(i){const s=gs;return gs=i,s}function _E(i,s=et.Default){if(void 0===gs)throw new Error("inject() must be called from an injection context");return null===gs?Qn(i,void 0,s):gs.get(i,s&et.Optional?null:void 0,s)}function $n(i,s=et.Default){return(Kt||_E)(W(i),s)}function po(i){const s=[];for(let a=0;a<i.length;a++){const l=W(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Error("Arguments array must have arguments.");let d,h=et.Default;for(let m=0;m<l.length;m++){const v=l[m],C=Bh(v);"number"==typeof C?-1===C?d=v.token:h|=C:d=v}s.push($n(d,h))}else s.push($n(l))}return s}function Jo(i,s){return i[Gt]=s,i.prototype[Gt]=s,i}function Bh(i){return i[Gt]}function Xo(i,s,a,l){const d=i[Ct];throw s[La]&&d.unshift(s[La]),i.message=function(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let d=te(s);if(Array.isArray(s))d=s.map(te).join(" -> ");else if("object"==typeof s){let h=[];for(let m in s)if(s.hasOwnProperty(m)){let v=s[m];h.push(m+":"+("string"==typeof v?JSON.stringify(v):te(v)))}d=`{${h.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${i.replace(tr,"\n  ")}`}("\n"+i.message,d,a,l),i.ngTokenPath=d,i[Ct]=null,i}const Ua=Jo(Rs("Inject",i=>({token:i})),-1),Ps=Jo(Rs("Optional"),8),go=Jo(Rs("SkipSelf"),4);let Hh;function Ru(i){var s;return(null===(s=function(){if(void 0===Hh&&(Hh=null,vt.trustedTypes))try{Hh=vt.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch(i){}return Hh}())||void 0===s?void 0:s.createHTML(i))||i}class ja{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class v_ extends ja{getTypeName(){return"HTML"}}class Sl extends ja{getTypeName(){return"Style"}}class EE extends ja{getTypeName(){return"Script"}}class E_ extends ja{getTypeName(){return"URL"}}class wE extends ja{getTypeName(){return"ResourceURL"}}function ms(i){return i instanceof ja?i.changingThisBreaksApplicationSecurity:i}function xl(i,s){const a=qh(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}function qh(i){return i instanceof ja&&i.getTypeName()||null}function bE(i){return new v_(i)}function Zp(i){return new Sl(i)}function Wh(i){return new EE(i)}function CE(i){return new E_(i)}function zp(i){return new wE(i)}class b_{constructor(s){this.inertDocumentHelper=s}getInertBodyElement(s){s="<body><remove></remove>"+s;try{const a=(new window.DOMParser).parseFromString(Ru(s),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(s):(a.removeChild(a.firstChild),a)}catch(a){return null}}}class IE{constructor(s){if(this.defaultDoc=s,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const a=this.inertDocument.createElement("html");this.inertDocument.appendChild(a);const l=this.inertDocument.createElement("body");a.appendChild(l)}}getInertBodyElement(s){const a=this.inertDocument.createElement("template");if("content"in a)return a.innerHTML=Ru(s),a;const l=this.inertDocument.createElement("body");return l.innerHTML=Ru(s),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(l),l}stripCustomNsAttrs(s){const a=s.attributes;for(let d=a.length-1;0<d;d--){const m=a.item(d).name;("xmlns:ns1"===m||0===m.indexOf("ns1:"))&&s.removeAttribute(m)}let l=s.firstChild;for(;l;)l.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(l),l=l.nextSibling}}const TE=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,C_=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function rd(i){return(i=String(i)).match(TE)||i.match(C_)?i:"unsafe:"+i}function _s(i){const s={};for(const a of i.split(","))s[a]=!0;return s}function Nu(...i){const s={};for(const a of i)for(const l in a)a.hasOwnProperty(l)&&(s[l]=!0);return s}const Yp=_s("area,br,col,hr,img,wbr"),zh=_s("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),I_=_s("rp,rt"),Kh=Nu(Yp,Nu(zh,_s("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Nu(I_,_s("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Nu(I_,zh)),Jp=_s("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Rl=_s("srcset"),E=Nu(Jp,Rl,_s("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),_s("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),g=_s("script,style,template");class _{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(s){let a=s.firstChild,l=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?l=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,l&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let d=this.checkClobberedElement(a,a.nextSibling);if(d){a=d;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(s){const a=s.nodeName.toLowerCase();if(!Kh.hasOwnProperty(a))return this.sanitizedSomething=!0,!g.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const l=s.attributes;for(let d=0;d<l.length;d++){const h=l.item(d),m=h.name,v=m.toLowerCase();if(!E.hasOwnProperty(v)){this.sanitizedSomething=!0;continue}let C=h.value;Jp[v]&&(C=rd(C)),Rl[v]&&(i=C,C=(i=String(i)).split(",").map(s=>rd(s.trim())).join(", ")),this.buf.push(" ",m,'="',N(C),'"')}var i;return this.buf.push(">"),!0}endElement(s){const a=s.nodeName.toLowerCase();Kh.hasOwnProperty(a)&&!Yp.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(s){this.buf.push(N(s))}checkClobberedElement(s,a){if(a&&(s.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${s.outerHTML}`);return a}}const b=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,R=/([^\#-~ |!])/g;function N(i){return i.replace(/&/g,"&amp;").replace(b,function(s){return"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";"}).replace(R,function(s){return"&#"+s.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let J;function ye(i,s){let a=null;try{J=J||function(i){const s=new IE(i);return function(){try{return!!(new window.DOMParser).parseFromString(Ru(""),"text/html")}catch(i){return!1}}()?new b_(s):s}(i);let l=s?String(s):"";a=J.getInertBodyElement(l);let d=5,h=l;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,l=h,h=a.innerHTML,a=J.getInertBodyElement(l)}while(l!==h);return Ru((new _).sanitizeChildren(He(a)||a))}finally{if(a){const l=He(a)||a;for(;l.firstChild;)l.removeChild(l.firstChild)}}}function He(i){return"content"in i&&function(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var Ke=(()=>((Ke=Ke||{})[Ke.NONE=0]="NONE",Ke[Ke.HTML=1]="HTML",Ke[Ke.STYLE=2]="STYLE",Ke[Ke.SCRIPT=3]="SCRIPT",Ke[Ke.URL=4]="URL",Ke[Ke.RESOURCE_URL=5]="RESOURCE_URL",Ke))();function Vr(i){const s=function(){const i=Se();return i&&i[12]}();return s?s.sanitize(Ke.URL,i)||"":xl(i,"URL")?ms(i):rd(fe(i))}const A_="__ngContext__";function vi(i,s){i[A_]=s}function AE(i){const s=function(i){return i[A_]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function R_(i){return i.ngOriginalError}function N_(i,...s){i.error(...s)}class yo{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),l=this._findContext(s),d=(i=s)&&i.ngErrorLogger||N_;var i;d(this._console,"ERROR",s),a&&d(this._console,"ORIGINAL ERROR",a),l&&d(this._console,"ERROR CONTEXT",l)}_findContext(s){return s?s.ngDebugContext||this._findContext(R_(s)):null}_findOriginalError(s){let a=s&&R_(s);for(;a&&R_(a);)a=R_(a);return a||null}}const GC=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(vt))();function na(i){return i instanceof Function?i():i}var Fi=(()=>((Fi=Fi||{})[Fi.Important=1]="Important",Fi[Fi.DashCase=2]="DashCase",Fi))();function NE(i,s){return undefined(i,s)}function sg(i){const s=i[3];return un(s)?s[3]:s}function og(i){return ME(i[13])}function sd(i){return ME(i[4])}function ME(i){for(;null!==i&&!un(i);)i=i[4];return i}function Jh(i,s,a,l,d){if(null!=l){let h,m=!1;un(l)?h=l:eo(l)&&(m=!0,l=l[0]);const v=Qt(l);0===i&&null!==a?null==d?ra(s,a,v):od(s,a,v,d||null,!0):1===i&&null!==a?od(s,a,v,d||null,!0):2===i?function(i,s,a){const l=ag(i,s);l&&function(i,s,a,l){Rn(i)?i.removeChild(s,a,l):s.removeChild(a)}(i,l,s,a)}(s,v,m):3===i&&s.destroyNode(v),null!=h&&function(i,s,a,l,d){const h=a[7];h!==Qt(a)&&Jh(s,i,l,h,d);for(let v=10;v<a.length;v++){const C=a[v];Ml(C[1],C,i,s,l,h)}}(s,i,h,a,d)}}function PE(i,s,a){return Rn(i)?i.createElement(s,a):null===a?i.createElement(s):i.createElementNS(a,s)}function OE(i,s){const a=i[9],l=a.indexOf(s),d=s[3];1024&s[2]&&(s[2]&=-1025,Da(d,-1)),a.splice(l,1)}function Zt(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const d=l[17];null!==d&&d!==i&&OE(d,l),s>0&&(i[a-1][4]=l[4]);const h=yi(i,10+s);!function(i,s){Ml(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const m=h[19];null!==m&&m.detachView(h[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function JC(i,s){if(!(256&s[2])){const a=s[11];Rn(a)&&a.destroyNode&&Ml(i,s,a,3,null,null),function(i){let s=i[13];if(!s)return Nl(i[1],i);for(;s;){let a=null;if(eo(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)eo(s)&&Nl(s[1],s),s=s[3];null===s&&(s=i),eo(s)&&Nl(s[1],s),a=s&&s[4]}s=a}}(s)}}function Nl(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const d=s[a[l]];if(!(d instanceof Iu)){const h=a[l+1];if(Array.isArray(h))for(let m=0;m<h.length;m+=2){const v=d[h[m]],C=h[m+1];try{C.call(v)}finally{}}else try{h.call(d)}finally{}}}}(i,s),function(i,s){const a=i.cleanup,l=s[7];let d=-1;if(null!==a)for(let h=0;h<a.length-1;h+=2)if("string"==typeof a[h]){const m=a[h+1],v="function"==typeof m?m(s):Qt(s[m]),C=l[d=a[h+2]],T=a[h+3];"boolean"==typeof T?v.removeEventListener(a[h],C,T):T>=0?l[d=T]():l[d=-T].unsubscribe(),h+=2}else{const m=l[d=a[h+1]];a[h].call(m)}if(null!==l){for(let h=d+1;h<l.length;h++)l[h]();s[7]=null}}(i,s),1===s[1].type&&Rn(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&un(s[3])){a!==s[3]&&OE(a,s);const l=s[19];null!==l&&l.detachView(i)}}}function eI(i,s,a){return function(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const d=i.data[l.directiveStart].encapsulation;if(d===qe.None||d===qe.Emulated)return null}return Ri(l,a)}(i,s.parent,a)}function od(i,s,a,l,d){Rn(i)?i.insertBefore(s,a,l,d):s.insertBefore(a,l,d)}function ra(i,s,a){Rn(i)?i.appendChild(s,a):s.appendChild(a)}function LE(i,s,a,l,d){null!==l?od(i,s,a,l,d):ra(i,s,a)}function ag(i,s){return Rn(i)?i.parentNode(s):s.parentNode}let rI=function(i,s,a){return 40&i.type?Ri(i,a):null};function ug(i,s,a,l){const d=eI(i,l,s),h=s[11],v=function(i,s,a){return rI(i,s,a)}(l.parent||s[6],l,s);if(null!=d)if(Array.isArray(a))for(let C=0;C<a.length;C++)LE(h,d,a[C],v,!1);else LE(h,d,a,v,!1)}function k_(i,s){if(null!==s){const a=s.type;if(3&a)return Ri(s,i);if(4&a)return jE(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return k_(i,l);{const d=i[s.index];return un(d)?jE(-1,d):Qt(d)}}if(32&a)return NE(s,i)()||Qt(i[s.index]);{const l=BE(i,s);return null!==l?Array.isArray(l)?l[0]:k_(sg(i[16]),l):k_(i,s.next)}}return null}function BE(i,s){return null!==s?i[16][6].projection[s.projection]:null}function jE(i,s){const a=10+i+1;if(a<s.length){const l=s[a],d=l[1].firstChild;if(null!==d)return k_(l,d)}return s[7]}function P_(i,s,a,l,d,h,m){for(;null!=a;){const v=l[a.index],C=a.type;if(m&&0===s&&(v&&vi(Qt(v),l),a.flags|=4),64!=(64&a.flags))if(8&C)P_(i,s,a.child,l,d,h,!1),Jh(s,i,d,v,h);else if(32&C){const T=NE(a,l);let x;for(;x=T();)Jh(s,i,d,x,h);Jh(s,i,d,v,h)}else 16&C?Jt(i,s,l,a,d,h):Jh(s,i,d,v,h);a=m?a.projectionNext:a.next}}function Ml(i,s,a,l,d,h){P_(a,l,i.firstChild,s,d,h,!1)}function Jt(i,s,a,l,d,h){const m=a[16],C=m[6].projection[l.projection];if(Array.isArray(C))for(let T=0;T<C.length;T++)Jh(s,i,d,C[T],h);else P_(i,s,C,m[3],d,h,!0)}function kl(i,s,a){Rn(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function HE(i,s,a){Rn(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function O_(i,s,a){let l=i.length;for(;;){const d=i.indexOf(s,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const h=s.length;if(d+h===l||i.charCodeAt(d+h)<=32)return d}a=d+1}}const iI="ng-template";function F_(i,s,a){let l=0;for(;l<i.length;){let d=i[l++];if(a&&"class"===d){if(d=i[l],-1!==O_(d.toLowerCase(),s,0))return!0}else if(1===d){for(;l<i.length&&"string"==typeof(d=i[l++]);)if(d.toLowerCase()===s)return!0;return!1}}return!1}function Xh(i){return 4===i.type&&i.value!==iI}function sI(i,s,a){return s===(4!==i.type||a?i.value:iI)}function L_(i,s,a){let l=4;const d=i.attrs||[],h=function(i){for(let s=0;s<i.length;s++)if(xp(i[s]))return s;return i.length}(d);let m=!1;for(let v=0;v<s.length;v++){const C=s[v];if("number"!=typeof C){if(!m)if(4&l){if(l=2|1&l,""!==C&&!sI(i,C,a)||""===C&&1===s.length){if(sa(l))return!1;m=!0}}else{const T=8&l?C:s[++v];if(8&l&&null!==i.attrs){if(!F_(i.attrs,T,a)){if(sa(l))return!1;m=!0}continue}const k=GE(8&l?"class":C,d,Xh(i),a);if(-1===k){if(sa(l))return!1;m=!0;continue}if(""!==T){let L;L=k>h?"":d[k+1].toLowerCase();const q=8&l?L:null;if(q&&-1!==O_(q,T,0)||2&l&&T!==L){if(sa(l))return!1;m=!0}}}}else{if(!m&&!sa(l)&&!sa(C))return!1;if(m&&sa(C))continue;m=!1,l=C|1&l}}return sa(l)||m}function sa(i){return 0==(1&i)}function GE(i,s,a,l){if(null===s)return-1;let d=0;if(l||!a){let h=!1;for(;d<s.length;){const m=s[d];if(m===i)return d;if(3===m||6===m)h=!0;else{if(1===m||2===m){let v=s[++d];for(;"string"==typeof v;)v=s[++d];continue}if(4===m)break;if(0===m){d+=4;continue}}d+=h?1:2}return-1}return function(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function cg(i,s,a=!1){for(let l=0;l<s.length;l++)if(L_(i,s[l],a))return!0;return!1}function uI(i,s){return i?":not("+s.trim()+")":s}function V_(i){let s=i[0],a=1,l=2,d="",h=!1;for(;a<i.length;){let m=i[a];if("string"==typeof m)if(2&l){const v=i[++a];d+="["+m+(v.length>0?'="'+v+'"':"")+"]"}else 8&l?d+="."+m:4&l&&(d+=" "+m);else""!==d&&!sa(m)&&(s+=uI(h,d),d=""),l=m,h=h||!sa(l);a++}return""!==d&&(s+=uI(h,d)),s}const Ot={};function lI(i){cI(Pt(),Se(),xr()+i,yu())}function cI(i,s,a,l){if(!l)if(3==(3&s[2])){const h=i.preOrderCheckHooks;null!==h&&xa(s,h,a)}else{const h=i.preOrderHooks;null!==h&&Zo(s,h,0,a)}io(a)}function dg(i,s){return i<<17|s<<2}function Fs(i){return i>>17&32767}function ud(i){return 2|i}function qa(i){return(131068&i)>>2}function B_(i,s){return-131069&i|s<<2}function Pl(i){return 1|i}function EI(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],h=a[l+1];if(-1!==h){const m=i.data[h];qo(d),m.contentQueries(2,s[h],h)}}}function tf(i,s,a,l,d,h,m,v,C,T){const x=s.blueprint.slice();return x[0]=d,x[2]=140|l,Lr(x),x[3]=x[15]=i,x[8]=a,x[10]=m||i&&i[10],x[11]=v||i&&i[11],x[12]=C||i&&i[12]||null,x[9]=T||i&&i[9]||null,x[6]=h,x[16]=2==s.type?i[16]:x,x}function cd(i,s,a,l,d){let h=i.data[s];if(null===h)h=function(i,s,a,l,d){const h=_u(),m=$o(),C=i.data[s]=function(i,s,a,l,d,h){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?h:h&&h.parent,a,s,l,d);return null===i.firstChild&&(i.firstChild=C),null!==h&&(m?null==h.child&&null!==C.parent&&(h.child=C):null===h.next&&(h.next=C)),C}(i,s,a,l,d),bt.lFrame.inI18n&&(h.flags|=64);else if(64&h.type){h.type=a,h.value=l,h.attrs=d;const m=function(){const i=bt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();h.injectorIndex=null===m?-1:m.injectorIndex}return Xr(h,!0),h}function nf(i,s,a,l){if(0===a)return-1;const d=s.length;for(let h=0;h<a;h++)s.push(l),i.blueprint.push(l),i.data.push(null);return d}function dd(i,s,a){bu(s);try{const l=i.viewQuery;null!==l&&ow(1,l,a);const d=i.template;null!==d&&XE(i,s,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&EI(i,s),i.staticViewQueries&&ow(2,i.viewQuery,a);const h=i.components;null!==h&&function(i,s){for(let a=0;a<s.length;a++)MI(i,s[a])}(s,h)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,Wo()}}function Ei(i,s,a,l){const d=s[2];if(256==(256&d))return;bu(s);const h=yu();try{Lr(s),function(i){bt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&XE(i,s,a,2,l);const m=3==(3&d);if(!h)if(m){const T=i.preOrderCheckHooks;null!==T&&xa(s,T,null)}else{const T=i.preOrderHooks;null!==T&&Zo(s,T,0,null),lr(s,0)}if(function(i){for(let s=og(i);null!==s;s=sd(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const d=a[l],h=d[3];0==(1024&d[2])&&Da(h,1),d[2]|=1024}}}(s),function(i){for(let s=og(i);null!==s;s=sd(s))for(let a=10;a<s.length;a++){const l=s[a],d=l[1];Pc(l)&&Ei(d,l,d.template,l[8])}}(s),null!==i.contentQueries&&EI(i,s),!h)if(m){const T=i.contentCheckHooks;null!==T&&xa(s,T)}else{const T=i.contentHooks;null!==T&&Zo(s,T,1),lr(s,1)}!function(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)io(~d);else{const h=d,m=a[++l],v=a[++l];Bc(m,h),v(2,s[h])}}}finally{io(-1)}}(i,s);const v=i.components;null!==v&&function(i,s){for(let a=0;a<s.length;a++)nR(i,s[a])}(s,v);const C=i.viewQuery;if(null!==C&&ow(2,C,l),!h)if(m){const T=i.viewCheckHooks;null!==T&&xa(s,T)}else{const T=i.viewHooks;null!==T&&Zo(s,T,2),lr(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),h||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,Da(s[3],-1))}finally{Wo()}}function wI(i,s,a,l){const d=s[10],h=!yu(),m=Ta(s);try{h&&!m&&d.begin&&d.begin(),m&&dd(i,s,l),Ei(i,s,a,l)}finally{h&&!m&&d.end&&d.end()}}function XE(i,s,a,l,d){const h=xr(),m=2&l;try{io(-1),m&&s.length>20&&cI(i,s,20,yu()),a(l,d)}finally{io(h)}}function rf(i,s,a){!Lc()||(function(i,s,a,l){const d=a.directiveStart,h=a.directiveEnd;i.firstCreatePass||zo(a,s),vi(l,s);const m=a.initialInputs;for(let v=d;v<h;v++){const C=i.data[v],T=ds(C);T&&Yx(s,a,C);const x=Du(s,i,v,a);vi(x,s),null!==m&&Qx(0,v-d,x,C,0,m),T&&(pi(a.index,s)[8]=x)}}(i,s,a,Ri(a,s)),128==(128&a.flags)&&function(i,s,a){const l=a.directiveStart,d=a.directiveEnd,m=a.index,v=bt.lFrame.currentDirectiveIndex;try{io(m);for(let C=l;C<d;C++){const T=i.data[C],x=s[C];jc(C),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&SI(T,x)}}finally{io(-1),jc(v)}}(i,s,a))}function ew(i,s,a=Ri){const l=s.localNames;if(null!==l){let d=s.index+1;for(let h=0;h<l.length;h+=2){const m=l[h+1],v=-1===m?a(s,i):i[m];i[d++]=v}}}function bI(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=$_(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function $_(i,s,a,l,d,h,m,v,C,T){const x=20+l,k=x+d,L=function(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:Ot);return a}(x,k),q="function"==typeof T?T():T;return L[1]={type:i,blueprint:L,template:a,queries:null,viewQuery:v,declTNode:s,data:L.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:C,consts:q,incompleteFirstPass:!1}}function sf(i,s,a,l){const d=FI(s);null===a?d.push(l):(d.push(a),i.firstCreatePass&&LI(i).push(l,d.length-1))}function bg(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const d=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,d):a[l]=[s,d]}return a}function Ls(i,s,a,l,d,h,m,v){const C=Ri(s,a);let x,T=s.inputs;!v&&null!=T&&(x=T[l])?(VI(i,a,x,l,d),ul(s)&&function(i,s){const a=pi(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(l=function(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),d=null!=m?m(d,s.value||"",l):d,Rn(h)?h.setProperty(C,l,d):As(l)||(C.setProperty?C.setProperty(l,d):C[l]=d))}function nw(i,s,a,l){let d=!1;if(Lc()){const h=function(i,s,a){const l=i.directiveRegistry;let d=null;if(l)for(let h=0;h<l.length;h++){const m=l[h];cg(a,m.selectors,!1)&&(d||(d=[]),gr(zo(a,s),i,m.type),ds(m)?(af(i,a),d.unshift(m)):d.push(m))}return d}(i,s,a),m=null===l?null:{"":-1};if(null!==h){d=!0,xI(a,i.data.length,h.length);for(let x=0;x<h.length;x++){const k=h[x];k.providersResolver&&k.providersResolver(k)}let v=!1,C=!1,T=nf(i,s,h.length,null);for(let x=0;x<h.length;x++){const k=h[x];a.mergedAttrs=wl(a.mergedAttrs,k.hostAttrs),RI(i,a,s,T,k),Kx(T,k,m),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const L=k.type.prototype;!v&&(L.ngOnChanges||L.ngOnInit||L.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),v=!0),!C&&(L.ngOnChanges||L.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),C=!0),T++}!function(i,s){const l=s.directiveEnd,d=i.data,h=s.attrs,m=[];let v=null,C=null;for(let T=s.directiveStart;T<l;T++){const x=d[T],k=x.inputs,L=null===h||Xh(s)?null:Jx(k,h);m.push(L),v=bg(k,T,v),C=bg(x.outputs,T,C)}null!==v&&(v.hasOwnProperty("class")&&(s.flags|=16),v.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=m,s.inputs=v,s.outputs=C}(i,a)}m&&function(i,s,a){if(s){const l=i.localNames=[];for(let d=0;d<s.length;d+=2){const h=a[s[d+1]];if(null==h)throw new Te("301",`Export of name '${s[d+1]}' not found!`);l.push(s[d],h)}}}(a,l,m)}return a.mergedAttrs=wl(a.mergedAttrs,a.attrs),d}function AI(i,s,a,l,d,h){const m=h.hostBindings;if(m){let v=i.hostBindingOpCodes;null===v&&(v=i.hostBindingOpCodes=[]);const C=~s.index;(function(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(v)!=C&&v.push(C),v.push(l,d,m)}}function SI(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function af(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function Kx(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;ds(s)&&(a[""]=i)}}function xI(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function RI(i,s,a,l,d){i.data[l]=d;const h=d.factory||(d.factory=no(d.type)),m=new Iu(h,ds(d),null);i.blueprint[l]=m,a[l]=m,AI(i,s,0,l,nf(i,a,d.hostVars,Ot),d)}function Yx(i,s,a){const l=Ri(s,i),d=bI(a),h=i[10],m=Ig(i,tf(i,d,null,a.onPush?64:16,l,s,h,h.createRenderer(l,a),null,null));i[s.index]=m}function Za(i,s,a,l,d,h){const m=Ri(i,s);!function(i,s,a,l,d,h,m){if(null==h)Rn(i)?i.removeAttribute(s,d,a):s.removeAttribute(d);else{const v=null==m?fe(h):m(h,l||"",d);Rn(i)?i.setAttribute(s,d,v,a):a?s.setAttributeNS(a,d,v):s.setAttribute(d,v)}}(s[11],m,h,i.value,a,l,d)}function Qx(i,s,a,l,d,h){const m=h[s];if(null!==m){const v=l.setInput;for(let C=0;C<m.length;){const T=m[C++],x=m[C++],k=m[C++];null!==v?l.setInput(a,k,T,x):a[x]=k}}}function Jx(i,s){let a=null,l=0;for(;l<s.length;){const d=s[l];if(0!==d)if(5!==d){if("number"==typeof d)break;i.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,i[d],s[l+1])),l+=2}else l+=2;else l+=4}return a}function NI(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function nR(i,s){const a=pi(s,i);if(Pc(a)){const l=a[1];80&a[2]?Ei(l,a,l.template,a[8]):a[5]>0&&iw(a)}}function iw(i){for(let l=og(i);null!==l;l=sd(l))for(let d=10;d<l.length;d++){const h=l[d];if(1024&h[2]){const m=h[1];Ei(m,h,m.template,h[8])}else h[5]>0&&iw(h)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=pi(a[l],i);Pc(d)&&d[5]>0&&iw(d)}}function MI(i,s){const a=pi(s,i),l=a[1];(function(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),dd(l,a,a[8])}function Ig(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function q_(i){for(;i;){i[2]|=64;const s=sg(i);if(xi(i)&&!s)return i;i=s}return null}function sw(i,s,a){const l=s[10];l.begin&&l.begin();try{Ei(i,s,i.template,a)}catch(d){throw aw(s,d),d}finally{l.end&&l.end()}}function PI(i){!function(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=AE(a),d=l[1];wI(d,l,d.template,a)}}(i[8])}function ow(i,s,a){qo(0),s(i,a)}const sR=(()=>Promise.resolve(null))();function FI(i){return i[7]||(i[7]=[])}function LI(i){return i.cleanup||(i.cleanup=[])}function aw(i,s){const a=i[9],l=a?a.get(yo,null):null;l&&l.handleError(s)}function VI(i,s,a,l,d){for(let h=0;h<a.length;){const m=a[h++],v=a[h++],C=s[m],T=i.data[m];null!==T.setInput?T.setInput(C,d,l,v):C[v]=d}}function ys(i,s,a){const l=Ia(s,i);!function(i,s,a){Rn(i)?i.setValue(s,a):s.textContent=a}(i[11],l,a)}function z_(i,s,a){let l=a?i.styles:null,d=a?i.classes:null,h=0;if(null!==s)for(let m=0;m<s.length;m++){const v=s[m];"number"==typeof v?h=v:1==h?d=oe(d,v):2==h&&(l=oe(l,v+": "+s[++m]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=d:i.classesWithoutHost=d}const hd=new An("INJECTOR",-1);class UI{get(s,a=ct){if(a===ct){const l=new Error(`NullInjectorError: No provider for ${te(s)}!`);throw l.name="NullInjectorError",l}return a}}const Tg=new An("Set Injector scope."),Cr={},uR={};let uf;function Fl(){return void 0===uf&&(uf=new UI),uf}function fd(i,s=null,a=null,l){return new lf(i,a,s||Fl(),l)}class lf{constructor(s,a,l,d=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const h=[];a&&Nn(a,v=>this.processProvider(v,s,a)),Nn([s],v=>this.processInjectorType(v,[],h)),this.records.set(hd,cf(void 0,this));const m=this.records.get(Tg);this.scope=null!=m?m.value:null,this.source=d||("object"==typeof s?null:te(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=ct,l=et.Default){this.assertNotDestroyed();const d=Ji(this),h=Yn(void 0);try{if(!(l&et.SkipSelf)){let v=this.records.get(s);if(void 0===v){const C=("function"==typeof(i=s)||"object"==typeof i&&i instanceof An)&&zn(s);v=C&&this.injectableDefInScope(C)?cf(uw(s),Cr):null,this.records.set(s,v)}if(null!=v)return this.hydrate(s,v)}return(l&et.Self?Fl():this.parent).get(s,a=l&et.Optional&&a===ct?null:a)}catch(m){if("NullInjectorError"===m.name){if((m[Ct]=m[Ct]||[]).unshift(te(s)),d)throw m;return Xo(m,s,"R3InjectorError",this.source)}throw m}finally{Yn(h),Ji(d)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((l,d)=>s.push(te(d))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(s,a,l){if(!(s=W(s)))return!1;let d=Kr(s);const h=null==d&&s.ngModule||void 0,m=void 0===h?s:h,v=-1!==l.indexOf(m);if(void 0!==h&&(d=Kr(h)),null==d)return!1;if(null!=d.imports&&!v){let x;l.push(m);try{Nn(d.imports,k=>{this.processInjectorType(k,a,l)&&(void 0===x&&(x=[]),x.push(k))})}finally{}if(void 0!==x)for(let k=0;k<x.length;k++){const{ngModule:L,providers:q}=x[k];Nn(q,X=>this.processProvider(X,L,q||G))}}this.injectorDefTypes.add(m);const C=no(m)||(()=>new m);this.records.set(m,cf(C,Cr));const T=d.providers;if(null!=T&&!v){const x=s;Nn(T,k=>this.processProvider(k,x,T))}return void 0!==h&&void 0!==s.providers}processProvider(s,a,l){let d=Dg(s=W(s))?s:W(s&&s.provide);const h=dw(i=s)?cf(void 0,i.useValue):cf(cw(i),Cr);var i;if(Dg(s)||!0!==s.multi)this.records.get(d);else{let m=this.records.get(d);m||(m=cf(void 0,Cr,!0),m.factory=()=>po(m.multi),this.records.set(d,m)),d=s,m.multi.push(s)}this.records.set(d,h)}hydrate(s,a){return a.value===Cr&&(a.value=uR,a.value=a.factory()),"object"==typeof a.value&&a.value&&null!==(i=a.value)&&"object"==typeof i&&"function"==typeof i.ngOnDestroy&&this.onDestroy.add(a.value),a.value;var i}injectableDefInScope(s){if(!s.providedIn)return!1;const a=W(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function uw(i){const s=zn(i),a=null!==s?s.factory:no(i);if(null!==a)return a;if(i instanceof An)throw new Error(`Token ${te(i)} is missing a \u0275prov definition.`);if(i instanceof Function)return function(i){const s=i.length;if(s>0){const l=function(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}(s,"?");throw new Error(`Can't resolve all parameters for ${te(i)}: (${l.join(", ")}).`)}const a=function(i){const s=i&&(i[Yr]||i[Kn]);if(s){const a=function(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Error("unreachable")}function cw(i,s,a){let l;if(Dg(i)){const d=W(i);return no(d)||uw(d)}if(dw(i))l=()=>W(i.useValue);else if(function(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...po(i.deps||[]));else if(function(i){return!(!i||!i.useExisting)}(i))l=()=>$n(W(i.useExisting));else{const d=W(i&&(i.useClass||i.provide));if(!function(i){return!!i.deps}(i))return no(d)||uw(d);l=()=>new d(...po(i.deps))}return l}function cf(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function dw(i){return null!==i&&"object"==typeof i&&ps in i}function Dg(i){return"function"==typeof i}const $I=function(i,s,a){return function(i,s=null,a=null,l){const d=fd(i,s,a,l);return d._resolveInjectorDefTypes(),d}({name:a},s,i,a)};let nr=(()=>{class i{static create(a,l){return Array.isArray(a)?$I(a,l,""):$I(a.providers,a.parent,a.name||"")}}return i.THROW_IF_NOT_FOUND=ct,i.NULL=new UI,i.\u0275prov=zt({token:i,providedIn:"any",factory:()=>$n(hd)}),i.__NG_ELEMENT_ID__=-1,i})();function ER(i,s){Sa(AE(i)[1],bn())}function Br(i){let s=function(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let d;if(ds(i))d=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Error("Directives cannot inherit Components");d=s.\u0275dir}if(d){if(a){l.push(d);const m=i;m.inputs=ww(i.inputs),m.declaredInputs=ww(i.declaredInputs),m.outputs=ww(i.outputs);const v=d.hostBindings;v&&JI(i,v);const C=d.viewQuery,T=d.contentQueries;if(C&&wR(i,C),T&&QI(i,T),be(i.inputs,d.inputs),be(i.declaredInputs,d.declaredInputs),be(i.outputs,d.outputs),ds(d)&&d.data.animation){const x=i.data;x.animation=(x.animation||[]).concat(d.data.animation)}}const h=d.features;if(h)for(let m=0;m<h.length;m++){const v=h[m];v&&v.ngInherit&&v(i),v===Br&&(a=!1)}}s=Object.getPrototypeOf(s)}!function(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const d=i[l];d.hostVars=s+=d.hostVars,d.hostAttrs=wl(d.hostAttrs,a=wl(a,d.hostAttrs))}}(l)}function ww(i){return i===z?{}:i===G?[]:i}function wR(i,s){const a=i.viewQuery;i.viewQuery=a?(l,d)=>{s(l,d),a(l,d)}:s}function QI(i,s){const a=i.contentQueries;i.contentQueries=a?(l,d,h)=>{s(l,d,h),a(l,d,h)}:s}function JI(i,s){const a=i.hostBindings;i.hostBindings=a?(l,d)=>{s(l,d),a(l,d)}:s}let gd=null;function md(){if(!gd){const i=vt.Symbol;if(i&&i.iterator)gd=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(gd=l)}}}return gd}function jr(i){return!!xg(i)&&(Array.isArray(i)||!(i instanceof Map)&&md()in i)}function xg(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function wi(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Ul(i,s,a,l){const d=Se();return wi(d,hs(),s)&&(Pt(),Za(Xn(),d,i,s,a,l)),Ul}function Bl(i,s,a,l){return wi(i,hs(),a)?s+fe(a)+l:Ot}function aT(i,s,a,l,d,h,m,v){const C=Se(),T=Pt(),x=i+20,k=T.firstCreatePass?function(i,s,a,l,d,h,m,v,C){const T=s.consts,x=cd(s,i,4,m||null,Yi(T,v));nw(s,a,x,Yi(T,C)),Sa(s,x);const k=x.tViews=$_(2,x,l,d,h,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T);return null!==s.queries&&(s.queries.template(s,x),k.queries=s.queries.embeddedTView(x)),x}(x,T,C,s,a,l,d,h,m):T.data[x];Xr(k,!1);const L=C[11].createComment("");ug(T,C,L,k),vi(L,C),Ig(C,C[x]=NI(L,C,L,k)),pu(k)&&rf(T,C,k),null!=m&&ew(C,k,v)}function Ng(i){return function(i,s){return i[s]}(bt.lFrame.contextLView,20+i)}function _f(i,s=et.Default){const a=Se();return null===a?$n(i,s):kh(bn(),a,W(i),s)}function ay(i,s,a){const l=Se();return wi(l,hs(),s)&&Ls(Pt(),Xn(),l,i,s,l[11],a,!1),ay}function wd(i,s,a,l,d){const m=d?"class":"style";VI(i,a,s.inputs[m],m,l)}function ly(i,s,a,l){const d=Se(),h=Pt(),m=20+i,v=d[11],C=d[m]=PE(v,s,bt.lFrame.currentNamespace),T=h.firstCreatePass?function(i,s,a,l,d,h,m){const v=s.consts,T=cd(s,i,2,d,Yi(v,h));return nw(s,a,T,Yi(v,m)),null!==T.attrs&&z_(T,T.attrs,!1),null!==T.mergedAttrs&&z_(T,T.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,T),T}(m,h,d,0,s,a,l):h.data[m];Xr(T,!0);const x=T.mergedAttrs;null!==x&&Wc(v,C,x);const k=T.classes;null!==k&&HE(v,C,k);const L=T.styles;null!==L&&kl(v,C,L),64!=(64&T.flags)&&ug(h,d,C,T),0===bt.lFrame.elementDepthCount&&vi(C,d),bt.lFrame.elementDepthCount++,pu(T)&&(rf(h,d,T),function(i,s,a){if(Tc(s)){const d=s.directiveEnd;for(let h=s.directiveStart;h<d;h++){const m=i.data[h];m.contentQueries&&m.contentQueries(1,a[h],h)}}}(h,T,d)),null!==l&&ew(d,T)}function Fg(){let i=bn();$o()?bt.lFrame.isParent=!1:(i=i.parent,Xr(i,!1));const s=i;bt.lFrame.elementDepthCount--;const a=Pt();a.firstCreatePass&&(Sa(a,i),Tc(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function(i){return 0!=(16&i.flags)}(s)&&wd(a,s,Se(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function(i){return 0!=(32&i.flags)}(s)&&wd(a,s,Se(),s.stylesWithoutHost,!1)}function Pw(i,s,a,l){ly(i,s,a,l),Fg()}function Vg(){return Se()}function bd(i){return!!i&&"function"==typeof i.then}function Fw(i){return!!i&&"function"==typeof i.subscribe}const Lw=Fw;function Ug(i,s,a,l){const d=Se(),h=Pt(),m=bn();return function(i,s,a,l,d,h,m,v){const C=pu(l),x=i.firstCreatePass&&LI(i),k=s[8],L=FI(s);let q=!0;if(3&l.type||v){const se=Ri(l,s),Fe=v?v(se):se,Ie=L.length,ut=v?St=>v(Qt(St[l.index])):l.index;if(Rn(a)){let St=null;if(!v&&C&&(St=function(i,s,a,l){const d=i.cleanup;if(null!=d)for(let h=0;h<d.length-1;h+=2){const m=d[h];if(m===a&&d[h+1]===l){const v=s[7],C=d[h+2];return v.length>C?v[C]:null}"string"==typeof m&&(h+=2)}return null}(i,s,d,l.index)),null!==St)(St.__ngLastListenerFn__||St).__ngNextListenerFn__=h,St.__ngLastListenerFn__=h,q=!1;else{h=hy(l,s,k,h,!1);const en=a.listen(Fe,d,h);L.push(h,en),x&&x.push(d,ut,Ie,Ie+1)}}else h=hy(l,s,k,h,!0),Fe.addEventListener(d,h,m),L.push(h),x&&x.push(d,ut,Ie,m)}else h=hy(l,s,k,h,!1);const X=l.outputs;let he;if(q&&null!==X&&(he=X[d])){const se=he.length;if(se)for(let Fe=0;Fe<se;Fe+=2){const Wr=s[he[Fe]][he[Fe+1]].subscribe(h),qs=L.length;L.push(h,Wr),x&&x.push(d,l.index,qs,-(qs+1))}}}(h,d,d[11],m,i,s,!!a,l),Ug}function Bw(i,s,a,l){try{return!1!==a(l)}catch(d){return aw(i,d),!1}}function hy(i,s,a,l,d){return function h(m){if(m===Function)return l;const v=2&i.flags?pi(i.index,s):s;0==(32&s[2])&&q_(v);let C=Bw(s,0,l,m),T=h.__ngNextListenerFn__;for(;T;)C=Bw(s,0,T,m)&&C,T=T.__ngNextListenerFn__;return d&&!1===C&&(m.preventDefault(),m.returnValue=!1),C}}function Cd(i,s,a){return Bu(i,"",s,"",a),Cd}function Bu(i,s,a,l,d){const h=Se(),m=Bl(h,s,a,l);return m!==Ot&&Ls(Pt(),Xn(),h,i,m,h[11],d,!1),Bu}function $g(i,s,a,l,d){const h=i[a+1],m=null===s;let v=l?Fs(h):qa(h),C=!1;for(;0!==v&&(!1===C||m);){const x=i[v+1];yy(i[v],s)&&(C=!0,i[v+1]=l?Pl(x):ud(x)),v=l?Fs(x):qa(x)}C&&(i[a+1]=l?ud(h):Pl(h))}function yy(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&Au(i,s)>=0}function Ey(i,s){return function(i,s,a,l){const d=Se(),h=Pt(),m=function(i){const s=bt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);h.firstUpdatePass&&function(i,s,a,l){const d=i.data;if(null===d[a+1]){const h=d[xr()],m=function(i,s){return s>=i.expandoStartIndex}(i,a);(function(i,s){return 0!=(i.flags&(s?16:32))})(h,l)&&null===s&&!m&&(s=!1),s=function(i,s,a,l){const d=function(i){const s=bt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let h=l?s.residualClasses:s.residualStyles;if(null===d)0===(l?s.classBindings:s.styleBindings)&&(a=qg(a=Gg(null,i,s,a,l),s.attrs,l),h=null);else{const m=s.directiveStylingLast;if(-1===m||i[m]!==d)if(a=Gg(d,i,s,a,l),null===h){let C=function(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==qa(l))return i[Fs(l)]}(i,s,l);void 0!==C&&Array.isArray(C)&&(C=Gg(null,i,s,C[1],l),C=qg(C,s.attrs,l),function(i,s,a,l){i[Fs(a?s.classBindings:s.styleBindings)]=l}(i,s,l,C))}else h=function(i,s,a){let l;const d=s.directiveEnd;for(let h=1+s.directiveStylingLast;h<d;h++)l=qg(l,i[h].hostAttrs,a);return qg(l,s.attrs,a)}(i,s,l)}return void 0!==h&&(l?s.residualClasses=h:s.residualStyles=h),a}(d,h,s,l),function(i,s,a,l,d,h){let m=h?s.classBindings:s.styleBindings,v=Fs(m),C=qa(m);i[l]=a;let x,T=!1;if(Array.isArray(a)){const k=a;x=k[1],(null===x||Au(k,x)>0)&&(T=!0)}else x=a;if(d)if(0!==C){const L=Fs(i[v+1]);i[l+1]=dg(L,v),0!==L&&(i[L+1]=B_(i[L+1],l)),i[v+1]=function(i,s){return 131071&i|s<<17}(i[v+1],l)}else i[l+1]=dg(v,0),0!==v&&(i[v+1]=B_(i[v+1],l)),v=l;else i[l+1]=dg(C,0),0===v?v=l:i[C+1]=B_(i[C+1],l),C=l;T&&(i[l+1]=ud(i[l+1])),$g(i,x,l,!0),$g(i,x,l,!1),function(i,s,a,l,d){const h=d?i.residualClasses:i.residualStyles;null!=h&&"string"==typeof s&&Au(h,s)>=0&&(a[l+1]=Pl(a[l+1]))}(s,x,i,l,h),m=dg(v,C),h?s.classBindings=m:s.styleBindings=m}(d,h,s,a,m,l)}}(h,i,m,l),s!==Ot&&wi(d,m,s)&&function(i,s,a,l,d,h,m,v){if(!(3&s.type))return;const C=i.data,T=C[v+1];Cf(function(i){return 1==(1&i)}(T)?Wg(C,s,a,d,qa(T),m):void 0)||(Cf(h)||function(i){return 2==(2&i)}(T)&&(h=Wg(C,null,a,d,v,m)),function(i,s,a,l,d){const h=Rn(i);if(s)d?h?i.addClass(a,l):a.classList.add(l):h?i.removeClass(a,l):a.classList.remove(l);else{let m=-1===l.indexOf("-")?void 0:Fi.DashCase;if(null==d)h?i.removeStyle(a,l,m):a.style.removeProperty(l);else{const v="string"==typeof d&&d.endsWith("!important");v&&(d=d.slice(0,-10),m|=Fi.Important),h?i.setStyle(a,l,d,m):a.style.setProperty(l,d,v?"important":"")}}}(l,m,Ia(xr(),a),d,h))}(h,h.data[xr()],d,d[11],i,d[m+1]=function(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=te(ms(i)))),i}(s,a),l,m)}(i,s,null,!0),Ey}function Gg(i,s,a,l,d){let h=null;const m=a.directiveEnd;let v=a.directiveStylingLast;for(-1===v?v=a.directiveStart:v++;v<m&&(h=s[v],l=qg(l,h.hostAttrs,d),h!==i);)v++;return null!==i&&(a.directiveStylingLast=v),l}function qg(i,s,a){const l=a?1:2;let d=-1;if(null!==s)for(let h=0;h<s.length;h++){const m=s[h];"number"==typeof m?d=m:d===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),ti(i,m,!!a||s[++h]))}return void 0===i?null:i}function Wg(i,s,a,l,d,h){const m=null===s;let v;for(;d>0;){const C=i[d],T=Array.isArray(C),x=T?C[1]:C,k=null===x;let L=a[d+1];L===Ot&&(L=k?G:void 0);let q=k?Fa(L,l):x===l?L:void 0;if(T&&!Cf(q)&&(q=Fa(C,l)),Cf(q)&&(v=q,m))return v;const X=i[d+1];d=m?Fs(X):qa(X)}if(null!==s){let C=h?s.residualClasses:s.residualStyles;null!=C&&(v=Fa(C,l))}return v}function Cf(i){return void 0!==i}function Tf(i,s=""){const a=Se(),l=Pt(),d=i+20,h=l.firstCreatePass?cd(l,d,1,s,null):l.data[d],m=a[d]=function(i,s){return Rn(i)?i.createText(s):i.createTextNode(s)}(a[11],s);ug(l,a,m,h),Xr(h,!1)}function Zw(i){return mr("",i,""),Zw}function mr(i,s,a){const l=Se(),d=Bl(l,i,s,a);return d!==Ot&&ys(l,xr(),d),mr}function Ay(i,s,a){const l=Se();return wi(l,hs(),s)&&Ls(Pt(),Xn(),l,i,s,l[11],a,!0),Ay}const Ka=void 0;var jT=["en",[["a","p"],["AM","PM"],Ka],[["AM","PM"],Ka,Ka],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ka,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ka,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ka,"{1} 'at' {0}",Ka],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(i){const s=Math.floor(Math.abs(i)),a=i.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let Ad={};function u0(i){const s=function(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=$T(s);if(a)return a;const l=s.split("-")[0];if(a=$T(l),a)return a;if("en"===l)return jT;throw new Error(`Missing locale data for the locale "${i}".`)}function Sy(i){return u0(i)[yt.PluralCase]}function $T(i){return i in Ad||(Ad[i]=vt.ng&&vt.ng.common&&vt.ng.common.locales&&vt.ng.common.locales[i]),Ad[i]}var yt=(()=>((yt=yt||{})[yt.LocaleId=0]="LocaleId",yt[yt.DayPeriodsFormat=1]="DayPeriodsFormat",yt[yt.DayPeriodsStandalone=2]="DayPeriodsStandalone",yt[yt.DaysFormat=3]="DaysFormat",yt[yt.DaysStandalone=4]="DaysStandalone",yt[yt.MonthsFormat=5]="MonthsFormat",yt[yt.MonthsStandalone=6]="MonthsStandalone",yt[yt.Eras=7]="Eras",yt[yt.FirstDayOfWeek=8]="FirstDayOfWeek",yt[yt.WeekendRange=9]="WeekendRange",yt[yt.DateFormat=10]="DateFormat",yt[yt.TimeFormat=11]="TimeFormat",yt[yt.DateTimeFormat=12]="DateTimeFormat",yt[yt.NumberSymbols=13]="NumberSymbols",yt[yt.NumberFormats=14]="NumberFormats",yt[yt.CurrencyCode=15]="CurrencyCode",yt[yt.CurrencySymbol=16]="CurrencySymbol",yt[yt.CurrencyName=17]="CurrencyName",yt[yt.Currencies=18]="Currencies",yt[yt.Directionality=19]="Directionality",yt[yt.PluralCase=20]="PluralCase",yt[yt.ExtraData=21]="ExtraData",yt))();const Qg="en-US";let Ue=Qg;function _r(i){kn(i,"Expected localeId to be defined"),"string"==typeof i&&(Ue=i.toLowerCase().replace(/_/g,"-"))}function $y(i,s,a,l,d){if(i=W(i),Array.isArray(i))for(let h=0;h<i.length;h++)$y(i[h],s,a,l,d);else{const h=Pt(),m=Se();let v=Dg(i)?i:W(i.provide),C=cw(i);const T=bn(),x=1048575&T.providerIndexes,k=T.directiveStart,L=T.providerIndexes>>20;if(Dg(i)||!i.multi){const q=new Iu(C,d,_f),X=Hr(v,s,d?x:x+L,k);-1===X?(gr(zo(T,m),h,v),cr(h,i,s.length),s.push(v),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(q),m.push(q)):(a[X]=q,m[X]=q)}else{const q=Hr(v,s,x+L,k),X=Hr(v,s,x,x+L),he=q>=0&&a[q],se=X>=0&&a[X];if(d&&!se||!d&&!he){gr(zo(T,m),h,v);const Fe=function(i,s,a,l,d){const h=new Iu(i,a,_f);return h.multi=[],h.index=s,h.componentProviders=0,im(h,d,l&&!a),h}(d?nD:Bn,a.length,d,l,C);!d&&se&&(a[X].providerFactory=Fe),cr(h,i,s.length,0),s.push(v),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(Fe),m.push(Fe)}else cr(h,i,q>-1?q:X,im(a[d?X:q],C,!d&&l));!d&&l&&se&&a[X].componentProviders++}}}function cr(i,s,a,l){const d=Dg(s);if(d||function(i){return!!i.useClass}(s)){const m=(s.useClass||s).prototype.ngOnDestroy;if(m){const v=i.destroyHooks||(i.destroyHooks=[]);if(!d&&s.multi){const C=v.indexOf(a);-1===C?v.push(a,[l,m]):v[C+1].push(l,m)}else v.push(a,m)}}}function im(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function Hr(i,s,a,l){for(let d=a;d<l;d++)if(s[d]===i)return d;return-1}function Bn(i,s,a,l){return Kl(this.multi,[])}function nD(i,s,a,l){const d=this.multi;let h;if(this.providerFactory){const m=this.providerFactory.componentProviders,v=Du(a,a[1],this.providerFactory.index,l);h=v.slice(0,m),Kl(d,h);for(let C=m;C<v.length;C++)h.push(v[C])}else h=[],Kl(d,h);return h}function Kl(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function p0(i,s=[]){return a=>{a.providersResolver=(l,d)=>function(i,s,a){const l=Pt();if(l.firstCreatePass){const d=ds(i);$y(a,l.data,l.blueprint,d,!0),$y(s,l.data,l.blueprint,d,!1)}}(l,d?d(i):i,s)}}class rD{}const sm="ngComponent";class iD{resolveComponentFactory(s){throw function(i){const s=Error(`No component factory found for ${te(i)}. Did you add it to @NgModule.entryComponents?`);return s[sm]=i,s}(s)}}let Od=(()=>{class i{}return i.NULL=new iD,i})();function Hy(...i){}function Fd(i,s){return new Ja(Ri(i,s))}const nN=function(){return Fd(bn(),Se())};let Ja=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=nN,i})();function Wu(i){return i instanceof Ja?i.nativeElement:i}class Gy{}let sD=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>aD(),i})();const aD=function(){const i=Se(),a=pi(bn().index,i);return function(i){return i[11]}(eo(a)?a:i)};let am=(()=>{class i{}return i.\u0275prov=zt({token:i,providedIn:"root",factory:()=>null}),i})();class qy{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const um=new qy("12.2.16");class Ld{constructor(){}supports(s){return jr(s)}create(s){return new lm(s)}}const Io=(i,s)=>s;class lm{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||Io}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,d=0,h=null;for(;a||l;){const m=!l||a&&a.currentIndex<y0(l,d,h)?a:l,v=y0(m,d,h),C=m.currentIndex;if(m===l)d--,l=l._nextRemoved;else if(a=a._next,null==m.previousIndex)d++;else{h||(h=[]);const T=v-d,x=C-d;if(T!=x){for(let L=0;L<T;L++){const q=L<h.length?h[L]:h[L]=0,X=q+L;x<=X&&X<T&&(h[L]=q+1)}h[m.previousIndex]=x-T}}v!==C&&s(m,v,C)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!jr(s))throw new Error(`Error trying to diff '${te(s)}'. Only arrays and iterables are allowed`);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d,h,m,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let v=0;v<this.length;v++)h=s[v],m=this._trackByFn(v,h),null!==a&&Object.is(a.trackById,m)?(l&&(a=this._verifyReinsertion(a,h,m,v)),Object.is(a.item,h)||this._addIdentityChange(a,h)):(a=this._mismatch(a,h,m,v),l=!0),a=a._next}else d=0,function(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[md()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,v=>{m=this._trackByFn(d,v),null!==a&&Object.is(a.trackById,m)?(l&&(a=this._verifyReinsertion(a,v,m,d)),Object.is(a.item,v)||this._addIdentityChange(a,v)):(a=this._mismatch(a,v,m,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,d){let h;return null===s?h=this._itTail:(h=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,h,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,h,d)):s=this._addAfter(new uD(a,l),h,d),s}_verifyReinsertion(s,a,l,d){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==h?s=this._reinsertAfter(h,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const d=s._prevRemoved,h=s._nextRemoved;return null===d?this._removalsHead=h:d._nextRemoved=h,null===h?this._removalsTail=d:h._prevRemoved=d,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const d=null===a?this._itHead:a._next;return s._next=d,s._prev=a,null===d?this._itTail=s:d._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new Wy),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Wy),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class uD{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class _0{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class Wy{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new _0,this.map.set(a,l)),l.add(s)}get(s,a){const d=this.map.get(s);return d?d.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function y0(i,s,a){const l=i.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+s+d}class v0{constructor(){}supports(s){return s instanceof Map||xg(s)}create(){return new sN}}class sN{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||xg(s)))throw new Error(`Error trying to diff '${te(s)}'. Only maps and objects are allowed`)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const h=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,h)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const d=this._records.get(s);this._maybeAddToChanges(d,a);const h=d._prev,m=d._next;return h&&(h._next=m),m&&(m._prev=h),d._next=null,d._prev=null,d}const l=new lD(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class lD{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function E0(){return new cm([new Ld])}let cm=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||E0()),deps:[[i,new go,new Ps]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new Error(`Cannot find a differ supporting object '${a}' of type '${function(i){return i.name||typeof i}(a)}'`)}}return i.\u0275prov=zt({token:i,providedIn:"root",factory:E0}),i})();function cD(){return new zy([new v0])}let zy=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||cD()),deps:[[i,new go,new Ps]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(l)return l;throw new Error(`Cannot find a differ supporting object '${a}'`)}}return i.\u0275prov=zt({token:i,providedIn:"root",factory:cD}),i})();function dm(i,s,a,l,d=!1){for(;null!==a;){const h=s[a.index];if(null!==h&&l.push(Qt(h)),un(h))for(let v=10;v<h.length;v++){const C=h[v],T=C[1].firstChild;null!==T&&dm(C[1],C,T,l)}const m=a.type;if(8&m)dm(i,s,a.child,l);else if(32&m){const v=NE(a,s);let C;for(;C=v();)l.push(C)}else if(16&m){const v=BE(s,a);if(Array.isArray(v))l.push(...v);else{const C=sg(s[16]);dm(C[1],C,v,l,!0)}}a=d?a.projectionNext:a.next}return l}class Xa{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return dm(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(un(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(Zt(s,l),yi(a,l))}this._attachedToViewContainer=!1}JC(this._lView[1],this._lView)}onDestroy(s){sf(this._lView[1],this._lView,null,s)}markForCheck(){q_(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){sw(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(i,s,a){ro(!0);try{sw(i,s,a)}finally{ro(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var s;this._appRef=null,Ml(this._lView[1],s=this._lView,s[11],2,null,null)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=s}}class Vd extends Xa{constructor(s){super(s),this._view=s}detectChanges(){PI(this._view)}checkNoChanges(){!function(i){ro(!0);try{PI(i)}finally{ro(!1)}}(this._view)}get context(){return null}}const hD=function(i){return function(i,s,a){if(ul(i)&&!a){const l=pi(i.index,s);return new Xa(l,l)}return 47&i.type?new Xa(s[16],s):null}(bn(),Se(),16==(16&i))};let kf=(()=>{class i{}return i.__NG_ELEMENT_ID__=hD,i})();const hm=[new v0],aN=new cm([new Ld]),Mr=new zy(hm),uN=function(){return Ql(bn(),Se())};let Ud=(()=>{class i{}return i.__NG_ELEMENT_ID__=uN,i})();const lN=Ud,gD=class extends lN{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s){const a=this._declarationTContainer.tViews,l=tf(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const h=this._declarationLView[19];return null!==h&&(l[19]=h.createEmbeddedView(a)),dd(a,l,s),new Xa(l)}};function Ql(i,s){return 4&i.type?new gD(s,i,Fd(i,s)):null}class Bs{}class b0{}const fm=function(){return Zu(bn(),Se())};let Pf=(()=>{class i{}return i.__NG_ELEMENT_ID__=fm,i})();const kr=Pf,on=class extends kr{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return Fd(this._hostTNode,this._hostLView)}get injector(){return new uo(this._hostTNode,this._hostLView)}get parentInjector(){const s=Vt(this._hostTNode,this._hostLView);if(Zc(s)){const a=Ra(s,this._hostLView),l=oo(s);return new uo(a[1].data[l+8],a)}return new uo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=C0(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){const d=s.createEmbeddedView(a||{});return this.insert(d,l),d}createComponent(s,a,l,d,h){const m=l||this.parentInjector;if(!h&&null==s.ngModule&&m){const C=m.get(Bs,null);C&&(h=C)}const v=s.create(m,d,void 0,h);return this.insert(v.hostView,a),v}insert(s,a){const l=s._lView,d=l[1];if(un(l[3])){const x=this.indexOf(s);if(-1!==x)this.detach(x);else{const k=l[3],L=new on(k,k[6],k[3]);L.detach(L.indexOf(s))}}const h=this._adjustIndex(a),m=this._lContainer;!function(i,s,a,l){const d=10+l,h=a.length;l>0&&(a[d-1][4]=s),l<h-10?(s[4]=a[d],_i(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const m=s[17];null!==m&&a!==m&&function(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(m,s);const v=s[19];null!==v&&v.insertView(i),s[2]|=128}(d,l,m,h);const v=jE(h,m),C=l[11],T=ag(C,m[7]);return null!==T&&function(i,s,a,l,d,h){l[0]=d,l[6]=s,Ml(i,l,a,1,d,h)}(d,m[6],C,l,T,v),s.attachToViewContainerRef(),_i(Yy(m),h,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=C0(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=Zt(this._lContainer,a);l&&(yi(Yy(this._lContainer),a),JC(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=Zt(this._lContainer,a);return l&&null!=yi(Yy(this._lContainer),a)?new Xa(l):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function C0(i){return i[8]}function Yy(i){return i[8]||(i[8]=[])}function Zu(i,s){let a;const l=s[i.index];if(un(l))a=l;else{let d;if(8&i.type)d=Qt(l);else{const h=s[11];d=h.createComment("");const m=Ri(i,s);od(h,ag(h,m),d,function(i,s){return Rn(i)?i.nextSibling(s):s.nextSibling}(h,m),!1)}s[i.index]=a=NI(l,s,d,i),Ig(s,a)}return new on(a,i,s)}const ru={};class Hf extends Od{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Dt(s);return new UD(a,this.ngModule)}}function ic(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}const VD=new An("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>GC});class UD extends rD{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=s.selectors.map(V_).join(","),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return ic(this.componentDef.inputs)}get outputs(){return ic(this.componentDef.outputs)}create(s,a,l,d){const h=(d=d||this.ngModule)?function(i,s){return{get:(a,l,d)=>{const h=i.get(a,ru,d);return h!==ru||l===ru?h:s.get(a,l,d)}}}(s,d.injector):s,m=h.get(Gy,Uo),v=h.get(am,null),C=m.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",x=l?function(i,s,a){if(Rn(i))return i.selectRootElement(s,a===qe.ShadowDom);let l="string"==typeof s?i.querySelector(s):s;return l.textContent="",l}(C,l,this.componentDef.encapsulation):PE(m.createRenderer(null,this.componentDef),T,function(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(T)),k=this.componentDef.onPush?576:528,L=function(i,s){return{components:[],scheduler:i||GC,clean:sR,playerHandler:s||null,flags:0}}(),q=$_(0,null,null,1,0,null,null,null,null,null),X=tf(null,q,L,k,null,null,m,C,v,h);let he,se;bu(X);try{const Fe=function(i,s,a,l,d,h){const m=a[1];a[20]=i;const C=cd(m,20,2,"#host",null),T=C.mergedAttrs=s.hostAttrs;null!==T&&(z_(C,T,!0),null!==i&&(Wc(d,i,T),null!==C.classes&&HE(d,i,C.classes),null!==C.styles&&kl(d,i,C.styles)));const x=l.createRenderer(i,s),k=tf(a,bI(s),null,s.onPush?64:16,a[20],C,l,x,h||null,null);return m.firstCreatePass&&(gr(zo(C,a),m,s.type),af(m,C),xI(C,a.length,1)),Ig(a,k),a[20]=k}(x,this.componentDef,X,m,C);if(x)if(l)Wc(C,x,["ng-version",um.full]);else{const{attrs:Ie,classes:ut}=function(i){const s=[],a=[];let l=1,d=2;for(;l<i.length;){let h=i[l];if("string"==typeof h)2===d?""!==h&&s.push(h,i[++l]):8===d&&a.push(h);else{if(!sa(d))break;d=h}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Ie&&Wc(C,x,Ie),ut&&ut.length>0&&HE(C,x,ut.join(" "))}if(se=kc(q,20),void 0!==a){const Ie=se.projection=[];for(let ut=0;ut<this.ngContentSelectors.length;ut++){const St=a[ut];Ie.push(null!=St?Array.from(St):null)}}he=function(i,s,a,l,d){const h=a[1],m=function(i,s,a){const l=bn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),RI(i,l,s,nf(i,s,1,null),a));const d=Du(s,i,l.directiveStart,l);vi(d,s);const h=Ri(l,s);return h&&vi(h,s),d}(h,a,s);if(l.components.push(m),i[8]=m,d&&d.forEach(C=>C(m,s)),s.contentQueries){const C=bn();s.contentQueries(1,m,C.directiveStart)}const v=bn();return!h.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(io(v.index),AI(a[1],v,0,v.directiveStart,v.directiveEnd,s),SI(s,m)),m}(Fe,this.componentDef,X,L,[ER]),dd(q,X,null)}finally{Wo()}return new ON(this.componentType,he,Fd(se,X),X,se)}}class ON extends class{}{constructor(s,a,l,d,h){super(),this.location=l,this._rootLView=d,this._tNode=h,this.instance=a,this.hostView=this.changeDetectorRef=new Vd(d),this.componentType=s}get injector(){return new uo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}const iu=new Map;class av extends Bs{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Hf(this);const l=Fn(s),d=s[Pe]||null;d&&_r(d),this._bootstrapComponents=na(l.bootstrap),this._r3Injector=fd(s,a,[{provide:Bs,useValue:this},{provide:Od,useValue:this.componentFactoryResolver}],te(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=nr.THROW_IF_NOT_FOUND,l=et.Default){return s===nr||s===Bs||s===hd?this:this._r3Injector.get(s,a,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class _m extends b0{constructor(s){super(),this.moduleType=s,null!==Fn(s)&&function(i){const s=new Set;!function a(l){const d=Fn(l,!0),h=d.id;null!==h&&(function(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${te(s)} vs ${te(s.name)}`)}(h,iu.get(h),l),iu.set(h,l));const m=na(d.imports);for(const v of m)s.has(v)||(s.add(v),a(v))}(i)}(s)}create(s){return new av(this.moduleType,s)}}function lv(i){return s=>{setTimeout(i,void 0,s)}}const Ro=class extends f.xQ{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){var d,h,m;let v=s,C=a||(()=>null),T=l;if(s&&"object"==typeof s){const k=s;v=null===(d=k.next)||void 0===d?void 0:d.bind(k),C=null===(h=k.error)||void 0===h?void 0:h.bind(k),T=null===(m=k.complete)||void 0===m?void 0:m.bind(k)}this.__isAsync&&(C=lv(C),v&&(v=lv(v)),T&&(T=lv(T)));const x=super.subscribe({next:v,error:C,complete:T});return s instanceof $.w&&s.add(x),x}};function K0(){return this._results[md()]()}class ac{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=md(),l=ac.prototype;l[a]||(l[a]=K0)}get changes(){return this._changes||(this._changes=new Ro)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const d=Pi(s);(this._changesDetected=!function(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let d=i[l],h=s[l];if(a&&(d=a(d),h=a(h)),h!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class vm{constructor(s){this.queryList=s,this.matches=null}clone(){return new vm(this.queryList)}setDirty(){this.queryList.setDirty()}}class dv{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,d=[];for(let h=0;h<l;h++){const m=a.getByIndex(h);d.push(this.queries[m.indexInDeclarationView].clone())}return new dv(d)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==gv(s,a).matches&&this.queries[a].setDirty()}}class QD{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class hv{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,h=this.getByIndex(l).embeddedTView(s,d);h&&(h.indexInDeclarationView=l,null!==a?a.push(h):a=[h])}return null!==a?new hv(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class fv{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new fv(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const h=l[d];this.matchTNodeWithReadOption(s,a,Q0(a,h)),this.matchTNodeWithReadOption(s,a,gi(a,s,h,!1,!1))}else l===Ud?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,gi(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===Ja||d===Pf||d===Ud&&4&a.type)this.addMatch(a.index,-2);else{const h=gi(a,s,d,!1,!1);null!==h&&this.addMatch(a.index,h)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function Q0(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function JD(i,s,a,l){return-1===a?function(i,s){return 11&i.type?Fd(i,s):4&i.type?Ql(i,s):null}(s,i):-2===a?function(i,s,a){return a===Ja?Fd(s,i):a===Ud?Ql(s,i):a===Pf?Zu(s,i):void 0}(i,s,l):Du(i,i[1],a,s)}function J0(i,s,a,l){const d=s[19].queries[l];if(null===d.matches){const h=i.data,m=a.matches,v=[];for(let C=0;C<m.length;C+=2){const T=m[C];v.push(T<0?null:JD(s,h[T],m[C+1],a.metadata.read))}d.matches=v}return d.matches}function X0(i,s,a,l){const d=i.queries.getByIndex(a),h=d.matches;if(null!==h){const m=J0(i,s,d,a);for(let v=0;v<h.length;v+=2){const C=h[v];if(C>0)l.push(m[v/2]);else{const T=h[v+1],x=s[-C];for(let k=10;k<x.length;k++){const L=x[k];L[17]===L[3]&&X0(L[1],L,T,l)}if(null!==x[9]){const k=x[9];for(let L=0;L<k.length;L++){const q=k[L];X0(q[1],q,T,l)}}}}}return l}function Kd(i){const s=Se(),a=Pt(),l=Sh();qo(l+1);const d=gv(a,l);if(i.dirty&&Ta(s)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const h=d.crossesNgTemplate?X0(a,s,l,[]):J0(a,s,d,l);i.reset(h,Wu),i.notifyOnChanges()}return!0}return!1}function pv(i,s,a,l){const d=Pt();if(d.firstCreatePass){const h=bn();(function(i,s,a){null===i.queries&&(i.queries=new hv),i.queries.track(new fv(s,a))})(d,new QD(s,a,l),h.index),function(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function(i,s,a){const l=new ac(4==(4&a));sf(i,s,l,l.destroy),null===s[19]&&(s[19]=new dv),s[19].queries.push(new vm(l))}(d,Se(),a)}function Em(){return i=Se(),s=Sh(),i[19].queries[s].queryList;var i,s}function gv(i,s){return i.queries.getByIndex(s)}const cc=new An("Application Initializer");let Jd=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Hy,this.reject=Hy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const h=this.appInits[d]();if(bd(h))a.push(h);else if(Lw(h)){const m=new Promise((v,C)=>{h.subscribe({complete:v,error:C})});a.push(m)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)($n(cc,8))},i.\u0275prov=zt({token:i,factory:i.\u0275fac}),i})();const Xd=new An("AppId"),iM={provide:Xd,useFactory:function(){return`${Dm()}${Dm()}${Dm()}`},deps:[]};function Dm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Iv=new An("Platform Initializer"),Tv=new An("Platform ID"),Dv=new An("appBootstrapListener");let EA=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=zt({token:i,factory:i.\u0275fac}),i})();const tp=new An("LocaleId"),Av=new An("DefaultCurrencyCode");class bA{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}const _b=function(i){return new _m(i)},aM=_b,yb=function(i){return Promise.resolve(_b(i))},Sv=function(i){const s=_b(i),l=na(Fn(i).declarations).reduce((d,h)=>{const m=Dt(h);return m&&d.push(new UD(m)),d},[]);return new bA(s,l)},uM=Sv,vb=function(i){return Promise.resolve(Sv(i))};let np=(()=>{class i{constructor(){this.compileModuleSync=aM,this.compileModuleAsync=yb,this.compileModuleAndAllComponentsSync=uM,this.compileModuleAndAllComponentsAsync=vb}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=zt({token:i,factory:i.\u0275fac}),i})();const dM=(()=>Promise.resolve(0))();function Sm(i){"undefined"==typeof Zone?dM.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class os{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ro(!1),this.onMicrotaskEmpty=new Ro(!1),this.onStable=new Ro(!1),this.onError=new Ro(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function(){let i=vt.requestAnimationFrame,s=vt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function(i){const s=()=>{!function(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(vt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,dc(i),i.isCheckStableRunning=!0,xm(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),dc(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,h,m,v)=>{try{return Cb(i),a.invokeTask(d,h,m,v)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||i.shouldCoalesceRunChangeDetection)&&s(),xv(i)}},onInvoke:(a,l,d,h,m,v,C)=>{try{return Cb(i),a.invoke(d,h,m,v,C)}finally{i.shouldCoalesceRunChangeDetection&&s(),xv(i)}},onHasTask:(a,l,d,h)=>{a.hasTask(d,h),l===d&&("microTask"==h.change?(i._hasPendingMicrotasks=h.microTask,dc(i),xm(i)):"macroTask"==h.change&&(i.hasPendingMacrotasks=h.macroTask))},onHandleError:(a,l,d,h)=>(a.handleError(d,h),i.runOutsideAngular(()=>i.onError.emit(h)),!1)})}(d)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!os.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(os.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,d){const h=this._inner,m=h.scheduleEventTask("NgZoneEvent: "+d,s,fM,Hy,Hy);try{return h.runTask(m,a,l)}finally{h.cancelTask(m)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const fM={};function xm(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function dc(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Cb(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function xv(i){i._nesting--,xm(i)}class pM{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ro,this.onMicrotaskEmpty=new Ro,this.onStable=new Ro,this.onError=new Ro}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,d){return s.apply(a,l)}}let Rv=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{os.assertNotInAngularZone(),Sm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Sm(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let h=-1;l&&l>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==h),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:h,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,d){return[]}}return i.\u0275fac=function(a){return new(a||i)($n(os))},i.\u0275prov=zt({token:i,factory:i.\u0275fac}),i})(),su=(()=>{class i{constructor(){this._applications=new Map,Rm.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return Rm.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=zt({token:i,factory:i.\u0275fac}),i})();class Ib{addToWindow(s){}findTestabilityInTree(s,a,l){return null}}function gM(i){Rm=i}let Rm=new Ib,DA=!0,AA=!1;function Nm(){return AA=!0,DA}function mM(){if(AA)throw new Error("Cannot enable prod mode after platform setup.");DA=!1}let $s;const Nv=new An("AllowMultipleToken");class EM{constructor(s,a){this.name=s,this.token=a}}function Mv(i,s,a=[]){const l=`Platform: ${s}`,d=new An(l);return(h=[])=>{let m=Sb();if(!m||m.injector.get(Nv,!1))if(i)i(a.concat(h).concat({provide:d,useValue:!0}));else{const v=a.concat(h).concat({provide:d,useValue:!0},{provide:Tg,useValue:"platform"});!function(i){if($s&&!$s.destroyed&&!$s.injector.get(Nv,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");$s=i.get(xb);const s=i.get(Iv,null);s&&s.forEach(a=>a())}(nr.create({providers:v,name:l}))}return function(i){const s=Sb();if(!s)throw new Error("No platform exists!");if(!s.injector.get(i,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return s}(d)}}function Sb(){return $s&&!$s.destroyed?$s:null}let xb=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const v=function(i,s){let a;return a="noop"===i?new pM:("zone.js"===i?void 0:i)||new os({enableLongStackTrace:Nm(),shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),C=[{provide:os,useValue:v}];return v.run(()=>{const T=nr.create({providers:C,parent:this.injector,name:a.moduleType.name}),x=a.create(T),k=x.injector.get(yo,null);if(!k)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return v.runOutsideAngular(()=>{const L=v.onError.subscribe({next:q=>{k.handleError(q)}});x.onDestroy(()=>{Mb(this._modules,x),L.unsubscribe()})}),function(i,s,a){try{const l=a();return bd(l)?l.catch(d=>{throw s.runOutsideAngular(()=>i.handleError(d)),d}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(k,v,()=>{const L=x.injector.get(Jd);return L.runInitializers(),L.donePromise.then(()=>(_r(x.injector.get(tp,Qg)||Qg),this._moduleDoBootstrap(x),x))})})}bootstrapModule(a,l=[]){const d=Nb({},l);return function(i,s,a){const l=new _m(a);return Promise.resolve(l)}(0,0,a).then(h=>this.bootstrapModuleFactory(h,d))}_moduleDoBootstrap(a){const l=a.injector.get(hc);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Error(`The module ${te(a.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)($n(nr))},i.\u0275prov=zt({token:i,factory:i.\u0275fac}),i})();function Nb(i,s){return Array.isArray(s)?s.reduce(Nb,i):Object.assign(Object.assign({},i),s)}let hc=(()=>{class i{constructor(a,l,d,h,m){this._zone=a,this._injector=l,this._exceptionHandler=d,this._componentFactoryResolver=h,this._initStatus=m,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new O.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),C=new O.y(T=>{let x;this._zone.runOutsideAngular(()=>{x=this._zone.onStable.subscribe(()=>{os.assertNotInAngularZone(),Sm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const k=this._zone.onUnstable.subscribe(()=>{os.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{x.unsubscribe(),k.unsubscribe()}});this.isStable=(0,ae.T)(v,C.pipe((0,ce.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let d;d=a instanceof rD?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(d.componentType);const h=function(i){return i.isBoundToModule}(d)?void 0:this._injector.get(Bs),v=d.create(nr.NULL,[],l||d.selector,h),C=v.location.nativeElement,T=v.injector.get(Rv,null),x=T&&v.injector.get(su);return T&&x&&x.registerApplication(C,T),v.onDestroy(()=>{this.detachView(v.hostView),Mb(this.components,v),x&&x.unregisterApplication(C)}),this._loadComponent(v),v}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Mb(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Dv,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)($n(os),$n(nr),$n(yo),$n(Od),$n(Jd))},i.\u0275prov=zt({token:i,factory:i.\u0275fac}),i})();function Mb(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}class CM{}class Ov{}const Pb={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let PA=(()=>{class i{constructor(a,l){this._compiler=a,this._config=l||Pb}load(a){return this.loadAndCompile(a)}loadAndCompile(a){let[l,d]=a.split("#");return void 0===d&&(d="default"),V(8255)(l).then(h=>h[d]).then(h=>Fv(h,l,d)).then(h=>this._compiler.compileModuleAsync(h))}loadFactory(a){let[l,d]=a.split("#"),h="NgFactory";return void 0===d&&(d="default",h=""),V(8255)(this._config.factoryPathPrefix+l+this._config.factoryPathSuffix).then(m=>m[d+h]).then(m=>Fv(m,l,d))}}return i.\u0275fac=function(a){return new(a||i)($n(np),$n(Ov,8))},i.\u0275prov=zt({token:i,factory:i.\u0275fac}),i})();function Fv(i,s,a){if(!i)throw new Error(`Cannot find '${a}' in '${s}'`);return i}const Wn=function(i){return null},BA=Mv(null,"core",[{provide:Tv,useValue:"unknown"},{provide:xb,deps:[nr]},{provide:su,deps:[]},{provide:EA,deps:[]}]),r1=[{provide:hc,useClass:hc,deps:[os,nr,yo,Od,Jd]},{provide:VD,deps:[os],useFactory:function(i){let s=[];return i.onStable.subscribe(()=>{for(;s.length;)s.pop()()}),function(a){s.push(a)}}},{provide:Jd,useClass:Jd,deps:[[new Ps,cc]]},{provide:np,useClass:np,deps:[]},iM,{provide:cm,useFactory:function(){return aN},deps:[]},{provide:zy,useFactory:function(){return Mr},deps:[]},{provide:tp,useFactory:function(i){return _r(i=i||"undefined"!=typeof $localize&&$localize.locale||Qg),i},deps:[[new Ua(tp),new Ps,new go]]},{provide:Av,useValue:"USD"}];let Pr=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)($n(hc))},i.\u0275mod=K({type:i}),i.\u0275inj=Tn({providers:r1}),i})()},8939:(Je,Ee,V)=>{"use strict";V.d(Ee,{hO:()=>le,xv:()=>oe,Dh:()=>te,GT:()=>ne,cc:()=>pe,on:()=>U,pX:()=>ce});var f=V(7716),$=V(7841),O=V(2871);Je=V.hmd(Je);const ae=["ngOnDestroy"],ce=(fe,De,Re,Xe={})=>new Proxy(fe,{get:(ht,Wt)=>Re.runOutsideAngular(()=>{var Ft;if(fe[Wt])return(null===(Ft=null==Xe?void 0:Xe.spy)||void 0===Ft?void 0:Ft.get)&&Xe.spy.get(Wt,fe[Wt]),fe[Wt];if(ae.indexOf(Wt)>-1)return()=>{};const Et=De.toPromise().then(Oe=>{const Le=Oe&&Oe[Wt];return"function"==typeof Le?Le.bind(Oe):Le&&Le.then?Le.then(je=>Re.run(()=>je)):Re.run(()=>Le)});return new Proxy(()=>{},{get:(Oe,Le)=>Et[Le],apply:(Oe,Le,je)=>Et.then(_t=>{var rt;const wt=_t&&_t(...je);return(null===(rt=null==Xe?void 0:Xe.spy)||void 0===rt?void 0:rt.apply)&&Xe.spy.apply(Wt,je,wt),wt})})})}),ne=(fe,De)=>{De.forEach(Re=>{Object.getOwnPropertyNames(Re.prototype||Re).forEach(Xe=>{Object.defineProperty(fe.prototype,Xe,Object.getOwnPropertyDescriptor(Re.prototype||Re,Xe))})})};class be{constructor(De){return De}}const te=new f.OlP("angularfire2.app.options"),oe=new f.OlP("angularfire2.app.name");function U(fe,De,Re){const ht="object"==typeof Re&&Re||{};ht.name=ht.name||"string"==typeof Re&&Re||"[DEFAULT]";const Ft=$.Z.apps.filter(Et=>Et&&Et.name===ht.name)[0]||De.runOutsideAngular(()=>$.Z.initializeApp(fe,ht));try{JSON.stringify(fe)!==JSON.stringify(Ft.options)&&H("error",`${Ft.name} Firebase App already initialized with different options${Je.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Et){}return new be(Ft)}const H=(fe,...De)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[fe](...De)},W={provide:be,useFactory:U,deps:[te,f.R0b,[new f.FiY,oe]]};let le=(()=>{class fe{constructor(Re){$.Z.registerVersion("angularfire",O.q4.full,"core"),$.Z.registerVersion("angularfire",O.q4.full,"app-compat"),$.Z.registerVersion("angular",f.q4F.full,Re.toString())}static initializeApp(Re,Xe){return{ngModule:fe,providers:[{provide:te,useValue:Re},{provide:oe,useValue:Xe}]}}}return fe.\u0275fac=function(Re){return new(Re||fe)(f.LFG(f.Lbi))},fe.\u0275mod=f.oAB({type:fe}),fe.\u0275inj=f.cJS({providers:[W]}),fe})();function pe(fe,De,Re,Xe,ht){const[,Wt,Ft]=globalThis.\u0275AngularfireInstanceCache.find(Et=>Et[0]===fe)||[];if(Wt)return function(fe,De){try{return fe.toString()===De.toString()}catch(Re){return fe===De}}(ht,Ft)||(Be("error",`${De} was already initialized on the ${Re} Firebase App with different settings.${we?" You may need to reload as Firebase is not HMR aware.":""}`),Be("warn",{is:ht,was:Ft})),Wt;{const Et=Xe();return globalThis.\u0275AngularfireInstanceCache.push([fe,Et,ht]),Et}}const we=!!Je.hot,Be=(fe,...De)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[fe](...De)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2871:(Je,Ee,V)=>{"use strict";V.d(Ee,{q4:()=>Lh,iC:()=>Fa,fc:()=>Uh,HU:()=>Vh,vb:()=>_i,JM:()=>Nn});var f=V(7716),$=V(2329),O=V(8239),ae=V(8026),ce=V(3854),ne=V(3910),be=V(5422),te=V(4544);const oe="@firebase/installations",U="0.5.9",W=`w:${U}`,le="FIS_v2",De=new ce.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Re(I){return I instanceof ce.ZR&&I.code.includes("request-failed")}function Xe({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function ht(I){return{token:I.token,requestStatus:2,expiresIn:_t(I.expiresIn),creationTime:Date.now()}}function Wt(I,A){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,O.Z)(function*(I,A){const j=(yield A.json()).error;return De.create("request-failed",{requestName:I,serverCode:j.code,serverMessage:j.message,serverStatus:j.status})})).apply(this,arguments)}function Et({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function Oe(I,{refreshToken:A}){const M=Et(I);return M.append("Authorization",function(I){return`${le} ${I}`}(A)),M}function Le(I){return je.apply(this,arguments)}function je(){return(je=(0,O.Z)(function*(I){const A=yield I();return A.status>=500&&A.status<600?I():A})).apply(this,arguments)}function _t(I){return Number(I.replace("s","000"))}function wt(I,A){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:A},{fid:M}){const j=Xe(I),re=Et(I),ue=A.getImmediate({optional:!0});if(ue){const ct=yield ue.getHeartbeatsHeader();ct&&re.append("x-firebase-client",ct)}const Qe={method:"POST",headers:re,body:JSON.stringify({fid:M,authVersion:le,appId:I.appId,sdkVersion:W})},gt=yield Le(()=>fetch(j,Qe));if(gt.ok){const ct=yield gt.json();return{fid:ct.fid||M,registrationStatus:2,refreshToken:ct.refreshToken,authToken:ht(ct.authToken)}}throw yield Wt("Create Installation",gt)})).apply(this,arguments)}function Fr(I){return new Promise(A=>{setTimeout(A,I)})}const Wi=/^[cdef][\w-]{21}$/;function kn(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const M=function(I){return function(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return Wi.test(M)?M:""}catch(I){return""}}function zr(I){return`${I.appName}!${I.appId}`}const Zi=new Map;function ls(I,A){const M=zr(I);Tn(M,A),function(I,A){const M=(!gn&&"BroadcastChannel"in self&&(gn=new BroadcastChannel("[Firebase] FID Change"),gn.onmessage=I=>{Tn(I.data.key,I.data.fid)}),gn);M&&M.postMessage({key:I,fid:A}),0===Zi.size&&gn&&(gn.close(),gn=null)}(M,A)}function Tn(I,A){const M=Zi.get(I);if(M)for(const j of M)j(A)}let gn=null;const ke="firebase-installations-store";let Kn=null;function hr(){return Kn||(Kn=(0,te.X3)("firebase-installations-database",1,{upgrade:(I,A)=>{switch(A){case 0:I.createObjectStore(ke)}}})),Kn}function et(I,A){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,O.Z)(function*(I,A){const M=zr(I),re=(yield hr()).transaction(ke,"readwrite"),ue=re.objectStore(ke),Ne=yield ue.get(M);return yield ue.put(A,M),yield re.done,(!Ne||Ne.fid!==A.fid)&&ls(I,A.fid),A})).apply(this,arguments)}function Dn(I){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,O.Z)(function*(I){const A=zr(I),j=(yield hr()).transaction(ke,"readwrite");yield j.objectStore(ke).delete(A),yield j.done})).apply(this,arguments)}function Qn(I,A){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,O.Z)(function*(I,A){const M=zr(I),re=(yield hr()).transaction(ke,"readwrite"),ue=re.objectStore(ke),Ne=yield ue.get(M),Qe=A(Ne);return void 0===Qe?yield ue.delete(M):yield ue.put(Qe,M),yield re.done,Qe&&(!Ne||Ne.fid!==Qe.fid)&&ls(I,Qe.fid),Qe})).apply(this,arguments)}function Pn(I){return _n.apply(this,arguments)}function _n(){return(_n=(0,O.Z)(function*(I){let A;const M=yield Qn(I.appConfig,j=>{const re=Po(j),ue=cn(I,re);return A=ue.registrationPromise,ue.installationEntry});return""===M.fid?{installationEntry:yield A}:{installationEntry:M,registrationPromise:A}})).apply(this,arguments)}function Po(I){return vt(I||{fid:kn(),registrationStatus:0})}function cn(I,A){if(0===A.registrationStatus){if(!navigator.onLine)return{installationEntry:A,registrationPromise:Promise.reject(De.create("app-offline"))};const M={fid:A.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:M,registrationPromise:function(I,A){return ot.apply(this,arguments)}(I,M)}}return 1===A.registrationStatus?{installationEntry:A,registrationPromise:cs(I)}:{installationEntry:A}}function ot(){return(ot=(0,O.Z)(function*(I,A){try{const M=yield wt(I,A);return et(I.appConfig,M)}catch(M){throw Re(M)&&409===M.customData.serverCode?yield Dn(I.appConfig):yield et(I.appConfig,{fid:A.fid,registrationStatus:0}),M}})).apply(this,arguments)}function cs(I){return li.apply(this,arguments)}function li(){return(li=(0,O.Z)(function*(I){let A=yield Yt(I.appConfig);for(;1===A.registrationStatus;)yield Fr(100),A=yield Yt(I.appConfig);if(0===A.registrationStatus){const{installationEntry:M,registrationPromise:j}=yield Pn(I);return j||M}return A})).apply(this,arguments)}function Yt(I){return Qn(I,A=>{if(!A)throw De.create("installation-not-found");return vt(A)})}function vt(I){return function(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function jn(I,A){return z.apply(this,arguments)}function z(){return(z=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:A},M){const j=G(I,M),re=Oe(I,M),ue=A.getImmediate({optional:!0});if(ue){const ct=yield ue.getHeartbeatsHeader();ct&&re.append("x-firebase-client",ct)}const Qe={method:"POST",headers:re,body:JSON.stringify({installation:{sdkVersion:W,appId:I.appId}})},gt=yield Le(()=>fetch(j,Qe));if(gt.ok)return ht(yield gt.json());throw yield Wt("Generate Auth Token",gt)})).apply(this,arguments)}function G(I,{fid:A}){return`${Xe(I)}/${A}/authTokens:generate`}function Q(I){return ve.apply(this,arguments)}function ve(){return(ve=(0,O.Z)(function*(I,A=!1){let M;const j=yield Qn(I.appConfig,ue=>{if(!xt(ue))throw De.create("not-registered");const Ne=ue.authToken;if(!A&&yn(Ne))return ue;if(1===Ne.requestStatus)return M=Z(I,A),ue;{if(!navigator.onLine)throw De.create("app-offline");const Qe=fr(ue);return M=Ze(I,Qe),Qe}});return M?yield M:j.authToken})).apply(this,arguments)}function Z(I,A){return ie.apply(this,arguments)}function ie(){return(ie=(0,O.Z)(function*(I,A){let M=yield Pe(I.appConfig);for(;1===M.authToken.requestStatus;)yield Fr(100),M=yield Pe(I.appConfig);const j=M.authToken;return 0===j.requestStatus?Q(I,A):j})).apply(this,arguments)}function Pe(I){return Qn(I,A=>{if(!xt(A))throw De.create("not-registered");return function(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(A.authToken)?Object.assign(Object.assign({},A),{authToken:{requestStatus:0}}):A})}function Ze(I,A){return ft.apply(this,arguments)}function ft(){return(ft=(0,O.Z)(function*(I,A){try{const M=yield jn(I,A),j=Object.assign(Object.assign({},A),{authToken:M});return yield et(I.appConfig,j),M}catch(M){if(!Re(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const j=Object.assign(Object.assign({},A),{authToken:{requestStatus:0}});yield et(I.appConfig,j)}else yield Dn(I.appConfig);throw M}})).apply(this,arguments)}function xt(I){return void 0!==I&&2===I.registrationStatus}function yn(I){return 2===I.requestStatus&&!function(I){const A=Date.now();return A<I.creationTime||I.creationTime+I.expiresIn<A+36e5}(I)}function fr(I){const A={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:A})}function K(){return(K=(0,O.Z)(function*(I){const A=I,{installationEntry:M,registrationPromise:j}=yield Pn(A);return j?j.catch(console.error):Q(A).catch(console.error),M.fid})).apply(this,arguments)}function $e(){return($e=(0,O.Z)(function*(I,A=!1){const M=I;return yield Nt(M),(yield Q(M,A)).token})).apply(this,arguments)}function Nt(I){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,O.Z)(function*(I){const{registrationPromise:A}=yield Pn(I);A&&(yield A)})).apply(this,arguments)}function vn(I){return De.create("missing-app-config-values",{valueName:I})}const Qr="installations";(0,ae._registerComponent)(new ne.wA(Qr,I=>{const A=I.getProvider("app").getImmediate();return{app:A,appConfig:function(I){if(!I||!I.options)throw vn("App Configuration");if(!I.name)throw vn("App Name");const A=["projectId","apiKey","appId"];for(const M of A)if(!I.options[M])throw vn(M);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(A),heartbeatServiceProvider:(0,ae._getProvider)(A,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,ae._registerComponent)(new ne.wA("installations-internal",I=>{const A=I.getProvider("app").getImmediate(),M=(0,ae._getProvider)(A,Qr).getImmediate();return{getId:()=>function(I){return K.apply(this,arguments)}(M),getToken:re=>function(I){return $e.apply(this,arguments)}(M,re)}},"PRIVATE")),(0,ae.registerVersion)(oe,U),(0,ae.registerVersion)(oe,U,"esm2017");const di="@firebase/remote-config",br=new ce.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class pu{constructor(A,M,j,re){this.client=A,this.storage=M,this.storageCache=j,this.logger=re}isCachedDataFresh(A,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const j=Date.now()-M,re=j<=A;return this.logger.debug(`Config fetch cache check. Cache age millis: ${j}. Cache max age millis (minimumFetchIntervalMillis setting): ${A}. Is cache hit: ${re}.`),re}fetch(A){var M=this;return(0,O.Z)(function*(){const[j,re]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(re&&M.isCachedDataFresh(A.cacheMaxAgeMillis,j))return re;A.eTag=re&&re.eTag;const ue=yield M.client.fetch(A),Ne=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ue.status&&Ne.push(M.storage.setLastSuccessfulFetchResponse(ue)),yield Promise.all(Ne),ue})()}}function ds(I=navigator){return I.languages&&I.languages[0]||I.language}class xi{constructor(A,M,j,re,ue,Ne){this.firebaseInstallations=A,this.sdkVersion=M,this.namespace=j,this.projectId=re,this.apiKey=ue,this.appId=Ne}fetch(A){var M=this;return(0,O.Z)(function*(){const[j,re]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),Ne=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,Qe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":A.eTag||"*"},gt={sdk_version:M.sdkVersion,app_instance_id:j,app_instance_id_token:re,app_id:M.appId,language_code:ds()},ct={method:"POST",headers:Qe,body:JSON.stringify(gt)},Gt=fetch(Ne,ct),Ct=new Promise((ps,gs)=>{A.signal.addEventListener(()=>{const Ji=new Error("The operation was aborted.");Ji.name="AbortError",gs(Ji)})});let Oi;try{yield Promise.race([Gt,Ct]),Oi=yield Gt}catch(ps){let gs="fetch-client-network";throw"AbortError"===ps.name&&(gs="fetch-timeout"),br.create(gs,{originalErrorMessage:ps.message})}let tr=Oi.status;const Su=Oi.headers.get("ETag")||void 0;let La,Dl;if(200===Oi.status){let ps;try{ps=yield Oi.json()}catch(gs){throw br.create("fetch-client-parse",{originalErrorMessage:gs.message})}La=ps.entries,Dl=ps.state}if("INSTANCE_STATE_UNSPECIFIED"===Dl?tr=500:"NO_CHANGE"===Dl?tr=304:("NO_TEMPLATE"===Dl||"EMPTY_CONFIG"===Dl)&&(La={}),304!==tr&&200!==tr)throw br.create("fetch-status",{httpStatus:tr});return{status:tr,eTag:Su,config:La}})()}}class mh{constructor(A,M){this.client=A,this.storage=M}fetch(A){var M=this;return(0,O.Z)(function*(){const j=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(A,j)})()}attemptFetch(A,{throttleEndTimeMillis:M,backoffCount:j}){var re=this;return(0,O.Z)(function*(){yield function(I,A){return new Promise((M,j)=>{const re=Math.max(A-Date.now(),0),ue=setTimeout(M,re);I.addEventListener(()=>{clearTimeout(ue),j(br.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}(A.signal,M);try{const ue=yield re.client.fetch(A);return yield re.storage.deleteThrottleMetadata(),ue}catch(ue){if(!function(I){if(!(I instanceof ce.ZR&&I.customData))return!1;const A=Number(I.customData.httpStatus);return 429===A||500===A||503===A||504===A}(ue))throw ue;const Ne={throttleEndTimeMillis:Date.now()+(0,ce.$s)(j),backoffCount:j+1};return yield re.storage.setThrottleMetadata(Ne),re.attemptFetch(A,Ne)}})()}}class yh{constructor(A,M,j,re,ue){this.app=A,this._client=M,this._storageCache=j,this._storage=re,this._logger=ue,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Dc(I,A){const M=I.target.error||void 0;return br.create(A,{originalErrorMessage:M&&M.message})}const to="app_namespace_store";class Eh{constructor(A,M,j,re=function(){return new Promise((I,A)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=j=>{A(Dc(j,"storage-open"))},M.onsuccess=j=>{I(j.target.result)},M.onupgradeneeded=j=>{const re=j.target.result;switch(j.oldVersion){case 0:re.createObjectStore(to,{keyPath:"compositeKey"})}}}catch(M){A(br.create("storage-open",{originalErrorMessage:M}))}})}()){this.appId=A,this.appName=M,this.namespace=j,this.openDbPromise=re}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(A){return this.set("last_fetch_status",A)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(A){return this.set("last_successful_fetch_timestamp_millis",A)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(A){return this.set("last_successful_fetch_response",A)}getActiveConfig(){return this.get("active_config")}setActiveConfig(A){return this.set("active_config",A)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(A){return this.set("active_config_etag",A)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(A){return this.set("throttle_metadata",A)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(A){var M=this;return(0,O.Z)(function*(){const j=yield M.openDbPromise;return new Promise((re,ue)=>{const Qe=j.transaction([to],"readonly").objectStore(to),gt=M.createCompositeKey(A);try{const ct=Qe.get(gt);ct.onerror=Gt=>{ue(Dc(Gt,"storage-get"))},ct.onsuccess=Gt=>{const Ct=Gt.target.result;re(Ct?Ct.value:void 0)}}catch(ct){ue(br.create("storage-get",{originalErrorMessage:ct&&ct.message}))}})})()}set(A,M){var j=this;return(0,O.Z)(function*(){const re=yield j.openDbPromise;return new Promise((ue,Ne)=>{const gt=re.transaction([to],"readwrite").objectStore(to),ct=j.createCompositeKey(A);try{const Gt=gt.put({compositeKey:ct,value:M});Gt.onerror=Ct=>{Ne(Dc(Ct,"storage-set"))},Gt.onsuccess=()=>{ue()}}catch(Gt){Ne(br.create("storage-set",{originalErrorMessage:Gt&&Gt.message}))}})})()}delete(A){var M=this;return(0,O.Z)(function*(){const j=yield M.openDbPromise;return new Promise((re,ue)=>{const Qe=j.transaction([to],"readwrite").objectStore(to),gt=M.createCompositeKey(A);try{const ct=Qe.delete(gt);ct.onerror=Gt=>{ue(Dc(Gt,"storage-delete"))},ct.onsuccess=()=>{re()}}catch(ct){ue(br.create("storage-delete",{originalErrorMessage:ct&&ct.message}))}})})()}createCompositeKey(A){return[this.appId,this.appName,this.namespace,A].join()}}class o_{constructor(A){this.storage=A}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var A=this;return(0,O.Z)(function*(){const M=A.storage.getLastFetchStatus(),j=A.storage.getLastSuccessfulFetchTimestampMillis(),re=A.storage.getActiveConfig(),ue=yield M;ue&&(A.lastFetchStatus=ue);const Ne=yield j;Ne&&(A.lastSuccessfulFetchTimestampMillis=Ne);const Qe=yield re;Qe&&(A.activeConfig=Qe)})()}setLastFetchStatus(A){return this.lastFetchStatus=A,this.storage.setLastFetchStatus(A)}setLastSuccessfulFetchTimestampMillis(A){return this.lastSuccessfulFetchTimestampMillis=A,this.storage.setLastSuccessfulFetchTimestampMillis(A)}setActiveConfig(A){return this.activeConfig=A,this.storage.setActiveConfig(A)}}function bp(){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,O.Z)(function*(){if(!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch(I){return!1}})).apply(this,arguments)}(0,ae._registerComponent)(new ne.wA("remote-config",function(A,{instanceIdentifier:M}){const j=A.getProvider("app").getImmediate(),re=A.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw br.create("registration-window");if(!(0,ce.hl)())throw br.create("indexed-db-unavailable");const{projectId:ue,apiKey:Ne,appId:Qe}=j.options;if(!ue)throw br.create("registration-project-id");if(!Ne)throw br.create("registration-api-key");if(!Qe)throw br.create("registration-app-id");const gt=new Eh(Qe,j.name,M=M||"firebase"),ct=new o_(gt),Gt=new be.Yd(di);Gt.logLevel=be.in.ERROR;const Ct=new xi(re,ae.SDK_VERSION,M,ue,Ne,Qe),Oi=new mh(Ct,gt),tr=new pu(Oi,gt,ct,Gt),Su=new yh(j,tr,ct,gt,Gt);return function(I){const A=(0,ce.m9)(I);A._initializePromise||(A._initializePromise=A._storageCache.loadFromStorage().then(()=>{A._isInitializationComplete=!0}))}(Su),Su},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(di,"0.3.8"),(0,ae.registerVersion)(di,"0.3.8","esm2017");const Sc="/firebase-messaging-sw.js",bh="/firebase-cloud-messaging-push-scope",xc="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",no="google.c.a.c_id",Rc="google.c.a.c_l",Fo="google.c.a.ts",zi="google.c.a.e";var wa=(()=>{return(I=wa||(wa={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",wa;var I})();function ar(I){const A=new Uint8Array(I);return btoa(String.fromCharCode(...A)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Cp(I){const M=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),j=atob(M),re=new Uint8Array(j.length);for(let ue=0;ue<j.length;++ue)re[ue]=j.charCodeAt(ue);return re}const ba="fcm_token_details_db",Nc="fcm_token_object_Store";function Ki(I){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,O.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ue=>ue.name).includes(ba))return null;let A=null;return(yield(0,te.X3)(ba,5,{upgrade:(j=(0,O.Z)(function*(re,ue,Ne,Qe){var gt;if(ue<2||!re.objectStoreNames.contains(Nc))return;const ct=Qe.objectStore(Nc),Gt=yield ct.index("fcmSenderId").get(I);if(yield ct.clear(),Gt)if(2===ue){const Ct=Gt;if(!Ct.auth||!Ct.p256dh||!Ct.endpoint)return;A={token:Ct.fcmToken,createTime:null!==(gt=Ct.createTime)&&void 0!==gt?gt:Date.now(),subscriptionOptions:{auth:Ct.auth,p256dh:Ct.p256dh,endpoint:Ct.endpoint,swScope:Ct.swScope,vapidKey:"string"==typeof Ct.vapidKey?Ct.vapidKey:ar(Ct.vapidKey)}}}else if(3===ue){const Ct=Gt;A={token:Ct.fcmToken,createTime:Ct.createTime,subscriptionOptions:{auth:ar(Ct.auth),p256dh:ar(Ct.p256dh),endpoint:Ct.endpoint,swScope:Ct.swScope,vapidKey:ar(Ct.vapidKey)}}}else if(4===ue){const Ct=Gt;A={token:Ct.fcmToken,createTime:Ct.createTime,subscriptionOptions:{auth:ar(Ct.auth),p256dh:ar(Ct.p256dh),endpoint:Ct.endpoint,swScope:Ct.swScope,vapidKey:ar(Ct.vapidKey)}}}}),function(ue,Ne,Qe,gt){return j.apply(this,arguments)})})).close(),yield(0,te.Lj)(ba),yield(0,te.Lj)("fcm_vapid_details_db"),yield(0,te.Lj)("undefined"),Th(A)?A:null;var j})).apply(this,arguments)}function Th(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:A}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof A.auth&&A.auth.length>0&&"string"==typeof A.p256dh&&A.p256dh.length>0&&"string"==typeof A.endpoint&&A.endpoint.length>0&&"string"==typeof A.swScope&&A.swScope.length>0&&"string"==typeof A.vapidKey&&A.vapidKey.length>0}const Jr="firebase-messaging-store";let Dh=null;function Rn(){return Dh||(Dh=(0,te.X3)("firebase-messaging-database",1,{upgrade:(I,A)=>{switch(A){case 0:I.createObjectStore(Jr)}}})),Dh}function Vo(I){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,O.Z)(function*(I){const A=Ia(I),j=yield(yield Rn()).transaction(Jr).objectStore(Jr).get(A);if(j)return j;{const re=yield Ki(I.appConfig.senderId);if(re)return yield gu(I,re),re}})).apply(this,arguments)}function gu(I,A){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,O.Z)(function*(I,A){const M=Ia(I),re=(yield Rn()).transaction(Jr,"readwrite");return yield re.objectStore(Jr).put(A,M),yield re.done,A})).apply(this,arguments)}function Ca(I){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,O.Z)(function*(I){const A=Ia(I),j=(yield Rn()).transaction(Jr,"readwrite");yield j.objectStore(Jr).delete(A),yield j.done})).apply(this,arguments)}function Ia({appConfig:I}){return I.appId}const ur=new ce.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function kc(I,A){return fi.apply(this,arguments)}function fi(){return(fi=(0,O.Z)(function*(I,A){const M=yield Lr(I),j=bt(A),re={method:"POST",headers:M,body:JSON.stringify(j)};let ue;try{ue=yield(yield fetch(Yi(I.appConfig),re)).json()}catch(Ne){throw ur.create("token-subscribe-failed",{errorInfo:Ne})}if(ue.error)throw ur.create("token-subscribe-failed",{errorInfo:ue.error.message});if(!ue.token)throw ur.create("token-subscribe-no-token");return ue.token})).apply(this,arguments)}function pi(I,A){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,O.Z)(function*(I,A){const M=yield Lr(I),j=bt(A.subscriptionOptions),re={method:"PATCH",headers:M,body:JSON.stringify(j)};let ue;try{ue=yield(yield fetch(`${Yi(I.appConfig)}/${A.token}`,re)).json()}catch(Ne){throw ur.create("token-update-failed",{errorInfo:Ne})}if(ue.error)throw ur.create("token-update-failed",{errorInfo:ue.error.message});if(!ue.token)throw ur.create("token-update-no-token");return ue.token})).apply(this,arguments)}function Pc(I,A){return jo.apply(this,arguments)}function jo(){return(jo=(0,O.Z)(function*(I,A){const j={method:"DELETE",headers:yield Lr(I)};try{const ue=yield(yield fetch(`${Yi(I.appConfig)}/${A}`,j)).json();if(ue.error)throw ur.create("token-unsubscribe-failed",{errorInfo:ue.error.message})}catch(re){throw ur.create("token-unsubscribe-failed",{errorInfo:re})}})).apply(this,arguments)}function Yi({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function Lr(I){return Da.apply(this,arguments)}function Da(){return(Da=(0,O.Z)(function*({appConfig:I,installations:A}){const M=yield A.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function bt({p256dh:I,auth:A,endpoint:M,vapidKey:j}){const re={web:{endpoint:M,auth:A,p256dh:I}};return j!==xc&&(re.web.applicationPubKey=j),re}const Oc=6048e5;function hl(I){return fl.apply(this,arguments)}function fl(){return(fl=(0,O.Z)(function*(I){const A=yield mu(I.swRegistration,I.vapidKey),M={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:A.endpoint,auth:ar(A.getKey("auth")),p256dh:ar(A.getKey("p256dh"))},j=yield Vo(I.firebaseDependencies);if(j){if(_u(j.subscriptionOptions,M))return Date.now()>=j.createTime+Oc?Vc(I,{token:j.token,createTime:Date.now(),subscriptionOptions:M}):j.token;try{yield Pc(I.firebaseDependencies,j.token)}catch(re){console.warn(re)}return Se(I.firebaseDependencies,M)}return Se(I.firebaseDependencies,M)})).apply(this,arguments)}function Fc(I){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,O.Z)(function*(I){const A=yield Vo(I.firebaseDependencies);A&&(yield Pc(I.firebaseDependencies,A.token),yield Ca(I.firebaseDependencies));const M=yield I.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function Vc(I,A){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,O.Z)(function*(I,A){try{const M=yield pi(I.firebaseDependencies,A),j=Object.assign(Object.assign({},A),{token:M,createTime:Date.now()});return yield gu(I.firebaseDependencies,j),M}catch(M){throw yield Fc(I),M}})).apply(this,arguments)}function Se(I,A){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,O.Z)(function*(I,A){const j={token:yield kc(I,A),createTime:Date.now(),subscriptionOptions:A};return yield gu(I,j),j.token})).apply(this,arguments)}function mu(I,A){return bn.apply(this,arguments)}function bn(){return(bn=(0,O.Z)(function*(I,A){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Cp(A)})})).apply(this,arguments)}function _u(I,A){return A.vapidKey===I.vapidKey&&A.endpoint===I.endpoint&&A.auth===I.auth&&A.p256dh===I.p256dh}function Ds(I){const A={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function(I,A){if(!A.notification)return;I.notification={};const M=A.notification.title;M&&(I.notification.title=M);const j=A.notification.body;j&&(I.notification.body=j);const re=A.notification.image;re&&(I.notification.image=re)}(A,I),function(I,A){!A.data||(I.data=A.data)}(A,I),function(I,A){if(!A.fcmOptions)return;I.fcmOptions={};const M=A.fcmOptions.link;M&&(I.fcmOptions.link=M);const j=A.fcmOptions.analytics_label;j&&(I.fcmOptions.analyticsLabel=j)}(A,I),A}function Ip(I){return"object"==typeof I&&!!I&&no in I}function pl(I,A){const M=[];for(let j=0;j<I.length;j++)M.push(I.charAt(j)),j<A.length&&M.push(A.charAt(j));return M.join("")}function ro(I){return ur.create("missing-app-config-values",{valueName:I})}pl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),pl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class pr{constructor(A,M,j){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const re=function(I){if(!I||!I.options)throw ro("App Configuration Object");if(!I.name)throw ro("App Name");const A=["projectId","apiKey","appId","messagingSenderId"],{options:M}=I;for(const j of A)if(!M[j])throw ro(j);return{appName:I.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(A);this.firebaseDependencies={app:A,appConfig:re,installations:M,analyticsProvider:j}}_delete(){return Promise.resolve()}}function ei(I){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,O.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(Sc,{scope:bh}),I.swRegistration.update().catch(()=>{})}catch(A){throw ur.create("failed-service-worker-registration",{browserErrorMessage:A.message})}})).apply(this,arguments)}function hs(I,A){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,O.Z)(function*(I,A){if(!A&&!I.swRegistration&&(yield ei(I)),A||!I.swRegistration){if(!(A instanceof ServiceWorkerRegistration))throw ur.create("invalid-sw-registration");I.swRegistration=A}})).apply(this,arguments)}function Ah(I,A){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,O.Z)(function*(I,A){A?I.vapidKey=A:I.vapidKey||(I.vapidKey=xc)})).apply(this,arguments)}function vu(){return(vu=(0,O.Z)(function*(I,A){if(!navigator)throw ur.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ur.create("permission-blocked");return yield Ah(I,null==A?void 0:A.vapidKey),yield hs(I,null==A?void 0:A.serviceWorkerRegistration),hl(I)})).apply(this,arguments)}function jc(I,A,M){return Go.apply(this,arguments)}function Go(){return(Go=(0,O.Z)(function*(I,A,M){const j=Sh(A);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(j,{message_id:M[no],message_name:M[Rc],message_time:M[Fo],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Sh(I){switch(I){case wa.NOTIFICATION_CLICKED:return"notification_open";case wa.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Eu(){return(Eu=(0,O.Z)(function*(I,A){const M=A.data;if(!M.isFirebaseMessaging)return;I.onMessageHandler&&M.messageType===wa.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Ds(M)):I.onMessageHandler.next(Ds(M)));const j=M.data;Ip(j)&&"1"===j[zi]&&(yield jc(I,M.messageType,j))})).apply(this,arguments)}const wu="@firebase/messaging";function xh(){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,O.Z)(function*(){try{yield(0,ce.eu)()}catch(I){return!1}return"undefined"!=typeof window&&(0,ce.hl)()&&(0,ce.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,ae._registerComponent)(new ne.wA("messaging",I=>{const A=new pr(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function(I,A){return Eu.apply(this,arguments)}(A,M)),A},"PUBLIC")),(0,ae._registerComponent)(new ne.wA("messaging-internal",I=>{const A=I.getProvider("messaging").getImmediate();return{getToken:j=>function(I,A){return vu.apply(this,arguments)}(A,j)}},"PRIVATE")),(0,ae.registerVersion)(wu,"0.9.13"),(0,ae.registerVersion)(wu,"0.9.13","esm2017");const yl="analytics",Gc="firebase_id",xa="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Zo="https://www.googletagmanager.com/gtag/js",lr=new be.Yd("@firebase/analytics");function Cu(I){return Promise.all(I.map(A=>A.catch(M=>M)))}function Dp(I,A){const M=document.createElement("script");M.src=`${Zo}?l=${I}&id=${A}`,M.async=!0,document.head.appendChild(M)}function Iu(I,A,M,j,re,ue){return vl.apply(this,arguments)}function vl(){return(vl=(0,O.Z)(function*(I,A,M,j,re,ue){const Ne=j[re];try{if(Ne)yield A[Ne];else{const gt=(yield Cu(M)).find(ct=>ct.measurementId===re);gt&&(yield A[gt.appId])}}catch(Qe){lr.error(Qe)}I("config",re,ue)})).apply(this,arguments)}function Ap(I,A,M,j,re){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,O.Z)(function*(I,A,M,j,re){try{let ue=[];if(re&&re.send_to){let Ne=re.send_to;Array.isArray(Ne)||(Ne=[Ne]);const Qe=yield Cu(M);for(const gt of Ne){const ct=Qe.find(Ct=>Ct.measurementId===gt),Gt=ct&&A[ct.appId];if(!Gt){ue=[];break}ue.push(Gt)}}0===ue.length&&(ue=Object.values(A)),yield Promise.all(ue),I("event",j,re||{})}catch(ue){lr.error(ue)}})).apply(this,arguments)}function a_(){const I=window.document.getElementsByTagName("script");for(const A of Object.values(I))if(A.src&&A.src.includes(Zo))return A;return null}const Qi=new ce.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),wl=new class{constructor(A={},M=1e3){this.throttleMetadata=A,this.intervalMillis=M}getThrottleMetadata(A){return this.throttleMetadata[A]}setThrottleMetadata(A,M){this.throttleMetadata[A]=M}deleteThrottleMetadata(A){delete this.throttleMetadata[A]}};function Rp(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Zc(I){return oo.apply(this,arguments)}function oo(){return(oo=(0,O.Z)(function*(I){var A;const{appId:M,apiKey:j}=I,re={method:"GET",headers:Rp(j)},ue=xa.replace("{app-id}",M),Ne=yield fetch(ue,re);if(200!==Ne.status&&304!==Ne.status){let Qe="";try{const gt=yield Ne.json();(null===(A=gt.error)||void 0===A?void 0:A.message)&&(Qe=gt.error.message)}catch(gt){}throw Qi.create("config-fetch-failed",{httpStatus:Ne.status,responseMessage:Qe})}return Ne.json()})).apply(this,arguments)}function gE(I){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,O.Z)(function*(I,A=wl,M){const{appId:j,apiKey:re,measurementId:ue}=I.options;if(!j)throw Qi.create("no-app-id");if(!re){if(ue)return{measurementId:ue,appId:j};throw Qi.create("no-api-key")}const Ne=A.getThrottleMetadata(j)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Qe=new Mp;return setTimeout((0,O.Z)(function*(){Qe.abort()}),void 0!==M?M:6e4),Tu({appId:j,apiKey:re,measurementId:ue},Ne,Qe,A)})).apply(this,arguments)}function Tu(I,A,M){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,O.Z)(function*(I,{throttleEndTimeMillis:A,backoffCount:M},j,re=wl){const{appId:ue,measurementId:Ne}=I;try{yield Np(j,A)}catch(Qe){if(Ne)return lr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ne} provided in the "measurementId" field in the local Firebase config. [${Qe.message}]`),{appId:ue,measurementId:Ne};throw Qe}try{const Qe=yield Zc(I);return re.deleteThrottleMetadata(ue),Qe}catch(Qe){if(!Nh(Qe)){if(re.deleteThrottleMetadata(ue),Ne)return lr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ne} provided in the "measurementId" field in the local Firebase config. [${Qe.message}]`),{appId:ue,measurementId:Ne};throw Qe}const gt=503===Number(Qe.customData.httpStatus)?(0,ce.$s)(M,re.intervalMillis,30):(0,ce.$s)(M,re.intervalMillis),ct={throttleEndTimeMillis:Date.now()+gt,backoffCount:M+1};return re.setThrottleMetadata(ue,ct),lr.debug(`Calling attemptFetch again in ${gt} millis`),Tu(I,ct,j,re)}})).apply(this,arguments)}function Np(I,A){return new Promise((M,j)=>{const re=Math.max(A-Date.now(),0),ue=setTimeout(M,re);I.addEventListener(()=>{clearTimeout(ue),j(Qi.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}function Nh(I){if(!(I instanceof ce.ZR&&I.customData))return!1;const A=Number(I.customData.httpStatus);return 429===A||500===A||503===A||504===A}class Mp{constructor(){this.listeners=[]}addEventListener(A){this.listeners.push(A)}abort(){this.listeners.forEach(A=>A())}}function l_(){return Mh.apply(this,arguments)}function Mh(){return(Mh=(0,O.Z)(function*(){if(!(0,ce.hl)())return lr.warn(Qi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ce.eu)()}catch(I){return lr.warn(Qi.create("indexeddb-unavailable",{errorInfo:I}).message),!1}return!0})).apply(this,arguments)}function Na(){return(Na=(0,O.Z)(function*(I,A,M,j,re,ue,Ne){var Qe;const gt=gE(I);gt.then(tr=>{M[tr.measurementId]=tr.appId,I.options.measurementId&&tr.measurementId!==I.options.measurementId&&lr.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${tr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(tr=>lr.error(tr)),A.push(gt);const ct=l_().then(tr=>{if(tr)return j.getId()}),[Gt,Ct]=yield Promise.all([gt,ct]);a_()||Dp(ue,Gt.measurementId),re("js",new Date);const Oi=null!==(Qe=null==Ne?void 0:Ne.config)&&void 0!==Qe?Qe:{};return Oi.origin="firebase",Oi.update=!0,null!=Ct&&(Oi[Gc]=Ct),re("config",Gt.measurementId,Oi),Gt.measurementId})).apply(this,arguments)}class bl{constructor(A){this.app=A}_delete(){return delete Vt[this.app.options.appId],Promise.resolve()}}let Vt={},gr=[];const Cl={};let kh,fs,pt="dataLayer",Kc=!1;function Du(I,A,M){!function(){const I=[];if((0,ce.ru)()&&I.push("This is a browser extension environment."),(0,ce.zI)()||I.push("Cookies are not available."),I.length>0){const A=I.map((j,re)=>`(${re+1}) ${j}`).join(" "),M=Qi.create("invalid-analytics-context",{errorInfo:A});lr.warn(M.message)}}();const j=I.options.appId;if(!j)throw Qi.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw Qi.create("no-api-key");lr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Vt[j])throw Qi.create("already-exists",{id:j});if(!Kc){!function(I){let A=[];Array.isArray(window[I])?A=window[I]:window[I]=A}(pt);const{wrappedGtag:ue,gtagCore:Ne}=function(I,A,M,j,re){let ue=function(...Ne){window[j].push(arguments)};return window[re]&&"function"==typeof window[re]&&(ue=window[re]),window[re]=function(I,A,M,j){function ue(){return(ue=(0,O.Z)(function*(Ne,Qe,gt){try{"event"===Ne?yield Ap(I,A,M,Qe,gt):"config"===Ne?yield Iu(I,A,M,j,Qe,gt):I("set",Qe)}catch(ct){lr.error(ct)}})).apply(this,arguments)}return function(Ne,Qe,gt){return ue.apply(this,arguments)}}(ue,I,A,M),{gtagCore:ue,wrappedGtag:window[re]}}(Vt,gr,Cl,pt,"gtag");fs=ue,kh=Ne,Kc=!0}return Vt[j]=function(I,A,M,j,re,ue,Ne){return Na.apply(this,arguments)}(I,gr,Cl,A,kh,pt,M),new bl(I)}function Il(){return(Il=(0,O.Z)(function*(I,A,M,j,re){if(re&&re.global)I("event",M,j);else{const ue=yield A;I("event",M,Object.assign(Object.assign({},j),{send_to:ue}))}})).apply(this,arguments)}function Rs(){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,O.Z)(function*(){if((0,ce.ru)()||!(0,ce.zI)()||!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch(I){return!1}})).apply(this,arguments)}const Ns="@firebase/analytics";(0,ae._registerComponent)(new ne.wA(yl,(A,{options:M})=>Du(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ae._registerComponent)(new ne.wA("analytics-internal",function(A){try{const M=A.getProvider(yl).getImmediate();return{logEvent:(j,re,ue)=>function(I,A,M,j){I=(0,ce.m9)(I),function(I,A,M,j,re){return Il.apply(this,arguments)}(fs,Vt[I.app.options.appId],A,M,j).catch(re=>lr.error(re))}(M,j,re,ue)}}catch(M){throw Qi.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ae.registerVersion)(Ns,"0.7.9"),(0,ae.registerVersion)(Ns,"0.7.9","esm2017");var Pp=V(7771),Op=V(3637),mE=V(3342),Qc=V(309),Fp=V(3101);const Lh=new f.GfV("7.3.0"),Jc="__angularfire_symbol__analyticsIsSupportedValue",Oa="__angularfire_symbol__analyticsIsSupported",lo="__angularfire_symbol__remoteConfigIsSupportedValue",Tl="__angularfire_symbol__remoteConfigIsSupported",Vn="__angularfire_symbol__messagingIsSupportedValue",co="__angularfire_symbol__messagingIsSupported";function Nn(I,A,M){if(A){if(1===A.length)return A[0];const ue=A.filter(Ne=>Ne.app===M);if(1===ue.length)return ue[0]}return M.container.getProvider(I).getImmediate({optional:!0})}globalThis[Oa]||(globalThis[Oa]=Rs().then(I=>globalThis[Jc]=I).catch(()=>globalThis[Jc]=!1)),globalThis[co]||(globalThis[co]=xh().then(I=>globalThis[Vn]=I).catch(()=>globalThis[Vn]=!1)),globalThis[Tl]||(globalThis[Tl]=bp().then(I=>globalThis[lo]=I).catch(()=>globalThis[lo]=!1));const _i=(I,A)=>{const M=A?[A]:(0,$.C6)(),j=[];return M.forEach(re=>{re.container.getProvider(I).instances.forEach(Ne=>{j.includes(Ne)||j.push(Ne)})}),j};function yi(){}class ho{constructor(A,M=Pp.N){this.zone=A,this.delegate=M}now(){return this.delegate.now()}schedule(A,M,j){const re=this.zone;return this.delegate.schedule(function(Ne){re.runGuarded(()=>{A.apply(this,[Ne])})},M,j)}}class Vp{constructor(A){this.zone=A,this.task=null}call(A,M){const j=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",yi,{},yi,yi)),M.pipe((0,mE.b)({next:j,complete:j,error:j})).subscribe(A).add(j)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Vh=(()=>{class I{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new ho(Zone.current)),this.insideAngular=M.run(()=>new ho(Zone.current,Op.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(M){return new(M||I)(f.LFG(f.R0b))},I.\u0275prov=f.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function fo(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function Uh(I){return I.pipe((0,Qc.QV)(fo().outsideAngular))}function Fa(I){return fo(),function(I){return function(M){return(M=M.lift(new Vp(I.ngZone))).pipe((0,Fp.R)(I.outsideAngular),(0,Qc.QV)(I.insideAngular))}}(fo())(I)}},7014:(Je,Ee,V)=>{"use strict";V.d(Ee,{$:()=>Uc,A:()=>kn,B:()=>Zi,G:()=>ul,H:()=>va,J:()=>ar,L:()=>At,M:()=>gu,N:()=>Ia,P:()=>Qe,Q:()=>Ri,R:()=>Uh,T:()=>ur,U:()=>Bo,V:()=>Ta,W:()=>Pc,X:()=>bt,Y:()=>$o,Z:()=>Ip,_:()=>yu,a:()=>ao,a0:()=>Bc,a1:()=>jc,a2:()=>Sh,a3:()=>Eu,a4:()=>bu,a5:()=>Tp,a6:()=>xh,a7:()=>Wo,a8:()=>Hc,a9:()=>xr,aA:()=>g_,aB:()=>Hp,aC:()=>Ps,aD:()=>Ua,aE:()=>un,aI:()=>Ma,aL:()=>fi,aa:()=>pE,ab:()=>yl,ac:()=>qc,af:()=>lr,ag:()=>Dp,ah:()=>so,ak:()=>Lc,al:()=>Wc,an:()=>Nh,ao:()=>bl,ap:()=>Js,aq:()=>hr,ar:()=>fu,as:()=>hi,at:()=>gn,au:()=>Kp,av:()=>m_,aw:()=>mn,ax:()=>ke,ay:()=>Kt,az:()=>Ai,b:()=>fs,c:()=>Dl,d:()=>_E,e:()=>gs,f:()=>jp,g:()=>FC,h:()=>Ba,i:()=>Qc,j:()=>h_,k:()=>zh,l:()=>c_,m:()=>UC,o:()=>Tr,r:()=>A,s:()=>Au,u:()=>ue});var f=V(8239),$=V(3854),O=V(8026);function be(E,g){var _={};for(var b in E)Object.prototype.hasOwnProperty.call(E,b)&&g.indexOf(b)<0&&(_[b]=E[b]);if(null!=E&&"function"==typeof Object.getOwnPropertySymbols){var R=0;for(b=Object.getOwnPropertySymbols(E);R<b.length;R++)g.indexOf(b[R])<0&&Object.prototype.propertyIsEnumerable.call(E,b[R])&&(_[b[R]]=E[b[R]])}return _}var wt=V(5422),Ge=V(3910);const Tr={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},kn={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Zi=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ls=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},zt=new $.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Tn=new wt.Yd("@firebase/auth");function zn(E,...g){Tn.logLevel<=wt.in.ERROR&&Tn.error(`Auth (${O.SDK_VERSION}): ${E}`,...g)}function gn(E,...g){throw Yr(E,...g)}function mn(E,...g){return Yr(E,...g)}function Ys(E,g,_){const b=Object.assign(Object.assign({},ls()),{[g]:_});return new $.LL("auth","Firebase",b).create(g,{appName:E.name})}function Kr(E,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&gn(E,"argument-error"),Ys(E,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Yr(E,...g){if("string"!=typeof E){const _=g[0],b=[...g.slice(1)];return b[0]&&(b[0].appName=E.name),E._errorFactory.create(_,...b)}return zt.create(E,...g)}function ke(E,g,..._){if(!E)throw Yr(g,..._)}function Kn(E){const g="INTERNAL ASSERTION FAILED: "+E;throw zn(g),new Error(g)}function hr(E,g){E||Kn(g)}const et=new Map;function Kt(E){hr(E instanceof Function,"Expected a class definition");let g=et.get(E);return g?(hr(g instanceof E,"Instance stored in cache mismatched with class"),g):(g=new E,et.set(E,g),g)}function Qn(){var E;return"undefined"!=typeof self&&(null===(E=self.location)||void 0===E?void 0:E.href)||""}function Cs(){return"http:"===Pn()||"https:"===Pn()}function Pn(){var E;return"undefined"!=typeof self&&(null===(E=self.location)||void 0===E?void 0:E.protocol)||null}class cn{constructor(g,_){this.shortDelay=g,this.longDelay=_,hr(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,$.uI)()||(0,$.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Cs()||(0,$.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function qe(E,g){hr(E.emulator,"Emulator should always be set here");const{url:_}=E.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class ot{static initialize(g,_,b){this.fetchImpl=g,_&&(this.headersImpl=_),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Kn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Kn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Kn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const cs={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},li=new cn(3e4,6e4);function Yt(E,g){return E.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:E.tenantId}):g}function vt(E,g,_,b){return or.apply(this,arguments)}function or(){return(or=(0,f.Z)(function*(E,g,_,b,R={}){return jn(E,R,(0,f.Z)(function*(){let N={},J={};b&&("GET"===g?J=b:N={body:JSON.stringify(b)});const ye=(0,$.xO)(Object.assign({key:E.config.apiKey},J)).slice(1),He=yield E._getAdditionalHeaders();return He["Content-Type"]="application/json",E.languageCode&&(He["X-Firebase-Locale"]=E.languageCode),ot.fetch()(ve(E,E.config.apiHost,_,ye),Object.assign({method:g,headers:He,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function jn(E,g,_){return z.apply(this,arguments)}function z(){return(z=(0,f.Z)(function*(E,g,_){E._canInitEmulator=!1;const b=Object.assign(Object.assign({},cs),g);try{const R=new Z(E),N=yield Promise.race([_(),R.promise]);R.clearNetworkTimeout();const J=yield N.json();if("needConfirmation"in J)throw ie(E,"account-exists-with-different-credential",J);if(N.ok&&!("errorMessage"in J))return J;{const ye=N.ok?J.errorMessage:J.error.message,[He,Ve]=ye.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===He)throw ie(E,"credential-already-in-use",J);if("EMAIL_EXISTS"===He)throw ie(E,"email-already-in-use",J);if("USER_DISABLED"===He)throw ie(E,"user-disabled",J);const Ke=b[He]||He.toLowerCase().replace(/[_\s]+/g,"-");if(Ve)throw Ys(E,Ke,Ve);gn(E,Ke)}}catch(R){if(R instanceof $.ZR)throw R;gn(E,"network-request-failed")}})).apply(this,arguments)}function G(E,g,_,b){return Q.apply(this,arguments)}function Q(){return(Q=(0,f.Z)(function*(E,g,_,b,R={}){const N=yield vt(E,g,_,b,R);return"mfaPendingCredential"in N&&gn(E,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function ve(E,g,_,b){const R=`${g}${_}?${b}`;return E.config.emulator?qe(E.config,R):`${E.config.apiScheme}://${R}`}class Z{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,b)=>{this.timer=setTimeout(()=>b(mn(this.auth,"network-request-failed")),li.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ie(E,g,_){const b={appName:E.name};_.email&&(b.email=_.email),_.phoneNumber&&(b.phoneNumber=_.phoneNumber);const R=mn(E,g,b);return R.customData._tokenResponse=_,R}function Ze(){return(Ze=(0,f.Z)(function*(E,g){return vt(E,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function ft(E,g){return xt.apply(this,arguments)}function xt(){return(xt=(0,f.Z)(function*(E,g){return vt(E,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function yn(E,g){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,f.Z)(function*(E,g){return vt(E,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function fr(E){if(E)try{const g=new Date(Number(E));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function K(){return(K=(0,f.Z)(function*(E,g=!1){const _=(0,$.m9)(E),b=yield _.getIdToken(g),R=$e(b);ke(R&&R.exp&&R.auth_time&&R.iat,_.auth,"internal-error");const N="object"==typeof R.firebase?R.firebase:void 0,J=null==N?void 0:N.sign_in_provider;return{claims:R,token:b,authTime:fr(Ae(R.auth_time)),issuedAtTime:fr(Ae(R.iat)),expirationTime:fr(Ae(R.exp)),signInProvider:J||null,signInSecondFactor:(null==N?void 0:N.sign_in_second_factor)||null}})).apply(this,arguments)}function Ae(E){return 1e3*Number(E)}function $e(E){const[g,_,b]=E.split(".");if(void 0===g||void 0===_||void 0===b)return zn("JWT malformed, contained fewer than 3 sections"),null;try{const R=(0,$.tV)(_);return R?JSON.parse(R):(zn("Failed to decode base64 JWT payload"),null)}catch(R){return zn("Caught error parsing JWT payload as JSON",R),null}}function Mt(E,g){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,f.Z)(function*(E,g,_=!1){if(_)return g;try{return yield g}catch(b){throw b instanceof $.ZR&&an(b)&&E.auth.currentUser===E&&(yield E.auth.signOut()),b}})).apply(this,arguments)}function an({code:E}){return"auth/user-disabled"===E||"auth/user-token-expired"===E}class On{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const R=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,R)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const b=this.getInterval(g);this.timerId=setTimeout((0,f.Z)(function*(){yield _.iteration()}),b)}iteration(){var g=this;return(0,f.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_.code&&g.schedule(!0))}g.schedule()})()}}class Fn{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=fr(this.lastLoginAt),this.creationTime=fr(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function jt(E){return xn.apply(this,arguments)}function xn(){return(xn=(0,f.Z)(function*(E){var g;const _=E.auth,b=yield E.getIdToken(),R=yield Mt(E,yn(_,{idToken:b}));ke(null==R?void 0:R.users.length,_,"internal-error");const N=R.users[0];E._notifyReloadListener(N);const J=(null===(g=N.providerUserInfo)||void 0===g?void 0:g.length)?Qr(N.providerUserInfo):[],ye=vn(E.providerData,J),Ke=!!E.isAnonymous&&!(E.email&&N.passwordHash||(null==ye?void 0:ye.length)),hn={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:ye,metadata:new Fn(N.createdAt,N.lastLoginAt),isAnonymous:Ke};Object.assign(E,hn)})).apply(this,arguments)}function Lt(){return(Lt=(0,f.Z)(function*(E){const g=(0,$.m9)(E);yield jt(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function vn(E,g){return[...E.filter(b=>!g.some(R=>R.providerId===b.providerId)),...g]}function Qr(E){return E.map(g=>{var{providerId:_}=g,b=be(g,["providerId"]);return{providerId:_,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function Jn(){return(Jn=(0,f.Z)(function*(E,g){const _=yield jn(E,{},(0,f.Z)(function*(){const b=(0,$.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:R,apiKey:N}=E.config,J=ve(E,R,"/v1/token",`key=${N}`),ye=yield E._getAdditionalHeaders();return ye["Content-Type"]="application/x-www-form-urlencoded",ot.fetch()(J,{method:"POST",headers:ye,body:b})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class ci{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){ke(g.idToken,"internal-error"),ke(void 0!==g.idToken,"internal-error"),ke(void 0!==g.refreshToken,"internal-error");const _="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function(E){const g=$e(E);return ke(g,"internal-error"),ke(void 0!==g.exp,"internal-error"),ke(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var b=this;return(0,f.Z)(function*(){return ke(!b.accessToken||b.refreshToken,g,"user-token-expired"),_||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(g,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var b=this;return(0,f.Z)(function*(){const{accessToken:R,refreshToken:N,expiresIn:J}=yield function(E,g){return Jn.apply(this,arguments)}(g,_);b.updateTokensAndExpiration(R,N,Number(J))})()}updateTokensAndExpiration(g,_,b){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(g,_){const{refreshToken:b,accessToken:R,expirationTime:N}=_,J=new ci;return b&&(ke("string"==typeof b,"internal-error",{appName:g}),J.refreshToken=b),R&&(ke("string"==typeof R,"internal-error",{appName:g}),J.accessToken=R),N&&(ke("number"==typeof N,"internal-error",{appName:g}),J.expirationTime=N),J}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new ci,this.toJSON())}_performRefresh(){return Kn("not implemented")}}function En(E,g){ke("string"==typeof E||void 0===E,"internal-error",{appName:g})}class di{constructor(g){var{uid:_,auth:b,stsTokenManager:R}=g,N=be(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new On(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=b,this.stsTokenManager=R,this.accessToken=R.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new Fn(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,f.Z)(function*(){const b=yield Mt(_,_.stsTokenManager.getToken(_.auth,g));return ke(b,_.auth,"internal-error"),_.accessToken!==b&&(_.accessToken=b,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),b})()}getIdTokenResult(g){return function(E){return K.apply(this,arguments)}(this,g)}reload(){return function(E){return Lt.apply(this,arguments)}(this)}_assign(g){this!==g&&(ke(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new di(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var b=this;return(0,f.Z)(function*(){let R=!1;g.idToken&&g.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(g),R=!0),_&&(yield jt(b)),yield b.auth._persistUserIfCurrent(b),R&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var g=this;return(0,f.Z)(function*(){const _=yield g.getIdToken();return yield Mt(g,function(E,g){return Ze.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var b,R,N,J,ye,He,Ve,Ke;const hn=null!==(b=_.displayName)&&void 0!==b?b:void 0,Cn=null!==(R=_.email)&&void 0!==R?R:void 0,Vr=null!==(N=_.phoneNumber)&&void 0!==N?N:void 0,ta=null!==(J=_.photoURL)&&void 0!==J?J:void 0,Xp=null!==(ye=_.tenantId)&&void 0!==ye?ye:void 0,Os=null!==(He=_._redirectEventId)&&void 0!==He?He:void 0,mt=null!==(Ve=_.createdAt)&&void 0!==Ve?Ve:void 0,eg=null!==(Ke=_.lastLoginAt)&&void 0!==Ke?Ke:void 0,{uid:Xi,emailVerified:D_,isAnonymous:es,providerData:$a,stsTokenManager:ni}=_;ke(Xi&&ni,g,"internal-error");const tg=ci.fromJSON(this.name,ni);ke("string"==typeof Xi,g,"internal-error"),En(hn,g.name),En(Cn,g.name),ke("boolean"==typeof D_,g,"internal-error"),ke("boolean"==typeof es,g,"internal-error"),En(Vr,g.name),En(ta,g.name),En(Xp,g.name),En(Os,g.name),En(mt,g.name),En(eg,g.name);const id=new di({uid:Xi,auth:g,email:Cn,emailVerified:D_,displayName:hn,isAnonymous:es,photoURL:ta,phoneNumber:Vr,tenantId:Xp,stsTokenManager:tg,createdAt:mt,lastLoginAt:eg});return $a&&Array.isArray($a)&&(id.providerData=$a.map(A_=>Object.assign({},A_))),Os&&(id._redirectEventId=Os),id}static _fromIdTokenResponse(g,_,b=!1){return(0,f.Z)(function*(){const R=new ci;R.updateFromServerResponse(_);const N=new di({uid:_.localId,auth:g,stsTokenManager:R,isAnonymous:b});return yield jt(N),N})()}}const At=(()=>{class E{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(_,b){var R=this;return(0,f.Z)(function*(){R.storage[_]=b})()}_get(_){var b=this;return(0,f.Z)(function*(){const R=b.storage[_];return void 0===R?null:R})()}_remove(_){var b=this;return(0,f.Z)(function*(){delete b.storage[_]})()}_addListener(_,b){}_removeListener(_,b){}}return E.type="NONE",E})();function Ai(E,g,_){return`firebase:${E}:${g}:${_}`}class Si{constructor(g,_,b){this.persistence=g,this.auth=_,this.userKey=b;const{config:R,name:N}=this.auth;this.fullUserKey=Ai(this.userKey,R.apiKey,N),this.fullPersistenceKey=Ai("persistence",R.apiKey,N),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,f.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?di._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,f.Z)(function*(){if(_.persistence===g)return;const b=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,b?_.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,b="authUser"){return(0,f.Z)(function*(){if(!_.length)return new Si(Kt(At),g,b);const R=(yield Promise.all(_.map(function(){var Ve=(0,f.Z)(function*(Ke){if(yield Ke._isAvailable())return Ke});return function(Ke){return Ve.apply(this,arguments)}}()))).filter(Ve=>Ve);let N=R[0]||Kt(At);const J=Ai(b,g.config.apiKey,g.name);let ye=null;for(const Ve of _)try{const Ke=yield Ve._get(J);if(Ke){const hn=di._fromJSON(g,Ke);Ve!==N&&(ye=hn),N=Ve;break}}catch(Ke){}const He=R.filter(Ve=>Ve._shouldAllowMigration);return N._shouldAllowMigration&&He.length?(N=He[0],ye&&(yield N._set(J,ye.toJSON())),yield Promise.all(_.map(function(){var Ve=(0,f.Z)(function*(Ke){if(Ke!==N)try{yield Ke._remove(J)}catch(hn){}});return function(Ke){return Ve.apply(this,arguments)}}())),new Si(N,g,b)):new Si(N,g,b)})()}}function br(E){const g=E.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Qs(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(ma(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(dn(g))return"Blackberry";if(gh(g))return"Webos";if(Dr(g))return"Safari";if((g.includes("chrome/")||_a(g))&&!g.includes("edge/"))return"Chrome";if(hi(g))return"Android";{const b=E.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==b?void 0:b.length))return b[1]}return"Other"}function ma(E=(0,$.z$)()){return/firefox\//i.test(E)}function Dr(E=(0,$.z$)()){const g=E.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function _a(E=(0,$.z$)()){return/crios\//i.test(E)}function Qs(E=(0,$.z$)()){return/iemobile/i.test(E)}function hi(E=(0,$.z$)()){return/android/i.test(E)}function dn(E=(0,$.z$)()){return/blackberry/i.test(E)}function gh(E=(0,$.z$)()){return/webos/i.test(E)}function fu(E=(0,$.z$)()){return/iphone|ipad|ipod/i.test(E)}function Js(E=(0,$.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(E)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(E)}function Is(E=(0,$.z$)()){return fu(E)||hi(E)||gh(E)||dn(E)||/windows phone/i.test(E)||Qs(E)}function Ar(E,g=[]){let _;switch(E){case"Browser":_=br((0,$.z$)());break;case"Worker":_=`${br((0,$.z$)())}-${E}`;break;default:_=E}const b=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${O.SDK_VERSION}/${b}`}class r_{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,_){const b=N=>new Promise((J,ye)=>{try{J(g(N))}catch(He){ye(He)}});b.onAbort=_,this.queue.push(b);const R=this.queue.length-1;return()=>{this.queue[R]=()=>Promise.resolve()}}runMiddleware(g){var _=this;return(0,f.Z)(function*(){if(_.auth.currentUser===g)return;const b=[];try{for(const R of _.queue)yield R(g),R.onAbort&&b.push(R.onAbort)}catch(R){b.reverse();for(const N of b)try{N()}catch(J){}throw _.auth._errorFactory.create("login-blocked",{originalMessage:R.message})}})()}}class eo{constructor(g,_,b){this.app=g,this.heartbeatServiceProvider=_,this.config=b,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Tc(this),this.idTokenSubscription=new Tc(this),this.beforeStateQueue=new r_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=b.sdkClientVersion}_initializeWithPersistence(g,_){var b=this;return _&&(this._popupRedirectResolver=Kt(_)),this._initializationPromise=this.queue((0,f.Z)(function*(){var R,N;if(!b._deleted&&(b.persistenceManager=yield Si.create(b,g),!b._deleted)){if(null===(R=b._popupRedirectResolver)||void 0===R?void 0:R._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch(J){}yield b.initializeCurrentUser(_),b.lastNotifiedUid=(null===(N=b.currentUser)||void 0===N?void 0:N.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,f.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_,!0)}})()}initializeCurrentUser(g){var _=this;return(0,f.Z)(function*(){var b;const R=yield _.assertedPersistence.getCurrentUser();let N=R,J=!1;if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const ye=null===(b=_.redirectUser)||void 0===b?void 0:b._redirectEventId,He=null==N?void 0:N._redirectEventId,Ve=yield _.tryRedirectSignIn(g);(!ye||ye===He)&&(null==Ve?void 0:Ve.user)&&(N=Ve.user,J=!0)}if(!N)return _.directlySetCurrentUser(null);if(!N._redirectEventId){if(J)try{yield _.beforeStateQueue.runMiddleware(N)}catch(ye){N=R,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(ye))}return N?_.reloadAndSetCurrentUserOrClear(N):_.directlySetCurrentUser(null)}return ke(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===N._redirectEventId?_.directlySetCurrentUser(N):_.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(g){var _=this;return(0,f.Z)(function*(){let b=null;try{b=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch(R){yield _._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,f.Z)(function*(){try{yield jt(g)}catch(b){if("auth/network-request-failed"!==b.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const E=navigator;return E.languages&&E.languages[0]||E.language||null}()}_delete(){var g=this;return(0,f.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,f.Z)(function*(){const b=g?(0,$.m9)(g):null;return b&&ke(b.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(b&&b._clone(_))})()}_updateCurrentUser(g,_=!1){var b=this;return(0,f.Z)(function*(){if(!b._deleted)return g&&ke(b.tenantId===g.tenantId,b,"tenant-id-mismatch"),_||(yield b.beforeStateQueue.runMiddleware(g)),b.queue((0,f.Z)(function*(){yield b.directlySetCurrentUser(g),b.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,f.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var _=this;return this.queue((0,f.Z)(function*(){yield _.assertedPersistence.setPersistence(Kt(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new $.LL("auth","Firebase",g())}onAuthStateChanged(g,_,b){return this.registerStateListener(this.authStateSubscription,g,_,b)}beforeAuthStateChanged(g,_){return this.beforeStateQueue.pushCallback(g,_)}onIdTokenChanged(g,_,b){return this.registerStateListener(this.idTokenSubscription,g,_,b)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var b=this;return(0,f.Z)(function*(){const R=yield b.getOrInitRedirectPersistenceManager(_);return null===g?R.removeCurrentUser():R.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,f.Z)(function*(){if(!_.redirectPersistenceManager){const b=g&&Kt(g)||_._popupRedirectResolver;ke(b,_,"argument-error"),_.redirectPersistenceManager=yield Si.create(_,[Kt(b._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,f.Z)(function*(){var b,R;return _._isInitialized&&(yield _.queue((0,f.Z)(function*(){}))),(null===(b=_._currentUser)||void 0===b?void 0:b._redirectEventId)===g?_._currentUser:(null===(R=_.redirectUser)||void 0===R?void 0:R._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,f.Z)(function*(){if(g===_.currentUser)return _.queue((0,f.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,b,R){if(this._deleted)return()=>{};const N="function"==typeof _?_:_.next.bind(_),J=this._isInitialized?Promise.resolve():this._initializationPromise;return ke(J,this,"internal-error"),J.then(()=>N(this.currentUser)),"function"==typeof _?g.addObserver(_,b,R):g.addObserver(_)}directlySetCurrentUser(g){var _=this;return(0,f.Z)(function*(){_.currentUser&&_.currentUser!==g&&(_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh()),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Ar(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,f.Z)(function*(){var _;const b={"X-Client-Version":g.clientVersion};g.app.options.appId&&(b["X-Firebase-gmpid"]=g.app.options.appId);const R=yield null===(_=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return R&&(b["X-Firebase-Client"]=R),b})()}}function un(E){return(0,$.m9)(E)}class Tc{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,$.ne)(_=>this.observer=_)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ul(E,g,_){const b=un(E);ke(b._canInitEmulator,b,"emulator-config-failed"),ke(/^https?:\/\//.test(g),b,"invalid-emulator-scheme");const R=!!(null==_?void 0:_.disableWarnings),N=pu(g),{host:J,port:ye}=function(E){const g=pu(E),_=/(\/\/)?([^?#/]+)/.exec(E.substr(g.length));if(!_)return{host:"",port:null};const b=_[2].split("@").pop()||"",R=/^(\[[^\]]+\])(:|$)/.exec(b);if(R){const N=R[1];return{host:N,port:xi(b.substr(N.length+1))}}{const[N,J]=b.split(":");return{host:N,port:xi(J)}}}(g);b.config.emulator={url:`${N}//${J}${null===ye?"":`:${ye}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:J,port:ye,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:R})}),R||function(){function E(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",E):E())}()}function pu(E){const g=E.indexOf(":");return g<0?"":E.substr(0,g+1)}function xi(E){if(!E)return null;const g=Number(E);return isNaN(g)?null:g}class va{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return Kn("not implemented")}_getIdTokenResponse(g){return Kn("not implemented")}_linkToIdToken(g,_){return Kn("not implemented")}_getReauthenticationResolver(g){return Kn("not implemented")}}function mh(E,g){return _h.apply(this,arguments)}function _h(){return(_h=(0,f.Z)(function*(E,g){return vt(E,"POST","/v1/accounts:resetPassword",Yt(E,g))})).apply(this,arguments)}function wp(E,g){return yh.apply(this,arguments)}function yh(){return(yh=(0,f.Z)(function*(E,g){return vt(E,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Dc(E,g){return to.apply(this,arguments)}function to(){return(to=(0,f.Z)(function*(E,g){return vt(E,"POST","/v1/accounts:update",Yt(E,g))})).apply(this,arguments)}function vh(){return(vh=(0,f.Z)(function*(E,g){return G(E,"POST","/v1/accounts:signInWithPassword",Yt(E,g))})).apply(this,arguments)}function Ac(E,g){return Eh.apply(this,arguments)}function Eh(){return(Eh=(0,f.Z)(function*(E,g){return vt(E,"POST","/v1/accounts:sendOobCode",Yt(E,g))})).apply(this,arguments)}function o_(E,g){return wh.apply(this,arguments)}function wh(){return(wh=(0,f.Z)(function*(E,g){return Ac(E,g)})).apply(this,arguments)}function fE(E,g){return ll.apply(this,arguments)}function ll(){return(ll=(0,f.Z)(function*(E,g){return Ac(E,g)})).apply(this,arguments)}function bp(E,g){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,f.Z)(function*(E,g){return Ac(E,g)})).apply(this,arguments)}function Sc(E,g){return bh.apply(this,arguments)}function bh(){return(bh=(0,f.Z)(function*(E,g){return Ac(E,g)})).apply(this,arguments)}function cl(){return(cl=(0,f.Z)(function*(E,g){return G(E,"POST","/v1/accounts:signInWithEmailLink",Yt(E,g))})).apply(this,arguments)}function Rc(){return(Rc=(0,f.Z)(function*(E,g){return G(E,"POST","/v1/accounts:signInWithEmailLink",Yt(E,g))})).apply(this,arguments)}class Fo extends va{constructor(g,_,b,R=null){super("password",b),this._email=g,this._password=_,this._tenantId=R}static _fromEmailAndPassword(g,_){return new Fo(g,_,"password")}static _fromEmailAndCode(g,_,b=null){return new Fo(g,_,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,f.Z)(function*(){switch(_.signInMethod){case"password":return function(E,g){return vh.apply(this,arguments)}(g,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function(E,g){return cl.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:gn(g,"internal-error")}})()}_linkToIdToken(g,_){var b=this;return(0,f.Z)(function*(){switch(b.signInMethod){case"password":return wp(g,{idToken:_,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function(E,g){return Rc.apply(this,arguments)}(g,{idToken:_,email:b._email,oobCode:b._password});default:gn(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function zi(E,g){return Ch.apply(this,arguments)}function Ch(){return(Ch=(0,f.Z)(function*(E,g){return G(E,"POST","/v1/accounts:signInWithIdp",Yt(E,g))})).apply(this,arguments)}class ar extends va{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new ar(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):gn("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:b,signInMethod:R}=_,N=be(_,["providerId","signInMethod"]);if(!b||!R)return null;const J=new ar(b,R);return J.idToken=N.idToken||void 0,J.accessToken=N.accessToken||void 0,J.secret=N.secret,J.nonce=N.nonce,J.pendingToken=N.pendingToken||null,J}_getIdTokenResponse(g){return zi(g,this.buildRequest())}_linkToIdToken(g,_){const b=this.buildRequest();return b.idToken=_,zi(g,b)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,zi(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,$.xO)(_)}return g}}function Cp(E,g){return ba.apply(this,arguments)}function ba(){return(ba=(0,f.Z)(function*(E,g){return vt(E,"POST","/v1/accounts:sendVerificationCode",Yt(E,g))})).apply(this,arguments)}function Nc(){return(Nc=(0,f.Z)(function*(E,g){return G(E,"POST","/v1/accounts:signInWithPhoneNumber",Yt(E,g))})).apply(this,arguments)}function Lo(){return(Lo=(0,f.Z)(function*(E,g){const _=yield G(E,"POST","/v1/accounts:signInWithPhoneNumber",Yt(E,g));if(_.temporaryProof)throw ie(E,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Th={USER_NOT_FOUND:"user-not-found"};function Mc(){return(Mc=(0,f.Z)(function*(E,g){return G(E,"POST","/v1/accounts:signInWithPhoneNumber",Yt(E,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Th)})).apply(this,arguments)}class Jr extends va{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new Jr({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new Jr({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function(E,g){return Nc.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function(E,g){return Lo.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function(E,g){return Mc.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:b,verificationCode:R}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:b,code:R}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:b,phoneNumber:R,temporaryProof:N}=g;return b||_||R||N?new Jr({verificationId:_,verificationCode:b,phoneNumber:R,temporaryProof:N}):null}}class Vo{constructor(g){var _,b,R,N,J,ye;const He=(0,$.zd)((0,$.pd)(g)),Ve=null!==(_=He.apiKey)&&void 0!==_?_:null,Ke=null!==(b=He.oobCode)&&void 0!==b?b:null,hn=function(E){switch(E){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(R=He.mode)&&void 0!==R?R:null);ke(Ve&&Ke&&hn,"argument-error"),this.apiKey=Ve,this.operation=hn,this.code=Ke,this.continueUrl=null!==(N=He.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(J=He.languageCode)&&void 0!==J?J:null,this.tenantId=null!==(ye=He.tenantId)&&void 0!==ye?ye:null}static parseLink(g){const _=function(E){const g=(0,$.zd)((0,$.pd)(E)).link,_=g?(0,$.zd)((0,$.pd)(g)).deep_link_id:null,b=(0,$.zd)((0,$.pd)(E)).deep_link_id;return(b?(0,$.zd)((0,$.pd)(b)).link:null)||b||_||g||E}(g);try{return new Vo(_)}catch(b){return null}}}let gu=(()=>{class E{constructor(){this.providerId=E.PROVIDER_ID}static credential(_,b){return Fo._fromEmailAndPassword(_,b)}static credentialWithLink(_,b){const R=Vo.parseLink(b);return ke(R,"argument-error"),Fo._fromEmailAndCode(_,R.code,R.tenantId)}}return E.PROVIDER_ID="password",E.EMAIL_PASSWORD_SIGN_IN_METHOD="password",E.EMAIL_LINK_SIGN_IN_METHOD="emailLink",E})();class Qt{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Ca extends Qt{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Bo extends Ca{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return ke("providerId"in _&&"signInMethod"in _,"argument-error"),ar._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return ke(g.idToken||g.accessToken,"argument-error"),ar._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Bo.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Bo.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:b,oauthTokenSecret:R,pendingToken:N,nonce:J,providerId:ye}=g;if(!b&&!R&&!_&&!N||!ye)return null;try{return new Bo(ye)._credential({idToken:_,accessToken:b,nonce:J,pendingToken:N})}catch(He){return null}}}let Ia=(()=>{class E extends Ca{constructor(){super("facebook.com")}static credential(_){return ar._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return E.credential(_.oauthAccessToken)}catch(b){return null}}}return E.FACEBOOK_SIGN_IN_METHOD="facebook.com",E.PROVIDER_ID="facebook.com",E})(),Ri=(()=>{class E extends Ca{constructor(){super("google.com"),this.addScope("profile")}static credential(_,b){return ar._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:b})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:b,oauthAccessToken:R}=_;if(!b&&!R)return null;try{return E.credential(b,R)}catch(N){return null}}}return E.GOOGLE_SIGN_IN_METHOD="google.com",E.PROVIDER_ID="google.com",E})(),ur=(()=>{class E extends Ca{constructor(){super("github.com")}static credential(_){return ar._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return E.credential(_.oauthAccessToken)}catch(b){return null}}}return E.GITHUB_SIGN_IN_METHOD="github.com",E.PROVIDER_ID="github.com",E})();class fi extends va{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return zi(g,this.buildRequest())}_linkToIdToken(g,_){const b=this.buildRequest();return b.idToken=_,zi(g,b)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,zi(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:b,signInMethod:R,pendingToken:N}=_;return b&&R&&N&&b===R?new fi(b,N):null}static _create(g,_){return new fi(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ta extends Qt{constructor(g){ke(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Ta.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Ta.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=fi.fromJSON(g);return ke(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:b}=g;if(!_||!b)return null;try{return fi._create(b,_)}catch(R){return null}}}let Pc=(()=>{class E extends Ca{constructor(){super("twitter.com")}static credential(_,b){return ar._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:b})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:b,oauthTokenSecret:R}=_;if(!b||!R)return null;try{return E.credential(b,R)}catch(N){return null}}}return E.TWITTER_SIGN_IN_METHOD="twitter.com",E.PROVIDER_ID="twitter.com",E})();function jo(E,g){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,f.Z)(function*(E,g){return G(E,"POST","/v1/accounts:signUp",Yt(E,g))})).apply(this,arguments)}class Lr{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,b,R=!1){return(0,f.Z)(function*(){const N=yield di._fromIdTokenResponse(g,b,R),J=Da(b);return new Lr({user:N,providerId:J,_tokenResponse:b,operationType:_})})()}static _forOperation(g,_,b){return(0,f.Z)(function*(){yield g._updateTokensIfNecessary(b,!0);const R=Da(b);return new Lr({user:g,providerId:R,_tokenResponse:b,operationType:_})})()}}function Da(E){return E.providerId?E.providerId:"phoneNumber"in E?"phone":null}function bt(E){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,f.Z)(function*(E){var g;const _=un(E);if(yield _._initializationPromise,null===(g=_.currentUser)||void 0===g?void 0:g.isAnonymous)return new Lr({user:_.currentUser,providerId:null,operationType:"signIn"});const b=yield jo(_,{returnSecureToken:!0}),R=yield Lr._fromIdTokenResponse(_,"signIn",b,!0);return yield _._updateCurrentUser(R.user),R})).apply(this,arguments)}class hl extends $.ZR{constructor(g,_,b,R){var N;super(_.code,_.message),this.operationType=b,this.user=R,Object.setPrototypeOf(this,hl.prototype),this.customData={appName:g.name,tenantId:null!==(N=g.tenantId)&&void 0!==N?N:void 0,_serverResponse:_.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(g,_,b,R){return new hl(g,_,b,R)}}function fl(E,g,_,b){return("reauthenticate"===g?_._getReauthenticationResolver(E):_._getIdTokenResponse(E)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?hl._fromErrorAndOperation(E,N,g,b):N})}function Fc(E){return new Set(E.map(({providerId:g})=>g).filter(g=>!!g))}function Lc(E,g){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,f.Z)(function*(E,g){const _=(0,$.m9)(E);yield Pt(!0,_,g);const{providerUserInfo:b}=yield ft(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),R=Fc(b||[]);return _.providerData=_.providerData.filter(N=>R.has(N.providerId)),R.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function Ts(E,g){return Se.apply(this,arguments)}function Se(){return(Se=(0,f.Z)(function*(E,g,_=!1){const b=yield Mt(E,g._linkToIdToken(E.auth,yield E.getIdToken()),_);return Lr._forOperation(E,"link",b)})).apply(this,arguments)}function Pt(E,g,_){return mu.apply(this,arguments)}function mu(){return(mu=(0,f.Z)(function*(E,g,_){yield jt(g);const R=!1===E?"provider-already-linked":"no-such-provider";ke(Fc(g.providerData).has(_)===E,g.auth,R)})).apply(this,arguments)}function bn(E,g){return _u.apply(this,arguments)}function _u(){return(_u=(0,f.Z)(function*(E,g,_=!1){const{auth:b}=E,R="reauthenticate";try{const N=yield Mt(E,fl(b,R,g,E),_);ke(N.idToken,b,"internal-error");const J=$e(N.idToken);ke(J,b,"internal-error");const{sub:ye}=J;return ke(E.uid===ye,b,"user-mismatch"),Lr._forOperation(E,R,N)}catch(N){throw"auth/user-not-found"===(null==N?void 0:N.code)&&gn(b,"user-mismatch"),N}})).apply(this,arguments)}function Ds(E,g){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,f.Z)(function*(E,g,_=!1){const b="signIn",R=yield fl(E,b,g),N=yield Lr._fromIdTokenResponse(E,b,R);return _||(yield E._updateCurrentUser(N.user)),N})).apply(this,arguments)}function $o(E,g){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,f.Z)(function*(E,g){return Ds(un(E),g)})).apply(this,arguments)}function Ip(E,g){return pl.apply(this,arguments)}function pl(){return(pl=(0,f.Z)(function*(E,g){const _=(0,$.m9)(E);return yield Pt(!1,_,g.providerId),Ts(_,g)})).apply(this,arguments)}function yu(E,g){return ro.apply(this,arguments)}function ro(){return(ro=(0,f.Z)(function*(E,g){return bn((0,$.m9)(E),g)})).apply(this,arguments)}function pr(E,g){return ei.apply(this,arguments)}function ei(){return(ei=(0,f.Z)(function*(E,g){return G(E,"POST","/v1/accounts:signInWithCustomToken",Yt(E,g))})).apply(this,arguments)}function Uc(E,g){return hs.apply(this,arguments)}function hs(){return(hs=(0,f.Z)(function*(E,g){const _=un(E),b=yield pr(_,{token:g,returnSecureToken:!0}),R=yield Lr._fromIdTokenResponse(_,"signIn",b);return yield _._updateCurrentUser(R.user),R})).apply(this,arguments)}class Sr{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?Ah._fromServerResponse(g,_):gn(g,"internal-error")}}class Ah extends Sr{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new Ah(_)}}function Ho(E,g,_){var b;ke((null===(b=_.url)||void 0===b?void 0:b.length)>0,E,"invalid-continue-uri"),ke(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,E,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(ke(_.iOS.bundleId.length>0,E,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(ke(_.android.packageName.length>0,E,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function Bc(E,g,_){return vu.apply(this,arguments)}function vu(){return(vu=(0,f.Z)(function*(E,g,_){const b=(0,$.m9)(E),R={requestType:"PASSWORD_RESET",email:g};_&&Ho(b,R,_),yield fE(b,R)})).apply(this,arguments)}function jc(E,g,_){return Go.apply(this,arguments)}function Go(){return(Go=(0,f.Z)(function*(E,g,_){yield mh((0,$.m9)(E),{oobCode:g,newPassword:_})})).apply(this,arguments)}function Sh(E,g){return qo.apply(this,arguments)}function qo(){return(qo=(0,f.Z)(function*(E,g){yield Dc((0,$.m9)(E),{oobCode:g})})).apply(this,arguments)}function Eu(E,g){return wu.apply(this,arguments)}function wu(){return(wu=(0,f.Z)(function*(E,g){const _=(0,$.m9)(E),b=yield mh(_,{oobCode:g}),R=b.requestType;switch(ke(R,_,"internal-error"),R){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ke(b.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ke(b.mfaInfo,_,"internal-error");default:ke(b.email,_,"internal-error")}let N=null;return b.mfaInfo&&(N=Sr._fromServerResponse(un(_),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:N},operation:R}})).apply(this,arguments)}function bu(E,g){return gl.apply(this,arguments)}function gl(){return(gl=(0,f.Z)(function*(E,g){const{data:_}=yield Eu((0,$.m9)(E),g);return _.email})).apply(this,arguments)}function Tp(E,g,_){return ml.apply(this,arguments)}function ml(){return(ml=(0,f.Z)(function*(E,g,_){const b=un(E),R=yield jo(b,{returnSecureToken:!0,email:g,password:_}),N=yield Lr._fromIdTokenResponse(b,"signIn",R);return yield b._updateCurrentUser(N.user),N})).apply(this,arguments)}function xh(E,g,_){return $o((0,$.m9)(E),gu.credential(g,_))}function Wo(E,g,_){return $c.apply(this,arguments)}function $c(){return($c=(0,f.Z)(function*(E,g,_){const b=(0,$.m9)(E),R={requestType:"EMAIL_SIGNIN",email:g};ke(_.handleCodeInApp,b,"argument-error"),_&&Ho(b,R,_),yield bp(b,R)})).apply(this,arguments)}function Hc(E,g){const _=Vo.parseLink(g);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}function xr(E,g,_){return io.apply(this,arguments)}function io(){return(io=(0,f.Z)(function*(E,g,_){const b=(0,$.m9)(E),R=gu.credentialWithLink(g,_||Qn());return ke(R._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),$o(b,R)})).apply(this,arguments)}function Xn(E,g){return _l.apply(this,arguments)}function _l(){return(_l=(0,f.Z)(function*(E,g){return vt(E,"POST","/v1/accounts:createAuthUri",Yt(E,g))})).apply(this,arguments)}function pE(E,g){return Rh.apply(this,arguments)}function Rh(){return(Rh=(0,f.Z)(function*(E,g){const b={identifier:g,continueUri:Cs()?Qn():"http://localhost"},{signinMethods:R}=yield Xn((0,$.m9)(E),b);return R||[]})).apply(this,arguments)}function yl(E,g){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,f.Z)(function*(E,g){const _=(0,$.m9)(E),R={requestType:"VERIFY_EMAIL",idToken:yield E.getIdToken()};g&&Ho(_.auth,R,g);const{email:N}=yield o_(_.auth,R);N!==E.email&&(yield E.reload())})).apply(this,arguments)}function qc(E,g,_){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,f.Z)(function*(E,g,_){const b=(0,$.m9)(E),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield E.getIdToken(),newEmail:g};_&&Ho(b.auth,N,_);const{email:J}=yield Sc(b.auth,N);J!==E.email&&(yield E.reload())})).apply(this,arguments)}function xa(E,g){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,f.Z)(function*(E,g){return vt(E,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function lr(E,g){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,f.Z)(function*(E,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const b=(0,$.m9)(E),N={idToken:yield b.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},J=yield Mt(b,xa(b.auth,N));b.displayName=J.displayName||null,b.photoURL=J.photoUrl||null;const ye=b.providerData.find(({providerId:He})=>"password"===He);ye&&(ye.displayName=b.displayName,ye.photoURL=b.photoURL),yield b._updateTokensIfNecessary(J)})).apply(this,arguments)}function Dp(E,g){return Iu((0,$.m9)(E),g,null)}function so(E,g){return Iu((0,$.m9)(E),null,g)}function Iu(E,g,_){return vl.apply(this,arguments)}function vl(){return(vl=(0,f.Z)(function*(E,g,_){const{auth:b}=E,N={idToken:yield E.getIdToken(),returnSecureToken:!0};g&&(N.email=g),_&&(N.password=_);const J=yield Mt(E,wp(b,N));yield E._updateTokensIfNecessary(J,!0)})).apply(this,arguments)}class Ni{constructor(g,_,b={}){this.isNewUser=g,this.providerId=_,this.profile=b}}class El extends Ni{constructor(g,_,b,R){super(g,_,b),this.username=R}}class Sp extends Ni{constructor(g,_){super(g,"facebook.com",_)}}class a_ extends El{constructor(g,_){super(g,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class u_ extends Ni{constructor(g,_){super(g,"google.com",_)}}class Qi extends El{constructor(g,_,b){super(g,"twitter.com",_,b)}}function Wc(E){const{user:g,_tokenResponse:_}=E;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function(E){var g,_;if(!E)return null;const{providerId:b}=E,R=E.rawUserInfo?JSON.parse(E.rawUserInfo):{},N=E.isNewUser||"identitytoolkit#SignupNewUserResponse"===E.kind;if(!b&&(null==E?void 0:E.idToken)){const J=null===(_=null===(g=$e(E.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(J)return new Ni(N,"anonymous"!==J&&"custom"!==J?J:null)}if(!b)return null;switch(b){case"facebook.com":return new Sp(N,R);case"github.com":return new a_(N,R);case"google.com":return new u_(N,R);case"twitter.com":return new Qi(N,R,E.screenName||null);case"custom":case"anonymous":return new Ni(N,null);default:return new Ni(N,b,R)}}(_)}class Mi{constructor(g,_){this.type=g,this.credential=_}static _fromIdtoken(g){return new Mi("enroll",g)}static _fromMfaPendingCredential(g){return new Mi("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,b;if(null==g?void 0:g.multiFactorSession){if(null===(_=g.multiFactorSession)||void 0===_?void 0:_.pendingCredential)return Mi._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(b=g.multiFactorSession)||void 0===b?void 0:b.idToken)return Mi._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Np{constructor(g,_,b){this.session=g,this.hints=_,this.signInResolver=b}static _fromError(g,_){const b=un(g),R=_.customData._serverResponse,N=(R.mfaInfo||[]).map(ye=>Sr._fromServerResponse(b,ye));ke(R.mfaPendingCredential,b,"internal-error");const J=Mi._fromMfaPendingCredential(R.mfaPendingCredential);return new Np(J,N,function(){var ye=(0,f.Z)(function*(He){const Ve=yield He._process(b,J);delete R.mfaInfo,delete R.mfaPendingCredential;const Ke=Object.assign(Object.assign({},R),{idToken:Ve.idToken,refreshToken:Ve.refreshToken});switch(_.operationType){case"signIn":const hn=yield Lr._fromIdTokenResponse(b,_.operationType,Ke);return yield b._updateCurrentUser(hn.user),hn;case"reauthenticate":return ke(_.user,b,"internal-error"),Lr._forOperation(_.user,_.operationType,Ke);default:gn(b,"internal-error")}});return function(He){return ye.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,f.Z)(function*(){return _.signInResolver(g)})()}}function Nh(E,g){var _;const b=(0,$.m9)(E),R=g;return ke(g.customData.operationType,b,"argument-error"),ke(null===(_=R.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,b,"argument-error"),Np._fromError(b,R)}function Mp(E,g){return vt(E,"POST","/v2/accounts/mfaEnrollment:start",Yt(E,g))}class zo{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(b=>Sr._fromServerResponse(g.auth,b)))})}static _fromUser(g){return new zo(g)}getSession(){var g=this;return(0,f.Z)(function*(){return Mi._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,_){var b=this;return(0,f.Z)(function*(){const R=g,N=yield b.getSession(),J=yield Mt(b.user,R._process(b.user.auth,N,_));return yield b.user._updateTokensIfNecessary(J),b.user.reload()})()}unenroll(g){var _=this;return(0,f.Z)(function*(){const b="string"==typeof g?g:g.uid,R=yield _.user.getIdToken(),N=yield Mt(_.user,function(E,g){return vt(E,"POST","/v2/accounts/mfaEnrollment:withdraw",Yt(E,g))}(_.user.auth,{idToken:R,mfaEnrollmentId:b}));_.enrolledFactors=_.enrolledFactors.filter(({uid:J})=>J!==b),yield _.user._updateTokensIfNecessary(N);try{yield _.user.reload()}catch(J){if("auth/user-token-expired"!==J.code)throw J}})()}}const Na=new WeakMap;function bl(E){const g=(0,$.m9)(E);return Na.has(g)||Na.set(g,zo._fromUser(g)),Na.get(g)}const Vt="__sak";class gr{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Vt,"1"),this.storage.removeItem(Vt),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const fs=(()=>{class E extends gr{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,b)=>this.onStorageEvent(_,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const E=(0,$.z$)();return Dr(E)||fu(E)}()&&function(){try{return!(!window||window===window.top)}catch(E){return!1}}(),this.fallbackToPolling=Is(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const b of Object.keys(this.listeners)){const R=this.storage.getItem(b),N=this.localCache[b];R!==N&&_(b,N,R)}}onStorageEvent(_,b=!1){if(!_.key)return void this.forAllChangedKeys((ye,He,Ve)=>{this.notifyListeners(ye,Ve)});const R=_.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ye=this.storage.getItem(R);if(_.newValue!==ye)null!==_.newValue?this.storage.setItem(R,_.newValue):this.storage.removeItem(R);else if(this.localCache[R]===_.newValue&&!b)return}const N=()=>{const ye=this.storage.getItem(R);!b&&this.localCache[R]===ye||this.notifyListeners(R,ye)},J=this.storage.getItem(R);(0,$.w1)()&&10===document.documentMode&&J!==_.newValue&&_.newValue!==_.oldValue?setTimeout(N,10):N()}notifyListeners(_,b){this.localCache[_]=b;const R=this.listeners[_];if(R)for(const N of Array.from(R))N(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,b,R)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:b,newValue:R}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(b)}_removeListener(_,b){this.listeners[_]&&(this.listeners[_].delete(b),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,b){var R=()=>super._set,N=this;return(0,f.Z)(function*(){yield R().call(N,_,b),N.localCache[_]=JSON.stringify(b)})()}_get(_){var b=()=>super._get,R=this;return(0,f.Z)(function*(){const N=yield b().call(R,_);return R.localCache[_]=JSON.stringify(N),N})()}_remove(_){var b=()=>super._remove,R=this;return(0,f.Z)(function*(){yield b().call(R,_),delete R.localCache[_]})()}}return E.type="LOCAL",E})(),ao=(()=>{class E extends gr{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,b){}_removeListener(_,b){}}return E.type="SESSION",E})();let Du=(()=>{class E{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const b=this.receivers.find(N=>N.isListeningto(_));if(b)return b;const R=new E(_);return this.receivers.push(R),R}isListeningto(_){return this.eventTarget===_}handleEvent(_){var b=this;return(0,f.Z)(function*(){const R=_,{eventId:N,eventType:J,data:ye}=R.data,He=b.handlersMap[J];if(!(null==He?void 0:He.size))return;R.ports[0].postMessage({status:"ack",eventId:N,eventType:J});const Ve=Array.from(He).map(function(){var hn=(0,f.Z)(function*(Cn){return Cn(R.origin,ye)});return function(Cn){return hn.apply(this,arguments)}}()),Ke=yield function(E){return Promise.all(E.map(function(){var g=(0,f.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(b){return{fulfilled:!1,reason:b}}});return function(_){return g.apply(this,arguments)}}()))}(Ve);R.ports[0].postMessage({status:"done",eventId:N,eventType:J,response:Ke})})()}_subscribe(_,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(b)}_unsubscribe(_,b){this.handlersMap[_]&&b&&this.handlersMap[_].delete(b),(!b||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return E.receivers=[],E})();function Ma(E="",g=10){let _="";for(let b=0;b<g;b++)_+=Math.floor(10*Math.random());return E+_}class Il{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,b=50){var R=this;return(0,f.Z)(function*(){const N="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let J,ye;return new Promise((He,Ve)=>{const Ke=Ma("",20);N.port1.start();const hn=setTimeout(()=>{Ve(new Error("unsupported_event"))},b);ye={messageChannel:N,onMessage(Cn){const Vr=Cn;if(Vr.data.eventId===Ke)switch(Vr.data.status){case"ack":clearTimeout(hn),J=setTimeout(()=>{Ve(new Error("timeout"))},3e3);break;case"done":clearTimeout(J),He(Vr.data.response);break;default:clearTimeout(hn),clearTimeout(J),Ve(new Error("invalid_response"))}}},R.handlers.add(ye),N.port1.addEventListener("message",ye.onMessage),R.target.postMessage({eventType:g,eventId:Ke,data:_},[N.port2])}).finally(()=>{ye&&R.removeMessageHandler(ye)})})()}}function er(){return window}function Ko(){return void 0!==er().WorkerGlobalScope&&"function"==typeof er().importScripts}function ka(){return(ka=(0,f.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(E){return null}})).apply(this,arguments)}const Ss="firebaseLocalStorageDb",Yo="firebaseLocalStorage",Rs="fbase_key";class Qo{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Yc(E,g){return E.transaction([Yo],g?"readwrite":"readonly").objectStore(Yo)}function Ph(){const E=indexedDB.open(Ss,1);return new Promise((g,_)=>{E.addEventListener("error",()=>{_(E.error)}),E.addEventListener("upgradeneeded",()=>{const b=E.result;try{b.createObjectStore(Yo,{keyPath:Rs})}catch(R){_(R)}}),E.addEventListener("success",(0,f.Z)(function*(){const b=E.result;b.objectStoreNames.contains(Yo)?g(b):(b.close(),yield function(){const E=indexedDB.deleteDatabase(Ss);return new Qo(E).toPromise()}(),g(yield Ph()))}))})}function Oh(E,g,_){return An.apply(this,arguments)}function An(){return(An=(0,f.Z)(function*(E,g,_){const b=Yc(E,!0).put({[Rs]:g,value:_});return new Qo(b).toPromise()})).apply(this,arguments)}function Pa(){return(Pa=(0,f.Z)(function*(E,g){const _=Yc(E,!1).get(g),b=yield new Qo(_).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function Fh(E,g){const _=Yc(E,!0).delete(g);return new Qo(_).toPromise()}const Qc=(()=>{class E{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,f.Z)(function*(){return _.db||(_.db=yield Ph()),_.db})()}_withRetries(_){var b=this;return(0,f.Z)(function*(){let R=0;for(;;)try{const N=yield b._openDb();return yield _(N)}catch(N){if(R++>3)throw N;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,f.Z)(function*(){return Ko()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,f.Z)(function*(){_.receiver=Du._getInstance(Ko()?self:null),_.receiver._subscribe("keyChanged",function(){var b=(0,f.Z)(function*(R,N){return{keyProcessed:(yield _._poll()).includes(N.key)}});return function(R,N){return b.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var b=(0,f.Z)(function*(R,N){return["keyChanged"]});return function(R,N){return b.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,f.Z)(function*(){var b,R;if(_.activeServiceWorker=yield function(){return ka.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Il(_.activeServiceWorker);const N=yield _.sender._send("ping",{},800);!N||(null===(b=N[0])||void 0===b?void 0:b.fulfilled)&&(null===(R=N[0])||void 0===R?void 0:R.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var b=this;return(0,f.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function(){var E;return(null===(E=null==navigator?void 0:navigator.serviceWorker)||void 0===E?void 0:E.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:_},b.serviceWorkerReceiverAvailable?800:50)}catch(R){}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Ph();return yield Oh(_,Vt,"1"),yield Fh(_,Vt),!0}catch(_){}return!1})()}_withPendingWrite(_){var b=this;return(0,f.Z)(function*(){b.pendingWrites++;try{yield _()}finally{b.pendingWrites--}})()}_set(_,b){var R=this;return(0,f.Z)(function*(){return R._withPendingWrite((0,f.Z)(function*(){return yield R._withRetries(N=>Oh(N,_,b)),R.localCache[_]=b,R.notifyServiceWorker(_)}))})()}_get(_){var b=this;return(0,f.Z)(function*(){const R=yield b._withRetries(N=>function(E,g){return Pa.apply(this,arguments)}(N,_));return b.localCache[_]=R,R})()}_remove(_){var b=this;return(0,f.Z)(function*(){return b._withPendingWrite((0,f.Z)(function*(){return yield b._withRetries(R=>Fh(R,_)),delete b.localCache[_],b.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,f.Z)(function*(){const b=yield _._withRetries(J=>{const ye=Yc(J,!1).getAll();return new Qo(ye).toPromise()});if(!b)return[];if(0!==_.pendingWrites)return[];const R=[],N=new Set;for(const{fbase_key:J,value:ye}of b)N.add(J),JSON.stringify(_.localCache[J])!==JSON.stringify(ye)&&(_.notifyListeners(J,ye),R.push(J));for(const J of Object.keys(_.localCache))_.localCache[J]&&!N.has(J)&&(_.notifyListeners(J,null),R.push(J));return R})()}notifyListeners(_,b){this.localCache[_]=b;const R=this.listeners[_];if(R)for(const N of Array.from(R))N(b)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(b)}_removeListener(_,b){this.listeners[_]&&(this.listeners[_].delete(b),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return E.type="LOCAL",E})();function Fp(E,g){return vt(E,"POST","/v2/accounts/mfaSignIn:start",Yt(E,g))}function Oa(){return(Oa=(0,f.Z)(function*(E){return(yield vt(E,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Tl(E){return new Promise((g,_)=>{const b=document.createElement("script");b.setAttribute("src",E),b.onload=g,b.onerror=R=>{const N=mn("internal-error");N.customData=R,_(N)},b.type="text/javascript",b.charset="UTF-8",function(){var E,g;return null!==(g=null===(E=document.getElementsByTagName("head"))||void 0===E?void 0:E[0])&&void 0!==g?g:document}().appendChild(b)})}function Vn(E){return`__${E}${Math.floor(1e6*Math.random())}`}const Xc=1e12;class Lp{constructor(g){this.auth=g,this.counter=Xc,this._widgets=new Map}render(g,_){const b=this.counter;return this._widgets.set(b,new Pi(g,this.auth.name,_||{})),this.counter++,b}reset(g){var _;const b=g||Xc;null===(_=this._widgets.get(b))||void 0===_||_.delete(),this._widgets.delete(b)}getResponse(g){var _;return(null===(_=this._widgets.get(g||Xc))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,f.Z)(function*(){var b;return null===(b=_._widgets.get(g||Xc))||void 0===b||b.execute(),""})()}}class Pi{constructor(g,_,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const R="string"==typeof g?document.getElementById(g):g;ke(R,"argument-error",{appName:_}),this.container=R,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(E){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<50;b++)g.push(_.charAt(Math.floor(Math.random()*_.length)));return g.join("")}();const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch(b){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(b){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const _i=Vn("rcb"),yi=new cn(3e4,6e4);class Vp{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!er().grecaptcha}load(g,_=""){return ke((E=_).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(E),g,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(er().grecaptcha):new Promise((b,R)=>{const N=er().setTimeout(()=>{R(mn(g,"network-request-failed"))},yi.get());er()[_i]=()=>{er().clearTimeout(N),delete er()[_i];const ye=er().grecaptcha;if(!ye)return void R(mn(g,"internal-error"));const He=ye.render;ye.render=(Ve,Ke)=>{const hn=He(Ve,Ke);return this.counter++,hn},this.hostLanguage=_,b(ye)},Tl(`https://www.google.com/recaptcha/api.js??${(0,$.xO)({onload:_i,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(N),R(mn(g,"internal-error"))})});var E}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){return!!er().grecaptcha&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class fo{load(g){return(0,f.Z)(function*(){return new Lp(g)})()}clearedOneInstance(){}}const ed="recaptcha",ks={theme:"light",type:"image"};class Uh{constructor(g,_=Object.assign({},ks),b){this.parameters=_,this.type=ed,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=un(b),this.isInvisible="invisible"===this.parameters.size,ke("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const R="string"==typeof g?document.getElementById(g):g;ke(R,this.auth,"argument-error"),this.container=R,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new fo:new Vp,this.validateStartingState()}verify(){var g=this;return(0,f.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),b=g.getAssertedRecaptcha();return b.getResponse(_)||new Promise(N=>{const J=ye=>{!ye||(g.tokenChangeListeners.delete(J),N(ye))};g.tokenChangeListeners.add(J),g.isInvisible&&b.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){ke(!this.parameters.sitekey,this.auth,"argument-error"),ke(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ke("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(b=>b(_)),"function"==typeof g)g(_);else if("string"==typeof g){const b=er()[g];"function"==typeof b&&b(_)}}}assertNotDestroyed(){ke(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,f.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const b=document.createElement("div");_.appendChild(b),_=b}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,f.Z)(function*(){ke(Cs()&&!Ko(),g.auth,"internal-error"),yield function(){let E=null;return new Promise(g=>{"complete"!==document.readyState?(E=()=>g(),window.addEventListener("load",E)):g()}).catch(g=>{throw E&&window.removeEventListener("load",E),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function(E){return Oa.apply(this,arguments)}(g.auth);ke(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return ke(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Fa{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=Jr._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function Au(E,g,_){return Up.apply(this,arguments)}function Up(){return(Up=(0,f.Z)(function*(E,g,_){const b=un(E),R=yield j(b,g,(0,$.m9)(_));return new Fa(R,N=>$o(b,N))})).apply(this,arguments)}function c_(E,g,_){return I.apply(this,arguments)}function I(){return(I=(0,f.Z)(function*(E,g,_){const b=(0,$.m9)(E);yield Pt(!1,b,"phone");const R=yield j(b.auth,g,(0,$.m9)(_));return new Fa(R,N=>Ip(b,N))})).apply(this,arguments)}function A(E,g,_){return M.apply(this,arguments)}function M(){return(M=(0,f.Z)(function*(E,g,_){const b=(0,$.m9)(E),R=yield j(b.auth,g,(0,$.m9)(_));return new Fa(R,N=>yu(b,N))})).apply(this,arguments)}function j(E,g,_){return re.apply(this,arguments)}function re(){return(re=(0,f.Z)(function*(E,g,_){var b;const R=yield _.verify();try{let N;if(ke("string"==typeof R,E,"argument-error"),ke(_.type===ed,E,"argument-error"),N="string"==typeof g?{phoneNumber:g}:g,"session"in N){const J=N.session;if("phoneNumber"in N)return ke("enroll"===J.type,E,"internal-error"),(yield Mp(E,{idToken:J.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:R}})).phoneSessionInfo.sessionInfo;{ke("signin"===J.type,E,"internal-error");const ye=(null===(b=N.multiFactorHint)||void 0===b?void 0:b.uid)||N.multiFactorUid;return ke(ye,E,"missing-multi-factor-info"),(yield Fp(E,{mfaPendingCredential:J.credential,mfaEnrollmentId:ye,phoneSignInInfo:{recaptchaToken:R}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:J}=yield Cp(E,{phoneNumber:N.phoneNumber,recaptchaToken:R});return J}}finally{_._reset()}})).apply(this,arguments)}function ue(E,g){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,f.Z)(function*(E,g){yield Ts((0,$.m9)(E),g)})).apply(this,arguments)}let Qe=(()=>{class E{constructor(_){this.providerId=E.PROVIDER_ID,this.auth=un(_)}verifyPhoneNumber(_,b){return j(this.auth,_,(0,$.m9)(b))}static credential(_,b){return Jr._fromVerification(_,b)}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:b,temporaryProof:R}=_;return b&&R?Jr._fromTokenResponse(b,R):null}}return E.PROVIDER_ID="phone",E.PHONE_SIGN_IN_METHOD="phone",E})();function gt(E,g){return g?Kt(g):(ke(E._popupRedirectResolver,E,"argument-error"),E._popupRedirectResolver)}class ct extends va{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return zi(g,this._buildIdpRequest())}_linkToIdToken(g,_){return zi(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return zi(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function Gt(E){return Ds(E.auth,new ct(E),E.bypassAuthState)}function Ct(E){const{auth:g,user:_}=E;return ke(_,g,"internal-error"),bn(_,new ct(E),E.bypassAuthState)}function Oi(E){return tr.apply(this,arguments)}function tr(){return(tr=(0,f.Z)(function*(E){const{auth:g,user:_}=E;return ke(_,g,"internal-error"),Ts(_,new ct(E),E.bypassAuthState)})).apply(this,arguments)}class Su{constructor(g,_,b,R,N=!1){this.auth=g,this.resolver=b,this.user=R,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,f.Z)(function*(b,R){g.pendingPromise={resolve:b,reject:R};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(N){g.reject(N)}});return function(b,R){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,f.Z)(function*(){const{urlResponse:b,sessionId:R,postBody:N,tenantId:J,error:ye,type:He}=g;if(ye)return void _.reject(ye);const Ve={auth:_.auth,requestUri:b,sessionId:R,tenantId:J||void 0,postBody:N||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(He)(Ve))}catch(Ke){_.reject(Ke)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Gt;case"linkViaPopup":case"linkViaRedirect":return Oi;case"reauthViaPopup":case"reauthViaRedirect":return Ct;default:gn(this.auth,"internal-error")}}resolve(g){hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const La=new cn(2e3,1e4);function Dl(E,g,_){return ps.apply(this,arguments)}function ps(){return(ps=(0,f.Z)(function*(E,g,_){const b=un(E);Kr(E,g,Qt);const R=gt(b,_);return new Al(b,"signInViaPopup",g,R).executeNotNull()})).apply(this,arguments)}function gs(E,g,_){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,f.Z)(function*(E,g,_){const b=(0,$.m9)(E);Kr(b.auth,g,Qt);const R=gt(b.auth,_);return new Al(b.auth,"reauthViaPopup",g,R,b).executeNotNull()})).apply(this,arguments)}function _E(E,g,_){return $n.apply(this,arguments)}function $n(){return($n=(0,f.Z)(function*(E,g,_){const b=(0,$.m9)(E);Kr(b.auth,g,Qt);const R=gt(b.auth,_);return new Al(b.auth,"linkViaPopup",g,R,b).executeNotNull()})).apply(this,arguments)}let Al=(()=>{class E extends Su{constructor(_,b,R,N,J){super(_,b,N,J),this.provider=R,this.authWindow=null,this.pollId=null,E.currentPopupAction&&E.currentPopupAction.cancel(),E.currentPopupAction=this}executeNotNull(){var _=this;return(0,f.Z)(function*(){const b=yield _.execute();return ke(b,_.auth,"internal-error"),b})()}onExecution(){var _=this;return(0,f.Z)(function*(){hr(1===_.filter.length,"Popup operations only handle one event");const b=Ma();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],b),_.authWindow.associatedEvent=b,_.resolver._originValidation(_.auth).catch(R=>{_.reject(R)}),_.resolver._isIframeWebStorageSupported(_.auth,R=>{R||_.reject(mn(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(mn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,E.currentPopupAction=null}pollUserCancellation(){const _=()=>{var b,R;this.pollId=(null===(R=null===(b=this.authWindow)||void 0===b?void 0:b.window)||void 0===R?void 0:R.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(mn(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,La.get())};_()}}return E.currentPopupAction=null,E})();const po=new Map;class Jo extends Su{constructor(g,_,b=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,b),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,f.Z)(function*(){let b=po.get(_.auth._key());if(!b){try{const N=(yield function(E,g){return Xo.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;b=()=>Promise.resolve(N)}catch(R){b=()=>Promise.reject(R)}po.set(_.auth._key(),b)}return _.bypassAuthState||po.set(_.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,b=this;return(0,f.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(b,g);if("unknown"!==g.type){if(g.eventId){const R=yield b.auth._redirectUserForId(g.eventId);if(R)return b.user=R,_().call(b,g);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function Xo(){return(Xo=(0,f.Z)(function*(E,g){const _=go(g),b=xu(E);if(!(yield b._isAvailable()))return!1;const R="true"===(yield b._get(_));return yield b._remove(_),R})).apply(this,arguments)}function Va(E,g){return d_.apply(this,arguments)}function d_(){return(d_=(0,f.Z)(function*(E,g){return xu(E)._set(go(g),"true")})).apply(this,arguments)}function Ua(){po.clear()}function Ps(E,g){po.set(E._key(),g)}function xu(E){return Kt(E._redirectPersistence)}function go(E){return Ai("pendingRedirect",E.config.apiKey,E.name)}function jp(E,g,_){return function(E,g,_){return mo.apply(this,arguments)}(E,g,_)}function mo(){return(mo=(0,f.Z)(function*(E,g,_){const b=un(E);Kr(E,g,Qt);const R=gt(b,_);return yield Va(R,b),R._openRedirect(b,g,"signInViaRedirect")})).apply(this,arguments)}function Ba(E,g,_){return function(E,g,_){return $p.apply(this,arguments)}(E,g,_)}function $p(){return($p=(0,f.Z)(function*(E,g,_){const b=(0,$.m9)(E);Kr(b.auth,g,Qt);const R=gt(b.auth,_);yield Va(R,b.auth);const N=yield LC(b);return R._openRedirect(b.auth,g,"reauthViaRedirect",N)})).apply(this,arguments)}function FC(E,g,_){return function(E,g,_){return ea.apply(this,arguments)}(E,g,_)}function ea(){return(ea=(0,f.Z)(function*(E,g,_){const b=(0,$.m9)(E);Kr(b.auth,g,Qt);const R=gt(b.auth,_);yield Pt(!1,b,g.providerId),yield Va(R,b.auth);const N=yield LC(b);return R._openRedirect(b.auth,g,"linkViaRedirect",N)})).apply(this,arguments)}function h_(E,g){return yE.apply(this,arguments)}function yE(){return(yE=(0,f.Z)(function*(E,g){return yield un(E)._initializationPromise,Hp(E,g,!1)})).apply(this,arguments)}function Hp(E,g){return f_.apply(this,arguments)}function f_(){return(f_=(0,f.Z)(function*(E,g,_=!1){const b=un(E),R=gt(b,g),J=yield new Jo(b,R,_).execute();return J&&!_&&(delete J.user._redirectEventId,yield b._persistUserIfCurrent(J.user),yield b._setRedirectUser(null,g)),J})).apply(this,arguments)}function LC(E){return Gp.apply(this,arguments)}function Gp(){return(Gp=(0,f.Z)(function*(E){const g=Ma(`${E.uid}:::`);return E._redirectEventId=g,yield E.auth._setRedirectUser(E),yield E.auth._persistUserIfCurrent(E),g})).apply(this,arguments)}class g_{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(g,b)&&(_=!0,this.sendToConsumer(g,b),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function(E){switch(E.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return td(E);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var b;if(g.error&&!td(g)){const R=(null===(b=g.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";_.onError(mn(this.auth,R))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const b=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&b}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Hh(g))}saveEventToCache(g){this.cachedEventUids.add(Hh(g)),this.lastProcessedEventTime=Date.now()}}function Hh(E){return[E.type,E.eventId,E.sessionId,E.tenantId].filter(g=>g).join("-")}function td({type:E,error:g}){return"unknown"===E&&"auth/no-auth-event"===(null==g?void 0:g.code)}function m_(E){return qp.apply(this,arguments)}function qp(){return(qp=(0,f.Z)(function*(E,g={}){return vt(E,"GET","/v1/projects",g)})).apply(this,arguments)}const vE=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Gh=/^https?/;function nd(){return(nd=(0,f.Z)(function*(E){if(E.config.emulator)return;const{authorizedDomains:g}=yield m_(E);for(const _ of g)try{if(y_(_))return}catch(b){}gn(E,"unauthorized-domain")})).apply(this,arguments)}function y_(E){const g=Qn(),{protocol:_,hostname:b}=new URL(g);if(E.startsWith("chrome-extension://")){const J=new URL(E);return""===J.hostname&&""===b?"chrome-extension:"===_&&E.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&J.hostname===b}if(!Gh.test(_))return!1;if(vE.test(E))return b===E;const R=E.replace(/\./g,"\\.");return new RegExp("^(.+\\."+R+"|"+R+")$","i").test(b)}const Wp=new cn(3e4,6e4);function ja(){const E=er().___jsl;if(null==E?void 0:E.H)for(const g of Object.keys(E.H))if(E.H[g].r=E.H[g].r||[],E.H[g].L=E.H[g].L||[],E.H[g].r=[...E.H[g].L],E.CP)for(let _=0;_<E.CP.length;_++)E.CP[_]=null}let Sl=null;function EE(E){return Sl=Sl||function(E){return new Promise((g,_)=>{var b,R,N;function J(){ja(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{ja(),_(mn(E,"network-request-failed"))},timeout:Wp.get()})}if(null===(R=null===(b=er().gapi)||void 0===b?void 0:b.iframes)||void 0===R?void 0:R.Iframe)g(gapi.iframes.getContext());else{if(!(null===(N=er().gapi)||void 0===N?void 0:N.load)){const ye=Vn("iframefcb");return er()[ye]=()=>{gapi.load?J():_(mn(E,"network-request-failed"))},Tl(`https://apis.google.com/js/api.js?onload=${ye}`).catch(He=>_(He))}J()}}).catch(g=>{throw Sl=null,g})}(E),Sl}const E_=new cn(5e3,15e3),xl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bE(E){const g=E.config;ke(g.authDomain,E,"auth-domain-config-required");const _=g.emulator?qe(g,"emulator/auth/iframe"):`https://${E.config.authDomain}/__/auth/iframe`,b={apiKey:g.apiKey,appName:E.name,v:O.SDK_VERSION},R=qh.get(E.config.apiHost);R&&(b.eid=R);const N=E._getFrameworks();return N.length&&(b.fw=N.join(",")),`${_}?${(0,$.xO)(b).slice(1)}`}function Wh(){return(Wh=(0,f.Z)(function*(E){const g=yield EE(E),_=er().gapi;return ke(_,E,"internal-error"),g.open({where:document.body,url:bE(E),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xl,dontclear:!0},b=>new Promise(function(){var R=(0,f.Z)(function*(N,J){yield b.restyle({setHideOnLeave:!1});const ye=mn(E,"network-request-failed"),He=er().setTimeout(()=>{J(ye)},E_.get());function Ve(){er().clearTimeout(He),N(b)}b.ping(Ve).then(Ve,()=>{J(ye)})});return function(N,J){return R.apply(this,arguments)}}()))})).apply(this,arguments)}const CE={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Zh{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function Kp(E,g,_,b,R,N){ke(E.config.authDomain,E,"auth-domain-config-required"),ke(E.config.apiKey,E,"invalid-api-key");const J={apiKey:E.config.apiKey,appName:E.name,authType:_,redirectUrl:b,v:O.SDK_VERSION,eventId:R};if(g instanceof Qt){g.setDefaultLanguage(E.languageCode),J.providerId=g.providerId||"",(0,$.xb)(g.getCustomParameters())||(J.customParameters=JSON.stringify(g.getCustomParameters()));for(const[He,Ve]of Object.entries(N||{}))J[He]=Ve}if(g instanceof Ca){const He=g.getScopes().filter(Ve=>""!==Ve);He.length>0&&(J.scopes=He.join(","))}E.tenantId&&(J.tid=E.tenantId);const ye=J;for(const He of Object.keys(ye))void 0===ye[He]&&delete ye[He];return`${function({config:E}){return E.emulator?qe(E,"emulator/auth/handler"):`https://${E.authDomain}/__/auth/handler`}(E)}?${(0,$.xO)(ye).slice(1)}`}const Nu="webStorageSupport",zh=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ao,this._completeRedirectFn=Hp,this._overrideRedirectResult=Ps}_openPopup(g,_,b,R){var N=this;return(0,f.Z)(function*(){var J;hr(null===(J=N.eventManagers[g._key()])||void 0===J?void 0:J.manager,"_initialize() not called before _openPopup()");const ye=Kp(g,_,b,Qn(),R);return function(E,g,_,b=500,R=600){const N=Math.max((window.screen.availHeight-R)/2,0).toString(),J=Math.max((window.screen.availWidth-b)/2,0).toString();let ye="";const He=Object.assign(Object.assign({},CE),{width:b.toString(),height:R.toString(),top:N,left:J}),Ve=(0,$.z$)().toLowerCase();_&&(ye=_a(Ve)?"_blank":_),ma(Ve)&&(g=g||"http://localhost",He.scrollbars="yes");const Ke=Object.entries(He).reduce((Cn,[Vr,ta])=>`${Cn}${Vr}=${ta},`,"");if(function(E=(0,$.z$)()){var g;return fu(E)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(Ve)&&"_self"!==ye)return function(E,g){const _=document.createElement("a");_.href=E,_.target=g;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(b)}(g||"",ye),new Zh(null);const hn=window.open(g||"",ye,Ke);ke(hn,E,"popup-blocked");try{hn.focus()}catch(Cn){}return new Zh(hn)}(g,ye,Ma())})()}_openRedirect(g,_,b,R){var N=this;return(0,f.Z)(function*(){return yield N._originValidation(g),E=Kp(g,_,b,Qn(),R),er().location.href=E,new Promise(()=>{});var E})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:R,promise:N}=this.eventManagers[_];return R?Promise.resolve(R):(hr(N,"If manager is not set, promise should be"),N)}const b=this.initAndGetManager(g);return this.eventManagers[_]={promise:b},b.catch(()=>{delete this.eventManagers[_]}),b}initAndGetManager(g){var _=this;return(0,f.Z)(function*(){const b=yield function(E){return Wh.apply(this,arguments)}(g),R=new g_(g);return b.register("authEvent",N=>(ke(null==N?void 0:N.authEvent,g,"invalid-auth-event"),{status:R.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:R},_.iframes[g._key()]=b,R})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send(Nu,{type:Nu},R=>{var N;const J=null===(N=null==R?void 0:R[0])||void 0===N?void 0:N[Nu];void 0!==J&&_(!!J),gn(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function(E){return nd.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return Is()||Dr()||fu()}};class Qp extends class{constructor(g){this.factorId=g}_process(g,_,b){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,b);case"signin":return this._finalizeSignIn(g,_.credential);default:return Kn("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Qp(g)}_finalizeEnroll(g,_,b){return function(E,g){return vt(E,"POST","/v2/accounts/mfaEnrollment:finalize",Yt(E,g))}(g,{idToken:_,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function(E,g){return vt(E,"POST","/v2/accounts/mfaSignIn:finalize",Yt(E,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let UC=(()=>{class E{constructor(){}static assertion(_){return Qp._fromCredential(_)}}return E.FACTOR_ID="phone",E})();var E,T_="@firebase/auth";class Jp{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,f.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(b=>{var R;g((null===(R=b)||void 0===R?void 0:R.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);!_||(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}E="Browser",(0,O._registerComponent)(new Ge.wA("auth",(g,{options:_})=>{const b=g.getProvider("app").getImmediate(),R=g.getProvider("heartbeat"),{apiKey:N,authDomain:J}=b.options;return((ye,He)=>{ke(N&&!N.includes(":"),"invalid-api-key",{appName:ye.name}),ke(!(null==J?void 0:J.includes(":")),"argument-error",{appName:ye.name});const Ve={apiKey:N,authDomain:J,clientPlatform:E,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ar(E)},Ke=new eo(ye,He,Ve);return function(E,g){const _=(null==g?void 0:g.persistence)||[],b=(Array.isArray(_)?_:[_]).map(Kt);(null==g?void 0:g.errorMap)&&E._updateErrorMap(g.errorMap),E._initializeWithPersistence(b,null==g?void 0:g.popupRedirectResolver)}(Ke,_),Ke})(b,R)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,b)=>{g.getProvider("auth-internal").initialize()})),(0,O._registerComponent)(new Ge.wA("auth-internal",g=>{const _=un(g.getProvider("auth").getImmediate());return new Jp(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,O.registerVersion)(T_,"0.20.2",void 0),(0,O.registerVersion)(T_,"0.20.2","esm2017")},3854:(Je,Ee,V)=>{"use strict";V.d(Ee,{BH:()=>le,LL:()=>Ge,ZR:()=>wt,gQ:()=>ke,zI:()=>je,hu:()=>$,g5:()=>O,US:()=>ne,tV:()=>oe,h$:()=>be,L:()=>te,$s:()=>Yt,r3:()=>zt,Sg:()=>pe,ne:()=>Kn,p$:()=>U,vZ:()=>gn,ZB:()=>H,gK:()=>Qn,pd:()=>Yr,m9:()=>jn,z$:()=>Te,GJ:()=>ls,jU:()=>fe,ru:()=>De,d:()=>Xe,xb:()=>Tn,w1:()=>ht,hl:()=>Oe,uI:()=>we,UG:()=>Be,Yr:()=>Ft,b$:()=>Re,G6:()=>Et,Mn:()=>Wt,w9:()=>Zi,cI:()=>Wi,UI:()=>zn,xO:()=>Ys,zd:()=>Kr,DV:()=>bs,ug:()=>cn,dS:()=>Po,Pz:()=>Zr,Dv:()=>Yn,Wj:()=>Pn,lb:()=>_n,eu:()=>Le});const $=function(z,G){if(!z)throw O(G)},O=function(z){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+z)},ae=function(z){const G=[];let Q=0;for(let ve=0;ve<z.length;ve++){let Z=z.charCodeAt(ve);Z<128?G[Q++]=Z:Z<2048?(G[Q++]=Z>>6|192,G[Q++]=63&Z|128):55296==(64512&Z)&&ve+1<z.length&&56320==(64512&z.charCodeAt(ve+1))?(Z=65536+((1023&Z)<<10)+(1023&z.charCodeAt(++ve)),G[Q++]=Z>>18|240,G[Q++]=Z>>12&63|128,G[Q++]=Z>>6&63|128,G[Q++]=63&Z|128):(G[Q++]=Z>>12|224,G[Q++]=Z>>6&63|128,G[Q++]=63&Z|128)}return G},ne={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(z,G){if(!Array.isArray(z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Q=G?this.byteToCharMapWebSafe_:this.byteToCharMap_,ve=[];for(let Z=0;Z<z.length;Z+=3){const ie=z[Z],Pe=Z+1<z.length,Ze=Pe?z[Z+1]:0,ft=Z+2<z.length,xt=ft?z[Z+2]:0;let fr=(15&Ze)<<2|xt>>6,de=63&xt;ft||(de=64,Pe||(fr=64)),ve.push(Q[ie>>2],Q[(3&ie)<<4|Ze>>4],Q[fr],Q[de])}return ve.join("")},encodeString(z,G){return this.HAS_NATIVE_SUPPORT&&!G?btoa(z):this.encodeByteArray(ae(z),G)},decodeString(z,G){return this.HAS_NATIVE_SUPPORT&&!G?atob(z):function(z){const G=[];let Q=0,ve=0;for(;Q<z.length;){const Z=z[Q++];if(Z<128)G[ve++]=String.fromCharCode(Z);else if(Z>191&&Z<224){const ie=z[Q++];G[ve++]=String.fromCharCode((31&Z)<<6|63&ie)}else if(Z>239&&Z<365){const ft=((7&Z)<<18|(63&z[Q++])<<12|(63&z[Q++])<<6|63&z[Q++])-65536;G[ve++]=String.fromCharCode(55296+(ft>>10)),G[ve++]=String.fromCharCode(56320+(1023&ft))}else{const ie=z[Q++],Pe=z[Q++];G[ve++]=String.fromCharCode((15&Z)<<12|(63&ie)<<6|63&Pe)}}return G.join("")}(this.decodeStringToByteArray(z,G))},decodeStringToByteArray(z,G){this.init_();const Q=G?this.charToByteMapWebSafe_:this.charToByteMap_,ve=[];for(let Z=0;Z<z.length;){const ie=Q[z.charAt(Z++)],Ze=Z<z.length?Q[z.charAt(Z)]:0;++Z;const xt=Z<z.length?Q[z.charAt(Z)]:64;++Z;const Tt=Z<z.length?Q[z.charAt(Z)]:64;if(++Z,null==ie||null==Ze||null==xt||null==Tt)throw Error();ve.push(ie<<2|Ze>>4),64!==xt&&(ve.push(Ze<<4&240|xt>>2),64!==Tt&&ve.push(xt<<6&192|Tt))}return ve},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let z=0;z<this.ENCODED_VALS.length;z++)this.byteToCharMap_[z]=this.ENCODED_VALS.charAt(z),this.charToByteMap_[this.byteToCharMap_[z]]=z,this.byteToCharMapWebSafe_[z]=this.ENCODED_VALS_WEBSAFE.charAt(z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[z]]=z,z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(z)]=z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(z)]=z)}}},be=function(z){const G=ae(z);return ne.encodeByteArray(G,!0)},te=function(z){return be(z).replace(/\./g,"")},oe=function(z){try{return ne.decodeString(z,!0)}catch(G){console.error("base64Decode failed: ",G)}return null};function U(z){return H(void 0,z)}function H(z,G){if(!(G instanceof Object))return G;switch(G.constructor){case Date:return new Date(G.getTime());case Object:void 0===z&&(z={});break;case Array:z=[];break;default:return G}for(const Q in G)!G.hasOwnProperty(Q)||!W(Q)||(z[Q]=H(z[Q],G[Q]));return z}function W(z){return"__proto__"!==z}class le{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((G,Q)=>{this.resolve=G,this.reject=Q})}wrapCallback(G){return(Q,ve)=>{Q?this.reject(Q):this.resolve(ve),"function"==typeof G&&(this.promise.catch(()=>{}),1===G.length?G(Q):G(Q,ve))}}}function pe(z,G){if(z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ve=G||"demo-project",Z=z.iat||0,ie=z.sub||z.user_id;if(!ie)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Pe=Object.assign({iss:`https://securetoken.google.com/${ve}`,aud:ve,iat:Z,exp:Z+3600,auth_time:Z,sub:ie,user_id:ie,firebase:{sign_in_provider:"custom",identities:{}}},z);return[te(JSON.stringify({alg:"none",type:"JWT"})),te(JSON.stringify(Pe)),""].join(".")}function Te(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function we(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Te())}function Be(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(z){return!1}}function fe(){return"object"==typeof self&&self.self===self}function De(){const z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof z&&void 0!==z.id}function Re(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Xe(){return Te().indexOf("Electron/")>=0}function ht(){const z=Te();return z.indexOf("MSIE ")>=0||z.indexOf("Trident/")>=0}function Wt(){return Te().indexOf("MSAppHost/")>=0}function Ft(){return!1}function Et(){return!Be()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Oe(){return"object"==typeof indexedDB}function Le(){return new Promise((z,G)=>{try{let Q=!0;const ve="validate-browser-context-for-indexeddb-analytics-module",Z=self.indexedDB.open(ve);Z.onsuccess=()=>{Z.result.close(),Q||self.indexedDB.deleteDatabase(ve),z(!0)},Z.onupgradeneeded=()=>{Q=!1},Z.onerror=()=>{var ie;G((null===(ie=Z.error)||void 0===ie?void 0:ie.message)||"")}}catch(Q){G(Q)}})}function je(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class wt extends Error{constructor(G,Q,ve){super(Q),this.code=G,this.customData=ve,this.name="FirebaseError",Object.setPrototypeOf(this,wt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ge.prototype.create)}}class Ge{constructor(G,Q,ve){this.service=G,this.serviceName=Q,this.errors=ve}create(G,...Q){const ve=Q[0]||{},Z=`${this.service}/${G}`,ie=this.errors[G],Pe=ie?function(z,G){return z.replace(Tr,(Q,ve)=>{const Z=G[ve];return null!=Z?String(Z):`<${ve}?>`})}(ie,ve):"Error";return new wt(Z,`${this.serviceName}: ${Pe} (${Z}).`,ve)}}const Tr=/\{\$([^}]+)}/g;function Wi(z){return JSON.parse(z)}function Zr(z){return JSON.stringify(z)}const kn=function(z){let G={},Q={},ve={},Z="";try{const ie=z.split(".");G=Wi(oe(ie[0])||""),Q=Wi(oe(ie[1])||""),Z=ie[2],ve=Q.d||{},delete Q.d}catch(ie){}return{header:G,claims:Q,data:ve,signature:Z}},Zi=function(z){const Q=kn(z).claims;return!!Q&&"object"==typeof Q&&Q.hasOwnProperty("iat")},ls=function(z){const G=kn(z).claims;return"object"==typeof G&&!0===G.admin};function zt(z,G){return Object.prototype.hasOwnProperty.call(z,G)}function bs(z,G){if(Object.prototype.hasOwnProperty.call(z,G))return z[G]}function Tn(z){for(const G in z)if(Object.prototype.hasOwnProperty.call(z,G))return!1;return!0}function zn(z,G,Q){const ve={};for(const Z in z)Object.prototype.hasOwnProperty.call(z,Z)&&(ve[Z]=G.call(Q,z[Z],Z,z));return ve}function gn(z,G){if(z===G)return!0;const Q=Object.keys(z),ve=Object.keys(G);for(const Z of Q){if(!ve.includes(Z))return!1;const ie=z[Z],Pe=G[Z];if(mn(ie)&&mn(Pe)){if(!gn(ie,Pe))return!1}else if(ie!==Pe)return!1}for(const Z of ve)if(!Q.includes(Z))return!1;return!0}function mn(z){return null!==z&&"object"==typeof z}function Ys(z){const G=[];for(const[Q,ve]of Object.entries(z))Array.isArray(ve)?ve.forEach(Z=>{G.push(encodeURIComponent(Q)+"="+encodeURIComponent(Z))}):G.push(encodeURIComponent(Q)+"="+encodeURIComponent(ve));return G.length?"&"+G.join("&"):""}function Kr(z){const G={};return z.replace(/^\?/,"").split("&").forEach(ve=>{if(ve){const[Z,ie]=ve.split("=");G[decodeURIComponent(Z)]=decodeURIComponent(ie)}}),G}function Yr(z){const G=z.indexOf("?");if(!G)return"";const Q=z.indexOf("#",G);return z.substring(G,Q>0?Q:void 0)}class ke{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let G=1;G<this.blockSize;++G)this.pad_[G]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(G,Q){Q||(Q=0);const ve=this.W_;if("string"==typeof G)for(let Tt=0;Tt<16;Tt++)ve[Tt]=G.charCodeAt(Q)<<24|G.charCodeAt(Q+1)<<16|G.charCodeAt(Q+2)<<8|G.charCodeAt(Q+3),Q+=4;else for(let Tt=0;Tt<16;Tt++)ve[Tt]=G[Q]<<24|G[Q+1]<<16|G[Q+2]<<8|G[Q+3],Q+=4;for(let Tt=16;Tt<80;Tt++){const fr=ve[Tt-3]^ve[Tt-8]^ve[Tt-14]^ve[Tt-16];ve[Tt]=4294967295&(fr<<1|fr>>>31)}let xt,yn,Z=this.chain_[0],ie=this.chain_[1],Pe=this.chain_[2],Ze=this.chain_[3],ft=this.chain_[4];for(let Tt=0;Tt<80;Tt++){Tt<40?Tt<20?(xt=Ze^ie&(Pe^Ze),yn=1518500249):(xt=ie^Pe^Ze,yn=1859775393):Tt<60?(xt=ie&Pe|Ze&(ie|Pe),yn=2400959708):(xt=ie^Pe^Ze,yn=3395469782);const fr=(Z<<5|Z>>>27)+xt+ft+yn+ve[Tt]&4294967295;ft=Ze,Ze=Pe,Pe=4294967295&(ie<<30|ie>>>2),ie=Z,Z=fr}this.chain_[0]=this.chain_[0]+Z&4294967295,this.chain_[1]=this.chain_[1]+ie&4294967295,this.chain_[2]=this.chain_[2]+Pe&4294967295,this.chain_[3]=this.chain_[3]+Ze&4294967295,this.chain_[4]=this.chain_[4]+ft&4294967295}update(G,Q){if(null==G)return;void 0===Q&&(Q=G.length);const ve=Q-this.blockSize;let Z=0;const ie=this.buf_;let Pe=this.inbuf_;for(;Z<Q;){if(0===Pe)for(;Z<=ve;)this.compress_(G,Z),Z+=this.blockSize;if("string"==typeof G){for(;Z<Q;)if(ie[Pe]=G.charCodeAt(Z),++Pe,++Z,Pe===this.blockSize){this.compress_(ie),Pe=0;break}}else for(;Z<Q;)if(ie[Pe]=G[Z],++Pe,++Z,Pe===this.blockSize){this.compress_(ie),Pe=0;break}}this.inbuf_=Pe,this.total_+=Q}digest(){const G=[];let Q=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Z=this.blockSize-1;Z>=56;Z--)this.buf_[Z]=255&Q,Q/=256;this.compress_(this.buf_);let ve=0;for(let Z=0;Z<5;Z++)for(let ie=24;ie>=0;ie-=8)G[ve]=this.chain_[Z]>>ie&255,++ve;return G}}function Kn(z,G){const Q=new hr(z,G);return Q.subscribe.bind(Q)}class hr{constructor(G,Q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Q,this.task.then(()=>{G(this)}).catch(ve=>{this.error(ve)})}next(G){this.forEachObserver(Q=>{Q.next(G)})}error(G){this.forEachObserver(Q=>{Q.error(G)}),this.close(G)}complete(){this.forEachObserver(G=>{G.complete()}),this.close()}subscribe(G,Q,ve){let Z;if(void 0===G&&void 0===Q&&void 0===ve)throw new Error("Missing Observer.");Z=function(z,G){if("object"!=typeof z||null===z)return!1;for(const Q of["next","error","complete"])if(Q in z&&"function"==typeof z[Q])return!0;return!1}(G)?G:{next:G,error:Q,complete:ve},void 0===Z.next&&(Z.next=Dn),void 0===Z.error&&(Z.error=Dn),void 0===Z.complete&&(Z.complete=Dn);const ie=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Z.error(this.finalError):Z.complete()}catch(Pe){}}),this.observers.push(Z),ie}unsubscribeOne(G){void 0===this.observers||void 0===this.observers[G]||(delete this.observers[G],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(G){if(!this.finalized)for(let Q=0;Q<this.observers.length;Q++)this.sendOne(Q,G)}sendOne(G,Q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[G])try{Q(this.observers[G])}catch(ve){"undefined"!=typeof console&&console.error&&console.error(ve)}})}close(G){this.finalized||(this.finalized=!0,void 0!==G&&(this.finalError=G),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Dn(){}const Yn=function(z,G,Q,ve){let Z;if(ve<G?Z="at least "+G:ve>Q&&(Z=0===Q?"none":"no more than "+Q),Z)throw new Error(z+" failed: Was called with "+ve+(1===ve?" argument.":" arguments.")+" Expects "+Z+".")};function Qn(z,G){return`${z} failed: ${G} argument `}function Pn(z,G,Q,ve){if((!ve||Q)&&"function"!=typeof Q)throw new Error(Qn(z,G)+"must be a valid function.")}function _n(z,G,Q,ve){if((!ve||Q)&&("object"!=typeof Q||null===Q))throw new Error(Qn(z,G)+"must be a valid context object.")}const Po=function(z){const G=[];let Q=0;for(let ve=0;ve<z.length;ve++){let Z=z.charCodeAt(ve);if(Z>=55296&&Z<=56319){const ie=Z-55296;ve++,$(ve<z.length,"Surrogate pair missing trail surrogate."),Z=65536+(ie<<10)+(z.charCodeAt(ve)-56320)}Z<128?G[Q++]=Z:Z<2048?(G[Q++]=Z>>6|192,G[Q++]=63&Z|128):Z<65536?(G[Q++]=Z>>12|224,G[Q++]=Z>>6&63|128,G[Q++]=63&Z|128):(G[Q++]=Z>>18|240,G[Q++]=Z>>12&63|128,G[Q++]=Z>>6&63|128,G[Q++]=63&Z|128)}return G},cn=function(z){let G=0;for(let Q=0;Q<z.length;Q++){const ve=z.charCodeAt(Q);ve<128?G++:ve<2048?G+=2:ve>=55296&&ve<=56319?(G+=4,Q++):G+=3}return G};function Yt(z,G=1e3,Q=2){const ve=G*Math.pow(Q,z),Z=Math.round(.5*ve*(Math.random()-.5)*2);return Math.min(144e5,ve+Z)}function jn(z){return z&&z._delegate?z._delegate:z}},2329:(Je,Ee,V)=>{"use strict";V.d(Ee,{Mq:()=>f.getApp,C6:()=>f.getApps});var f=V(8026);(0,f.registerVersion)("firebase","9.8.2","app")},7841:(Je,Ee,V)=>{"use strict";V.d(Ee,{Z:()=>f.Z});var f=V(3394);f.Z.registerVersion("firebase","9.8.2","app-compat")},4828:(Je,Ee,V)=>{"use strict";V.r(Ee);var f=V(8239),$=V(3394),O=V(7014),ae=V(3854),be=(V(8026),V(5422),V(3910));function te(){return window}function H(){return(H=(0,f.Z)(function*(de,ee,K){var Ae;const{BuildInfo:$e}=te();(0,O.aq)(ee.sessionId,"AuthEvent did not contain a session ID");const Nt=yield fe(ee.sessionId),Mt={};return(0,O.ar)()?Mt.ibi=$e.packageName:(0,O.as)()?Mt.apn=$e.packageName:(0,O.at)(de,"operation-not-supported-in-this-environment"),$e.displayName&&(Mt.appDisplayName=$e.displayName),Mt.sessionId=Nt,(0,O.au)(de,K,ee.type,void 0,null!==(Ae=ee.eventId)&&void 0!==Ae?Ae:void 0,Mt)})).apply(this,arguments)}function le(){return(le=(0,f.Z)(function*(de){const{BuildInfo:ee}=te(),K={};(0,O.ar)()?K.iosBundleId=ee.packageName:(0,O.as)()?K.androidPackageName=ee.packageName:(0,O.at)(de,"operation-not-supported-in-this-environment"),yield(0,O.av)(de,K)})).apply(this,arguments)}function we(){return(we=(0,f.Z)(function*(de,ee,K){const{cordova:Ae}=te();let $e=()=>{};try{yield new Promise((Nt,Mt)=>{let Dt=null;function an(){var jt;Nt();const xn=null===(jt=Ae.plugins.browsertab)||void 0===jt?void 0:jt.close;"function"==typeof xn&&xn(),"function"==typeof(null==K?void 0:K.close)&&K.close()}function On(){Dt||(Dt=window.setTimeout(()=>{Mt((0,O.aw)(de,"redirect-cancelled-by-user"))},2e3))}function Fn(){"visible"===(null==document?void 0:document.visibilityState)&&On()}ee.addPassiveListener(an),document.addEventListener("resume",On,!1),(0,O.as)()&&document.addEventListener("visibilitychange",Fn,!1),$e=()=>{ee.removePassiveListener(an),document.removeEventListener("resume",On,!1),document.removeEventListener("visibilitychange",Fn,!1),Dt&&window.clearTimeout(Dt)}})}finally{$e()}})).apply(this,arguments)}function fe(de){return De.apply(this,arguments)}function De(){return(De=(0,f.Z)(function*(de){const ee=Re(de),K=yield crypto.subtle.digest("SHA-256",ee);return Array.from(new Uint8Array(K)).map($e=>$e.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Re(de){if((0,O.aq)(/[0-9a-zA-Z]+/.test(de),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(de);const ee=new ArrayBuffer(de.length),K=new Uint8Array(ee);for(let Ae=0;Ae<de.length;Ae++)K[Ae]=de.charCodeAt(Ae);return K}class ht extends O.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(ee=>{this.resolveInialized=ee})}addPassiveListener(ee){this.passiveListeners.add(ee)}removePassiveListener(ee){this.passiveListeners.delete(ee)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(ee){return this.resolveInialized(),this.passiveListeners.forEach(K=>K(ee)),super.onEvent(ee)}initialized(){var ee=this;return(0,f.Z)(function*(){yield ee.initPromise})()}}function Et(de){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,f.Z)(function*(de){const ee=yield _t()._get(rt(de));return ee&&(yield _t()._remove(rt(de))),ee})).apply(this,arguments)}function je(){const de=[],ee="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let K=0;K<20;K++){const Ae=Math.floor(Math.random()*ee.length);de.push(ee.charAt(Ae))}return de.join("")}function _t(){return(0,O.ay)(O.b)}function rt(de){return(0,O.az)("authEvent",de.config.apiKey,de.name)}function Fr(de){if(!(null==de?void 0:de.includes("?")))return{};const[ee,...K]=de.split("?");return(0,ae.zd)(K.join("?"))}function kn(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,O.aw)("no-auth-event")}}function zt(){var de;return(null===(de=null==self?void 0:self.location)||void 0===de?void 0:de.protocol)||null}function Tn(de=(0,ae.z$)()){return!("file:"!==zt()&&"ionic:"!==zt()&&"capacitor:"!==zt()||!de.toLowerCase().match(/iphone|ipad|ipod|android/))}function Kr(){try{const de=self.localStorage,ee=O.aI();if(de)return de.setItem(ee,"1"),de.removeItem(ee),!function(de=(0,ae.z$)()){return(0,ae.w1)()&&11===(null==document?void 0:document.documentMode)||function(de=(0,ae.z$)()){return/Edge\/\d+/.test(de)}(de)}()||(0,ae.hl)()}catch(de){return Yr()&&(0,ae.hl)()}return!1}function Yr(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function ke(){return("http:"===zt()||"https:"===zt()||(0,ae.ru)()||Tn())&&!((0,ae.b$)()||(0,ae.UG)())&&Kr()&&!Yr()}function Kn(){return Tn()&&"undefined"!=typeof document}function et(){return(et=(0,f.Z)(function*(){return!!Kn()&&new Promise(de=>{const ee=setTimeout(()=>{de(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(ee),de(!0)})})})).apply(this,arguments)}const Dn={LOCAL:"local",NONE:"none",SESSION:"session"},Yn=O.ax,Qn="persistence";function Pn(de){return _n.apply(this,arguments)}function _n(){return(_n=(0,f.Z)(function*(de){yield de._initializationPromise;const ee=cn(),K=O.az(Qn,de.config.apiKey,de.name);ee&&ee.setItem(K,de._getPersistence())})).apply(this,arguments)}function cn(){var de;try{return(null===(de="undefined"!=typeof window?window:null)||void 0===de?void 0:de.sessionStorage)||null}catch(ee){return null}}const qe=O.ax;class ot{constructor(){this.browserResolver=O.ay(O.k),this.cordovaResolver=O.ay(class{constructor(){this._redirectPersistence=O.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=O.aB,this._overrideRedirectResult=O.aC}_initialize(ee){var K=this;return(0,f.Z)(function*(){const Ae=ee._key();let $e=K.eventManagers.get(Ae);return $e||($e=new ht(ee),K.eventManagers.set(Ae,$e),K.attachCallbackListeners(ee,$e)),$e})()}_openPopup(ee){(0,O.at)(ee,"operation-not-supported-in-this-environment")}_openRedirect(ee,K,Ae,$e){var Nt=this;return(0,f.Z)(function*(){!function(de){var ee,K,Ae,$e,Nt,Mt,Dt,an,On,Fn;const jt=te();(0,O.ax)("function"==typeof(null===(ee=null==jt?void 0:jt.universalLinks)||void 0===ee?void 0:ee.subscribe),de,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,O.ax)(void 0!==(null===(K=null==jt?void 0:jt.BuildInfo)||void 0===K?void 0:K.packageName),de,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,O.ax)("function"==typeof(null===(Nt=null===($e=null===(Ae=null==jt?void 0:jt.cordova)||void 0===Ae?void 0:Ae.plugins)||void 0===$e?void 0:$e.browsertab)||void 0===Nt?void 0:Nt.openUrl),de,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.ax)("function"==typeof(null===(an=null===(Dt=null===(Mt=null==jt?void 0:jt.cordova)||void 0===Mt?void 0:Mt.plugins)||void 0===Dt?void 0:Dt.browsertab)||void 0===an?void 0:an.isAvailable),de,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.ax)("function"==typeof(null===(Fn=null===(On=null==jt?void 0:jt.cordova)||void 0===On?void 0:On.InAppBrowser)||void 0===Fn?void 0:Fn.open),de,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(ee);const Mt=yield Nt._initialize(ee);yield Mt.initialized(),Mt.resetRedirect(),(0,O.aD)(),yield Nt._originValidation(ee);const Dt=function(de,ee,K=null){return{type:ee,eventId:K,urlResponse:null,sessionId:je(),postBody:null,tenantId:de.tenantId,error:(0,O.aw)(de,"no-auth-event")}}(ee,Ae,$e);yield function(de,ee){return _t()._set(rt(de),ee)}(ee,Dt);const an=yield function(de,ee,K){return H.apply(this,arguments)}(ee,Dt,K),On=yield function(de){const{cordova:ee}=te();return new Promise(K=>{ee.plugins.browsertab.isAvailable(Ae=>{let $e=null;Ae?ee.plugins.browsertab.openUrl(de):$e=ee.InAppBrowser.open(de,(0,O.ap)()?"_blank":"_system","location=yes"),K($e)})})}(an);return function(de,ee,K){return we.apply(this,arguments)}(ee,Mt,On)})()}_isIframeWebStorageSupported(ee,K){throw new Error("Method not implemented.")}_originValidation(ee){const K=ee._key();return this.originValidationPromises[K]||(this.originValidationPromises[K]=function(de){return le.apply(this,arguments)}(ee)),this.originValidationPromises[K]}attachCallbackListeners(ee,K){const{universalLinks:Ae,handleOpenURL:$e,BuildInfo:Nt}=te(),Mt=setTimeout((0,f.Z)(function*(){yield Et(ee),K.onEvent(kn())}),500),Dt=function(){var Fn=(0,f.Z)(function*(jt){clearTimeout(Mt);const xn=yield Et(ee);let We=null;xn&&(null==jt?void 0:jt.url)&&(We=function(de,ee){var K,Ae;const $e=function(de){const ee=Fr(de),K=ee.link?decodeURIComponent(ee.link):void 0,Ae=Fr(K).link,$e=ee.deep_link_id?decodeURIComponent(ee.deep_link_id):void 0;return Fr($e).link||$e||Ae||K||de}(ee);if($e.includes("/__/auth/callback")){const Nt=Fr($e),Mt=Nt.firebaseError?function(de){try{return JSON.parse(de)}catch(ee){return null}}(decodeURIComponent(Nt.firebaseError)):null,Dt=null===(Ae=null===(K=null==Mt?void 0:Mt.code)||void 0===K?void 0:K.split("auth/"))||void 0===Ae?void 0:Ae[1],an=Dt?(0,O.aw)(Dt):null;return an?{type:de.type,eventId:de.eventId,tenantId:de.tenantId,error:an,urlResponse:null,sessionId:null,postBody:null}:{type:de.type,eventId:de.eventId,tenantId:de.tenantId,sessionId:de.sessionId,urlResponse:$e,postBody:null}}return null}(xn,jt.url)),K.onEvent(We||kn())});return function(xn){return Fn.apply(this,arguments)}}();void 0!==Ae&&"function"==typeof Ae.subscribe&&Ae.subscribe(null,Dt);const an=$e,On=`${Nt.packageName.toLowerCase()}://`;te().handleOpenURL=function(){var Fn=(0,f.Z)(function*(jt){if(jt.toLowerCase().startsWith(On)&&Dt({url:jt}),"function"==typeof an)try{an(jt)}catch(xn){console.error(xn)}});return function(jt){return Fn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=O.a,this._completeRedirectFn=O.aB,this._overrideRedirectResult=O.aC}_initialize(ee){var K=this;return(0,f.Z)(function*(){return yield K.selectUnderlyingResolver(),K.assertedUnderlyingResolver._initialize(ee)})()}_openPopup(ee,K,Ae,$e){var Nt=this;return(0,f.Z)(function*(){return yield Nt.selectUnderlyingResolver(),Nt.assertedUnderlyingResolver._openPopup(ee,K,Ae,$e)})()}_openRedirect(ee,K,Ae,$e){var Nt=this;return(0,f.Z)(function*(){return yield Nt.selectUnderlyingResolver(),Nt.assertedUnderlyingResolver._openRedirect(ee,K,Ae,$e)})()}_isIframeWebStorageSupported(ee,K){this.assertedUnderlyingResolver._isIframeWebStorageSupported(ee,K)}_originValidation(ee){return this.assertedUnderlyingResolver._originValidation(ee)}get _shouldInitProactively(){return Kn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return qe(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var ee=this;return(0,f.Z)(function*(){if(ee.underlyingResolver)return;const K=yield function(){return et.apply(this,arguments)}();ee.underlyingResolver=K?ee.cordovaResolver:ee.browserResolver})()}}function cs(de){return de.unwrap()}function Yt(de){return or(de)}function or(de){const{_tokenResponse:ee}=de instanceof ae.ZR?de.customData:de;if(!ee)return null;if(!(de instanceof ae.ZR)&&"temporaryProof"in ee&&"phoneNumber"in ee)return O.P.credentialFromResult(de);const K=ee.providerId;if(!K||K===O.o.PASSWORD)return null;let Ae;switch(K){case O.o.GOOGLE:Ae=O.Q;break;case O.o.FACEBOOK:Ae=O.N;break;case O.o.GITHUB:Ae=O.T;break;case O.o.TWITTER:Ae=O.W;break;default:const{oauthIdToken:$e,oauthAccessToken:Nt,oauthTokenSecret:Mt,pendingToken:Dt,nonce:an}=ee;return Nt||Mt||$e||Dt?Dt?K.startsWith("saml.")?O.aL._create(K,Dt):O.J._fromParams({providerId:K,signInMethod:K,pendingToken:Dt,idToken:$e,accessToken:Nt}):new O.U(K).credential({idToken:$e,accessToken:Nt,rawNonce:an}):null}return de instanceof ae.ZR?Ae.credentialFromError(de):Ae.credentialFromResult(de)}function jn(de,ee){return ee.catch(K=>{throw K instanceof ae.ZR&&function(de,ee){var K;const Ae=null===(K=ee.customData)||void 0===K?void 0:K._tokenResponse;if("auth/multi-factor-auth-required"===ee.code)ee.resolver=new Q(de,O.an(de,ee));else if(Ae){const $e=or(ee),Nt=ee;$e&&(Nt.credential=$e,Nt.tenantId=Ae.tenantId||void 0,Nt.email=Ae.email||void 0,Nt.phoneNumber=Ae.phoneNumber||void 0)}}(de,K),K}).then(K=>{const $e=K.user;return{operationType:K.operationType,credential:Yt(K),additionalUserInfo:O.al(K),user:ve.getOrCreate($e)}})}function z(de,ee){return G.apply(this,arguments)}function G(){return(G=(0,f.Z)(function*(de,ee){const K=yield ee;return{verificationId:K.verificationId,confirm:Ae=>jn(de,K.confirm(Ae))}})).apply(this,arguments)}class Q{constructor(ee,K){this.resolver=K,this.auth=ee.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(ee){return jn(cs(this.auth),this.resolver.resolveSignIn(ee))}}class ve{constructor(ee){this._delegate=ee,this.multiFactor=O.ao(ee)}static getOrCreate(ee){return ve.USER_MAP.has(ee)||ve.USER_MAP.set(ee,new ve(ee)),ve.USER_MAP.get(ee)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(ee){return this._delegate.getIdTokenResult(ee)}getIdToken(ee){return this._delegate.getIdToken(ee)}linkAndRetrieveDataWithCredential(ee){return this.linkWithCredential(ee)}linkWithCredential(ee){var K=this;return(0,f.Z)(function*(){return jn(K.auth,O.Z(K._delegate,ee))})()}linkWithPhoneNumber(ee,K){var Ae=this;return(0,f.Z)(function*(){return z(Ae.auth,O.l(Ae._delegate,ee,K))})()}linkWithPopup(ee){var K=this;return(0,f.Z)(function*(){return jn(K.auth,O.d(K._delegate,ee,ot))})()}linkWithRedirect(ee){var K=this;return(0,f.Z)(function*(){return yield Pn(O.aE(K.auth)),O.g(K._delegate,ee,ot)})()}reauthenticateAndRetrieveDataWithCredential(ee){return this.reauthenticateWithCredential(ee)}reauthenticateWithCredential(ee){var K=this;return(0,f.Z)(function*(){return jn(K.auth,O._(K._delegate,ee))})()}reauthenticateWithPhoneNumber(ee,K){return z(this.auth,O.r(this._delegate,ee,K))}reauthenticateWithPopup(ee){return jn(this.auth,O.e(this._delegate,ee,ot))}reauthenticateWithRedirect(ee){var K=this;return(0,f.Z)(function*(){return yield Pn(O.aE(K.auth)),O.h(K._delegate,ee,ot)})()}sendEmailVerification(ee){return O.ab(this._delegate,ee)}unlink(ee){var K=this;return(0,f.Z)(function*(){return yield O.ak(K._delegate,ee),K})()}updateEmail(ee){return O.ag(this._delegate,ee)}updatePassword(ee){return O.ah(this._delegate,ee)}updatePhoneNumber(ee){return O.u(this._delegate,ee)}updateProfile(ee){return O.af(this._delegate,ee)}verifyBeforeUpdateEmail(ee,K){return O.ac(this._delegate,ee,K)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ve.USER_MAP=new WeakMap;const Z=O.ax;let ie=(()=>{class de{constructor(K,Ae){if(this.app=K,Ae.isInitialized())return this._delegate=Ae.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:$e}=K.options;Z($e,"invalid-api-key",{appName:K.name}),Z($e,"invalid-api-key",{appName:K.name});const Nt="undefined"!=typeof window?ot:void 0;this._delegate=Ae.initialize({options:{persistence:Ze($e,K.name),popupRedirectResolver:Nt}}),this._delegate._updateErrorMap(O.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ve.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(K){this._delegate.languageCode=K}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(K){this._delegate.tenantId=K}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(K,Ae){O.G(this._delegate,K,Ae)}applyActionCode(K){return O.a2(this._delegate,K)}checkActionCode(K){return O.a3(this._delegate,K)}confirmPasswordReset(K,Ae){return O.a1(this._delegate,K,Ae)}createUserWithEmailAndPassword(K,Ae){var $e=this;return(0,f.Z)(function*(){return jn($e._delegate,O.a5($e._delegate,K,Ae))})()}fetchProvidersForEmail(K){return this.fetchSignInMethodsForEmail(K)}fetchSignInMethodsForEmail(K){return O.aa(this._delegate,K)}isSignInWithEmailLink(K){return O.a8(this._delegate,K)}getRedirectResult(){var K=this;return(0,f.Z)(function*(){Z(ke(),K._delegate,"operation-not-supported-in-this-environment");const Ae=yield O.j(K._delegate,ot);return Ae?jn(K._delegate,Promise.resolve(Ae)):{credential:null,user:null}})()}addFrameworkForLogging(K){!function(de,ee){(0,O.aE)(de)._logFramework(ee)}(this._delegate,K)}onAuthStateChanged(K,Ae,$e){const{next:Nt,error:Mt,complete:Dt}=Pe(K,Ae,$e);return this._delegate.onAuthStateChanged(Nt,Mt,Dt)}onIdTokenChanged(K,Ae,$e){const{next:Nt,error:Mt,complete:Dt}=Pe(K,Ae,$e);return this._delegate.onIdTokenChanged(Nt,Mt,Dt)}sendSignInLinkToEmail(K,Ae){return O.a7(this._delegate,K,Ae)}sendPasswordResetEmail(K,Ae){return O.a0(this._delegate,K,Ae||void 0)}setPersistence(K){var Ae=this;return(0,f.Z)(function*(){let $e;switch(function(de,ee){Yn(Object.values(Dn).includes(ee),de,"invalid-persistence-type"),(0,ae.b$)()?Yn(ee!==Dn.SESSION,de,"unsupported-persistence-type"):(0,ae.UG)()?Yn(ee===Dn.NONE,de,"unsupported-persistence-type"):Yr()?Yn(ee===Dn.NONE||ee===Dn.LOCAL&&(0,ae.hl)(),de,"unsupported-persistence-type"):Yn(ee===Dn.NONE||Kr(),de,"unsupported-persistence-type")}(Ae._delegate,K),K){case Dn.SESSION:$e=O.a;break;case Dn.LOCAL:$e=(yield O.ay(O.i)._isAvailable())?O.i:O.b;break;case Dn.NONE:$e=O.L;break;default:return O.at("argument-error",{appName:Ae._delegate.name})}return Ae._delegate.setPersistence($e)})()}signInAndRetrieveDataWithCredential(K){return this.signInWithCredential(K)}signInAnonymously(){return jn(this._delegate,O.X(this._delegate))}signInWithCredential(K){return jn(this._delegate,O.Y(this._delegate,K))}signInWithCustomToken(K){return jn(this._delegate,O.$(this._delegate,K))}signInWithEmailAndPassword(K,Ae){return jn(this._delegate,O.a6(this._delegate,K,Ae))}signInWithEmailLink(K,Ae){return jn(this._delegate,O.a9(this._delegate,K,Ae))}signInWithPhoneNumber(K,Ae){return z(this._delegate,O.s(this._delegate,K,Ae))}signInWithPopup(K){var Ae=this;return(0,f.Z)(function*(){return Z(ke(),Ae._delegate,"operation-not-supported-in-this-environment"),jn(Ae._delegate,O.c(Ae._delegate,K,ot))})()}signInWithRedirect(K){var Ae=this;return(0,f.Z)(function*(){return Z(ke(),Ae._delegate,"operation-not-supported-in-this-environment"),yield Pn(Ae._delegate),O.f(Ae._delegate,K,ot)})()}updateCurrentUser(K){return this._delegate.updateCurrentUser(K)}verifyPasswordResetCode(K){return O.a4(this._delegate,K)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return de.Persistence=Dn,de})();function Pe(de,ee,K){let Ae=de;"function"!=typeof de&&({next:Ae,error:ee,complete:K}=de);const $e=Ae;return{next:Mt=>$e(Mt&&ve.getOrCreate(Mt)),error:ee,complete:K}}function Ze(de,ee){const K=function(de,ee){const K=cn();if(!K)return[];const Ae=O.az(Qn,de,ee);switch(K.getItem(Ae)){case Dn.NONE:return[O.L];case Dn.LOCAL:return[O.i,O.a];case Dn.SESSION:return[O.a];default:return[]}}(de,ee);if("undefined"!=typeof self&&!K.includes(O.i)&&K.push(O.i),"undefined"!=typeof window)for(const Ae of[O.b,O.a])K.includes(Ae)||K.push(Ae);return K.includes(O.L)||K.push(O.L),K}class ft{constructor(){this.providerId="phone",this._delegate=new O.P(cs($.Z.auth()))}static credential(ee,K){return O.P.credential(ee,K)}verifyPhoneNumber(ee,K){return this._delegate.verifyPhoneNumber(ee,K)}unwrap(){return this._delegate}}ft.PHONE_SIGN_IN_METHOD=O.P.PHONE_SIGN_IN_METHOD,ft.PROVIDER_ID=O.P.PROVIDER_ID;const xt=O.ax;var de;(de=$.Z).INTERNAL.registerComponent(new be.wA("auth-compat",ee=>{const K=ee.getProvider("app-compat").getImmediate(),Ae=ee.getProvider("auth");return new ie(K,Ae)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:O.A.EMAIL_SIGNIN,PASSWORD_RESET:O.A.PASSWORD_RESET,RECOVER_EMAIL:O.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:O.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:O.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:O.A.VERIFY_EMAIL}},EmailAuthProvider:O.M,FacebookAuthProvider:O.N,GithubAuthProvider:O.T,GoogleAuthProvider:O.Q,OAuthProvider:O.U,SAMLAuthProvider:O.V,PhoneAuthProvider:ft,PhoneMultiFactorGenerator:O.m,RecaptchaVerifier:class{constructor(ee,K,Ae=$.Z.app()){var $e;xt(null===($e=Ae.options)||void 0===$e?void 0:$e.apiKey,"invalid-api-key",{appName:Ae.name}),this._delegate=new O.R(ee,K,Ae.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:O.W,Auth:ie,AuthCredential:O.H,Error:ae.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),de.registerVersion("@firebase/auth-compat","0.2.15")},7574:(Je,Ee,V)=>{"use strict";V.d(Ee,{y:()=>H});var f=V(7393),O=V(9181),ae=V(6490),ne=V(6554),be=V(4487);var U=V(2494);let H=(()=>{class le{constructor(Te){this._isScalar=!1,Te&&(this._subscribe=Te)}lift(Te){const we=new le;return we.source=this,we.operator=Te,we}subscribe(Te,we,Be){const{operator:fe}=this,De=function(le,pe,Te){if(le){if(le instanceof f.L)return le;if(le[O.b])return le[O.b]()}return le||pe||Te?new f.L(le,pe,Te):new f.L(ae.c)}(Te,we,Be);if(De.add(fe?fe.call(De,this.source):this.source||U.v.useDeprecatedSynchronousErrorHandling&&!De.syncErrorThrowable?this._subscribe(De):this._trySubscribe(De)),U.v.useDeprecatedSynchronousErrorHandling&&De.syncErrorThrowable&&(De.syncErrorThrowable=!1,De.syncErrorThrown))throw De.syncErrorValue;return De}_trySubscribe(Te){try{return this._subscribe(Te)}catch(we){U.v.useDeprecatedSynchronousErrorHandling&&(Te.syncErrorThrown=!0,Te.syncErrorValue=we),function(le){for(;le;){const{closed:pe,destination:Te,isStopped:we}=le;if(pe||we)return!1;le=Te&&Te instanceof f.L?Te:null}return!0}(Te)?Te.error(we):console.warn(we)}}forEach(Te,we){return new(we=W(we))((Be,fe)=>{let De;De=this.subscribe(Re=>{try{Te(Re)}catch(Xe){fe(Xe),De&&De.unsubscribe()}},fe,Be)})}_subscribe(Te){const{source:we}=this;return we&&we.subscribe(Te)}[ne.L](){return this}pipe(...Te){return 0===Te.length?this:function(le){return 0===le.length?be.y:1===le.length?le[0]:function(Te){return le.reduce((we,Be)=>Be(we),Te)}}(Te)(this)}toPromise(Te){return new(Te=W(Te))((we,Be)=>{let fe;this.subscribe(De=>fe=De,De=>Be(De),()=>we(fe))})}}return le.create=pe=>new le(pe),le})();function W(le){if(le||(le=U.v.Promise||Promise),!le)throw new Error("no Promise impl found");return le}},6490:(Je,Ee,V)=>{"use strict";V.d(Ee,{c:()=>O});var f=V(2494),$=V(4449);const O={closed:!0,next(ae){},error(ae){if(f.v.useDeprecatedSynchronousErrorHandling)throw ae;(0,$.z)(ae)},complete(){}}},9765:(Je,Ee,V)=>{"use strict";V.d(Ee,{Yc:()=>be,xQ:()=>te});var f=V(7574),$=V(7393),O=V(5319),ae=V(7971),ce=V(8858),ne=V(9181);class be extends $.L{constructor(H){super(H),this.destination=H}}let te=(()=>{class U extends f.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[ne.b](){return new be(this)}lift(W){const le=new oe(this,this);return le.operator=W,le}next(W){if(this.closed)throw new ae.N;if(!this.isStopped){const{observers:le}=this,pe=le.length,Te=le.slice();for(let we=0;we<pe;we++)Te[we].next(W)}}error(W){if(this.closed)throw new ae.N;this.hasError=!0,this.thrownError=W,this.isStopped=!0;const{observers:le}=this,pe=le.length,Te=le.slice();for(let we=0;we<pe;we++)Te[we].error(W);this.observers.length=0}complete(){if(this.closed)throw new ae.N;this.isStopped=!0;const{observers:W}=this,le=W.length,pe=W.slice();for(let Te=0;Te<le;Te++)pe[Te].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(W){if(this.closed)throw new ae.N;return super._trySubscribe(W)}_subscribe(W){if(this.closed)throw new ae.N;return this.hasError?(W.error(this.thrownError),O.w.EMPTY):this.isStopped?(W.complete(),O.w.EMPTY):(this.observers.push(W),new ce.W(this,W))}asObservable(){const W=new f.y;return W.source=this,W}}return U.create=(H,W)=>new oe(H,W),U})();class oe extends te{constructor(H,W){super(),this.destination=H,this.source=W}next(H){const{destination:W}=this;W&&W.next&&W.next(H)}error(H){const{destination:W}=this;W&&W.error&&this.destination.error(H)}complete(){const{destination:H}=this;H&&H.complete&&this.destination.complete()}_subscribe(H){const{source:W}=this;return W?this.source.subscribe(H):O.w.EMPTY}}},8858:(Je,Ee,V)=>{"use strict";V.d(Ee,{W:()=>$});var f=V(5319);class $ extends f.w{constructor(ae,ce){super(),this.subject=ae,this.subscriber=ce,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const ae=this.subject,ce=ae.observers;if(this.subject=null,!ce||0===ce.length||ae.isStopped||ae.closed)return;const ne=ce.indexOf(this.subscriber);-1!==ne&&ce.splice(ne,1)}}},7393:(Je,Ee,V)=>{"use strict";V.d(Ee,{L:()=>be});var f=V(9105),$=V(6490),O=V(5319),ae=V(9181),ce=V(2494),ne=V(4449);class be extends O.w{constructor(U,H,W){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=$.c;break;case 1:if(!U){this.destination=$.c;break}if("object"==typeof U){U instanceof be?(this.syncErrorThrowable=U.syncErrorThrowable,this.destination=U,U.add(this)):(this.syncErrorThrowable=!0,this.destination=new te(this,U));break}default:this.syncErrorThrowable=!0,this.destination=new te(this,U,H,W)}}[ae.b](){return this}static create(U,H,W){const le=new be(U,H,W);return le.syncErrorThrowable=!1,le}next(U){this.isStopped||this._next(U)}error(U){this.isStopped||(this.isStopped=!0,this._error(U))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(U){this.destination.next(U)}_error(U){this.destination.error(U),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:U}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=U,this}}class te extends be{constructor(U,H,W,le){super(),this._parentSubscriber=U;let pe,Te=this;(0,f.m)(H)?pe=H:H&&(pe=H.next,W=H.error,le=H.complete,H!==$.c&&(Te=Object.create(H),(0,f.m)(Te.unsubscribe)&&this.add(Te.unsubscribe.bind(Te)),Te.unsubscribe=this.unsubscribe.bind(this))),this._context=Te,this._next=pe,this._error=W,this._complete=le}next(U){if(!this.isStopped&&this._next){const{_parentSubscriber:H}=this;ce.v.useDeprecatedSynchronousErrorHandling&&H.syncErrorThrowable?this.__tryOrSetError(H,this._next,U)&&this.unsubscribe():this.__tryOrUnsub(this._next,U)}}error(U){if(!this.isStopped){const{_parentSubscriber:H}=this,{useDeprecatedSynchronousErrorHandling:W}=ce.v;if(this._error)W&&H.syncErrorThrowable?(this.__tryOrSetError(H,this._error,U),this.unsubscribe()):(this.__tryOrUnsub(this._error,U),this.unsubscribe());else if(H.syncErrorThrowable)W?(H.syncErrorValue=U,H.syncErrorThrown=!0):(0,ne.z)(U),this.unsubscribe();else{if(this.unsubscribe(),W)throw U;(0,ne.z)(U)}}}complete(){if(!this.isStopped){const{_parentSubscriber:U}=this;if(this._complete){const H=()=>this._complete.call(this._context);ce.v.useDeprecatedSynchronousErrorHandling&&U.syncErrorThrowable?(this.__tryOrSetError(U,H),this.unsubscribe()):(this.__tryOrUnsub(H),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(U,H){try{U.call(this._context,H)}catch(W){if(this.unsubscribe(),ce.v.useDeprecatedSynchronousErrorHandling)throw W;(0,ne.z)(W)}}__tryOrSetError(U,H,W){if(!ce.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{H.call(this._context,W)}catch(le){return ce.v.useDeprecatedSynchronousErrorHandling?(U.syncErrorValue=le,U.syncErrorThrown=!0,!0):((0,ne.z)(le),!0)}return!1}_unsubscribe(){const{_parentSubscriber:U}=this;this._context=null,this._parentSubscriber=null,U.unsubscribe()}}},5319:(Je,Ee,V)=>{"use strict";V.d(Ee,{w:()=>ne});var f=V(9796),$=V(1555),O=V(9105);const ce=(()=>{function te(oe){return Error.call(this),this.message=oe?`${oe.length} errors occurred during unsubscription:\n${oe.map((U,H)=>`${H+1}) ${U.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=oe,this}return te.prototype=Object.create(Error.prototype),te})();class ne{constructor(oe){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,oe&&(this._ctorUnsubscribe=!0,this._unsubscribe=oe)}unsubscribe(){let oe;if(this.closed)return;let{_parentOrParents:U,_ctorUnsubscribe:H,_unsubscribe:W,_subscriptions:le}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,U instanceof ne)U.remove(this);else if(null!==U)for(let pe=0;pe<U.length;++pe)U[pe].remove(this);if((0,O.m)(W)){H&&(this._unsubscribe=void 0);try{W.call(this)}catch(pe){oe=pe instanceof ce?be(pe.errors):[pe]}}if((0,f.k)(le)){let pe=-1,Te=le.length;for(;++pe<Te;){const we=le[pe];if((0,$.K)(we))try{we.unsubscribe()}catch(Be){oe=oe||[],Be instanceof ce?oe=oe.concat(be(Be.errors)):oe.push(Be)}}}if(oe)throw new ce(oe)}add(oe){let U=oe;if(!oe)return ne.EMPTY;switch(typeof oe){case"function":U=new ne(oe);case"object":if(U===this||U.closed||"function"!=typeof U.unsubscribe)return U;if(this.closed)return U.unsubscribe(),U;if(!(U instanceof ne)){const le=U;U=new ne,U._subscriptions=[le]}break;default:throw new Error("unrecognized teardown "+oe+" added to Subscription.")}let{_parentOrParents:H}=U;if(null===H)U._parentOrParents=this;else if(H instanceof ne){if(H===this)return U;U._parentOrParents=[H,this]}else{if(-1!==H.indexOf(this))return U;H.push(this)}const W=this._subscriptions;return null===W?this._subscriptions=[U]:W.push(U),U}remove(oe){const U=this._subscriptions;if(U){const H=U.indexOf(oe);-1!==H&&U.splice(H,1)}}}var te;function be(te){return te.reduce((oe,U)=>oe.concat(U instanceof ce?U.errors:U),[])}ne.EMPTY=((te=new ne).closed=!0,te)},2494:(Je,Ee,V)=>{"use strict";V.d(Ee,{v:()=>$});let f=!1;const $={Promise:void 0,set useDeprecatedSynchronousErrorHandling(O){if(O){const ae=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+ae.stack)}else f&&console.log("RxJS: Back to a better error behavior. Thank you. <3");f=O},get useDeprecatedSynchronousErrorHandling(){return f}}},5345:(Je,Ee,V)=>{"use strict";V.d(Ee,{IY:()=>ae,Ds:()=>ne,ft:()=>te});var f=V(7393),$=V(7574),O=V(7444);class ae extends f.L{constructor(U){super(),this.parent=U}_next(U){this.parent.notifyNext(U)}_error(U){this.parent.notifyError(U),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class ne extends f.L{notifyNext(U){this.destination.next(U)}notifyError(U){this.destination.error(U)}notifyComplete(){this.destination.complete()}}function te(oe,U){if(U.closed)return;if(oe instanceof $.y)return oe.subscribe(U);let H;try{H=(0,O.s)(oe)(U)}catch(W){U.error(W)}return H}},2441:(Je,Ee,V)=>{"use strict";V.d(Ee,{c:()=>ce,N:()=>ne});var f=V(9765),$=V(7574),O=V(5319),ae=V(1307);class ce extends $.y{constructor(H,W){super(),this.source=H,this.subjectFactory=W,this._refCount=0,this._isComplete=!1}_subscribe(H){return this.getSubject().subscribe(H)}getSubject(){const H=this._subject;return(!H||H.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let H=this._connection;return H||(this._isComplete=!1,H=this._connection=new O.w,H.add(this.source.subscribe(new be(this.getSubject(),this))),H.closed&&(this._connection=null,H=O.w.EMPTY)),H}refCount(){return(0,ae.x)()(this)}}const ne=(()=>{const U=ce.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:U._subscribe},_isComplete:{value:U._isComplete,writable:!0},getSubject:{value:U.getSubject},connect:{value:U.connect},refCount:{value:U.refCount}}})();class be extends f.Yc{constructor(H,W){super(H),this.connectable=W}_error(H){this._unsubscribe(),super._error(H)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const H=this.connectable;if(H){this.connectable=null;const W=H._connection;H._refCount=0,H._subject=null,H._connection=null,W&&W.unsubscribe()}}}},9193:(Je,Ee,V)=>{"use strict";V.d(Ee,{E:()=>$,c:()=>O});var f=V(7574);const $=new f.y(ce=>ce.complete());function O(ce){return ce?function(ce){return new f.y(ne=>ce.schedule(()=>ne.complete()))}(ce):$}},4402:(Je,Ee,V)=>{"use strict";V.d(Ee,{D:()=>Te});var f=V(7574),$=V(7444),O=V(5319),ae=V(6554),be=V(4087),te=V(377),H=V(4072),W=V(9489);function Te(we,Be){return Be?function(we,Be){if(null!=we){if(function(we){return we&&"function"==typeof we[ae.L]}(we))return function(we,Be){return new f.y(fe=>{const De=new O.w;return De.add(Be.schedule(()=>{const Re=we[ae.L]();De.add(Re.subscribe({next(Xe){De.add(Be.schedule(()=>fe.next(Xe)))},error(Xe){De.add(Be.schedule(()=>fe.error(Xe)))},complete(){De.add(Be.schedule(()=>fe.complete()))}}))})),De})}(we,Be);if((0,H.t)(we))return function(we,Be){return new f.y(fe=>{const De=new O.w;return De.add(Be.schedule(()=>we.then(Re=>{De.add(Be.schedule(()=>{fe.next(Re),De.add(Be.schedule(()=>fe.complete()))}))},Re=>{De.add(Be.schedule(()=>fe.error(Re)))}))),De})}(we,Be);if((0,W.z)(we))return(0,be.r)(we,Be);if(function(we){return we&&"function"==typeof we[te.hZ]}(we)||"string"==typeof we)return function(we,Be){if(!we)throw new Error("Iterable cannot be null");return new f.y(fe=>{const De=new O.w;let Re;return De.add(()=>{Re&&"function"==typeof Re.return&&Re.return()}),De.add(Be.schedule(()=>{Re=we[te.hZ](),De.add(Be.schedule(function(){if(fe.closed)return;let Xe,ht;try{const Wt=Re.next();Xe=Wt.value,ht=Wt.done}catch(Wt){return void fe.error(Wt)}ht?fe.complete():(fe.next(Xe),this.schedule())}))})),De})}(we,Be)}throw new TypeError((null!==we&&typeof we||we)+" is not observable")}(we,Be):we instanceof f.y?we:new f.y((0,$.s)(we))}},6693:(Je,Ee,V)=>{"use strict";V.d(Ee,{n:()=>ae});var f=V(7574),$=V(5015),O=V(4087);function ae(ce,ne){return ne?(0,O.r)(ce,ne):new f.y((0,$.V)(ce))}},6682:(Je,Ee,V)=>{"use strict";V.d(Ee,{T:()=>ce});var f=V(7574),$=V(4869),O=V(3282),ae=V(6693);function ce(...ne){let be=Number.POSITIVE_INFINITY,te=null,oe=ne[ne.length-1];return(0,$.K)(oe)?(te=ne.pop(),ne.length>1&&"number"==typeof ne[ne.length-1]&&(be=ne.pop())):"number"==typeof oe&&(be=ne.pop()),null===te&&1===ne.length&&ne[0]instanceof f.y?ne[0]:(0,O.J)(be)((0,ae.n)(ne,te))}},5917:(Je,Ee,V)=>{"use strict";V.d(Ee,{of:()=>ae});var f=V(4869),$=V(6693),O=V(4087);function ae(...ce){let ne=ce[ce.length-1];return(0,f.K)(ne)?(ce.pop(),(0,O.r)(ce,ne)):(0,$.n)(ce)}},8002:(Je,Ee,V)=>{"use strict";V.d(Ee,{U:()=>$});var f=V(7393);function $(ce,ne){return function(te){if("function"!=typeof ce)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return te.lift(new O(ce,ne))}}class O{constructor(ne,be){this.project=ne,this.thisArg=be}call(ne,be){return be.subscribe(new ae(ne,this.project,this.thisArg))}}class ae extends f.L{constructor(ne,be,te){super(ne),this.project=be,this.count=0,this.thisArg=te||this}_next(ne){let be;try{be=this.project.call(this.thisArg,ne,this.count++)}catch(te){return void this.destination.error(te)}this.destination.next(be)}}},3282:(Je,Ee,V)=>{"use strict";V.d(Ee,{J:()=>O});var f=V(9773),$=V(4487);function O(ae=Number.POSITIVE_INFINITY){return(0,f.zg)($.y,ae)}},9773:(Je,Ee,V)=>{"use strict";V.d(Ee,{zg:()=>ae});var f=V(8002),$=V(4402),O=V(5345);function ae(te,oe,U=Number.POSITIVE_INFINITY){return"function"==typeof oe?H=>H.pipe(ae((W,le)=>(0,$.D)(te(W,le)).pipe((0,f.U)((pe,Te)=>oe(W,pe,le,Te))),U)):("number"==typeof oe&&(U=oe),H=>H.lift(new ce(te,U)))}class ce{constructor(oe,U=Number.POSITIVE_INFINITY){this.project=oe,this.concurrent=U}call(oe,U){return U.subscribe(new ne(oe,this.project,this.concurrent))}}class ne extends O.Ds{constructor(oe,U,H=Number.POSITIVE_INFINITY){super(oe),this.project=U,this.concurrent=H,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(oe){this.active<this.concurrent?this._tryNext(oe):this.buffer.push(oe)}_tryNext(oe){let U;const H=this.index++;try{U=this.project(oe,H)}catch(W){return void this.destination.error(W)}this.active++,this._innerSub(U)}_innerSub(oe){const U=new O.IY(this),H=this.destination;H.add(U);const W=(0,O.ft)(oe,U);W!==U&&H.add(W)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(oe){this.destination.next(oe)}notifyComplete(){const oe=this.buffer;this.active--,oe.length>0?this._next(oe.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(Je,Ee,V)=>{"use strict";V.d(Ee,{ht:()=>H,QV:()=>oe});var f=V(7393),$=V(9193),O=V(5917),ae=V(7574);class te{constructor(pe,Te,we){this.kind=pe,this.value=Te,this.error=we,this.hasValue="N"===pe}observe(pe){switch(this.kind){case"N":return pe.next&&pe.next(this.value);case"E":return pe.error&&pe.error(this.error);case"C":return pe.complete&&pe.complete()}}do(pe,Te,we){switch(this.kind){case"N":return pe&&pe(this.value);case"E":return Te&&Te(this.error);case"C":return we&&we()}}accept(pe,Te,we){return pe&&"function"==typeof pe.next?this.observe(pe):this.do(pe,Te,we)}toObservable(){switch(this.kind){case"N":return(0,O.of)(this.value);case"E":return le=this.error,new ae.y(Te=>Te.error(le));case"C":return(0,$.c)()}var le;throw new Error("unexpected notification kind value")}static createNext(pe){return void 0!==pe?new te("N",pe):te.undefinedValueNotification}static createError(pe){return new te("E",void 0,pe)}static createComplete(){return te.completeNotification}}function oe(le,pe=0){return function(we){return we.lift(new U(le,pe))}}te.completeNotification=new te("C"),te.undefinedValueNotification=new te("N",void 0);class U{constructor(pe,Te=0){this.scheduler=pe,this.delay=Te}call(pe,Te){return Te.subscribe(new H(pe,this.scheduler,this.delay))}}class H extends f.L{constructor(pe,Te,we=0){super(pe),this.scheduler=Te,this.delay=we}static dispatch(pe){const{notification:Te,destination:we}=pe;Te.observe(we),this.unsubscribe()}scheduleMessage(pe){this.destination.add(this.scheduler.schedule(H.dispatch,this.delay,new W(pe,this.destination)))}_next(pe){this.scheduleMessage(te.createNext(pe))}_error(pe){this.scheduleMessage(te.createError(pe)),this.unsubscribe()}_complete(){this.scheduleMessage(te.createComplete()),this.unsubscribe()}}class W{constructor(pe,Te){this.notification=pe,this.destination=Te}}},1307:(Je,Ee,V)=>{"use strict";V.d(Ee,{x:()=>$});var f=V(7393);function $(){return function(ne){return ne.lift(new O(ne))}}class O{constructor(ne){this.connectable=ne}call(ne,be){const{connectable:te}=this;te._refCount++;const oe=new ae(ne,te),U=be.subscribe(oe);return oe.closed||(oe.connection=te.connect()),U}}class ae extends f.L{constructor(ne,be){super(ne),this.connectable=be}_unsubscribe(){const{connectable:ne}=this;if(!ne)return void(this.connection=null);this.connectable=null;const be=ne._refCount;if(be<=0)return void(this.connection=null);if(ne._refCount=be-1,be>1)return void(this.connection=null);const{connection:te}=this,oe=ne._connection;this.connection=null,oe&&(!te||oe===te)&&oe.unsubscribe()}}},8819:(Je,Ee,V)=>{"use strict";V.d(Ee,{B:()=>be});var f=V(2441);var ae=V(1307),ce=V(9765);function ne(){return new ce.xQ}function be(){return te=>(0,ae.x)()(function(te,oe){return function(H){let W;W="function"==typeof te?te:function(){return te};const le=Object.create(H,f.N);return le.source=H,le.subjectFactory=W,le}}(ne)(te))}},3101:(Je,Ee,V)=>{"use strict";V.d(Ee,{R:()=>Be});var f=V(7574);let $=1;const O=Promise.resolve(),ae={};function ce(De){return De in ae&&(delete ae[De],!0)}const ne={setImmediate(De){const Re=$++;return ae[Re]=!0,O.then(()=>ce(Re)&&De()),Re},clearImmediate(De){ce(De)}};var te=V(6465),U=V(6102);const le=new class extends U.v{flush(Re){this.active=!0,this.scheduled=void 0;const{actions:Xe}=this;let ht,Wt=-1,Ft=Xe.length;Re=Re||Xe.shift();do{if(ht=Re.execute(Re.state,Re.delay))break}while(++Wt<Ft&&(Re=Xe.shift()));if(this.active=!1,ht){for(;++Wt<Ft&&(Re=Xe.shift());)Re.unsubscribe();throw ht}}}(class extends te.o{constructor(Re,Xe){super(Re,Xe),this.scheduler=Re,this.work=Xe}requestAsyncId(Re,Xe,ht=0){return null!==ht&&ht>0?super.requestAsyncId(Re,Xe,ht):(Re.actions.push(this),Re.scheduled||(Re.scheduled=ne.setImmediate(Re.flush.bind(Re,null))))}recycleAsyncId(Re,Xe,ht=0){if(null!==ht&&ht>0||null===ht&&this.delay>0)return super.recycleAsyncId(Re,Xe,ht);0===Re.actions.length&&(ne.clearImmediate(Xe),Re.scheduled=void 0)}});var pe=V(9796);class we extends f.y{constructor(Re,Xe=0,ht=le){var De;super(),this.source=Re,this.delayTime=Xe,this.scheduler=ht,(!(!(0,pe.k)(De=Xe)&&De-parseFloat(De)+1>=0)||Xe<0)&&(this.delayTime=0),(!ht||"function"!=typeof ht.schedule)&&(this.scheduler=le)}static create(Re,Xe=0,ht=le){return new we(Re,Xe,ht)}static dispatch(Re){const{source:Xe,subscriber:ht}=Re;return this.add(Xe.subscribe(ht))}_subscribe(Re){return this.scheduler.schedule(we.dispatch,this.delayTime,{source:this.source,subscriber:Re})}}function Be(De,Re=0){return function(ht){return ht.lift(new fe(De,Re))}}class fe{constructor(Re,Xe){this.scheduler=Re,this.delay=Xe}call(Re,Xe){return new we(Xe,this.delay,this.scheduler).subscribe(Re)}}},3342:(Je,Ee,V)=>{"use strict";V.d(Ee,{b:()=>ae});var f=V(7393);function $(){}var O=V(9105);function ae(be,te,oe){return function(H){return H.lift(new ce(be,te,oe))}}class ce{constructor(te,oe,U){this.nextOrObserver=te,this.error=oe,this.complete=U}call(te,oe){return oe.subscribe(new ne(te,this.nextOrObserver,this.error,this.complete))}}class ne extends f.L{constructor(te,oe,U,H){super(te),this._tapNext=$,this._tapError=$,this._tapComplete=$,this._tapError=U||$,this._tapComplete=H||$,(0,O.m)(oe)?(this._context=this,this._tapNext=oe):oe&&(this._context=oe,this._tapNext=oe.next||$,this._tapError=oe.error||$,this._tapComplete=oe.complete||$)}_next(te){try{this._tapNext.call(this._context,te)}catch(oe){return void this.destination.error(oe)}this.destination.next(te)}_error(te){try{this._tapError.call(this._context,te)}catch(oe){return void this.destination.error(oe)}this.destination.error(te)}_complete(){try{this._tapComplete.call(this._context)}catch(te){return void this.destination.error(te)}return this.destination.complete()}}},4087:(Je,Ee,V)=>{"use strict";V.d(Ee,{r:()=>O});var f=V(7574),$=V(5319);function O(ae,ce){return new f.y(ne=>{const be=new $.w;let te=0;return be.add(ce.schedule(function(){te!==ae.length?(ne.next(ae[te++]),ne.closed||be.add(this.schedule())):ne.complete()})),be})}},6465:(Je,Ee,V)=>{"use strict";V.d(Ee,{o:()=>O});var f=V(5319);class $ extends f.w{constructor(ce,ne){super()}schedule(ce,ne=0){return this}}class O extends ${constructor(ce,ne){super(ce,ne),this.scheduler=ce,this.work=ne,this.pending=!1}schedule(ce,ne=0){if(this.closed)return this;this.state=ce;const be=this.id,te=this.scheduler;return null!=be&&(this.id=this.recycleAsyncId(te,be,ne)),this.pending=!0,this.delay=ne,this.id=this.id||this.requestAsyncId(te,this.id,ne),this}requestAsyncId(ce,ne,be=0){return setInterval(ce.flush.bind(ce,this),be)}recycleAsyncId(ce,ne,be=0){if(null!==be&&this.delay===be&&!1===this.pending)return ne;clearInterval(ne)}execute(ce,ne){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const be=this._execute(ce,ne);if(be)return be;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ce,ne){let te,be=!1;try{this.work(ce)}catch(oe){be=!0,te=!!oe&&oe||new Error(oe)}if(be)return this.unsubscribe(),te}_unsubscribe(){const ce=this.id,ne=this.scheduler,be=ne.actions,te=be.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==te&&be.splice(te,1),null!=ce&&(this.id=this.recycleAsyncId(ne,ce,null)),this.delay=null}}},6102:(Je,Ee,V)=>{"use strict";V.d(Ee,{v:()=>$});let f=(()=>{class O{constructor(ce,ne=O.now){this.SchedulerAction=ce,this.now=ne}schedule(ce,ne=0,be){return new this.SchedulerAction(this,ce).schedule(be,ne)}}return O.now=()=>Date.now(),O})();class $ extends f{constructor(ae,ce=f.now){super(ae,()=>$.delegate&&$.delegate!==this?$.delegate.now():ce()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(ae,ce=0,ne){return $.delegate&&$.delegate!==this?$.delegate.schedule(ae,ce,ne):super.schedule(ae,ce,ne)}flush(ae){const{actions:ce}=this;if(this.active)return void ce.push(ae);let ne;this.active=!0;do{if(ne=ae.execute(ae.state,ae.delay))break}while(ae=ce.shift());if(this.active=!1,ne){for(;ae=ce.shift();)ae.unsubscribe();throw ne}}}},3637:(Je,Ee,V)=>{"use strict";V.d(Ee,{z:()=>O,P:()=>ae});var f=V(6465);const O=new(V(6102).v)(f.o),ae=O},7771:(Je,Ee,V)=>{"use strict";V.d(Ee,{c:()=>ne,N:()=>ce});var f=V(6465),O=V(6102);const ce=new class extends O.v{}(class extends f.o{constructor(te,oe){super(te,oe),this.scheduler=te,this.work=oe}schedule(te,oe=0){return oe>0?super.schedule(te,oe):(this.delay=oe,this.state=te,this.scheduler.flush(this),this)}execute(te,oe){return oe>0||this.closed?super.execute(te,oe):this._execute(te,oe)}requestAsyncId(te,oe,U=0){return null!==U&&U>0||null===U&&this.delay>0?super.requestAsyncId(te,oe,U):te.flush(this)}}),ne=ce},377:(Je,Ee,V)=>{"use strict";V.d(Ee,{hZ:()=>$});const $="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(Je,Ee,V)=>{"use strict";V.d(Ee,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(Je,Ee,V)=>{"use strict";V.d(Ee,{b:()=>f});const f="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(Je,Ee,V)=>{"use strict";V.d(Ee,{N:()=>$});const $=(()=>{function O(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return O.prototype=Object.create(Error.prototype),O})()},4449:(Je,Ee,V)=>{"use strict";function f($){setTimeout(()=>{throw $},0)}V.d(Ee,{z:()=>f})},4487:(Je,Ee,V)=>{"use strict";function f($){return $}V.d(Ee,{y:()=>f})},9796:(Je,Ee,V)=>{"use strict";V.d(Ee,{k:()=>f});const f=Array.isArray||($=>$&&"number"==typeof $.length)},9489:(Je,Ee,V)=>{"use strict";V.d(Ee,{z:()=>f});const f=$=>$&&"number"==typeof $.length&&"function"!=typeof $},9105:(Je,Ee,V)=>{"use strict";function f($){return"function"==typeof $}V.d(Ee,{m:()=>f})},1555:(Je,Ee,V)=>{"use strict";function f($){return null!==$&&"object"==typeof $}V.d(Ee,{K:()=>f})},4072:(Je,Ee,V)=>{"use strict";function f($){return!!$&&"function"!=typeof $.subscribe&&"function"==typeof $.then}V.d(Ee,{t:()=>f})},4869:(Je,Ee,V)=>{"use strict";function f($){return $&&"function"==typeof $.schedule}V.d(Ee,{K:()=>f})},7444:(Je,Ee,V)=>{"use strict";V.d(Ee,{s:()=>H});var f=V(5015),$=V(4449),ae=V(377),ne=V(6554),te=V(9489),oe=V(4072),U=V(1555);const H=W=>{if(W&&"function"==typeof W[ne.L])return(W=>le=>{const pe=W[ne.L]();if("function"!=typeof pe.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return pe.subscribe(le)})(W);if((0,te.z)(W))return(0,f.V)(W);if((0,oe.t)(W))return(W=>le=>(W.then(pe=>{le.closed||(le.next(pe),le.complete())},pe=>le.error(pe)).then(null,$.z),le))(W);if(W&&"function"==typeof W[ae.hZ])return(W=>le=>{const pe=W[ae.hZ]();for(;;){let Te;try{Te=pe.next()}catch(we){return le.error(we),le}if(Te.done){le.complete();break}if(le.next(Te.value),le.closed)break}return"function"==typeof pe.return&&le.add(()=>{pe.return&&pe.return()}),le})(W);{const pe=`You provided ${(0,U.K)(W)?"an invalid object":`'${W}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(pe)}}},5015:(Je,Ee,V)=>{"use strict";V.d(Ee,{V:()=>f});const f=$=>O=>{for(let ae=0,ce=$.length;ae<ce&&!O.closed;ae++)O.next($[ae]);O.complete()}},5926:(Je,Ee,V)=>{"use strict";var f=V(7716);let $=null;function O(){return $}const be=new f.OlP("DocumentToken");let te=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,f.Yz7)({factory:oe,token:n,providedIn:"platform"}),n})();function oe(){return(0,f.LFG)(H)}const U=new f.OlP("Location Initialized");let H=(()=>{class n extends te{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){W()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){W()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(be))},n.\u0275prov=(0,f.Yz7)({factory:le,token:n,providedIn:"platform"}),n})();function W(){return!!window.history.pushState}function le(){return new H((0,f.LFG)(be))}function pe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Te(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function we(n){return n&&"?"!==n[0]?"?"+n:n}let Be=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,f.Yz7)({factory:fe,token:n,providedIn:"root"}),n})();function fe(n){const e=(0,f.LFG)(be).location;return new Re((0,f.LFG)(te),e&&e.origin||"")}const De=new f.OlP("appBaseHref");let Re=(()=>{class n extends Be{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return pe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+we(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const c=this.prepareExternalUrl(o+we(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,o,u){const c=this.prepareExternalUrl(o+we(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(te),f.LFG(De,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Xe=(()=>{class n extends Be{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=pe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let c=this.prepareExternalUrl(o+we(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,o,u){let c=this.prepareExternalUrl(o+we(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(te),f.LFG(De,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),ht=(()=>{class n{constructor(t,r){this._subject=new f.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Te(Et(o)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+we(r))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Et(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+we(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+we(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Be),f.LFG(te))},n.normalizeQueryParams=we,n.joinWithSlash=pe,n.stripTrailingSlash=Te,n.\u0275prov=(0,f.Yz7)({factory:Wt,token:n,providedIn:"root"}),n})();function Wt(){return new ht((0,f.LFG)(Be),(0,f.LFG)(te))}function Et(n){return n.replace(/\/index.html$/,"")}var je=(()=>((je=je||{})[je.Zero=0]="Zero",je[je.One=1]="One",je[je.Two=2]="Two",je[je.Few=3]="Few",je[je.Many=4]="Many",je[je.Other=5]="Other",je))();const Yr=f.kL8;class Ai{}let br=(()=>{class n extends Ai{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(Yr(r||this.locale)(t)){case je.Zero:return"zero";case je.One:return"one";case je.Two:return"two";case je.Few:return"few";case je.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.soG))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Js=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Ic,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ya("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ya("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Ic{constructor(){this.$implicit=null,this.ngIf=null}}function ya(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}let Fo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[{provide:Ai,useClass:br}]}),n})();function ba(n){return"server"===n}let Lo=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new Th((0,f.LFG)(be),window)}),n})();class Th{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=dl(this.window.history)||dl(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function dl(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Vo extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new Vo,$||($=n)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(Uo=Uo||document.querySelector("base"),Uo?Uo.getAttribute("href"):null);return null==t?null:function(n){Qt=Qt||document.createElement("a"),Qt.setAttribute("href",n);const e=Qt.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Uo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Qt,Uo=null;const Bo=new f.OlP("TRANSITION_ID"),Ri=[{provide:f.ip1,useFactory:function(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[Bo,be,f.zs3],multi:!0}];class ur{static init(){(0,f.VLi)(new ur)}addToWindow(e){f.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const o=f.dqk.getAllAngularTestabilities();let u=o.length,c=!1;const p=function(y){c=c||y,u--,0==u&&r(c)};o.forEach(function(y){y.whenStable(p)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let kc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Ts=new f.OlP("EventManagerPlugins");let Se=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const c=o[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ts),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Pt{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let mu=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),bn=(()=>{class n extends mu{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,o.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(_u),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(_u))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(be))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function _u(n){O().remove(n)}const Ds={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Xr=/%COMP%/g;function pr(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?pr(n,o,t):(o=o.replace(Xr,n),t.push(o))}return t}function ei(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let hs=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Sr(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case f.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new vu(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case f.ifc.ShadowDom:return new jc(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=pr(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Se),f.LFG(bn),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Sr{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(Ds[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=Ds[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=Ds[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,o&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,ei(r)):this.eventManager.addEventListener(e,t,ei(r))}}class vu extends Sr{constructor(e,t,r,o){super(e),this.component=r;const u=pr(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr="_ngcontent-%COMP%".replace(Xr,o+"-"+r.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(Xr,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class jc extends Sr{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=pr(o.id,o.styles,[]);for(let c=0;c<u.length;c++){const p=document.createElement("style");p.textContent=u[c],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Go=(()=>{class n extends Pt{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(be))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Wo=["alt","control","meta","shift"],Hc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},xr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Rh={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let yl=(()=>{class n extends Pt{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let c="";if(Wo.forEach(y=>{const w=r.indexOf(y);w>-1&&(r.splice(w,1),c+=y+".")}),c+=u,0!=r.length||0===u.length)return null;const p={};return p.domEventName=o,p.fullKey=c,p}static getEventFullKey(t){let r="",o=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&xr.hasOwnProperty(e)&&(e=xr[e]))}return Hc[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Wo.forEach(u=>{u!=o&&Rh[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(be))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Ni=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function(){Vo.makeCurrent(),ur.init()},multi:!0},{provide:be,useFactory:function(){return(0,f.RDi)(document),document},deps:[]}]),El=[[],{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function(){return new f.qLn},deps:[]},{provide:Ts,useClass:Go,multi:!0,deps:[be,f.R0b,f.Lbi]},{provide:Ts,useClass:yl,multi:!0,deps:[be]},[],{provide:hs,useClass:hs,deps:[Se,bn,f.AFp]},{provide:f.FYo,useExisting:hs},{provide:mu,useExisting:bn},{provide:bn,useClass:bn,deps:[be]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b]},{provide:Se,useClass:Se,deps:[Ts,f.R0b]},{provide:class{},useClass:kc,deps:[]},[]];let Sp=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:Bo,useExisting:f.AFp},Ri]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(n,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:El,imports:[Fo,f.hGG]}),n})();"undefined"!=typeof window&&window;const bl_firebase={apiKey:"AIzaSyACAe5MLGpzHwnmmudbq_G6PYxdFGJudZs",authDomain:"portal-ae5ef.firebaseapp.com",projectId:"portal-ae5ef",storageBucket:"portal-ae5ef.appspot.com",messagingSenderId:"172240261404",appId:"1:172240261404:web:2a4c96f816f170a8bdaad9",measurementId:"G-JLDG13LNCR"};var Vt=V(4402),gr=V(7574),Cl=V(9796),pt=V(8002),zc=V(1555);function fs(n,e){return new gr.y(t=>{const r=n.length;if(0===r)return void t.complete();const o=new Array(r);let u=0,c=0;for(let p=0;p<r;p++){const y=(0,Vt.D)(n[p]);let w=!1;t.add(y.subscribe({next:D=>{w||(w=!0,c++),o[p]=D},error:D=>t.error(D),complete:()=>{u++,(u===r||!w)&&(c===r&&t.next(e?e.reduce((D,S,P)=>(D[S]=o[P],D),{}):o),t.complete())}}))}})}let Kc=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),ao=(()=>{class n extends Kc{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const gi=new f.OlP("NgValueAccessor"),Il={provide:gi,useExisting:(0,f.Gpc)(()=>Ko),multi:!0},uo=new f.OlP("CompositionEventMode");let Ko=(()=>{class n extends Kc{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(uo,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[f._Bn([Il]),f.qOj]}),n})();function ki(n){return null==n||0===n.length}function ka(n){return null!=n&&"number"==typeof n.length}const Ln=new f.OlP("NgValidators"),mi=new f.OlP("NgAsyncValidators"),Ss=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class xs{static min(e){return function(n){return e=>{if(ki(e.value)||ki(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function(n){return e=>{if(ki(e.value)||ki(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return Qo(e)}static requiredTrue(e){return function(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function(n){return ki(n.value)||Ss.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function(n){return e=>ki(e.value)||!ka(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function(n){return e=>ka(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function(n){if(!n)return Ns;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(ki(r.value))return null;const o=r.value;return e.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}(e)}static nullValidator(e){return null}static compose(e){return Fp(e)}static composeAsync(e){return Jc(e)}}function Qo(n){return ki(n.value)?{required:!0}:null}function Ns(n){return null}function Pa(n){return null!=n}function Fh(n){const e=(0,f.QGY)(n)?(0,Vt.D)(n):n;return(0,f.CqO)(e),e}function Pp(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Op(n,e){return e.map(t=>t(n))}function Qc(n){return n.map(e=>function(n){return!n.validate}(e)?e:t=>e.validate(t))}function Fp(n){if(!n)return null;const e=n.filter(Pa);return 0==e.length?null:function(t){return Pp(Op(t,e))}}function Lh(n){return null!=n?Fp(Qc(n)):null}function Jc(n){if(!n)return null;const e=n.filter(Pa);return 0==e.length?null:function(t){return function(...n){if(1===n.length){const e=n[0];if((0,Cl.k)(e))return fs(e,null);if((0,zc.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return fs(t.map(r=>e[r]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return fs(n=1===n.length&&(0,Cl.k)(n[0])?n[0]:n,null).pipe((0,pt.U)(t=>e(...t)))}return fs(n,null)}(Op(t,e).map(Fh)).pipe((0,pt.U)(Pp))}}function Oa(n){return null!=n?Jc(Qc(n)):null}function lo(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Tl(n){return n._rawValidators}function Vn(n){return n._rawAsyncValidators}function co(n){return n?Array.isArray(n)?n:[n]:[]}function Ms(n,e){return Array.isArray(n)?n.includes(e):n===e}function Xc(n,e){const t=co(e);return co(n).forEach(o=>{Ms(t,o)||t.push(o)}),t}function Lp(n,e){return co(e).filter(t=>!Ms(n,t))}let Pi=(()=>{class n{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Lh(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Oa(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,r){return!!this.control&&this.control.hasError(t,r)}getError(t,r){return this.control?this.control.getError(t,r):null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n}),n})(),Nn=(()=>{class n extends Pi{get formDirective(){return null}get path(){return null}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();class _i extends Pi{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class yi{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let Vh=(()=>{class n extends yi{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(_i,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[f.qOj]}),n})(),fo=(()=>{class n extends yi{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Nn,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[f.qOj]}),n})();function ue(n,e){ct(n,e),e.valueAccessor.writeValue(n.value),function(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&tr(n,e)})}(n,e),function(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&tr(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Ne(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Gt(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Qe(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ct(n,e){const t=Tl(n);null!==e.validator?n.setValidators(lo(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Vn(n);null!==e.asyncValidator?n.setAsyncValidators(lo(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();Qe(e._rawValidators,o),Qe(e._rawAsyncValidators,o)}function Gt(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=Tl(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(c=>c!==e.validator);u.length!==o.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const o=Vn(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(c=>c!==e.asyncValidator);u.length!==o.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return Qe(e._rawValidators,r),Qe(e._rawAsyncValidators,r),t}function tr(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Bp(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Jo="VALID",Bh="INVALID",Xo="PENDING",Va="DISABLED";function Ua(n){return(jp(n)?n.validators:n)||null}function Ps(n){return Array.isArray(n)?Lh(n):n||null}function xu(n,e){return(jp(e)?e.asyncValidators:n)||null}function go(n){return Array.isArray(n)?Oa(n):n||null}function jp(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class jh{constructor(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Ps(this._rawValidators),this._composedAsyncValidatorFn=go(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Jo}get invalid(){return this.status===Bh}get pending(){return this.status==Xo}get disabled(){return this.status===Va}get enabled(){return this.status!==Va}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Ps(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=go(e)}addValidators(e){this.setValidators(Xc(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Xc(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Lp(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Lp(e,this._rawAsyncValidators))}hasValidator(e){return Ms(this._rawValidators,e)}hasAsyncValidator(e){return Ms(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Xo,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Va,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Jo,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Jo||this.status===Xo)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Va:Jo}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Xo,this._hasOwnPendingAsyncValidator=!0;const t=Fh(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=r instanceof Ba?r.controls.hasOwnProperty(o)?r.controls[o]:null:r instanceof $h&&r.at(o)||null}),r}(this,e)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?Va:this.errors?Bh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Xo)?Xo:this._anyControlsHaveStatus(Bh)?Bh:Jo}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){jp(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class mo extends jh{constructor(e=null,t,r){super(Ua(t),xu(r,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Bp(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Bp(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Ba extends jh{constructor(e,t,r){super(Ua(t),xu(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t instanceof mo?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class $h extends jh{constructor(e,t,r){super(Ua(t),xu(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((r,o)=>{this._throwIfControlMissing(o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof mo?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let nd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const Sl=new f.OlP("NgModelWithFormControlWarning"),wE={provide:Nn,useExisting:(0,f.Gpc)(()=>ms)};let ms=(()=>{class n extends Nn{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new f.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Gt(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return ue(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Ne(t.control||null,t,!1),Bp(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(Ne(r||null,t),o instanceof mo&&(ue(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function(n,e){ct(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function(n,e){return Gt(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ct(this.form,this),this._oldForm&&Gt(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Ln,10),f.Y36(mi,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&f.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([wE]),f.qOj,f.TTD]}),n})();const CE={provide:_i,useExisting:(0,f.Gpc)(()=>zp)};let zp=(()=>{class n extends _i{constructor(t,r,o,u,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new f.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===Ko?t=u:function(n){return Object.getPrototypeOf(n.constructor)===ao}(u)?r=u:o=u}),o||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Nn,13),f.Y36(Ln,10),f.Y36(mi,10),f.Y36(gi,10),f.Y36(Sl,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[f._Bn([CE]),f.qOj,f.TTD]}),n._ngModelWarningSentOnce=!1,n})();const Kh={provide:Ln,useExisting:(0,f.Gpc)(()=>Rl),multi:!0};let Rl=(()=>{class n{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&"false"!=`${t}`,this._onChange&&this._onChange()}validate(t){return this.required?Qo(t):null}registerOnValidatorChange(t){this._onChange=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&f.uIk("required",r.required?"":null)},inputs:{required:"required"},features:[f._Bn([Kh])]}),n})(),Ke=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[nd]]}),n})(),hn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Ke]}),n})(),Cn=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Sl,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Ke]}),n})(),ta=(()=>{class n{group(t,r=null){const o=this._reduceControls(t);let p,u=null,c=null;return null!=r&&(function(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(u=null!=r.validators?r.validators:null,c=null!=r.asyncValidators?r.asyncValidators:null,p=null!=r.updateOn?r.updateOn:void 0):(u=null!=r.validator?r.validator:null,c=null!=r.asyncValidator?r.asyncValidator:null)),new Ba(o,{asyncValidators:c,updateOn:p,validators:u})}control(t,r,o){return new mo(t,r,o)}array(t,r,o){const u=t.map(c=>this._createControl(c));return new $h(u,r,o)}_reduceControls(t){const r={};return Object.keys(t).forEach(o=>{r[o]=this._createControl(t[o])}),r}_createControl(t){return t instanceof mo||t instanceof Ba||t instanceof $h?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,f.Yz7)({factory:function(){return new n},token:n,providedIn:Cn}),n})();var Os=V(9765),mt=V(5917),eg=V(7971);class Xi extends Os.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new eg.N;return this._value}next(e){super.next(this._value=e)}}var D_=V(4869),es=V(7393);class $a extends es.L{notifyNext(e,t,r,o,u){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class ni extends es.L{constructor(e,t,r){super(),this.parent=e,this.outerValue=t,this.outerIndex=r,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var tg=V(7444);function id(n,e,t,r,o=new ni(n,t,r)){if(!o.closed)return e instanceof gr.y?e.subscribe(o):(0,tg.s)(e)(o)}var A_=V(6693);const vi={};class AE{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new dx(e,this.resultSelector))}}class dx extends $a{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(vi),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let r=0;r<t;r++)this.add(id(this,e[r],void 0,r))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,r){const o=this.values,c=this.toRespond?o[r]===vi?--this.toRespond:this.toRespond:0;o[r]=t,0===c&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}const rg=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();var S_=V(3282);function SE(...n){return(0,S_.J)(1)((0,mt.of)(...n))}var Mu=V(9193);function jC(n){return new gr.y(e=>{let t;try{t=n()}catch(o){return void e.error(o)}return(t?(0,Vt.D)(t):(0,Mu.c)()).subscribe(e)})}var hx=V(2441),Yh=V(5345);function Rr(n,e){return"function"==typeof e?t=>t.pipe(Rr((r,o)=>(0,Vt.D)(n(r,o)).pipe((0,pt.U)((u,c)=>e(r,u,o,c))))):t=>t.lift(new xE(n))}class xE{constructor(e){this.project=e}call(e,t){return t.subscribe(new $C(e,this.project))}}class $C extends Yh.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const r=this.index++;try{t=this.project(e,r)}catch(o){return void this.destination.error(o)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const r=new Yh.IY(this),o=this.destination;o.add(r),this.innerSubscription=(0,Yh.ft)(e,r),this.innerSubscription!==r&&o.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const fx=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function x_(n){return e=>0===n?(0,Mu.c)():e.lift(new R_(n))}class R_{constructor(e){if(this.total=e,this.total<0)throw new fx}call(e,t){return t.subscribe(new px(e,this.total))}}class px extends es.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))}}function N_(...n){const e=n[n.length-1];return(0,D_.K)(e)?(n.pop(),t=>SE(n,t,e)):t=>SE(n,t)}function yo(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(o){return o.lift(new gx(n,e,t))}}class gx{constructor(e,t,r=!1){this.accumulator=e,this.seed=t,this.hasSeed=r}call(e,t){return t.subscribe(new mx(e,this.accumulator,this.seed,this.hasSeed))}}class mx extends es.L{constructor(e,t,r,o){super(e),this.accumulator=t,this._seed=r,this.hasSeed=o,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let r;try{r=this.accumulator(this.seed,e,t)}catch(o){this.destination.error(o)}this.seed=r,this.destination.next(r)}}function ku(n,e){return function(r){return r.lift(new _x(n,e))}}class _x{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new yx(e,this.predicate,this.thisArg))}}class yx extends es.L{constructor(e,t,r){super(e),this.predicate=t,this.thisArg=r,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}t&&this.destination.next(e)}}function Ha(n){return function(t){const r=new vo(n),o=t.lift(r);return r.caught=o}}class vo{constructor(e){this.selector=e}call(e,t){return t.subscribe(new HC(e,this.selector,this.caught))}}class HC extends Yh.Ds{constructor(e,t,r){super(e),this.selector=t,this.caught=r}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(u){return void super.error(u)}this._unsubscribeAndRecycle();const r=new Yh.IY(this);this.add(r);const o=(0,Yh.ft)(t,r);o!==r&&this.add(o)}}}var ts=V(9773);function ig(n,e){return(0,ts.zg)(n,e,1)}function M_(n){return function(t){return 0===n?(0,Mu.c)():t.lift(new iO(n))}}class iO{constructor(e){if(this.total=e,this.total<0)throw new fx}call(e,t){return t.subscribe(new GC(e,this.total))}}class GC extends es.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,r=this.total,o=this.count++;t.length<r?t.push(e):t[o%r]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const r=this.count>=this.total?this.total:this.count,o=this.ring;for(let u=0;u<r;u++){const c=t++%r;e.next(o[c])}}e.complete()}}function qC(n=Qh){return e=>e.lift(new vx(n))}class vx{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new Ex(e,this.errorFactory))}}class Ex extends es.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function Qh(){return new rg}function na(n=null){return e=>e.lift(new sO(n))}class sO{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new oO(e,this.defaultValue))}}class oO extends es.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var RE=V(4487);function Fi(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ku((o,u)=>n(o,u,r)):RE.y,x_(1),t?na(e):qC(()=>new rg))}var ns=V(3342),NE=V(1307),WC=V(5319);class sg{constructor(e){this.callback=e}call(e,t){return t.subscribe(new zC(e,this.callback))}}class zC extends es.L{constructor(e,t){super(e),this.add(new WC.w(t))}}class Ga{constructor(e,t){this.id=e,this.url=t}}class og extends Ga{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class sd extends Ga{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ME extends Ga{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class uO extends Ga{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Jh extends Ga{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kE extends Ga{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class KC extends Ga{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class wx extends Ga{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class PE extends Ga{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class YC{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class QC{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class bx{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Cx{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ix{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Tx{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class OE{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Zt="primary";class JC{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Nl(n){return new JC(n)}const XC="ngNavigationCancelingError";function FE(n){const e=Error("NavigationCancelingError: "+n);return e[XC]=!0,e}function tI(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const c=r[u],p=n[u];if(c.startsWith(":"))o[c.substring(1)]=p;else if(c!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function ra(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!LE(n[o],e[o]))return!1;return!0}function LE(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function nI(n){return Array.prototype.concat.apply([],n)}function ag(n){return n.length>0?n[n.length-1]:null}function ri(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ia(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,Vt.D)(Promise.resolve(n)):(0,mt.of)(n)}const VE={exact:function BE(n,e,t){if(!kl(n.segments,e.segments)||!Ml(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!BE(n.children[r],e.children[r],t))return!1;return!0},subset:$E},UE={exact:function(n,e){return ra(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>LE(n[t],e[t]))},ignored:()=>!0};function ug(n,e,t){return VE[t.paths](n.root,e.root,t.matrixParams)&&UE[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function $E(n,e,t){return P_(n,e,e.segments,t)}function P_(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!kl(o,t)||e.hasChildren()||!Ml(o,t,r))}if(n.segments.length===t.length){if(!kl(n.segments,t)||!Ml(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!$E(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(kl(n.segments,o)&&Ml(n.segments,o,r)&&n.children[Zt])&&P_(n.children[Zt],e,u,r)}}function Ml(n,e,t){return e.every((r,o)=>UE[t](n[o].parameters,r.parameters))}class ad{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Nl(this.queryParams)),this._queryParamMap}toString(){return iI.serialize(this)}}class Jt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,ri(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return F_(this)}}class lg{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Nl(this.parameters)),this._parameterMap}toString(){return aI(this)}}function kl(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class O_{}class Ax{parse(e){const t=new cI(e);return new ad(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){var n;return`${`/${Xh(e.root,!0)}`}${function(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${L_(t)}=${L_(o)}`).join("&"):`${L_(t)}=${L_(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${n=e.fragment,encodeURI(n)}`:""}`}}const iI=new Ax;function F_(n){return n.segments.map(e=>aI(e)).join("/")}function Xh(n,e){if(!n.hasChildren())return F_(n);if(e){const t=n.children[Zt]?Xh(n.children[Zt],!1):"",r=[];return ri(n.children,(o,u)=>{u!==Zt&&r.push(`${u}:${Xh(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function(n,e){let t=[];return ri(n.children,(r,o)=>{o===Zt&&(t=t.concat(e(r,o)))}),ri(n.children,(r,o)=>{o!==Zt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Zt?[Xh(n.children[Zt],!1)]:[`${o}:${Xh(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Zt]?`${F_(n)}/${t[0]}`:`${F_(n)}/(${t.join("//")})`}}function sI(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function L_(n){return sI(n).replace(/%3B/gi,";")}function GE(n){return sI(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function cg(n){return decodeURIComponent(n)}function oI(n){return cg(n.replace(/\+/g,"%20"))}function aI(n){return`${GE(n.path)}${function(n){return Object.keys(n).map(e=>`;${GE(e)}=${GE(n[e])}`).join("")}(n.parameters)}`}const uI=/^[^\/()?;=#]+/;function V_(n){const e=n.match(uI);return e?e[0]:""}const Rx=/^[^=?&#]+/,Ot=/^[^?&#]+/;class cI{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Jt([],{}):new Jt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Zt]=new Jt(e,t)),r}parseSegment(){const e=V_(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new lg(cg(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=V_(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=V_(this.remaining);o&&(r=o,this.capture(r))}e[cg(t)]=cg(r)}parseQueryParam(e){const t=function(n){const e=n.match(Rx);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function(n){const e=n.match(Ot);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const o=oI(t),u=oI(r);if(e.hasOwnProperty(o)){let c=e[o];Array.isArray(c)||(c=[c],e[o]=c),c.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=V_(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Zt);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[Zt]:new Jt([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class dg{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Fs(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Fs(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=U_(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return U_(e,this._root).map(t=>t.value)}}function Fs(n,e){if(n===e.value)return e;for(const t of e.children){const r=Fs(n,t);if(r)return r}return null}function U_(n,e){if(n===e.value)return[e];for(const t of e.children){const r=U_(n,t);if(r.length)return r.unshift(e),r}return[]}class Pu{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ud(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class qa extends dg{constructor(e,t){super(e),this.snapshot=t,ef(this,e)}toString(){return this.snapshot.toString()}}function B_(n,e){const t=function(n,e){const c=new qE([],{},{},"",{},Zt,e,null,n.root,-1,{});return new Wa("",new Pu(c,[]))}(n,e),r=new Xi([new lg("",{})]),o=new Xi({}),u=new Xi({}),c=new Xi({}),p=new Xi(""),y=new Pl(r,o,c,p,u,Zt,e,t.root);return y.snapshot=t.root,new qa(new Pu(y,[]),t)}class Pl{constructor(e,t,r,o,u,c,p,y){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=c,this.component=p,this._futureSnapshot=y}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,pt.U)(e=>Nl(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,pt.U)(e=>Nl(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Mx(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class qE{constructor(e,t,r,o,u,c,p,y,w,D,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=c,this.component=p,this.routeConfig=y,this._urlSegment=w,this._lastPathIndex=D,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Nl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Nl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Wa extends dg{constructor(e,t){super(t),this.url=e,ef(this,t)}toString(){return hg(this._root)}}function ef(n,e){e.value._routerState=n,e.children.forEach(t=>ef(n,t))}function hg(n){const e=n.children.length>0?` { ${n.children.map(hg).join(", ")} } `:"";return`${n.value}${e}`}function fg(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ra(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ra(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ra(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ra(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function fI(n,e){return ra(n.params,e.params)&&function(n,e){return kl(n,e)&&n.every((t,r)=>ra(t.parameters,e[r].parameters))}(n.url,e.url)&&!(!n.parent!=!e.parent)&&(!n.parent||fI(n.parent,e.parent))}function pg(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return pg(n,r,o);return pg(n,r)})}(n,e,t);return new Pu(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return Px(e,c),c}}const r=function(n){return new Pl(new Xi(n.url),new Xi(n.params),new Xi(n.queryParams),new Xi(n.fragment),new Xi(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>pg(n,u));return new Pu(r,o)}}function Px(n,e){if(n.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=n.value;for(let t=0;t<n.children.length;++t)Px(n.children[t],e.children[t])}function gg(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function mg(n){return"object"==typeof n&&null!=n&&n.outlets}function _g(n,e,t,r,o){let u={};return r&&ri(r,(c,p)=>{u[p]=Array.isArray(c)?c.map(y=>`${y}`):`${c}`}),new ad(t.root===n?e:Fx(t.root,n,e),u,o)}function Fx(n,e,t){const r={};return ri(n.children,(o,u)=>{r[u]=o===e?t:Fx(o,e,t)}),new Jt(n.segments,r)}class Lx{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&gg(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(mg);if(o&&o!==ag(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class gI{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Vx(n,e,t){if(n||(n=new Jt([],{})),0===n.segments.length&&n.hasChildren())return WE(n,e,t);const r=function(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const c=n.segments[o],p=t[r];if(mg(p))break;const y=`${p}`,w=r<t.length-1?t[r+1]:null;if(o>0&&void 0===y)break;if(y&&w&&"object"==typeof w&&void 0===w.outlets){if(!_I(y,w,c))return u;r+=2}else{if(!_I(y,{},c))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Jt(n.segments.slice(0,r.pathIndex),{});return u.children[Zt]=new Jt(n.segments.slice(r.pathIndex),n.children),WE(u,0,o)}return r.match&&0===o.length?new Jt(n.segments,{}):r.match&&!n.hasChildren()?mI(n,e,t):r.match?WE(n,0,o):mI(n,e,t)}function WE(n,e,t){if(0===t.length)return new Jt(n.segments,{});{const r=function(n){return mg(n[0])?n[0].outlets:{[Zt]:n}}(t),o={};return ri(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[c]=Vx(n.children[c],e,u))}),ri(n.children,(u,c)=>{void 0===r[c]&&(o[c]=u)}),new Jt(n.segments,o)}}function mI(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(mg(u)){const y=Ol(u.outlets);return new Jt(r,y)}if(0===o&&gg(t[0])){r.push(new lg(n.segments[e].path,j_(t[0]))),o++;continue}const c=mg(u)?u.outlets[Zt]:`${u}`,p=o<t.length-1?t[o+1]:null;c&&p&&gg(p)?(r.push(new lg(c,j_(p))),o+=2):(r.push(new lg(c,{})),o++)}return new Jt(r,{})}function Ol(n){const e={};return ri(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=mI(new Jt([],{}),0,t))}),e}function j_(n){const e={};return ri(n,(t,r)=>e[r]=`${t}`),e}function _I(n,e,t){return n==t.path&&ra(e,t.parameters)}class ZE{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),fg(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=ud(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,o[c],r),delete o[c]}),ri(o,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const c=r.getContext(o.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet);if(r&&r.outlet){const o=r.outlet.detach(),u=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:u})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=ud(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=ud(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new Tx(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Cx(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(fg(o),o===u)if(o.component){const c=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const c=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const p=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),c.children.onOutletReAttached(p.contexts),c.attachRef=p.componentRef,c.route=p.route.value,c.outlet&&c.outlet.attach(p.componentRef,p.route.value),zE(p.route)}else{const p=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),y=p?p.module.componentFactoryResolver:null;c.attachRef=null,c.route=o,c.resolver=y,c.outlet&&c.outlet.activateWith(o,y),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}function zE(n){fg(n.value),n.children.forEach(zE)}class YE{constructor(e,t){this.routes=e,this.module=t}}function rs(n){return"function"==typeof n}function ld(n){return n instanceof ad}const yg=Symbol("INITIAL_VALUE");function vg(){return Rr(n=>function(...n){let e,t;return(0,D_.K)(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&(0,Cl.k)(n[0])&&(n=n[0]),(0,A_.n)(n,t).lift(new AE(e))}(n.map(e=>e.pipe(x_(1),N_(yg)))).pipe(yo((e,t)=>{let r=!1;return t.reduce((o,u,c)=>o!==yg?o:(u===yg&&(r=!0),r||!1!==u&&c!==t.length-1&&!ld(u)?o:u),e)},yg),ku(e=>e!==yg),(0,pt.U)(e=>ld(e)?e:!0===e),x_(1)))}let tf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},directives:function(){return[lw]},encapsulation:2}),n})();function cd(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];JE(r,nf(e,r))}}function JE(n,e){n.children&&cd(n.children,e)}function nf(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function dd(n){const e=n.children&&n.children.map(dd),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Zt&&(t.component=tf),t}function Ei(n){return n.outlet||Zt}function wI(n,e){const t=n.filter(r=>Ei(r)===e);return t.push(...n.filter(r=>Ei(r)!==e)),t}const XE={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Eg(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},XE):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const u=(e.matcher||tI)(t,n,e);if(!u)return Object.assign({},XE);const c={};ri(u.posParams,(y,w)=>{c[w]=y.path});const p=u.consumed.length>0?Object.assign(Object.assign({},c),u.consumed[u.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:u.consumed,lastChild:u.consumed.length,parameters:p,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function rf(n,e,t,r,o="corrected"){if(t.length>0&&function(n,e,t){return t.some(r=>wg(n,e,r)&&Ei(r)!==Zt)}(n,t,r)){const c=new Jt(e,function(n,e,t,r){const o={};o[Zt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Ei(u)!==Zt){const c=new Jt([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,o[Ei(u)]=c}return o}(n,e,r,new Jt(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(r=>wg(n,e,r))}(n,t,r)){const c=new Jt(n.segments,function(n,e,t,r,o,u){const c={};for(const p of r)if(wg(n,t,p)&&!o[Ei(p)]){const y=new Jt([],{});y._sourceSegment=n,y._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[Ei(p)]=y}return Object.assign(Object.assign({},o),c)}(n,e,t,r,n.children,o));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new Jt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function wg(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function jx(n,e,t,r){return!!(Ei(n)===r||r!==Zt&&wg(e,t,n))&&("**"===n.path||Eg(e,n,t).matched)}function tw(n,e,t){return 0===e.length&&!n.children[t]}class sf{constructor(e){this.segmentGroup=e||null}}class CI{constructor(e){this.urlTree=e}}function bg(n){return new gr.y(e=>e.error(new sf(n)))}function II(n){return new gr.y(e=>e.error(new CI(n)))}function $x(n){return new gr.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class Gx{constructor(e,t,r,o,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(f.h0i)}apply(){const e=rf(this.urlTree.root,[],[],this.config).segmentGroup,t=new Jt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Zt).pipe((0,pt.U)(u=>this.createUrlTree(TI(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ha(u=>{if(u instanceof CI)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof sf?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Zt).pipe((0,pt.U)(o=>this.createUrlTree(TI(o),e.queryParams,e.fragment))).pipe(Ha(o=>{throw o instanceof sf?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new Jt([],{[Zt]:e}):e;return new ad(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,pt.U)(u=>new Jt([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,Vt.D)(o).pipe(ig(u=>{const c=r.children[u],p=wI(t,u);return this.expandSegmentGroup(e,p,c,u).pipe((0,pt.U)(y=>({segment:y,outlet:u})))}),yo((u,c)=>(u[c.outlet]=c.segment,u),{}),function(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ku((o,u)=>n(o,u,r)):RE.y,M_(1),t?na(e):qC(()=>new rg))}())}expandSegment(e,t,r,o,u,c){return(0,Vt.D)(r).pipe(ig(p=>this.expandSegmentAgainstRoute(e,t,r,p,o,u,c).pipe(Ha(w=>{if(w instanceof sf)return(0,mt.of)(null);throw w}))),Fi(p=>!!p),Ha((p,y)=>{if(p instanceof rg||"EmptyError"===p.name){if(tw(t,o,u))return(0,mt.of)(new Jt([],{}));throw new sf(t)}throw p}))}expandSegmentAgainstRoute(e,t,r,o,u,c,p){return jx(o,t,u,c)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,c):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,c):bg(t):bg(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,c){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?II(u):this.lineralizeSegments(r,u).pipe((0,ts.zg)(c=>{const p=new Jt(c,{});return this.expandSegment(e,p,t,c,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,c){const{matched:p,consumedSegments:y,lastChild:w,positionalParamSegments:D}=Eg(t,o,u);if(!p)return bg(t);const S=this.applyRedirectCommands(y,o.redirectTo,D);return o.redirectTo.startsWith("/")?II(S):this.lineralizeSegments(o,S).pipe((0,ts.zg)(P=>this.expandSegment(e,t,r,P.concat(u.slice(w)),c,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?(0,mt.of)(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,pt.U)(P=>(r._loadedConfig=P,new Jt(o,{})))):(0,mt.of)(new Jt(o,{}));const{matched:c,consumedSegments:p,lastChild:y}=Eg(t,r,o);if(!c)return bg(t);const w=o.slice(y);return this.getChildConfig(e,r,o).pipe((0,ts.zg)(S=>{const P=S.module,B=S.routes,{segmentGroup:Y,slicedSegments:_e}=rf(t,p,w,B),xe=new Jt(Y.segments,Y.children);if(0===_e.length&&xe.hasChildren())return this.expandChildren(P,B,xe).pipe((0,pt.U)(st=>new Jt(p,st)));if(0===B.length&&0===_e.length)return(0,mt.of)(new Jt(p,{}));const dt=Ei(r)===u;return this.expandSegment(P,xe,B,_e,dt?Zt:u,!0).pipe((0,pt.U)(nt=>new Jt(p.concat(nt.segments),nt.children)))}))}getChildConfig(e,t,r){return t.children?(0,mt.of)(new YE(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,mt.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,ts.zg)(o=>{return o?this.configLoader.load(e.injector,t).pipe((0,pt.U)(u=>(t._loadedConfig=u,u))):(n=t,new gr.y(e=>e.error(FE(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):(0,mt.of)(new YE([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;if(!o||0===o.length)return(0,mt.of)(!0);const u=o.map(c=>{const p=e.get(c);let y;if((n=p)&&rs(n.canLoad))y=p.canLoad(t,r);else{if(!rs(p))throw new Error("Invalid CanLoad guard");y=p(t,r)}var n;return ia(y)});return(0,mt.of)(u).pipe(vg(),(0,ns.b)(c=>{if(!ld(c))return;const p=FE(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw p.url=c,p}),(0,pt.U)(c=>!0===c))}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return(0,mt.of)(r);if(o.numberOfChildren>1||!o.children[Zt])return $x(e.redirectTo);o=o.children[Zt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new ad(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return ri(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const p=o.substring(1);r[u]=t[p]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let c={};return ri(t.children,(p,y)=>{c[y]=this.createSegmentGroup(e,p,r,o)}),new Jt(u,c)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function TI(n){const e={};for(const r of Object.keys(n.children)){const u=TI(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function(n){if(1===n.numberOfChildren&&n.children[Zt]){const e=n.children[Zt];return new Jt(n.segments.concat(e.segments),e.children)}return n}(new Jt(n.segments,e))}class qx{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class H_{constructor(e,t){this.component=e,this.route=t}}function nw(n,e,t){const r=n._root;return Cg(r,e?e._root:null,t,[r.value])}function G_(n,e,t){const r=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Cg(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=ud(e);return n.children.forEach(c=>{(function(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const y=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!kl(n.url,e.url);case"pathParamsOrQueryParamsChange":return!kl(n.url,e.url)||!ra(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!fI(n,e)||!ra(n.queryParams,e.queryParams);case"paramsChange":default:return!fI(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);y?o.canActivateChecks.push(new qx(r)):(u.data=c.data,u._resolvedData=c._resolvedData),Cg(n,e,u.component?p?p.children:null:t,r,o),y&&p&&p.outlet&&p.outlet.isActivated&&o.canDeactivateChecks.push(new H_(p.outlet.component,c))}else c&&af(e,p,o),o.canActivateChecks.push(new qx(r)),Cg(n,null,u.component?p?p.children:null:t,r,o)})(c,u[c.value.outlet],t,r.concat([c.value]),o),delete u[c.value.outlet]}),ri(u,(c,p)=>af(c,t.getContext(p),o)),o}function af(n,e,t){const r=ud(n),o=n.value;ri(r,(u,c)=>{af(u,o.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new H_(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class Jx{}function Xx(n){return new gr.y(e=>e.error(n))}class eR{constructor(e,t,r,o,u,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=c}recognize(){const e=rf(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Zt);if(null===t)return null;const r=new qE([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Zt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Pu(r,t),u=new Wa(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=Mx(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const c=t.children[u],p=wI(e,u),y=this.processSegmentGroup(p,c,u);if(null===y)return null;r.push(...y)}const o=MI(r);return o.sort((e,t)=>e.value.outlet===Zt?-1:t.value.outlet===Zt?1:e.value.outlet.localeCompare(t.value.outlet)),o}processSegment(e,t,r,o){for(const u of e){const c=this.processSegmentAgainstRoute(u,t,r,o);if(null!==c)return c}return tw(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!jx(e,t,r,o))return null;let u,c=[],p=[];if("**"===e.path){const B=r.length>0?ag(r).parameters:{};u=new qE(r,B,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,kI(e),Ei(e),e.component,e,Ig(t),q_(t)+r.length,W_(e))}else{const B=Eg(t,e,r);if(!B.matched)return null;c=B.consumedSegments,p=r.slice(B.lastChild),u=new qE(c,B.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,kI(e),Ei(e),e.component,e,Ig(t),q_(t)+c.length,W_(e))}const y=(n=e).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:w,slicedSegments:D}=rf(t,c,p,y.filter(B=>void 0===B.redirectTo),this.relativeLinkResolution);var n;if(0===D.length&&w.hasChildren()){const B=this.processChildren(y,w);return null===B?null:[new Pu(u,B)]}if(0===y.length&&0===D.length)return[new Pu(u,[])];const S=Ei(e)===o,P=this.processSegment(y,w,D,S?Zt:o);return null===P?null:[new Pu(u,P)]}}function iw(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function MI(n){const e=[],t=new Set;for(const r of n){if(!iw(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=MI(r.children);e.push(new Pu(r.value,o))}return e.filter(r=>!t.has(r))}function Ig(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function q_(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function kI(n){return n.data||{}}function W_(n){return n.resolve||{}}function OI(n){return Rr(e=>{const t=n(e);return t?(0,Vt.D)(t).pipe((0,pt.U)(()=>e)):(0,mt.of)(e)})}class LI extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Z_=new f.OlP("ROUTES");class aw{constructor(e,t,r,o){this.loader=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,pt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=u.create(e);return new YE(nI(c.injector.get(Z_,void 0,f.XFs.Self|f.XFs.Optional)).map(dd),c)}),Ha(u=>{throw t._loader$=void 0,u}));return t._loader$=new hx.c(o,()=>new Os.xQ).pipe((0,NE.x)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?(0,Vt.D)(this.loader.load(e)):ia(e()).pipe((0,ts.zg)(t=>t instanceof f.YKP?(0,mt.of)(t):(0,Vt.D)(this.compiler.compileModuleAsync(t))))}}class VI{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ys,this.attachRef=null}}class ys{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new VI,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class oR{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function aR(n){throw n}function vO(n,e,t){return e.parse("/")}function hd(n,e){return(0,mt.of)(null)}const UI={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Tg={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Cr=(()=>{class n{constructor(t,r,o,u,c,p,y,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Os.xQ,this.errorHandler=aR,this.malformedUriErrorHandler=vO,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:hd,afterPreactivation:hd},this.urlHandlingStrategy=new oR,this.routeReuseStrategy=new LI,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(f.h0i),this.console=c.get(f.c2e);const P=c.get(f.R0b);this.isNgZoneEnabled=P instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=new ad(new Jt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new aw(p,y,B=>this.triggerEvent(new YC(B)),B=>this.triggerEvent(new QC(B))),this.routerState=B_(this.currentUrlTree,this.rootComponentType),this.transitions=new Xi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(ku(o=>0!==o.id),(0,pt.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Rr(o=>{let u=!1,c=!1;return(0,mt.of)(o).pipe((0,ns.b)(p=>{this.currentNavigation={id:p.id,initialUrl:p.currentRawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Rr(p=>{const y=this.browserUrlTree.toString(),w=!this.navigated||p.extractedUrl.toString()!==y||y!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||w)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return uf(p.source)&&(this.browserUrlTree=p.extractedUrl),(0,mt.of)(p).pipe(Rr(S=>{const P=this.transitions.getValue();return r.next(new og(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),P!==this.transitions.getValue()?Mu.E:Promise.resolve(S)}),function(n,e,t,r){return Rr(o=>function(n,e,t,r,o){return new Gx(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,pt.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ns.b)(S=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:S.urlAfterRedirects})}),function(n,e,t,r,o){return(0,ts.zg)(u=>function(n,e,t,r,o="emptyOnly",u="legacy"){try{const c=new eR(n,e,t,r,o,u).recognize();return null===c?Xx(new Jx):(0,mt.of)(c)}catch(c){return Xx(c)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,pt.U)(c=>Object.assign(Object.assign({},u),{targetSnapshot:c}))))}(this.rootComponentType,this.config,S=>this.serializeUrl(S),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ns.b)(S=>{"eager"===this.urlUpdateStrategy&&(S.extras.skipLocationChange||this.setBrowserUrl(S.urlAfterRedirects,S),this.browserUrlTree=S.urlAfterRedirects);const P=new Jh(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(P)}));if(w&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:P,extractedUrl:B,source:Y,restoredState:_e,extras:xe}=p,dt=new og(P,this.serializeUrl(B),Y,_e);r.next(dt);const lt=B_(B,this.rootComponentType).snapshot;return(0,mt.of)(Object.assign(Object.assign({},p),{targetSnapshot:lt,urlAfterRedirects:B,extras:Object.assign(Object.assign({},xe),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=p.rawUrl,this.browserUrlTree=p.urlAfterRedirects,p.resolve(null),Mu.E}),OI(p=>{const{targetSnapshot:y,id:w,extractedUrl:D,rawUrl:S,extras:{skipLocationChange:P,replaceUrl:B}}=p;return this.hooks.beforePreactivation(y,{navigationId:w,appliedUrlTree:D,rawUrlTree:S,skipLocationChange:!!P,replaceUrl:!!B})}),(0,ns.b)(p=>{const y=new kE(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}),(0,pt.U)(p=>Object.assign(Object.assign({},p),{guards:nw(p.targetSnapshot,p.currentSnapshot,this.rootContexts)})),function(n,e){return(0,ts.zg)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?(0,mt.of)(Object.assign(Object.assign({},t),{guardsResult:!0})):function(n,e,t,r){return(0,Vt.D)(n).pipe((0,ts.zg)(o=>function(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!u||0===u.length)return(0,mt.of)(!0);const c=u.map(p=>{const y=G_(p,e,o);let w;if(function(n){return n&&rs(n.canDeactivate)}(y))w=ia(y.canDeactivate(n,e,t,r));else{if(!rs(y))throw new Error("Invalid CanDeactivate guard");w=ia(y(n,e,t,r))}return w.pipe(Fi())});return(0,mt.of)(c).pipe(vg())}(o.component,o.route,t,e,r)),Fi(o=>!0!==o,!0))}(c,r,o,n).pipe((0,ts.zg)(p=>p&&function(n){return"boolean"==typeof n}(p)?function(n,e,t,r){return(0,Vt.D)(e).pipe(ig(o=>SE(function(n,e){return null!==n&&e&&e(new bx(n)),(0,mt.of)(!0)}(o.route.parent,r),function(n,e){return null!==n&&e&&e(new Ix(n)),(0,mt.of)(!0)}(o.route,r),function(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>jC(()=>{const p=c.guards.map(y=>{const w=G_(y,c.node,t);let D;if(function(n){return n&&rs(n.canActivateChild)}(w))D=ia(w.canActivateChild(r,n));else{if(!rs(w))throw new Error("Invalid CanActivateChild guard");D=ia(w(r,n))}return D.pipe(Fi())});return(0,mt.of)(p).pipe(vg())}));return(0,mt.of)(u).pipe(vg())}(n,o.path,t),function(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,mt.of)(!0);const o=r.map(u=>jC(()=>{const c=G_(u,e,t);let p;if(function(n){return n&&rs(n.canActivate)}(c))p=ia(c.canActivate(e,n));else{if(!rs(c))throw new Error("Invalid CanActivate guard");p=ia(c(e,n))}return p.pipe(Fi())}));return(0,mt.of)(o).pipe(vg())}(n,o.route,t))),Fi(o=>!0!==o,!0))}(r,u,n,e):(0,mt.of)(p)),(0,pt.U)(p=>Object.assign(Object.assign({},t),{guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),(0,ns.b)(p=>{if(ld(p.guardsResult)){const w=FE(`Redirecting to "${this.serializeUrl(p.guardsResult)}"`);throw w.url=p.guardsResult,w}const y=new KC(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(y)}),ku(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,""),!1)),OI(p=>{if(p.guards.canActivateChecks.length)return(0,mt.of)(p).pipe((0,ns.b)(y=>{const w=new wx(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(w)}),Rr(y=>{let w=!1;return(0,mt.of)(y).pipe(function(n,e){return(0,ts.zg)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return(0,mt.of)(t);let u=0;return(0,Vt.D)(o).pipe(ig(c=>function(n,e,t,r){return function(n,e,t,r){const o=Object.keys(n);if(0===o.length)return(0,mt.of)({});const u={};return(0,Vt.D)(o).pipe((0,ts.zg)(c=>function(n,e,t,r){const o=G_(n,e,r);return ia(o.resolve?o.resolve(e,t):o(e,t))}(n[c],e,t,r).pipe((0,ns.b)(p=>{u[c]=p}))),M_(1),(0,ts.zg)(()=>Object.keys(u).length===o.length?(0,mt.of)(u):Mu.E))}(n._resolve,n,e,r).pipe((0,pt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),Mx(n,t).resolve),null)))}(c.route,r,n,e)),(0,ns.b)(()=>u++),M_(1),(0,ts.zg)(c=>u===o.length?(0,mt.of)(t):Mu.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ns.b)({next:()=>w=!0,complete:()=>{w||(this.restoreHistory(y),this.cancelNavigationTransition(y,"At least one route resolver didn't emit any value."))}}))}),(0,ns.b)(y=>{const w=new PE(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(w)}))}),OI(p=>{const{targetSnapshot:y,id:w,extractedUrl:D,rawUrl:S,extras:{skipLocationChange:P,replaceUrl:B}}=p;return this.hooks.afterPreactivation(y,{navigationId:w,appliedUrlTree:D,rawUrlTree:S,skipLocationChange:!!P,replaceUrl:!!B})}),(0,pt.U)(p=>{const y=function(n,e,t){const r=pg(n,e._root,t?t._root:void 0);return new qa(r,e)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return Object.assign(Object.assign({},p),{targetRouterState:y})}),(0,ns.b)(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((n,e,t)=>(0,pt.U)(r=>(new ZE(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),(0,ns.b)({next(){u=!0},complete(){u=!0}}),function(n){return e=>e.lift(new sg(n))}(()=>{var p;if(!u&&!c){const y=`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(o),this.cancelNavigationTransition(o,y)):this.cancelNavigationTransition(o,y)}(null===(p=this.currentNavigation)||void 0===p?void 0:p.id)===o.id&&(this.currentNavigation=null)}),Ha(p=>{if(c=!0,function(n){return n&&n[XC]}(p)){const y=ld(p.url);y||(this.navigated=!0,this.restoreHistory(o,!0));const w=new ME(o.id,this.serializeUrl(o.extractedUrl),p.message);r.next(w),y?setTimeout(()=>{const D=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),S={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||uf(o.source)};this.scheduleNavigation(D,"imperative",null,S,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const y=new uO(o.id,this.serializeUrl(o.extractedUrl),p);r.next(y);try{o.resolve(this.errorHandler(p))}catch(w){o.reject(w)}}return Mu.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,r)&&setTimeout(()=>{const{source:o,state:u,urlTree:c}=r,p={replaceUrl:!0};if(u){const y=Object.assign({},u);delete y.navigationId,delete y.\u0275routerPageId,0!==Object.keys(y).length&&(p.state=y)}this.scheduleNavigation(c,o,u,p)},0),this.lastLocationChangeInfo=r}))}extractLocationChangeInfoFromEvent(t){var r;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(r=t.state)||void 0===r?void 0:r.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,r){if(!t)return!0;const o=r.urlTree.toString()===t.urlTree.toString();return r.transitionId!==t.transitionId||!o||!("hashchange"===r.source&&"popstate"===t.source||"popstate"===r.source&&"hashchange"===t.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){cd(t),this.config=t.map(dd),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:c,queryParamsHandling:p,preserveFragment:y}=r,w=o||this.routerState.root,D=y?this.currentUrlTree.fragment:c;let S=null;switch(p){case"merge":S=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=u||null}return null!==S&&(S=this.removeEmptyProps(S)),function(n,e,t,r,o){if(0===t.length)return _g(e.root,e.root,e,r,o);const u=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Lx(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const p={};return ri(u.outlets,(y,w)=>{p[w]="string"==typeof y?y.split("/"):y}),[...o,{outlets:p}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===c?(u.split("/").forEach((p,y)=>{0==y&&"."===p||(0==y&&""===p?t=!0:".."===p?e++:""!=p&&o.push(p))}),o):[...o,u]},[]);return new Lx(t,e,r)}(t);if(u.toRoot())return _g(e.root,new Jt([],{}),e,r,o);const c=function(n,e,t){if(n.isAbsolute)return new gI(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new gI(u,u===e.root,0)}const r=gg(n.commands[0])?0:1;return function(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new gI(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),p=c.processChildren?WE(c.segmentGroup,c.index,u.commands):Vx(c.segmentGroup,c.index,u.commands);return _g(c.segmentGroup,p,e,r,o)}(w,this.currentUrlTree,t,S,null!=D?D:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=ld(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},UI):!1===r?Object.assign({},Tg):r,ld(t))return ug(this.currentUrlTree,t,o);const u=this.parseUrl(t);return ug(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new sd(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,c){var p,y;if(this.disposed)return Promise.resolve(!1);const w=this.getTransition(),D=uf(r)&&w&&!uf(w.source),B=(this.lastSuccessfulId===w.id||this.currentNavigation?w.rawUrl:w.urlAfterRedirects).toString()===t.toString();if(D&&B)return Promise.resolve(!0);let Y,_e,xe;c?(Y=c.resolve,_e=c.reject,xe=c.promise):xe=new Promise((nt,st)=>{Y=nt,_e=st});const dt=++this.navigationId;let lt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),lt=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(p=this.browserPageId)&&void 0!==p?p:0:(null!==(y=this.browserPageId)&&void 0!==y?y:0)+1):lt=0,this.setTransition({id:dt,targetPageId:lt,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:Y,reject:_e,promise:xe,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),xe.catch(nt=>Promise.reject(nt))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===c?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new ME(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.DyG),f.LFG(O_),f.LFG(ys),f.LFG(ht),f.LFG(f.zs3),f.LFG(f.v3s),f.LFG(f.Sil),f.LFG(void 0))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function uf(n){return"imperative"!==n}let Fl=(()=>{class n{constructor(t,r,o,u,c){this.router=t,this.route=r,this.commands=[],this.onChanges=new Os.xQ,null==o&&u.setAttribute(c.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:fd(this.skipLocationChange),replaceUrl:fd(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:fd(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Cr),f.Y36(Pl),f.$8M("tabindex"),f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&f.NdJ("click",function(){return r.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[f.TTD]}),n})(),Ll=(()=>{class n{constructor(t,r,o){this.router=t,this.route=r,this.locationStrategy=o,this.commands=[],this.onChanges=new Os.xQ,this.subscription=t.events.subscribe(u=>{u instanceof sd&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,o,u,c){if(0!==t||r||o||u||c||"string"==typeof this.target&&"_self"!=this.target)return!0;const p={skipLocationChange:fd(this.skipLocationChange),replaceUrl:fd(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,p),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:fd(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Cr),f.Y36(Pl),f.Y36(Be))},n.\u0275dir=f.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&f.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&(f.Ikx("href",r.href,f.LSH),f.uIk("target",r.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[f.TTD]}),n})();function fd(n){return""===n||!!n}let lf=(()=>{class n{constructor(t,r,o,u,c,p){this.router=t,this.element=r,this.renderer=o,this.cdr=u,this.link=c,this.linkWithHref=p,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=t.events.subscribe(y=>{y instanceof sd&&this.update()})}ngAfterContentInit(){(0,mt.of)(this.links.changes,this.linksWithHrefs.changes,(0,mt.of)(null)).pipe((0,S_.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const r=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(o=>!!o).map(o=>o.onChanges);this.linkInputChangesSubscription=(0,Vt.D)(r).pipe((0,S_.J)()).subscribe(o=>{this.isActive!==this.isLinkActive(this.router)(o)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(o=>!!o)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}))})}isLinkActive(t){const r=function(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return o=>t.isActive(o.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Cr),f.Y36(f.SBq),f.Y36(f.Qsj),f.Y36(f.sBO),f.Y36(Fl,8),f.Y36(Ll,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,o){if(1&t&&(f.Suo(o,Fl,5),f.Suo(o,Ll,5)),2&t){let u;f.iGM(u=f.CRH())&&(r.links=u),f.iGM(u=f.CRH())&&(r.linksWithHrefs=u)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[f.TTD]}),n})(),lw=(()=>{class n{constructor(t,r,o,u,c){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.name=u||Zt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),p=this.parentContexts.getOrCreateContext(this.name).children,y=new lR(t,p,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,y),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ys),f.Y36(f.s_b),f.Y36(f._Vd),f.$8M("name"),f.Y36(f.sBO))},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),n})();class lR{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Pl?this.route:e===ys?this.childContexts:this.parent.get(e,t)}}class cw{}class dw{preload(e,t){return(0,mt.of)(null)}}let BI=(()=>{class n{constructor(t,r,o,u,c){this.router=t,this.injector=u,this.preloadingStrategy=c,this.loader=new aw(r,o,w=>t.triggerEvent(new YC(w)),w=>t.triggerEvent(new QC(w)))}setUpPreloading(){this.subscription=this.router.events.pipe(ku(t=>t instanceof sd),ig(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(f.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const c=u._loadedConfig;o.push(this.processRoutes(c.module,c.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children));return(0,Vt.D)(o).pipe((0,S_.J)(),(0,pt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?(0,mt.of)(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,ts.zg)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Cr),f.LFG(f.v3s),f.LFG(f.Sil),f.LFG(f.zs3),f.LFG(cw))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),hw=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof og?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof sd&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof OE&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new OE(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Cr),f.LFG(Lo),f.LFG(void 0))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const pd=new f.OlP("ROUTER_CONFIGURATION"),jI=new f.OlP("ROUTER_FORROOT_GUARD"),dR=[ht,{provide:O_,useClass:Ax},{provide:Cr,useFactory:function(n,e,t,r,o,u,c,p={},y,w){const D=new Cr(null,n,e,t,r,o,u,nI(c));return y&&(D.urlHandlingStrategy=y),w&&(D.routeReuseStrategy=w),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy)}(p,D),p.enableTracing&&D.events.subscribe(S=>{var P,B;null===(P=console.group)||void 0===P||P.call(console,`Router Event: ${S.constructor.name}`),console.log(S.toString()),console.log(S),null===(B=console.groupEnd)||void 0===B||B.call(console)}),D},deps:[O_,ys,ht,f.zs3,f.v3s,f.Sil,Z_,pd,[class{},new f.FiY],[class{},new f.FiY]]},ys,{provide:Pl,useFactory:function(n){return n.routerState.root},deps:[Cr]},{provide:f.v3s,useClass:f.EAV},BI,dw,class{preload(e,t){return t().pipe(Ha(()=>(0,mt.of)(null)))}},{provide:pd,useValue:{enableTracing:!1}}];function EO(){return new f.PXZ("Router",Cr)}let fw=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[dR,hR(t),{provide:jI,useFactory:pw,deps:[[Cr,new f.FiY,new f.tp0]]},{provide:pd,useValue:r||{}},{provide:Be,useFactory:nr,deps:[te,[new f.tBr(De),new f.FiY],pd]},{provide:hw,useFactory:$I,deps:[Cr,Lo,pd]},{provide:cw,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:dw},{provide:f.PXZ,multi:!0,useFactory:EO},[HI,{provide:f.ip1,multi:!0,useFactory:fR,deps:[HI]},{provide:_w,useFactory:pR,deps:[HI]},{provide:f.tb,multi:!0,useExisting:_w}]]}}static forChild(t){return{ngModule:n,providers:[hR(t)]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(jI,8),f.LFG(Cr,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function $I(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new hw(n,e,t)}function nr(n,e,t={}){return t.useHash?new Xe(n,e):new Re(n,e)}function pw(n){return"guarded"}function hR(n){return[{provide:f.deG,multi:!0,useValue:n},{provide:Z_,multi:!0,useValue:n}]}let HI=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Os.xQ}appInitializer(){return this.injector.get(U,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(p=>r=p),u=this.injector.get(Cr),c=this.injector.get(pd);return"disabled"===c.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?(0,mt.of)(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(pd),o=this.injector.get(BI),u=this.injector.get(hw),c=this.injector.get(Cr),p=this.injector.get(f.z2F);t===p.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),o.setUpPreloading(),u.init(),c.resetRootComponentType(p.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.zs3))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function fR(n){return n.appInitializer.bind(n)}function pR(n){return n.bootstrapListener.bind(n)}const _w=new f.OlP("Router Initializer");let qI=(()=>{class n{constructor(t){this.fb=t,this.submitLoader=!1,this.title="Contact form",this.ngUnsubscribe=new Os.xQ,this.contactForm=this.fb.group({firstName:["",[xs.required]],lastName:["",[xs.required]],email:["",[xs.required]],description:["",[xs.required,xs.minLength(10),xs.maxLength(50)]]})}ngOnInit(){}submit(t){alert(` ${t.firstName} ${t.lastName} ${t.email} ${t.description},  Now this form is demo form I'll integrated with database,  Thank you`)}isFieldInvalid(t){var r,o;return null===(o=null===(r=this.contactForm)||void 0===r?void 0:r.get(t))||void 0===o?void 0:o.invalid}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ta))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-contact-us"]],decls:44,vars:2,consts:[[1,"header"],["routerLink","",1,"logo"],[1,"header-right"],["routerLink","/home","routerLinkActive","active"],["routerLink","/contact","routerLinkActive","active"],["routerLink","/about","routerLinkActive","active"],["routerLink","/register-user","routerLinkActive","active"],["routerLink","/sign-in","routerLinkActive","active"],[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock",3,"formGroup"],[1,"formGroup"],["for","fname"],["type","text","formControlName","firstName","placeholder","First Name","required","",1,"formControl"],["firstName",""],["for","lname"],["type","text","formControlName","lastName","placeholder","Last Name","required","",1,"formControl"],["lastName",""],["for","email"],["type","email","formControlName","email","placeholder","abc@gmail.com","required","",1,"formControl"],["email",""],["for","subject"],["id","subject","name","subject","formControlName","description","placeholder","Write something..","required","",2,"height","200px"],["type","submit","value","Submit",3,"disabled","click"],[1,"footer"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"a",1),f._uU(2,"Logo"),f.qZA(),f.TgZ(3,"div",2),f.TgZ(4,"a",3),f._uU(5,"Home"),f.qZA(),f.TgZ(6,"a",4),f._uU(7,"Contact"),f.qZA(),f.TgZ(8,"a",5),f._uU(9,"About"),f.qZA(),f.TgZ(10,"a",6),f._uU(11,"Sign Up"),f.qZA(),f.TgZ(12,"a",7),f._uU(13,"Sign In"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(14,"div",8),f.TgZ(15,"div",9),f.TgZ(16,"div",10),f.TgZ(17,"h3"),f._uU(18,"Contact Us"),f.qZA(),f._UZ(19,"hr"),f.TgZ(20,"div",11),f.TgZ(21,"label",12),f._uU(22,"First Name"),f.qZA(),f._UZ(23,"input",13,14),f.qZA(),f.TgZ(25,"div",11),f.TgZ(26,"label",15),f._uU(27,"Last Name"),f.qZA(),f._UZ(28,"input",16,17),f.qZA(),f.TgZ(30,"div",11),f.TgZ(31,"label",18),f._uU(32,"Email"),f.qZA(),f._UZ(33,"input",19,20),f.qZA(),f.TgZ(35,"div",11),f.TgZ(36,"label",21),f._uU(37,"Subject"),f.qZA(),f._UZ(38,"textarea",22),f.qZA(),f.TgZ(39,"div",11),f.TgZ(40,"input",23),f.NdJ("click",function(){return r.submit(r.contactForm.value)}),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(41,"div",24),f.TgZ(42,"p"),f._uU(43," \xa9 copyright 2022 designed by Bhuwan Paneru "),f.qZA(),f.qZA()),2&t&&(f.xp6(16),f.Q6J("formGroup",r.contactForm),f.xp6(24),f.Q6J("disabled",r.contactForm.invalid))},directives:[Ll,lf,fo,ms,Ko,Vh,zp,Rl],styles:["input[type=text][_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box;margin-top:6px;margin-bottom:16px;resize:vertical}input[type=submit][_ngcontent-%COMP%]{background-color:#04aa6d;color:#fff;padding:12px 20px;border:none;border-radius:4px;cursor:pointer}input[type=submit][_ngcontent-%COMP%]:hover{background-color:#45a049}"]}),n})(),mR=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-about"]],decls:25,vars:0,consts:[[1,"header"],["routerLink","",1,"logo"],[1,"header-right"],["routerLink","/home","routerLinkActive","active"],["routerLink","/contact","routerLinkActive","active"],["routerLink","/about","routerLinkActive","active"],["routerLink","/register-user","routerLinkActive","active"],["routerLink","/sign-in","routerLinkActive","active"],[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"footer"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"a",1),f._uU(2,"Logo"),f.qZA(),f.TgZ(3,"div",2),f.TgZ(4,"a",3),f._uU(5,"Home"),f.qZA(),f.TgZ(6,"a",4),f._uU(7,"Contact"),f.qZA(),f.TgZ(8,"a",5),f._uU(9,"About"),f.qZA(),f.TgZ(10,"a",6),f._uU(11,"Sign Up"),f.qZA(),f.TgZ(12,"a",7),f._uU(13,"Sign In"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(14,"div",8),f.TgZ(15,"div",9),f.TgZ(16,"div",10),f.TgZ(17,"h3"),f._uU(18,"About Us"),f.qZA(),f._UZ(19,"hr"),f.TgZ(20,"p"),f._uU(21," What is Lorem Ipsum?\nLorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum. Why do we use it?\nIt is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like). Where does it come from?\nContrary to popular belief, Lorem Ipsum is not simply random text. It has roots in a piece of classical Latin literature from 45 BC, making it over 2000 years old. Richard McClintock, a Latin professor at Hampden-Sydney College in Virginia, looked up one of the more obscure Latin words, consectetur, from a Lorem Ipsum passage, and going through the cites of the word in classical literature, discovered the undoubtable source. Lorem Ipsum comes from sections 1.10.32 and 1.10.33 of \"de Finibus Bonorum et Malorum\" (The Extremes of Good and Evil) by Cicero, written in 45 BC. This book is a treatise on the theory of ethics, very popular during the Renaissance. The first line of Lorem Ipsum, \"Lorem ipsum dolor sit amet..\", comes from a line in section 1.10.32. The standard chunk of Lorem Ipsum used since the 1500s is reproduced below for those interested. Sections 1.10.32 and 1.10.33 from \"de Finibus Bonorum et Malorum\" by Cicero are also reproduced in their exact original form, accompanied by English versions from the 1914 translation by H. Rackham. Where can I get some?\nThere are many variations of passages of Lorem Ipsum available, but the majority have suffered alteration in some form, by injected humour, or randomised words which don't look even slightly believable. If you are going to use a passage of Lorem Ipsum, you need to be sure there isn't anything embarrassing hidden in the middle of text. All the Lorem Ipsum generators on the Internet tend to repeat predefined chunks as necessary, making this the first true generator on the Internet. It uses a dictionary of over 200 Latin words, combined with a handful of model sentence structures, to generate Lorem Ipsum which looks reasonable. The generated Lorem Ipsum is therefore always free from repetition, injected humour, or non-characteristic words etc. "),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(22,"div",11),f.TgZ(23,"p"),f._uU(24," \xa9 copyright 2022 designed by Bhuwan Paneru "),f.qZA(),f.qZA())},directives:[Ll,lf],styles:[""]}),n})(),_R=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-landing"]],decls:25,vars:0,consts:[[1,"header"],["routerLink","",1,"logo"],[1,"header-right"],["routerLink","","routerLinkActive","active"],["routerLink","/contact","routerLinkActive","active"],["routerLink","/about","routerLinkActive","active"],["routerLink","/register-user","routerLinkActive","active"],["routerLink","/sign-in","routerLinkActive","active"],[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"footer"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"a",1),f._uU(2,"Logo"),f.qZA(),f.TgZ(3,"div",2),f.TgZ(4,"a",3),f._uU(5,"Home"),f.qZA(),f.TgZ(6,"a",4),f._uU(7,"Contact"),f.qZA(),f.TgZ(8,"a",5),f._uU(9,"About"),f.qZA(),f.TgZ(10,"a",6),f._uU(11,"Sign Up"),f.qZA(),f.TgZ(12,"a",7),f._uU(13,"Sign In"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(14,"div",8),f.TgZ(15,"div",9),f.TgZ(16,"div",10),f.TgZ(17,"h3"),f._uU(18,"Home"),f.qZA(),f._UZ(19,"hr"),f.TgZ(20,"p"),f._uU(21,' Contrary to popular belief, Lorem Ipsum is not simply random text. It has roots in a piece of classical Latin literature from 45 BC, making it over 2000 years old. Richard McClintock, a Latin professor at Hampden-Sydney College in Virginia, looked up one of the more obscure Latin words, consectetur, from a Lorem Ipsum passage, and going through the cites of the word in classical literature, discovered the undoubtable source. Lorem Ipsum comes from sections 1.10.32 and 1.10.33 of "de Finibus Bonorum et Malorum" (The Extremes of Good and Evil) by Cicero, written in 45 BC. This book is a treatise on the theory of ethics, very popular during the Renaissance. The first line of Lorem Ipsum, "Lorem ipsum dolor sit amet..", comes from a line in section 1.10.32. The standard chunk of Lorem Ipsum used since the 1500s is reproduced below for those interested. Sections 1.10.32 and 1.10.33 from "de Finibus Bonorum et Malorum" by Cicero are also reproduced in their exact original form, accompanied by English versions from the 1914 translation by H. Rackham '),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(22,"div",11),f.TgZ(23,"p"),f._uU(24," \xa9 copyright 2022 designed by Bhuwan Paneru "),f.qZA(),f.qZA())},directives:[Ll,lf],styles:[""]}),n})();var Ag=V(7014),F=V(3854),Li=V(8026),Eo=V(5422),wo=V(3910),K_=V(3637),wn=V(2871);function yw(){return n=>n.lift(new yR)}class yR{call(e,t){return t.subscribe(new vR(e))}}class vR extends es.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}function vw(n,e){return t=>t.lift(new wO(n,e))}class wO{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new WI(e,this.compare,this.keySelector))}}class WI extends es.L{constructor(e,t,r){super(e),this.keySelector=r,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:o}=this;t=o?o(e):e}catch(o){return this.destination.error(o)}let r=!1;if(this.hasKey)try{const{compare:o}=this;r=o(this.key,t)}catch(o){return this.destination.error(o)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))}}var tt,Ur=V(8939),ZI=(V(4828),V(3394)),Ce=V(8239),Ew="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Fu={},Y_=Y_||{},Ut=Ew||self;function vs(){}function zI(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Q_(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var J_="closure_uid_"+(1e9*Math.random()>>>0),KI=0;function YI(n,e,t){return n.call.apply(n.bind,arguments)}function ER(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Vi(n,e,t){return(Vi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?YI:ER).apply(null,arguments)}function Sg(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Br(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var c=Array(arguments.length-2),p=2;p<arguments.length;p++)c[p-2]=arguments[p];return e.prototype[o].apply(r,c)}}function Vl(){this.s=this.s,this.o=this.o}var wR={};Vl.prototype.s=!1,Vl.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,J_)&&n[J_]||(n[J_]=++KI)}(this);delete wR[n]}},Vl.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const QI=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},JI=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function XI(n){return Array.prototype.concat.apply([],arguments)}function bw(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function gd(n){return/^[\s\xa0]*$/.test(n)}var jr,md=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Ui(n,e){return-1!=n.indexOf(e)}function Vs(n,e){return n<e?-1:n>e?1:0}e:{var eT=Ut.navigator;if(eT){var tT=eT.userAgent;if(tT){jr=tT;break e}}jr=""}function xg(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function oa(n){const e={};for(const t in n)e[t]=n[t];return e}var df="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function wi(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<df.length;u++)t=df[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Lu(n){return Lu[" "](n),n}Lu[" "]=vs;var Vu,n,bo=Ui(jr,"Opera"),Ul=Ui(jr,"Trident")||Ui(jr,"MSIE"),_d=Ui(jr,"Edge"),Bl=_d||Ul,yd=Ui(jr,"Gecko")&&!(Ui(jr.toLowerCase(),"webkit")&&!Ui(jr,"Edge"))&&!(Ui(jr,"Trident")||Ui(jr,"MSIE"))&&!Ui(jr,"Edge"),hf=Ui(jr.toLowerCase(),"webkit")&&!Ui(jr,"Edge");function vd(){var n=Ut.document;return n?n.documentMode:void 0}e:{var jl="",$l=(n=jr,yd?/rv:([^\);]+)(\)|;)/.exec(n):_d?/Edge\/([\d\.]+)/.exec(n):Ul?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):hf?/WebKit\/(\S+)/.exec(n):bo?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if($l&&(jl=$l?$l[1]:""),Ul){var Hl=vd();if(null!=Hl&&Hl>parseFloat(jl)){Vu=String(Hl);break e}}Vu=jl}var nT={};function rT(){return e=nT,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let n=0;const e=md(String(Vu)).split("."),t=md("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var o=e[c]||"",u=t[c]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=Vs(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||Vs(0==o[2].length,0==u[2].length)||Vs(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n}();var e}var iT=Ut.document&&Ul&&(vd()||parseInt(Vu,10))||void 0,sT=function(){if(!Ut.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ut.addEventListener("test",vs,e),Ut.removeEventListener("test",vs,e)}catch(t){}return n}();function bi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function ff(n,e){if(bi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(yd){e:{try{Lu(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:oT[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&ff.Z.h.call(this)}}bi.prototype.h=function(){this.defaultPrevented=!0},Br(ff,bi);var oT={2:"touch",3:"pen",4:"mouse"};ff.prototype.h=function(){ff.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Rg="closure_listenable_"+(1e6*Math.random()|0),aT=0;function CR(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++aT,this.ca=this.fa=!1}function Ng(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Mg(n){this.src=n,this.g={},this.h=0}function Iw(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=QI(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(Ng(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function uT(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}Mg.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=uT(n,e,r,o);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new CR(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var Tw="closure_lm_"+(1e6*Math.random()|0),ty={};function lT(n,e,t,r,o){if(r&&r.once)return cT(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)lT(n,e[u],t,r,o);return null}return t=xw(t),n&&n[Rg]?n.N(e,t,Q_(r)?!!r.capture:!!r,o):Dw(n,e,t,!1,r,o)}function Dw(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var c=Q_(o)?!!o.capture:!!o,p=dT(n);if(p||(n[Tw]=p=new Mg(n)),(t=p.add(e,t,r,c,u)).proxy)return t;if(r=function(){var e=IO;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)sT||(o=c),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(Sw(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function cT(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)cT(n,e[u],t,r,o);return null}return t=xw(t),n&&n[Rg]?n.O(e,t,Q_(r)?!!r.capture:!!r,o):Dw(n,e,t,!0,r,o)}function TR(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)TR(n,e[u],t,r,o);else r=Q_(r)?!!r.capture:!!r,t=xw(t),n&&n[Rg]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=uT(u=n.g[e],t,r,o))&&(Ng(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=dT(n))&&(e=n.g[e.toString()],n=-1,e&&(n=uT(e,t,r,o)),(t=-1<n?e[n]:null)&&Aw(t))}function Aw(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Rg])Iw(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Sw(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=dT(e))?(Iw(t,n),0==t.h&&(t.src=null,e[Tw]=null)):Ng(n)}}}function Sw(n){return n in ty?ty[n]:ty[n]="on"+n}function IO(n,e){if(n.ca)n=!0;else{e=new ff(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Aw(n),n=t.call(r,e)}return n}function dT(n){return(n=n[Tw])instanceof Mg?n:null}var hT="__closure_events_fn_"+(1e9*Math.random()>>>0);function xw(n){return"function"==typeof n?n:(n[hT]||(n[hT]=function(e){return n.handleEvent(e)}),n[hT])}function Ci(){Vl.call(this),this.i=new Mg(this),this.P=this,this.I=null}function Ii(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new bi(e,n);else if(e instanceof bi)e.target=e.target||n;else{var o=e;wi(e=new bi(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];o=ny(c,r,!0,e)&&o}if(o=ny(c=e.g=n,r,!0,e)&&o,o=ny(c,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=ny(c=e.g=t[u],r,!1,e)&&o}function ny(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ca&&c.capture==t){var p=c.listener,y=c.ia||c.src;c.fa&&Iw(n.i,c),o=!1!==p.call(y,r)&&o}}return o&&!r.defaultPrevented}Br(Ci,Vl),Ci.prototype[Rg]=!0,Ci.prototype.removeEventListener=function(n,e,t,r){TR(this,n,e,t,r)},Ci.prototype.M=function(){if(Ci.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Ng(t[r]);delete n.g[e],n.h--}}this.I=null},Ci.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ci.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var kg=Ut.JSON.stringify;function Rw(){var n=Ed;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var ry,AR=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new TO,n=>n.reset());class TO{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function DO(n){Ut.setTimeout(()=>{throw n},0)}function Nw(n,e){ry||function(){var n=Ut.Promise.resolve(void 0);ry=function(){n.then(SR)}}(),Mw||(ry(),Mw=!0),Ed.add(n,e)}var Mw=!1,Ed=new class{constructor(){this.h=this.g=null}add(e,t){const r=AR.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function SR(){for(var n;n=Rw();){try{n.h.call(n.g)}catch(t){DO(t)}var e=AR;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Mw=!1}function Pg(n,e){Ci.call(this),this.h=n||1,this.g=e||Ut,this.j=Vi(this.kb,this),this.l=Date.now()}function kw(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function iy(n,e,t){if("function"==typeof n)t&&(n=Vi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Vi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ut.setTimeout(n,e||0)}function Og(n){n.g=iy(()=>{n.g=null,n.i&&(n.i=!1,Og(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Br(Pg,Ci),(tt=Pg.prototype).da=!1,tt.S=null,tt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ii(this,"tick"),this.da&&(kw(this),this.start()))}},tt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},tt.M=function(){Pg.Z.M.call(this),kw(this),delete this.g};class xR extends Vl{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Og(this)}M(){super.M(),this.g&&(Ut.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pf(n){Vl.call(this),this.h=n,this.g={}}Br(pf,Vl);var fT=[];function pT(n,e,t,r){Array.isArray(t)||(t&&(fT[0]=t.toString()),t=fT);for(var o=0;o<t.length;o++){var u=lT(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function gT(n){xg(n.g,function(e,t){this.g.hasOwnProperty(t)&&Aw(e)},n),n.g={}}function sy(){this.g=!0}function gf(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<o.length;c++)o[c]=""}}}return kg(t)}catch(p){return e}}(n,t)+(r?" "+r:"")})}pf.prototype.M=function(){pf.Z.M.call(this),gT(this)},pf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},sy.prototype.Aa=function(){this.g=!1},sy.prototype.info=function(){};var Uu={},NR=null;function mf(){return NR=NR||new Ci}function vT(n){bi.call(this,Uu.Ma,n)}function oy(n){const e=mf();Ii(e,new vT(e,n))}function _f(n,e){bi.call(this,Uu.STAT_EVENT,n),this.stat=e}function is(n){const e=mf();Ii(e,new _f(e,n))}function ay(n,e){bi.call(this,Uu.Na,n),this.size=e}function wd(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ut.setTimeout(function(){n()},e)}Uu.Ma="serverreachability",Br(vT,bi),Uu.STAT_EVENT="statevent",Br(_f,bi),Uu.Na="timingevent",Br(ay,bi);var uy={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ly={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Fg(){}function MR(){}Fg.prototype.h=null;var Ow,Lg={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function cy(){bi.call(this,"d")}function dy(){bi.call(this,"c")}function Vg(){}function bd(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new pf(this),this.P=Lw,this.W=new Pg(n=Bl?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Fw}function Fw(){this.i=null,this.g="",this.h=!1}Br(cy,bi),Br(dy,bi),Br(Vg,Fg),Vg.prototype.g=function(){return new XMLHttpRequest},Vg.prototype.i=function(){return{}},Ow=new Vg;var Lw=45e3,Ug={},Bg={};function Vw(n,e,t){n.K=1,n.v=vy(ju(e)),n.s=t,n.U=!0,Uw(n,null)}function Uw(n,e){n.F=Date.now(),jg(n),n.A=ju(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),aa(t.h,"t",r),n.C=0,t=n.l.H,n.h=new Fw,n.g=Ay(n.l,t?e:null,!n.s),0<n.O&&(n.L=new xR(Vi(n.Ia,n,n.g),n.O)),pT(n.V,n.g,"readystatechange",n.gb),e=n.H?oa(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),oy(1),function(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var c="",p=u.split("&"),y=0;y<p.length;y++){var w=p[y].split("=");if(1<w.length){var D=w[0];w=w[1];var S=D.split("_");c=2<=S.length&&"type"==S[1]?c+(D+"=")+w+"&":c+(D+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Bw(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function hy(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=kR(n,t),o==Bg){4==e&&(n.o=4,is(14),r=!1),gf(n.j,n.m,null,"[Incomplete Response]");break}if(o==Ug){n.o=4,is(15),gf(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}gf(n.j,n.m,o,null),py(n,o)}Bw(n)&&o!=Bg&&o!=Ug&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,is(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Dy(e),e.L=!0,is(11))):(gf(n.j,n.m,t,"[Invalid Chunked Response]"),Bu(n),Cd(n))}function kR(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Bg:(t=Number(e.substring(t,r)),isNaN(t)?Ug:(r+=1)+t>e.length?Bg:(e=e.substr(r,t),n.C=r+t,e))}function jg(n){n.Y=Date.now()+n.P,ET(n,n.P)}function ET(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=wd(Vi(n.eb,n),e)}function fy(n){n.B&&(Ut.clearTimeout(n.B),n.B=null)}function Cd(n){0==n.l.G||n.I||n0(n.l,n)}function Bu(n){fy(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,kw(n.W),gT(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function py(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||qw(t.i,n)))if(t.I=n.N,!n.J&&qw(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(w){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=wd(Vi(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Kg(t),Cy(t)}Ty(t),is(18)}if(1>=Gw(t.i)&&t.ka){try{t.ka()}catch(w){}t.ka=void 0}}else ql(t,11)}else if((n.J||t.g==n)&&Kg(t),!gd(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let w=o[e];if(t.U=w[0],w=w[1],2==t.G)if("c"==w[0]){t.J=w[1],t.la=w[2];const D=w[3];null!=D&&(t.ma=D,t.h.info("VER="+t.ma));const S=w[4];null!=S&&(t.za=S,t.h.info("SVER="+t.za));const P=w[5];null!=P&&"number"==typeof P&&0<P&&(t.K=r=1.5*P,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const B=n.g;if(B){const Y=B.g?B.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Y){var u=r.i;!u.g&&(Ui(Y,"spdy")||Ui(Y,"quic")||Ui(Y,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(Ww(u,u.h),u.h=null))}if(r.D){const _e=B.g?B.g.getResponseHeader("X-HTTP-Session-Id"):null;_e&&(r.sa=_e,Hn(r.F,r.D,_e))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=o0(r,r.H?r.la:null,r.W),c.J){DT(r.i,c);var p=c,y=r.K;y&&p.setTimeout(y),p.B&&(fy(p),jg(p)),r.g=c}else BT(r);0<t.l.length&&Iy(t)}else"stop"!=w[0]&&"close"!=w[0]||ql(t,7);else 3==t.G&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?ql(t,7):Xw(t):"noop"!=w[0]&&t.j&&t.j.wa(w),t.A=0)}oy(4)}catch(w){}}function gy(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(zI(n)||"string"==typeof n)JI(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(zI(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;o=(r=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(zI(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n)).length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function Id(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Id)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function my(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Gl(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)Gl(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function Gl(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(tt=bd.prototype).setTimeout=function(n){this.P=n},tt.gb=function(n){n=n.target;const e=this.L;e&&3==$u(n)?e.l():this.Ia(n)},tt.Ia=function(n){try{if(n==this.g)e:{const D=$u(this.g);var e=this.g.Da();const S=this.g.ba();if(!(3>D)&&(3!=D||Bl||this.g&&(this.h.h||this.g.ga()||OT(this.g)))){this.I||4!=D||7==e||oy(8==e||0>=S?3:2),fy(this);var t=this.g.ba();this.N=t;t:if(Bw(this)){var r=OT(this.g);n="";var o=r.length,u=4==$u(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Bu(this),Cd(this);var c="";break t}this.h.i=new Ut.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function(n,e,t,r,o,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.X,D,t),this.i){if(this.$&&!this.J){t:{if(this.g){var p,y=this.g;if((p=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!gd(p)){var w=p;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,is(12),Bu(this),Cd(this);break e}gf(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,py(this,t)}this.U?(hy(this,D,c),Bl&&this.i&&3==D&&(pT(this.V,this.W,"tick",this.fb),this.W.start())):(gf(this.j,this.m,c,null),py(this,c)),4==D&&Bu(this),this.i&&!this.I&&(4==D?n0(this.l,this):(this.i=!1,jg(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,is(12)):(this.o=0,is(13)),Bu(this),Cd(this)}}}catch(D){}},tt.fb=function(){if(this.g){var n=$u(this.g),e=this.g.ga();this.C<e.length&&(fy(this),hy(this,n,e),this.i&&4!=n&&jg(this))}},tt.cancel=function(){this.I=!0,Bu(this)},tt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(oy(3),is(17)),Bu(this),this.o=2,Cd(this)):ET(this,this.Y-n)},(tt=Id.prototype).R=function(){my(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},tt.T=function(){return my(this),this.g.concat()},tt.get=function(n,e){return Gl(this.h,n)?this.h[n]:e},tt.set=function(n,e){Gl(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},tt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var jw=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function yf(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof yf){this.g=void 0!==e?e:n.g,_y(this,n.j),this.s=n.s,$g(this,n.i),yy(this,n.m),this.l=n.l,e=n.h;var t=new Ef;t.i=e.i,e.g&&(t.g=new Id(e.g),t.h=e.h),Nr(this,t),this.o=n.o}else n&&(t=String(n).match(jw))?(this.g=!!e,_y(this,t[1]||"",!0),this.s=Hg(t[2]||""),$g(this,t[3]||"",!0),yy(this,t[4]),this.l=Hg(t[5]||"",!0),Nr(this,t[6]||"",!0),this.o=Hg(t[7]||"")):(this.g=!!e,this.h=new Ef(null,this.g))}function ju(n){return new yf(n)}function _y(n,e,t){n.j=t?Hg(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function $g(n,e,t){n.i=t?Hg(e,!0):e}function yy(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Nr(n,e,t){e instanceof Ef?(n.h=e,function(n,e){e&&!n.j&&(Dd(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&($w(this,r),aa(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=vf(e,TT)),n.h=new Ef(e,n.g))}function Hn(n,e,t){n.h.set(e,t)}function vy(n){return Hn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Hg(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function vf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,IT),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function IT(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}yf.prototype.toString=function(){var n=[],e=this.j;e&&n.push(vf(e,Td,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(vf(e,Td,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(vf(t,"/"==t.charAt(0)?FR:OR,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",vf(t,LR)),n.join("")};var Td=/[#\/\?@]/g,OR=/[#\?:]/g,FR=/[#\?]/g,TT=/[#\?@]/g,LR=/#/g;function Ef(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Dd(n){n.g||(n.g=new Id,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function $w(n,e){Dd(n),e=wf(n,e),Gl(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Gl((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&my(n)))}function Ey(n,e){return Dd(n),e=wf(n,e),Gl(n.g.h,e)}function aa(n,e,t){$w(n,e),0<t.length&&(n.i=null,n.g.set(wf(n,e),bw(t)),n.h+=t.length)}function wf(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Co(n){this.l=n||ua,n=Ut.PerformanceNavigationTiming?0<(n=Ut.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ut.g&&Ut.g.Ea&&Ut.g.Ea()&&Ut.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(tt=Ef.prototype).add=function(n,e){Dd(this),this.i=null,n=wf(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},tt.forEach=function(n,e){Dd(this),this.g.forEach(function(t,r){JI(t,function(o){n.call(e,o,r,this)},this)},this)},tt.T=function(){Dd(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},tt.R=function(n){Dd(this);var e=[];if("string"==typeof n)Ey(this,n)&&(e=XI(e,this.g.get(wf(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=XI(e,n[t])}return e},tt.set=function(n,e){return Dd(this),this.i=null,Ey(this,n=wf(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},tt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},tt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var c=o;""!==r[u]&&(c+="="+encodeURIComponent(String(r[u]))),n.push(c)}}return this.i=n.join("&")};var ua=10;function Hw(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Gw(n){return n.h?1:n.g?n.g.size:0}function qw(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Ww(n,e){n.g?n.g.add(e):n.h=e}function DT(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function AT(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return bw(n.i)}function Gg(){}function qg(){this.g=new Gg}function UR(n,e,t){const r=t||"";try{gy(n,function(o,u){let c=o;Q_(o)&&(c=kg(o)),e.push(r+u+"="+encodeURIComponent(c))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function wy(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function bf(n){this.l=n.$b||null,this.j=n.ib||!1}function Wg(n,e){Ci.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Cf,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Co.prototype.cancel=function(){if(this.i=AT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Gg.prototype.stringify=function(n){return Ut.JSON.stringify(n,void 0)},Gg.prototype.parse=function(n){return Ut.JSON.parse(n,void 0)},Br(bf,Fg),bf.prototype.g=function(){return new Wg(this.l,this.j)},bf.prototype.i=function(n){return function(){return n}}({}),Br(Wg,Ci);var Cf=0;function xT(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function If(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Tf(n)}function Tf(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(tt=Wg.prototype).open=function(n,e){if(this.readyState!=Cf)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Tf(this)},tt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ut).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},tt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,If(this)),this.readyState=Cf},tt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Tf(this)),this.g&&(this.readyState=3,Tf(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Ut.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;xT(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},tt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?If(this):Tf(this),3==this.readyState&&xT(this)}},tt.Ua=function(n){this.g&&(this.response=this.responseText=n,If(this))},tt.Ta=function(n){this.g&&(this.response=n,If(this))},tt.ha=function(){this.g&&If(this)},tt.setRequestHeader=function(n,e){this.v.append(n,e)},tt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},tt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Wg.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Zw=Ut.JSON.parse;function mr(n){Ci.call(this),this.headers=new Id,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=zw,this.K=this.L=!1}Br(mr,Ci);var zw="",RT=/^https?$/i,NT=["POST","PUT"];function kT(n){return"content-type"==n.toLowerCase()}function Kw(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Yw(n),by(n)}function Yw(n){n.D||(n.D=!0,Ii(n,"complete"),Ii(n,"error"))}function Qw(n){if(n.h&&void 0!==Y_&&(!n.C[1]||4!=$u(n)||2!=n.ba()))if(n.v&&4==$u(n))iy(n.Fa,0,n);else if(Ii(n,"readystatechange"),4==$u(n)){n.h=!1;try{const p=n.ba();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===p){var o=String(n.H).match(jw)[1]||null;if(!o&&Ut.self&&Ut.self.location){var u=Ut.self.location.protocol;o=u.substr(0,u.length-1)}r=!RT.test(o?o.toLowerCase():"")}t=r}if(t)Ii(n,"complete"),Ii(n,"success");else{n.m=6;try{var c=2<$u(n)?n.g.statusText:""}catch(y){c=""}n.j=c+" ["+n.ba()+"]",Yw(n)}}finally{by(n)}}}function by(n,e){if(n.g){PT(n);const t=n.g,r=n.C[0]?vs:null;n.g=null,n.C=null,e||Ii(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function PT(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ut.clearTimeout(n.A),n.A=null)}function $u(n){return n.g?n.g.readyState:0}function OT(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case zw:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Jw(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function(n){let e="";return xg(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Hn(n,e,t))}function Zg(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function FT(n){this.za=0,this.l=[],this.h=new sy,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Zg("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Zg("baseRetryDelayMs",5e3,n),this.$a=Zg("retryDelaySeedMs",1e4,n),this.Ya=Zg("forwardChannelMaxRetries",2,n),this.ra=Zg("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Co(n&&n.concurrentRequestLimit),this.Ca=new qg,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Xw(n){if(LT(n),3==n.G){var e=n.V++,t=ju(n.F);Hn(t,"SID",n.J),Hn(t,"RID",e),Hn(t,"TYPE","terminate"),zg(n,t),(e=new bd(n,n.h,e,void 0)).K=2,e.v=vy(ju(t)),t=!1,Ut.navigator&&Ut.navigator.sendBeacon&&(t=Ut.navigator.sendBeacon(e.v.toString(),"")),!t&&Ut.Image&&((new Image).src=e.v,t=!0),t||(e.g=Ay(e.l,null),e.g.ea(e.v)),e.F=Date.now(),jg(e)}s0(n)}function Cy(n){n.g&&(Dy(n),n.g.cancel(),n.g=null)}function LT(n){Cy(n),n.u&&(Ut.clearTimeout(n.u),n.u=null),Kg(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ut.clearTimeout(n.m),n.m=null)}function e0(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Iy(n)}function Iy(n){Hw(n.i)||n.m||(n.m=!0,Nw(n.Ha,n),n.C=0)}function VT(n,e){var t;t=e?e.m:n.V++;const r=ju(n.F);Hn(r,"SID",n.J),Hn(r,"RID",t),Hn(r,"AID",n.U),zg(n,r),n.o&&n.s&&Jw(r,n.o,n.s),t=new bd(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=UT(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Ww(n.i,t),Vw(t,r,e)}function zg(n,e){n.j&&gy({},function(t,r){Hn(e,r,t)})}function UT(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Vi(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=o[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let p=!0;for(let y=0;y<t;y++){let w=o[y].h;const D=o[y].g;if(w-=u,0>w)u=Math.max(0,o[y].h-100),p=!1;else try{UR(D,c,"req"+w+"_")}catch(S){r&&r(D)}}if(p){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function BT(n){n.g||n.u||(n.Y=1,Nw(n.Ga,n),n.A=0)}function Ty(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=wd(Vi(n.Ga,n),r0(n,n.A)),n.A++,0))}function Dy(n){null!=n.B&&(Ut.clearTimeout(n.B),n.B=null)}function t0(n){n.g=new bd(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=ju(n.oa);Hn(e,"RID","rpc"),Hn(e,"SID",n.J),Hn(e,"CI",n.N?"0":"1"),Hn(e,"AID",n.U),zg(n,e),Hn(e,"TYPE","xmlhttp"),n.o&&n.s&&Jw(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=vy(ju(e)),t.s=null,t.U=!0,Uw(t,n)}function Kg(n){null!=n.v&&(Ut.clearTimeout(n.v),n.v=null)}function n0(n,e){var t=null;if(n.g==e){Kg(n),Dy(n),n.g=null;var r=2}else{if(!qw(n.i,e))return;t=e.D,DT(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Ii(r=mf(),new ay(r,t,e,o)),Iy(n)}else BT(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function(n,e){return!(Gw(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=wd(Vi(n.Ha,n,e),r0(n,n.C)),n.C++,0)))}(n,e)||2==r&&Ty(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:ql(n,5);break;case 4:ql(n,10);break;case 3:ql(n,6);break;default:ql(n,2)}}function r0(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function ql(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Vi(n.jb,n);t||(t=new yf("//www.google.com/images/cleardot.gif"),Ut.location&&"http"==Ut.location.protocol||_y(t,"https"),vy(t)),function(n,e){const t=new sy;if(Ut.Image){const r=new Image;r.onload=Sg(wy,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Sg(wy,t,r,"TestLoadImage: error",!1,e),r.onabort=Sg(wy,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Sg(wy,t,r,"TestLoadImage: timeout",!1,e),Ut.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else is(2);n.G=0,n.j&&n.j.va(e),s0(n),LT(n)}function s0(n){n.G=0,n.I=-1,n.j&&((0!=AT(n.i).length||0!=n.l.length)&&(n.i.i.length=0,bw(n.l),n.l.length=0),n.j.ua())}function o0(n,e,t){let r=function(n){return n instanceof yf?ju(n):new yf(n,void 0)}(t);if(""!=r.i)e&&$g(r,e+"."+r.i),yy(r,r.m);else{const o=Ut.location;r=function(n,e,t,r){var o=new yf(null,void 0);return n&&_y(o,n),e&&$g(o,e),t&&yy(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&xg(n.aa,function(o,u){Hn(r,u,o)}),t=n.sa,(e=n.D)&&t&&Hn(r,e,t),Hn(r,"VER",n.ma),zg(n,r),r}function Ay(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new mr(t&&n.Ba&&!n.qa?new bf({ib:!0}):n.qa)).L=n.H,e}function a0(){}function Ka(){if(Ul&&!(10<=Number(iT)))throw Error("Environmental error: no available transport.")}function Us(n,e){Ci.call(this),this.g=new FT(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!gd(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!gd(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Yg(this)}function jT(n){cy.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Ad(){dy.call(this),this.status=1}function Yg(n){this.g=n}(tt=mr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ow.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:Ow),this.g.onreadystatechange=Vi(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void Kw(this,u)}n=t||"";const o=new Id(this.headers);r&&gy(r,function(u,c){o.set(c,u)}),r=function(n){e:{var e=kT;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=Ut.FormData&&n instanceof Ut.FormData,!(0<=QI(NT,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,c){this.g.setRequestHeader(c,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{PT(this),0<this.B&&((this.K=function(n){return Ul&&rT()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Vi(this.pa,this)):this.A=iy(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Kw(this,u)}},tt.pa=function(){void 0!==Y_&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ii(this,"timeout"),this.abort(8))},tt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ii(this,"complete"),Ii(this,"abort"),by(this))},tt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),by(this,!0)),mr.Z.M.call(this)},tt.Fa=function(){this.s||(this.F||this.v||this.l?Qw(this):this.cb())},tt.cb=function(){Qw(this)},tt.ba=function(){try{return 2<$u(this)?this.g.status:-1}catch(n){return-1}},tt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},tt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Zw(e)}},tt.Da=function(){return this.m},tt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(tt=FT.prototype).ma=8,tt.G=1,tt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},tt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new bd(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=oa(u),wi(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=UT(this,o,e),Hn(t=ju(this.F),"RID",n),Hn(t,"CVER",22),this.D&&Hn(t,"X-HTTP-Session-Id",this.D),zg(this,t),this.o&&u&&Jw(t,this.o,u),Ww(this.i,o),this.Ra&&Hn(t,"TYPE","init"),this.ja?(Hn(t,"$req",e),Hn(t,"SID","null"),o.$=!0,Vw(o,t,null)):Vw(o,t,e),this.G=2}}else 3==this.G&&(n?VT(this,n):0==this.l.length||Hw(this.i)||VT(this))},tt.Ga=function(){if(this.u=null,t0(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=wd(Vi(this.bb,this),n)}},tt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,is(10),Cy(this),t0(this))},tt.ab=function(){null!=this.v&&(this.v=null,Cy(this),Ty(this),is(19))},tt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),is(2)):(this.h.info("Failed to ping google.com"),is(1))},(tt=a0.prototype).xa=function(){},tt.wa=function(){},tt.va=function(){},tt.ua=function(){},tt.Oa=function(){},Ka.prototype.g=function(n,e){return new Us(n,e)},Br(Us,Ci),Us.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Nw(Vi(n.hb,n,e))),is(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=o0(n,null,n.W),Iy(n)},Us.prototype.close=function(){Xw(this.g)},Us.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,e0(this.g,e)}else this.v?((e={}).__data__=kg(n),e0(this.g,e)):e0(this.g,n)},Us.prototype.M=function(){this.g.j=null,delete this.j,Xw(this.g),delete this.g,Us.Z.M.call(this)},Br(jT,cy),Br(Ad,dy),Br(Yg,a0),Yg.prototype.xa=function(){Ii(this.g,"a")},Yg.prototype.wa=function(n){Ii(this.g,new jT(n))},Yg.prototype.va=function(n){Ii(this.g,new Ad(n))},Yg.prototype.ua=function(){Ii(this.g,"b")},Ka.prototype.createWebChannel=Ka.prototype.g,Us.prototype.send=Us.prototype.u,Us.prototype.open=Us.prototype.m,Us.prototype.close=Us.prototype.close,uy.NO_ERROR=0,uy.TIMEOUT=8,uy.HTTP_ERROR=6,ly.COMPLETE="complete",MR.EventType=Lg,Lg.OPEN="a",Lg.CLOSE="b",Lg.ERROR="c",Lg.MESSAGE="d",Ci.prototype.listen=Ci.prototype.N,mr.prototype.listenOnce=mr.prototype.O,mr.prototype.getLastError=mr.prototype.La,mr.prototype.getLastErrorCode=mr.prototype.Da,mr.prototype.getStatus=mr.prototype.ba,mr.prototype.getResponseJson=mr.prototype.Qa,mr.prototype.getResponseText=mr.prototype.ga,mr.prototype.send=mr.prototype.ea;var u0=Fu.createWebChannelTransport=function(){return new Ka},SO=Fu.getStatEventTarget=function(){return mf()},Sy=Fu.ErrorCode=uy,$T=Fu.EventType=ly,xO=Fu.Event=Uu,yt=Fu.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},$R=Fu.FetchXmlHttpFactory=bf,xy=Fu.WebChannel=MR,HR=Fu.XhrIo=mr;const Qg="@firebase/firestore";class Ti{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ti.UNAUTHENTICATED=new Ti(null),Ti.GOOGLE_CREDENTIALS=new Ti("google-credentials-uid"),Ti.FIRST_PARTY=new Ti("first-party-uid"),Ti.MOCK_USER=new Ti("mock-user");let Hu="9.8.0";const la=new Eo.Yd("@firebase/firestore");function rr(){return la.logLevel}function Ue(n,...e){if(la.logLevel<=Eo.in.DEBUG){const t=e.map(Ry);la.debug(`Firestore (${Hu}): ${n}`,...t)}}function _r(n,...e){if(la.logLevel<=Eo.in.ERROR){const t=e.map(Ry);la.error(`Firestore (${Hu}): ${n}`,...t)}}function Jg(n,...e){if(la.logLevel<=Eo.in.WARN){const t=e.map(Ry);la.warn(`Firestore (${Hu}): ${n}`,...t)}}function Ry(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function it(n="Unexpected state"){const e=`FIRESTORE (${Hu}) INTERNAL ASSERTION FAILED: `+n;throw _r(e),new Error(e)}function Rt(n,e){n||it()}function Ye(n,e){return n}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Me extends F.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class yr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class GT{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class GR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ti.UNAUTHENTICATED))}shutdown(){}}class qR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Ny{constructor(e){this.t=e,this.currentUser=Ti.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=w=>this.i!==o?(o=this.i,t(w)):Promise.resolve();let c=new yr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new yr,e.enqueueRetryable(()=>u(this.currentUser))};const p=()=>{const w=c;e.enqueueRetryable((0,Ce.Z)(function*(){yield w.promise,yield u(r.currentUser)}))},y=w=>{Ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(w=>y(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?y(w):(Ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new yr)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Rt("string"==typeof r.accessToken),new GT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Rt(null===e||"string"==typeof e),new Ti(e)}}class qT{constructor(e,t,r){this.type="FirstParty",this.user=Ti.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class WT{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new qT(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ti.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class l0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WR{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.p;return this.p=u.token,Ue("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?o(u):Ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Rt("string"==typeof t.token),this.p=t.token,new l0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Di{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function ZR(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Di.A=-1;class ZT{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=ZR(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function $t(n,e){return n<e?-1:n>e?1:0}function Sd(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function c0(n){return n+"\0"}class vr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Me(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Me(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Me(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Me(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return vr.fromMillis(Date.now())}static fromDate(e){return vr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new vr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?$t(this.nanoseconds,e.nanoseconds):$t(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class It{constructor(e){this.timestamp=e}static fromTimestamp(e){return new It(e)}static min(){return new It(new vr(0,0))}static max(){return new It(new vr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function d0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function xd(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function zT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class ky{constructor(e,t,r){void 0===t?t=0:t>e.length&&it(),void 0===r?r=e.length-t:r>e.length-t&&it(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===ky.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ky?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),c=t.get(o);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class fn extends ky{construct(e,t,r){return new fn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Me(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new fn(t)}static emptyPath(){return new fn([])}}const NO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ii extends ky{construct(e,t,r){return new ii(e,t,r)}static isValidIdentifier(e){return NO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ii.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ii(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Me(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;o<e.length;){const p=e[o];if("\\"===p){if(o+1===e.length)throw new Me(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if("\\"!==y&&"."!==y&&"`"!==y)throw new Me(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,o+=2}else"`"===p?(c=!c,o++):"."!==p||c?(r+=p,o++):(u(),o++)}if(u(),c)throw new Me(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ii(t)}static emptyPath(){return new ii([])}}class Rd{constructor(e){this.fields=e,e.sort(ii.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Sd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class $r{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new $r(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new $r(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $t(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$r.EMPTY_BYTE_STRING=new $r("");const zR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gu(n){if(Rt(!!n),"string"==typeof n){let e=0;const t=zR.exec(n);if(Rt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Un(n.seconds),nanos:Un(n.nanos)}}function Un(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Nd(n){return"string"==typeof n?$r.fromBase64String(n):$r.fromUint8Array(n)}function h0(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function KT(n){const e=n.mapValue.fields.__previous_value__;return h0(e)?KT(e):e}function Xg(n){const e=Gu(n.mapValue.fields.__local_write_time__.timestampValue);return new vr(e.seconds,e.nanos)}class KR{constructor(e,t,r,o,u,c,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=p,this.useFetchStreams=y}}class Ya{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ya("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ya&&e.projectId===this.projectId&&e.database===this.database}}function em(n){return null==n}function tm(n){return 0===n&&1/n==-1/0}function Md(n){return"number"==typeof n&&Number.isInteger(n)&&!tm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class ze{constructor(e){this.path=e}static fromPath(e){return new ze(fn.fromString(e))}static fromName(e){return new ze(fn.fromString(e).popFirst(5))}static empty(){return new ze(fn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===fn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return fn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ze(new fn(e.slice()))}}const qu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Oy={nullValue:"NULL_VALUE"};function Wl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?h0(n)?4:QT(n)?9007199254740991:10:it()}function Qa(n,e){if(n===e)return!0;const t=Wl(n);if(t!==Wl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Xg(n).isEqual(Xg(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Gu(r.timestampValue),c=Gu(o.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Nd(n.bytesValue).isEqual(Nd(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Un(r.geoPointValue.latitude)===Un(o.geoPointValue.latitude)&&Un(r.geoPointValue.longitude)===Un(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Un(r.integerValue)===Un(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Un(r.doubleValue),c=Un(o.doubleValue);return u===c?tm(u)===tm(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return Sd(n.arrayValue.values||[],e.arrayValue.values||[],Qa);case 10:return function(r,o){const u=r.mapValue.fields||{},c=o.mapValue.fields||{};if(d0(u)!==d0(c))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(void 0===c[p]||!Qa(u[p],c[p])))return!1;return!0}(n,e);default:return it()}var o}function Df(n,e){return void 0!==(n.values||[]).find(t=>Qa(t,e))}function Zl(n,e){if(n===e)return 0;const t=Wl(n),r=Wl(e);if(t!==r)return $t(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return $t(n.booleanValue,e.booleanValue);case 2:return function(o,u){const c=Un(o.integerValue||o.doubleValue),p=Un(u.integerValue||u.doubleValue);return c<p?-1:c>p?1:c===p?0:isNaN(c)?isNaN(p)?0:-1:1}(n,e);case 3:return Fy(n.timestampValue,e.timestampValue);case 4:return Fy(Xg(n),Xg(e));case 5:return $t(n.stringValue,e.stringValue);case 6:return function(o,u){const c=Nd(o),p=Nd(u);return c.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const c=o.split("/"),p=u.split("/");for(let y=0;y<c.length&&y<p.length;y++){const w=$t(c[y],p[y]);if(0!==w)return w}return $t(c.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const c=$t(Un(o.latitude),Un(u.latitude));return 0!==c?c:$t(Un(o.longitude),Un(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const c=o.values||[],p=u.values||[];for(let y=0;y<c.length&&y<p.length;++y){const w=Zl(c[y],p[y]);if(w)return w}return $t(c.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===qu.mapValue&&u===qu.mapValue)return 0;if(o===qu.mapValue)return 1;if(u===qu.mapValue)return-1;const c=o.fields||{},p=Object.keys(c),y=u.fields||{},w=Object.keys(y);p.sort(),w.sort();for(let D=0;D<p.length&&D<w.length;++D){const S=$t(p[D],w[D]);if(0!==S)return S;const P=Zl(c[p[D]],y[w[D]]);if(0!==P)return P}return $t(p.length,w.length)}(n.mapValue,e.mapValue);default:throw it()}}function Fy(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return $t(n,e);const t=Gu(n),r=Gu(e),o=$t(t.seconds,r.seconds);return 0!==o?o:$t(t.nanos,r.nanos)}function Af(n){return Ly(n)}function Ly(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Gu(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Nd(n.bytesValue).toBase64():"referenceValue"in n?ze.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const c of r.values||[])u?u=!1:o+=",",o+=Ly(c);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const p of o)c?c=!1:u+=",",u+=`${p}:${Ly(r.fields[p])}`;return u+"}"}(n.mapValue):it();var e}function zl(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function f0(n){return!!n&&"integerValue"in n}function nm(n){return!!n&&"arrayValue"in n}function YT(n){return!!n&&"nullValue"in n}function Vy(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Uy(n){return!!n&&"mapValue"in n}function Sf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return xd(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Sf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Sf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function QT(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function YR(n){return"nullValue"in n?Oy:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?zl(Ya.empty(),ze.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:it()}function QR(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?zl(Ya.empty(),ze.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?qu:it()}function JT(n,e){const t=Zl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function XT(n,e){const t=Zl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Bi{constructor(e){this.value=e}static empty(){return new Bi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Uy(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sf(t)}setAll(e){let t=ii.emptyPath(),r={},o=[];e.forEach((c,p)=>{if(!t.isImmediateParentOf(p)){const y=this.getFieldsMap(t);this.applyChanges(y,r,o),r={},o=[],t=p.popLast()}c?r[p.lastSegment()]=Sf(c):o.push(p.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());Uy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Qa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Uy(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){xd(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new Bi(Sf(this.value))}}function eD(n){const e=[];return xd(n.fields,(t,r)=>{const o=new ii([t]);if(Uy(r)){const u=eD(r.mapValue).fields;if(0===u.length)e.push(o);else for(const c of u)e.push(o.child(c))}else e.push(o)}),new Rd(e)}class Gn{constructor(e,t,r,o,u,c){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=c}static newInvalidDocument(e){return new Gn(e,0,It.min(),It.min(),Bi.empty(),0)}static newFoundDocument(e,t,r){return new Gn(e,1,t,It.min(),r,0)}static newNoDocument(e,t){return new Gn(e,2,t,It.min(),Bi.empty(),0)}static newUnknownDocument(e,t){return new Gn(e,3,t,It.min(),Bi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Gn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class rm{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function By(n){return n.fields.find(e=>2===e.kind)}function kd(n){return n.fields.filter(e=>2!==e.kind)}rm.UNKNOWN_ID=-1;class jy{constructor(e,t){this.fieldPath=e,this.kind=t}}class xf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new xf(0,ca.min())}}function tD(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=It.fromTimestamp(1e9===r?new vr(t+1,0):new vr(t,r));return new ca(o,ze.empty(),e)}function JR(n){return new ca(n.readTime,n.key,-1)}class ca{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ca(It.min(),ze.empty(),-1)}static max(){return new ca(It.max(),ze.empty(),-1)}}function $y(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=ze.comparator(n.documentKey,e.documentKey),0!==t?t:$t(n.largestBatchId,e.largestBatchId))}class cr{constructor(e,t){this.comparator=e,this.root=t||Hr.EMPTY}insert(e,t){return new cr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Hr.BLACK,null,null))}remove(e){return new cr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Hr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new im(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new im(this.root,e,this.comparator,!1)}getReverseIterator(){return new im(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new im(this.root,e,this.comparator,!0)}}class im{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Hr{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:Hr.RED,this.left=null!=o?o:Hr.EMPTY,this.right=null!=u?u:Hr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Hr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Hr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Hr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Hr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Hr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw it();const e=this.left.check();if(e!==this.right.check())throw it();return e+(this.isRed()?0:1)}}Hr.EMPTY=null,Hr.RED=!0,Hr.BLACK=!1,Hr.EMPTY=new class{constructor(){this.size=0}get key(){throw it()}get value(){throw it()}get color(){throw it()}get left(){throw it()}get right(){throw it()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Hr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Bn{constructor(e){this.comparator=e,this.data=new cr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new nD(this.data.getIterator())}getIteratorFrom(e){return new nD(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Bn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Bn(this.comparator);return t.data=e,t}}class nD{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Kl(n){return n.hasNext()?n.getNext():void 0}class XR{constructor(e,t=null,r=[],o=[],u=null,c=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=c,this.endAt=p,this.P=null}}function p0(n,e=null,t=[],r=[],o=null,u=null,c=null){return new XR(n,e,t,r,o,u,c)}function Pd(n){const e=Ye(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+Af(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),em(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Af(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Af(r)).join(",")),e.P=t}return e.P}function Rf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!Gy(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!Qa(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!oD(n.startAt,e.startAt)&&oD(n.endAt,e.endAt)}function sm(n){return ze.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function g0(n,e){return n.filters.filter(t=>t instanceof ji&&t.field.isEqual(e))}function iD(n,e,t){let r=Oy,o=!0;for(const u of g0(n,e)){let c=Oy,p=!0;switch(u.op){case"<":case"<=":c=YR(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,p=!1;break;case"!=":case"not-in":c=Oy}JT({value:r,inclusive:o},{value:c,inclusive:p})<0&&(r=c,o=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];JT({value:r,inclusive:o},{value:c,inclusive:t.inclusive})<0&&(r=c,o=t.inclusive);break}return{value:r,inclusive:o}}function Od(n,e,t){let r=qu,o=!0;for(const u of g0(n,e)){let c=qu,p=!0;switch(u.op){case">=":case">":c=QR(u.value),p=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,p=!1;break;case"!=":case"not-in":c=qu}XT({value:r,inclusive:o},{value:c,inclusive:p})>0&&(r=c,o=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];XT({value:r,inclusive:o},{value:c,inclusive:t.inclusive})>0&&(r=c,o=t.inclusive);break}return{value:r,inclusive:o}}class ji extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new m0(e,t,r):"array-contains"===t?new tN(e,r):"in"===t?new MO(e,r):"not-in"===t?new nN(e,r):"array-contains-any"===t?new Ja(e,r):new ji(e,t,r)}static V(e,t,r){return"in"===t?new Hy(e,r):new eN(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Zl(t,this.value)):null!==t&&Wl(this.value)===Wl(t)&&this.v(Zl(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return it()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class m0 extends ji{constructor(e,t,r){super(e,t,r),this.key=ze.fromName(r.referenceValue)}matches(e){const t=ze.comparator(e.key,this.key);return this.v(t)}}class Hy extends ji{constructor(e,t){super(e,"in",t),this.keys=Fd(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class eN extends ji{constructor(e,t){super(e,"not-in",t),this.keys=Fd(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Fd(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>ze.fromName(r.referenceValue))}class tN extends ji{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return nm(t)&&Df(t.arrayValue,this.value)}}class MO extends ji{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Df(this.value.arrayValue,t)}}class nN extends ji{constructor(e,t){super(e,"not-in",t)}matches(e){if(Df(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Df(this.value.arrayValue,t)}}class Ja extends ji{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!nm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Df(this.value.arrayValue,r))}}class Wu{constructor(e,t){this.position=e,this.inclusive=t}}class om{constructor(e,t="asc"){this.field=e,this.dir=t}}function Gy(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function sD(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],c=n.position[o];if(r=u.field.isKeyField()?ze.comparator(ze.fromName(c.referenceValue),t.key):Zl(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function oD(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Qa(n.position[t],e.position[t]))return!1;return!0}class Yl{constructor(e,t=null,r=[],o=[],u=null,c="F",p=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=c,this.startAt=p,this.endAt=y,this.D=null,this.C=null}}function aD(n,e,t,r,o,u,c,p){return new Yl(n,e,t,r,o,u,c,p)}function Nf(n){return new Yl(n)}function am(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function qy(n){for(const e of n.filters)if(e.S())return e.field;return null}function um(n){return null!==n.collectionGroup}function Ld(n){const e=Ye(n);if(null===e.D){e.D=[];const t=qy(e),r=am(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new om(t)),e.D.push(new om(ii.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new om(ii.keyField(),u))}}}return e.D}function Io(n){const e=Ye(n);if(!e.C)if("F"===e.limitType)e.C=p0(e.path,e.collectionGroup,Ld(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Ld(e))t.push(new om(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Wu(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new Wu(e.startAt.position,e.startAt.inclusive):null;e.C=p0(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.C}function iN(n,e,t){return new Yl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function lm(n,e){return Rf(Io(n),Io(e))&&n.limitType===e.limitType}function uD(n){return`${Pd(Io(n))}|lt:${n.limitType}`}function _0(n){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Af(r.value)}`;var r}).join(", ")}]`),em(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Af(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Af(t)).join(",")),`Target(${e})`}(Io(n))}; limitType=${n.limitType})`}function Wy(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):ze.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,c){const p=sD(o,u,c);return o.inclusive?p<=0:p<0}(t.startAt,Ld(t),r)||t.endAt&&!function(o,u,c){const p=sD(o,u,c);return o.inclusive?p>=0:p>0}(t.endAt,Ld(t),r)));var t,r}function y0(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function v0(n){return(e,t)=>{let r=!1;for(const o of Ld(n)){const u=sN(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function sN(n,e,t){const r=n.field.isKeyField()?ze.comparator(e.key,t.key):function(o,u,c){const p=u.data.field(o),y=c.data.field(o);return null!==p&&null!==y?Zl(p,y):it()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return it()}}function lD(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tm(e)?"-0":e}}function E0(n){return{integerValue:""+n}}function cm(n,e){return Md(e)?E0(e):lD(n,e)}class Zy{constructor(){this._=void 0}}function cD(n,e,t){return n instanceof Xa?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof Vd?dD(n,e):n instanceof Mf?hD(n,e):function(r,o){const u=dm(r,o),c=fD(u)+fD(r.k);return f0(u)&&f0(r.k)?E0(c):lD(r.M,c)}(n,e)}function zy(n,e,t){return n instanceof Vd?dD(n,e):n instanceof Mf?hD(n,e):t}function dm(n,e){return n instanceof kf?f0(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Xa extends Zy{}class Vd extends Zy{constructor(e){super(),this.elements=e}}function dD(n,e){const t=pD(e);for(const r of n.elements)t.some(o=>Qa(o,r))||t.push(r);return{arrayValue:{values:t}}}class Mf extends Zy{constructor(e){super(),this.elements=e}}function hD(n,e){let t=pD(e);for(const r of n.elements)t=t.filter(o=>!Qa(o,r));return{arrayValue:{values:t}}}class kf extends Zy{constructor(e,t){super(),this.M=e,this.k=t}}function fD(n){return Un(n.integerValue||n.doubleValue)}function pD(n){return nm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class hm{constructor(e,t){this.field=e,this.transform=t}}class aN{constructor(e,t){this.version=e,this.transformResults=t}}class Mr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Mr}static exists(e){return new Mr(void 0,e)}static updateTime(e){return new Mr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ky(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class w0{}function uN(n,e,t){n instanceof Ql?function(r,o,u){const c=r.value.clone(),p=_D(r.fieldTransforms,o,u.transformResults);c.setAll(p),o.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Bs?function(r,o,u){if(!Ky(r.precondition,o))return void o.convertToUnknownDocument(u.version);const c=_D(r.fieldTransforms,o,u.transformResults),p=o.data;p.setAll(b0(r)),p.setAll(c),o.convertToFoundDocument(u.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Ud(n,e,t){var o;n instanceof Ql?function(r,o,u){if(!Ky(r.precondition,o))return;const c=r.value.clone(),p=cN(r.fieldTransforms,u,o);c.setAll(p),o.convertToFoundDocument(mD(o),c).setHasLocalMutations()}(n,e,t):n instanceof Bs?function(r,o,u){if(!Ky(r.precondition,o))return;const c=cN(r.fieldTransforms,u,o),p=o.data;p.setAll(b0(r)),p.setAll(c),o.convertToFoundDocument(mD(o),p).setHasLocalMutations()}(n,e,t):Ky(n.precondition,o=e)&&o.convertToNoDocument(It.min())}function lN(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=dm(r.transform,o||null);null!=u&&(null==t&&(t=Bi.empty()),t.set(r.field,u))}return t||null}function gD(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Sd(t,r,(o,u)=>function(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Vd&&r instanceof Vd||t instanceof Mf&&r instanceof Mf?Sd(t.elements,r.elements,Qa):t instanceof kf&&r instanceof kf?Qa(t.k,r.k):t instanceof Xa&&r instanceof Xa);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function mD(n){return n.isFoundDocument()?n.version:It.min()}class Ql extends w0{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class Bs extends w0{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}}function b0(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function _D(n,e,t){const r=new Map;Rt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],c=u.transform,p=e.data.field(u.field);r.set(u.field,zy(c,p,t[o]))}return r}function cN(n,e,t){const r=new Map;for(const o of n){const u=o.transform,c=t.data.field(o.field);r.set(o.field,cD(u,c,e))}return r}class fm extends w0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Pf extends w0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class dN{constructor(e){this.count=e}}var kr,on;function C0(n){switch(n){default:return it();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0}}function Yy(n){if(void 0===n)return _r("GRPC error has no .code"),ge.UNKNOWN;switch(n){case kr.OK:return ge.OK;case kr.CANCELLED:return ge.CANCELLED;case kr.UNKNOWN:return ge.UNKNOWN;case kr.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case kr.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case kr.INTERNAL:return ge.INTERNAL;case kr.UNAVAILABLE:return ge.UNAVAILABLE;case kr.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case kr.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case kr.NOT_FOUND:return ge.NOT_FOUND;case kr.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case kr.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case kr.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case kr.ABORTED:return ge.ABORTED;case kr.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case kr.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case kr.DATA_LOSS:return ge.DATA_LOSS;default:return it()}}(on=kr||(kr={}))[on.OK=0]="OK",on[on.CANCELLED=1]="CANCELLED",on[on.UNKNOWN=2]="UNKNOWN",on[on.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",on[on.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",on[on.NOT_FOUND=5]="NOT_FOUND",on[on.ALREADY_EXISTS=6]="ALREADY_EXISTS",on[on.PERMISSION_DENIED=7]="PERMISSION_DENIED",on[on.UNAUTHENTICATED=16]="UNAUTHENTICATED",on[on.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",on[on.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",on[on.ABORTED=10]="ABORTED",on[on.OUT_OF_RANGE=11]="OUT_OF_RANGE",on[on.UNIMPLEMENTED=12]="UNIMPLEMENTED",on[on.INTERNAL=13]="INTERNAL",on[on.UNAVAILABLE=14]="UNAVAILABLE",on[on.DATA_LOSS=15]="DATA_LOSS";class Zu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){xd(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return zT(this.inner)}size(){return this.innerSize}}const yD=new cr(ze.comparator);function To(){return yD}const hN=new cr(ze.comparator);function Qy(...n){let e=hN;for(const t of n)e=e.insert(t.key,t);return e}function pm(){return new Zu(n=>n.toString(),(n,e)=>n.isEqual(e))}const vD=new cr(ze.comparator),Jy=new Bn(ze.comparator);function pn(...n){let e=Jy;for(const t of n)e=e.add(t);return e}const kO=new Bn($t);function Jl(){return kO}class ln{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Do.createSynthesizedTargetChangeForCurrentChange(e,t)),new ln(It.min(),r,Jl(),To(),pn())}}class Do{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Do($r.EMPTY_BYTE_STRING,t,pn(),pn(),pn())}}class zu{constructor(e,t,r,o){this.O=e,this.removedTargetIds=t,this.key=r,this.F=o}}class Of{constructor(e,t){this.targetId=e,this.$=t}}class fN{constructor(e,t,r=$r.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class kt{constructor(){this.B=0,this.L=Xl(),this.U=$r.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=pn(),t=pn(),r=pn();return this.L.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:it()}}),new Do(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=Xl()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class Ao{constructor(e){this.nt=e,this.st=new Map,this.it=To(),this.rt=Xy(),this.ot=new Bn($t)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:it()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,o)=>{this.ft(o)&&t(o)})}_t(e){const t=e.targetId,r=e.$.count,o=this.wt(t);if(o){const u=o.target;if(sm(u))if(0===r){const c=new ze(u.path);this.ct(t,c,Gn.newNoDocument(c,It.min()))}else Rt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,c)=>{const p=this.wt(c);if(p){if(u.current&&sm(p.target)){const y=new ze(p.target.path);null!==this.it.get(y)||this.It(c,y)||this.ct(c,y,Gn.newNoDocument(y,e))}u.j&&(t.set(c,u.H()),u.J())}});let r=pn();this.rt.forEach((u,c)=>{let p=!0;c.forEachWhile(y=>{const w=this.wt(y);return!w||2===w.purpose||(p=!1,!1)}),p&&(r=r.add(u))}),this.it.forEach((u,c)=>c.setReadTime(e));const o=new ln(e,t,this.ot,this.it,r);return this.it=To(),this.rt=Xy(),this.ot=new Bn($t),o}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,t)?o.Y(t,1):o.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new kt,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Bn($t),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Ue("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new kt),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function Xy(){return new cr(ze.comparator)}function Xl(){return new cr(ze.comparator)}const PO={asc:"ASCENDING",desc:"DESCENDING"},ED={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class wD{constructor(e,t){this.databaseId=e,this.N=t}}function ev(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bD(n,e){return n.N?e.toBase64():e.toUint8Array()}function pN(n,e){return ev(n,e.toTimestamp())}function Sn(n){return Rt(!!n),It.fromTimestamp(function(e){const t=Gu(e);return new vr(t.seconds,t.nanos)}(n))}function qn(n,e){return(t=n,new fn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function So(n){const e=fn.fromString(n);return Rt(mN(e)),e}function Ff(n,e){return qn(n.databaseId,e.path)}function eu(n,e){const t=So(e);if(t.get(1)!==n.databaseId.projectId)throw new Me(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Me(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ze(Lf(t))}function tv(n,e){return qn(n.databaseId,e)}function nv(n){const e=So(n);return 4===e.length?fn.emptyPath():Lf(e)}function tu(n){return new fn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Lf(n){return Rt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function CD(n,e,t){return{name:Ff(n,e),fields:t.value.mapValue.fields}}function ec(n,e,t){const r=eu(n,e.name),o=Sn(e.updateTime),u=new Bi({mapValue:{fields:e.fields}}),c=Gn.newFoundDocument(r,o,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function Bd(n,e){let t;if(e instanceof Ql)t={update:CD(n,e.key,e.value)};else if(e instanceof fm)t={delete:Ff(n,e.key)};else if(e instanceof Bs)t={update:CD(n,e.key,e.data),updateMask:OO(e.fieldMask)};else{if(!(e instanceof Pf))return it();t={verify:Ff(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const c=u.transform;if(c instanceof Xa)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Vd)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Mf)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof kf)return{fieldPath:u.field.canonicalString(),increment:c.k};throw it()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:pN(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:it()),t;var o}function jd(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Mr.updateTime(Sn(o.updateTime)):void 0!==o.exists?Mr.exists(o.exists):Mr.none():Mr.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,c){let p=null;"setToServerValue"in c?(Rt("REQUEST_TIME"===c.setToServerValue),p=new Xa):"appendMissingElements"in c?p=new Vd(c.appendMissingElements.values||[]):"removeAllFromArray"in c?p=new Mf(c.removeAllFromArray.values||[]):"increment"in c?p=new kf(u,c.increment):it();const y=ii.fromServerFormat(c.fieldPath);return new hm(y,p)}(n,o)):[];var o;if(e.update){const o=eu(n,e.update.name),u=new Bi({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new Rd((e.updateMask.fieldPaths||[]).map(w=>ii.fromServerFormat(w)));return new Bs(o,u,c,t,r)}return new Ql(o,u,t,r)}if(e.delete){const o=eu(n,e.delete);return new fm(o,t)}if(e.verify){const o=eu(n,e.verify);return new Pf(o,t)}return it()}function T0(n,e){return{documents:[tv(n,e.path)]}}function $d(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=tv(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=tv(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(y){if(0===y.length)return;const w=y.map(D=>function(S){if("=="===S.op){if(Vy(S.value))return{unaryFilter:{field:Ku(S.field),op:"IS_NAN"}};if(YT(S.value))return{unaryFilter:{field:Ku(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(Vy(S.value))return{unaryFilter:{field:Ku(S.field),op:"IS_NOT_NAN"}};if(YT(S.value))return{unaryFilter:{field:Ku(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ku(S.field),op:AD(S.op),value:S.value}}}(D));return 1===w.length?w[0]:{compositeFilter:{op:"AND",filters:w}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(y){if(0!==y.length)return y.map(w=>{return{field:Ku((D=w).field),direction:DD(D.dir)};var D})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(w=e.limit,n.N||em(w)?w:{value:w});var w,p,y;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(p=e.startAt).inclusive,values:p.position}),e.endAt&&(t.structuredQuery.endAt={before:!(y=e.endAt).inclusive,values:y.position}),t}function TD(n){let e=nv(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Rt(1===r);const D=t.from[0];D.allDescendants?o=D.collectionId:e=e.child(D.collectionId)}let u=[];t.where&&(u=D0(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(D=>{return new om(Vf((S=D).field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let p=null;t.limit&&(p=function(D){let S;return S="object"==typeof D?D.value:D,em(S)?null:S}(t.limit));let y=null;var D;t.startAt&&(y=new Wu((D=t.startAt).values||[],!!D.before));let w=null;return t.endAt&&(w=function(D){return new Wu(D.values||[],!D.before)}(t.endAt)),aD(e,o,c,u,p,"F",y,w)}function D0(n){return n?void 0!==n.unaryFilter?[S0(n)]:void 0!==n.fieldFilter?[A0(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>D0(e)).reduce((e,t)=>e.concat(t)):it():[]}function DD(n){return PO[n]}function AD(n){return ED[n]}function Ku(n){return{fieldPath:n.canonicalString()}}function Vf(n){return ii.fromServerFormat(n.fieldPath)}function A0(n){return ji.create(Vf(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return it()}}(n.fieldFilter.op),n.fieldFilter.value)}function S0(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Vf(n.unaryFilter.field);return ji.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Vf(n.unaryFilter.field);return ji.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Vf(n.unaryFilter.field);return ji.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Vf(n.unaryFilter.field);return ji.create(o,"!=",{nullValue:"NULL_VALUE"});default:return it()}}function OO(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function mN(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function at(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Uf(e)),e=FO(n.get(t),e);return Uf(e)}function FO(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function Uf(n){return n+"\x01\x01"}function nu(n){const e=n.length;if(Rt(e>=2),2===e)return Rt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),fn.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&it(),n.charAt(c+1)){case"\x01":const p=n.substring(u,c);let y;0===o.length?y=p:(o+=p,y=o,o=""),r.push(y);break;case"\x10":o+=n.substring(u,c),o+="\0";break;case"\x11":o+=n.substring(u,c+1);break;default:it()}u=c+2}return new fn(r)}const SD=["userId","batchId"];function iv(n,e){return[n,at(e)]}function _N(n,e,t){return[n,at(e),t]}const LO={},yN=["prefixPath","collectionGroup","readTime","documentId"],$i=["prefixPath","collectionGroup","documentId"],vN=["collectionGroup","readTime","prefixPath","documentId"],EN=["canonicalId","targetId"],x0=["targetId","path"],wN=["path","targetId"],bN=["collectionId","parent"],CN=["indexId","uid"],IN=["uid","sequenceNumber"],TN=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],DN=["indexId","uid","orderedDocumentKey"],R0=["userId","collectionPath","documentId"],AN=["userId","collectionPath","largestBatchId"],SN=["userId","collectionGroup","largestBatchId"],N0=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],M0=[...N0,"documentOverlays"],xD=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],VO=[...xD,"indexConfiguration","indexState","indexEntries"],RD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ND{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&it(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new me((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof me?t:me.resolve(t)}catch(t){return me.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):me.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):me.reject(t)}static resolve(e){return new me((t,r)=>{t(e)})}static reject(e){return new me((t,r)=>{r(e)})}static waitFor(e){return new me((t,r)=>{let o=0,u=0,c=!1;e.forEach(p=>{++o,p.next(()=>{++u,c&&u===o&&t()},y=>r(y))}),c=!0,u===o&&t()})}static or(e){let t=me.resolve(!1);for(const r of e)t=t.next(o=>o?me.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}}class sv{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new yr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Yu(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const o=MD(r.target.error);this.At.reject(new Yu(e,o))}}static open(e,t,r,o){try{return new sv(t,e.transaction(o,r))}catch(u){throw new Yu(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Ue("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new RN(t)}}class da{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===da.Vt((0,F.z$)())&&_r("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ue("SimpleDb","Removing database:",e),tc(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,F.hl)())return!1;if(da.St())return!0;const e=(0,F.z$)(),t=da.Vt(e),r=0<t&&t<10,o=da.Dt(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,Ce.Z)(function*(){return t.db||(Ue("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{o(new Yu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const p=c.target.error;o("VersionError"===p.name?new Me(ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new Me(ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new Yu(e,p))},u.onupgradeneeded=c=>{Ue("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.Pt.kt(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{Ue("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,Ce.Z)(function*(){const c="readonly"===t;let p=0;for(;;){++p;try{u.db=yield u.Nt(e);const y=sv.open(u.db,e,c?"readonly":"readwrite",r),w=o(y).next(D=>(y.bt(),D)).catch(D=>(y.abort(D),me.reject(D))).toPromise();return w.catch(()=>{}),yield y.Rt,w}catch(y){const w="FirebaseError"!==y.name&&p<3;if(Ue("SimpleDb","Transaction failed with error:",y.message,"Retrying:",w),u.close(),!w)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class xN{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return tc(this.Ft.delete())}}class Yu extends Me{constructor(e,t){super(ge.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Hd(n){return"IndexedDbTransactionError"===n.name}class RN{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ue("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ue("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),tc(r)}add(e){return Ue("SimpleDb","ADD",this.store.name,e,e),tc(this.store.add(e))}get(e){return tc(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ue("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ue("SimpleDb","DELETE",this.store.name,e),tc(this.store.delete(e))}count(){return Ue("SimpleDb","COUNT",this.store.name),tc(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.Kt(o,(c,p)=>{u.push(p)}).next(()=>u)}{const o=this.store.getAll(r.range);return new me((u,c)=>{o.onerror=p=>{c(p.target.error)},o.onsuccess=p=>{u(p.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new me((o,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{o(c.target.result)}})}Qt(e,t){Ue("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const o=this.cursor(r);return this.Kt(o,(u,c,p)=>p.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Kt(o,t)}zt(e){const t=this.cursor({});return new me((r,o)=>{t.onerror=u=>{const c=MD(u.target.error);o(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(p=>{p?c.continue():r()}):r()}})}Kt(e,t){const r=[];return new me((o,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const p=c.target.result;if(!p)return void o();const y=new xN(p),w=t(p.primaryKey,p.value,y);if(w instanceof me){const D=w.catch(S=>(y.done(),me.reject(S)));r.push(D)}y.isDone?o():null===y.Lt?p.continue():p.continue(y.Lt)}}).next(()=>me.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function tc(n){return new me((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=MD(r.target.error);t(o)}})}let Bf=!1;function MD(n){const e=da.Vt((0,F.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Bf||(Bf=!0,setTimeout(()=>{throw r},0)),r}}return n}class k0 extends ND{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function si(n,e){const t=Ye(n);return da.xt(t.Ht,e)}class P0{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&uN(u,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Ud(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Ud(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(It.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),pn())}isEqual(e){return this.batchId===e.batchId&&Sd(this.mutations,e.mutations,(t,r)=>gD(t,r))&&Sd(this.baseMutations,e.baseMutations,(t,r)=>gD(t,r))}}class O0{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Rt(e.mutations.length===r.length);let o=vD;const u=e.mutations;for(let c=0;c<u.length;c++)o=o.insert(u[c].key,r[c].version);return new O0(e,t,r,o)}}class F0{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class nc{constructor(e,t,r,o,u=It.min(),c=It.min(),p=$r.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=p}withSequenceNumber(e){return new nc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new nc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new nc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class L0{constructor(e){this.Jt=e}}function kD(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:V0(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Ff(o=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:ev(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:jf(e.version)};else{if(!e.isUnknownDocument())return it();r.unknownDocument={path:t.path.toArray(),version:jf(e.version)}}var o,u;return r}function V0(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function jf(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function $f(n){const e=new vr(n.seconds,n.nanoseconds);return It.fromTimestamp(e)}function rc(n,e){const t=(e.baseMutations||[]).map(u=>jd(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>jd(n.Jt,u)),o=vr.fromMillis(e.localWriteTimeMs);return new P0(e.batchId,o,t,r)}function gm(n){const e=$f(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?$f(n.lastLimboFreeSnapshotVersion):It.min();let r;var o;return void 0!==n.query.documents?(Rt(1===(o=n.query).documents.length),r=Io(Nf(nv(o.documents[0])))):r=Io(TD(n.query)),new nc(r,n.targetId,0,n.lastListenSequenceNumber,e,t,$r.fromBase64String(n.resumeToken))}function PD(n,e){const t=jf(e.snapshotVersion),r=jf(e.lastLimboFreeSnapshotVersion);let o;o=sm(e.target)?T0(n.Jt,e.target):$d(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Pd(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function U0(n){const e=TD({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?iN(e,e.limit,"L"):e}function B0(n,e){return new F0(e.largestBatchId,jd(n.Jt,e.overlayMutation))}function OD(n,e){const t=e.path.lastSegment();return[n,at(e.path.popLast()),t]}class MN{getBundleMetadata(e,t){return j0(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:$f(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return j0(e).put({bundleId:(r=t).id,createTime:jf(Sn(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return ov(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:U0(o.bundledQuery),readTime:$f(o.readTime)};var o})}saveNamedQuery(e,t){return ov(e).put({name:(r=t).name,readTime:jf(Sn(r.readTime)),bundledQuery:r.bundledQuery});var r}}function j0(n){return si(n,"bundles")}function ov(n){return si(n,"namedQueries")}class $0{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new $0(e,t.uid||"")}getOverlay(e,t){return ru(e).get(OD(this.userId,t)).next(r=>r?B0(this.M,r):null)}saveOverlays(e,t,r){const o=[];return r.forEach((u,c)=>{const p=new F0(t,c);o.push(this.Xt(e,p))}),me.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(c=>o.add(at(c.getCollectionPath())));const u=[];return o.forEach(c=>{const p=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(ru(e).Qt("collectionPathOverlayIndex",p))}),me.waitFor(u)}getOverlaysForCollection(e,t,r){const o=pm(),u=at(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return ru(e).qt("collectionPathOverlayIndex",c).next(p=>{for(const y of p){const w=B0(this.M,y);o.set(w.getKey(),w)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=pm();let c;const p=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ru(e).Wt({index:"collectionGroupOverlayIndex",range:p},(y,w,D)=>{const S=B0(this.M,w);u.size()<o||S.largestBatchId===c?(u.set(S.getKey(),S),c=S.largestBatchId):D.done()}).next(()=>u)}Xt(e,t){return ru(e).put(function(r,o,u){const[c,p,y]=OD(o,u.mutation.key);return{userId:o,collectionPath:p,documentId:y,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Bd(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function ru(n){return si(n,"documentOverlays")}class Er{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Un(e.integerValue));else if("doubleValue"in e){const r=Un(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),tm(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Nd(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?QT(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):it()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const o of Object.keys(r))this.re(o,t),this.te(r[o],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const o of r)this.te(o,t)}ae(e,t){this.ne(t,37),ze.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function FD(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function xo(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=FD(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Er.fe=new Er;class H0{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const o=t.codePointAt(0);this._e(240|o>>>18),this._e(128|63&o>>>12),this._e(128|63&o>>>6),this._e(128|63&o)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const o=t.codePointAt(0);this.ge(240|o>>>18),this.ge(128|63&o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o)}}this.ye()}Te(e){const t=this.Ee(e),r=xo(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Re(e){const t=this.Ee(e),r=xo(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class kN{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class LD{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Hf{constructor(){this.De=new H0,this.Ce=new kN(this.De),this.xe=new LD(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class ic{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ic(this.indexId,this.documentKey,this.arrayValue,r)}}function Gd(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=VD(n.arrayValue,e.arrayValue),0!==t?t:(t=VD(n.directionalValue,e.directionalValue),0!==t?t:ze.comparator(n.documentKey,e.documentKey)))}function VD(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class PN{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=By(e);if(void 0!==t&&!this.Be(t))return!1;const r=kd(e);let o=0,u=0;for(;o<r.length&&this.Be(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Fe){const c=r[o];if(!this.Le(this.Fe,c)||!this.Ue(this.Me[u++],c))return!1;++o}for(;o<r.length;++o){const c=r[o];if(u>=this.Me.length||!this.Ue(this.Me[u++],c))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class UD{constructor(){this.qe=new G0}addToCollectionParentIndex(e,t){return this.qe.add(t),me.resolve()}getCollectionParents(e,t){return me.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return me.resolve()}deleteFieldIndex(e,t){return me.resolve()}getDocumentsMatchingTarget(e,t){return me.resolve(null)}getIndexType(e,t){return me.resolve(0)}getFieldIndexes(e,t){return me.resolve([])}getNextCollectionGroupToUpdate(e){return me.resolve(null)}getMinOffset(e,t){return me.resolve(ca.min())}updateCollectionGroup(e,t,r){return me.resolve()}updateIndexEntries(e,t){return me.resolve()}}class G0{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Bn(fn.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Bn(fn.comparator)).toArray()}}const q0=new Uint8Array(0);class ON{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new G0,this.Ge=new Zu(r=>Pd(r),(r,o)=>Rf(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:at(o)};return BD(e).put(u)}return me.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[c0(t),""],!1,!0);return BD(e).qt(o).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(nu(c.parent))}return r})}addFieldIndex(e,t){const r=W0(e),o={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var u;return delete o.indexId,r.add(o).next()}deleteFieldIndex(e,t){const r=W0(e),o=mm(e),u=iu(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=iu(e);let o=!0;const u=new Map;return me.forEach(this.Qe(t),c=>this.je(e,c).next(p=>{o&&(o=!!p),u.set(c,p)})).next(()=>{if(o){let c=pn();const p=[];return me.forEach(u,(y,w)=>{var D;Ue("IndexedDbIndexManager",`Using index ${D=y,`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map(nt=>`${nt.fieldPath}:${nt.kind}`).join(",")}`} to execute ${Pd(t)}`);const S=function(nt,st){const Bt=By(st);if(void 0===Bt)return null;for(const sn of g0(nt,Bt.fieldPath))switch(sn.op){case"array-contains-any":return sn.value.arrayValue.values||[];case"array-contains":return[sn.value]}return null}(w,y),P=function(nt,st){const Bt=new Map;for(const sn of kd(st))for(const ui of g0(nt,sn.fieldPath))switch(ui.op){case"==":case"in":Bt.set(sn.fieldPath.canonicalString(),ui.value);break;case"not-in":case"!=":return Bt.set(sn.fieldPath.canonicalString(),ui.value),Array.from(Bt.values())}return null}(w,y),B=function(nt,st){const Bt=[];let sn=!0;for(const ui of kd(st)){const al=0===ui.kind?iD(nt,ui.fieldPath,nt.startAt):Od(nt,ui.fieldPath,nt.startAt);Bt.push(al.value),sn&&(sn=al.inclusive)}return new Wu(Bt,sn)}(w,y),Y=function(nt,st){const Bt=[];let sn=!0;for(const ui of kd(st)){const al=0===ui.kind?Od(nt,ui.fieldPath,nt.endAt):iD(nt,ui.fieldPath,nt.endAt);Bt.push(al.value),sn&&(sn=al.inclusive)}return new Wu(Bt,sn)}(w,y),_e=this.We(y,w,B),xe=this.We(y,w,Y),dt=this.ze(y,w,P),lt=this.He(y.indexId,S,_e,B.inclusive,xe,Y.inclusive,dt);return me.forEach(lt,nt=>r.Gt(nt,t.limit).next(st=>{st.forEach(Bt=>{const sn=ze.fromSegments(Bt.documentKey);c.has(sn)||(c=c.add(sn),p.push(sn))})}))}).next(()=>p)}return me.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,o,u,c,p){const y=(null!=t?t.length:1)*Math.max(r.length,u.length),w=y/(null!=t?t.length:1),D=[];for(let S=0;S<y;++S){const P=t?this.Je(t[S/w]):q0,B=this.Ye(e,P,r[S%w],o),Y=this.Xe(e,P,u[S%w],c),_e=p.map(xe=>this.Ye(e,P,xe,!0));D.push(...this.createRange(B,Y,_e))}return D}Ye(e,t,r,o){const u=new ic(e,ze.empty(),t,r);return o?u:u.ke()}Xe(e,t,r,o){const u=new ic(e,ze.empty(),t,r);return o?u.ke():u}je(e,t){const r=new PN(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let c=null;for(const p of u)r.$e(p)&&(!c||p.fields.length>c.fields.length)&&(c=p);return c})}getIndexType(e,t){let r=2;return me.forEach(this.Qe(t),o=>this.je(e,o).next(u=>{u?0!==r&&u.fields.length<function(c){let p=new Bn(ii.comparator),y=!1;for(const w of c.filters){const D=w;D.field.isKeyField()||("array-contains"===D.op||"array-contains-any"===D.op?y=!0:p=p.add(D.field))}for(const w of c.orderBy)w.field.isKeyField()||(p=p.add(w.field));return p.size+(y?1:0)}(o)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new Hf;for(const o of kd(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const c=r.Ne(o.kind);Er.fe.Zt(u,c)}return r.Se()}Je(e){const t=new Hf;return Er.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new Hf;return Er.fe.Zt(zl(this.databaseId,t),r.Ne(function(o){const u=kd(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let o=[];o.push(new Hf);let u=0;for(const c of kd(e)){const p=r[u++];for(const y of o)if(this.en(t,c.fieldPath)&&nm(p))o=this.nn(o,c,p);else{const w=y.Ne(c.kind);Er.fe.Zt(p,w)}}return this.sn(o)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const o=[...e],u=[];for(const c of r.arrayValue.values||[])for(const p of o){const y=new Hf;y.seed(p.Se()),Er.fe.Zt(c,y.Ne(t.kind)),u.push(y)}return u}en(e,t){return!!e.filters.find(r=>r instanceof ji&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=W0(e),o=mm(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const c=[];return me.forEach(u,p=>o.get([p.indexId,this.uid]).next(y=>{c.push(function(w,D){const S=D?new xf(D.sequenceNumber,new ca($f(D.readTime),new ze(nu(D.documentKey)),D.largestBatchId)):xf.empty(),P=w.fields.map(([B,Y])=>new jy(ii.fromServerFormat(B),Y));return new rm(w.indexId,w.collectionGroup,P,S)}(p,y))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:$t(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=W0(e),u=mm(e);return this.rn(e).next(c=>o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(p=>me.forEach(p,y=>{return u.put({indexId:y.indexId,uid:this.user.uid||"",sequenceNumber:c,readTime:jf((P=r).readTime),documentKey:at(P.documentKey.path),largestBatchId:P.largestBatchId});var P})))}updateIndexEntries(e,t){const r=new Map;return me.forEach(t,(o,u)=>{const c=r.get(o.collectionGroup);return(c?me.resolve(c):this.getFieldIndexes(e,o.collectionGroup)).next(p=>(r.set(o.collectionGroup,p),me.forEach(p,y=>this.on(e,o,y).next(w=>{const D=this.un(u,y);return w.isEqual(D)?me.resolve():this.an(e,u,y,w,D)}))))})}cn(e,t,r,o){return iu(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,o){return iu(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const o=iu(e);let u=new Bn(Gd);return o.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(c,p)=>{u=u.add(new ic(r.indexId,t,p.arrayValue,p.directionalValue))}).next(()=>u)}un(e,t){let r=new Bn(Gd);const o=this.Ze(t,e);if(null==o)return r;const u=By(t);if(null!=u){const c=e.data.field(u.fieldPath);if(nm(c))for(const p of c.arrayValue.values||[])r=r.add(new ic(t.indexId,e.key,this.Je(p),o))}else r=r.add(new ic(t.indexId,e.key,q0,o));return r}an(e,t,r,o,u){Ue("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(p,y,w,D,S){const P=p.getIterator(),B=y.getIterator();let Y=Kl(P),_e=Kl(B);for(;Y||_e;){let xe=!1,dt=!1;if(Y&&_e){const lt=w(Y,_e);lt<0?dt=!0:lt>0&&(xe=!0)}else null!=Y?dt=!0:xe=!0;xe?(D(_e),_e=Kl(B)):dt?(S(Y),Y=Kl(P)):(Y=Kl(P),_e=Kl(B))}}(o,u,Gd,p=>{c.push(this.cn(e,t,r,p))},p=>{c.push(this.hn(e,t,r,p))}),me.waitFor(c)}rn(e){let t=1;return mm(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,p)=>Gd(c,p)).filter((c,p,y)=>!p||0!==Gd(c,y[p-1]));const o=[];o.push(e);for(const c of r){const p=Gd(c,e),y=Gd(c,t);if(0===p)o[0]=e.ke();else if(p>0&&y<0)o.push(c),o.push(c.ke());else if(y>0)break}o.push(t);const u=[];for(let c=0;c<o.length;c+=2)u.push(IDBKeyRange.bound([o[c].indexId,this.uid,o[c].arrayValue,o[c].directionalValue,q0,[]],[o[c+1].indexId,this.uid,o[c+1].arrayValue,o[c+1].directionalValue,q0,[]]));return u}getMinOffset(e,t){let r;return me.forEach(this.Qe(t),o=>this.je(e,o).next(u=>{u?(!r||$y(u.indexState.offset,r)<0)&&(r=u.indexState.offset):r=ca.min()})).next(()=>r)}}function BD(n){return si(n,"collectionParents")}function iu(n){return si(n,"indexEntries")}function W0(n){return si(n,"indexConfiguration")}function mm(n){return si(n,"indexState")}const jD={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class js{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new js(e,js.DEFAULT_COLLECTION_PERCENTILE,js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Z0(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let p=0;const y=r.Wt({range:c},(D,S,P)=>(p++,P.delete()));u.push(y.next(()=>{Rt(1===p)}));const w=[];for(const D of t.mutations){const S=_N(e,D.key.path,t.batchId);u.push(o.delete(S)),w.push(D.key)}return me.waitFor(u).next(()=>w)}function av(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw it();e=n.noDocument}return JSON.stringify(e).length}js.DEFAULT_COLLECTION_PERCENTILE=10,js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,js.DEFAULT=new js(41943040,js.DEFAULT_COLLECTION_PERCENTILE,js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),js.DISABLED=new js(-1,0,0);class _m{constructor(e,t,r,o){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=o,this.ln={}}static Yt(e,t,r,o){Rt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new _m(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return sc(e).Wt({index:"userMutationsIndex",range:r},(o,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=Gf(e),c=sc(e);return c.add({}).next(p=>{Rt("number"==typeof p);const y=new P0(p,t,r,o),w=function(P,B,Y){const _e=Y.baseMutations.map(dt=>Bd(P.Jt,dt)),xe=Y.mutations.map(dt=>Bd(P.Jt,dt));return{userId:B,batchId:Y.batchId,localWriteTimeMs:Y.localWriteTime.toMillis(),baseMutations:_e,mutations:xe}}(this.M,this.userId,y),D=[];let S=new Bn((P,B)=>$t(P.canonicalString(),B.canonicalString()));for(const P of o){const B=_N(this.userId,P.key.path,p);S=S.add(P.key.path.popLast()),D.push(c.put(w)),D.push(u.put(B,LO))}return S.forEach(P=>{D.push(this.indexManager.addToCollectionParentIndex(e,P))}),e.addOnCommittedListener(()=>{this.ln[p]=y.keys()}),me.waitFor(D).next(()=>y)})}lookupMutationBatch(e,t){return sc(e).get(t).next(r=>r?(Rt(r.userId===this.userId),rc(this.M,r)):null)}fn(e,t){return this.ln[t]?me.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.ln[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return sc(e).Wt({index:"userMutationsIndex",range:o},(c,p,y)=>{p.userId===this.userId&&(Rt(p.batchId>=r),u=rc(this.M,p)),y.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return sc(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(o,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return sc(e).qt("userMutationsIndex",t).next(r=>r.map(o=>rc(this.M,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=iv(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Gf(e).Wt({range:o},(c,p,y)=>{const[w,D,S]=c,P=nu(D);if(w===this.userId&&t.path.isEqual(P))return sc(e).get(S).next(B=>{if(!B)throw it();Rt(B.userId===this.userId),u.push(rc(this.M,B))});y.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Bn($t);const o=[];return t.forEach(u=>{const c=iv(this.userId,u.path),p=IDBKeyRange.lowerBound(c),y=Gf(e).Wt({range:p},(w,D,S)=>{const[P,B,Y]=w,_e=nu(B);P===this.userId&&u.path.isEqual(_e)?r=r.add(Y):S.done()});o.push(y)}),me.waitFor(o).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=iv(this.userId,r),c=IDBKeyRange.lowerBound(u);let p=new Bn($t);return Gf(e).Wt({range:c},(y,w,D)=>{const[S,P,B]=y,Y=nu(P);S===this.userId&&r.isPrefixOf(Y)?Y.length===o&&(p=p.add(B)):D.done()}).next(()=>this.dn(e,p))}dn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(sc(e).get(u).next(c=>{if(null===c)throw it();Rt(c.userId===this.userId),r.push(rc(this.M,c))}))}),me.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return Z0(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),me.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return me.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Gf(e).Wt({range:r},(u,c,p)=>{if(u[0]===this.userId){const y=nu(u[1]);o.push(y)}else p.done()}).next(()=>{Rt(0===o.length)})})}containsKey(e,t){return $D(e,this.userId,t)}wn(e){return HD(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function $D(n,e,t){const r=iv(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return Gf(n).Wt({range:u,jt:!0},(p,y,w)=>{const[D,S,P]=p;D===e&&S===o&&(c=!0),w.done()}).next(()=>c)}function sc(n){return si(n,"mutations")}function Gf(n){return si(n,"documentMutations")}function HD(n){return si(n,"mutationQueues")}class qd{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new qd(0)}static yn(){return new qd(-1)}}class FN{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new qd(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>It.fromTimestamp(new vr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.In(e,o)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>qf(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(Rt(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return qf(e).Wt((c,p)=>{const y=gm(p);y.sequenceNumber<=t&&null===r.get(y.targetId)&&(o++,u.push(this.removeTargetData(e,y)))}).next(()=>me.waitFor(u)).next(()=>o)}forEachTarget(e,t){return qf(e).Wt((r,o)=>{const u=gm(o);t(u)})}pn(e){return GD(e).get("targetGlobalKey").next(t=>(Rt(null!==t),t))}In(e,t){return GD(e).put("targetGlobalKey",t)}Tn(e,t){return qf(e).put(PD(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Pd(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return qf(e).Wt({range:o,index:"queryTargetsIndex"},(c,p,y)=>{const w=gm(p);Rf(t,w.target)&&(u=w,y.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=oc(e);return t.forEach(c=>{const p=at(c.path);o.push(u.put({targetId:r,path:p})),o.push(this.referenceDelegate.addReference(e,r,c))}),me.waitFor(o)}removeMatchingKeys(e,t,r){const o=oc(e);return me.forEach(t,u=>{const c=at(u.path);return me.waitFor([o.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=oc(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=oc(e);let u=pn();return o.Wt({range:r,jt:!0},(c,p,y)=>{const w=nu(c[1]),D=new ze(w);u=u.add(D)}).next(()=>u)}containsKey(e,t){const r=at(t.path),o=IDBKeyRange.bound([r],[c0(r)],!1,!0);let u=0;return oc(e).Wt({index:"documentTargetsIndex",jt:!0,range:o},([c,p],y,w)=>{0!==c&&(u++,w.done())}).next(()=>u>0)}Et(e,t){return qf(e).get(t).next(r=>r?gm(r):null)}}function qf(n){return si(n,"targets")}function GD(n){return si(n,"targetGlobal")}function oc(n){return si(n,"targetDocuments")}function Wd(n){return Zd.apply(this,arguments)}function Zd(){return(Zd=(0,Ce.Z)(function*(n){if(n.code!==ge.FAILED_PRECONDITION||n.message!==RD)throw n;Ue("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function z0([n,e],[t,r]){const o=$t(n,t);return 0===o?$t(e,r):o}class qD{constructor(e){this.An=e,this.buffer=new Bn(z0),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();z0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class WD{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Ue("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,Ce.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){Hd(o)?Ue("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield Wd(o)}yield t.Sn(e)}))}}class ZD{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return me.resolve(Di.A);const r=new qD(t);return this.Dn.forEachTarget(e,o=>r.Pn(o.sequenceNumber)).next(()=>this.Dn.xn(e,o=>r.Pn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(jD)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jD):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,o,u,c,p,y,w;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,c=Date.now(),this.nthSequenceNumber(e,o))).next(S=>(r=S,p=Date.now(),this.removeTargets(e,r,t))).next(S=>(u=S,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(w=Date.now(),rr()<=Eo.in.DEBUG&&Ue("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-D}ms\n\tDetermined least recently used ${o} in `+(p-c)+`ms\n\tRemoved ${u} targets in `+(y-p)+`ms\n\tRemoved ${S} documents in `+(w-y)+`ms\nTotal Duration: ${w-D}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:S})))}}class zD{constructor(e,t){this.db=e,this.garbageCollector=new ZD(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,o)=>t(o))}addReference(e,t,r){return uv(e,r)}removeReference(e,t,r){return uv(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return uv(e,t)}On(e,t){return function(r,o){let u=!1;return HD(r).zt(c=>$D(r,c,o).next(p=>(p&&(u=!0),me.resolve(!p)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Mn(e,(c,p)=>{if(p<=t){const y=this.On(e,c).next(w=>{if(!w)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,It.min()),oc(e).delete([0,at(c.path)])))});o.push(y)}}).next(()=>me.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return uv(e,t)}Mn(e,t){const r=oc(e);let o,u=Di.A;return r.Wt({index:"documentTargetsIndex"},([c,p],{path:y,sequenceNumber:w})=>{0===c?(u!==Di.A&&t(new ze(nu(o)),u),u=w,o=y):u=Di.A}).next(()=>{u!==Di.A&&t(new ze(nu(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function uv(n,e){return oc(n).put((r=n.currentSequenceNumber,{targetId:0,path:at(e.path),sequenceNumber:r}));var r}class KD{constructor(){this.changes=new Zu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Gn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?me.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class LN{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return zd(e).put(r)}removeEntry(e,t,r){return zd(e).delete(function(o,u){const c=o.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],V0(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=Gn.newInvalidDocument(t);return zd(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(ym(t))},(o,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:Gn.newInvalidDocument(t)};return zd(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(ym(t))},(o,u)=>{r={document:this.$n(t,u),size:av(u)}}).next(()=>r)}getEntries(e,t){let r=To();return this.Ln(e,t,(o,u)=>{const c=this.$n(o,u);r=r.insert(o,c)}).next(()=>r)}Un(e,t){let r=To(),o=new cr(ze.comparator);return this.Ln(e,t,(u,c)=>{const p=this.$n(u,c);r=r.insert(u,p),o=o.insert(u,av(c))}).next(()=>({documents:r,qn:o}))}Ln(e,t,r){if(t.isEmpty())return me.resolve();let o=new Bn(Zf);t.forEach(y=>o=o.add(y));const u=IDBKeyRange.bound(ym(o.first()),ym(o.last())),c=o.getIterator();let p=c.getNext();return zd(e).Wt({index:"documentKeyIndex",range:u},(y,w,D)=>{const S=ze.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;p&&Zf(p,S)<0;)r(p,null),p=c.getNext();p&&p.isEqual(S)&&(r(p,w),p=c.hasNext()?c.getNext():null),p?D.Ut(ym(p)):D.done()}).next(()=>{for(;p;)r(p,null),p=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),V0(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return zd(e).qt(IDBKeyRange.bound(o,u,!0)).next(c=>{let p=To();for(const y of c){const w=this.$n(ze.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);p=p.insert(w.key,w)}return p})}getAllFromCollectionGroup(e,t,r,o){let u=To();const c=Wf(t,r),p=Wf(t,ca.max());return zd(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,p,!0)},(y,w,D)=>{const S=this.$n(ze.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);u=u.insert(S.key,S),u.size===o&&D.done()}).next(()=>u)}newChangeBuffer(e){return new VN(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return YD(e).get("remoteDocumentGlobalKey").next(t=>(Rt(!!t),t))}Fn(e,t){return YD(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function(n,e){let t;if(e.document)t=ec(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ze.fromSegments(e.noDocument.path),o=$f(e.noDocument.readTime);t=Gn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return it();{const r=ze.fromSegments(e.unknownDocument.path),o=$f(e.unknownDocument.version);t=Gn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new vr(r[0],r[1]);return It.fromTimestamp(o)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(It.min()))return r}return Gn.newInvalidDocument(e)}}class VN extends KD{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new Zu(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new Bn((u,c)=>$t(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const p=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,p.readTime)),c.isValidDocument()){const y=kD(this.Kn.M,c);o=o.add(u.path.popLast()),r+=av(y)-p.size,t.push(this.Kn.addEntry(e,u,y))}else if(r-=p.size,this.trackRemovals){const y=kD(this.Kn.M,c.convertToNoDocument(It.min()));t.push(this.Kn.addEntry(e,u,y))}}),o.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),me.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:o})=>(o.forEach((u,c)=>{this.Gn.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function YD(n){return si(n,"remoteDocumentGlobal")}function zd(n){return si(n,"remoteDocumentsV14")}function ym(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Wf(n,e){const t=e.documentKey.path.toArray();return[n,V0(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Zf(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=$t(t[u],r[u]),o)return o;return o=$t(t.length,r.length),o||(o=$t(t[t.length-2],r[r.length-2]),o||$t(t[t.length-1],r[r.length-1]))}class UN{constructor(e){this.M=e}kt(e,t,r,o){const u=new sv("createOrUpgrade",t);var p;r<1&&o>=1&&(e.createObjectStore("owner"),(p=e).createObjectStore("mutationQueues",{keyPath:"userId"}),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",SD,{unique:!0}),p.createObjectStore("documentMutations"),lv(e),function(p){p.createObjectStore("remoteDocuments")}(e));let c=me.resolve();return r<3&&o>=3&&(0!==r&&(function(p){p.deleteObjectStore("targetDocuments"),p.deleteObjectStore("targets"),p.deleteObjectStore("targetGlobal")}(e),lv(e)),c=c.next(()=>function(p){const y=p.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:It.min().toTimestamp(),targetCount:0};return y.put("targetGlobalKey",w)}(u))),r<4&&o>=4&&(0!==r&&(c=c.next(()=>function(p,y){return y.store("mutations").qt().next(w=>{p.deleteObjectStore("mutations"),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",SD,{unique:!0});const D=y.store("mutations"),S=w.map(P=>D.put(P));return me.waitFor(S)})}(e,u))),c=c.next(()=>{!function(p){p.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(c=c.next(()=>this.Qn(u))),r<6&&o>=6&&(c=c.next(()=>(function(p){p.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&o>=7&&(c=c.next(()=>this.Wn(u))),r<8&&o>=8&&(c=c.next(()=>this.zn(e,u))),r<9&&o>=9&&(c=c.next(()=>{!function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(c=c.next(()=>this.Hn(u))),r<11&&o>=11&&(c=c.next(()=>{(function(p){p.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(p){p.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(c=c.next(()=>{!function(p){const y=p.createObjectStore("documentOverlays",{keyPath:R0});y.createIndex("collectionPathOverlayIndex",AN,{unique:!1}),y.createIndex("collectionGroupOverlayIndex",SN,{unique:!1})}(e)})),r<13&&o>=13&&(c=c.next(()=>function(p){const y=p.createObjectStore("remoteDocumentsV14",{keyPath:yN});y.createIndex("documentKeyIndex",$i),y.createIndex("collectionGroupIndex",vN)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(c=c.next(()=>{!function(p){p.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),p.createObjectStore("indexState",{keyPath:CN}).createIndex("sequenceNumberIndex",IN,{unique:!1}),p.createObjectStore("indexEntries",{keyPath:TN}).createIndex("documentKeyIndex",DN,{unique:!1})}(e)})),c}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,o)=>{t+=av(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(o=>me.forEach(o,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",c).next(p=>me.forEach(p,y=>{Rt(y.userId===u.userId);const w=rc(this.M,y);return Z0(e,u.userId,w).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Wt((c,p)=>{const y=new fn(c),w=[0,at(y)];u.push(t.get(w).next(D=>D?me.resolve():t.put({targetId:0,path:at(y),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>me.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:bN});const r=t.store("collectionParents"),o=new G0,u=c=>{if(o.add(c)){const p=c.lastSegment(),y=c.popLast();return r.put({collectionId:p,parent:at(y)})}};return t.store("remoteDocuments").Wt({jt:!0},(c,p)=>{const y=new fn(c);return u(y.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([c,p,y],w)=>{const D=nu(p);return u(D.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,o)=>{const u=gm(o),c=PD(this.M,u);return t.put(c)})}Jn(e,t){const r=t.store("remoteDocuments"),o=[];return r.Wt((u,c)=>{const p=t.store("remoteDocumentsV14"),y=(w=c,w.document?new ze(fn.fromString(w.document.name).popFirst(5)):w.noDocument?ze.fromSegments(w.noDocument.path):w.unknownDocument?ze.fromSegments(w.unknownDocument.path):it()).path.toArray();var w;const D={prefixPath:y.slice(0,y.length-2),collectionGroup:y[y.length-2],documentId:y[y.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};o.push(p.put(D))}).next(()=>me.waitFor(o))}}function lv(n){n.createObjectStore("targetDocuments",{keyPath:x0}).createIndex("documentTargetsIndex",wN,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",EN,{unique:!0}),n.createObjectStore("targetGlobal")}const Ro="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class K0{constructor(e,t,r,o,u,c,p,y,w,D,S=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=c,this.document=p,this.Xn=w,this.Zn=D,this.ts=S,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=P=>Promise.resolve(),!K0.vt())throw new Me(ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new zD(this,o),this.hs=t+"main",this.M=new L0(y),this.ls=new da(this.hs,this.ts,new UN(this.M)),this.fs=new FN(this.referenceDelegate,this.M),this.ds=new LN(this.M),this._s=new MN,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===D&&_r("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Me(ge.FAILED_PRECONDITION,Ro);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Di(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,Ce.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,Ce.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,Ce.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>cv(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(Hd(e))return Ue("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ue("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return ac(e).get("owner").next(t=>me.resolve(this.Ps(t)))}Vs(e){return cv(e).delete(this.clientId)}vs(){var e=this;return(0,Ce.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=si(r,"clientMetadata");return o.qt().next(u=>{const c=e.Ds(u,18e5),p=u.filter(y=>-1===c.indexOf(y));return me.forEach(p,y=>o.delete(y.clientId)).next(()=>p)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?me.resolve(!0):ac(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new Me(ge.FAILED_PRECONDITION,Ro);return!1}}return!(!this.networkEnabled||!this.inForeground)||cv(e).qt().next(r=>void 0===this.Ds(r,5e3).find(o=>{if(this.clientId!==o.clientId){const c=!this.inForeground&&o.inForeground,p=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||c&&p)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ue("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ce.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new k0(t,Di.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>cv(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return _m.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new ON(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return $0.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Ue("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=14===(c=this.ts)?VO:13===c?xD:12===c?M0:11===c?N0:void it();var c;let p;return this.ls.runTransaction(e,o,u,y=>(p=new k0(y,this.es?this.es.next():Di.A),"readwrite-primary"===t?this.Es(p).next(w=>!!w||this.As(p)).next(w=>{if(!w)throw _r(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Me(ge.FAILED_PRECONDITION,RD);return r(p)}).next(w=>this.bs(p).next(()=>w)):this.$s(p).next(()=>r(p)))).then(y=>(p.raiseOnCommittedEvent(),y))}$s(e){return ac(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Me(ge.FAILED_PRECONDITION,Ro)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ac(e).put("owner",t)}static vt(){return da.vt()}Rs(e){const t=ac(e);return t.get("owner").next(r=>this.Ps(r)?(Ue("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):me.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(_r(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,F.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Ue("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return _r("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){_r("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ac(n){return si(n,"owner")}function cv(n){return si(n,"clientMetadata")}function Y0(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class UO{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(o=>{for(const u of r)u.applyToLocalView(o);return o})}qs(e,t){e.forEach((r,o)=>{for(const u of t)u.applyToLocalView(o)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return ze.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.js(e,t.path):um(t)?this.Ws(e,t,r):this.zs(e,t,r);var o}js(e,t){return this.Ls(e,new ze(t)).next(r=>{let o=Qy();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Ws(e,t,r){const o=t.collectionGroup;let u=Qy();return this.indexManager.getCollectionParents(e,o).next(c=>me.forEach(c,p=>{const y=(w=t,D=p.child(o),new Yl(D,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,D;return this.zs(e,y,r).next(w=>{w.forEach((D,S)=>{u=u.insert(D,S)})})}).next(()=>u))}zs(e,t,r){let o;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const c of u)for(const p of c.mutations){const y=p.key;let w=o.get(y);null==w&&(w=Gn.newInvalidDocument(y),o=o.insert(y,w)),Ud(p,w,c.localWriteTime),w.isFoundDocument()||(o=o.remove(y))}}).next(()=>(o.forEach((u,c)=>{Wy(t,c)||(o=o.remove(u))}),o))}}class vm{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=o}static Ys(e,t){let r=pn(),o=pn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new vm(e,t.fromCache,r,o)}}class dv{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,o){return this.ti(e,t).next(u=>u||this.ei(e,t,o,r)).next(u=>u||this.ni(e,t))}ti(e,t){return me.resolve(null)}ei(e,t,r,o){return function(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||o.isEqual(It.min())?this.ni(e,t):this.Zs.Ks(e,r).next(u=>{const c=this.si(t,u);return this.ii(t,c,r,o)?this.ni(e,t):(rr()<=Eo.in.DEBUG&&Ue("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),_0(t)),this.ri(e,c,t,tD(o,-1)))})}si(e,t){let r=new Bn(v0(e));return t.forEach((o,u)=>{Wy(e,u)&&(r=r.add(u))}),r}ii(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ni(e,t){return rr()<=Eo.in.DEBUG&&Ue("QueryEngine","Using full collection scan to execute query:",_0(t)),this.Zs.Qs(e,t,ca.min())}ri(e,t,r,o){return this.Zs.Qs(e,r,o).next(u=>(t.forEach(c=>{u=u.insert(c.key,c)}),u))}}class QD{constructor(e,t,r,o){this.persistence=e,this.oi=t,this.M=o,this.ui=new cr($t),this.ai=new Zu(u=>Pd(u),Rf),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new UO(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function hv(n,e,t,r){return new QD(n,e,t,r)}function fv(n,e){return Q0.apply(this,arguments)}function Q0(){return(Q0=(0,Ce.Z)(function*(n,e){const t=Ye(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.Bs.getAllMutationBatches(r).next(u=>(o=u,t.li(e),t.Bs.getAllMutationBatches(r))).next(u=>{const c=[],p=[];let y=pn();for(const w of o){c.push(w.batchId);for(const D of w.mutations)y=y.add(D.key)}for(const w of u){p.push(w.batchId);for(const D of w.mutations)y=y.add(D.key)}return t.fi.Ks(r,y).next(w=>({di:w,removedBatchIds:c,addedBatchIds:p}))})})})).apply(this,arguments)}function BN(n,e){const t=Ye(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.hi.newChangeBuffer({trackRemovals:!0});return function(c,p,y,w){const D=y.batch,S=D.keys();let P=me.resolve();return S.forEach(B=>{P=P.next(()=>w.getEntry(p,B)).next(Y=>{const _e=y.docVersions.get(B);Rt(null!==_e),Y.version.compareTo(_e)<0&&(D.applyToRemoteDocument(Y,y),Y.isValidDocument()&&(Y.setReadTime(y.commitVersion),w.addEntry(Y)))})}),P.next(()=>c.Bs.removeMutationBatch(p,D))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,o))})}function JD(n){const e=Ye(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function jN(n,e){const t=Ye(n),r=e.snapshotVersion;let o=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.hi.newChangeBuffer({trackRemovals:!0});o=t.ui;const p=[];e.targetChanges.forEach((w,D)=>{const S=o.get(D);if(!S)return;p.push(t.fs.removeMatchingKeys(u,w.removedDocuments,D).next(()=>t.fs.addMatchingKeys(u,w.addedDocuments,D)));let P=S.withSequenceNumber(u.currentSequenceNumber);var B,Y,_e;e.targetMismatches.has(D)?P=P.withResumeToken($r.EMPTY_BYTE_STRING,It.min()).withLastLimboFreeSnapshotVersion(It.min()):w.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(w.resumeToken,r)),o=o.insert(D,P),Y=P,_e=w,(0===(B=S).resumeToken.approximateByteSize()||Y.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8||_e.addedDocuments.size+_e.modifiedDocuments.size+_e.removedDocuments.size>0)&&p.push(t.fs.updateTargetData(u,P))});let y=To();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(u,w))}),p.push(J0(u,c,e.documentUpdates).next(w=>{y=w})),!r.isEqual(It.min())){const w=t.fs.getLastRemoteSnapshotVersion(u).next(D=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));p.push(w)}return me.waitFor(p).next(()=>c.apply(u)).next(()=>t.fi.Gs(u,y)).next(()=>y)}).then(u=>(t.ui=o,u))}function J0(n,e,t){let r=pn();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=To();return t.forEach((c,p)=>{const y=o.get(c);p.isNoDocument()&&p.version.isEqual(It.min())?(e.removeEntry(c,p.readTime),u=u.insert(c,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||0===p.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(p),u=u.insert(c,p)):Ue("LocalStore","Ignoring outdated watch update for ",c,". Current version:",y.version," Watch version:",p.version)}),u})}function X0(n,e){const t=Ye(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function Kd(n,e){const t=Ye(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.fs.getTargetData(r,e).next(u=>u?(o=u,me.resolve(o)):t.fs.allocateTargetId(r).next(c=>(o=new nc(e,c,0,r.currentSequenceNumber),t.fs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.ui.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function zf(n,e,t){return pv.apply(this,arguments)}function pv(){return(pv=(0,Ce.Z)(function*(n,e,t){const r=Ye(n),o=r.ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!Hd(c))throw c;Ue("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.ui=r.ui.remove(e),r.ai.delete(o.target)})).apply(this,arguments)}function Em(n,e,t){const r=Ye(n);let o=It.min(),u=pn();return r.persistence.runTransaction("Execute query","readonly",c=>function(p,y,w){const D=Ye(p),S=D.ai.get(w);return void 0!==S?me.resolve(D.ui.get(S)):D.fs.getTargetData(y,w)}(r,c,Io(e)).next(p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(c,p.targetId).next(y=>{u=y})}).next(()=>r.oi.Qs(c,e,t?o:It.min(),t?u:pn())).next(p=>(tb(r,y0(e),p),{documents:p,_i:u})))}function XD(n,e){const t=Ye(n),r=Ye(t.fs),o=t.ui.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(c=>c?c.target:null))}function eb(n,e){const t=Ye(n),r=t.ci.get(e)||It.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.hi.getAllFromCollectionGroup(o,e,tD(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(tb(t,e,o),o))}function tb(n,e,t){let r=It.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ci.set(e,r)}function gv(){return(gv=(0,Ce.Z)(function*(n,e,t,r){const o=Ye(n);let u=pn(),c=To();for(const w of t){const D=e.wi(w.metadata.name);w.document&&(u=u.add(D));const S=e.mi(w);S.setReadTime(e.gi(w.metadata.readTime)),c=c.insert(D,S)}const p=o.hi.newChangeBuffer({trackRemovals:!0}),y=yield Kd(o,(w=r,Io(Nf(fn.fromString(`__bundle__/docs/${w}`)))));var w;return o.persistence.runTransaction("Apply bundle documents","readwrite",w=>J0(w,p,c).next(D=>(p.apply(w),D)).next(D=>o.fs.removeMatchingKeysForTargetId(w,y.targetId).next(()=>o.fs.addMatchingKeys(w,u,y.targetId)).next(()=>o.fi.Gs(w,D)).next(()=>D)))})).apply(this,arguments)}function HN(n,e){return eA.apply(this,arguments)}function eA(){return(eA=(0,Ce.Z)(function*(n,e,t=pn()){const r=yield Kd(n,Io(U0(e.bundledQuery))),o=Ye(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const c=Sn(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return o._s.saveNamedQuery(u,e);const p=r.withResumeToken($r.EMPTY_BYTE_STRING,c);return o.ui=o.ui.insert(p.targetId,p),o.fs.updateTargetData(u,p).next(()=>o.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.fs.addMatchingKeys(u,t,r.targetId)).next(()=>o._s.saveNamedQuery(u,e))})})).apply(this,arguments)}class ss{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return me.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:Sn(r.createTime)}),me.resolve()}getNamedQuery(e,t){return me.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:U0(r.bundledQuery),readTime:Sn(r.readTime)}),me.resolve();var r}}class Kf{constructor(){this.overlays=new cr(ze.comparator),this.Ii=new Map}getOverlay(e,t){return me.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.Xt(e,t,u)}),me.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Ii.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Ii.delete(r)),me.resolve()}getOverlaysForCollection(e,t,r){const o=pm(),u=t.length+1,c=new ze(t.child("")),p=this.overlays.getIteratorFrom(c);for(;p.hasNext();){const y=p.getNext().value,w=y.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===u&&y.largestBatchId>r&&o.set(y.getKey(),y)}return me.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new cr((w,D)=>w-D);const c=this.overlays.getIterator();for(;c.hasNext();){const w=c.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let D=u.get(w.largestBatchId);null===D&&(D=pm(),u=u.insert(w.largestBatchId,D)),D.set(w.getKey(),w)}}const p=pm(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((w,D)=>p.set(w,D)),!(p.size()>=o)););return me.resolve(p)}Xt(e,t,r){if(null===r)return;const o=this.overlays.get(r.key);if(null!==o){const c=this.Ii.get(o.largestBatchId).delete(r.key);this.Ii.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new F0(t,r));let u=this.Ii.get(t);void 0===u&&(u=pn(),this.Ii.set(t,u)),this.Ii.set(t,u.add(r.key))}}class nb{constructor(){this.Ti=new Bn(oi.Ei),this.Ai=new Bn(oi.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new oi(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new oi(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new ze(new fn([])),r=new oi(t,e),o=new oi(t,e+1),u=[];return this.Ai.forEachInRange([r,o],c=>{this.Pi(c),u.push(c.key)}),u}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new ze(new fn([])),r=new oi(t,e),o=new oi(t,e+1);let u=pn();return this.Ai.forEachInRange([r,o],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new oi(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class oi{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return ze.comparator(e.key,t.key)||$t(e.Ci,t.Ci)}static Ri(e,t){return $t(e.Ci,t.Ci)||ze.comparator(e.key,t.key)}}class BO{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new Bn(oi.Ei)}checkEmpty(e){return me.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,o){const u=this.xi;this.xi++;const c=new P0(u,t,r,o);this.Bs.push(c);for(const p of o)this.Ni=this.Ni.add(new oi(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return me.resolve(c)}lookupMutationBatch(e,t){return me.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.Mi(t+1),u=o<0?0:o;return me.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return me.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new oi(t,0),o=new oi(t,Number.POSITIVE_INFINITY),u=[];return this.Ni.forEachInRange([r,o],c=>{const p=this.ki(c.Ci);u.push(p)}),me.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Bn($t);return t.forEach(o=>{const u=new oi(o,0),c=new oi(o,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([u,c],p=>{r=r.add(p.Ci)})}),me.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;ze.isDocumentKey(u)||(u=u.child(""));const c=new oi(new ze(u),0);let p=new Bn($t);return this.Ni.forEachWhile(y=>{const w=y.key.path;return!!r.isPrefixOf(w)&&(w.length===o&&(p=p.add(y.Ci)),!0)},c),me.resolve(this.Oi(p))}Oi(e){const t=[];return e.forEach(r=>{const o=this.ki(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){Rt(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return me.forEach(t.mutations,o=>{const u=new oi(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new oi(t,0),o=this.Ni.firstAfterOrEqual(r);return me.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return me.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class wm{constructor(e){this.$i=e,this.docs=new cr(ze.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,c=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return me.resolve(r?r.document.mutableCopy():Gn.newInvalidDocument(t))}getEntries(e,t){let r=To();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Gn.newInvalidDocument(o))}),me.resolve(r)}getAllFromCollection(e,t,r){let o=To();const u=new ze(t.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:p,value:{document:y}}=c.getNext();if(!t.isPrefixOf(p.path))break;p.path.length>t.length+1||$y(JR(y),r)<=0||(o=o.insert(y.key,y.mutableCopy()))}return me.resolve(o)}getAllFromCollectionGroup(e,t,r,o){it()}Bi(e,t){return me.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new GN(this)}getSize(e){return me.resolve(this.size)}}class GN extends KD{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Kn.addEntry(e,o)):this.Kn.removeEntry(r)}),me.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class rb{constructor(e){this.persistence=e,this.Li=new Zu(t=>Pd(t),Rf),this.lastRemoteSnapshotVersion=It.min(),this.highestTargetId=0,this.Ui=0,this.qi=new nb,this.targetCount=0,this.Ki=qd.gn()}forEachTarget(e,t){return this.Li.forEach((r,o)=>t(o)),me.resolve()}getLastRemoteSnapshotVersion(e){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return me.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),me.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new qd(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,me.resolve()}updateTargetData(e,t){return this.Tn(t),me.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,me.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Li.forEach((c,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.Li.delete(c),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)}),me.waitFor(u).next(()=>o)}getTargetCount(e){return me.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return me.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),me.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(c=>{u.push(o.markPotentiallyOrphaned(e,c))}),me.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),me.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return me.resolve(r)}containsKey(e,t){return me.resolve(this.qi.containsKey(t))}}class qN{constructor(e,t){this.Gi={},this.overlays={},this.es=new Di(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new rb(this),this.indexManager=new UD,this.ds=new wm(r=>this.referenceDelegate.Qi(r)),this.M=new L0(t),this._s=new ss(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Kf,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new BO(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Ue("MemoryPersistence","Starting transaction:",e);const o=new tA(this.es.next());return this.referenceDelegate.ji(),r(o).next(u=>this.referenceDelegate.Wi(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}zi(e,t){return me.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class tA extends ND{constructor(e){super(),this.currentSequenceNumber=e}}class ib{constructor(e){this.persistence=e,this.Hi=new nb,this.Ji=null}static Yi(e){return new ib(e)}get Xi(){if(this.Ji)return this.Ji;throw it()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),me.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),me.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),me.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(o=>this.Xi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Xi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.Xi,r=>{const o=ze.fromPath(r);return this.Zi(e,o).next(u=>{u||t.removeEntry(o,It.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return me.or([()=>me.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function nA(n,e){return`firestore_clients_${n}_${e}`}function mv(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function _v(n,e){return`firestore_targets_${n}_${e}`}class bm{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static tr(e,t,r){const o=JSON.parse(r);let u,c="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return c&&o.error&&(c="string"==typeof o.error.message&&"string"==typeof o.error.code,c&&(u=new Me(o.error.code,o.error.message))),c?new bm(e,t,o.state,u):(_r("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class uc{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Me(r.error.code,r.error.message))),u?new uc(e,r.state,o):(_r("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Yf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=Jl();for(let c=0;o&&c<r.activeTargetIds.length;++c)o=Md(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return o?new Yf(e,u):(_r("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class rA{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new rA(t.clientId,t.onlineState):(_r("SharedClientState",`Failed to parse online state: ${e}`),null)}}class yv{constructor(){this.activeTargetIds=Jl()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sb{constructor(e,t,r,o,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new cr($t),this.started=!1,this.cr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.hr=nA(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new yv),this.dr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(p){return`firestore_bundle_loaded_v2_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.syncEngine.Fs();for(const o of t){if(o===e.ir)continue;const u=e.getItem(nA(e.persistenceKey,o));if(u){const c=Yf.tr(o,u);c&&(e.ar=e.ar.insert(c.clientId,c))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const o=e.pr(r);o&&e.Ir(o)}for(const o of e.cr)e.ur(o);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(_v(this.persistenceKey,e));if(r){const o=uc.tr(e,r);o&&(t=o.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(_v(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Ar(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ue("SharedClientState","READ",e,t),t}setItem(e,t){Ue("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ue("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ue("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void _r("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,Ce.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const o=t.vr(r.key);return t.Sr(o,null)}{const o=t.Dr(r.key,r.newValue);if(o)return t.Sr(o.clientId,o)}}else if(t._r.test(r.key)){if(null!==r.newValue){const o=t.Cr(r.key,r.newValue);if(o)return t.Nr(o)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const o=t.kr(r.key,r.newValue);if(o)return t.Mr(o)}}else if(r.key===t.mr){if(null!==r.newValue){const o=t.pr(r.newValue);if(o)return t.Ir(o)}}else if(r.key===t.lr){const o=function(u){let c=Di.A;if(null!=u)try{const p=JSON.parse(u);Rt("number"==typeof p),c=p}catch(p){_r("SharedClientState","Failed to read sequence number from WebStorage",p)}return c}(r.newValue);o!==Di.A&&t.sequenceNumberHandler(o)}else if(r.key===t.gr){const o=t.Or(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Fr(u)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const o=new bm(this.currentUser,e,t,r),u=mv(this.persistenceKey,this.currentUser,e);this.setItem(u,o.er())}Ar(e){const t=mv(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const o=_v(this.persistenceKey,e),u=new uc(e,t,r);this.setItem(o,u.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return Yf.tr(r,t)}Cr(e,t){const r=this._r.exec(e),o=Number(r[1]);return bm.tr(new Ti(void 0!==r[2]?r[2]:null),o,t)}kr(e,t){const r=this.wr.exec(e),o=Number(r[1]);return uc.tr(o,t)}pr(e){return rA.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,Ce.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);Ue("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),o=this.Tr(this.ar),u=this.Tr(r),c=[],p=[];return u.forEach(y=>{o.has(y)||c.push(y)}),o.forEach(y=>{u.has(y)||p.push(y)}),this.syncEngine.Lr(c,p).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=Jl();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class ob{constructor(){this.Ur=new yv,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new yv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class vv{Kr(e){}shutdown(){}}class ab{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){Ue("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){Ue("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const WN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class ub{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class lb extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,o,u){const c=this.ho(e,t);Ue("RestConnection","Sending: ",c,r);const p={};return this.lo(p,o,u),this.fo(e,c,p,r).then(y=>(Ue("RestConnection","Received: ",y),y),y=>{throw Jg("RestConnection",`${e} failed with error: `,y,"url: ",c,"request:",r),y})}_o(e,t,r,o,u){return this.co(e,t,r,o,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Hu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}ho(e,t){return`${this.uo}/v1/${t}:${WN[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,o){return new Promise((u,c)=>{const p=new HR;p.listenOnce($T.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Sy.NO_ERROR:const w=p.getResponseJson();Ue("Connection","XHR received:",JSON.stringify(w)),u(w);break;case Sy.TIMEOUT:Ue("Connection",'RPC "'+e+'" timed out'),c(new Me(ge.DEADLINE_EXCEEDED,"Request time out"));break;case Sy.HTTP_ERROR:const D=p.getStatus();if(Ue("Connection",'RPC "'+e+'" failed with status:',D,"response text:",p.getResponseText()),D>0){const S=p.getResponseJson().error;if(S&&S.status&&S.message){const P=function(B){const Y=B.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(Y)>=0?Y:ge.UNKNOWN}(S.status);c(new Me(P,S.message))}else c(new Me(ge.UNKNOWN,"Server responded with status "+p.getStatus()))}else c(new Me(ge.UNAVAILABLE,"Connection failed."));break;default:it()}}finally{Ue("Connection",'RPC "'+e+'" completed.')}});const y=JSON.stringify(o);p.send(t,"POST",y,r,15)})}wo(e,t,r){const o=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=u0(),c=SO(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(p.xmlHttpFactory=new $R({})),this.lo(p.initMessageHeaders,t,r),(0,F.uI)()||(0,F.b$)()||(0,F.d)()||(0,F.w1)()||(0,F.Mn)()||(0,F.ru)()||(p.httpHeadersOverwriteParam="$httpHeaders");const y=o.join("");Ue("Connection","Creating WebChannel: "+y,p);const w=u.createWebChannel(y,p);let D=!1,S=!1;const P=new ub({Jr:Y=>{S?Ue("Connection","Not sending because WebChannel is closed:",Y):(D||(Ue("Connection","Opening WebChannel transport."),w.open(),D=!0),Ue("Connection","WebChannel sending:",Y),w.send(Y))},Yr:()=>w.close()}),B=(Y,_e,xe)=>{Y.listen(_e,dt=>{try{xe(dt)}catch(lt){setTimeout(()=>{throw lt},0)}})};return B(w,xy.EventType.OPEN,()=>{S||Ue("Connection","WebChannel transport opened.")}),B(w,xy.EventType.CLOSE,()=>{S||(S=!0,Ue("Connection","WebChannel transport closed"),P.ro())}),B(w,xy.EventType.ERROR,Y=>{S||(S=!0,Jg("Connection","WebChannel transport errored:",Y),P.ro(new Me(ge.UNAVAILABLE,"The operation could not be completed")))}),B(w,xy.EventType.MESSAGE,Y=>{var _e;if(!S){const xe=Y.data[0];Rt(!!xe);const dt=xe,lt=dt.error||(null===(_e=dt[0])||void 0===_e?void 0:_e.error);if(lt){Ue("Connection","WebChannel received error:",lt);const nt=lt.status;let st=function(sn){const ui=kr[sn];if(void 0!==ui)return Yy(ui)}(nt),Bt=lt.message;void 0===st&&(st=ge.INTERNAL,Bt="Unknown error status: "+nt+" with message "+lt.message),S=!0,P.ro(new Me(st,Bt)),w.close()}else Ue("Connection","WebChannel received:",xe),P.oo(xe)}}),B(c,xO.STAT_EVENT,Y=>{Y.stat===yt.PROXY?Ue("Connection","Detected buffering proxy"):Y.stat===yt.NOPROXY&&Ue("Connection","Detected no buffering proxy")}),setTimeout(()=>{P.io()},0),P}}function iA(){return"undefined"!=typeof window?window:null}function Ev(){return"undefined"!=typeof document?document:null}function Qf(n){return new wD(n,!0)}class wv{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=o,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),o=Math.max(0,t-r);o>0&&Ue("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,o,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class cb{constructor(e,t,r,o,u,c,p,y){this.Yn=e,this.Vo=r,this.vo=o,this.So=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=p,this.listener=y,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new wv(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Ce.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,Ce.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,Ce.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===ge.RESOURCE_EXHAUSTED?(_r(t.toString()),_r("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===ge.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Do===t&&this.Qo(r,o)},r=>{e(()=>{const o=new Me(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(o)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(o=>{r(()=>this.jo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Oo(){var e=this;this.state=5,this.No.Ro((0,Ce.Z)(function*(){e.state=0,e.start()}))}jo(e){return Ue("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(Ue("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ZN extends cb{constructor(e,t,r,o,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,c),this.M=u}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:it(),o=e.targetChange.targetIds||[],u=function(y,w){return y.N?(Rt(void 0===w||"string"==typeof w),$r.fromBase64String(w||"")):(Rt(void 0===w||w instanceof Uint8Array),$r.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,p=c&&function(y){const w=void 0===y.code?ge.UNKNOWN:Yy(y.code);return new Me(w,y.message||"")}(c);t=new fN(r,o,u,p||null)}else if("documentChange"in e){const r=e.documentChange,o=eu(n,r.document.name),u=Sn(r.document.updateTime),c=new Bi({mapValue:{fields:r.document.fields}}),p=Gn.newFoundDocument(o,u,c);t=new zu(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,o=eu(n,r.document),u=r.readTime?Sn(r.readTime):It.min(),c=Gn.newNoDocument(o,u);t=new zu([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,o=eu(n,r.document);t=new zu([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return it();{const r=e.filter,u=new dN(r.count||0);t=new Of(r.targetId,u)}}var y;return t}(this.M,e),r=function(o){if(!("targetChange"in o))return It.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?It.min():u.readTime?Sn(u.readTime):It.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=tu(this.M),t.addTarget=function(o,u){let c;const p=u.target;return c=sm(p)?{documents:T0(o,p)}:{query:$d(o,p)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=bD(o,u.resumeToken):u.snapshotVersion.compareTo(It.min())>0&&(c.readTime=ev(o,u.snapshotVersion.toTimestamp())),c}(this.M,e);const r=function(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return it()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=tu(this.M),t.removeTarget=e,this.Lo(t)}}class sA extends cb{constructor(e,t,r,o,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,c),this.M=u,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(Rt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function(n,e){return n&&n.length>0?(Rt(void 0!==e),n.map(t=>function(r,o){let u=Sn(r.updateTime?r.updateTime:o);return u.isEqual(It.min())&&(u=Sn(o)),new aN(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Sn(e.commitTime);return this.listener.tu(r,t)}return Rt(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=tu(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Bd(this.M,r))};this.Lo(t)}}class oA extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=o,this.su=!1}iu(){if(this.su)throw new Me(ge.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.So.co(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Me(ge.UNKNOWN,o.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.So._o(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Me(ge.UNKNOWN,o.toString())})}terminate(){this.su=!0}}class zN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(_r(t),this.uu=!1):Ue("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class KN{constructor(e,t,r,o,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=u,this.gu.Kr(p=>{r.enqueueAndForget((0,Ce.Z)(function*(){var y;Qd(c)&&(Ue("RemoteStore","Restarting streams for network reachability change."),yield(y=(0,Ce.Z)(function*(w){const D=Ye(w);D.wu.add(4),yield Yd(D),D.yu.set("Unknown"),D.wu.delete(4),yield Jf(D)}),function(w){return y.apply(this,arguments)})(c))}))}),this.yu=new zN(r,o)}}function Jf(n){return db.apply(this,arguments)}function db(){return(db=(0,Ce.Z)(function*(n){if(Qd(n))for(const e of n.mu)yield e(!0)})).apply(this,arguments)}function Yd(n){return bv.apply(this,arguments)}function bv(){return(bv=(0,Ce.Z)(function*(n){for(const e of n.mu)yield e(!1)})).apply(this,arguments)}function Cm(n,e){const t=Ye(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),Cv(t)?fb(t):Tm(t).Mo()&&hb(t,e))}function Xf(n,e){const t=Ye(n),r=Tm(t);t._u.delete(e),r.Mo()&&aA(t,e),0===t._u.size&&(r.Mo()?r.$o():Qd(t)&&t.yu.set("Unknown"))}function hb(n,e){n.pu.Z(e.targetId),Tm(n).Ho(e)}function aA(n,e){n.pu.Z(e),Tm(n).Jo(e)}function fb(n){n.pu=new Ao({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),Tm(n).start(),n.yu.au()}function Cv(n){return Qd(n)&&!Tm(n).ko()&&n._u.size>0}function Qd(n){return 0===Ye(n).wu.size}function YN(n){n.pu=void 0}function jO(n){return uA.apply(this,arguments)}function uA(){return(uA=(0,Ce.Z)(function*(n){n._u.forEach((e,t)=>{hb(n,e)})})).apply(this,arguments)}function $O(n,e){return lA.apply(this,arguments)}function lA(){return(lA=(0,Ce.Z)(function*(n,e){YN(n),Cv(n)?(n.yu.lu(e),fb(n)):n.yu.set("Unknown")})).apply(this,arguments)}function HO(n,e,t){return cA.apply(this,arguments)}function cA(){return(cA=(0,Ce.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof fN&&2===e.state&&e.cause)try{yield(r=(0,Ce.Z)(function*(o,u){const c=u.cause;for(const p of u.targetIds)o._u.has(p)&&(yield o.remoteSyncer.rejectListen(p,c),o._u.delete(p),o.pu.removeTarget(p))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Ue("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield pb(n,r)}else if(e instanceof zu?n.pu.ut(e):e instanceof Of?n.pu._t(e):n.pu.ht(e),!t.isEqual(It.min()))try{const r=yield JD(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const c=o.pu.yt(u);return c.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const w=o._u.get(y);w&&o._u.set(y,w.withResumeToken(p.resumeToken,u))}}),c.targetMismatches.forEach(p=>{const y=o._u.get(p);if(!y)return;o._u.set(p,y.withResumeToken($r.EMPTY_BYTE_STRING,y.snapshotVersion)),aA(o,p);const w=new nc(y.target,p,1,y.sequenceNumber);hb(o,w)}),o.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Ue("RemoteStore","Failed to raise snapshot:",r),yield pb(n,r)}var r})).apply(this,arguments)}function pb(n,e,t){return dA.apply(this,arguments)}function dA(){return(dA=(0,Ce.Z)(function*(n,e,t){if(!Hd(e))throw e;n.wu.add(1),yield Yd(n),n.yu.set("Offline"),t||(t=()=>JD(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ce.Z)(function*(){Ue("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield Jf(n)}))})).apply(this,arguments)}function QN(n,e){return e().catch(t=>pb(n,t,e))}function Im(n){return hA.apply(this,arguments)}function hA(){return(hA=(0,Ce.Z)(function*(n){const e=Ye(n),t=lc(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;GO(e);)try{const o=yield X0(e.localStore,r);if(null===o){0===e.du.length&&t.$o();break}r=o.batchId,qO(e,o)}catch(o){yield pb(e,o)}JN(e)&&XN(e)})).apply(this,arguments)}function GO(n){return Qd(n)&&n.du.length<10}function qO(n,e){n.du.push(e);const t=lc(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function JN(n){return Qd(n)&&!lc(n).ko()&&n.du.length>0}function XN(n){lc(n).start()}function eM(n){return gb.apply(this,arguments)}function gb(){return(gb=(0,Ce.Z)(function*(n){lc(n).nu()})).apply(this,arguments)}function tM(n){return fA.apply(this,arguments)}function fA(){return(fA=(0,Ce.Z)(function*(n){const e=lc(n);for(const t of n.du)e.Zo(t.mutations)})).apply(this,arguments)}function WO(n,e,t){return pA.apply(this,arguments)}function pA(){return(pA=(0,Ce.Z)(function*(n,e,t){const r=n.du.shift(),o=O0.from(r,e,t);yield QN(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Im(n)})).apply(this,arguments)}function nM(n,e){return mb.apply(this,arguments)}function mb(){return(mb=(0,Ce.Z)(function*(n,e){var t;e&&lc(n).Xo&&(yield(t=(0,Ce.Z)(function*(r,o){if(C0(u=o.code)&&u!==ge.ABORTED){const c=r.du.shift();lc(r).Fo(),yield QN(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,o)),yield Im(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),JN(n)&&XN(n)})).apply(this,arguments)}function gA(n,e){return mA.apply(this,arguments)}function mA(){return(mA=(0,Ce.Z)(function*(n,e){const t=Ye(n);t.asyncQueue.verifyOperationInProgress(),Ue("RemoteStore","RemoteStore received new credentials");const r=Qd(t);t.wu.add(3),yield Yd(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield Jf(t)})).apply(this,arguments)}function _A(n,e){return yA.apply(this,arguments)}function yA(){return(yA=(0,Ce.Z)(function*(n,e){const t=Ye(n);e?(t.wu.delete(2),yield Jf(t)):e||(t.wu.add(2),yield Yd(t),t.yu.set("Unknown"))})).apply(this,arguments)}function Tm(n){return n.Iu||(n.Iu=function(e,t,r){const o=Ye(e);return o.iu(),new ZN(t,o.So,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Xr:jO.bind(null,n),eo:$O.bind(null,n),zo:HO.bind(null,n)}),n.mu.push(function(){var e=(0,Ce.Z)(function*(t){t?(n.Iu.Fo(),Cv(n)?fb(n):n.yu.set("Unknown")):(yield n.Iu.stop(),YN(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function lc(n){return n.Tu||(n.Tu=function(e,t,r){const o=Ye(e);return o.iu(),new sA(t,o.So,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Xr:eM.bind(null,n),eo:nM.bind(null,n),eu:tM.bind(null,n),tu:WO.bind(null,n)}),n.mu.push(function(){var e=(0,Ce.Z)(function*(t){t?(n.Tu.Fo(),yield Im(n)):(yield n.Tu.stop(),n.du.length>0&&(Ue("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class vA{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new yr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,o,u){const c=Date.now()+r,p=new vA(e,t,c,o,u);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Me(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ep(n,e){if(_r("AsyncQueue",`${e}: ${n}`),Hd(n))return new Me(ge.UNAVAILABLE,`${e}: ${n}`);throw n}class cc{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ze.comparator(t.key,r.key):(t,r)=>ze.comparator(t.key,r.key),this.keyedMap=Qy(),this.sortedSet=new cr(this.comparator)}static emptySet(e){return new cc(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof cc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new cc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Jd{constructor(){this.Eu=new cr(ze.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):it():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Xd{constructor(e,t,r,o,u,c,p,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=p,this.excludesMetadataChanges=y}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(c=>{u.push({type:0,doc:c})}),new Xd(e,t,cc.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class rM{constructor(){this.Ru=void 0,this.listeners=[]}}class iM{constructor(){this.queries=new Zu(e=>uD(e),lm),this.onlineState="Unknown",this.bu=new Set}}function Dm(n,e){return Iv.apply(this,arguments)}function Iv(){return(Iv=(0,Ce.Z)(function*(n,e){const t=Ye(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new rM),o)try{u.Ru=yield t.onListen(r)}catch(c){const p=ep(c,`Initialization of query '${_0(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,u),u.listeners.push(e),e.Pu(t.onlineState),u.Ru&&e.Vu(u.Ru)&&tp(t)})).apply(this,arguments)}function Tv(n,e){return Dv.apply(this,arguments)}function Dv(){return(Dv=(0,Ce.Z)(function*(n,e){const t=Ye(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)})).apply(this,arguments)}function ZO(n,e){const t=Ye(n);let r=!1;for(const o of e){const c=t.queries.get(o.query);if(c){for(const p of c.listeners)p.Vu(o)&&(r=!0);c.Ru=o}}r&&tp(t)}function EA(n,e,t){const r=Ye(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function tp(n){n.bu.forEach(e=>{e.next()})}class Av{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Xd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=Xd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class zO{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class sM{constructor(e){this.M=e}wi(e){return eu(this.M,e)}mi(e){return e.metadata.exists?ec(this.M,e.document,!1):Gn.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return Sn(e)}}class KO{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=wA(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=fn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new sM(this.M);for(const o of e)if(o.metadata.queries){const u=r.wi(o.metadata.name);for(const c of o.metadata.queries){const p=(t.get(c)||pn()).add(u);t.set(c,p)}}return t}complete(){var e=this;return(0,Ce.Z)(function*(){const t=yield function(n,e,t,r){return gv.apply(this,arguments)}(e.localStore,new sM(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const o of e.queries)yield HN(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function wA(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class oM{constructor(e){this.key=e}}class Am{constructor(e){this.key=e}}class bA{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=pn(),this.mutatedKeys=pn(),this.Gu=v0(e),this.Qu=new cc(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new Jd,o=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,c=o,p=!1;const y="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,w="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((D,S)=>{const P=o.get(D),B=Wy(this.query,S)?S:null,Y=!!P&&this.mutatedKeys.has(P.key),_e=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let xe=!1;P&&B?P.data.isEqual(B.data)?Y!==_e&&(r.track({type:3,doc:B}),xe=!0):this.Hu(P,B)||(r.track({type:2,doc:B}),xe=!0,(y&&this.Gu(B,y)>0||w&&this.Gu(B,w)<0)&&(p=!0)):!P&&B?(r.track({type:0,doc:B}),xe=!0):P&&!B&&(r.track({type:1,doc:P}),xe=!0,(y||w)&&(p=!0)),xe&&(B?(c=c.add(B),u=_e?u.add(D):u.delete(D)):(c=c.delete(D),u=u.delete(D)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const D="F"===this.query.limitType?c.last():c.first();c=c.delete(D.key),u=u.delete(D.key),r.track({type:1,doc:D})}return{Qu:c,zu:r,ii:p,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Au();u.sort((w,D)=>function(S,P){const B=Y=>{switch(Y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return it()}};return B(S)-B(P)}(w.type,D.type)||this.Gu(w.doc,D.doc)),this.Ju(r);const c=t?this.Yu():[],p=0===this.Ku.size&&this.current?1:0,y=p!==this.qu;return this.qu=p,0!==u.length||y?{snapshot:new Xd(this.query,e.Qu,o,u,e.mutatedKeys,0===p,y,!1),Xu:c}:{Xu:c}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Jd,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=pn(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new Am(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new oM(r))}),t}ta(e){this.Uu=e._i,this.Ku=pn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return Xd.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class YO{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class QO{constructor(e){this.key=e,this.na=!1}}class _b{constructor(e,t,r,o,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.sa={},this.ia=new Zu(p=>uD(p),lm),this.ra=new Map,this.oa=new Set,this.ua=new cr(ze.comparator),this.aa=new Map,this.ca=new nb,this.ha={},this.la=new Map,this.fa=qd.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function aM(n,e){return CA.apply(this,arguments)}function CA(){return(CA=(0,Ce.Z)(function*(n,e){const t=Mv(n);let r,o;const u=t.ia.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.ea();else{const c=yield Kd(t.localStore,Io(e));t.isPrimaryClient&&Cm(t.remoteStore,c);const p=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,o=yield IA(t,e,r,"current"===p)}return o})).apply(this,arguments)}function IA(n,e,t,r){return yb.apply(this,arguments)}function yb(){return(yb=(0,Ce.Z)(function*(n,e,t,r){n._a=(D,S,P)=>{return(B=(0,Ce.Z)(function*(Y,_e,xe,dt){let lt=_e.view.Wu(xe);lt.ii&&(lt=yield Em(Y.localStore,_e.query,!1).then(({documents:Bt})=>_e.view.Wu(Bt,lt)));const nt=dt&&dt.targetChanges.get(_e.targetId),st=_e.view.applyChanges(lt,Y.isPrimaryClient,nt);return xv(Y,_e.targetId,st.Xu),st.snapshot}),function(Y,_e,xe,dt){return B.apply(this,arguments)})(n,D,S,P);var B};const o=yield Em(n.localStore,e,!0),u=new bA(e,o._i),c=u.Wu(o.documents),p=Do.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),y=u.applyChanges(c,n.isPrimaryClient,p);xv(n,t,y.Xu);const w=new YO(e,t,u);return n.ia.set(e,w),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),y.snapshot})).apply(this,arguments)}function JO(n,e){return Sv.apply(this,arguments)}function Sv(){return(Sv=(0,Ce.Z)(function*(n,e){const t=Ye(n),r=t.ia.get(e),o=t.ra.get(r.targetId);if(o.length>1)return t.ra.set(r.targetId,o.filter(u=>!lm(u,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield zf(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Xf(t.remoteStore,r.targetId),dc(t,r.targetId)}).catch(Wd))):(dc(t,r.targetId),yield zf(t.localStore,r.targetId,!0))})).apply(this,arguments)}function TA(){return(TA=(0,Ce.Z)(function*(n,e,t){const r=Ab(n);try{const o=yield function(u,c){const p=Ye(u),y=vr.now(),w=c.reduce((S,P)=>S.add(P.key),pn());let D;return p.persistence.runTransaction("Locally write mutations","readwrite",S=>p.fi.Ks(S,w).next(P=>{D=P;const B=[];for(const Y of c){const _e=lN(Y,D.get(Y.key));null!=_e&&B.push(new Bs(Y.key,_e,eD(_e.value.mapValue),Mr.exists(!0)))}return p.Bs.addMutationBatch(S,y,B,c)})).then(S=>(S.applyToLocalDocumentSet(D),{batchId:S.batchId,changes:D}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,c,p){let y=u.ha[u.currentUser.toKey()];y||(y=new cr($t)),y=y.insert(c,p),u.ha[u.currentUser.toKey()]=y}(r,o.batchId,t),yield su(r,o.changes),yield Im(r.remoteStore)}catch(o){const u=ep(o,"Failed to persist write");t.reject(u)}})).apply(this,arguments)}function lM(n,e){return vb.apply(this,arguments)}function vb(){return(vb=(0,Ce.Z)(function*(n,e){const t=Ye(n);try{const r=yield jN(t.localStore,e);e.targetChanges.forEach((o,u)=>{const c=t.aa.get(u);c&&(Rt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?c.na=!0:o.modifiedDocuments.size>0?Rt(c.na):o.removedDocuments.size>0&&(Rt(c.na),c.na=!1))}),yield su(t,r,e)}catch(r){yield Wd(r)}})).apply(this,arguments)}function np(n,e,t){const r=Ye(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ia.forEach((u,c)=>{const p=c.view.Pu(e);p.snapshot&&o.push(p.snapshot)}),function(u,c){const p=Ye(u);p.onlineState=c;let y=!1;p.queries.forEach((w,D)=>{for(const S of D.listeners)S.Pu(c)&&(y=!0)}),y&&tp(p)}(r.eventManager,e),o.length&&r.sa.zo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function cM(n,e,t){return Eb.apply(this,arguments)}function Eb(){return(Eb=(0,Ce.Z)(function*(n,e,t){const r=Ye(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.aa.get(e),u=o&&o.key;if(u){let c=new cr(ze.comparator);c=c.insert(u,Gn.newNoDocument(u,It.min()));const p=pn().add(u),y=new ln(It.min(),new Map,new Bn($t),c,p);yield lM(r,y),r.ua=r.ua.remove(u),r.aa.delete(e),Rv(r)}else yield zf(r.localStore,e,!1).then(()=>dc(r,e,t)).catch(Wd)})).apply(this,arguments)}function dM(n,e){return Sm.apply(this,arguments)}function Sm(){return(Sm=(0,Ce.Z)(function*(n,e){const t=Ye(n),r=e.batch.batchId;try{const o=yield BN(t.localStore,e);bb(t,r,null),wb(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield su(t,o)}catch(o){yield Wd(o)}})).apply(this,arguments)}function hM(n,e,t){return os.apply(this,arguments)}function os(){return(os=(0,Ce.Z)(function*(n,e,t){const r=Ye(n);try{const o=yield function(u,c){const p=Ye(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let w;return p.Bs.lookupMutationBatch(y,c).next(D=>(Rt(null!==D),w=D.keys(),p.Bs.removeMutationBatch(y,D))).next(()=>p.Bs.performConsistencyCheck(y)).next(()=>p.fi.Ks(y,w))})}(r.localStore,e);bb(r,e,t),wb(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield su(r,o)}catch(o){yield Wd(o)}})).apply(this,arguments)}function xm(){return(xm=(0,Ce.Z)(function*(n,e){const t=Ye(n);Qd(t.remoteStore)||Ue("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=Ye(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>c.Bs.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const o=t.la.get(r)||[];o.push(e),t.la.set(r,o)}catch(r){const o=ep(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}})).apply(this,arguments)}function wb(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function bb(n,e,t){const r=Ye(n);let o=r.ha[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.ha[r.currentUser.toKey()]=o}}function dc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||Cb(n,r)})}function Cb(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(Xf(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),Rv(n))}function xv(n,e,t){for(const r of t)r instanceof oM?(n.ca.addReference(r.key,e),pM(n,r)):r instanceof Am?(Ue("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||Cb(n,r.key)):it()}function pM(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||(Ue("SyncEngine","New document in limbo: "+t),n.oa.add(r),Rv(n))}function Rv(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new ze(fn.fromString(e)),r=n.fa.next();n.aa.set(r,new QO(t)),n.ua=n.ua.insert(t,r),Cm(n.remoteStore,new nc(Io(Nf(t.path)),r,2,Di.A))}}function su(n,e,t){return Ib.apply(this,arguments)}function Ib(){return(Ib=(0,Ce.Z)(function*(n,e,t){const r=Ye(n),o=[],u=[],c=[];var p;r.ia.isEmpty()||(r.ia.forEach((p,y)=>{c.push(r._a(y,e,t).then(w=>{if(w){r.isPrimaryClient&&r.sharedClientState.updateQueryState(y.targetId,w.fromCache?"not-current":"current"),o.push(w);const D=vm.Ys(y.targetId,w);u.push(D)}}))}),yield Promise.all(c),r.sa.zo(o),yield(p=(0,Ce.Z)(function*(y,w){const D=Ye(y);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>me.forEach(w,P=>me.forEach(P.Hs,B=>D.persistence.referenceDelegate.addReference(S,P.targetId,B)).next(()=>me.forEach(P.Js,B=>D.persistence.referenceDelegate.removeReference(S,P.targetId,B)))))}catch(S){if(!Hd(S))throw S;Ue("LocalStore","Failed to update sequence numbers: "+S)}for(const S of w){const P=S.targetId;if(!S.fromCache){const B=D.ui.get(P),_e=B.withLastLimboFreeSnapshotVersion(B.snapshotVersion);D.ui=D.ui.insert(P,_e)}}}),function(y,w){return p.apply(this,arguments)})(r.localStore,u))})).apply(this,arguments)}function gM(n,e){return Rm.apply(this,arguments)}function Rm(){return(Rm=(0,Ce.Z)(function*(n,e){const t=Ye(n);if(!t.currentUser.isEqual(e)){Ue("SyncEngine","User change. New user:",e.toKey());const r=yield fv(t.localStore,e);t.currentUser=e,(o=t).la.forEach(c=>{c.forEach(p=>{p.reject(new Me(ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield su(t,r.di)}var o})).apply(this,arguments)}function DA(n,e){const t=Ye(n),r=t.aa.get(e);if(r&&r.na)return pn().add(r.key);{let o=pn();const u=t.ra.get(e);if(!u)return o;for(const c of u){const p=t.ia.get(c);o=o.unionWith(p.view.ju)}return o}}function AA(n,e){return Nm.apply(this,arguments)}function Nm(){return(Nm=(0,Ce.Z)(function*(n,e){const t=Ye(n),r=yield Em(t.localStore,e.query,!0),o=e.view.ta(r);return t.isPrimaryClient&&xv(t,e.targetId,o.Xu),o})).apply(this,arguments)}function mM(n,e){return $s.apply(this,arguments)}function $s(){return($s=(0,Ce.Z)(function*(n,e){const t=Ye(n);return eb(t.localStore,e).then(r=>su(t,r))})).apply(this,arguments)}function _M(n,e,t,r){return SA.apply(this,arguments)}function SA(){return(SA=(0,Ce.Z)(function*(n,e,t,r){const o=Ye(n),u=yield function(c,p){const y=Ye(c),w=Ye(y.Bs);return y.persistence.runTransaction("Lookup mutation documents","readonly",D=>w.fn(D,p).next(S=>S?y.fi.Ks(D,S):me.resolve(null)))}(o.localStore,e);var p;null!==u?("pending"===t?yield Im(o.remoteStore):"acknowledged"===t||"rejected"===t?(bb(o,e,r||null),wb(o,e),p=e,Ye(Ye(o.localStore).Bs)._n(p)):it(),yield su(o,u)):Ue("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function xA(){return(xA=(0,Ce.Z)(function*(n,e){const t=Ye(n);if(Mv(t),Ab(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield RA(t,r.toArray());t.da=!0,yield _A(t.remoteStore,!0);for(const u of o)Cm(t.remoteStore,u)}else if(!1===e&&!1!==t.da){const r=[];let o=Promise.resolve();t.ra.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):o=o.then(()=>(dc(t,c),zf(t.localStore,c,!0))),Xf(t.remoteStore,c)}),yield o,yield RA(t,r),function(u){const c=Ye(u);c.aa.forEach((p,y)=>{Xf(c.remoteStore,y)}),c.ca.Si(),c.aa=new Map,c.ua=new cr(ze.comparator)}(t),t.da=!1,yield _A(t.remoteStore,!1)}})).apply(this,arguments)}function RA(n,e,t){return Tb.apply(this,arguments)}function Tb(){return(Tb=(0,Ce.Z)(function*(n,e,t){const r=Ye(n),o=[],u=[];for(const c of e){let p;const y=r.ra.get(c);if(y&&0!==y.length){p=yield Kd(r.localStore,Io(y[0]));for(const w of y){const D=r.ia.get(w),S=yield AA(r,D);S.snapshot&&u.push(S.snapshot)}}else{const w=yield XD(r.localStore,c);p=yield Kd(r.localStore,w),yield IA(r,NA(w),c,!1)}o.push(p)}return r.sa.zo(u),o})).apply(this,arguments)}function NA(n){return aD(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function XO(n){const e=Ye(n);return Ye(Ye(e.localStore).persistence).Fs()}function vM(n,e,t,r){return Nv.apply(this,arguments)}function Nv(){return(Nv=(0,Ce.Z)(function*(n,e,t,r){const o=Ye(n);if(o.da)return void Ue("SyncEngine","Ignoring unexpected query state notification.");const u=o.ra.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield eb(o.localStore,y0(u[0])),p=ln.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield su(o,c,p);break}case"rejected":yield zf(o.localStore,e,!0),dc(o,e,r);break;default:it()}})).apply(this,arguments)}function EM(n,e,t){return Db.apply(this,arguments)}function Db(){return(Db=(0,Ce.Z)(function*(n,e,t){const r=Mv(n);if(r.da){for(const o of e){if(r.ra.has(o)){Ue("SyncEngine","Adding an already active target "+o);continue}const u=yield XD(r.localStore,o),c=yield Kd(r.localStore,u);yield IA(r,NA(u),c.targetId,!1),Cm(r.remoteStore,c)}for(const o of t)r.ra.has(o)&&(yield zf(r.localStore,o,!1).then(()=>{Xf(r.remoteStore,o),dc(r,o)}).catch(Wd))}})).apply(this,arguments)}function Mv(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=lM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=DA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cM.bind(null,e),e.sa.zo=ZO.bind(null,e.eventManager),e.sa.wa=EA.bind(null,e.eventManager),e}function Ab(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hM.bind(null,e),e}class Sb{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ce.Z)(function*(){t.M=Qf(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return hv(this.persistence,new dv,e.initialUser,this.M)}ya(e){return new qN(ib.Yi,this.M)}ga(e){return new ob}terminate(){var e=this;return(0,Ce.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class xb extends Sb{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ce.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield Ab(r.Ta.syncEngine),yield Im(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return hv(this.persistence,new dv,e.initialUser,this.M)}pa(e){return new WD(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=Y0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?js.withCacheSize(this.cacheSizeBytes):js.DEFAULT;return new K0(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,iA(),Ev(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new ob}}class wM extends xb{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ce.Z)(function*(){yield t().call(r,e);const o=r.Ta.syncEngine;r.sharedClientState instanceof sb&&(r.sharedClientState.syncEngine={$r:_M.bind(null,o),Br:vM.bind(null,o),Lr:EM.bind(null,o),Fs:XO.bind(null,o),Fr:mM.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,Ce.Z)(function*(c){yield function(n,e){return xA.apply(this,arguments)}(r.Ta.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):c||r.gcScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}ga(e){const t=iA();if(!sb.vt(t))throw new Me(ge.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Y0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new sb(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Rb{initialize(e,t){var r=this;return(0,Ce.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>np(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=gM.bind(null,r.syncEngine),yield _A(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new iM}createDatastore(e){const t=Qf(e.databaseInfo.databaseId),r=new lb(e.databaseInfo);return new oA(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=p=>np(this.syncEngine,p,0),c=ab.vt()?new ab:new vv,new KN(t,r,o,u,c);var t,r,o,u,c}createSyncEngine(e,t){return function(r,o,u,c,p,y,w){const D=new _b(r,o,u,c,p,y);return w&&(D.da=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ce.Z)(function*(t){const r=Ye(t);Ue("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield Yd(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Nb(n,e=10240){let t=0;return{read:()=>(0,Ce.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ce.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class hc{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Mb{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new yr,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,Ce.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,Ce.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),o=Number(r);isNaN(o)&&e.va(`length string (${r}) is not valid number`);const u=yield e.Sa(o);return new zO(JSON.parse(u),t.length+o)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,Ce.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,Ce.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class MA{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ce.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Me(ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,Ce.Z)(function*(u,c){const p=Ye(u),y=tu(p.M)+"/documents",w={documents:c.map(B=>Ff(p.M,B))},D=yield p._o("BatchGetDocuments",y,w),S=new Map;D.forEach(B=>{const Y=function(n,e){return"found"in e?function(t,r){Rt(!!r.found);const o=eu(t,r.found.name),u=Sn(r.found.updateTime),c=new Bi({mapValue:{fields:r.found.fields}});return Gn.newFoundDocument(o,u,c)}(n,e):"missing"in e?function(t,r){Rt(!!r.missing),Rt(!!r.readTime);const o=eu(t,r.missing),u=Sn(r.readTime);return Gn.newNoDocument(o,u)}(n,e):it()}(p.M,B);S.set(Y.key.toString(),Y)});const P=[];return c.forEach(B=>{const Y=S.get(B.toString());Rt(!!Y),P.push(Y)}),P}),function(u,c){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new fm(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ce.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=ze.fromPath(o);e.mutations.push(new Pf(u,e.precondition(u)))}),yield(r=(0,Ce.Z)(function*(o,u){const c=Ye(o),p=tu(c.M)+"/documents",y={writes:u.map(w=>Bd(c.M,w))};yield c.co("Commit",p,y)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw it();t=It.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Me(ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Mr.updateTime(t):Mr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(It.min()))throw new Me(ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Mr.updateTime(t)}return Mr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class bM{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.xa=r.maxAttempts,this.No=new wv(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,Ce.Z)(function*(){const t=new MA(e.datastore),r=e.ka(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Ma(u)}))}).catch(o=>{e.Ma(o)})}))}ka(e){try{const t=this.updateFunction(e);return!em(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!C0(t)}return!1}}class CM{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Ti.UNAUTHENTICATED,this.clientId=ZT.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,Ce.Z)(function*(p){Ue("FirestoreClient","Received user=",p.uid),yield u.authCredentialListener(p),u.user=p});return function(p){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Ue("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,Ce.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Me(ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new yr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=ep(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function IM(n,e){return kA.apply(this,arguments)}function kA(){return(kA=(0,Ce.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ue("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,Ce.Z)(function*(u){r.isEqual(u)||(yield fv(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e})).apply(this,arguments)}function TM(n,e){return kv.apply(this,arguments)}function kv(){return(kv=(0,Ce.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Pv(n);Ue("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>gA(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>gA(e.remoteStore,u)),n.onlineComponents=e})).apply(this,arguments)}function Pv(n){return kb.apply(this,arguments)}function kb(){return(kb=(0,Ce.Z)(function*(n){return n.offlineComponents||(Ue("FirestoreClient","Using default OfflineComponentProvider"),yield IM(n,new Sb)),n.offlineComponents})).apply(this,arguments)}function Ov(n){return Pb.apply(this,arguments)}function Pb(){return(Pb=(0,Ce.Z)(function*(n){return n.onlineComponents||(Ue("FirestoreClient","Using default OnlineComponentProvider"),yield TM(n,new Rb)),n.onlineComponents})).apply(this,arguments)}function PA(n){return Pv(n).then(e=>e.persistence)}function Fv(n){return Pv(n).then(e=>e.localStore)}function DM(n){return Ov(n).then(e=>e.remoteStore)}function OA(n){return Ov(n).then(e=>e.syncEngine)}function rp(n){return Mm.apply(this,arguments)}function Mm(){return(Mm=(0,Ce.Z)(function*(n){const e=yield Ov(n),t=e.eventManager;return t.onListen=aM.bind(null,e.syncEngine),t.onUnlisten=JO.bind(null,e.syncEngine),t})).apply(this,arguments)}function Ob(n,e,t={}){const r=new yr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(o,u,c,p,y){const w=new hc({next:S=>{u.enqueueAndForget(()=>Tv(o,D));const P=S.docs.has(c);!P&&S.fromCache?y.reject(new Me(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&S.fromCache&&p&&"server"===p.source?y.reject(new Me(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(S)},error:S=>y.reject(S)}),D=new Av(Nf(c.path),w,{includeMetadataChanges:!0,ku:!0});return Dm(o,D)}(yield rp(n),n.asyncQueue,e,t,r)})),r.promise}function km(n,e,t={}){const r=new yr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(o,u,c,p,y){const w=new hc({next:S=>{u.enqueueAndForget(()=>Tv(o,D)),S.fromCache&&"server"===p.source?y.reject(new Me(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(S)},error:S=>y.reject(S)}),D=new Av(c,w,{includeMetadataChanges:!0,ku:!0});return Dm(o,D)}(yield rp(n),n.asyncQueue,e,t,r)})),r.promise}const Fb=new Map;function Pm(n,e,t){if(!t)throw new Me(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Lv(n,e,t,r){if(!0===e&&!0===r)throw new Me(ge.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function VA(n){if(!ze.isDocumentKey(n))throw new Me(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Om(n){if(ze.isDocumentKey(n))throw new Me(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Vv(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":it()}function Xt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Me(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Vv(n);throw new Me(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Lb(n,e){if(e<=0)throw new Me(ge.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class Gr{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Me(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Me(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Lv("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Uv{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gr({}),this._settingsFrozen=!1,e instanceof Ya?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Me(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ya(o.options.projectId)}(e))}get app(){if(!this._app)throw new Me(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Me(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gr(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new GR;switch(t.type){case"gapi":const r=t.client;return Rt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new WT(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Me(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Fb.get(e);t&&(Ue("ComponentProvider","Removing Datastore"),Fb.delete(e),t.terminate())}(this),Promise.resolve()}}class Wn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wn(this.firestore,e,this._key)}}class as{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new as(this.firestore,e,this._query)}}class Hs extends as{constructor(e,t,r){super(e,t,Nf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wn(this.firestore,null,new ze(e))}withConverter(e){return new Hs(this.firestore,e,this._path)}}function UA(n,e,...t){if(n=(0,F.m9)(n),Pm("collection","path",e),n instanceof Uv){const r=fn.fromString(e,...t);return Om(r),new Hs(n,null,r)}{if(!(n instanceof Wn||n instanceof Hs))throw new Me(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(fn.fromString(e,...t));return Om(r),new Hs(n.firestore,null,r)}}function Vb(n,e,...t){if(n=(0,F.m9)(n),1===arguments.length&&(e=ZT.R()),Pm("doc","path",e),n instanceof Uv){const r=fn.fromString(e,...t);return VA(r),new Wn(n,null,new ze(r))}{if(!(n instanceof Wn||n instanceof Hs))throw new Me(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(fn.fromString(e,...t));return VA(r),new Wn(n.firestore,n instanceof Hs?n.converter:null,new ze(r))}}function NM(n,e){return n=(0,F.m9)(n),e=(0,F.m9)(e),(n instanceof Wn||n instanceof Hs)&&(e instanceof Wn||e instanceof Hs)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function BA(n,e){return n=(0,F.m9)(n),e=(0,F.m9)(e),n instanceof as&&e instanceof as&&n.firestore===e.firestore&&lm(n._query,e._query)&&n.converter===e.converter}class MM{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new wv(this,"async_queue_retry"),this.Qa=()=>{const t=Ev();t&&Ue("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=Ev();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=Ev();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new yr;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,Ce.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!Hd(t))throw t;Ue("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,_r("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const o=vA.createAndSchedule(this,e,t,r,u=>this.Ha(u));return this.La.push(o),o}ja(){this.Ua&&it()}verifyOperationInProgress(){}Ja(){var e=this;return(0,Ce.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function Ub(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class kM{constructor(){this._progressObserver={},this._taskCompletionResolver=new yr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class dr extends Uv{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new MM,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||OM(this),this._firestoreClient.terminate()}}function Pr(n){return n._firestoreClient||OM(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function OM(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new KR(n._databaseId,u,n._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));var u,p;n._firestoreClient=new CM(n._authCredentials,n._appCheckCredentials,n._queue,r)}function jA(n,e,t){const r=new yr;return n.asyncQueue.enqueue((0,Ce.Z)(function*(){try{yield IM(n,t),yield TM(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(u=o).name?u.code===ge.FAILED_PRECONDITION||u.code===ge.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var u})).then(()=>r.promise)}function $A(n){if(n._initialized||n._terminated)throw new Me(ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class fc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Me(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ii(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ou{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ou($r.fromBase64String(e))}catch(t){throw new Me(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ou($r.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class th{constructor(e){this._methodName=e}}class pc{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Me(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Me(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $t(this._lat,e._lat)||$t(this._long,e._long)}}const HA=/^__.*__$/;class u1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Bs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ql(e,this.data,t,this.fieldTransforms)}}class GA{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Bs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function $M(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw it()}}class Bb{constructor(e,t,r,o,u,c){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=o,void 0===u&&this.tc(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new Bb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.nc({path:r,ic:!1});return o.rc(e),o}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.nc({path:r,ic:!1});return o.tc(),o}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return rh(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if($M(this.ec)&&HA.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class l1{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||Qf(e)}lc(e,t,r,o=!1){return new Bb({ec:e,methodName:t,hc:r,path:ii.emptyPath(),ic:!1,cc:o},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Qu(n){const e=n._freezeSettings(),t=Qf(n._databaseId);return new l1(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Bv(n,e,t,r,o,u={}){const c=n.lc(u.merge||u.mergeFields?2:0,e,t,o);jv("Data must be an object, but it was:",c,r);const p=$b(r,c);let y,w;if(u.merge)y=new Rd(c.fieldMask),w=c.fieldTransforms;else if(u.mergeFields){const D=[];for(const S of u.mergeFields){const P=Lm(e,S,t);if(!c.contains(P))throw new Me(ge.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);Vm(D,P)||D.push(P)}y=new Rd(D),w=c.fieldTransforms.filter(S=>y.covers(S.field))}else y=null,w=c.fieldTransforms;return new u1(new Bi(p),y,w)}class Fm extends th{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Fm}}function qA(n,e,t){return new Bb({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class WA extends th{_toFieldTransform(e){return new hm(e.path,new Xa)}isEqual(e){return e instanceof WA}}class HM extends th{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=qA(this,e,!0),r=this.fc.map(u=>nh(u,t)),o=new Vd(r);return new hm(e.path,o)}isEqual(e){return this===e}}class GM extends th{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=qA(this,e,!0),r=this.fc.map(u=>nh(u,t)),o=new Mf(r);return new hm(e.path,o)}isEqual(e){return this===e}}class qM extends th{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new kf(e.M,cm(e.M,this.dc));return new hm(e.path,t)}isEqual(e){return this===e}}function Gs(n,e,t,r){const o=n.lc(1,e,t);jv("Data must be an object, but it was:",o,r);const u=[],c=Bi.empty();xd(r,(y,w)=>{const D=ip(e,y,t);w=(0,F.m9)(w);const S=o.oc(D);if(w instanceof Fm)u.push(D);else{const P=nh(w,S);null!=P&&(u.push(D),c.set(D,P))}});const p=new Rd(u);return new GA(c,p,o.fieldTransforms)}function ZA(n,e,t,r,o,u){const c=n.lc(1,e,t),p=[Lm(e,r,t)],y=[o];if(u.length%2!=0)throw new Me(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<u.length;P+=2)p.push(Lm(e,u[P])),y.push(u[P+1]);const w=[],D=Bi.empty();for(let P=p.length-1;P>=0;--P)if(!Vm(w,p[P])){const B=p[P];let Y=y[P];Y=(0,F.m9)(Y);const _e=c.oc(B);if(Y instanceof Fm)w.push(B);else{const xe=nh(Y,_e);null!=xe&&(w.push(B),D.set(B,xe))}}const S=new Rd(w);return new GA(D,S,c.fieldTransforms)}function jb(n,e,t,r=!1){return nh(t,n.lc(r?4:3,e))}function nh(n,e){if(Hb(n=(0,F.m9)(n)))return jv("Unsupported field value:",e,n),$b(n,e);if(n instanceof th)return function(t,r){if(!$M(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const c of t){let p=nh(c,r.uc(u));null==p&&(p={nullValue:"NULL_VALUE"}),o.push(p),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,F.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return cm(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=vr.fromDate(t);return{timestampValue:ev(r.M,o)}}if(t instanceof vr){const o=new vr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ev(r.M,o)}}if(t instanceof pc)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ou)return{bytesValue:bD(r.M,t._byteString)};if(t instanceof Wn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.ac(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:qn(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${Vv(t)}`)}(n,e)}function $b(n,e){const t={};return zT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xd(n,(r,o)=>{const u=nh(o,e.sc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function Hb(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof vr||n instanceof pc||n instanceof ou||n instanceof Wn||n instanceof th)}function jv(n,e,t){if(!Hb(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Vv(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function Lm(n,e,t){if((e=(0,F.m9)(e))instanceof fc)return e._internalPath;if("string"==typeof e)return ip(n,e);throw rh("Field path arguments must be of type string or ",n,!1,void 0,t)}const Gb=new RegExp("[~\\*/\\[\\]]");function ip(n,e,t){if(e.search(Gb)>=0)throw rh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new fc(...e.split("."))._internalPath}catch(r){throw rh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function rh(n,e,t,r,o){const u=r&&!r.isEmpty(),c=void 0!==o;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let y="";return(u||c)&&(y+=" (found",u&&(y+=` in field ${r}`),c&&(y+=` in document ${o}`),y+=")"),new Me(ge.INVALID_ARGUMENT,p+n+y)}function Vm(n,e){return n.some(t=>t.isEqual(e))}class sp{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Wn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new zA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field($v("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class zA extends sp{data(){return super.data()}}function $v(n,e){return"string"==typeof e?ip(n,e):e instanceof fc?e._internalPath:e._delegate._internalPath}class ih{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class au extends sp{constructor(e,t,r,o,u,c){super(e,t,r,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Um(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field($v("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Um extends au{data(e={}){return super.data(e)}}class gc{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new ih(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Um(this._firestore,this._userDataWriter,r.key,r,new ih(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Me(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new Um(r._firestore,r._userDataWriter,c.doc.key,c.doc,new ih(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>o||3!==c.type).map(c=>{const p=new Um(r._firestore,r._userDataWriter,c.doc.key,c.doc,new ih(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let y=-1,w=-1;return 0!==c.type&&(y=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),w=u.indexOf(c.doc.key)),{type:WM(c.type),doc:p,oldIndex:y,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function WM(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return it()}}function Hv(n,e){return n instanceof au&&e instanceof au?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof gc&&e instanceof gc&&n._firestore===e._firestore&&BA(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function KA(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Me(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qr{}function No(n,...e){for(const t of e)n=t._apply(n);return n}class Gv extends qr{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=Qu(e.firestore),r=function(o,u,c,p,y,w,D){let S;if(y.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Me(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){op(D,w);const B=[];for(const Y of D)B.push(Ju(p,o,Y));S={arrayValue:{values:B}}}else S=Ju(p,o,D)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||op(D,w),S=jb(c,"where",D,"in"===w||"not-in"===w);const P=ji.create(y,w,S);return function(B,Y){if(Y.S()){const xe=qy(B);if(null!==xe&&!xe.isEqual(Y.field))throw new Me(ge.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${xe.toString()}' and '${Y.field.toString()}'`);const dt=am(B);null!==dt&&Zv(0,Y.field,dt)}const _e=function(xe,dt){for(const lt of xe.filters)if(dt.indexOf(lt.op)>=0)return lt.op;return null}(B,function(xe){switch(xe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Y.op));if(null!==_e)throw new Me(ge.INVALID_ARGUMENT,_e===Y.op?`Invalid query. You cannot use more than one '${Y.op.toString()}' filter.`:`Invalid query. You cannot use '${Y.op.toString()}' filters with '${_e.toString()}' filters.`)}(o,P),P}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new as(e.firestore,e.converter,function(o,u){const c=o.filters.concat([u]);return new Yl(o.path,o.collectionGroup,o.explicitOrderBy.slice(),c,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class qv extends qr{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Me(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Me(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new om(o,u);return function(p,y){if(null===am(p)){const w=qy(p);null!==w&&Zv(0,w,y.field)}}(r,c),c}(e._query,this._c,this.gc);return new as(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new Yl(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class Wb extends qr{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new as(e.firestore,e.converter,iN(e._query,this.yc,this.Ic))}}class QA extends qr{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=JA(e,this.type,this.Tc,this.Ec);return new as(e.firestore,e.converter,(o=t,new Yl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class Zb extends qr{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=JA(e,this.type,this.Tc,this.Ec);return new as(e.firestore,e.converter,(o=t,new Yl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function JA(n,e,t,r){if(t[0]=(0,F.m9)(t[0]),t[0]instanceof sp)return function(o,u,c,p,y){if(!p)throw new Me(ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const w=[];for(const D of Ld(o))if(D.field.isKeyField())w.push(zl(u,p.key));else{const S=p.data.field(D.field);if(h0(S))throw new Me(ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const P=D.field.canonicalString();throw new Me(ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${P}' (used as the orderBy) does not exist.`)}w.push(S)}return new Wu(w,y)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Qu(n.firestore);return function(u,c,p,y,w,D){const S=u.explicitOrderBy;if(w.length>S.length)throw new Me(ge.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const P=[];for(let B=0;B<w.length;B++){const Y=w[B];if(S[B].field.isKeyField()){if("string"!=typeof Y)throw new Me(ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof Y}`);if(!um(u)&&-1!==Y.indexOf("/"))throw new Me(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${Y}' contains a slash.`);const _e=u.path.child(fn.fromString(Y));if(!ze.isDocumentKey(_e))throw new Me(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${_e}' is not because it contains an odd number of segments.`);const xe=new ze(_e);P.push(zl(c,xe))}else{const _e=jb(p,y,Y);P.push(_e)}}return new Wu(P,D)}(n._query,n.firestore._databaseId,o,e,t,r)}}function Ju(n,e,t){if("string"==typeof(t=(0,F.m9)(t))){if(""===t)throw new Me(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!um(e)&&-1!==t.indexOf("/"))throw new Me(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(fn.fromString(t));if(!ze.isDocumentKey(r))throw new Me(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return zl(n,new ze(r))}if(t instanceof Wn)return zl(n,t._key);throw new Me(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vv(t)}.`)}function op(n,e){if(!Array.isArray(n)||0===n.length)throw new Me(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Me(ge.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Zv(n,e,t){if(!t.isEqual(e))throw new Me(ge.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const JM={maxAttempts:5};class zb{convertValue(e,t="none"){switch(Wl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Un(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Nd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw it()}}convertObject(e,t){const r={};return xd(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new pc(Un(e.latitude),Un(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=KT(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Xg(e));default:return null}}convertTimestamp(e){const t=Gu(e);return new vr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=fn.fromString(e);Rt(mN(r));const o=new Ya(r.get(1),r.get(3)),u=new ze(r.popFirst(5));return o.isEqual(t)||_r(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function zv(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Kb extends zb{constructor(e){super(),this.firestore=e}convertBytes(e){return new ou(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wn(this.firestore,null,t)}}class XA{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Qu(e)}set(e,t,r){this._verifyNotCommitted();const o=Xu(e,this._firestore),u=zv(o.converter,t,r),c=Bv(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(c.toMutation(o._key,Mr.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=Xu(e,this._firestore);let c;return c="string"==typeof(t=(0,F.m9)(t))||t instanceof fc?ZA(this._dataReader,"WriteBatch.update",u._key,t,r,o):Gs(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,Mr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Xu(e,this._firestore);return this._mutations=this._mutations.concat(new fm(t._key,Mr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Me(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Xu(n,e){if((n=(0,F.m9)(n)).firestore!==e)throw new Me(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class sh extends zb{constructor(e){super(),this.firestore=e}convertBytes(e){return new ou(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wn(this.firestore,null,t)}}function jm(n,e,t){n=Xt(n,Wn);const r=Xt(n.firestore,dr),o=zv(n.converter,e,t);return ah(r,[Bv(Qu(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Mr.none())])}function oh(n,e,t,...r){n=Xt(n,Wn);const o=Xt(n.firestore,dr),u=Qu(o);let c;return c="string"==typeof(e=(0,F.m9)(e))||e instanceof fc?ZA(u,"updateDoc",n._key,e,t,r):Gs(u,"updateDoc",n._key,e),ah(o,[c.toMutation(n._key,Mr.exists(!0))])}function tS(n,...e){var t,r,o;n=(0,F.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||Ub(e[c])||(u=e[c],c++);const p={includeMetadataChanges:u.includeMetadataChanges};if(Ub(e[c])){const S=e[c];e[c]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[c+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[c+2]=null===(o=S.complete)||void 0===o?void 0:o.bind(S)}let y,w,D;if(n instanceof Wn)w=Xt(n.firestore,dr),D=Nf(n._key.path),y={next:S=>{e[c]&&e[c](Kv(w,n,S))},error:e[c+1],complete:e[c+2]};else{const S=Xt(n,as);w=Xt(S.firestore,dr),D=S._query;const P=new sh(w);y={next:B=>{e[c]&&e[c](new gc(w,P,S,B))},error:e[c+1],complete:e[c+2]},KA(n._query)}return function(S,P,B,Y){const _e=new hc(Y),xe=new Av(P,_e,B);return S.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return Dm(yield rp(S),xe)})),()=>{_e.Aa(),S.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return Tv(yield rp(S),xe)}))}}(Pr(w),D,p,y)}function ah(n,e){return function(t,r){const o=new yr;return t.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(n,e,t){return TA.apply(this,arguments)}(yield OA(t),r,o)})),o.promise}(Pr(n),e)}function Kv(n,e,t){const r=t.docs.get(e._key),o=new sh(n);return new au(n,o,e._key,r,new ih(t.hasPendingWrites,t.fromCache),e.converter)}class rS extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Qu(e)}get(e){const t=Xu(e,this._firestore),r=new Kb(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return it();const u=o[0];if(u.isFoundDocument())return new sp(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new sp(this._firestore,r,t._key,null,t.converter);throw it()})}set(e,t,r){const o=Xu(e,this._firestore),u=zv(o.converter,t,r),c=Bv(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,c),this}update(e,t,r,...o){const u=Xu(e,this._firestore);let c;return c="string"==typeof(t=(0,F.m9)(t))||t instanceof fc?ZA(this._dataReader,"Transaction.update",u._key,t,r,o):Gs(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=Xu(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Xu(e,this._firestore),r=new sh(this._firestore);return super.get(e).then(o=>new au(this._firestore,r,t._key,o._document,new ih(!1,!1),t.converter))}}function sS(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Me("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function oS(){if("undefined"==typeof Uint8Array)throw new Me("unimplemented","Uint8Arrays are not available in this environment.")}function aS(){if("undefined"==typeof atob)throw new Me("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Hu=Li.SDK_VERSION,(0,Li._registerComponent)(new wo.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new dr(o,new Ny(t.getProvider("auth-internal")),new WR(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,Li.registerVersion)(Qg,"3.4.9",n),(0,Li.registerVersion)(Qg,"3.4.9","esm2017")}();class Yv{constructor(e){this._delegate=e}static fromBase64String(e){return aS(),new Yv(ou.fromBase64String(e))}static fromUint8Array(e){return oS(),new Yv(ou.fromUint8Array(e))}toBase64(){return aS(),this._delegate.toBase64()}toUint8Array(){return oS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function uS(n){return function(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of["next","error","complete"])if(r in t&&"function"==typeof t[r])return!0;return!1}(n)}class g1{enableIndexedDbPersistence(e,t){return function(n,e){$A(n=Xt(n,dr));const t=Pr(n),r=n._freezeSettings(),o=new Rb;return jA(t,o,new xb(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(n){$A(n=Xt(n,dr));const e=Pr(n),t=n._freezeSettings(),r=new Rb;return jA(e,r,new wM(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(n){if(n._initialized&&!n._terminated)throw new Me(ge.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new yr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{yield(t=(0,Ce.Z)(function*(r){if(!da.vt())return Promise.resolve();const o=r+"main";yield da.delete(o)}),function(r){return t.apply(this,arguments)})(Y0(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class lS{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ya||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Jg("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function(n,e,t,r={}){var o;const u=(n=Xt(n,Uv))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Jg("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,p;if("string"==typeof r.mockUserToken)c=r.mockUserToken,p=Ti.MOCK_USER;else{c=(0,F.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Me(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Ti(y)}n._authCredentials=new qR(new GT(c,p))}}(this._delegate,e,t,r)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){const e=yield PA(n),t=yield DM(n);return e.setNetworkEnabled(!0),function(r){const o=Ye(r);return o.wu.delete(0),Jf(o)}(t)}))}(Pr(n=Xt(n,dr)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){const e=yield PA(n),t=yield DM(n);return e.setNetworkEnabled(!1),(r=(0,Ce.Z)(function*(o){const u=Ye(o);u.wu.add(0),yield Yd(u),u.yu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Pr(n=Xt(n,dr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Lv("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(e){const t=new yr;return e.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(n,e){return xm.apply(this,arguments)}(yield OA(e),t)})),t.promise}(Pr(n=Xt(n,dr)))}(this._delegate)}onSnapshotsInSync(e){return function(n,e){return function(n,e){const t=new hc(e);return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return r=yield rp(n),o=t,Ye(r).bu.add(o),void o.next();var r,o})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return r=yield rp(n),o=t,void Ye(r).bu.delete(o);var r,o}))}}(Pr(n=Xt(n,dr)),Ub(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Me("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new x(this,UA(this._delegate,e))}catch(t){throw a(t,"collection()","Firestore.collection()")}}doc(e){try{return new s(this,Vb(this._delegate,e))}catch(t){throw a(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new v(this,function(n,e){if(n=Xt(n,Uv),Pm("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Me(ge.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new as(n,null,(t=e,new Yl(fn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw a(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(n,e,t){n=Xt(n,dr);const r=Object.assign(Object.assign({},JM),t);return function(o){if(o.maxAttempts<1)throw new Me(ge.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(n,e,t){const r=new yr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){const o=yield(u=n,Ov(u).then(c=>c.datastore));var u;new bM(n.asyncQueue,o,t,e,r).run()})),r.promise}(Pr(n),o=>e(new rS(n,o)),r)}(this._delegate,t=>e(new ok(this,t)))}batch(){return Pr(this._delegate),new ak(new XA(this._delegate,e=>ah(this._delegate,e)))}loadBundle(e){return function(n,e){const t=Pr(n=Xt(n,dr)),r=new kM;return function(n,e,t,r){const o=function(u,c){let p;return p="string"==typeof u?(new TextEncoder).encode(u):u,y=function(y,w){if(y instanceof Uint8Array)return Nb(y,w);if(y instanceof ArrayBuffer)return Nb(new Uint8Array(y),w);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new Mb(y,c);var y}(t,Qf(e));n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){!function(n,e,t){const r=Ye(n);var o;(o=(0,Ce.Z)(function*(u,c,p){try{const y=yield c.getMetadata();if(yield function(P,B){const Y=Ye(P),_e=Sn(B.createTime);return Y.persistence.runTransaction("hasNewerBundle","readonly",xe=>Y._s.getBundleMetadata(xe,B.id)).then(xe=>!!xe&&xe.createTime.compareTo(_e)>=0)}(u.localStore,y))return yield c.close(),p._completeWith({taskState:"Success",documentsLoaded:(P=y).totalDocuments,bytesLoaded:P.totalBytes,totalDocuments:P.totalDocuments,totalBytes:P.totalBytes}),Promise.resolve(new Set);p._updateProgress(wA(y));const w=new KO(y,u.localStore,c.M);let D=yield c.ma();for(;D;){const P=yield w.Fu(D);P&&p._updateProgress(P),D=yield c.ma()}const S=yield w.complete();return yield su(u,S.Lu,void 0),yield function(P,B){const Y=Ye(P);return Y.persistence.runTransaction("Save bundle","readwrite",_e=>Y._s.saveBundleMetadata(_e,B))}(u.localStore,y),p._completeWith(S.progress),Promise.resolve(S.Bu)}catch(y){return Jg("SyncEngine",`Loading bundle failed with ${y}`),p._failWith(y),Promise.resolve(new Set)}var P}),function(u,c,p){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield OA(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function(n,e){return function(n,e){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){return function(t,r){const o=Ye(t);return o.persistence.runTransaction("Get named query","readonly",u=>o._s.getNamedQuery(u,r))}(yield Fv(n),e)}))}(Pr(n=Xt(n,dr)),e).then(t=>t?new as(n,null,t.query):null)}(this._delegate,e).then(t=>t?new v(this,t):null)}}class Jb extends zb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yv(new ou(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return s.forKey(t,this.firestore,null)}}class ok{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Jb(e)}get(e){const t=k(e);return this._delegate.get(t).then(r=>new h(this._firestore,new au(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=k(e);return r?(sS("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=k(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=k(e);return this._delegate.delete(t),this}}class ak{constructor(e){this._delegate=e}set(e,t,r){const o=k(e);return r?(sS("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=k(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=k(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class i{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Um(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new m(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=i.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new i(e,new Jb(e),t),o.set(t,u)),u}}i.INSTANCES=new WeakMap;class s{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Jb(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Me("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new s(t,new Wn(t._delegate,r,new ze(e)))}static forKey(e,t,r){return new s(t,new Wn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new x(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new x(this.firestore,UA(this._delegate,e))}catch(t){throw a(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,F.m9)(e))instanceof Wn&&NM(this._delegate,e)}set(e,t){t=sS("DocumentReference.set",t);try{return t?jm(this._delegate,e,t):jm(this._delegate,e)}catch(r){throw a(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?oh(this._delegate,e):oh(this._delegate,e,t,...r)}catch(o){throw a(o,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return ah(Xt(n.firestore,dr),[new fm(n._key,Mr.none())])}(this._delegate)}onSnapshot(...e){const t=l(e),r=d(e,o=>new h(this.firestore,new au(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return tS(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=Xt(n,Wn);const e=Xt(n.firestore,dr),t=Pr(e),r=new sh(e);return function(n,e){const t=new yr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(r=(0,Ce.Z)(function*(o,u,c){try{const p=yield function(y,w){const D=Ye(y);return D.persistence.runTransaction("read document","readonly",S=>D.fi.Ls(S,w))}(o,u);p.isFoundDocument()?c.resolve(p):p.isNoDocument()?c.resolve(null):c.reject(new Me(ge.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const y=ep(p,`Failed to get document '${u} from cache`);c.reject(y)}}),function(o,u,c){return r.apply(this,arguments)})(yield Fv(n),e,t);var r})),t.promise}(t,n._key).then(o=>new au(e,r,n._key,o,new ih(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=Xt(n,Wn);const e=Xt(n.firestore,dr);return Ob(Pr(e),n._key,{source:"server"}).then(t=>Kv(e,n,t))}(this._delegate):function(n){n=Xt(n,Wn);const e=Xt(n.firestore,dr);return Ob(Pr(e),n._key).then(t=>Kv(e,n,t))}(this._delegate),t.then(r=>new h(this.firestore,new au(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new s(this.firestore,this._delegate.withConverter(e?i.getInstance(this.firestore,e):null))}}function a(n,e,t){return n.message=n.message.replace(e,t),n}function l(n){for(const e of n)if("object"==typeof e&&!uS(e))return e;return{}}function d(n,e){var t,r;let o;return o=uS(n[0])?n[0]:uS(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class h{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new s(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Hv(this._delegate,e._delegate)}}class m extends h{data(e){const t=this._delegate.data(e);return function(n,e){n||it()}(void 0!==t),t}}class v{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Jb(e)}where(e,t,r){try{return new v(this.firestore,No(this._delegate,function(n,e,t){const r=e,o=$v("where",n);return new Gv(o,r,t)}(e,t,r)))}catch(o){throw a(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new v(this.firestore,No(this._delegate,function(n,e="asc"){const t=e,r=$v("orderBy",n);return new qv(r,t)}(e,t)))}catch(r){throw a(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new v(this.firestore,No(this._delegate,function(n){return Lb("limit",n),new Wb("limit",n,"F")}(e)))}catch(t){throw a(t,"limit()","Query.limit()")}}limitToLast(e){try{return new v(this.firestore,No(this._delegate,function(n){return Lb("limitToLast",n),new Wb("limitToLast",n,"L")}(e)))}catch(t){throw a(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new v(this.firestore,No(this._delegate,function(...n){return new QA("startAt",n,!0)}(...e)))}catch(t){throw a(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new v(this.firestore,No(this._delegate,function(...n){return new QA("startAfter",n,!1)}(...e)))}catch(t){throw a(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new v(this.firestore,No(this._delegate,function(...n){return new Zb("endBefore",n,!1)}(...e)))}catch(t){throw a(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new v(this.firestore,No(this._delegate,function(...n){return new Zb("endAt",n,!0)}(...e)))}catch(t){throw a(t,"endAt()","Query.endAt()")}}isEqual(e){return BA(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=Xt(n,as);const e=Xt(n.firestore,dr),t=Pr(e),r=new sh(e);return function(n,e){const t=new yr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(r=(0,Ce.Z)(function*(o,u,c){try{const p=yield Em(o,u,!0),y=new bA(u,p._i),w=y.Wu(p.documents),D=y.applyChanges(w,!1);c.resolve(D.snapshot)}catch(p){const y=ep(p,`Failed to execute query '${u} against cache`);c.reject(y)}}),function(o,u,c){return r.apply(this,arguments)})(yield Fv(n),e,t);var r})),t.promise}(t,n._query).then(o=>new gc(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=Xt(n,as);const e=Xt(n.firestore,dr),t=Pr(e),r=new sh(e);return km(t,n._query,{source:"server"}).then(o=>new gc(e,r,n,o))}(this._delegate):function(n){n=Xt(n,as);const e=Xt(n.firestore,dr),t=Pr(e),r=new sh(e);return KA(n._query),km(t,n._query).then(o=>new gc(e,r,n,o))}(this._delegate),t.then(r=>new T(this.firestore,new gc(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=l(e),r=d(e,o=>new T(this.firestore,new gc(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return tS(this._delegate,t,r)}withConverter(e){return new v(this.firestore,this._delegate.withConverter(e?i.getInstance(this.firestore,e):null))}}class C{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new m(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class T{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new v(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new m(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new C(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new m(this._firestore,r))})}isEqual(e){return Hv(this._delegate,e._delegate)}}class x extends v{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new s(this.firestore,e):null}doc(e){try{return new s(this.firestore,void 0===e?Vb(this._delegate):Vb(this._delegate,e))}catch(t){throw a(t,"doc()","CollectionReference.doc()")}}add(e){return function(n,e){const t=Xt(n.firestore,dr),r=Vb(n),o=zv(n.converter,e);return ah(t,[Bv(Qu(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Mr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new s(this.firestore,t))}isEqual(e){return NM(this._delegate,e._delegate)}withConverter(e){return new x(this.firestore,this._delegate.withConverter(e?i.getInstance(this.firestore,e):null))}}function k(n){return Xt(n,Wn)}class L{constructor(...e){this._delegate=new fc(...e)}static documentId(){return new L(ii.keyField().canonicalString())}isEqual(e){return(e=(0,F.m9)(e))instanceof fc&&this._delegate._internalPath.isEqual(e._internalPath)}}class q{constructor(e){this._delegate=e}static serverTimestamp(){const e=new WA("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new q(e)}static delete(){const e=new Fm("deleteField");return e._methodName="FieldValue.delete",new q(e)}static arrayUnion(...e){const t=function(...n){return new HM("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new q(t)}static arrayRemove(...e){const t=function(...n){return new GM("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new q(t)}static increment(e){const t=function(n){return new qM("increment",n)}(e);return t._methodName="FieldValue.increment",new q(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const X={Firestore:lS,GeoPoint:pc,Timestamp:vr,Blob:Yv,Transaction:ok,WriteBatch:ak,DocumentReference:s,DocumentSnapshot:h,Query:v,QueryDocumentSnapshot:m,QuerySnapshot:T,CollectionReference:x,FieldPath:L,FieldValue:q,setLogLevel:function(n){!function(n){la.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function(n){(function(n,e){n.INTERNAL.registerComponent(new wo.wA("firestore-compat",t=>((e,t)=>new lS(e,t,new g1))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},X)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.18")}(ZI.Z);var Fe=V(6682),Ie=V(309),ut=V(7771),St=V(8858);class en extends Os.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new Wr(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,r=t?this._events:this._trimBufferThenGetEvents(),o=this.scheduler,u=r.length;let c;if(this.closed)throw new eg.N;if(this.isStopped||this.hasError?c=WC.w.EMPTY:(this.observers.push(e),c=new St.W(this,e)),o&&e.add(e=new Ie.ht(e,o)),t)for(let p=0;p<u&&!e.closed;p++)e.next(r[p]);else for(let p=0;p<u&&!e.closed;p++)e.next(r[p].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),c}_getNow(){return(this.scheduler||ut.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,r=this._windowTime,o=this._events,u=o.length;let c=0;for(;c<u&&!(e-o[c].time<r);)c++;return u>t&&(c=Math.max(c,u-t)),c>0&&o.splice(0,c),o}}class Wr{constructor(e,t){this.time=e,this.value=t}}function qs(n,e,t){let r;return r=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},o=>o.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:r}){let o,c,u=0,p=!1,y=!1;return function(D){let S;u++,!o||p?(p=!1,o=new en(n,e,r),S=o.subscribe(this),c=D.subscribe({next(P){o.next(P)},error(P){p=!0,o.error(P)},complete(){y=!0,c=void 0,o.complete()}}),y&&(c=void 0)):S=o.subscribe(this),this.add(()=>{u--,S.unsubscribe(),S=void 0,c&&!y&&t&&0===u&&(c.unsubscribe(),c=void 0,o=void 0)})}}(r))}function lh(n,e){return e?Rr(()=>n,e):Rr(()=>n)}var mc=V(3101);V(2329);const _1=new Map,rU={activated:!1,tokenObservers:[]},iU={initialized:!1,enabled:!1};function Hi(n){return _1.get(n)||rU}function tl(n,e){_1.set(n,e)}function dS(){return iU}class lU{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ce.Z)(function*(){t.stop();try{t.pending=new F.BH,yield function(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new F.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ws=new F.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function v1(n){if(!Hi(n).activated)throw Ws.create("use-before-activation",{appName:n.name})}function ck(n,e){return dk.apply(this,arguments)}function dk(){return(dk=(0,Ce.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const S=yield o.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const u={method:"POST",body:JSON.stringify(e),headers:r};let c,p;try{c=yield fetch(n,u)}catch(S){throw Ws.create("fetch-network-error",{originalErrorMessage:S.message})}if(200!==c.status)throw Ws.create("fetch-status-error",{httpStatus:c.status});try{p=yield c.json()}catch(S){throw Ws.create("fetch-parse-error",{originalErrorMessage:S.message})}const y=p.ttl.match(/^([\d.]+)(s)$/);if(!y||!y[2]||isNaN(Number(y[1])))throw Ws.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${p.ttl}`});const w=1e3*Number(y[1]),D=Date.now();return{token:p.token,expireTimeMillis:D+w,issuedAtTimeMillis:D}})).apply(this,arguments)}function gU(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const tC="firebase-app-check-store";let pS=null;function w1(){return pS||(pS=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(Ws.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{const o=r.target.result;switch(r.oldVersion){case 0:o.createObjectStore(tC,{keyPath:"compositeKey"})}}}catch(t){e(Ws.create("storage-open",{originalErrorMessage:t.message}))}}),pS)}function hk(){return(hk=(0,Ce.Z)(function*(n,e){const r=(yield w1()).transaction(tC,"readwrite"),u=r.objectStore(tC).put({compositeKey:n,value:e});return new Promise((c,p)=>{u.onsuccess=y=>{c()},r.onerror=y=>{var w;p(Ws.create("storage-set",{originalErrorMessage:null===(w=y.target.error)||void 0===w?void 0:w.message}))}})})).apply(this,arguments)}const nC=new Eo.Yd("@firebase/app-check");function T1(n,e){return(0,F.hl)()?function(n,e){return function(n,e){return hk.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{nC.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function D1(){return dS().enabled}function A1(){return mk.apply(this,arguments)}function mk(){return(mk=(0,Ce.Z)(function*(){const n=dS();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const TU={error:"UNKNOWN_ERROR"};function DU(n){return F.US.encodeString(JSON.stringify(n),!1)}function gS(n){return _k.apply(this,arguments)}function _k(){return(_k=(0,Ce.Z)(function*(n,e=!1){const t=n.app;v1(t);const r=Hi(t);let u,o=r.token;if(!o){const y=yield r.cachedTokenPromise;y&&mS(y)&&(o=y)}if(!e&&o&&mS(o))return{token:o.token};let p,c=!1;if(D1()){r.exchangeTokenPromise||(r.exchangeTokenPromise=ck(gU(t,yield A1()),n.heartbeatServiceProvider).then(w=>(r.exchangeTokenPromise=void 0,w)),c=!0);const y=yield r.exchangeTokenPromise;return yield T1(t,y),tl(t,Object.assign(Object.assign({},r),{token:y})),{token:y.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(y=>(r.exchangeTokenPromise=void 0,y)),c=!0),o=yield r.exchangeTokenPromise}catch(y){"appCheck/throttled"===y.code?nC.warn(y.message):nC.error(y),u=y}return o?(p={token:o.token},tl(t,Object.assign(Object.assign({},r),{token:o})),yield T1(t,o)):p=SU(u),c&&x1(t,p),p})).apply(this,arguments)}function vk(n,e){const t=Hi(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),tl(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function S1(n){const{app:e}=n,t=Hi(e);let r=t.tokenRefresher;r||(r=function(n){const{app:e}=n;return new lU((0,Ce.Z)(function*(){let r;if(r=Hi(e).token?yield gS(n,!0):yield gS(n),r.error)throw r.error}),()=>!0,()=>{const t=Hi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),tl(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function x1(n,e){const t=Hi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function mS(n){return n.expireTimeMillis-Date.now()>0}function SU(n){return{token:DU(TU),error:n}}class xU{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Hi(this.app);for(const t of e)vk(this.app,t.next);return Promise.resolve()}}const L1="app-check-internal";(0,Li._registerComponent)(new wo.wA("app-check",n=>function(n,e){return new xU(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(L1).initialize()})),(0,Li._registerComponent)(new wo.wA(L1,n=>function(n){return{getToken:e=>gS(n,e),addTokenListener:e=>function(n,e,t,r){const{app:o}=n,u=Hi(o),c={next:t,error:r,type:e};if(tl(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,c]})),u.token&&mS(u.token)){const p=u.token;Promise.resolve().then(()=>{t({token:p.token}),S1(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>S1(n))}(n,"INTERNAL",e),removeTokenListener:e=>vk(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Li.registerVersion)("@firebase/app-check","0.5.8");class rC{constructor(){return(0,wn.vb)("app-check")}}"undefined"!=typeof window&&window;var yS=V(7841);const Ik=new f.OlP("angularfire2.auth.use-emulator"),Tk=new f.OlP("angularfire2.auth.settings"),Dk=new f.OlP("angularfire2.auth.tenant-id"),Ak=new f.OlP("angularfire2.auth.langugage-code"),Sk=new f.OlP("angularfire2.auth.use-device-language"),xk=new f.OlP("angularfire.auth.persistence"),Rk=(n,e,t,r,o,u,c,p)=>(0,Ur.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const y=e.runOutsideAngular(()=>n.auth());if(t&&y.useEmulator(...t),r&&(y.tenantId=r),y.languageCode=o,u&&y.useDeviceLanguage(),c)for(const[w,D]of Object.entries(c))y.settings[w]=D;return p&&y.setPersistence(p),y},[t,r,o,u,c,p]);let iC=(()=>{class n{constructor(t,r,o,u,c,p,y,w,D,S,P,B){const Y=new Os.xQ,_e=(0,mt.of)(void 0).pipe((0,Ie.QV)(c.outsideAngular),Rr(()=>u.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,4828)))),(0,pt.U)(()=>(0,Ur.on)(t,u,r)),(0,pt.U)(xe=>Rk(xe,u,p,w,D,S,y,P)),qs({bufferSize:1,refCount:!1}));if(ba(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,mt.of)(null);else{_e.pipe(Fi()).subscribe();const dt=_e.pipe(Rr(st=>st.getRedirectResult().then(Bt=>Bt,()=>null)),wn.iC,qs({bufferSize:1,refCount:!1})),lt=_e.pipe(Rr(st=>new gr.y(Bt=>({unsubscribe:u.runOutsideAngular(()=>st.onAuthStateChanged(sn=>Bt.next(sn),sn=>Bt.error(sn),()=>Bt.complete()))})))),nt=_e.pipe(Rr(st=>new gr.y(Bt=>({unsubscribe:u.runOutsideAngular(()=>st.onIdTokenChanged(sn=>Bt.next(sn),sn=>Bt.error(sn),()=>Bt.complete()))}))));this.authState=dt.pipe(lh(lt),(0,mc.R)(c.outsideAngular),(0,Ie.QV)(c.insideAngular)),this.user=dt.pipe(lh(nt),(0,mc.R)(c.outsideAngular),(0,Ie.QV)(c.insideAngular)),this.idToken=this.user.pipe(Rr(st=>st?(0,Vt.D)(st.getIdToken()):(0,mt.of)(null))),this.idTokenResult=this.user.pipe(Rr(st=>st?(0,Vt.D)(st.getIdTokenResult()):(0,mt.of)(null))),this.credential=(0,Fe.T)(dt,Y,this.authState.pipe(ku(st=>!st))).pipe((0,pt.U)(st=>(null==st?void 0:st.user)?st:null),(0,mc.R)(c.outsideAngular),(0,Ie.QV)(c.insideAngular))}return(0,Ur.pX)(this,_e,u,{spy:{apply:(xe,dt,lt)=>{(xe.startsWith("signIn")||xe.startsWith("createUser"))&&lt.then(nt=>Y.next(nt))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ur.Dh),f.LFG(Ur.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(wn.HU),f.LFG(Ik,8),f.LFG(Tk,8),f.LFG(Dk,8),f.LFG(Ak,8),f.LFG(Sk,8),f.LFG(xk,8),f.LFG(rC,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),KU=(()=>{class n{constructor(){yS.Z.registerVersion("angularfire",wn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[iC]}),n})();function U1(n,e){return function(n,e=K_.z){return new gr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function Nk(n,e){return U1(n,e).pipe((0,pt.U)(t=>({payload:t,type:"query"})))}function vS(n,e){return Nk(n,e).pipe(N_(void 0),yw(),(0,pt.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,p)=>{const y=o.find(D=>D.doc.ref.isEqual(c.ref)),w=null==t?void 0:t.payload.docs.find(D=>D.ref.isEqual(c.ref));y&&JSON.stringify(y.doc.metadata)===JSON.stringify(c.metadata)||!y&&w&&JSON.stringify(w.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:c}})}),u}))}function B1(n,e,t){return vS(n,t).pipe(yo((r,o)=>function(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Mk(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Mk(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Mk(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),vw(),(0,pt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function Mk(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function j1(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class $1{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=vS(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,pt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(N_(void 0),yw(),ku(([r,o])=>o.length>0||!r),(0,pt.U)(([r,o])=>o),wn.iC)}auditTrail(e){return this.stateChanges(e).pipe(yo((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=j1(e);return B1(this.query,t,this.afs.schedulers.outsideAngular).pipe(wn.iC)}valueChanges(e={}){return Nk(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),wn.iC)}get(e){return(0,Vt.D)(this.query.get(e)).pipe(wn.iC)}add(e){return this.ref.add(e)}doc(e){return new H1(this.ref.doc(e),this.afs)}}class H1{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=W1(r,t);return new $1(o,u,this.afs)}snapshotChanges(){return function(n,e){return U1(n,e).pipe(N_(void 0),yw(),(0,pt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(wn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,pt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Vt.D)(this.ref.get(e)).pipe(wn.iC)}}class e2{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?vS(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ku(t=>t.length>0),wn.iC):vS(this.query,this.afs.schedulers.outsideAngular).pipe(wn.iC)}auditTrail(e){return this.stateChanges(e).pipe(yo((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=j1(e);return B1(this.query,t,this.afs.schedulers.outsideAngular).pipe(wn.iC)}valueChanges(e={}){return Nk(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),wn.iC)}get(e){return(0,Vt.D)(this.query.get(e)).pipe(wn.iC)}}const G1=new f.OlP("angularfire2.enableFirestorePersistence"),q1=new f.OlP("angularfire2.firestore.persistenceSettings"),t2=new f.OlP("angularfire2.firestore.settings"),n2=new f.OlP("angularfire2.firestore.use-emulator");function W1(n,e=(t=>t)){return{query:e(n),ref:n}}let Z1=(()=>{class n{constructor(t,r,o,u,c,p,y,w,D,S,P,B,Y,_e,xe,dt,lt){this.schedulers=y;const nt=(0,Ur.on)(t,p,r),st=D;S&&Rk(nt,p,P,Y,_e,xe,B,dt),[this.firestore,this.persistenceEnabled$]=(0,Ur.cc)(`${nt.name}.firestore`,"AngularFirestore",nt.name,()=>{const Bt=p.runOutsideAngular(()=>nt.firestore());if(u&&Bt.settings(u),st&&Bt.useEmulator(...st),o&&!ba(c)){const sn=()=>{try{return(0,Vt.D)(Bt.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(ui){return"undefined"!=typeof console&&console.warn(ui),(0,mt.of)(!1)}};return[Bt,p.runOutsideAngular(sn)]}return[Bt,(0,mt.of)(!1)]},[u,st,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=W1(o,r),p=this.schedulers.ngZone.run(()=>u);return new $1(p,c,this)}collectionGroup(t,r){const o=r||(c=>c),u=this.firestore.collectionGroup(t);return new e2(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new H1(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ur.Dh),f.LFG(Ur.xv,8),f.LFG(G1,8),f.LFG(t2,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(wn.HU),f.LFG(q1,8),f.LFG(n2,8),f.LFG(iC,8),f.LFG(Ik,8),f.LFG(Tk,8),f.LFG(Dk,8),f.LFG(Ak,8),f.LFG(Sk,8),f.LFG(xk,8),f.LFG(rC,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),r2=(()=>{class n{constructor(){yS.Z.registerVersion("angularfire",wn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:G1,useValue:!0},{provide:q1,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[Z1]}),n})(),lp=(()=>{class n{constructor(t,r,o,u){this.afs=t,this.afAuth=r,this.router=o,this.ngZone=u,this.afAuth.authState.subscribe(c=>{c?(console.log(typeof c),this.userData=c,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(o=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(o.user)}).catch(o=>{window.alert(o.message)})}SignUp(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r).then(o=>{this.SendVerificationMail(),this.SetUserData(o.user)}).catch(o=>{window.alert(o.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}GoogleAuth(){return this.AuthLogin(new Ag.Q).then(t=>{t&&this.router.navigate(["dashboard"])})}AuthLogin(t){return this.afAuth.signInWithPopup(t).then(r=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(r.user)}).catch(r=>{window.alert(r)})}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Z1),f.LFG(iC),f.LFG(Cr),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function i2(n,e){if(1&n&&(f.TgZ(0,"div",4),f.TgZ(1,"div",18),f.TgZ(2,"div",19),f._UZ(3,"img",20),f.TgZ(4,"div",21),f.TgZ(5,"h1"),f._uU(6,"Hello: "),f.TgZ(7,"strong"),f._uU(8),f.qZA(),f.qZA(),f.TgZ(9,"p"),f._uU(10,"User ID: "),f.TgZ(11,"strong"),f._uU(12),f.qZA(),f.qZA(),f.TgZ(13,"p"),f._uU(14,"Email: "),f.TgZ(15,"strong"),f._uU(16),f.qZA(),f.qZA(),f.TgZ(17,"p"),f._uU(18,"Email Verified: "),f.TgZ(19,"strong"),f._uU(20),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&n){const t=e.ngIf;f.xp6(3),f.s9C("src",t.photoURL?t.photoURL:"/assets/dummy-user.png",f.LSH),f.s9C("alt",t.displayName),f.xp6(5),f.Oqu(t.displayName?t.displayName:"User"),f.xp6(4),f.Oqu(t.uid),f.xp6(4),f.Oqu(t.email),f.xp6(4),f.Oqu(t.emailVerified)}}let s2=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(lp))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-dashboard"]],decls:22,vars:1,consts:[[1,"navbar","navbar-dark","fixed-top","bg-dark","flex-md-nowrap","p-0","shadow"],[1,"navbar-brand","col-sm-3","col-md-2","mr-0"],["src","assets/logo-positronx-white.svg","alt","Logo",1,"brand-logo"],[1,"container-fluid"],[1,"row"],[1,"col-md-2","d-md-block","bg-light","sidebar"],[1,"sidebar-sticky"],[1,"nav","flex-column"],[1,"nav-item"],[1,"nav-link","active"],[1,"fas","fa-user"],[1,"nav-link",3,"click"],[1,"fas","fa-sign-out-alt"],["role","main",1,"col-md-9","ml-sm-auto","col-lg-10","px-4"],[1,"inner-adjust"],[1,"pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],["class","row",4,"ngIf"],[1,"col-md-12"],[1,"media"],[1,"align-self-start","mr-5","img-thumbnail","rounded-circle",3,"src","alt"],[1,"media-body"]],template:function(t,r){1&t&&(f.TgZ(0,"nav",0),f.TgZ(1,"a",1),f._UZ(2,"img",2),f.qZA(),f.qZA(),f.TgZ(3,"div",3),f.TgZ(4,"div",4),f.TgZ(5,"nav",5),f.TgZ(6,"div",6),f.TgZ(7,"ul",7),f.TgZ(8,"li",8),f.TgZ(9,"a",9),f._UZ(10,"i",10),f._uU(11,"User Profile "),f.qZA(),f.qZA(),f.TgZ(12,"li",8),f.TgZ(13,"a",11),f.NdJ("click",function(){return r.authService.SignOut()}),f._UZ(14,"i",12),f._uU(15,"Log out "),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(16,"main",13),f.TgZ(17,"div",14),f.TgZ(18,"div",15),f.TgZ(19,"h1",16),f._uU(20,"User Profile"),f.qZA(),f.qZA(),f.YNc(21,i2,21,6,"div",17),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&t&&(f.xp6(21),f.Q6J("ngIf",r.authService.userData))},directives:[Js],styles:[""]}),n})(),o2=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(lp))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-forgot-password"]],decls:17,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"text-center"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["passwordResetEmail",""],["type","submit","value","Reset Password",1,"btn","btnPrimary",3,"click"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,r){if(1&t){const o=f.EpF();f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"div",2),f.TgZ(3,"h3"),f._uU(4,"Reset Password"),f.qZA(),f.TgZ(5,"p",3),f._uU(6,"Please enter your email address to request a password reset."),f.qZA(),f.TgZ(7,"div",4),f._UZ(8,"input",5,6),f.qZA(),f.TgZ(10,"div",4),f.TgZ(11,"input",7),f.NdJ("click",function(){f.CHM(o);const c=f.MAs(9);return r.authService.ForgotPassword(c.value)}),f.qZA(),f.qZA(),f.qZA(),f.TgZ(12,"div",8),f.TgZ(13,"span"),f._uU(14,"Go back to ? "),f.TgZ(15,"span",9),f._uU(16,"Log In"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()}},directives:[Fl],styles:[""]}),n})(),a2=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(lp))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-sign-in"]],decls:43,vars:0,consts:[[1,"header"],["routerLink","",1,"logo"],[1,"header-right"],["routerLink","/home","routerLinkActive","active"],["routerLink","/contact","routerLinkActive","active"],["routerLink","/about","routerLinkActive","active"],["routerLink","/register-user","routerLinkActive","active"],["routerLink","/sign-in","routerLinkActive","active"],[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","text","placeholder","Username","required","",1,"formControl"],["userName",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPassword",""],["type","button","value","Log in",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],["type","button",1,"btn","googleBtn",3,"click"],[1,"fab","fa-google-plus-g"],[1,"forgotPassword"],["routerLink","/forgot-password"],[1,"redirectToLogin"],["routerLink","/register-user",1,"redirect"]],template:function(t,r){if(1&t){const o=f.EpF();f.TgZ(0,"div",0),f.TgZ(1,"a",1),f._uU(2,"Logo"),f.qZA(),f.TgZ(3,"div",2),f.TgZ(4,"a",3),f._uU(5,"Home"),f.qZA(),f.TgZ(6,"a",4),f._uU(7,"Contact"),f.qZA(),f.TgZ(8,"a",5),f._uU(9,"About"),f.qZA(),f.TgZ(10,"a",6),f._uU(11,"Sign Up"),f.qZA(),f.TgZ(12,"a",7),f._uU(13,"Sign In"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(14,"div",8),f.TgZ(15,"div",9),f.TgZ(16,"div",10),f.TgZ(17,"h3"),f._uU(18,"Sign In"),f.qZA(),f.TgZ(19,"div",11),f._UZ(20,"input",12,13),f.qZA(),f.TgZ(22,"div",11),f._UZ(23,"input",14,15),f.qZA(),f.TgZ(25,"div",11),f.TgZ(26,"input",16),f.NdJ("click",function(){f.CHM(o);const c=f.MAs(21),p=f.MAs(24);return r.authService.SignIn(c.value,p.value)}),f.qZA(),f.qZA(),f.TgZ(27,"div",11),f.TgZ(28,"span",17),f.TgZ(29,"span",18),f._uU(30,"Or"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(31,"div",11),f.TgZ(32,"button",19),f.NdJ("click",function(){return r.authService.GoogleAuth()}),f._UZ(33,"i",20),f._uU(34," Log in with Google "),f.qZA(),f.qZA(),f.TgZ(35,"div",21),f.TgZ(36,"span",22),f._uU(37,"Forgot Password?"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(38,"div",23),f.TgZ(39,"span"),f._uU(40,"Don't have an account?"),f.TgZ(41,"span",24),f._uU(42," Sign Up"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()}},directives:[Ll,lf,Fl],styles:[""]}),n})(),u2=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(lp))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-sign-up"]],decls:40,vars:0,consts:[[1,"header"],["routerLink","",1,"logo"],[1,"header-right"],["routerLink","/home","routerLinkActive","active"],["routerLink","/contact","routerLinkActive","active"],["routerLink","/about","routerLinkActive","active"],["routerLink","/register-user","routerLinkActive","active"],["routerLink","/sign-in","routerLinkActive","active"],[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["userEmail",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPwd",""],["type","button","value","Sign Up",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],["type","button",1,"btn","googleBtn",3,"click"],[1,"fab","fa-google-plus-g"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,r){if(1&t){const o=f.EpF();f.TgZ(0,"div",0),f.TgZ(1,"a",1),f._uU(2,"Logo"),f.qZA(),f.TgZ(3,"div",2),f.TgZ(4,"a",3),f._uU(5,"Home"),f.qZA(),f.TgZ(6,"a",4),f._uU(7,"Contact"),f.qZA(),f.TgZ(8,"a",5),f._uU(9,"About"),f.qZA(),f.TgZ(10,"a",6),f._uU(11,"Sign Up"),f.qZA(),f.TgZ(12,"a",7),f._uU(13,"Sign In"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(14,"div",8),f.TgZ(15,"div",9),f.TgZ(16,"div",10),f.TgZ(17,"h3"),f._uU(18,"Sign Up"),f.qZA(),f.TgZ(19,"div",11),f._UZ(20,"input",12,13),f.qZA(),f.TgZ(22,"div",11),f._UZ(23,"input",14,15),f.qZA(),f.TgZ(25,"div",11),f.TgZ(26,"input",16),f.NdJ("click",function(){f.CHM(o);const c=f.MAs(21),p=f.MAs(24);return r.authService.SignUp(c.value,p.value)}),f.qZA(),f.qZA(),f.TgZ(27,"div",11),f.TgZ(28,"span",17),f.TgZ(29,"span",18),f._uU(30,"Or"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(31,"div",11),f.TgZ(32,"button",19),f.NdJ("click",function(){return r.authService.GoogleAuth()}),f._UZ(33,"i",20),f._uU(34," Continue with Google "),f.qZA(),f.qZA(),f.qZA(),f.TgZ(35,"div",21),f.TgZ(36,"span"),f._uU(37,"Already have an account? "),f.TgZ(38,"span",22),f._uU(39,"Log In"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()}},directives:[Ll,lf,Fl],styles:[""]}),n})();function l2(n,e){if(1&n&&(f.TgZ(0,"div",4),f.TgZ(1,"p",9),f._uU(2,"We have sent a confirmation email to "),f.TgZ(3,"strong"),f._uU(4),f.qZA(),f._uU(5,"."),f.qZA(),f.TgZ(6,"p",9),f._uU(7,"Please check your email and click on the link to verfiy your email address."),f.qZA(),f.qZA()),2&n){const t=e.ngIf;f.xp6(4),f.Oqu(t.email)}}let c2=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(lp))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-verify-email"]],decls:15,vars:1,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],["class","formGroup",4,"ngIf"],[1,"formGroup"],["type","button",1,"btn","btnPrimary",3,"click"],[1,"fas","fa-redo-alt"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"],[1,"text-center"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"div",2),f.TgZ(3,"h3"),f._uU(4,"Thank You for Registering"),f.qZA(),f.YNc(5,l2,8,1,"div",3),f.TgZ(6,"div",4),f.TgZ(7,"button",5),f.NdJ("click",function(){return r.authService.SendVerificationMail()}),f._UZ(8,"i",6),f._uU(9," Resend Verification Email "),f.qZA(),f.qZA(),f.qZA(),f.TgZ(10,"div",7),f.TgZ(11,"span"),f._uU(12,"Go back to?"),f.TgZ(13,"span",8),f._uU(14," Sign in"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&t&&(f.xp6(5),f.Q6J("ngIf",r.authService.userData))},directives:[Js,Fl],styles:[""]}),n})(),d2=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return!0===this.authService.isLoggedIn||(this.router.navigate(["sign-in"]),!1)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(lp),f.LFG(Cr))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Gm=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return 1!=this.authService.isLoggedIn||(this.router.navigate(["dashboard"]),!1)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(lp),f.LFG(Cr))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const h2=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"home",component:_R,canActivate:[Gm]},{path:"sign-in",component:a2,canActivate:[Gm]},{path:"register-user",component:u2,canActivate:[Gm]},{path:"dashboard",component:s2,canActivate:[d2]},{path:"forgot-password",component:o2,canActivate:[Gm]},{path:"verify-email-address",component:c2,canActivate:[Gm]},{path:"contact",component:qI,canActivate:[Gm]},{path:"about",component:mR,canActivate:[Gm]}];let f2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[fw.forRoot(h2)],fw]}),n})(),p2=(()=>{class n{constructor(){this.title="portal"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},directives:[lw],styles:[""]}),n})();class m2{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new _2(e,this.dueTime,this.scheduler))}}class _2 extends es.L{constructor(e,t,r){super(e),this.dueTime=t,this.scheduler=r,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(y2,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function y2(n){n.debouncedNext()}const z1="firebasestorage.googleapis.com",K1="storageBucket";class Or extends F.ZR{constructor(e,t){super(kk(e),`Firebase Storage: ${t} (${kk(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Or.prototype)}_codeEquals(e){return kk(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function kk(n){return"storage/"+n}function Pk(){return new Or("unknown","An unknown error occurred, please check the error payload for server response.")}function Y1(){return new Or("canceled","User canceled the upload/download.")}function Q1(){return new Or("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Qv(n){return new Or("invalid-argument",n)}function J1(){return new Or("app-deleted","The Firebase app was deleted.")}function X1(n){return new Or("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function sC(n,e){return new Or("invalid-format","String does not match format '"+n+"': "+e)}function oC(n){throw new Or("internal-error","Internal error: "+n)}class Es{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Es.makeFromUrl(e,t)}catch(o){return new Es(e,"")}if(""===r.path)return r;throw function(n){return new Or("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const o="([A-Za-z0-9.\\-_]+)",p=new RegExp("^gs://"+o+"(/(.*))?$","i");function w(st){st.path_=decodeURIComponent(st.path)}const S=t.replace(/[.]/g,"\\."),nt=[{regex:p,indices:{bucket:1,path:3},postModify:function(st){"/"===st.path.charAt(st.path.length-1)&&(st.path_=st.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${o}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:w},{regex:new RegExp(`^https?://${t===z1?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${o}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:w}];for(let st=0;st<nt.length;st++){const Bt=nt[st],sn=Bt.regex.exec(e);if(sn){let al=sn[Bt.indices.path];al||(al=""),r=new Es(sn[Bt.indices.bucket],al),Bt.postModify(r);break}}if(null==r)throw function(n){return new Or("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class M2{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function ES(n){return"string"==typeof n||n instanceof String}function eF(n){return Ok()&&n instanceof Blob}function Ok(){return"undefined"!=typeof Blob}function Fk(n,e,t,r){if(r<e)throw Qv(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Qv(`Invalid value for '${n}'. Expected ${t} or less.`)}function dh(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function tF(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var cp=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(cp||(cp={})),cp))();class V2{constructor(e,t,r,o,u,c,p,y,w,D,S){this.url_=e,this.method_=t,this.headers_=r,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=c,this.callback_=p,this.errorCallback_=y,this.timeout_=w,this.progressCallback_=D,this.connectionFactory_=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((P,B)=>{this.resolve_=P,this.reject_=B,this.start_()})}start_(){const t=(r,o)=>{const u=this.resolve_,c=this.reject_,p=o.connection;if(o.wasSuccessCode)try{const y=this.callback_(p,p.getResponse());!function(n){return void 0!==n}(y)?u():u(y)}catch(y){c(y)}else if(null!==p){const y=Pk();y.serverResponse=p.getErrorText(),c(this.errorCallback_?this.errorCallback_(p,y):y)}else c(o.canceled?this.appDelete_?J1():Y1():new Or("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))};this.canceled_?t(0,new wS(!1,null,!0)):this.backoffId_=function(n,e,t){let r=1,o=null,u=null,c=!1,p=0;function y(){return 2===p}let w=!1;function D(...xe){w||(w=!0,e.apply(null,xe))}function S(xe){o=setTimeout(()=>{o=null,n(B,y())},xe)}function P(){u&&clearTimeout(u)}function B(xe,...dt){if(w)return void P();if(xe)return P(),void D.call(null,xe,...dt);if(y()||c)return P(),void D.call(null,xe,...dt);let nt;r<64&&(r*=2),1===p?(p=2,nt=0):nt=1e3*(r+Math.random()),S(nt)}let Y=!1;function _e(xe){Y||(Y=!0,P(),!w&&(null!==o?(xe||(p=2),clearTimeout(o),S(0)):xe||(p=1)))}return S(0),u=setTimeout(()=>{c=!0,_e(!0)},t),_e}((r,o)=>{if(o)return void r(!1,new wS(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const c=p=>{null!==this.progressCallback_&&this.progressCallback_(p.loaded,p.lengthComputable?p.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(c),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(c),this.pendingConnection_=null;const p=u.getErrorCode()===cp.NO_ERROR,y=u.getStatus();if(!p||this.isRetryStatusCode_(y)){const D=u.getErrorCode()===cp.ABORT;return void r(!1,new wS(!1,null,D))}const w=-1!==this.successCodes_.indexOf(y);r(!0,new wS(w,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,o=-1!==[408,429].indexOf(e),u=-1!==this.additionalRetryCodes_.indexOf(e);return t||o||u}}class wS{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function q2(...n){const e="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(Ok())return new Blob(n);throw new Or("unsupported-environment","This browser doesn't seem to support creating Blobs")}const fa={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Lk{constructor(e,t){this.data=e,this.contentType=t||null}}function Vk(n,e){switch(n){case fa.RAW:return new Lk(nF(e));case fa.BASE64:case fa.BASE64URL:return new Lk(rF(n,e));case fa.DATA_URL:return new Lk(function(n){const e=new iF(n);return e.base64?rF(fa.BASE64,e.rest):function(n){let e;try{e=decodeURIComponent(n)}catch(t){throw sC(fa.DATA_URL,"Malformed data URL.")}return nF(e)}(e.rest)}(e),function(n){return new iF(n).contentType}(e))}throw Pk()}function nF(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function rF(n,e){switch(n){case fa.BASE64:{const o=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(o||u)throw sC(n,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case fa.BASE64URL:{const o=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(o||u)throw sC(n,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function(n){return atob(n)}(e)}catch(o){throw sC(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}class iF{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw sC(fa.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=e.substring(e.indexOf(",")+1)}}class _c{constructor(e,t){let r=0,o="";eF(e)?(this.data_=e,r=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(eF(this.data_)){const o=function(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===o?null:new _c(o)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new _c(r,!0)}}static getBlob(...e){if(Ok()){const t=e.map(r=>r instanceof _c?r.data_:r);return new _c(q2.apply(null,t))}{const t=e.map(c=>ES(c)?Vk(fa.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const o=new Uint8Array(r);let u=0;return t.forEach(c=>{for(let p=0;p<c.length;p++)o[u++]=c[p]}),new _c(o,!0)}}uploadData(){return this.data_}}function Uk(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function sF(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function eB(n,e){return e}class Zs{constructor(e,t,r,o){this.server=e,this.local=t||e,this.writable=!!r,this.xform=o||eB}}let bS=null;function aC(){if(bS)return bS;const n=[];n.push(new Zs("bucket")),n.push(new Zs("generation")),n.push(new Zs("metageneration")),n.push(new Zs("name","fullPath",!0));const t=new Zs("name");t.xform=function(u,c){return function(n){return!ES(n)||n.length<2?n:sF(n)}(c)},n.push(t);const o=new Zs("size");return o.xform=function(u,c){return void 0!==c?Number(c):c},n.push(o),n.push(new Zs("timeCreated")),n.push(new Zs("updated")),n.push(new Zs("md5Hash",null,!0)),n.push(new Zs("cacheControl",null,!0)),n.push(new Zs("contentDisposition",null,!0)),n.push(new Zs("contentEncoding",null,!0)),n.push(new Zs("contentLanguage",null,!0)),n.push(new Zs("contentType",null,!0)),n.push(new Zs("metadata","customMetadata",!0)),bS=n,bS}function oF(n,e,t){const r=Uk(e);return null===r?null:function(n,e,t){const r={type:"file"},o=t.length;for(let u=0;u<o;u++){const c=t[u];r[c.local]=c.xform(r,e[c.server])}return function(n,e){Object.defineProperty(n,"ref",{get:function(){const u=new Es(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function Bk(n,e){const t={},r=e.length;for(let o=0;o<r;o++){const u=e[o];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const aF="prefixes";class yc{constructor(e,t,r,o){this.url=e,this.method=t,this.handler=r,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function vc(n){if(!n)throw Pk()}function CS(n,e){return function(r,o){const u=oF(n,o,e);return vc(null!==u),u}}function Jv(n){return function(t,r){let o;return o=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?new Or("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Or("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?function(n){return new Or("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function(n){return new Or("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,o.serverResponse=r.serverResponse,o}}function uC(n){const e=Jv(n);return function(r,o){let u=e(r,o);return 404===r.getStatus()&&(u=function(n){return new Or("object-not-found","Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=o.serverResponse,u}}function lF(n,e,t){const o=dh(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,p=new yc(o,"GET",CS(n,t),c);return p.errorHandler=uC(e),p}function lB(n,e,t,r,o){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),o&&(u.maxResults=o);const p=dh(e.bucketOnlyServerUrl(),n.host,n._protocol),w=n.maxOperationRetryTime,D=new yc(p,"GET",function(n,e){return function(r,o){const u=function(n,e,t){const r=Uk(t);return null===r?null:function(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[aF])for(const o of t[aF]){const u=o.replace(/\/$/,""),c=n._makeStorageReference(new Es(e,u));r.prefixes.push(c)}if(t.items)for(const o of t.items){const u=n._makeStorageReference(new Es(e,o.name));r.items.push(u)}return r}(n,e,r)}(n,e,o);return vc(null!==u),u}}(n,e.bucket),w);return D.urlParams=u,D.errorHandler=Jv(e),D}function dF(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function(n,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}class IS{constructor(e,t,r,o){this.current=e,this.total=t,this.finalized=!!r,this.metadata=o||null}}function jk(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(o){vc(!1)}return vc(!!t&&-1!==(e||["active"]).indexOf(t)),t}const _B={STATE_CHANGED:"state_changed"},zs={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function $k(n){switch(n){case"running":case"pausing":case"canceling":return zs.RUNNING;case"paused":return zs.PAUSED;case"success":return zs.SUCCESS;case"canceled":return zs.CANCELED;case"error":default:return zs.ERROR}}class yB{constructor(e,t,r){if(function(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function Xv(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class EB extends class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=cp.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=cp.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=cp.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,o){if(this.sent_)throw oC("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==o)for(const u in o)o.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,o[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw oC("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw oC("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw oC("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw oC("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function nl(){return new EB}class gF{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=aC(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=o=>{this._request=void 0,this._chunkMultiplier=1,o._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=o,this._transition("error"))},this._metadataErrorHandler=o=>{this._request=void 0,o._codeEquals("canceled")?this.completeTransitions_():(this._error=o,this._transition("error"))},this._promise=new Promise((o,u)=>{this._resolve=o,this._reject=u,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function(n,e,t,r,o){const u=e.bucketOnlyServerUrl(),c=dF(e,r,o),p={name:c.fullPath},y=dh(u,n.host,n._protocol),D={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},S=Bk(c,t),Y=new yc(y,"POST",function(_e){let xe;jk(_e);try{xe=_e.getResponseHeader("X-Goog-Upload-URL")}catch(dt){vc(!1)}return vc(ES(xe)),xe},n.maxUploadRetryTime);return Y.urlParams=p,Y.headers=D,Y.body=S,Y.errorHandler=Jv(e),Y}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,nl,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const o=function(n,e,t,r){const y=new yc(t,"POST",function(w){const D=jk(w,["active","final"]);let S=null;try{S=w.getResponseHeader("X-Goog-Upload-Size-Received")}catch(B){vc(!1)}S||vc(!1);const P=Number(S);return vc(!isNaN(P)),new IS(P,r.size(),"final"===D)},n.maxUploadRetryTime);return y.headers={"X-Goog-Upload-Command":"query"},y.errorHandler=Jv(e),y}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(o,nl,t,r);this._request=u,u.getPromise().then(c=>{c=c,this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new IS(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((o,u)=>{let c;try{c=function(n,e,t,r,o,u,c,p){const y=new IS(0,0);if(c?(y.current=c.current,y.total=c.total):(y.current=0,y.total=r.size()),r.size()!==y.total)throw new Or("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");const w=y.total-y.current;let D=w;o>0&&(D=Math.min(D,o));const S=y.current,Y={"X-Goog-Upload-Command":D===w?"upload, finalize":"upload","X-Goog-Upload-Offset":`${y.current}`},_e=r.slice(S,S+D);if(null===_e)throw Q1();const nt=new yc(t,"POST",function(st,Bt){const sn=jk(st,["active","final"]),ui=y.current+D,al=r.size();let tO;return tO="final"===sn?CS(e,u)(st,Bt):null,new IS(ui,al,"final"===sn,tO)},e.maxUploadRetryTime);return nt.headers=Y,nt.body=_e.uploadData(),nt.progressCallback=p||null,nt.errorHandler=Jv(n),nt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(y){return this._error=y,void this._transition("error")}const p=this._ref.storage._makeRequest(c,nl,o,u);this._request=p,p.getPromise().then(y=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(y.current),y.finalized?(this._metadata=y.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=lF(this._ref.storage,this._ref._location,this._mappings),o=this._ref.storage._makeRequest(r,nl,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function(n,e,t,r,o){const u=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},y=function(){let nt="";for(let st=0;st<2;st++)nt+=Math.random().toString().slice(2);return nt}();c["Content-Type"]="multipart/related; boundary="+y;const w=dF(e,r,o),D=Bk(w,t),B=_c.getBlob("--"+y+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+D+"\r\n--"+y+"\r\nContent-Type: "+w.contentType+"\r\n\r\n",r,"\r\n--"+y+"--");if(null===B)throw Q1();const Y={name:w.fullPath},_e=dh(u,n.host,n._protocol),dt=n.maxUploadRetryTime,lt=new yc(_e,"POST",CS(n,t),dt);return lt.urlParams=Y,lt.headers=c,lt.body=B.uploadData(),lt.errorHandler=Jv(e),lt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,nl,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=Y1(),this._state=e,this._notifyObservers();break;case"error":case"success":this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=$k(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,o){const u=new yB(t||void 0,r||void 0,o||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch($k(this._state)){case zs.SUCCESS:Xv(this._resolve.bind(null,this.snapshot))();break;case zs.CANCELED:case zs.ERROR:Xv(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch($k(this._state)){case zs.RUNNING:case zs.PAUSED:e.next&&Xv(e.next.bind(e,this.snapshot))();break;case zs.SUCCESS:e.complete&&Xv(e.complete.bind(e))();break;case zs.CANCELED:case zs.ERROR:e.error&&Xv(e.error.bind(e,this._error))();break;default:e.error&&Xv(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class qm{constructor(e,t){this._service=e,this._location=t instanceof Es?t:Es.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new qm(e,t)}get root(){const e=new Es(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return sF(this._location.path)}get storage(){return this._service}get parent(){const e=function(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Es(this._location.bucket,e);return new qm(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw X1(e)}}function _F(n,e,t){return Hk.apply(this,arguments)}function Hk(){return(Hk=(0,Ce.Z)(function*(n,e,t){const o=yield yF(n,{pageToken:t});e.prefixes.push(...o.prefixes),e.items.push(...o.items),null!=o.nextPageToken&&(yield _F(n,e,o.nextPageToken))})).apply(this,arguments)}function yF(n,e){null!=e&&"number"==typeof e.maxResults&&Fk("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=lB(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,nl)}function MB(n){n._throwIfRoot("getDownloadURL");const e=function(n,e,t){const o=dh(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,p=new yc(o,"GET",function(n,e){return function(r,o){const u=oF(n,o,e);return vc(null!==u),function(n,e,t,r){const o=Uk(e);if(null===o||!ES(o.downloadTokens))return null;const u=o.downloadTokens;if(0===u.length)return null;const c=encodeURIComponent;return u.split(",").map(w=>{const S=n.fullPath;return dh("/b/"+c(n.bucket)+"/o/"+c(S),t,r)+tF({alt:"media",token:w})})[0]}(u,o,n.host,n._protocol)}}(n,t),c);return p.errorHandler=uC(e),p}(n.storage,n._location,aC());return n.storage.makeRequestWithTokens(e,nl).then(t=>{if(null===t)throw new Or("no-download-url","The given file does not have any download URLs.");return t})}function vF(n,e){const t=function(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Es(n._location.bucket,t);return new qm(n.storage,r)}function EF(n,e){if(n instanceof Gk){const t=n;if(null==t._bucket)throw new Or("no-default-bucket","No default bucket found. Did you set the '"+K1+"' property when initializing the app?");const r=new qm(t,t._bucket);return null!=e?EF(r,e):r}return void 0!==e?vF(n,e):n}function FB(n,e){if(e&&function(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof Gk)return function(n,e){return new qm(n,e)}(n,e);throw Qv("To use ref(service, url), the first argument must be a Storage instance.")}return EF(n,e)}function wF(n,e){const t=null==e?void 0:e[K1];return null==t?null:Es.makeFromBucketSpec(t,n)}class Gk{constructor(e,t,r,o,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=o,this._firebaseVersion=u,this._bucket=null,this._host=z1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=o?Es.makeFromBucketSpec(o,this._host):wF(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Es.makeFromBucketSpec(this._url,e):wF(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Fk("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Fk("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Ce.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Ce.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new qm(this,e)}_makeRequest(e,t,r,o){if(this._deleted)return new M2(J1());{const u=function(n,e,t,r,o,u){const c=tF(n.urlParams),p=n.url+c,y=Object.assign({},n.headers);return function(n,e){e&&(n["X-Firebase-GMPID"]=e)}(y,e),function(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(y,t),function(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(y,u),function(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(y,r),new V2(p,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o)}(e,this._appId,r,o,t,this._firebaseVersion);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e,t){var r=this;return(0,Ce.Z)(function*(){const[o,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,o,u).getPromise()})()}}const bF="@firebase/storage";function TF(n,e){return FB(n=(0,F.m9)(n),e)}(0,Li._registerComponent)(new wo.wA("storage",function(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new Gk(t,r,o,e,Li.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,Li.registerVersion)(bF,"0.9.6",""),(0,Li.registerVersion)(bF,"0.9.6","esm2017");class TS{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class DF{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new TS(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new TS(r,this,this._ref))},t)}on(e,t,r,o){let u;return t&&(u="function"==typeof t?c=>t(new TS(c,this,this._ref)):{next:t.next?c=>t.next(new TS(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,o||void 0)}}class AF{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new hh(e,this._service))}get items(){return this._delegate.items.map(e=>new hh(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class hh{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function(n,e){return vF(n,e)}(this._delegate,e);return new hh(t,this.storage)}get root(){return new hh(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new hh(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new DF(function(n,e,t){return function(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new gF(n,new _c(e),t)}(n=(0,F.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=fa.RAW,r){this._throwIfRoot("putString");const o=Vk(t,e),u=Object.assign({},r);return null==u.contentType&&null!=o.contentType&&(u.contentType=o.contentType),new DF(new gF(this._delegate,new _c(o.data,!0),u),this)}listAll(){return function(n){return function(n){const e={prefixes:[],items:[]};return _F(n,e).then(()=>e)}(n=(0,F.m9)(n))}(this._delegate).then(e=>new AF(e,this.storage))}list(e){return function(n,e){return yF(n=(0,F.m9)(n),e)}(this._delegate,e||void 0).then(t=>new AF(t,this.storage))}getMetadata(){return function(n){return function(n){n._throwIfRoot("getMetadata");const e=lF(n.storage,n._location,aC());return n.storage.makeRequestWithTokens(e,nl)}(n=(0,F.m9)(n))}(this._delegate)}updateMetadata(e){return function(n,e){return function(n,e){n._throwIfRoot("updateMetadata");const t=function(n,e,t,r){const u=dh(e.fullServerUrl(),n.host,n._protocol),p=Bk(t,r),w=n.maxOperationRetryTime,D=new yc(u,"PATCH",CS(n,r),w);return D.headers={"Content-Type":"application/json; charset=utf-8"},D.body=p,D.errorHandler=uC(e),D}(n.storage,n._location,e,aC());return n.storage.makeRequestWithTokens(t,nl)}(n=(0,F.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function(n){return MB(n=(0,F.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(n){return function(n){n._throwIfRoot("deleteObject");const e=function(n,e){const r=dh(e.fullServerUrl(),n.host,n._protocol),p=new yc(r,"DELETE",function(y,w){},n.maxOperationRetryTime);return p.successCodes=[200,204],p.errorHandler=uC(e),p}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,nl)}(n=(0,F.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw X1(e)}}class SF{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(xF(e))throw Qv("ref() expected a child path but got a URL, use refFromURL instead.");return new hh(TF(this._delegate,e),this)}refFromURL(e){if(!xF(e))throw Qv("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Es.makeFromUrl(e,this._delegate.host)}catch(t){throw Qv("refFromUrl() expected a valid full URL but got an invalid one.")}return new hh(TF(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function(n,e,t,r={}){!function(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:o}=r;o&&(n._overrideAuthToken="string"==typeof o?o:(0,F.Sg)(o,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function xF(n){return/^[A-Za-z]+:\/\//.test(n)}function JB(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new SF(t,r)}function RF(n){const e=function(n){return new gr.y(e=>{const t=c=>e.next(c);t(n.snapshot);const u=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){u()}}).pipe(function(n,e=K_.P){return t=>t.lift(new m2(n,e))}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,pt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function DS(n){return{getDownloadURL:()=>(0,mt.of)(void 0).pipe(wn.fc,Rr(()=>n.getDownloadURL()),wn.iC),getMetadata:()=>(0,mt.of)(void 0).pipe(wn.fc,Rr(()=>n.getMetadata()),wn.iC),delete:()=>(0,Vt.D)(n.delete()),child:e=>DS(n.child(e)),updateMetadata:e=>(0,Vt.D)(n.updateMetadata(e)),put:(e,t)=>RF(n.put(e,t)),putString:(e,t,r)=>RF(n.putString(e,t,r)),list:e=>(0,Vt.D)(n.list(e)),listAll:()=>(0,Vt.D)(n.listAll())}}!function(n){const e={TaskState:zs,TaskEvent:_B,StringFormat:fa,Storage:SF,Reference:hh};n.INTERNAL.registerComponent(new wo.wA("storage-compat",JB,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.14")}(ZI.Z);const tj=new f.OlP("angularfire2.storageBucket"),nj=new f.OlP("angularfire2.storage.maxUploadRetryTime"),rj=new f.OlP("angularfire2.storage.maxOperationRetryTime"),ij=new f.OlP("angularfire2.storage.use-emulator");let sj=(()=>{class n{constructor(t,r,o,u,c,p,y,w,D,S){const P=(0,Ur.on)(t,c,r);this.storage=(0,Ur.cc)(`${P.name}.storage.${o}`,"AngularFireStorage",P.name,()=>{const B=c.runOutsideAngular(()=>P.storage(o||void 0)),Y=D;return Y&&B.useEmulator(...Y),y&&B.setMaxUploadRetryTime(y),w&&B.setMaxOperationRetryTime(w),B},[y,w])}ref(t){return DS(this.storage.ref(t))}refFromURL(t){return DS(this.storage.refFromURL(t))}upload(t,r,o){return DS(this.storage.ref(t)).put(r,o)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ur.Dh),f.LFG(Ur.xv,8),f.LFG(tj,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(wn.HU),f.LFG(nj,8),f.LFG(rj,8),f.LFG(ij,8),f.LFG(rC,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),oj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})(),aj=(()=>{class n{constructor(){yS.Z.registerVersion("angularfire",wn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[sj],imports:[oj]}),n})();var uj=V(8819);class cj{constructor(e,t){this.observables=e,this.project=t}call(e,t){return t.subscribe(new dj(e,this.observables,this.project))}}class dj extends $a{constructor(e,t,r){super(e),this.observables=t,this.project=r,this.toRespond=[];const o=t.length;this.values=new Array(o);for(let u=0;u<o;u++)this.toRespond.push(u);for(let u=0;u<o;u++)this.add(id(this,t[u],void 0,u))}notifyNext(e,t,r){this.values[r]=t;const o=this.toRespond;if(o.length>0){const u=o.indexOf(r);-1!==u&&o.splice(u,1)}}notifyComplete(){}_next(e){if(0===this.toRespond.length){const t=[e,...this.values];this.project?this._tryProject(t):this.destination.next(t)}}_tryProject(e){let t;try{t=this.project.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}class fj{constructor(e){this.predicate=e}call(e,t){return t.subscribe(new pj(e,this.predicate))}}class pj extends es.L{constructor(e,t){super(e),this.predicate=t,this.skipping=!0,this.index=0}_next(e){const t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)}tryCallPredicate(e){try{const t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(t){this.destination.error(t)}}}const NF="@firebase/database";let qk="";function kF(n){qk=n}class gj{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,F.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,F.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class mj{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,F.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const PF=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new gj(e)}}catch(e){}return new mj},Wm=PF("localStorage"),Wk=PF("sessionStorage"),eE=new Eo.Yd("@firebase/database"),OF=function(){let n=1;return function(){return n++}}(),FF=function(n){const e=(0,F.dS)(n),t=new F.gQ;t.update(e);const r=t.digest();return F.US.encodeByteArray(r)},lC=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=lC.apply(null,r):e+="object"==typeof r?(0,F.Pz)(r):r,e+=" "}return e};let Zm=null,LF=!0;const VF=function(n,e){(0,F.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(eE.logLevel=Eo.in.VERBOSE,Zm=eE.log.bind(eE),e&&Wk.set("logging_enabled",!0)):"function"==typeof n?Zm=n:(Zm=null,Wk.remove("logging_enabled"))},Gi=function(...n){if(!0===LF&&(LF=!1,null===Zm&&!0===Wk.get("logging_enabled")&&VF(!0)),Zm){const e=lC.apply(null,n);Zm(e)}},cC=function(n){return function(...e){Gi(n,...e)}},Zk=function(...n){const e="FIREBASE INTERNAL ERROR: "+lC(...n);eE.error(e)},Ec=function(...n){const e=`FIREBASE FATAL ERROR: ${lC(...n)}`;throw eE.error(e),new Error(e)},ws=function(...n){const e="FIREBASE WARNING: "+lC(...n);eE.warn(e)},AS=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},fh="[MIN_NAME]",wc="[MAX_NAME]",zm=function(n,e){if(n===e)return 0;if(n===fh||e===wc)return-1;if(e===fh||n===wc)return 1;{const t=SS(n),r=SS(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},vj=function(n,e){return n===e?0:n<e?-1:1},dC=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,F.Pz)(e))},zk=function(n){if("object"!=typeof n||null===n)return(0,F.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,F.Pz)(e[r]),t+=":",t+=zk(n[e[r]]);return t+="}",t},UF=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let o=0;o<t;o+=e)r.push(n.substring(o,o+e>t?t:o+e));return r};function qi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const BF=function(n){(0,F.hu)(!AS(n),"Invalid JSON number");const r=1023;let o,u,c,p,y;0===n?(u=0,c=0,o=1/n==-1/0?1:0):(o=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(p=Math.min(Math.floor(Math.log(n)/Math.LN2),r),u=p+r,c=Math.round(n*Math.pow(2,52-p)-Math.pow(2,52))):(u=0,c=Math.round(n/Math.pow(2,-1074))));const w=[];for(y=52;y;y-=1)w.push(c%2?1:0),c=Math.floor(c/2);for(y=11;y;y-=1)w.push(u%2?1:0),u=Math.floor(u/2);w.push(o?1:0),w.reverse();const D=w.join("");let S="";for(y=0;y<64;y+=8){let P=parseInt(D.substr(y,8),2).toString(16);1===P.length&&(P="0"+P),S+=P}return S.toLowerCase()},Cj=new RegExp("^-?(0*)\\d{1,10}$"),jF=-2147483648,Kk=2147483647,SS=function(n){if(Cj.test(n)){const e=Number(n);if(e>=jF&&e<=Kk)return e}return null},tE=function(n){try{n()}catch(e){setTimeout(()=>{throw ws("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},hC=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class Tj{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ws(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Dj{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(o=>this.auth_=o)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Gi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ws(e)}}let fC=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const WF=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,KF="websocket",YF="long_polling";class Qk{constructor(e,t,r,o,u=!1,c="",p=!1){this.secure=t,this.namespace=r,this.webSocketOnly=o,this.nodeAdmin=u,this.persistenceKey=c,this.includeNamespaceInQueryParams=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Wm.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Wm.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function QF(n,e,t){let r;if((0,F.hu)("string"==typeof e,"typeof type must == string"),(0,F.hu)("object"==typeof t,"typeof params must == object"),e===KF)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==YF)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const o=[];return qi(t,(u,c)=>{o.push(u+"="+c)}),r+o.join("&")}class Sj{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,F.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,F.p$)(this.counters_)}}const Jk={},Xk={};function eP(n){const e=n.toString();return Jk[e]||(Jk[e]=new Sj),Jk[e]}class Rj{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<r.length;++o)r[o]&&tE(()=>{this.onMessage_(r[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class dp{constructor(e,t,r,o,u,c,p){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=o,this.authToken=u,this.transportSessionId=c,this.lastSessionId=p,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=cC(e),this.stats_=eP(t),this.urlFn=y=>(this.appCheckToken&&(y.ac=this.appCheckToken),QF(t,YF,y))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Rj(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,F.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new tP((...u)=>{const[c,p,y,w,D]=u;if(this.incrementIncomingBytes_(u),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=p,this.password=y;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);p?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(p,()=>{this.onClosed_()})):this.onClosed_()}},(...u)=>{const[c,p]=u;this.incrementIncomingBytes_(u),this.myPacketOrderer.handleResponse(c,p)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&WF.test(location.hostname)&&(r.r="f");const o=this.urlFn(r);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){dp.forceAllow_=!0}static forceDisallow(){dp.forceDisallow_=!0}static isAvailable(){return!((0,F.Yr)()||!dp.forceAllow_&&(dp.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,F.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,F.h$)(t),o=UF(r,1840);for(let u=0;u<o.length;u++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[u]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,F.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,F.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class tP{constructor(e,t,r,o){if(this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,F.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=OF(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=tP.createIFrame_();let u="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(u='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+u+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(p){Gi("frame writing exception"),p.stack&&Gi(p.stack),Gi(p)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Gi("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+o+"="+c.seg+"&ts"+o+"="+c.ts+"&d"+o+"="+c.d,o++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},o=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(o),r()})}addTag(e,t){(0,F.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const o=r.readyState;(!o||"loaded"===o||"complete"===o)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Gi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let RS=null;"undefined"!=typeof MozWebSocket?RS=MozWebSocket:"undefined"!=typeof WebSocket&&(RS=WebSocket);let nE=(()=>{class n{constructor(t,r,o,u,c,p,y){this.connId=t,this.applicationId=o,this.appCheckToken=u,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=cC(this.connId),this.stats_=eP(r),this.connURL=n.connectionURL_(r,p,y,u,o),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,o,u,c){const p={v:"5"};return!(0,F.Yr)()&&"undefined"!=typeof location&&location.hostname&&WF.test(location.hostname)&&(p.r="f"),r&&(p.s=r),o&&(p.ls=o),u&&(p.ac=u),c&&(p.p=c),QF(t,KF,p)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Wm.set("previous_websocket_failure",!0);try{let o;if((0,F.Yr)()){const c={headers:{"User-Agent":`Firebase/5/${qk}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(c.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(c.headers["X-Firebase-AppCheck"]=this.appCheckToken);const p=process.env,y=0===this.connURL.indexOf("wss://")?p.HTTPS_PROXY||p.https_proxy:p.HTTP_PROXY||p.http_proxy;y&&(c.proxy={origin:y})}this.mySock=new RS(this.connURL,[],o)}catch(o){this.log_("Error instantiating WebSocket.");const u=o.message||o.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=o=>{this.handleIncomingFrame(o)},this.mySock.onerror=o=>{this.log_("WebSocket error.  Closing connection.");const u=o.message||o.data;u&&this.log_(u),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const o=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);o&&o.length>1&&parseFloat(o[1])<4.4&&(t=!0)}return!t&&null!==RS&&!n.forceDisallow_}static previouslyFailed(){return Wm.isInMemoryStorage||!0===Wm.get("previous_websocket_failure")}markConnectionHealthy(){Wm.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const o=(0,F.cI)(r);this.onMessage(o)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,F.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const o=this.extractFrameCount_(r);null!==o&&this.appendFrame_(o)}}send(t){this.resetKeepAlive();const r=(0,F.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const o=UF(r,16384);o.length>1&&this.sendString_(String(o.length));for(let u=0;u<o.length;u++)this.sendString_(o[u])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),iL=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[dp,nE]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=nE&&nE.isAvailable();let o=r&&!nE.previouslyFailed();if(t.webSocketOnly&&(r||ws("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[nE];else{const u=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&u.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class dL{constructor(e,t,r,o,u,c,p,y,w,D){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=o,this.authToken_=u,this.onMessage_=c,this.onReady_=p,this.onDisconnect_=y,this.onKill_=w,this.lastSessionId=D,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=cC("c:"+this.id+":"),this.transportManager_=new iL(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=hC(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=dC("t",e),r=dC("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=dC("t",e),r=dC("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=dC("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?Zk("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Zk("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,o=e.h;this.sessionId=e.s,this.repoInfo_.host=o,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&ws("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),hC(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):hC(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Wm.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class hL{put(e,t,r,o){}merge(e,t,r,o){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class fL{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,F.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let o=0;o<r.length;o++)r[o].callback.apply(r[o].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const o=this.getInitialEvent(e);o&&t.apply(r,o)}off(e,t,r){this.validateEventType_(e);const o=this.listeners_[e]||[];for(let u=0;u<o.length;u++)if(o[u].callback===t&&(!r||r===o[u].context))return void o.splice(u,1)}validateEventType_(e){(0,F.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class NS extends fL{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,F.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new NS}getInitialEvent(e){return(0,F.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Mn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[r]=this.pieces_[o],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function In(){return new Mn("")}function tn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function hp(n){return n.pieces_.length-n.pieceNum_}function Zn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Mn(n.pieces_,e)}function rP(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function pC(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function mL(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Mn(e,0)}function wr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Mn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let o=0;o<r.length;o++)r[o].length>0&&t.push(r[o])}return new Mn(t,0)}function nn(n){return n.pieceNum_>=n.pieces_.length}function Ks(n,e){const t=tn(n),r=tn(e);if(null===t)return e;if(t===r)return Ks(Zn(n),Zn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function Jj(n,e){const t=pC(n,0),r=pC(e,0);for(let o=0;o<t.length&&o<r.length;o++){const u=zm(t[o],r[o]);if(0!==u)return u}return t.length===r.length?0:t.length<r.length?-1:1}function iP(n,e){if(hp(n)!==hp(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function uu(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(hp(n)>hp(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class Xj{constructor(e,t){this.errorPrefix_=t,this.parts_=pC(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,F.ug)(this.parts_[r]);_L(this)}}function _L(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Km(n))}function Km(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class sP extends fL{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new sP}getInitialEvent(e){return(0,F.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const gC=1e3;let kS,Ym=(()=>{class n extends hL{constructor(t,r,o,u,c,p,y,w){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=o,this.onConnectStatus_=u,this.onServerInfoUpdate_=c,this.authTokenProvider_=p,this.appCheckTokenProvider_=y,this.authOverride_=w,this.id=n.nextPersistentConnectionId_++,this.log_=cC("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=gC,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,w&&!(0,F.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");sP.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&NS.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,o){const u=++this.requestNumber_,c={r:u,a:t,b:r};this.log_((0,F.Pz)(c)),(0,F.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),o&&(this.requestCBHash_[u]=o)}get(t){this.initConnection_();const r=new F.BH,o={p:t._path.toString(),q:t._queryObject},u={action:"g",request:o,onComplete:p=>{const y=p.d;"ok"===p.s?(this.onDataUpdate_(o.p,y,!1,null),r.resolve(y)):r.reject(y)}};this.outstandingGets_.push(u),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const p=this.outstandingGets_[c];void 0===p||u!==p||(delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+c+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(c),r.promise}listen(t,r,o,u){this.initConnection_();const c=t._queryIdentifier,p=t._path.toString();this.log_("Listen called for "+p+" "+c),this.listens.has(p)||this.listens.set(p,new Map),(0,F.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,F.hu)(!this.listens.get(p).has(c),"listen() called twice for same path/queryId.");const y={onComplete:u,hashFn:r,query:t,tag:o};this.listens.get(p).set(c,y),this.connected_&&this.sendListen_(y)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,o=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(o)})}sendListen_(t){const r=t.query,o=r._path.toString(),u=r._queryIdentifier;this.log_("Listen on "+o+" for "+u);const c={p:o};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,y=>{const w=y.d,D=y.s;n.warnOnListenWarnings_(w,r),(this.listens.get(o)&&this.listens.get(o).get(u))===t&&(this.log_("listen response",y),"ok"!==D&&this.removeListen_(o,u),t.onComplete&&t.onComplete(D,w))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,F.r3)(t,"w")){const o=(0,F.DV)(t,"w");if(Array.isArray(o)&&~o.indexOf("no_index")){const u='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();ws(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${u} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,F.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,F.w9)(t)?"auth":"gauth",o={cred:t};null===this.authOverride_?o.noauth=!0:"object"==typeof this.authOverride_&&(o.authvar=this.authOverride_),this.sendRequest(r,o,u=>{const c=u.s,p=u.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,p))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,o=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,o)})}unlisten(t,r){const o=t._path.toString(),u=t._queryIdentifier;this.log_("Unlisten called for "+o+" "+u),(0,F.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(o,u)&&this.connected_&&this.sendUnlisten_(o,u,t._queryObject,r)}sendUnlisten_(t,r,o,u){this.log_("Unlisten on "+t+" for "+r);const c={p:t};u&&(c.q=o,c.t=u),this.sendRequest("n",c)}onDisconnectPut(t,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:o})}onDisconnectMerge(t,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:o})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,o,u){const c={p:r,d:o};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,p=>{u&&setTimeout(()=>{u(p.s,p.d)},Math.floor(0))})}put(t,r,o,u){this.putInternal("p",t,r,o,u)}merge(t,r,o,u){this.putInternal("m",t,r,o,u)}putInternal(t,r,o,u,c){this.initConnection_();const p={p:r,d:o};void 0!==c&&(p.h=c),this.outstandingPuts_.push({action:t,request:p,onComplete:u}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,o=this.outstandingPuts_[t].request,u=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,o,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),u&&u(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,o=>{"ok"!==o.s&&this.log_("reportStats","Error sending stats: "+o.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,F.Pz)(t));const r=t.r,o=this.requestCBHash_[r];o&&(delete this.requestCBHash_[r],o(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):Zk("Unrecognized action received from server: "+(0,F.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,F.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=gC,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=gC,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=gC),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Ce.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),o=t.onReady_.bind(t),u=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,p=t.lastSessionId;let y=!1,w=null;const D=function(){w?w.close():(y=!0,u())};t.realtime_={close:D,sendRequest:function(B){(0,F.hu)(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(B)}};const P=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[B,Y]=yield Promise.all([t.authTokenProvider_.getToken(P),t.appCheckTokenProvider_.getToken(P)]);y?Gi("getToken() completed but was canceled"):(Gi("getToken() completed. Creating connection."),t.authToken_=B&&B.accessToken,t.appCheckToken_=Y&&Y.token,w=new dL(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,o,u,_e=>{ws(_e+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},p))}catch(B){t.log_("Failed to get token: "+B),y||(t.repoInfo_.nodeAdmin&&ws(B),D())}}})()}interrupt(t){Gi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Gi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,F.xb)(this.interruptReasons_)&&(this.reconnectDelay_=gC,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let o;o=r?r.map(c=>zk(c)).join("$"):"default";const u=this.removeListen_(t,o);u&&u.onComplete&&u.onComplete("permission_denied")}removeListen_(t,r){const o=new Mn(t).toString();let u;if(this.listens.has(o)){const c=this.listens.get(o);u=c.get(r),c.delete(r),0===c.size&&this.listens.delete(o)}else u=void 0;return u}onAuthRevoked_(t,r){Gi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Gi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,F.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+qk.replace(/\./g,"-")]=1,(0,F.uI)()?t["framework.cordova"]=1:(0,F.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=NS.getInstance().currentlyOnline();return(0,F.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class rn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new rn(e,t)}}class MS{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new rn(fh,e),o=new rn(fh,t);return 0!==this.compare(r,o)}minPost(){return rn.MIN}}class EL extends MS{static get __EMPTY_NODE(){return kS}static set __EMPTY_NODE(e){kS=e}compare(e,t){return zm(e.name,t.name)}isDefinedOn(e){throw(0,F.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return rn.MIN}maxPost(){return new rn(wc,kS)}makePost(e,t){return(0,F.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new rn(e,kS)}toString(){return".key"}}const bc=new EL;class PS{constructor(e,t,r,o,u=null){this.isReverse_=o,this.resultGenerator_=u,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=t?r(e.key,t):1,o&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let aP,rl=(()=>{class n{constructor(t,r,o,u,c){this.key=t,this.value=r,this.color=null!=o?o:n.RED,this.left=null!=u?u:Mo.EMPTY_NODE,this.right=null!=c?c:Mo.EMPTY_NODE}copy(t,r,o,u,c){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=o?o:this.color,null!=u?u:this.left,null!=c?c:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,o){let u=this;const c=o(t,u.key);return u=c<0?u.copy(null,null,null,u.left.insert(t,r,o),null):0===c?u.copy(null,r,null,null,null):u.copy(null,null,null,null,u.right.insert(t,r,o)),u.fixUp_()}removeMin_(){if(this.left.isEmpty())return Mo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let o,u;if(o=this,r(t,o.key)<0)!o.left.isEmpty()&&!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.remove(t,r),null);else{if(o.left.isRed_()&&(o=o.rotateRight_()),!o.right.isEmpty()&&!o.right.isRed_()&&!o.right.left.isRed_()&&(o=o.moveRedRight_()),0===r(t,o.key)){if(o.right.isEmpty())return Mo.EMPTY_NODE;u=o.right.min_(),o=o.copy(u.key,u.value,null,null,o.right.removeMin_())}o=o.copy(null,null,null,null,o.right.remove(t,r))}return o.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Mo{constructor(e,t=Mo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Mo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,rl.BLACK,null,null))}remove(e){return new Mo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,rl.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,o=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return o?o.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(o=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new PS(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new PS(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new PS(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new PS(this.root_,null,this.comparator_,!0,e)}}function u$(n,e){return zm(n.name,e.name)}function oP(n,e){return zm(n,e)}Mo.EMPTY_NODE=new class{copy(e,t,r,o,u){return this}insert(e,t,r){return new rl(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const wL=function(n){return"number"==typeof n?"number:"+BF(n):"string:"+n},bL=function(n){if(n.isLeafNode()){const e=n.val();(0,F.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,F.r3)(e,".sv"),"Priority must be a string or number.")}else(0,F.hu)(n===aP||n.isEmpty(),"priority of unexpected type.");(0,F.hu)(n===aP||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let CL,IL,TL,rE=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,F.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),bL(this.priorityNode_)}static set __childrenNodeConstructor(t){CL=t}static get __childrenNodeConstructor(){return CL}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return nn(t)?this:".priority"===tn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const o=tn(t);return null===o?r:r.isEmpty()&&".priority"!==o?this:((0,F.hu)(".priority"!==o||1===hp(t),".priority must be the last token in a path"),this.updateImmediateChild(o,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Zn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+wL(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?BF(this.value_):this.value_,this.lazyHash_=FF(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,F.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,o=typeof this.value_,u=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(o);return(0,F.hu)(u>=0,"Unknown leaf type: "+r),(0,F.hu)(c>=0,"Unknown leaf type: "+o),u===c?"object"===o?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-u}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const ir=new class extends MS{compare(e,t){const r=e.node.getPriority(),o=t.node.getPriority(),u=r.compareTo(o);return 0===u?zm(e.name,t.name):u}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return rn.MIN}maxPost(){return new rn(wc,new rE("[PRIORITY-POST]",TL))}makePost(e,t){const r=IL(e);return new rn(t,new rE("[PRIORITY-POST]",r))}toString(){return".priority"}},f$=Math.log(2);class p${constructor(e){this.count=parseInt(Math.log(e+1)/f$,10),this.current_=this.count-1;const o=(u=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&o}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const OS=function(n,e,t,r){n.sort(e);const o=function(y,w){const D=w-y;let S,P;if(0===D)return null;if(1===D)return S=n[y],P=t?t(S):S,new rl(P,S.node,rl.BLACK,null,null);{const B=parseInt(D/2,10)+y,Y=o(y,B),_e=o(B+1,w);return S=n[B],P=t?t(S):S,new rl(P,S.node,rl.BLACK,Y,_e)}},p=function(y){let w=null,D=null,S=n.length;const P=function(Y,_e){const xe=S-Y,dt=S;S-=Y;const lt=o(xe+1,dt),nt=n[xe],st=t?t(nt):nt;B(new rl(st,nt.node,_e,null,lt))},B=function(Y){w?(w.left=Y,w=Y):(D=Y,w=Y)};for(let Y=0;Y<y.count;++Y){const _e=y.nextBitIsOne(),xe=Math.pow(2,y.count-(Y+1));_e?P(xe,rl.BLACK):(P(xe,rl.BLACK),P(xe,rl.RED))}return D}(new p$(n.length));return new Mo(r||e,p)};let uP;const iE={};class ph{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,F.hu)(iE&&ir,"ChildrenNode.ts has not been loaded"),uP=uP||new ph({".priority":iE},{".priority":ir}),uP}get(e){const t=(0,F.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Mo?t:null}hasIndex(e){return(0,F.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,F.hu)(e!==bc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let o=!1;const u=t.getIterator(rn.Wrap);let p,c=u.getNext();for(;c;)o=o||e.isDefinedOn(c.node),r.push(c),c=u.getNext();p=o?OS(r,e.getCompare()):iE;const y=e.toString(),w=Object.assign({},this.indexSet_);w[y]=e;const D=Object.assign({},this.indexes_);return D[y]=p,new ph(D,w)}addToIndexes(e,t){const r=(0,F.UI)(this.indexes_,(o,u)=>{const c=(0,F.DV)(this.indexSet_,u);if((0,F.hu)(c,"Missing index implementation for "+u),o===iE){if(c.isDefinedOn(e.node)){const p=[],y=t.getIterator(rn.Wrap);let w=y.getNext();for(;w;)w.name!==e.name&&p.push(w),w=y.getNext();return p.push(e),OS(p,c.getCompare())}return iE}{const p=t.get(e.name);let y=o;return p&&(y=y.remove(new rn(e.name,p))),y.insert(e,e.node)}});return new ph(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,F.UI)(this.indexes_,o=>{if(o===iE)return o;{const u=t.get(e.name);return u?o.remove(new rn(e.name,u)):o}});return new ph(r,this.indexSet_)}}let mC,qt=(()=>{class n{constructor(t,r,o){this.children_=t,this.priorityNode_=r,this.indexMap_=o,this.lazyHash_=null,this.priorityNode_&&bL(this.priorityNode_),this.children_.isEmpty()&&(0,F.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return mC||(mC=new n(new Mo(oP),null,ph.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||mC}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?mC:r}}getChild(t){const r=tn(t);return null===r?this:this.getImmediateChild(r).getChild(Zn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,F.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const o=new rn(t,r);let u,c;r.isEmpty()?(u=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(o,this.children_)):(u=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(o,this.children_));const p=u.isEmpty()?mC:this.priorityNode_;return new n(u,p,c)}}updateChild(t,r){const o=tn(t);if(null===o)return r;{(0,F.hu)(".priority"!==tn(t)||1===hp(t),".priority must be the last token in a path");const u=this.getImmediateChild(o).updateChild(Zn(t),r);return this.updateImmediateChild(o,u)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let o=0,u=0,c=!0;if(this.forEachChild(ir,(p,y)=>{r[p]=y.val(t),o++,c&&n.INTEGER_REGEXP_.test(p)?u=Math.max(u,Number(p)):c=!1}),!t&&c&&u<2*o){const p=[];for(const y in r)p[y]=r[y];return p}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+wL(this.getPriority().val())+":"),this.forEachChild(ir,(r,o)=>{const u=o.hash();""!==u&&(t+=":"+r+":"+u)}),this.lazyHash_=""===t?"":FF(t)}return this.lazyHash_}getPredecessorChildName(t,r,o){const u=this.resolveIndex_(o);if(u){const c=u.getPredecessorKey(new rn(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const o=r.minKey();return o&&o.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new rn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const o=r.maxKey();return o&&o.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new rn(r,this.children_.get(r)):null}forEachChild(t,r){const o=this.resolveIndex_(t);return o?o.inorderTraversal(u=>r(u.name,u.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const o=this.resolveIndex_(r);if(o)return o.getIteratorFrom(t,u=>u);{const u=this.children_.getIteratorFrom(t.name,rn.Wrap);let c=u.peek();for(;null!=c&&r.compare(c,t)<0;)u.getNext(),c=u.peek();return u}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const o=this.resolveIndex_(r);if(o)return o.getReverseIteratorFrom(t,u=>u);{const u=this.children_.getReverseIteratorFrom(t.name,rn.Wrap);let c=u.peek();for(;null!=c&&r.compare(c,t)>0;)u.getNext(),c=u.peek();return u}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===_C?-1:0}withIndex(t){if(t===bc||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===bc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const o=this.getIterator(ir),u=r.getIterator(ir);let c=o.getNext(),p=u.getNext();for(;c&&p;){if(c.name!==p.name||!c.node.equals(p.node))return!1;c=o.getNext(),p=u.getNext()}return null===c&&null===p}return!1}return!1}}resolveIndex_(t){return t===bc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const _C=new class extends qt{constructor(){super(new Mo(oP),qt.EMPTY_NODE,ph.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return qt.EMPTY_NODE}isEmpty(){return!1}};function Ir(n,e=null){if(null===n)return qt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,F.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new rE(n,Ir(e));if(n instanceof Array){let t=qt.EMPTY_NODE;return qi(n,(r,o)=>{if((0,F.r3)(n,r)&&"."!==r.substring(0,1)){const u=Ir(o);(u.isLeafNode()||!u.isEmpty())&&(t=t.updateImmediateChild(r,u))}}),t.updatePriority(Ir(e))}{const t=[];let r=!1;if(qi(n,(c,p)=>{if("."!==c.substring(0,1)){const y=Ir(p);y.isEmpty()||(r=r||!y.getPriority().isEmpty(),t.push(new rn(c,y)))}}),0===t.length)return qt.EMPTY_NODE;const u=OS(t,u$,c=>c.name,oP);if(r){const c=OS(t,ir.getCompare());return new qt(u,Ir(e),new ph({".priority":c},{".priority":ir}))}return new qt(u,Ir(e),ph.Default)}}Object.defineProperties(rn,{MIN:{value:new rn(fh,qt.EMPTY_NODE)},MAX:{value:new rn(wc,_C)}}),EL.__EMPTY_NODE=qt.EMPTY_NODE,rE.__childrenNodeConstructor=qt,function(n){aP=n}(_C),function(n){TL=n}(_C),function(n){IL=n}(Ir);class lP extends MS{constructor(e){super(),this.indexPath_=e,(0,F.hu)(!nn(e)&&".priority"!==tn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),o=this.extractChild(t.node),u=r.compareTo(o);return 0===u?zm(e.name,t.name):u}makePost(e,t){const r=Ir(e),o=qt.EMPTY_NODE.updateChild(this.indexPath_,r);return new rn(t,o)}maxPost(){const e=qt.EMPTY_NODE.updateChild(this.indexPath_,_C);return new rn(wc,e)}toString(){return pC(this.indexPath_,0).join("/")}}const cP=new class extends MS{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?zm(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return rn.MIN}maxPost(){return rn.MAX}makePost(e,t){const r=Ir(e);return new rn(t,r)}toString(){return".value"}},sE="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",y$=function(){let n=0;const e=[];return function(t){const r=t===n;let o;n=t;const u=new Array(8);for(o=7;o>=0;o--)u[o]=sE.charAt(t%64),t=Math.floor(t/64);(0,F.hu)(0===t,"Cannot push at time == 0");let c=u.join("");if(r){for(o=11;o>=0&&63===e[o];o--)e[o]=0;e[o]++}else for(o=0;o<12;o++)e[o]=Math.floor(64*Math.random());for(o=0;o<12;o++)c+=sE.charAt(e[o]);return(0,F.hu)(20===c.length,"nextPushId: Length should be 20."),c}}(),SL=function(n){if(n===""+Kk)return"-";const e=SS(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let c=0;c<t.length;c++)t[c]=n.charAt(c);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return wc;const u=sE.charAt(sE.indexOf(t[r])+1);return t[r]=u,t.slice(0,r+1).join("")},xL=function(n){if(n===""+jF)return fh;const e=SS(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+Kk:(delete t[t.length-1],t.join("")):(t[t.length-1]=sE.charAt(sE.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function RL(n){return{type:"value",snapshotNode:n}}function oE(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function yC(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function vC(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class hP{constructor(e){this.index_=e}updateChild(e,t,r,o,u,c){(0,F.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const p=e.getImmediateChild(t);return p.getChild(o).equals(r.getChild(o))&&p.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?e.hasChild(t)?c.trackChildChange(yC(t,p)):(0,F.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):p.isEmpty()?c.trackChildChange(oE(t,r)):c.trackChildChange(vC(t,r,p))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(ir,(o,u)=>{t.hasChild(o)||r.trackChildChange(yC(o,u))}),t.isLeafNode()||t.forEachChild(ir,(o,u)=>{if(e.hasChild(o)){const c=e.getImmediateChild(o);c.equals(u)||r.trackChildChange(vC(o,u,c))}else r.trackChildChange(oE(o,u))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?qt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class EC{constructor(e){this.indexedFilter_=new hP(e.getIndex()),this.index_=e.getIndex(),this.startPost_=EC.getStartPost_(e),this.endPost_=EC.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,o,u,c){return this.matches(new rn(t,r))||(r=qt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,o,u,c)}updateFullNode(e,t,r){t.isLeafNode()&&(t=qt.EMPTY_NODE);let o=t.withIndex(this.index_);o=o.updatePriority(qt.EMPTY_NODE);const u=this;return t.forEachChild(ir,(c,p)=>{u.matches(new rn(c,p))||(o=o.updateImmediateChild(c,qt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,o,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class E${constructor(e){this.rangedFilter_=new EC(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,o,u,c){return this.rangedFilter_.matches(new rn(t,r))||(r=qt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,o,u,c):this.fullLimitUpdateChild_(e,t,r,u,c)}updateFullNode(e,t,r){let o;if(t.isLeafNode()||t.isEmpty())o=qt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let u;o=qt.EMPTY_NODE.withIndex(this.index_),u=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;u.hasNext()&&c<this.limit_;){const p=u.getNext();let y;if(y=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),p)<=0:this.index_.compare(p,this.rangedFilter_.getEndPost())<=0,!y)break;o=o.updateImmediateChild(p.name,p.node),c++}}else{let u,c,p,y;if(o=t.withIndex(this.index_),o=o.updatePriority(qt.EMPTY_NODE),this.reverse_){y=o.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const S=this.index_.getCompare();p=(P,B)=>S(B,P)}else y=o.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),p=this.index_.getCompare();let w=0,D=!1;for(;y.hasNext();){const S=y.getNext();!D&&p(u,S)<=0&&(D=!0),D&&w<this.limit_&&p(S,c)<=0?w++:o=o.updateImmediateChild(S.name,qt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,o,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,o,u){let c;if(this.reverse_){const S=this.index_.getCompare();c=(P,B)=>S(B,P)}else c=this.index_.getCompare();const p=e;(0,F.hu)(p.numChildren()===this.limit_,"");const y=new rn(t,r),w=this.reverse_?p.getFirstChild(this.index_):p.getLastChild(this.index_),D=this.rangedFilter_.matches(y);if(p.hasChild(t)){const S=p.getImmediateChild(t);let P=o.getChildAfterChild(this.index_,w,this.reverse_);for(;null!=P&&(P.name===t||p.hasChild(P.name));)P=o.getChildAfterChild(this.index_,P,this.reverse_);const B=null==P?1:c(P,y);if(D&&!r.isEmpty()&&B>=0)return null!=u&&u.trackChildChange(vC(t,r,S)),p.updateImmediateChild(t,r);{null!=u&&u.trackChildChange(yC(t,S));const _e=p.updateImmediateChild(t,qt.EMPTY_NODE);return null!=P&&this.rangedFilter_.matches(P)?(null!=u&&u.trackChildChange(oE(P.name,P.node)),_e.updateImmediateChild(P.name,P.node)):_e}}return r.isEmpty()?e:D&&c(w,y)>=0?(null!=u&&(u.trackChildChange(yC(w.name,w.node)),u.trackChildChange(oE(t,r))),p.updateImmediateChild(t,r).updateImmediateChild(w.name,qt.EMPTY_NODE)):e}}class FS{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ir}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:fh}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:wc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,F.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ir}copy(){const e=new FS;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function fP(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function pP(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function LS(n,e){const t=n.copy();return t.index_=e,t}function NL(n){const e={};if(n.isDefault())return e;let t;return n.index_===ir?t="$priority":n.index_===cP?t="$value":n.index_===bc?t="$key":((0,F.hu)(n.index_ instanceof lP,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,F.Pz)(t),n.startSet_&&(e.startAt=(0,F.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,F.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,F.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,F.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function ML(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==ir&&(e.i=n.index_.toString()),e}class VS extends hL{constructor(e,t,r,o){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=o,this.log_=cC("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,F.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,o){const u=e._path.toString();this.log_("Listen called for "+u+" "+e._queryIdentifier);const c=VS.getListenId_(e,r),p={};this.listens_[c]=p;const y=NL(e._queryParams);this.restRequest_(u+".json",y,(w,D)=>{let S=D;if(404===w&&(S=null,w=null),null===w&&this.onDataUpdate_(u,S,!1,r),(0,F.DV)(this.listens_,c)===p){let P;P=w?401===w?"permission_denied":"rest_error:"+w:"ok",o(P,null)}})}unlisten(e,t){const r=VS.getListenId_(e,t);delete this.listens_[r]}get(e){const t=NL(e._queryParams),r=e._path.toString(),o=new F.BH;return this.restRequest_(r+".json",t,(u,c)=>{let p=c;404===u&&(p=null,u=null),null===u?(this.onDataUpdate_(r,p,!1,null),o.resolve(p)):o.reject(new Error(p))}),o.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,u])=>{o&&o.accessToken&&(t.auth=o.accessToken),u&&u.token&&(t.ac=u.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,F.xO)(t);this.log_("Sending REST request for "+c);const p=new XMLHttpRequest;p.onreadystatechange=()=>{if(r&&4===p.readyState){this.log_("REST Response for "+c+" received. status:",p.status,"response:",p.responseText);let y=null;if(p.status>=200&&p.status<300){try{y=(0,F.cI)(p.responseText)}catch(w){ws("Failed to parse JSON response for "+c+": "+p.responseText)}r(null,y)}else 401!==p.status&&404!==p.status&&ws("Got unsuccessful REST response for "+c+" Status: "+p.status),r(p.status);r=null}},p.open("GET",c,!0),p.send()})}}class D${constructor(){this.rootNode_=qt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function US(){return{value:null,children:new Map}}function aE(n,e,t){if(nn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=tn(e);n.children.has(r)||n.children.set(r,US()),aE(n.children.get(r),e=Zn(e),t)}}function gP(n,e){if(nn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(ir,(r,o)=>{aE(n,new Mn(r),o)}),gP(n,e)}}if(n.children.size>0){const t=tn(e);return e=Zn(e),n.children.has(t)&&gP(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function mP(n,e,t){null!==n.value?t(e,n.value):function(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,o)=>{mP(o,new Mn(e.toString()+"/"+r),t)})}class S${constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&qi(this.last_,(r,o)=>{t[r]=t[r]-o}),this.last_=e,t}}class N${constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new S$(e);const r=1e4+2e4*Math.random();hC(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;qi(e,(o,u)=>{u>0&&(0,F.r3)(this.statsToReport_,o)&&(t[o]=u,r=!0)}),r&&this.server_.reportStats(t),hC(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var lu=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(lu||(lu={})),lu))();function vP(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class BS{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=lu.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(nn(this.path)){if(null!=this.affectedTree.value)return(0,F.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Mn(e));return new BS(In(),t,this.revert)}}return(0,F.hu)(tn(this.path)===e,"operationForChild called for unrelated child."),new BS(Zn(this.path),this.affectedTree,this.revert)}}class wC{constructor(e,t){this.source=e,this.path=t,this.type=lu.LISTEN_COMPLETE}operationForChild(e){return nn(this.path)?new wC(this.source,In()):new wC(this.source,Zn(this.path))}}class Qm{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=lu.OVERWRITE}operationForChild(e){return nn(this.path)?new Qm(this.source,In(),this.snap.getImmediateChild(e)):new Qm(this.source,Zn(this.path),this.snap)}}class uE{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=lu.MERGE}operationForChild(e){if(nn(this.path)){const t=this.children.subtree(new Mn(e));return t.isEmpty()?null:t.value?new Qm(this.source,In(),t.value):new uE(this.source,In(),t)}return(0,F.hu)(tn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new uE(this.source,Zn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class fp{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(nn(e))return this.isFullyInitialized()&&!this.filtered_;const t=tn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class M${constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function bC(n,e,t,r,o,u){const c=r.filter(p=>p.type===t);c.sort((p,y)=>function(n,e,t){if(null==e.childName||null==t.childName)throw(0,F.g5)("Should only compare child_ events.");const r=new rn(e.childName,e.snapshotNode),o=new rn(t.childName,t.snapshotNode);return n.index_.compare(r,o)}(n,p,y)),c.forEach(p=>{const y=function(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,p,u);o.forEach(w=>{w.respondsTo(p.type)&&e.push(w.createEvent(y,n.query_))})})}function jS(n,e){return{eventCache:n,serverCache:e}}function CC(n,e,t,r){return jS(new fp(e,t,r),n.serverCache)}function PL(n,e,t,r){return jS(n.eventCache,new fp(e,t,r))}function $S(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Jm(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let EP;class sr{constructor(e,t=(()=>(EP||(EP=new Mo(vj)),EP))()){this.value=e,this.children=t}static fromObject(e){let t=new sr(null);return qi(e,(r,o)=>{t=t.set(new Mn(r),o)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:In(),value:this.value};if(nn(e))return null;{const r=tn(e),o=this.children.get(r);if(null!==o){const u=o.findRootMostMatchingPathAndValue(Zn(e),t);return null!=u?{path:wr(new Mn(r),u.path),value:u.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(nn(e))return this;{const t=tn(e),r=this.children.get(t);return null!==r?r.subtree(Zn(e)):new sr(null)}}set(e,t){if(nn(e))return new sr(t,this.children);{const r=tn(e),u=(this.children.get(r)||new sr(null)).set(Zn(e),t),c=this.children.insert(r,u);return new sr(this.value,c)}}remove(e){if(nn(e))return this.children.isEmpty()?new sr(null):new sr(null,this.children);{const t=tn(e),r=this.children.get(t);if(r){const o=r.remove(Zn(e));let u;return u=o.isEmpty()?this.children.remove(t):this.children.insert(t,o),null===this.value&&u.isEmpty()?new sr(null):new sr(this.value,u)}return this}}get(e){if(nn(e))return this.value;{const t=tn(e),r=this.children.get(t);return r?r.get(Zn(e)):null}}setTree(e,t){if(nn(e))return t;{const r=tn(e),u=(this.children.get(r)||new sr(null)).setTree(Zn(e),t);let c;return c=u.isEmpty()?this.children.remove(r):this.children.insert(r,u),new sr(this.value,c)}}fold(e){return this.fold_(In(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((o,u)=>{r[o]=u.fold_(wr(e,o),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,In(),t)}findOnPath_(e,t,r){const o=!!this.value&&r(t,this.value);if(o)return o;if(nn(e))return null;{const u=tn(e),c=this.children.get(u);return c?c.findOnPath_(Zn(e),wr(t,u),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,In(),t)}foreachOnPath_(e,t,r){if(nn(e))return this;{this.value&&r(t,this.value);const o=tn(e),u=this.children.get(o);return u?u.foreachOnPath_(Zn(e),wr(t,o),r):new sr(null)}}foreach(e){this.foreach_(In(),e)}foreach_(e,t){this.children.inorderTraversal((r,o)=>{o.foreach_(wr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class il{constructor(e){this.writeTree_=e}static empty(){return new il(new sr(null))}}function IC(n,e,t){if(nn(e))return new il(new sr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const o=r.path;let u=r.value;const c=Ks(o,e);return u=u.updateChild(c,t),new il(n.writeTree_.set(o,u))}{const o=new sr(t),u=n.writeTree_.setTree(e,o);return new il(u)}}}function wP(n,e,t){let r=n;return qi(t,(o,u)=>{r=IC(r,wr(e,o),u)}),r}function OL(n,e){if(nn(e))return il.empty();{const t=n.writeTree_.setTree(e,new sr(null));return new il(t)}}function bP(n,e){return null!=Xm(n,e)}function Xm(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Ks(t.path,e)):null}function FL(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(ir,(r,o)=>{e.push(new rn(r,o))}):n.writeTree_.children.inorderTraversal((r,o)=>{null!=o.value&&e.push(new rn(r,o.value))}),e}function pp(n,e){if(nn(e))return n;{const t=Xm(n,e);return new il(null!=t?new sr(t):n.writeTree_.subtree(e))}}function CP(n){return n.writeTree_.isEmpty()}function lE(n,e){return LL(In(),n.writeTree_,e)}function LL(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((o,u)=>{".priority"===o?((0,F.hu)(null!==u.value,"Priority writes must always be leaf nodes"),r=u.value):t=LL(wr(n,o),u,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(wr(n,".priority"),r)),t}}function HS(n,e){return $L(e,n)}function j$(n,e){if(n.snap)return uu(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&uu(wr(n.path,t),e))return!0;return!1}function H$(n){return n.visible}function VL(n,e,t){let r=il.empty();for(let o=0;o<n.length;++o){const u=n[o];if(e(u)){const c=u.path;let p;if(u.snap)uu(t,c)?(p=Ks(t,c),r=IC(r,p,u.snap)):uu(c,t)&&(p=Ks(c,t),r=IC(r,In(),u.snap.getChild(p)));else{if(!u.children)throw(0,F.g5)("WriteRecord should have .snap or .children");if(uu(t,c))p=Ks(t,c),r=wP(r,p,u.children);else if(uu(c,t))if(p=Ks(c,t),nn(p))r=wP(r,In(),u.children);else{const y=(0,F.DV)(u.children,tn(p));if(y){const w=y.getChild(Zn(p));r=IC(r,In(),w)}}}}}return r}function UL(n,e,t,r,o){if(r||o){const u=pp(n.visibleWrites,e);return!o&&CP(u)?t:o||null!=t||bP(u,In())?lE(VL(n.allWrites,function(w){return(w.visible||o)&&(!r||!~r.indexOf(w.writeId))&&(uu(w.path,e)||uu(e,w.path))},e),t||qt.EMPTY_NODE):null}{const u=Xm(n.visibleWrites,e);if(null!=u)return u;{const c=pp(n.visibleWrites,e);return CP(c)?t:null!=t||bP(c,In())?lE(c,t||qt.EMPTY_NODE):null}}}function GS(n,e,t,r){return UL(n.writeTree,n.treePath,e,t,r)}function IP(n,e){return function(n,e,t){let r=qt.EMPTY_NODE;const o=Xm(n.visibleWrites,e);if(o)return o.isLeafNode()||o.forEachChild(ir,(u,c)=>{r=r.updateImmediateChild(u,c)}),r;if(t){const u=pp(n.visibleWrites,e);return t.forEachChild(ir,(c,p)=>{const y=lE(pp(u,new Mn(c)),p);r=r.updateImmediateChild(c,y)}),FL(u).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return FL(pp(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function BL(n,e,t,r){return function(n,e,t,r,o){(0,F.hu)(r||o,"Either existingEventSnap or existingServerSnap must exist");const u=wr(e,t);if(bP(n.visibleWrites,u))return null;{const c=pp(n.visibleWrites,u);return CP(c)?o.getChild(t):lE(c,o.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function qS(n,e){return function(n,e){return Xm(n.visibleWrites,e)}(n.writeTree,wr(n.treePath,e))}function TP(n,e,t){return function(n,e,t,r){const o=wr(e,t),u=Xm(n.visibleWrites,o);return null!=u?u:r.isCompleteForChild(t)?lE(pp(n.visibleWrites,o),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function jL(n,e){return $L(wr(n.treePath,e),n.writeTree)}function $L(n,e){return{treePath:n,writeTree:e}}class Q${constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,F.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,F.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const o=this.changeMap.get(r);if(o){const u=o.type;if("child_added"===t&&"child_removed"===u)this.changeMap.set(r,vC(r,e.snapshotNode,o.snapshotNode));else if("child_removed"===t&&"child_added"===u)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===u)this.changeMap.set(r,yC(r,o.oldSnap));else if("child_changed"===t&&"child_added"===u)this.changeMap.set(r,oE(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==u)throw(0,F.g5)("Illegal combination of changes: "+e+" occurred after "+o);this.changeMap.set(r,vC(r,e.snapshotNode,o.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const HL=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class DP{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new fp(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return TP(this.writes_,e,r)}}getChildAfterChild(e,t,r){const o=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Jm(this.viewCache_),u=function(n,e,t,r,o,u){return function(n,e,t,r,o,u,c){let p;const y=pp(n.visibleWrites,e),w=Xm(y,In());if(null!=w)p=w;else{if(null==t)return[];p=lE(y,t)}if(p=p.withIndex(c),p.isEmpty()||p.isLeafNode())return[];{const D=[],S=c.getCompare(),P=u?p.getReverseIteratorFrom(r,c):p.getIteratorFrom(r,c);let B=P.getNext();for(;B&&D.length<o;)0!==S(B,r)&&D.push(B),B=P.getNext();return D}}(n.writeTree,n.treePath,e,t,r,o,u)}(this.writes_,o,t,1,r,e);return 0===u.length?null:u[0]}}function GL(n,e,t,r,o,u){const c=e.eventCache;if(null!=qS(r,t))return e;{let p,y;if(nn(t))if((0,F.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const w=Jm(e),S=IP(r,w instanceof qt?w:qt.EMPTY_NODE);p=n.filter.updateFullNode(e.eventCache.getNode(),S,u)}else{const w=GS(r,Jm(e));p=n.filter.updateFullNode(e.eventCache.getNode(),w,u)}else{const w=tn(t);if(".priority"===w){(0,F.hu)(1===hp(t),"Can't have a priority with additional path components");const D=c.getNode();y=e.serverCache.getNode();const S=BL(r,t,D,y);p=null!=S?n.filter.updatePriority(D,S):c.getNode()}else{const D=Zn(t);let S;if(c.isCompleteForChild(w)){y=e.serverCache.getNode();const P=BL(r,t,c.getNode(),y);S=null!=P?c.getNode().getImmediateChild(w).updateChild(D,P):c.getNode().getImmediateChild(w)}else S=TP(r,w,e.serverCache);p=null!=S?n.filter.updateChild(c.getNode(),w,S,D,o,u):c.getNode()}}return CC(e,p,c.isFullyInitialized()||nn(t),n.filter.filtersNodes())}}function WS(n,e,t,r,o,u,c,p){const y=e.serverCache;let w;const D=c?n.filter:n.filter.getIndexedFilter();if(nn(t))w=D.updateFullNode(y.getNode(),r,null);else if(D.filtersNodes()&&!y.isFiltered()){const B=y.getNode().updateChild(t,r);w=D.updateFullNode(y.getNode(),B,null)}else{const B=tn(t);if(!y.isCompleteForPath(t)&&hp(t)>1)return e;const Y=Zn(t),xe=y.getNode().getImmediateChild(B).updateChild(Y,r);w=".priority"===B?D.updatePriority(y.getNode(),xe):D.updateChild(y.getNode(),B,xe,Y,HL,null)}const S=PL(e,w,y.isFullyInitialized()||nn(t),D.filtersNodes());return GL(n,S,t,o,new DP(o,S,u),p)}function AP(n,e,t,r,o,u,c){const p=e.eventCache;let y,w;const D=new DP(o,e,u);if(nn(t))w=n.filter.updateFullNode(e.eventCache.getNode(),r,c),y=CC(e,w,!0,n.filter.filtersNodes());else{const S=tn(t);if(".priority"===S)w=n.filter.updatePriority(e.eventCache.getNode(),r),y=CC(e,w,p.isFullyInitialized(),p.isFiltered());else{const P=Zn(t),B=p.getNode().getImmediateChild(S);let Y;if(nn(P))Y=r;else{const _e=D.getCompleteChild(S);Y=null!=_e?".priority"===rP(P)&&_e.getChild(mL(P)).isEmpty()?_e:_e.updateChild(P,r):qt.EMPTY_NODE}y=B.equals(Y)?e:CC(e,n.filter.updateChild(p.getNode(),S,Y,P,D,c),p.isFullyInitialized(),n.filter.filtersNodes())}}return y}function qL(n,e){return n.eventCache.isCompleteForChild(e)}function WL(n,e,t){return t.foreach((r,o)=>{e=e.updateChild(r,o)}),e}function SP(n,e,t,r,o,u,c,p){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let w,y=e;w=nn(t)?r:new sr(null).setTree(t,r);const D=e.serverCache.getNode();return w.children.inorderTraversal((S,P)=>{if(D.hasChild(S)){const Y=WL(0,e.serverCache.getNode().getImmediateChild(S),P);y=WS(n,y,new Mn(S),Y,o,u,c,p)}}),w.children.inorderTraversal((S,P)=>{const B=!e.serverCache.isCompleteForChild(S)&&void 0===P.value;if(!D.hasChild(S)&&!B){const _e=WL(0,e.serverCache.getNode().getImmediateChild(S),P);y=WS(n,y,new Mn(S),_e,o,u,c,p)}}),y}class aH{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,o=new hP(r.getIndex()),u=function(n){return n.loadsAllData()?new hP(n.getIndex()):n.hasLimit()?new E$(n):new EC(n)}(r);this.processor_=function(n){return{filter:n}}(u);const c=t.serverCache,p=t.eventCache,y=o.updateFullNode(qt.EMPTY_NODE,c.getNode(),null),w=u.updateFullNode(qt.EMPTY_NODE,p.getNode(),null),D=new fp(y,c.isFullyInitialized(),o.filtersNodes()),S=new fp(w,p.isFullyInitialized(),u.filtersNodes());this.viewCache_=jS(S,D),this.eventGenerator_=new M$(this.query_)}get query(){return this.query_}}function cH(n,e){const t=Jm(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!nn(e)&&!t.getImmediateChild(tn(e)).isEmpty())?t.getChild(e):null}function ZL(n){return 0===n.eventRegistrations_.length}function zL(n,e,t){const r=[];if(t){(0,F.hu)(null==e,"A cancel should cancel all event registrations.");const o=n.query._path;n.eventRegistrations_.forEach(u=>{const c=u.createCancelEvent(t,o);c&&r.push(c)})}if(e){let o=[];for(let u=0;u<n.eventRegistrations_.length;++u){const c=n.eventRegistrations_[u];if(c.matches(e)){if(e.hasAnyCallback()){o=o.concat(n.eventRegistrations_.slice(u+1));break}}else o.push(c)}n.eventRegistrations_=o}else n.eventRegistrations_=[];return r}function KL(n,e,t,r){e.type===lu.MERGE&&null!==e.source.queryId&&((0,F.hu)(Jm(n.viewCache_),"We should always have a full cache before handling merges"),(0,F.hu)($S(n.viewCache_),"Missing event cache, even though we have a server cache"));const o=n.viewCache_,u=function(n,e,t,r,o){const u=new Q$;let c,p;if(t.type===lu.OVERWRITE){const w=t;w.source.fromUser?c=AP(n,e,w.path,w.snap,r,o,u):((0,F.hu)(w.source.fromServer,"Unknown source."),p=w.source.tagged||e.serverCache.isFiltered()&&!nn(w.path),c=WS(n,e,w.path,w.snap,r,o,p,u))}else if(t.type===lu.MERGE){const w=t;w.source.fromUser?c=function(n,e,t,r,o,u,c){let p=e;return r.foreach((y,w)=>{const D=wr(t,y);qL(e,tn(D))&&(p=AP(n,p,D,w,o,u,c))}),r.foreach((y,w)=>{const D=wr(t,y);qL(e,tn(D))||(p=AP(n,p,D,w,o,u,c))}),p}(n,e,w.path,w.children,r,o,u):((0,F.hu)(w.source.fromServer,"Unknown source."),p=w.source.tagged||e.serverCache.isFiltered(),c=SP(n,e,w.path,w.children,r,o,p,u))}else if(t.type===lu.ACK_USER_WRITE){const w=t;c=w.revert?function(n,e,t,r,o,u){let c;if(null!=qS(r,t))return e;{const p=new DP(r,e,o),y=e.eventCache.getNode();let w;if(nn(t)||".priority"===tn(t)){let D;if(e.serverCache.isFullyInitialized())D=GS(r,Jm(e));else{const S=e.serverCache.getNode();(0,F.hu)(S instanceof qt,"serverChildren would be complete if leaf node"),D=IP(r,S)}D=D,w=n.filter.updateFullNode(y,D,u)}else{const D=tn(t);let S=TP(r,D,e.serverCache);null==S&&e.serverCache.isCompleteForChild(D)&&(S=y.getImmediateChild(D)),w=null!=S?n.filter.updateChild(y,D,S,Zn(t),p,u):e.eventCache.getNode().hasChild(D)?n.filter.updateChild(y,D,qt.EMPTY_NODE,Zn(t),p,u):y,w.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=GS(r,Jm(e)),c.isLeafNode()&&(w=n.filter.updateFullNode(w,c,u)))}return c=e.serverCache.isFullyInitialized()||null!=qS(r,In()),CC(e,w,c,n.filter.filtersNodes())}}(n,e,w.path,r,o,u):function(n,e,t,r,o,u,c){if(null!=qS(o,t))return e;const p=e.serverCache.isFiltered(),y=e.serverCache;if(null!=r.value){if(nn(t)&&y.isFullyInitialized()||y.isCompleteForPath(t))return WS(n,e,t,y.getNode().getChild(t),o,u,p,c);if(nn(t)){let w=new sr(null);return y.getNode().forEachChild(bc,(D,S)=>{w=w.set(new Mn(D),S)}),SP(n,e,t,w,o,u,p,c)}return e}{let w=new sr(null);return r.foreach((D,S)=>{const P=wr(t,D);y.isCompleteForPath(P)&&(w=w.set(D,y.getNode().getChild(P)))}),SP(n,e,t,w,o,u,p,c)}}(n,e,w.path,w.affectedTree,r,o,u)}else{if(t.type!==lu.LISTEN_COMPLETE)throw(0,F.g5)("Unknown operation type: "+t.type);c=function(n,e,t,r,o){const u=e.serverCache;return GL(n,PL(e,u.getNode(),u.isFullyInitialized()||nn(t),u.isFiltered()),t,r,HL,o)}(n,e,t.path,r,u)}const y=u.getChanges();return function(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const o=r.getNode().isLeafNode()||r.getNode().isEmpty(),u=$S(n);(t.length>0||!n.eventCache.isFullyInitialized()||o&&!r.getNode().equals(u)||!r.getNode().getPriority().equals(u.getPriority()))&&t.push(RL($S(e)))}}(e,c,y),{viewCache:c,changes:y}}(n.processor_,o,e,t,r);return function(n,e){(0,F.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,F.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,u.viewCache),(0,F.hu)(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=u.viewCache,YL(n,u.changes,u.viewCache.eventCache.getNode(),null)}function YL(n,e,t,r){return function(n,e,t,r){const o=[],u=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&u.push(function(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),bC(n,o,"child_removed",e,r,t),bC(n,o,"child_added",e,r,t),bC(n,o,"child_moved",u,r,t),bC(n,o,"child_changed",e,r,t),bC(n,o,"value",e,r,t),o}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let ZS,KS;class QL{constructor(){this.views=new Map}}function xP(n,e,t,r){const o=e.source.queryId;if(null!==o){const u=n.views.get(o);return(0,F.hu)(null!=u,"SyncTree gave us an op for an invalid query."),KL(u,e,t,r)}{let u=[];for(const c of n.views.values())u=u.concat(KL(c,e,t,r));return u}}function JL(n,e,t,r,o){const c=n.views.get(e._queryIdentifier);if(!c){let p=GS(t,o?r:null),y=!1;p?y=!0:r instanceof qt?(p=IP(t,r),y=!1):(p=qt.EMPTY_NODE,y=!1);const w=jS(new fp(p,y,!1),new fp(r,o,!1));return new aH(e,w)}return c}function XL(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function gp(n,e){let t=null;for(const r of n.views.values())t=t||cH(r,e);return t}function eV(n,e){return e._queryParams.loadsAllData()?zS(n):n.views.get(e._queryIdentifier)}function tV(n,e){return null!=eV(n,e)}function mp(n){return null!=zS(n)}function zS(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let EH=1;class nV{constructor(e){this.listenProvider_=e,this.syncPointTree_=new sr(null),this.pendingWriteTree_={visibleWrites:il.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function RP(n,e,t,r,o){return function(n,e,t,r,o){(0,F.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:o}),o&&(n.visibleWrites=IC(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,o),o?cE(n,new Qm({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function _p(n,e,t=!1){const r=function(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function(n,e){const t=n.allWrites.findIndex(p=>p.writeId===e);(0,F.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let o=r.visible,u=!1,c=n.allWrites.length-1;for(;o&&c>=0;){const p=n.allWrites[c];p.visible&&(c>=t&&j$(p,r.path)?o=!1:uu(r.path,p.path)&&(u=!0)),c--}return!!o&&(u?(function(n){n.visibleWrites=VL(n.allWrites,H$,In()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=OL(n.visibleWrites,r.path):qi(r.children,y=>{n.visibleWrites=OL(n.visibleWrites,wr(r.path,y))}),!0))}(n.pendingWriteTree_,e)){let u=new sr(null);return null!=r.snap?u=u.set(In(),!0):qi(r.children,c=>{u=u.set(new Mn(c),!0)}),cE(n,new BS(r.path,u,t))}return[]}function TC(n,e,t){return cE(n,new Qm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function NP(n,e,t,r){const o=e._path,u=n.syncPointTree_.get(o);let c=[];if(u&&("default"===e._queryIdentifier||tV(u,e))){const p=function(n,e,t,r){const o=e._queryIdentifier,u=[];let c=[];const p=mp(n);if("default"===o)for(const[y,w]of n.views.entries())c=c.concat(zL(w,t,r)),ZL(w)&&(n.views.delete(y),w.query._queryParams.loadsAllData()||u.push(w.query));else{const y=n.views.get(o);y&&(c=c.concat(zL(y,t,r)),ZL(y)&&(n.views.delete(o),y.query._queryParams.loadsAllData()||u.push(y.query)))}return p&&!mp(n)&&u.push(new((0,F.hu)(ZS,"Reference.ts has not been loaded"),ZS)(e._repo,e._path)),{removed:u,events:c}}(u,e,t,r);(function(n){return 0===n.views.size})(u)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const y=p.removed;c=p.events;const w=-1!==y.findIndex(S=>S._queryParams.loadsAllData()),D=n.syncPointTree_.findOnPath(o,(S,P)=>mp(P));if(w&&!D){const S=n.syncPointTree_.subtree(o);if(!S.isEmpty()){const P=function(n){return n.fold((e,t,r)=>{if(t&&mp(t))return[zS(t)];{let o=[];return t&&(o=XL(t)),qi(r,(u,c)=>{o=o.concat(c)}),o}})}(S);for(let B=0;B<P.length;++B){const Y=P[B],_e=Y.query,xe=oV(n,Y);n.listenProvider_.startListening(DC(_e),QS(n,_e),xe.hashFn,xe.onComplete)}}}if(!D&&y.length>0&&!r)if(w){const S=null;n.listenProvider_.stopListening(DC(e),S)}else y.forEach(S=>{const P=n.queryToTagMap.get(JS(S));n.listenProvider_.stopListening(DC(S),P)});!function(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const o=JS(r),u=n.queryToTagMap.get(o);n.queryToTagMap.delete(o),n.tagToQueryMap.delete(u)}}}(n,y)}return c}function rV(n,e,t){const r=e._path;let o=null,u=!1;n.syncPointTree_.foreachOnPath(r,(S,P)=>{const B=Ks(S,r);o=o||gp(P,B),u=u||mp(P)});let p,c=n.syncPointTree_.get(r);c?(u=u||mp(c),o=o||gp(c,In())):(c=new QL,n.syncPointTree_=n.syncPointTree_.set(r,c)),null!=o?p=!0:(p=!1,o=qt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((P,B)=>{const Y=gp(B,In());Y&&(o=o.updateImmediateChild(P,Y))}));const y=tV(c,e);if(!y&&!e._queryParams.loadsAllData()){const S=JS(e);(0,F.hu)(!n.queryToTagMap.has(S),"View does not exist, but we have a tag");const P=EH++;n.queryToTagMap.set(S,P),n.tagToQueryMap.set(P,S)}let D=function(n,e,t,r,o,u){const c=JL(n,e,r,o,u);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function(n,e){n.eventRegistrations_.push(e)}(c,t),function(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(ir,(u,c)=>{r.push(oE(u,c))}),t.isFullyInitialized()&&r.push(RL(t.getNode())),YL(n,r,t.getNode(),e)}(c,t)}(c,e,t,HS(n.pendingWriteTree_,r),o,p);if(!y&&!u){const S=eV(c,e);D=D.concat(function(n,e,t){const r=e._path,o=QS(n,e),u=oV(n,t),c=n.listenProvider_.startListening(DC(e),o,u.hashFn,u.onComplete),p=n.syncPointTree_.subtree(r);if(o)(0,F.hu)(!mp(p.value),"If we're adding a query, it shouldn't be shadowed");else{const y=p.fold((w,D,S)=>{if(!nn(w)&&D&&mp(D))return[zS(D).query];{let P=[];return D&&(P=P.concat(XL(D).map(B=>B.query))),qi(S,(B,Y)=>{P=P.concat(Y)}),P}});for(let w=0;w<y.length;++w){const D=y[w];n.listenProvider_.stopListening(DC(D),QS(n,D))}}return c}(n,e,S))}return D}function YS(n,e,t){const o=n.pendingWriteTree_,u=n.syncPointTree_.findOnPath(e,(c,p)=>{const w=gp(p,Ks(c,e));if(w)return w});return UL(o,e,u,t,!0)}function cE(n,e){return iV(e,n.syncPointTree_,null,HS(n.pendingWriteTree_,In()))}function iV(n,e,t,r){if(nn(n.path))return sV(n,e,t,r);{const o=e.get(In());null==t&&null!=o&&(t=gp(o,In()));let u=[];const c=tn(n.path),p=n.operationForChild(c),y=e.children.get(c);if(y&&p){const w=t?t.getImmediateChild(c):null,D=jL(r,c);u=u.concat(iV(p,y,w,D))}return o&&(u=u.concat(xP(o,n,r,t))),u}}function sV(n,e,t,r){const o=e.get(In());null==t&&null!=o&&(t=gp(o,In()));let u=[];return e.children.inorderTraversal((c,p)=>{const y=t?t.getImmediateChild(c):null,w=jL(r,c),D=n.operationForChild(c);D&&(u=u.concat(sV(D,p,y,w)))}),o&&(u=u.concat(xP(o,n,r,t))),u}function oV(n,e){const t=e.query,r=QS(n,t);return{hashFn:()=>(function(n){return n.viewCache_.serverCache.getNode()}(e)||qt.EMPTY_NODE).hash(),onComplete:o=>{if("ok"===o)return r?function(n,e,t){const r=MP(n,t);if(r){const o=kP(r),u=o.path,c=o.queryId,p=Ks(u,e);return PP(n,u,new wC(vP(c),p))}return[]}(n,t._path,r):function(n,e){return cE(n,new wC({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const u=function(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(o,t);return NP(n,t,null,u)}}}}function QS(n,e){const t=JS(e);return n.queryToTagMap.get(t)}function JS(n){return n._path.toString()+"$"+n._queryIdentifier}function MP(n,e){return n.tagToQueryMap.get(e)}function kP(n){const e=n.indexOf("$");return(0,F.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Mn(n.substr(0,e))}}function PP(n,e,t){const r=n.syncPointTree_.get(e);return(0,F.hu)(r,"Missing sync point for query tag that we're tracking"),xP(r,t,HS(n.pendingWriteTree_,e),null)}function DC(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new((0,F.hu)(KS,"Reference.ts has not been loaded"),KS)(n._repo,n._path):n}class OP{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new OP(t)}node(){return this.node_}}class FP{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=wr(this.path_,e);return new FP(this.syncTree_,t)}node(){return YS(this.syncTree_,this.path_)}}const aV=function(n,e,t){return n&&"object"==typeof n?((0,F.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?kH(n[".sv"],e,t):"object"==typeof n[".sv"]?PH(n[".sv"],e):void(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},kH=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:(0,F.hu)(!1,"Unexpected server value: "+n)}},PH=function(n,e,t){n.hasOwnProperty("increment")||(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,F.hu)(!1,"Unexpected increment value: "+r);const o=e.node();if((0,F.hu)(null!=o,"Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;const c=o.getValue();return"number"!=typeof c?r:c+r},uV=function(n,e,t,r){return VP(e,new FP(t,n),r)},LP=function(n,e,t){return VP(n,new OP(e),t)};function VP(n,e,t){const r=n.getPriority().val(),o=aV(r,e.getImmediateChild(".priority"),t);let u;if(n.isLeafNode()){const c=n,p=aV(c.getValue(),e,t);return p!==c.getValue()||o!==c.getPriority().val()?new rE(p,Ir(o)):n}{const c=n;return u=c,o!==c.getPriority().val()&&(u=u.updatePriority(new rE(o))),c.forEachChild(ir,(p,y)=>{const w=VP(y,e.getImmediateChild(p),t);w!==y&&(u=u.updateImmediateChild(p,w))}),u}}class UP{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function XS(n,e){let t=e instanceof Mn?e:new Mn(e),r=n,o=tn(t);for(;null!==o;){const u=(0,F.DV)(r.node.children,o)||{children:{},childCount:0};r=new UP(o,r,u),t=Zn(t),o=tn(t)}return r}function e_(n){return n.node.value}function BP(n,e){n.node.value=e,jP(n)}function lV(n){return n.node.childCount>0}function ex(n,e){qi(n.node.children,(t,r)=>{e(new UP(t,n,r))})}function cV(n,e,t,r){t&&!r&&e(n),ex(n,o=>{cV(o,e,!0,r)}),t&&r&&e(n)}function AC(n){return new Mn(null===n.parent?n.name:AC(n.parent)+"/"+n.name)}function jP(n){null!==n.parent&&function(n,e,t){const r=function(n){return void 0===e_(n)&&!lV(n)}(t),o=(0,F.r3)(n.node.children,e);r&&o?(delete n.node.children[e],n.node.childCount--,jP(n)):!r&&!o&&(n.node.children[e]=t.node,n.node.childCount++,jP(n))}(n.parent,n.name,n)}const VH=/[\[\].#$\/\u0000-\u001F\u007F]/,UH=/[\[\].#$\u0000-\u001F\u007F]/,$P=10485760,tx=function(n){return"string"==typeof n&&0!==n.length&&!VH.test(n)},dV=function(n){return"string"==typeof n&&0!==n.length&&!UH.test(n)},SC=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!AS(n)||n&&"object"==typeof n&&(0,F.r3)(n,".sv")},Cc=function(n,e,t,r){r&&void 0===e||xC((0,F.gK)(n,"value"),e,t)},xC=function(n,e,t){const r=t instanceof Mn?new Xj(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Km(r));if("function"==typeof e)throw new Error(n+"contains a function "+Km(r)+" with contents = "+e.toString());if(AS(e))throw new Error(n+"contains "+e.toString()+" "+Km(r));if("string"==typeof e&&e.length>$P/3&&(0,F.ug)(e)>$P)throw new Error(n+"contains a string greater than "+$P+" utf8 bytes "+Km(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let o=!1,u=!1;if(qi(e,(c,p)=>{if(".value"===c)o=!0;else if(".priority"!==c&&".sv"!==c&&(u=!0,!tx(c)))throw new Error(n+" contains an invalid key ("+c+") "+Km(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,F.ug)(e),_L(n)})(r,c),xC(n,p,r),function(n){const e=n.parts_.pop();n.byteLength_-=(0,F.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),o&&u)throw new Error(n+' contains ".value" child '+Km(r)+" in addition to actual children.")}},hV=function(n,e,t,r){if(r&&void 0===e)return;const o=(0,F.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(o+" must be an object containing the children to replace.");const u=[];qi(e,(c,p)=>{const y=new Mn(c);if(xC(o,p,wr(t,y)),".priority"===rP(y)&&!SC(p))throw new Error(o+"contains an invalid value for '"+y.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");u.push(y)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const u=pC(r);for(let c=0;c<u.length;c++)if((".priority"!==u[c]||c!==u.length-1)&&!tx(u[c]))throw new Error(n+"contains an invalid key ("+u[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(Jj);let o=null;for(t=0;t<e.length;t++){if(r=e[t],null!==o&&uu(o,r))throw new Error(n+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(o,u)},HP=function(n,e,t){if(!t||void 0!==e){if(AS(e))throw new Error((0,F.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!SC(e))throw new Error((0,F.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},RC=function(n,e,t,r){if(!(r&&void 0===t||tx(t)))throw new Error((0,F.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},NC=function(n,e,t,r){if(!(r&&void 0===t||dV(t)))throw new Error((0,F.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},cu=function(n,e){if(".info"===tn(e))throw new Error(n+" failed = Can't modify data under /.info/")},fV=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!tx(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),dV(n)}(t))throw new Error((0,F.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class HH{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function nx(n,e){let t=null;for(let r=0;r<e.length;r++){const o=e[r],u=o.getPath();null!==t&&!iP(u,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:u}),t.events.push(o)}t&&n.eventLists_.push(t)}function GP(n,e,t){nx(n,t),pV(n,r=>iP(r,e))}function du(n,e,t){nx(n,t),pV(n,r=>uu(r,e)||uu(e,r))}function pV(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const o=n.eventLists_[r];o&&(e(o.path)?(GH(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function GH(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Zm&&Gi("event: "+t.toString()),tE(r)}}}const gV="repo_interrupt";class WH{constructor(e,t,r,o){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new HH,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=US(),this.transactionQueueTree_=new UP,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function mV(n){const t=n.infoData_.getNode(new Mn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function MC(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:mV(n)})}function _V(n,e,t,r,o){n.dataUpdateCount++;const u=new Mn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(o)if(r){const y=(0,F.UI)(t,w=>Ir(w));c=function(n,e,t,r){const o=MP(n,r);if(o){const u=kP(o),c=u.path,p=u.queryId,y=Ks(c,e),w=sr.fromObject(t);return PP(n,c,new uE(vP(p),y,w))}return[]}(n.serverSyncTree_,u,y,o)}else{const y=Ir(t);c=function(n,e,t,r){const o=MP(n,r);if(null!=o){const u=kP(o),c=u.path,p=u.queryId,y=Ks(c,e);return PP(n,c,new Qm(vP(p),y,t))}return[]}(n.serverSyncTree_,u,y,o)}else if(r){const y=(0,F.UI)(t,w=>Ir(w));c=function(n,e,t){const r=sr.fromObject(t);return cE(n,new uE({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,u,y)}else{const y=Ir(t);c=TC(n.serverSyncTree_,u,y)}let p=u;c.length>0&&(p=hE(n,u)),du(n.eventQueue_,p,c)}function yV(n,e){qP(n,"connected",e),!1===e&&function(n){dE(n,"onDisconnectEvents");const e=MC(n),t=US();mP(n.onDisconnect_,In(),(o,u)=>{const c=uV(o,u,n.serverSyncTree_,e);aE(t,o,c)});let r=[];mP(t,In(),(o,u)=>{r=r.concat(TC(n.serverSyncTree_,o,u));const c=KP(n,o);hE(n,c)}),n.onDisconnect_=US(),du(n.eventQueue_,In(),r)}(n)}function qP(n,e,t){const r=new Mn("/.info/"+e),o=Ir(t);n.infoData_.updateSnapshot(r,o);const u=TC(n.infoSyncTree_,r,o);du(n.eventQueue_,r,u)}function rx(n){return n.nextWriteId_++}function WP(n,e,t,r,o){dE(n,"set",{path:e.toString(),value:t,priority:r});const u=MC(n),c=Ir(t,r),p=YS(n.serverSyncTree_,e),y=LP(c,p,u),w=rx(n),D=RP(n.serverSyncTree_,e,y,w,!0);nx(n.eventQueue_,D),n.server_.put(e.toString(),c.val(!0),(P,B)=>{const Y="ok"===P;Y||ws("set at "+e+" failed: "+P);const _e=_p(n.serverSyncTree_,w,!Y);du(n.eventQueue_,e,_e),yp(0,o,P,B)});const S=KP(n,e);hE(n,S),du(n.eventQueue_,S,[])}function JH(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,o)=>{"ok"===r&&gP(n.onDisconnect_,e),yp(0,t,r,o)})}function vV(n,e,t,r){const o=Ir(t);n.server_.onDisconnectPut(e.toString(),o.val(!0),(u,c)=>{"ok"===u&&aE(n.onDisconnect_,e,o),yp(0,r,u,c)})}function ZP(n,e,t){let r;r=".info"===tn(e._path)?NP(n.infoSyncTree_,e,t):NP(n.serverSyncTree_,e,t),GP(n.eventQueue_,e._path,r)}function EV(n){n.persistentConnection_&&n.persistentConnection_.interrupt(gV)}function dE(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Gi(t,...e)}function yp(n,e,t,r){e&&tE(()=>{if("ok"===t)e(null);else{const o=(t||"error").toUpperCase();let u=o;r&&(u+=": "+r);const c=new Error(u);c.code=o,e(c)}})}function zP(n,e,t){return YS(n.serverSyncTree_,e,t)||qt.EMPTY_NODE}function ix(n,e=n.transactionQueueTree_){if(e||sx(n,e),e_(e)){const t=bV(n,e);(0,F.hu)(t.length>0,"Sending zero length transaction queue"),t.every(o=>0===o.status)&&function(n,e,t){const r=t.map(w=>w.currentWriteId),o=zP(n,e,r);let u=o;const c=o.hash();for(let w=0;w<t.length;w++){const D=t[w];(0,F.hu)(0===D.status,"tryToSendTransactionQueue_: items in queue should all be run."),D.status=1,D.retryCount++;const S=Ks(e,D.path);u=u.updateChild(S,D.currentOutputSnapshotRaw)}const p=u.val(!0),y=e;n.server_.put(y.toString(),p,w=>{dE(n,"transaction put response",{path:y.toString(),status:w});let D=[];if("ok"===w){const S=[];for(let P=0;P<t.length;P++)t[P].status=2,D=D.concat(_p(n.serverSyncTree_,t[P].currentWriteId)),t[P].onComplete&&S.push(()=>t[P].onComplete(null,!0,t[P].currentOutputSnapshotResolved)),t[P].unwatcher();sx(n,XS(n.transactionQueueTree_,e)),ix(n,n.transactionQueueTree_),du(n.eventQueue_,e,D);for(let P=0;P<S.length;P++)tE(S[P])}else{if("datastale"===w)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{ws("transaction at "+y.toString()+" failed: "+w);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=w}hE(n,e)}},c)}(n,AC(e),t)}else lV(e)&&ex(e,t=>{ix(n,t)})}function hE(n,e){const t=wV(n,e),r=AC(t);return function(n,e,t){if(0===e.length)return;const r=[];let o=[];const c=e.filter(p=>0===p.status).map(p=>p.currentWriteId);for(let p=0;p<e.length;p++){const y=e[p],w=Ks(t,y.path);let S,D=!1;if((0,F.hu)(null!==w,"rerunTransactionsUnderNode_: relativePath should not be null."),4===y.status)D=!0,S=y.abortReason,o=o.concat(_p(n.serverSyncTree_,y.currentWriteId,!0));else if(0===y.status)if(y.retryCount>=25)D=!0,S="maxretry",o=o.concat(_p(n.serverSyncTree_,y.currentWriteId,!0));else{const P=zP(n,y.path,c);y.currentInputSnapshot=P;const B=e[p].update(P.val());if(void 0!==B){xC("transaction failed: Data returned ",B,y.path);let Y=Ir(B);"object"==typeof B&&null!=B&&(0,F.r3)(B,".priority")||(Y=Y.updatePriority(P.getPriority()));const xe=y.currentWriteId,dt=MC(n),lt=LP(Y,P,dt);y.currentOutputSnapshotRaw=Y,y.currentOutputSnapshotResolved=lt,y.currentWriteId=rx(n),c.splice(c.indexOf(xe),1),o=o.concat(RP(n.serverSyncTree_,y.path,lt,y.currentWriteId,y.applyLocally)),o=o.concat(_p(n.serverSyncTree_,xe,!0))}else D=!0,S="nodata",o=o.concat(_p(n.serverSyncTree_,y.currentWriteId,!0))}du(n.eventQueue_,t,o),o=[],D&&(e[p].status=2,setTimeout(e[p].unwatcher,Math.floor(0)),e[p].onComplete&&r.push("nodata"===S?()=>e[p].onComplete(null,!1,e[p].currentInputSnapshot):()=>e[p].onComplete(new Error(S),!1,null)))}sx(n,n.transactionQueueTree_);for(let p=0;p<r.length;p++)tE(r[p]);ix(n,n.transactionQueueTree_)}(n,bV(n,t),r),r}function wV(n,e){let t,r=n.transactionQueueTree_;for(t=tn(e);null!==t&&void 0===e_(r);)r=XS(r,t),t=tn(e=Zn(e));return r}function bV(n,e){const t=[];return CV(n,e,t),t.sort((r,o)=>r.order-o.order),t}function CV(n,e,t){const r=e_(e);if(r)for(let o=0;o<r.length;o++)t.push(r[o]);ex(e,o=>{CV(n,o,t)})}function sx(n,e){const t=e_(e);if(t){let r=0;for(let o=0;o<t.length;o++)2!==t[o].status&&(t[r]=t[o],r++);t.length=r,BP(e,t.length>0?t:void 0)}ex(e,r=>{sx(n,r)})}function KP(n,e){const t=AC(wV(n,e)),r=XS(n.transactionQueueTree_,e);return function(n,e,t){let r=n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,o=>{YP(n,o)}),YP(n,r),cV(r,o=>{YP(n,o)}),t}function YP(n,e){const t=e_(e);if(t){const r=[];let o=[],u=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,F.hu)(u===c-1,"All SENT items should be at beginning of queue."),u=c,t[c].status=3,t[c].abortReason="set"):((0,F.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),o=o.concat(_p(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===u?BP(e,void 0):t.length=u+1,du(n.eventQueue_,AC(e),o);for(let c=0;c<r.length;c++)tE(r[c])}}const QP=function(n,e){const t=u3(n),r=t.namespace;return"firebase.com"===t.domain&&Ec(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Ec("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ws("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Qk(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Mn(t.pathString)}},u3=function(n){let e="",t="",r="",o="",u="",c=!0,p="https",y=443;if("string"==typeof n){let w=n.indexOf("//");w>=0&&(p=n.substring(0,w-1),n=n.substring(w+2));let D=n.indexOf("/");-1===D&&(D=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(D,S)),D<S&&(o=function(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let o=t[r];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch(u){}e+="/"+o}return e}(n.substring(D,S)));const P=function(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ws(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));w=e.indexOf(":"),w>=0?(c="https"===p||"wss"===p,y=parseInt(e.substring(w+1),10)):w=e.length;const B=e.slice(0,w);if("localhost"===B.toLowerCase())t="localhost";else if(B.split(".").length<=2)t=B;else{const Y=e.indexOf(".");r=e.substring(0,Y).toLowerCase(),t=e.substring(Y+1),u=r}"ns"in P&&(u=P.ns)}return{host:e,port:y,domain:t,subdomain:r,secure:c,scheme:p,pathString:o,namespace:u}};class IV{constructor(e,t,r,o){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=o}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,F.Pz)(this.snapshot.exportVal())}}class TV{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class DV{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,F.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class AV{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new F.BH;return JH(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){cu("OnDisconnect.remove",this._path);const e=new F.BH;return vV(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){cu("OnDisconnect.set",this._path),Cc("OnDisconnect.set",e,this._path,!1);const t=new F.BH;return vV(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){cu("OnDisconnect.setWithPriority",this._path),Cc("OnDisconnect.setWithPriority",e,this._path,!1),HP("OnDisconnect.setWithPriority",t,!1);const r=new F.BH;return function(n,e,t,r,o){const u=Ir(t,r);n.server_.onDisconnectPut(e.toString(),u.val(!0),(c,p)=>{"ok"===c&&aE(n.onDisconnect_,e,u),yp(0,o,c,p)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){cu("OnDisconnect.update",this._path),hV("OnDisconnect.update",e,this._path,!1);const t=new F.BH;return function(n,e,t,r){if((0,F.xb)(t))return Gi("onDisconnect().update() called with empty data.  Don't do anything."),void yp(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(o,u)=>{"ok"===o&&qi(t,(c,p)=>{const y=Ir(p);aE(n.onDisconnect_,wr(e,c),y)}),yp(0,r,o,u)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class ko{constructor(e,t,r,o){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=o}get key(){return nn(this._path)?null:rP(this._path)}get ref(){return new hu(this._repo,this._path)}get _queryIdentifier(){const e=ML(this._queryParams),t=zk(e);return"{}"===t?"default":t}get _queryObject(){return ML(this._queryParams)}isEqual(e){if(!((e=(0,F.m9)(e))instanceof ko))return!1;const t=this._repo===e._repo,r=iP(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function ox(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function vp(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===bc){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==fh)throw new Error(r);if("string"!=typeof e)throw new Error(o)}if(n.hasEnd()){if(n.getIndexEndName()!==wc)throw new Error(r);if("string"!=typeof t)throw new Error(o)}}else if(n.getIndex()===ir){if(null!=e&&!SC(e)||null!=t&&!SC(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,F.hu)(n.getIndex()instanceof lP||n.getIndex()===cP,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function ax(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class hu extends ko{constructor(e,t){super(e,t,new FS,!1)}get parent(){const e=mL(this._path);return null===e?null:new hu(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class t_{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Mn(e),r=n_(this.ref,e);return new t_(this._node.getChild(t),r,ir)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,o)=>e(new t_(o,n_(this.ref,r),ir)))}hasChild(e){const t=new Mn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function SV(n,e){return(n=(0,F.m9)(n))._checkNotDeleted("ref"),void 0!==e?n_(n._root,e):n._root}function xV(n,e){(n=(0,F.m9)(n))._checkNotDeleted("refFromURL");const t=QP(e,n._repo.repoInfo_.nodeAdmin);fV("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Ec("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),SV(n,t.path.toString())}function n_(n,e){return null===tn((n=(0,F.m9)(n))._path)?((t=e)&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),NC("child","path",t,!1)):NC("child","path",e,!1),new hu(n._repo,wr(n._path,e));var t}function JP(n,e){n=(0,F.m9)(n),cu("set",n._path),Cc("set",e,n._path,!1);const t=new F.BH;return WP(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function f3(n,e){hV("update",e,n._path,!1);const t=new F.BH;return function(n,e,t,r){dE(n,"update",{path:e.toString(),value:t});let o=!0;const u=MC(n),c={};if(qi(t,(p,y)=>{o=!1,c[p]=uV(wr(e,p),Ir(y),n.serverSyncTree_,u)}),o)Gi("update() called with empty data.  Don't do anything."),yp(0,r,"ok",void 0);else{const p=rx(n),y=function(n,e,t,r){!function(n,e,t,r){(0,F.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=wP(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const o=sr.fromObject(t);return cE(n,new uE({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,o))}(n.serverSyncTree_,e,c,p);nx(n.eventQueue_,y),n.server_.merge(e.toString(),t,(w,D)=>{const S="ok"===w;S||ws("update at "+e+" failed: "+w);const P=_p(n.serverSyncTree_,p,!S),B=P.length>0?hE(n,e):e;du(n.eventQueue_,B,P),yp(0,r,w,D)}),qi(t,w=>{const D=KP(n,wr(e,w));hE(n,D)}),du(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function p3(n){return function(n,e){const t=function(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(w,D)=>{const S=Ks(w,t);r=r||gp(D,S)});let o=n.syncPointTree_.get(t);o?r=r||gp(o,In()):(o=new QL,n.syncPointTree_=n.syncPointTree_.set(t,o));const u=null!=r,c=u?new fp(r,!0,!1):null;return function(n){return $S(n.viewCache_)}(JL(o,e,HS(n.pendingWriteTree_,e._path),u?c.getNode():qt.EMPTY_NODE,u))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const o=Ir(r).withIndex(e._queryParams.getIndex()),u=TC(n.serverSyncTree_,e._path,o);return GP(n.eventQueue_,e._path,u),Promise.resolve(o)},r=>(dE(n,"get for query "+(0,F.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,F.m9)(n))._repo,n).then(e=>new t_(e,new hu(n._repo,n._path),n._queryParams.getIndex()))}class ux{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new IV("value",this,new t_(e.snapshotNode,new hu(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new TV(this,e,t):null}matches(e){return e instanceof ux&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class lx{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new TV(this,e,t):null}createEvent(e,t){(0,F.hu)(null!=e.childName,"Child events should have a childName.");const r=n_(new hu(t._repo,t._path),e.childName),o=t._queryParams.getIndex();return new IV(e.type,this,new t_(e.snapshotNode,r,o),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof lx&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function kC(n,e,t,r,o){let u;if("object"==typeof r&&(u=void 0,o=r),"function"==typeof r&&(u=r),o&&o.onlyOnce){const y=t,w=(D,S)=>{ZP(n._repo,n,p),y(D,S)};w.userCallback=t.userCallback,w.context=t.context,t=w}const c=new DV(t,u||void 0),p="value"===e?new ux(c):new lx(e,c);return function(n,e,t){let r;r=".info"===tn(e._path)?rV(n.infoSyncTree_,e,t):rV(n.serverSyncTree_,e,t),GP(n.eventQueue_,e._path,r)}(n._repo,n,p),()=>ZP(n._repo,n,p)}function XP(n,e,t,r){return kC(n,"value",e,t,r)}function RV(n,e,t,r){return kC(n,"child_added",e,t,r)}function NV(n,e,t,r){return kC(n,"child_changed",e,t,r)}function MV(n,e,t,r){return kC(n,"child_moved",e,t,r)}function kV(n,e,t,r){return kC(n,"child_removed",e,t,r)}function PV(n,e,t){let r=null;const o=t?new DV(t):null;"value"===e?r=new ux(o):e&&(r=new lx(e,o)),ZP(n._repo,n,r)}class sl{}class OV extends sl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Cc("endAt",this._value,e._path,!0);const t=pP(e._queryParams,this._value,this._key);if(ax(t),vp(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ko(e._repo,e._path,t,e._orderByCalled)}}class m3 extends sl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Cc("endBefore",this._value,e._path,!1);const t=function(n,e,t){let r,o;return n.index_===bc?("string"==typeof e&&(e=xL(e)),o=pP(n,e,t)):(r=null==t?fh:xL(t),o=pP(n,e,r)),o.endBeforeSet_=!0,o}(e._queryParams,this._value,this._key);if(ax(t),vp(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ko(e._repo,e._path,t,e._orderByCalled)}}class FV extends sl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Cc("startAt",this._value,e._path,!0);const t=fP(e._queryParams,this._value,this._key);if(ax(t),vp(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ko(e._repo,e._path,t,e._orderByCalled)}}class v3 extends sl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Cc("startAfter",this._value,e._path,!1);const t=function(n,e,t){let r;if(n.index_===bc)"string"==typeof e&&(e=SL(e)),r=fP(n,e,t);else{let o;o=null==t?wc:SL(t),r=fP(n,e,o)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(ax(t),vp(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ko(e._repo,e._path,t,e._orderByCalled)}}class w3 extends sl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ko(e._repo,e._path,function(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class C3 extends sl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ko(e._repo,e._path,function(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class T3 extends sl{constructor(e){super(),this._path=e}_apply(e){ox(e,"orderByChild");const t=new Mn(this._path);if(nn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new lP(t),o=LS(e._queryParams,r);return vp(o),new ko(e._repo,e._path,o,!0)}}class A3 extends sl{_apply(e){ox(e,"orderByKey");const t=LS(e._queryParams,bc);return vp(t),new ko(e._repo,e._path,t,!0)}}class x3 extends sl{_apply(e){ox(e,"orderByPriority");const t=LS(e._queryParams,ir);return vp(t),new ko(e._repo,e._path,t,!0)}}class N3 extends sl{_apply(e){ox(e,"orderByValue");const t=LS(e._queryParams,cP);return vp(t),new ko(e._repo,e._path,t,!0)}}class k3 extends sl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Cc("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new OV(this._value,this._key)._apply(new FV(this._value,this._key)._apply(e))}}function ol(n,...e){let t=(0,F.m9)(n);for(const r of e)t=r._apply(t);return t}(function(n){(0,F.hu)(!ZS,"__referenceConstructor has already been defined"),ZS=n})(hu),function(n){(0,F.hu)(!KS,"__referenceConstructor has already been defined"),KS=n}(hu);const eO={};function VV(n,e,t,r,o){let u=r||n.options.databaseURL;void 0===u&&(n.options.projectId||Ec("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Gi("Using default host for project ",n.options.projectId),u=`${n.options.projectId}-default-rtdb.firebaseio.com`);let y,w,c=QP(u,o),p=c.repoInfo;"undefined"!=typeof process&&process.env&&(w=process.env.FIREBASE_DATABASE_EMULATOR_HOST),w?(y=!0,u=`http://${w}?ns=${p.namespace}`,c=QP(u,o),p=c.repoInfo):y=!c.repoInfo.secure;const D=o&&y?new fC(fC.OWNER):new Dj(n.name,n.options,e);fV("Invalid Firebase Database URL",c),nn(c.path)||Ec("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function(n,e,t,r){let o=eO[e.name];o||(o={},eO[e.name]=o);let u=o[n.toURLString()];return u&&Ec("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),u=new WH(n,false,t,r),o[n.toURLString()]=u,u}(p,n,D,new Tj(n.name,t));return new B3(S,n)}class B3{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(n,e,t){if(n.stats_=eP(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new VS(n.repoInfo_,(r,o,u,c)=>{_V(n,r,o,u,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>yV(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,F.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Ym(n.repoInfo_,e,(r,o,u,c)=>{_V(n,r,o,u,c)},r=>{yV(n,r)},r=>{!function(n,e){qi(e,(t,r)=>{qP(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function(n,e){const t=n.toString();return Xk[t]||(Xk[t]=e()),Xk[t]}(n.repoInfo_,()=>new N$(n.stats_,n.server_)),n.infoData_=new D$,n.infoSyncTree_=new nV({startListening:(r,o,u,c)=>{let p=[];const y=n.infoData_.getNode(r._path);return y.isEmpty()||(p=TC(n.infoSyncTree_,r._path,y),setTimeout(()=>{c("ok")},0)),p},stopListening:()=>{}}),qP(n,"connected",!1),n.serverSyncTree_=new nV({startListening:(r,o,u,c)=>(n.server_.listen(r,u,o,(p,y)=>{const w=c(p,y);du(n.eventQueue_,r._path,w)}),[]),stopListening:(r,o)=>{n.server_.unlisten(r,o)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new hu(this._repo,In())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(n,e){const t=eO[e];(!t||t[n.key]!==n)&&Ec(`Database ${e}(${n.repoInfo_}) has already been deleted.`),EV(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Ec("Cannot call "+e+" on a deleted database.")}}function UV(){iL.IS_TRANSPORT_INITIALIZED&&ws("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function j3(){UV(),dp.forceDisallow()}function $3(){UV(),nE.forceDisallow(),dp.forceAllow()}function W3(n,e){VF(n,e)}class Q3{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Ym.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Ym.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},kF(Li.SDK_VERSION),(0,Li._registerComponent)(new wo.wA("database",(e,{instanceIdentifier:t})=>VV(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Li.registerVersion)(NF,"0.13.0",void 0),(0,Li.registerVersion)(NF,"0.13.0","esm2017");const tG=new Eo.Yd("@firebase/database-compat"),BV=function(n){tG.warn("FIREBASE WARNING: "+n)};class iG{constructor(e){this._delegate=e}cancel(e){(0,F.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,F.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,F.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,F.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,F.Dv)("OnDisconnect.set",1,2,arguments.length),(0,F.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),o=>t(o)),r}setWithPriority(e,t,r){(0,F.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,F.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const o=this._delegate.setWithPriority(e,t);return r&&o.then(()=>r(null),u=>r(u)),o}update(e,t){if((0,F.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const o={};for(let u=0;u<e.length;++u)o[""+u]=e[u];e=o,BV("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,F.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),o=>t(o)),r}}class sG{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,F.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Ep{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,F.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,F.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,F.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,F.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,F.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),NC("DataSnapshot.child","path",e,!1),new Ep(this._database,this._delegate.child(e))}hasChild(e){return(0,F.Dv)("DataSnapshot.hasChild",1,1,arguments.length),NC("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,F.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,F.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,F.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Ep(this._database,t)))}hasChildren(){return(0,F.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,F.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,F.Dv)("DataSnapshot.ref",0,0,arguments.length),new pa(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class us{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,o){var u;(0,F.Dv)("Query.on",2,4,arguments.length),(0,F.Wj)("Query.on","callback",t,!1);const c=us.getCancelAndContextArgs_("Query.on",r,o),p=(w,D)=>{t.call(c.context,new Ep(this.database,w),D)};p.userCallback=t,p.context=c.context;const y=null===(u=c.cancel)||void 0===u?void 0:u.bind(c.context);switch(e){case"value":return XP(this._delegate,p,y),t;case"child_added":return RV(this._delegate,p,y),t;case"child_removed":return kV(this._delegate,p,y),t;case"child_changed":return NV(this._delegate,p,y),t;case"child_moved":return MV(this._delegate,p,y),t;default:throw new Error((0,F.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,F.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,F.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,F.Wj)("Query.off","callback",t,!0),(0,F.lb)("Query.off","context",r,!0),t){const o=()=>{};o.userCallback=t,o.context=r,PV(this._delegate,e,o)}else PV(this._delegate,e)}get(){return p3(this._delegate).then(e=>new Ep(this.database,e))}once(e,t,r,o){(0,F.Dv)("Query.once",1,4,arguments.length),(0,F.Wj)("Query.once","callback",t,!0);const u=us.getCancelAndContextArgs_("Query.once",r,o),c=new F.BH,p=(w,D)=>{const S=new Ep(this.database,w);t&&t.call(u.context,S,D),c.resolve(S)};p.userCallback=t,p.context=u.context;const y=w=>{u.cancel&&u.cancel.call(u.context,w),c.reject(w)};switch(e){case"value":XP(this._delegate,p,y,{onlyOnce:!0});break;case"child_added":RV(this._delegate,p,y,{onlyOnce:!0});break;case"child_removed":kV(this._delegate,p,y,{onlyOnce:!0});break;case"child_changed":NV(this._delegate,p,y,{onlyOnce:!0});break;case"child_moved":MV(this._delegate,p,y,{onlyOnce:!0});break;default:throw new Error((0,F.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,F.Dv)("Query.limitToFirst",1,1,arguments.length),new us(this.database,ol(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new w3(n)}(e)))}limitToLast(e){return(0,F.Dv)("Query.limitToLast",1,1,arguments.length),new us(this.database,ol(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new C3(n)}(e)))}orderByChild(e){return(0,F.Dv)("Query.orderByChild",1,1,arguments.length),new us(this.database,ol(this._delegate,function(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return NC("orderByChild","path",n,!1),new T3(n)}(e)))}orderByKey(){return(0,F.Dv)("Query.orderByKey",0,0,arguments.length),new us(this.database,ol(this._delegate,new A3))}orderByPriority(){return(0,F.Dv)("Query.orderByPriority",0,0,arguments.length),new us(this.database,ol(this._delegate,new x3))}orderByValue(){return(0,F.Dv)("Query.orderByValue",0,0,arguments.length),new us(this.database,ol(this._delegate,new N3))}startAt(e=null,t){return(0,F.Dv)("Query.startAt",0,2,arguments.length),new us(this.database,ol(this._delegate,function(n=null,e){return RC("startAt","key",e,!0),new FV(n,e)}(e,t)))}startAfter(e=null,t){return(0,F.Dv)("Query.startAfter",0,2,arguments.length),new us(this.database,ol(this._delegate,function(n,e){return RC("startAfter","key",e,!0),new v3(n,e)}(e,t)))}endAt(e=null,t){return(0,F.Dv)("Query.endAt",0,2,arguments.length),new us(this.database,ol(this._delegate,function(n,e){return RC("endAt","key",e,!0),new OV(n,e)}(e,t)))}endBefore(e=null,t){return(0,F.Dv)("Query.endBefore",0,2,arguments.length),new us(this.database,ol(this._delegate,function(n,e){return RC("endBefore","key",e,!0),new m3(n,e)}(e,t)))}equalTo(e,t){return(0,F.Dv)("Query.equalTo",1,2,arguments.length),new us(this.database,ol(this._delegate,function(n,e){return RC("equalTo","key",e,!0),new k3(n,e)}(e,t)))}toString(){return(0,F.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,F.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,F.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof us))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const o={cancel:void 0,context:void 0};if(t&&r)o.cancel=t,(0,F.Wj)(e,"cancel",o.cancel,!0),o.context=r,(0,F.lb)(e,"context",o.context,!0);else if(t)if("object"==typeof t&&null!==t)o.context=t;else{if("function"!=typeof t)throw new Error((0,F.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");o.cancel=t}return o}get ref(){return new pa(this.database,new hu(this._delegate._repo,this._delegate._path))}}class pa extends us{constructor(e,t){super(e,new ko(t._repo,t._path,new FS,!1)),this.database=e,this._delegate=t}getKey(){return(0,F.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,F.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new pa(this.database,n_(this._delegate,e))}getParent(){(0,F.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new pa(this.database,e):null}getRoot(){return(0,F.Dv)("Reference.root",0,0,arguments.length),new pa(this.database,this._delegate.root)}set(e,t){(0,F.Dv)("Reference.set",1,2,arguments.length),(0,F.Wj)("Reference.set","onComplete",t,!0);const r=JP(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}update(e,t){if((0,F.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const o={};for(let u=0;u<e.length;++u)o[""+u]=e[u];e=o,BV("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}cu("Reference.update",this._delegate._path),(0,F.Wj)("Reference.update","onComplete",t,!0);const r=f3(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}setWithPriority(e,t,r){(0,F.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,F.Wj)("Reference.setWithPriority","onComplete",r,!0);const o=function(n,e,t){if(cu("setWithPriority",n._path),Cc("setWithPriority",e,n._path,!1),HP("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new F.BH;return WP(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&o.then(()=>r(null),u=>r(u)),o}remove(e){(0,F.Dv)("Reference.remove",0,1,arguments.length),(0,F.Wj)("Reference.remove","onComplete",e,!0);const t=function(n){return cu("remove",n._path),JP(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,F.Dv)("Reference.transaction",1,3,arguments.length),(0,F.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,F.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,F.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const o=function(n,e,t){var r;if(n=(0,F.m9)(n),cu("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const o=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,u=new F.BH,p=XP(n,()=>{});return function(n,e,t,r,o,u){dE(n,"transaction on "+e);const c={path:e,update:t,onComplete:r,status:null,order:OF(),applyLocally:u,retryCount:0,unwatcher:o,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},p=zP(n,e,void 0);c.currentInputSnapshot=p;const y=c.update(p.val());if(void 0===y)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{xC("transaction failed: Data returned ",y,c.path),c.status=0;const w=XS(n.transactionQueueTree_,e),D=e_(w)||[];let S;D.push(c),BP(w,D),"object"==typeof y&&null!==y&&(0,F.r3)(y,".priority")?(S=(0,F.DV)(y,".priority"),(0,F.hu)(SC(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(YS(n.serverSyncTree_,e)||qt.EMPTY_NODE).getPriority().val();const P=MC(n),B=Ir(y,S),Y=LP(B,p,P);c.currentOutputSnapshotRaw=B,c.currentOutputSnapshotResolved=Y,c.currentWriteId=rx(n);const _e=RP(n.serverSyncTree_,e,Y,c.currentWriteId,c.applyLocally);du(n.eventQueue_,e,_e),ix(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(y,w,D)=>{let S=null;y?u.reject(y):(S=new t_(D,new hu(n._repo,n._path),ir),u.resolve(new Q3(w,S)))},p,o),u.promise}(this._delegate,e,{applyLocally:r}).then(u=>new sG(u.committed,new Ep(this.database,u.snapshot)));return t&&o.then(u=>t(null,u.committed,u.snapshot),u=>t(u,!1,null)),o}setPriority(e,t){(0,F.Dv)("Reference.setPriority",1,2,arguments.length),(0,F.Wj)("Reference.setPriority","onComplete",t,!0);const r=function(n,e){n=(0,F.m9)(n),cu("setPriority",n._path),HP("setPriority",e,!1);const t=new F.BH;return WP(n._repo,wr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}push(e,t){(0,F.Dv)("Reference.push",0,2,arguments.length),(0,F.Wj)("Reference.push","onComplete",t,!0);const r=function(n,e){n=(0,F.m9)(n),cu("push",n._path),Cc("push",e,n._path,!0);const t=mV(n._repo),r=y$(t),o=n_(n,r),u=n_(n,r);let c;return c=null!=e?JP(u,e).then(()=>u):Promise.resolve(u),o.then=c.then.bind(c),o.catch=c.then.bind(c,void 0),o}(this._delegate,e),o=r.then(c=>new pa(this.database,c));t&&o.then(()=>t(null),c=>t(c));const u=new pa(this.database,r);return u.then=o.then.bind(o),u.catch=o.catch.bind(o,void 0),u}onDisconnect(){return cu("Reference.onDisconnect",this._delegate._path),new iG(new AV(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class PC{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:j3,forceLongPolling:$3}}useEmulator(e,t,r={}){!function(n,e,t,r={}){(n=(0,F.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Ec("Cannot call useEmulator() after instance has already been initialized.");const o=n._repoInternal;let u;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&Ec('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),u=new fC(fC.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,F.Sg)(r.mockUserToken,n.app.options.projectId);u=new fC(c)}!function(n,e,t,r){n.repoInfo_=new Qk(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(o,e,t,u)}(this._delegate,e,t,r)}ref(e){if((0,F.Dv)("database.ref",0,1,arguments.length),e instanceof pa){const t=xV(this._delegate,e.toString());return new pa(this,t)}{const t=SV(this._delegate,e);return new pa(this,t)}}refFromURL(e){(0,F.Dv)("database.refFromURL",1,1,arguments.length);const r=xV(this._delegate,e);return new pa(this,r)}goOffline(){return(0,F.Dv)("database.goOffline",0,0,arguments.length),function(n){(n=(0,F.m9)(n))._checkNotDeleted("goOffline"),EV(n._repo)}(this._delegate)}goOnline(){return(0,F.Dv)("database.goOnline",0,0,arguments.length),function(n){(n=(0,F.m9)(n))._checkNotDeleted("goOnline"),function(n){n.persistentConnection_&&n.persistentConnection_.resume(gV)}(n._repo)}(this._delegate)}}PC.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:n=>function(n){return{".sv":{increment:n}}}(n)};var aG=Object.freeze({__proto__:null,initStandalone:function({app:n,url:e,version:t,customAuthImpl:r,namespace:o,nodeAdmin:u=!1}){kF(t);const c=new wo.zt("auth-internal",new wo.H0("database-standalone"));return c.setComponent(new wo.wA("auth-internal",()=>r,"PRIVATE")),{instance:new PC(VV(n,c,void 0,e,u),n),namespace:o}}});const uG=PC.ServerValue;function jV(n){return null==n}function $V(n){return"function"==typeof n.set}function HV(n,e){return $V(e)?e:n.ref(e)}function GV(n,e){if(function(n){return"string"==typeof n}(n))return e.stringCase();if($V(n))return e.firebaseCase();if(function(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function OC(n,e,t="on",r=K_.z){return new gr.y(o=>{let u=null;return u=n[t](e,(c,p)=>{r.schedule(()=>{o.next({snapshot:c,prevKey:p})}),"once"===t&&r.schedule(()=>o.complete())},c=>{r.schedule(()=>o.error(c))}),"on"===t?{unsubscribe(){null!=u&&n.off(e,u)}}:{unsubscribe(){}}}).pipe((0,pt.U)(o=>{const{snapshot:u,prevKey:c}=o;let p=null;return u.exists()&&(p=u.key),{type:e,payload:u,prevKey:c,key:p}}),(0,uj.B)())}function qV(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function pG(n,e){const{payload:t,prevKey:r,key:o}=e,u=qV(n,o),c=function(n,e){if(jV(e))return 0;{const t=qV(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let p=null;e.payload.forEach(y=>{const w={payload:y,type:"value",prevKey:p,key:y.key};return p=y.key,n=[...n,w],!1})}return n;case"child_added":if(u>-1){const p=n[u-1];(p&&p.key||null)!==r&&(n=n.filter(y=>y.payload.key!==t.key)).splice(c,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(p=>p.payload.key!==t.key);case"child_changed":return n.map(p=>p.payload.key===o?e:p);case"child_moved":if(u>-1){const p=n.splice(u,1)[0];return(n=n.slice()).splice(c,0,p),n}return n;default:return n}}function WV(n){return(jV(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function ZV(n,e,t){return function(n,e,t){return OC(n,"value","once",t).pipe(Rr(r=>{const o=[(0,mt.of)(r)];return e.forEach(u=>o.push(OC(n,u,"on",t))),(0,Fe.T)(...o).pipe(yo(pG,[]))}),vw())}(n,e=WV(e),t)}function zV(n,e,t){const r=(e=WV(e)).map(o=>OC(n,o,"on",t));return(0,Fe.T)(...r)}function KV(n,e){return function(r,o){return GV(r,{stringCase:()=>n.child(r)[e](o),firebaseCase:()=>r[e](o),snapshotCase:()=>r.ref[e](o)})}}function yG(n){return function(t){return t?GV(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function YV(n,e){return function(){return OC(n,"value","on",e)}}!function(n){n.INTERNAL.registerComponent(new wo.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),o=e.getProvider("database").getImmediate({identifier:t});return new PC(o,r)},"PUBLIC").setServiceProps({Reference:pa,Query:us,Database:PC,DataSnapshot:Ep,enableLogging:W3,INTERNAL:aG,ServerValue:uG}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.0")}(ZI.Z);const wG=new f.OlP("angularfire2.realtimeDatabaseURL"),bG=new f.OlP("angularfire2.database.use-emulator");let CG=(()=>{class n{constructor(t,r,o,u,c,p,y,w,D,S,P,B,Y,_e,xe){this.schedulers=p;const dt=y,lt=(0,Ur.on)(t,c,r);w&&Rk(lt,c,D,P,B,Y,S,_e),this.database=(0,Ur.cc)(`${lt.name}.database.${o}`,"AngularFireDatabase",lt.name,()=>{const nt=c.runOutsideAngular(()=>lt.database(o||void 0));return dt&&nt.useEmulator(...dt),nt},[dt])}list(t,r){const o=this.schedulers.ngZone.runOutsideAngular(()=>HV(this.database,t));let u=o;return r&&(u=r(o)),function(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:KV(r,"update"),set:KV(r,"set"),push:o=>r.push(o),remove:yG(r),snapshotChanges:o=>ZV(n,o,t).pipe(wn.iC),stateChanges:o=>zV(n,o,t).pipe(wn.iC),auditTrail:o=>function(n,e,t){return function(n,e,t){return function(n,e){return OC(n,"value","on",e).pipe((0,pt.U)(t=>{let r;return t.payload.forEach(o=>(r=o.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function(...n){return e=>{let t;return"function"==typeof n[n.length-1]&&(t=n.pop()),e.lift(new cj(n,t))}}(e),(0,pt.U)(([o,u])=>{const c=o.lastKeyToLoad,p=u.map(y=>y.key);return{actions:u,lastKeyToLoad:c,loadedKeys:p}}),function(n){return e=>e.lift(new fj(n))}(o=>-1===o.loadedKeys.indexOf(o.lastKeyToLoad)),(0,pt.U)(o=>o.actions))}(n,zV(n,e).pipe(yo((o,u)=>[...o,u],[])),t)}(n,o,t).pipe(wn.iC),valueChanges:(o,u)=>ZV(n,o,t).pipe((0,pt.U)(p=>p.map(y=>u&&u.idField?Object.assign(Object.assign({},y.payload.val()),{[u.idField]:y.key}):y.payload.val())),wn.iC)}}(u,this)}object(t){return function(n,e){return{query:n,snapshotChanges:()=>YV(n,e.schedulers.outsideAngular)().pipe(wn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>YV(n,e.schedulers.outsideAngular)().pipe(wn.iC,(0,pt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>HV(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ur.Dh),f.LFG(Ur.xv,8),f.LFG(wG,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(wn.HU),f.LFG(bG,8),f.LFG(iC,8),f.LFG(Ik,8),f.LFG(Tk,8),f.LFG(Dk,8),f.LFG(Ak,8),f.LFG(Sk,8),f.LFG(xk,8),f.LFG(rC,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),IG=(()=>{class n{constructor(){yS.Z.registerVersion("angularfire",wn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[CG]}),n})(),TG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[p2]}),n.\u0275inj=f.cJS({providers:[lp],imports:[[Sp,Cn,hn,f2,fw,Ur.hO.initializeApp(bl_firebase),KU,r2,aj,IG]]}),n})();(0,f.G48)(),Ni().bootstrapModule(TG).catch(n=>console.error(n))},3394:(Je,Ee,V)=>{"use strict";V.d(Ee,{Z:()=>Te});var f=V(3854),$=V(3910),O=V(8026),ae=V(5422);class ce{constructor(Be,fe){this._delegate=Be,this.firebase=fe,(0,O._addComponent)(Be,new $.wA("app-compat",()=>this,"PUBLIC")),this.container=Be.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Be){this._delegate.automaticDataCollectionEnabled=Be}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Be=>{this._delegate.checkDestroyed(),Be()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(Be,fe=O._DEFAULT_ENTRY_NAME){var De;this._delegate.checkDestroyed();const Re=this._delegate.container.getProvider(Be);return!Re.isInitialized()&&"EXPLICIT"===(null===(De=Re.getComponent())||void 0===De?void 0:De.instantiationMode)&&Re.initialize(),Re.getImmediate({identifier:fe})}_removeServiceInstance(Be,fe=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Be).clearInstance(fe)}_addComponent(Be){(0,O._addComponent)(this._delegate,Be)}_addOrOverwriteComponent(Be){(0,O._addOrOverwriteComponent)(this._delegate,Be)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const be=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),U=function oe(){const we=function(we){const Be={},fe={__esModule:!0,initializeApp:function(Et,Oe={}){const Le=O.initializeApp(Et,Oe);if((0,f.r3)(Be,Le.name))return Be[Le.name];const je=new we(Le,fe);return Be[Le.name]=je,je},app:Re,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function(Et){const Oe=Et.name,Le=Oe.replace("-compat","");if(O._registerComponent(Et)&&"PUBLIC"===Et.type){const je=(_t=Re())=>{if("function"!=typeof _t[Le])throw be.create("invalid-app-argument",{appName:Oe});return _t[Le]()};void 0!==Et.serviceProps&&(0,f.ZB)(je,Et.serviceProps),fe[Le]=je,we.prototype[Le]=function(..._t){return this._getService.bind(this,Oe).apply(this,Et.multipleInstances?_t:[])}}return"PUBLIC"===Et.type?fe[Le]:null},removeApp:function(Et){delete Be[Et]},useAsService:function(Et,Oe){return"serverAuth"===Oe?null:Oe},modularAPIs:O}};function Re(Et){if(!(0,f.r3)(Be,Et=Et||O._DEFAULT_ENTRY_NAME))throw be.create("no-app",{appName:Et});return Be[Et]}return fe.default=fe,Object.defineProperty(fe,"apps",{get:function(){return Object.keys(Be).map(Et=>Be[Et])}}),Re.App=we,fe}(ce);return we.INTERNAL=Object.assign(Object.assign({},we.INTERNAL),{createFirebaseNamespace:oe,extendNamespace:function(fe){(0,f.ZB)(we,fe)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),we}(),H=new ae.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const we=self.firebase.SDK_VERSION;we&&we.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Te=U;(0,O.registerVersion)("@firebase/app-compat","0.1.26",undefined)},8026:(Je,Ee,V)=>{"use strict";V.r(Ee),V.d(Ee,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>Kr,_DEFAULT_ENTRY_NAME:()=>Zr,_addComponent:()=>Zi,_addOrOverwriteComponent:()=>ls,_apps:()=>Ht,_clearComponents:()=>zn,_components:()=>zr,_getProvider:()=>bs,_registerComponent:()=>zt,_removeServiceInstance:()=>Tn,deleteApp:()=>hr,getApp:()=>ke,getApps:()=>Kn,initializeApp:()=>Yr,onLog:()=>Dn,registerVersion:()=>Kt,setLogLevel:()=>Yn});var f=V(8239),$=V(3910),O=V(5422),ae=V(3854),ce=V(4544);class ne{constructor(ie){this.container=ie}getPlatformInfoString(){return this.container.getProviders().map(Pe=>{if(function(Z){const ie=Z.getComponent();return"VERSION"===(null==ie?void 0:ie.type)}(Pe)){const Ze=Pe.getImmediate();return`${Ze.library}/${Ze.version}`}return null}).filter(Pe=>Pe).join(" ")}}const te="@firebase/app",U=new O.Yd("@firebase/app"),Zr="[DEFAULT]",kn={[te]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ht=new Map,zr=new Map;function Zi(Z,ie){try{Z.container.addComponent(ie)}catch(Pe){U.debug(`Component ${ie.name} failed to register with FirebaseApp ${Z.name}`,Pe)}}function ls(Z,ie){Z.container.addOrOverwriteComponent(ie)}function zt(Z){const ie=Z.name;if(zr.has(ie))return U.debug(`There were multiple attempts to register component ${ie}.`),!1;zr.set(ie,Z);for(const Pe of Ht.values())Zi(Pe,Z);return!0}function bs(Z,ie){const Pe=Z.container.getProvider("heartbeat").getImmediate({optional:!0});return Pe&&Pe.triggerHeartbeat(),Z.container.getProvider(ie)}function Tn(Z,ie,Pe=Zr){bs(Z,ie).clearInstance(Pe)}function zn(){zr.clear()}const mn=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Ys{constructor(ie,Pe,Ze){this._isDeleted=!1,this._options=Object.assign({},ie),this._config=Object.assign({},Pe),this._name=Pe.name,this._automaticDataCollectionEnabled=Pe.automaticDataCollectionEnabled,this._container=Ze,this.container.addComponent(new $.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ie){this.checkDestroyed(),this._automaticDataCollectionEnabled=ie}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ie){this._isDeleted=ie}checkDestroyed(){if(this.isDeleted)throw mn.create("app-deleted",{appName:this._name})}}const Kr="9.8.2";function Yr(Z,ie={}){"object"!=typeof ie&&(ie={name:ie});const Pe=Object.assign({name:Zr,automaticDataCollectionEnabled:!1},ie),Ze=Pe.name;if("string"!=typeof Ze||!Ze)throw mn.create("bad-app-name",{appName:String(Ze)});const ft=Ht.get(Ze);if(ft){if((0,ae.vZ)(Z,ft.options)&&(0,ae.vZ)(Pe,ft.config))return ft;throw mn.create("duplicate-app",{appName:Ze})}const xt=new $.H0(Ze);for(const Tt of zr.values())xt.addComponent(Tt);const yn=new Ys(Z,Pe,xt);return Ht.set(Ze,yn),yn}function ke(Z=Zr){const ie=Ht.get(Z);if(!ie)throw mn.create("no-app",{appName:Z});return ie}function Kn(){return Array.from(Ht.values())}function hr(Z){return et.apply(this,arguments)}function et(){return(et=(0,f.Z)(function*(Z){const ie=Z.name;Ht.has(ie)&&(Ht.delete(ie),yield Promise.all(Z.container.getProviders().map(Pe=>Pe.delete())),Z.isDeleted=!0)})).apply(this,arguments)}function Kt(Z,ie,Pe){var Ze;let ft=null!==(Ze=kn[Z])&&void 0!==Ze?Ze:Z;Pe&&(ft+=`-${Pe}`);const xt=ft.match(/\s|\//),yn=ie.match(/\s|\//);if(xt||yn){const Tt=[`Unable to register library "${ft}" with version "${ie}":`];return xt&&Tt.push(`library name "${ft}" contains illegal characters (whitespace or "/")`),xt&&yn&&Tt.push("and"),yn&&Tt.push(`version name "${ie}" contains illegal characters (whitespace or "/")`),void U.warn(Tt.join(" "))}zt(new $.wA(`${ft}-version`,()=>({library:ft,version:ie}),"VERSION"))}function Dn(Z,ie){if(null!==Z&&"function"!=typeof Z)throw mn.create("invalid-log-argument");(0,O.Am)(Z,ie)}function Yn(Z){(0,O.Ub)(Z)}const Pn="firebase-heartbeat-store";let _n=null;function Po(){return _n||(_n=(0,ce.X3)("firebase-heartbeat-database",1,{upgrade:(Z,ie)=>{switch(ie){case 0:Z.createObjectStore(Pn)}}}).catch(Z=>{throw mn.create("storage-open",{originalErrorMessage:Z.message})})),_n}function qe(){return(qe=(0,f.Z)(function*(Z){try{return(yield Po()).transaction(Pn).objectStore(Pn).get(li(Z))}catch(ie){throw mn.create("storage-get",{originalErrorMessage:ie.message})}})).apply(this,arguments)}function ot(Z,ie){return cs.apply(this,arguments)}function cs(){return(cs=(0,f.Z)(function*(Z,ie){try{const Ze=(yield Po()).transaction(Pn,"readwrite");return yield Ze.objectStore(Pn).put(ie,li(Z)),Ze.done}catch(Pe){throw mn.create("storage-set",{originalErrorMessage:Pe.message})}})).apply(this,arguments)}function li(Z){return`${Z.name}!${Z.options.appId}`}class or{constructor(ie){this.container=ie,this._heartbeatsCache=null;const Pe=this.container.getProvider("app").getImmediate();this._storage=new G(Pe),this._heartbeatsCachePromise=this._storage.read().then(Ze=>(this._heartbeatsCache=Ze,Ze))}triggerHeartbeat(){var ie=this;return(0,f.Z)(function*(){const Ze=ie.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ft=jn();if(null===ie._heartbeatsCache&&(ie._heartbeatsCache=yield ie._heartbeatsCachePromise),ie._heartbeatsCache.lastSentHeartbeatDate!==ft&&!ie._heartbeatsCache.heartbeats.some(xt=>xt.date===ft))return ie._heartbeatsCache.heartbeats.push({date:ft,agent:Ze}),ie._heartbeatsCache.heartbeats=ie._heartbeatsCache.heartbeats.filter(xt=>{const yn=new Date(xt.date).valueOf();return Date.now()-yn<=2592e6}),ie._storage.overwrite(ie._heartbeatsCache)})()}getHeartbeatsHeader(){var ie=this;return(0,f.Z)(function*(){if(null===ie._heartbeatsCache&&(yield ie._heartbeatsCachePromise),null===ie._heartbeatsCache||0===ie._heartbeatsCache.heartbeats.length)return"";const Pe=jn(),{heartbeatsToSend:Ze,unsentEntries:ft}=function(Z,ie=1024){const Pe=[];let Ze=Z.slice();for(const ft of Z){const xt=Pe.find(yn=>yn.agent===ft.agent);if(xt){if(xt.dates.push(ft.date),Q(Pe)>ie){xt.dates.pop();break}}else if(Pe.push({agent:ft.agent,dates:[ft.date]}),Q(Pe)>ie){Pe.pop();break}Ze=Ze.slice(1)}return{heartbeatsToSend:Pe,unsentEntries:Ze}}(ie._heartbeatsCache.heartbeats),xt=(0,ae.L)(JSON.stringify({version:2,heartbeats:Ze}));return ie._heartbeatsCache.lastSentHeartbeatDate=Pe,ft.length>0?(ie._heartbeatsCache.heartbeats=ft,yield ie._storage.overwrite(ie._heartbeatsCache)):(ie._heartbeatsCache.heartbeats=[],ie._storage.overwrite(ie._heartbeatsCache)),xt})()}}function jn(){return(new Date).toISOString().substring(0,10)}class G{constructor(ie){this.app=ie,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ie=this;return(0,f.Z)(function*(){return(yield ie._canUseIndexedDBPromise)&&(yield function(Z){return qe.apply(this,arguments)}(ie.app))||{heartbeats:[]}})()}overwrite(ie){var Pe=this;return(0,f.Z)(function*(){var Ze;if(yield Pe._canUseIndexedDBPromise){const xt=yield Pe.read();return ot(Pe.app,{lastSentHeartbeatDate:null!==(Ze=ie.lastSentHeartbeatDate)&&void 0!==Ze?Ze:xt.lastSentHeartbeatDate,heartbeats:ie.heartbeats})}})()}add(ie){var Pe=this;return(0,f.Z)(function*(){var Ze;if(yield Pe._canUseIndexedDBPromise){const xt=yield Pe.read();return ot(Pe.app,{lastSentHeartbeatDate:null!==(Ze=ie.lastSentHeartbeatDate)&&void 0!==Ze?Ze:xt.lastSentHeartbeatDate,heartbeats:[...xt.heartbeats,...ie.heartbeats]})}})()}}function Q(Z){return(0,ae.L)(JSON.stringify({version:2,heartbeats:Z})).length}zt(new $.wA("platform-logger",ie=>new ne(ie),"PRIVATE")),zt(new $.wA("heartbeat",ie=>new or(ie),"PRIVATE")),Kt(te,"0.7.25",""),Kt(te,"0.7.25","esm2017"),Kt("fire-js","")},3910:(Je,Ee,V)=>{"use strict";V.d(Ee,{wA:()=>O,H0:()=>te,zt:()=>ce});var f=V(8239),$=V(3854);class O{constructor(U,H,W){this.name=U,this.instanceFactory=H,this.type=W,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(U){return this.instantiationMode=U,this}setMultipleInstances(U){return this.multipleInstances=U,this}setServiceProps(U){return this.serviceProps=U,this}setInstanceCreatedCallback(U){return this.onInstanceCreated=U,this}}const ae="[DEFAULT]";class ce{constructor(U,H){this.name=U,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(U){const H=this.normalizeInstanceIdentifier(U);if(!this.instancesDeferred.has(H)){const W=new $.BH;if(this.instancesDeferred.set(H,W),this.isInitialized(H)||this.shouldAutoInitialize())try{const le=this.getOrInitializeService({instanceIdentifier:H});le&&W.resolve(le)}catch(le){}}return this.instancesDeferred.get(H).promise}getImmediate(U){var H;const W=this.normalizeInstanceIdentifier(null==U?void 0:U.identifier),le=null!==(H=null==U?void 0:U.optional)&&void 0!==H&&H;if(!this.isInitialized(W)&&!this.shouldAutoInitialize()){if(le)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:W})}catch(pe){if(le)return null;throw pe}}getComponent(){return this.component}setComponent(U){if(U.name!==this.name)throw Error(`Mismatching Component ${U.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=U,this.shouldAutoInitialize()){if("EAGER"===U.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:ae})}catch(H){}for(const[H,W]of this.instancesDeferred.entries()){const le=this.normalizeInstanceIdentifier(H);try{const pe=this.getOrInitializeService({instanceIdentifier:le});W.resolve(pe)}catch(pe){}}}}clearInstance(U=ae){this.instancesDeferred.delete(U),this.instancesOptions.delete(U),this.instances.delete(U)}delete(){var U=this;return(0,f.Z)(function*(){const H=Array.from(U.instances.values());yield Promise.all([...H.filter(W=>"INTERNAL"in W).map(W=>W.INTERNAL.delete()),...H.filter(W=>"_delete"in W).map(W=>W._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(U=ae){return this.instances.has(U)}getOptions(U=ae){return this.instancesOptions.get(U)||{}}initialize(U={}){const{options:H={}}=U,W=this.normalizeInstanceIdentifier(U.instanceIdentifier);if(this.isInitialized(W))throw Error(`${this.name}(${W}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const le=this.getOrInitializeService({instanceIdentifier:W,options:H});for(const[pe,Te]of this.instancesDeferred.entries())W===this.normalizeInstanceIdentifier(pe)&&Te.resolve(le);return le}onInit(U,H){var W;const le=this.normalizeInstanceIdentifier(H),pe=null!==(W=this.onInitCallbacks.get(le))&&void 0!==W?W:new Set;pe.add(U),this.onInitCallbacks.set(le,pe);const Te=this.instances.get(le);return Te&&U(Te,le),()=>{pe.delete(U)}}invokeOnInitCallbacks(U,H){const W=this.onInitCallbacks.get(H);if(W)for(const le of W)try{le(U,H)}catch(pe){}}getOrInitializeService({instanceIdentifier:U,options:H={}}){let W=this.instances.get(U);if(!W&&this.component&&(W=this.component.instanceFactory(this.container,{instanceIdentifier:(oe=U,oe===ae?void 0:oe),options:H}),this.instances.set(U,W),this.instancesOptions.set(U,H),this.invokeOnInitCallbacks(W,U),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,U,W)}catch(le){}var oe;return W||null}normalizeInstanceIdentifier(U=ae){return this.component?this.component.multipleInstances?U:ae:U}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class te{constructor(U){this.name=U,this.providers=new Map}addComponent(U){const H=this.getProvider(U.name);if(H.isComponentSet())throw new Error(`Component ${U.name} has already been registered with ${this.name}`);H.setComponent(U)}addOrOverwriteComponent(U){this.getProvider(U.name).isComponentSet()&&this.providers.delete(U.name),this.addComponent(U)}getProvider(U){if(this.providers.has(U))return this.providers.get(U);const H=new ce(U,this);return this.providers.set(U,H),H}getProviders(){return Array.from(this.providers.values())}}},5422:(Je,Ee,V)=>{"use strict";V.d(Ee,{in:()=>$,Yd:()=>be,Ub:()=>te,Am:()=>oe});const f=[];var $=(()=>{return(U=$||($={}))[U.DEBUG=0]="DEBUG",U[U.VERBOSE=1]="VERBOSE",U[U.INFO=2]="INFO",U[U.WARN=3]="WARN",U[U.ERROR=4]="ERROR",U[U.SILENT=5]="SILENT",$;var U})();const O={debug:$.DEBUG,verbose:$.VERBOSE,info:$.INFO,warn:$.WARN,error:$.ERROR,silent:$.SILENT},ae=$.INFO,ce={[$.DEBUG]:"log",[$.VERBOSE]:"log",[$.INFO]:"info",[$.WARN]:"warn",[$.ERROR]:"error"},ne=(U,H,...W)=>{if(H<U.logLevel)return;const le=(new Date).toISOString(),pe=ce[H];if(!pe)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[pe](`[${le}]  ${U.name}:`,...W)};class be{constructor(H){this.name=H,this._logLevel=ae,this._logHandler=ne,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in $))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?O[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,$.DEBUG,...H),this._logHandler(this,$.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,$.VERBOSE,...H),this._logHandler(this,$.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,$.INFO,...H),this._logHandler(this,$.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,$.WARN,...H),this._logHandler(this,$.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,$.ERROR,...H),this._logHandler(this,$.ERROR,...H)}}function te(U){f.forEach(H=>{H.setLogLevel(U)})}function oe(U,H){for(const W of f){let le=null;H&&H.level&&(le=O[H.level]),W.userLogHandler=null===U?null:(pe,Te,...we)=>{const Be=we.map(fe=>{if(null==fe)return null;if("string"==typeof fe)return fe;if("number"==typeof fe||"boolean"==typeof fe)return fe.toString();if(fe instanceof Error)return fe.message;try{return JSON.stringify(fe)}catch(De){return null}}).filter(fe=>fe).join(" ");Te>=(null!=le?le:pe.logLevel)&&U({level:$[Te].toLowerCase(),message:Be,args:we,type:pe.name})}}}},4544:(Je,Ee,V)=>{"use strict";V.d(Ee,{Lj:()=>Xe,X3:()=>Re});var f=V(8239);let O,ae;const be=new WeakMap,te=new WeakMap,oe=new WeakMap,U=new WeakMap,H=new WeakMap;let pe={get(Oe,Le,je){if(Oe instanceof IDBTransaction){if("done"===Le)return te.get(Oe);if("objectStoreNames"===Le)return Oe.objectStoreNames||oe.get(Oe);if("store"===Le)return je.objectStoreNames[1]?void 0:je.objectStore(je.objectStoreNames[0])}return fe(Oe[Le])},set:(Oe,Le,je)=>(Oe[Le]=je,!0),has:(Oe,Le)=>Oe instanceof IDBTransaction&&("done"===Le||"store"===Le)||Le in Oe};function Be(Oe){return"function"==typeof Oe?function(Oe){return Oe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(Oe)?function(...Le){return Oe.apply(De(this),Le),fe(be.get(this))}:function(...Le){return fe(Oe.apply(De(this),Le))}:function(Le,...je){const _t=Oe.call(De(this),Le,...je);return oe.set(_t,Le.sort?Le.sort():[Le]),fe(_t)}}(Oe):(Oe instanceof IDBTransaction&&function(Oe){if(te.has(Oe))return;const Le=new Promise((je,_t)=>{const rt=()=>{Oe.removeEventListener("complete",wt),Oe.removeEventListener("error",Ge),Oe.removeEventListener("abort",Ge)},wt=()=>{je(),rt()},Ge=()=>{_t(Oe.error||new DOMException("AbortError","AbortError")),rt()};Oe.addEventListener("complete",wt),Oe.addEventListener("error",Ge),Oe.addEventListener("abort",Ge)});te.set(Oe,Le)}(Oe),((Oe,Le)=>Le.some(je=>Oe instanceof je))(Oe,O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(Oe,pe):Oe)}function fe(Oe){if(Oe instanceof IDBRequest)return function(Oe){const Le=new Promise((je,_t)=>{const rt=()=>{Oe.removeEventListener("success",wt),Oe.removeEventListener("error",Ge)},wt=()=>{je(fe(Oe.result)),rt()},Ge=()=>{_t(Oe.error),rt()};Oe.addEventListener("success",wt),Oe.addEventListener("error",Ge)});return Le.then(je=>{je instanceof IDBCursor&&be.set(je,Oe)}).catch(()=>{}),H.set(Le,Oe),Le}(Oe);if(U.has(Oe))return U.get(Oe);const Le=Be(Oe);return Le!==Oe&&(U.set(Oe,Le),H.set(Le,Oe)),Le}const De=Oe=>H.get(Oe);function Re(Oe,Le,{blocked:je,upgrade:_t,blocking:rt,terminated:wt}={}){const Ge=indexedDB.open(Oe,Le),Fr=fe(Ge);return _t&&Ge.addEventListener("upgradeneeded",Tr=>{_t(fe(Ge.result),Tr.oldVersion,Tr.newVersion,fe(Ge.transaction))}),je&&Ge.addEventListener("blocked",()=>je()),Fr.then(Tr=>{wt&&Tr.addEventListener("close",()=>wt()),rt&&Tr.addEventListener("versionchange",()=>rt())}).catch(()=>{}),Fr}function Xe(Oe,{blocked:Le}={}){const je=indexedDB.deleteDatabase(Oe);return Le&&je.addEventListener("blocked",()=>Le()),fe(je).then(()=>{})}const ht=["get","getKey","getAll","getAllKeys","count"],Wt=["put","add","delete","clear"],Ft=new Map;function Et(Oe,Le){if(!(Oe instanceof IDBDatabase)||Le in Oe||"string"!=typeof Le)return;if(Ft.get(Le))return Ft.get(Le);const je=Le.replace(/FromIndex$/,""),_t=Le!==je,rt=Wt.includes(je);if(!(je in(_t?IDBIndex:IDBObjectStore).prototype)||!rt&&!ht.includes(je))return;const wt=function(){var Ge=(0,f.Z)(function*(Fr,...Tr){const Wi=this.transaction(Fr,rt?"readwrite":"readonly");let Zr=Wi.store;return _t&&(Zr=Zr.index(Tr.shift())),(yield Promise.all([Zr[je](...Tr),rt&&Wi.done]))[0]});return function(Tr){return Ge.apply(this,arguments)}}();return Ft.set(Le,wt),wt}var Oe;pe=eU(XV({},Oe=pe),{get:(Le,je,_t)=>Et(Le,je)||Oe.get(Le,je,_t),has:(Le,je)=>!!Et(Le,je)||Oe.has(Le,je)})},8239:(Je,Ee,V)=>{"use strict";function f(O,ae,ce,ne,be,te,oe){try{var U=O[te](oe),H=U.value}catch(W){return void ce(W)}U.done?ae(H):Promise.resolve(H).then(ne,be)}function $(O){return function(){var ae=this,ce=arguments;return new Promise(function(ne,be){var te=O.apply(ae,ce);function oe(H){f(te,ne,be,oe,U,"next",H)}function U(H){f(te,ne,be,oe,U,"throw",H)}oe(void 0)})}}V.d(Ee,{Z:()=>$})}},Je=>{Je(Je.s=5926)}]);