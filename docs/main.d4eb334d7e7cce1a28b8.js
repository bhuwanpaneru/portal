var xG=Object.defineProperty,RG=Object.defineProperties,NG=Object.getOwnPropertyDescriptors,zV=Object.getOwnPropertySymbols,MG=Object.prototype.hasOwnProperty,kG=Object.prototype.propertyIsEnumerable,KV=(Qe,Ee,V)=>Ee in Qe?xG(Qe,Ee,{enumerable:!0,configurable:!0,writable:!0,value:V}):Qe[Ee]=V,YV=(Qe,Ee)=>{for(var V in Ee||(Ee={}))MG.call(Ee,V)&&KV(Qe,V,Ee[V]);if(zV)for(var V of zV(Ee))kG.call(Ee,V)&&KV(Qe,V,Ee[V]);return Qe},QV=(Qe,Ee)=>RG(Qe,NG(Ee));(self.webpackChunkportal=self.webpackChunkportal||[]).push([[179],{8255:Qe=>{function Ee(V){return Promise.resolve().then(()=>{var f=new Error("Cannot find module '"+V+"'");throw f.code="MODULE_NOT_FOUND",f})}Ee.keys=()=>[],Ee.resolve=Ee,Ee.id=8255,Qe.exports=Ee},7716:(Qe,Ee,V)=>{"use strict";V.d(Ee,{deG:()=>Rh,tb:()=>gv,AFp:()=>pv,ip1:()=>yb,CZH:()=>Qf,hGG:()=>BM,z2F:()=>Rm,sBO:()=>nm,Sil:()=>Sm,_Vd:()=>Rf,EJc:()=>HA,SBq:()=>Za,qLn:()=>Yh,vpe:()=>Hs,gxx:()=>Fl,tBr:()=>Tu,XFs:()=>et,OlP:()=>Pn,zs3:()=>tr,ZZ4:()=>ky,aQg:()=>za,soG:()=>Dm,YKP:()=>Lf,v3s:()=>XA,h0i:()=>Xl,PXZ:()=>Ub,R0b:()=>is,FiY:()=>Os,Lbi:()=>BA,g9A:()=>UA,Qsj:()=>_D,FYo:()=>vo,JOm:()=>Ua,Tiy:()=>Jl,q3G:()=>ze,tp0:()=>jn,EAV:()=>Wb,Rgc:()=>Ff,dDg:()=>KA,DyG:()=>Ra,q4F:()=>Ny,GfV:()=>Bs,s_b:()=>tn,ifc:()=>qe,eFA:()=>Bb,G48:()=>Pb,Gpc:()=>H,X6Q:()=>kb,_c5:()=>LM,VLi:()=>DM,c2e:()=>$A,zSh:()=>rf,wAp:()=>yt,vHH:()=>Ie,EiD:()=>_e,mCW:()=>Fa,qzn:()=>Sl,JVY:()=>hE,pB0:()=>Go,eBb:()=>id,L6k:()=>h_,LAX:()=>Hp,cg1:()=>f0,Tjo:()=>cS,kL8:()=>p0,yhl:()=>d_,dqk:()=>_t,sIi:()=>md,CqO:()=>Ng,QGY:()=>xg,F4k:()=>Rg,RDi:()=>Rc,AaK:()=>te,z3N:()=>Ho,qOj:()=>yw,TTD:()=>To,_Bn:()=>xf,xp6:()=>kE,uIk:()=>K_,ekj:()=>jw,Suo:()=>rb,Xpm:()=>yn,lG2:()=>Nt,Yz7:()=>Yt,cJS:()=>Rn,oAB:()=>K,Yjl:()=>Mt,Y36:()=>Uu,_UZ:()=>cy,qZA:()=>vd,TgZ:()=>ly,EpF:()=>NT,n5z:()=>El,Ikx:()=>rs,LFG:()=>er,$8M:()=>bu,NdJ:()=>dy,CRH:()=>ib,Q6J:()=>uy,s9C:()=>Lw,iGM:()=>_m,MAs:()=>Q_,CHM:()=>lu,LSH:()=>Rr,kYT:()=>Ae,YNc:()=>Ig,_uU:()=>Zw,Oqu:()=>zw});var f=V(9765),$=V(5319),O=V(7574),ae=V(6682),ce=V(8819);function ne(i){for(let s in i)if(i[s]===ne)return s;throw Error("Could not find renamed property on target object.")}function be(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function te(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(te).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function oe(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const U=ne({__forward_ref__:ne});function H(i){return i.__forward_ref__=H,i.toString=function(){return te(this())},i}function W(i){return le(i)?i():i}function le(i){return"function"==typeof i&&i.hasOwnProperty(U)&&i.__forward_ref__===H}class Ie extends Error{constructor(s,a){super(function(i,s){return`${i?`NG0${i}: `:""}${s}`}(s,a)),this.code=s}}function fe(i){return"string"==typeof i?i:null==i?"":String(i)}function De(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():fe(i)}function Zt(i,s){const a=s?` in ${s}`:"";throw new Ie("201",`No provider for ${De(i)} found${a}`)}function Ln(i,s){null==i&&function(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function Yt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Rn(i){return{providers:i.providers||[],imports:i.imports||[]}}function Wn(i){return gn(i,zr)||gn(i,Zn)}function gn(i,s){return i.hasOwnProperty(s)?i[s]:null}function Zr(i){return i&&(i.hasOwnProperty(Me)||i.hasOwnProperty(cr))?i[Me]:null}const zr=ne({\u0275prov:ne}),Me=ne({\u0275inj:ne}),Zn=ne({ngInjectableDef:ne}),cr=ne({ngInjectorDef:ne});var et=(()=>((et=et||{})[et.Default=0]="Default",et[et.Host=1]="Host",et[et.Self=2]="Self",et[et.SkipSelf=4]="SkipSelf",et[et.Optional=8]="Optional",et))();let Qt;function zn(i){const s=Qt;return Qt=i,s}function Kn(i,s,a){const l=Wn(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&et.Optional?null:void 0!==s?s:void Zt(te(i),"Injector")}function Vn(i){return{toString:i}.toString()}var _n=(()=>((_n=_n||{})[_n.OnPush=0]="OnPush",_n[_n.Default=1]="Default",_n))(),qe=(()=>((qe=qe||{})[qe.Emulated=0]="Emulated",qe[qe.None=2]="None",qe[qe.ShadowDom=3]="ShadowDom",qe))();const ot="undefined"!=typeof globalThis&&globalThis,ls="undefined"!=typeof window&&window,oi="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,_t=ot||"undefined"!=typeof global&&global||ls||oi,z={},G=[],Q=ne({\u0275cmp:ne}),ve=ne({\u0275dir:ne}),Z=ne({\u0275pipe:ne}),ie=ne({\u0275mod:ne}),Pe=ne({\u0275loc:ne}),Ze=ne({\u0275fac:ne}),ht=ne({__NG_ELEMENT_ID__:ne});let xt=0;function yn(i){return Vn(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===_n.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||G,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||qe.Emulated,id:"c",styles:i.styles||G,_:null,setInput:null,schemas:i.schemas||null,tView:null},c=i.directives,h=i.features,m=i.pipes;return l.id+=xt++,l.inputs=He(i.inputs,a),l.outputs=He(i.outputs),h&&h.forEach(v=>v(l)),l.directiveDefs=c?()=>("function"==typeof c?c():c).map(dr):null,l.pipeDefs=m?()=>("function"==typeof m?m():m).map(de):null,l})}function dr(i){return Dt(i)||function(i){return i[ve]||null}(i)}function de(i){return function(i){return i[Z]||null}(i)}const ee={};function K(i){return Vn(()=>{const s={type:i.type,bootstrap:i.bootstrap||G,declarations:i.declarations||G,imports:i.imports||G,exports:i.exports||G,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(ee[i.id]=i.type),s})}function Ae(i,s){return Vn(()=>{const a=Bn(i,!0);a.declarations=s.declarations||G,a.imports=s.imports||G,a.exports=s.exports||G})}function He(i,s){if(null==i)return z;const a={};for(const l in i)if(i.hasOwnProperty(l)){let c=i[l],h=c;Array.isArray(c)&&(h=c[1],c=c[0]),a[c]=l,s&&(s[c]=h)}return a}const Nt=yn;function Mt(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Dt(i){return i[Q]||null}function Bn(i,s){const a=i[ie]||null;if(!a&&!0===s)throw new Error(`Type ${te(i)} does not have '\u0275mod' property.`);return a}function Js(i){return Array.isArray(i)&&"object"==typeof i[1]}function cn(i){return Array.isArray(i)&&!0===i[1]}function Cc(i){return 0!=(8&i.flags)}function il(i){return 2==(2&i.flags)}function au(i){return 1==(1&i.flags)}function cs(i){return null!==i.template}function Ii(i){return 0!=(512&i[2])}function eo(i,s){return i.hasOwnProperty(Ze)?i[Ze]:null}class Sc{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function To(){return Zi}function Zi(i){return i.type.prototype.ngOnChanges&&(i.setInput=ma),vh}function vh(){const i=Tp(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===z)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function ma(i,s,a,l){const c=Tp(i)||function(i,s){return i[or]=s}(i,{previous:z,current:null}),h=c.current||(c.current={}),m=c.previous,v=this.declaredInputs[a],C=m[v];h[v]=new Sc(C&&C.currentValue,s,m===z),i[l]=s}To.ngInherit=!0;const or="__ngSimpleChanges__";function Tp(i){return i[or]||null}let al;function Rc(i){al=i}function kn(i){return!!i.listen}const So={createRenderer:(i,s)=>void 0!==al?al:"undefined"!=typeof document?document:void 0};function en(i){for(;Array.isArray(i);)i=i[0];return i}function va(i,s){return en(s[i])}function Ti(i,s){return en(s[i.index])}function Nc(i,s){return i.data[s]}function di(i,s){const a=s[i];return Js(a)?a:a[0]}function Ea(i){return 4==(4&i[2])}function Mc(i){return 128==(128&i[2])}function Ki(i,s){return null==s?null:i[s]}function Vr(i){i[18]=0}function wa(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const wt={lFrame:Ap(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Oc(){return wt.bindingsEnabled}function Se(){return wt.lFrame.lView}function Ft(){return wt.lFrame.tView}function lu(i){return wt.lFrame.contextLView=i,i[8]}function Dn(){let i=cu();for(;null!==i&&64===i.type;)i=i.parent;return i}function cu(){return wt.lFrame.currentTNode}function Qr(i,s){const a=wt.lFrame;a.currentTNode=i,a.isParent=s}function No(){return wt.lFrame.isParent}function du(){return wt.isInCheckNoChangesMode}function to(i){wt.isInCheckNoChangesMode=i}function ds(){return wt.lFrame.bindingIndex++}function Vc(i,s){const a=wt.lFrame;a.bindingIndex=a.bindingRootIndex=i,Uc(s)}function Uc(i){wt.lFrame.currentDirectiveIndex=i}function Ih(){return wt.lFrame.currentQueryIndex}function Po(i){wt.lFrame.currentQueryIndex=i}function fu(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function pu(i,s,a){if(a&et.SkipSelf){let c=s,h=i;for(;!(c=c.parent,null!==c||a&et.Host||(c=fu(h),null===c||(h=h[15],10&c.type))););if(null===c)return!1;s=c,i=h}const l=wt.lFrame=dl();return l.currentTNode=s,l.lView=i,!0}function gu(i){const s=dl(),a=i[1];wt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function dl(){const i=wt.lFrame,s=null===i?null:i.child;return null===s?Ap(i):s}function Ap(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function hl(){const i=wt.lFrame;return wt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Th=hl;function Oo(){const i=hl();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Sr(){return wt.lFrame.selectedIndex}function no(i){wt.lFrame.selectedIndex=i}function Qn(){const i=wt.lFrame;return Nc(i.tView,i.selectedIndex)}function Ca(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const h=i.data[a].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:v,ngAfterViewInit:C,ngAfterViewChecked:T,ngOnDestroy:x}=h;m&&(i.contentHooks||(i.contentHooks=[])).push(-a,m),v&&((i.contentHooks||(i.contentHooks=[])).push(a,v),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,v)),C&&(i.viewHooks||(i.viewHooks=[])).push(-a,C),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=x&&(i.destroyHooks||(i.destroyHooks=[])).push(a,x)}}function Ia(i,s,a){mu(i,s,3,a)}function Fo(i,s,a,l){(3&i[2])===a&&mu(i,s,a,l)}function ur(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function mu(i,s,a,l){const h=null!=l?l:-1,m=s.length-1;let v=0;for(let C=void 0!==l?65535&i[18]:0;C<m;C++)if("number"==typeof s[C+1]){if(v=s[C],null!=l&&v>=l)break}else s[C]<0&&(i[18]+=65536),(v<h||-1==h)&&(Sp(i,a,s,C),i[18]=(4294901760&i[18])+C+2),C++}function Sp(i,s,a,l){const c=a[l]<0,h=a[l+1],v=i[c?-a[l]:a[l]];if(c){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{h.call(v)}finally{}}}else try{h.call(v)}finally{}}class _u{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function Gc(i,s,a){const l=kn(i);let c=0;for(;c<a.length;){const h=a[c];if("number"==typeof h){if(0!==h)break;c++;const m=a[c++],v=a[c++],C=a[c++];l?i.setAttribute(s,v,C,m):s.setAttributeNS(m,v,C)}else{const m=h,v=a[++c];Rs(m)?l&&i.setProperty(s,m,v):l?i.setAttribute(s,m,v):s.setAttribute(m,v),c++}}return c}function Np(i){return 3===i||4===i||6===i}function Rs(i){return 64===i.charCodeAt(0)}function _l(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const c=s[l];"number"==typeof c?a=c:0===a||Mp(i,a,c,null,-1===a||2===a?s[++l]:null)}}return i}function Mp(i,s,a,l,c){let h=0,m=i.length;if(-1===s)m=-1;else for(;h<i.length;){const v=i[h++];if("number"==typeof v){if(v===s){m=-1;break}if(v>s){m=h-1;break}}}for(;h<i.length;){const v=i[h];if("number"==typeof v)break;if(v===a){if(null===l)return void(null!==c&&(i[h+1]=c));if(l===i[h+1])return void(i[h+2]=c)}h++,null!==l&&h++,null!==c&&h++}-1!==m&&(i.splice(m,0,s),h=m+1),i.splice(h++,0,a),null!==l&&i.splice(h++,0,l),null!==c&&i.splice(h++,0,c)}function qc(i){return-1!==i}function io(i){return 32767&i}function Ta(i,s){let a=function(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let yu=!0;function Ai(i){const s=yu;return yu=i,s}let i_=0;function Lo(i,s){const a=yl(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,Da(l.data,i),Da(s,null),Da(l.blueprint,null));const c=Bt(i,s),h=i.injectorIndex;if(qc(c)){const m=io(c),v=Ta(c,s),C=v[1].data;for(let T=0;T<8;T++)s[h+T]=v[m+T]|C[m+T]}return s[h+8]=c,h}function Da(i,s){i.push(0,0,0,0,0,0,0,0,s)}function yl(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Bt(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,c=s;for(;null!==c;){const h=c[1],m=h.type;if(l=2===m?h.declTNode:1===m?c[6]:null,null===l)return-1;if(a++,c=c[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function at(i,s,a){!function(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(ht)&&(l=a[ht]),null==l&&(l=a[ht]=i_++);const c=255&l;s.data[i+(c>>5)]|=1<<c}(i,s,a)}function Aa(i,s,a){if(a&et.Optional)return i;Zt(s,"NodeInjector")}function hi(i,s,a,l){if(a&et.Optional&&void 0===l&&(l=null),0==(a&(et.Self|et.Host))){const c=i[9],h=zn(void 0);try{return c?c.get(s,l,a&et.Optional):Kn(s,l,a&et.Optional)}finally{zn(h)}}return Aa(l,s,a)}function Wc(i,s,a,l=et.Default,c){if(null!==i){const h=function(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(ht)?i[ht]:void 0;return"number"==typeof s?s>=0?255&s:Xr:s}(a);if("function"==typeof h){if(!pu(s,i,l))return l&et.Host?Aa(c,a,l):hi(s,a,l,c);try{const m=h(l);if(null!=m||l&et.Optional)return m;Zt(a)}finally{Th()}}else if("number"==typeof h){let m=null,v=yl(i,s),C=-1,T=l&et.Host?s[16][6]:null;for((-1===v||l&et.SkipSelf)&&(C=-1===v?Bt(i,s):s[v+8],-1!==C&&Jn(l,!1)?(m=s[1],v=io(C),s=Ta(C,s)):v=-1);-1!==v;){const x=s[1];if(Eu(h,v,x.data)){const k=Zc(v,s,a,m,l,T);if(k!==Ns)return k}C=s[v+8],-1!==C&&Jn(l,s[1].data[v+8]===T)&&Eu(h,v,s)?(m=x,v=io(C),s=Ta(C,s)):v=-1}}}return hi(s,a,l,c)}const Ns={};function Xr(){return new Ms(Dn(),Se())}function Zc(i,s,a,l,c,h){const m=s[1],v=m.data[i+8],x=vl(v,m,a,null==l?il(v)&&yu:l!=m&&0!=(3&v.type),c&et.Host&&h===v);return null!==x?vu(s,m,x,v):Ns}function vl(i,s,a,l,c){const h=i.providerIndexes,m=s.data,v=1048575&h,C=i.directiveStart,x=h>>20,L=c?v+x:i.directiveEnd;for(let q=l?v:v+x;q<L;q++){const X=m[q];if(q<C&&a===X||q>=C&&X.type===a)return q}if(c){const q=m[C];if(q&&cs(q)&&q.type===a)return C}return null}function vu(i,s,a,l){let c=i[a];const h=s.data;if(function(i){return i instanceof _u}(c)){const m=c;m.resolving&&function(i,s){throw new Ie("200",`Circular dependency in DI detected for ${i}`)}(De(h[a]));const v=Ai(m.canSeeViewProviders);m.resolving=!0;const C=m.injectImpl?zn(m.injectImpl):null;pu(i,l,et.Default);try{c=i[a]=m.factory(void 0,h,i,l),s.firstCreatePass&&a>=l.directiveStart&&function(i,s,a){const{ngOnChanges:l,ngOnInit:c,ngDoCheck:h}=s.type.prototype;if(l){const m=Zi(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,m),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,m)}c&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,c),h&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,h),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,h))}(a,h[a],s)}finally{null!==C&&zn(C),Ai(v),m.resolving=!1,Th()}}return c}function Eu(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function Jn(i,s){return!(i&et.Self||i&et.Host&&s)}class Ms{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return Wc(this._tNode,this._lView,s,l,a)}}function El(i){return Vn(()=>{const s=i.prototype.constructor,a=s[Ze]||wu(s),l=Object.prototype;let c=Object.getPrototypeOf(i.prototype).constructor;for(;c&&c!==l;){const h=c[Ze]||wu(c);if(h&&h!==a)return h;c=Object.getPrototypeOf(c)}return h=>new h})}function wu(i){return le(i)?()=>{const s=wu(W(i));return s&&s()}:eo(i)}function bu(i){return function(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let c=0;for(;c<l;){const h=a[c];if(Np(h))break;if(0===h)c+=2;else if("number"==typeof h)for(c++;c<l&&"string"==typeof a[c];)c++;else{if(h===s)return a[c+1];c+=2}}}return null}(Dn(),i)}const ks="__parameters__";function Ur(i,s,a){return Vn(()=>{const l=function(i){return function(...a){if(i){const l=i(...a);for(const c in l)this[c]=l[c]}}}(s);function c(...h){if(this instanceof c)return l.apply(this,h),this;const m=new c(...h);return v.annotation=m,v;function v(C,T,x){const k=C.hasOwnProperty(ks)?C[ks]:Object.defineProperty(C,ks,{value:[]})[ks];for(;k.length<=x;)k.push(null);return(k[x]=k[x]||[]).push(m),C}}return a&&(c.prototype=Object.create(a.prototype)),c.prototype.ngMetadataName=i,c.annotationCls=c,c})}class Pn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Yt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Rh=new Pn("AnalyzeForEntryComponents"),Ra=Function;function fi(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),fi(l,s)):s!==i&&s.push(l)}return s}function fs(i,s){i.forEach(a=>Array.isArray(a)?fs(a,s):s(a))}function Ma(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function pi(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function Ri(i,s,a){let l=fr(i,s);return l>=0?i[1|l]=a:(l=~l,function(i,s,a,l){let c=i.length;if(c==s)i.push(a,l);else if(1===c)i.push(l,i[0]),i[0]=a;else{for(c--,i.push(i[c-1],i[c]);c>s;)i[c]=i[c-2],c--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function Ni(i,s){const a=fr(i,s);if(a>=0)return i[1|a]}function fr(i,s){return function(i,s,a){let l=0,c=i.length>>a;for(;c!==l;){const h=l+(c-l>>1),m=i[h<<a];if(s===m)return h<<a;m>s?c=h:l=h+1}return~(c<<a)}(i,s,1)}const ft={},Jt="__NG_DI_FLAG__",bt="ngTempTokenPath",Xn=/\n/gm,Iu="__source",Qi=ne({provide:String,useValue:ne});let ps;function gs(i){const s=ps;return ps=i,s}function zt(i,s=et.Default){if(void 0===ps)throw new Error("inject() must be called from an injection context");return null===ps?Kn(i,void 0,s):ps.get(i,s&et.Optional?null:void 0,s)}function er(i,s=et.Default){return(Qt||zt)(W(i),s)}function Ji(i){const s=[];for(let a=0;a<i.length;a++){const l=W(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Error("Arguments array must have arguments.");let c,h=et.Default;for(let m=0;m<l.length;m++){const v=l[m],C=aE(v);"number"==typeof C?-1===C?c=v.token:h|=C:c=v}s.push(er(c,h))}else s.push(er(l))}return s}function Yc(i,s){return i[Jt]=s,i.prototype[Jt]=s,i}function aE(i){return i[Jt]}function Lh(i,s,a,l){const c=i[bt];throw s[Iu]&&c.unshift(s[Iu]),i.message=function(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let c=te(s);if(Array.isArray(s))c=s.map(te).join(" -> ");else if("object"==typeof s){let h=[];for(let m in s)if(s.hasOwnProperty(m)){let v=s[m];h.push(m+":"+("string"==typeof v?JSON.stringify(v):te(v)))}c=`{${h.join(", ")}}`}return`${a}${l?"("+l+")":""}[${c}]: ${i.replace(Xn,"\n  ")}`}("\n"+i.message,c,a,l),i.ngTokenPath=c,i[bt]=null,i}const Tu=Yc(Ur("Inject",i=>({token:i})),-1),Os=Yc(Ur("Optional"),8),jn=Yc(Ur("SkipSelf"),4);let Au;function Dl(i){var s;return(null===(s=function(){if(void 0===Au&&(Au=null,_t.trustedTypes))try{Au=_t.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch(i){}return Au}())||void 0===s?void 0:s.createHTML(i))||i}class $o{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class lE extends $o{getTypeName(){return"HTML"}}class Uh extends $o{getTypeName(){return"Style"}}class cE extends $o{getTypeName(){return"Script"}}class Bh extends $o{getTypeName(){return"URL"}}class dE extends $o{getTypeName(){return"ResourceURL"}}function Ho(i){return i instanceof $o?i.changingThisBreaksApplicationSecurity:i}function Sl(i,s){const a=d_(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}function d_(i){return i instanceof $o&&i.getTypeName()||null}function hE(i){return new lE(i)}function h_(i){return new Uh(i)}function id(i){return new cE(i)}function Hp(i){return new Bh(i)}function Go(i){return new dE(i)}class f_{constructor(s){this.inertDocumentHelper=s}getInertBodyElement(s){s="<body><remove></remove>"+s;try{const a=(new window.DOMParser).parseFromString(Dl(s),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(s):(a.removeChild(a.firstChild),a)}catch(a){return null}}}class p_{constructor(s){if(this.defaultDoc=s,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const a=this.inertDocument.createElement("html");this.inertDocument.appendChild(a);const l=this.inertDocument.createElement("body");a.appendChild(l)}}getInertBodyElement(s){const a=this.inertDocument.createElement("template");if("content"in a)return a.innerHTML=Dl(s),a;const l=this.inertDocument.createElement("body");return l.innerHTML=Dl(s),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(l),l}stripCustomNsAttrs(s){const a=s.attributes;for(let c=a.length-1;0<c;c--){const m=a.item(c).name;("xmlns:ns1"===m||0===m.indexOf("ns1:"))&&s.removeAttribute(m)}let l=s.firstChild;for(;l;)l.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(l),l=l.nextSibling}}const Rl=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,pE=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Fa(i){return(i=String(i)).match(Rl)||i.match(pE)?i:"unsafe:"+i}function ms(i){const s={};for(const a of i.split(","))s[a]=!0;return s}function La(...i){const s={};for(const a of i)for(const l in a)a.hasOwnProperty(l)&&(s[l]=!0);return s}const jh=ms("area,br,col,hr,img,wbr"),od=ms("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),m_=ms("rp,rt"),$h=La(jh,La(od,ms("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),La(m_,ms("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),La(m_,od)),Gp=ms("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Nl=ms("srcset"),E=La(Gp,Nl,ms("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ms("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),g=ms("script,style,template");class _{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(s){let a=s.firstChild,l=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?l=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,l&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let c=this.checkClobberedElement(a,a.nextSibling);if(c){a=c;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(s){const a=s.nodeName.toLowerCase();if(!$h.hasOwnProperty(a))return this.sanitizedSomething=!0,!g.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const l=s.attributes;for(let c=0;c<l.length;c++){const h=l.item(c),m=h.name,v=m.toLowerCase();if(!E.hasOwnProperty(v)){this.sanitizedSomething=!0;continue}let C=h.value;Gp[v]&&(C=Fa(C)),Nl[v]&&(i=C,C=(i=String(i)).split(",").map(s=>Fa(s.trim())).join(", ")),this.buf.push(" ",m,'="',N(C),'"')}var i;return this.buf.push(">"),!0}endElement(s){const a=s.nodeName.toLowerCase();$h.hasOwnProperty(a)&&!jh.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(s){this.buf.push(N(s))}checkClobberedElement(s,a){if(a&&(s.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${s.outerHTML}`);return a}}const b=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,R=/([^\#-~ |!])/g;function N(i){return i.replace(/&/g,"&amp;").replace(b,function(s){return"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";"}).replace(R,function(s){return"&#"+s.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let J;function _e(i,s){let a=null;try{J=J||function(i){const s=new p_(i);return function(){try{return!!(new window.DOMParser).parseFromString(Dl(""),"text/html")}catch(i){return!1}}()?new f_(s):s}(i);let l=s?String(s):"";a=J.getInertBodyElement(l);let c=5,h=l;do{if(0===c)throw new Error("Failed to sanitize html because the input is unstable");c--,l=h,h=a.innerHTML,a=J.getInertBodyElement(l)}while(l!==h);return Dl((new _).sanitizeChildren(je(a)||a))}finally{if(a){const l=je(a)||a;for(;l.firstChild;)l.removeChild(l.firstChild)}}}function je(i){return"content"in i&&function(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var ze=(()=>((ze=ze||{})[ze.NONE=0]="NONE",ze[ze.HTML=1]="HTML",ze[ze.STYLE=2]="STYLE",ze[ze.SCRIPT=3]="SCRIPT",ze[ze.URL=4]="URL",ze[ze.RESOURCE_URL=5]="RESOURCE_URL",ze))();function Rr(i){const s=function(){const i=Se();return i&&i[12]}();return s?s.sanitize(ze.URL,i)||"":Sl(i,"URL")?Ho(i):Fa(fe(i))}const Ml="__ngContext__";function Nr(i,s){i[Ml]=s}function y_(i){const s=function(i){return i[Ml]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function zp(i){return i.ngOriginalError}function JC(i,...s){i.error(...s)}class Yh{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),l=this._findContext(s),c=(i=s)&&i.ngErrorLogger||JC;var i;c(this._console,"ERROR",s),a&&c(this._console,"ORIGINAL ERROR",a),l&&c(this._console,"ERROR CONTEXT",l)}_findContext(s){return s?s.ngDebugContext||this._findContext(zp(s)):null}_findOriginalError(s){let a=s&&zp(s);for(;a&&zp(a);)a=zp(a);return a||null}}const Qh=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(_t))();function Va(i){return i instanceof Function?i():i}var Ua=(()=>((Ua=Ua||{})[Ua.Important=1]="Important",Ua[Ua.DashCase=2]="DashCase",Ua))();function CE(i,s){return undefined(i,s)}function Jp(i){const s=i[3];return cn(s)?s[3]:s}function IE(i){return zx(i[13])}function C_(i){return zx(i[4])}function zx(i){for(;null!==i&&!cn(i);)i=i[4];return i}function ud(i,s,a,l,c){if(null!=l){let h,m=!1;cn(l)?h=l:Js(l)&&(m=!0,l=l[0]);const v=en(l);0===i&&null!==a?null==c?RE(s,a,v):ld(s,a,v,c||null,!0):1===i&&null!==a?ld(s,a,v,c||null,!0):2===i?function(i,s,a){const l=vr(i,s);l&&function(i,s,a,l){kn(i)?i.removeChild(s,a,l):s.removeChild(a)}(i,l,s,a)}(s,v,m):3===i&&s.destroyNode(v),null!=h&&function(i,s,a,l,c){const h=a[7];h!==en(a)&&ud(s,i,l,h,c);for(let v=10;v<a.length;v++){const C=a[v];tf(C[1],C,i,s,l,h)}}(s,i,h,a,c)}}function DE(i,s,a){return kn(i)?i.createElement(s,a):null===a?i.createElement(s):i.createElementNS(a,s)}function iI(i,s){const a=i[9],l=a.indexOf(s),c=s[3];1024&s[2]&&(s[2]&=-1025,wa(c,-1)),a.splice(l,1)}function Xp(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const c=l[17];null!==c&&c!==i&&iI(c,l),s>0&&(i[a-1][4]=l[4]);const h=pi(i,10+s);!function(i,s){tf(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const m=h[19];null!==m&&m.detachView(h[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function SE(i,s){if(!(256&s[2])){const a=s[11];kn(a)&&a.destroyNode&&tf(i,s,a,3,null,null),function(i){let s=i[13];if(!s)return xE(i[1],i);for(;s;){let a=null;if(Js(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)Js(s)&&xE(s[1],s),s=s[3];null===s&&(s=i),Js(s)&&xE(s[1],s),a=s&&s[4]}s=a}}(s)}}function xE(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const c=s[a[l]];if(!(c instanceof _u)){const h=a[l+1];if(Array.isArray(h))for(let m=0;m<h.length;m+=2){const v=c[h[m]],C=h[m+1];try{C.call(v)}finally{}}else try{h.call(c)}finally{}}}}(i,s),function(i,s){const a=i.cleanup,l=s[7];let c=-1;if(null!==a)for(let h=0;h<a.length-1;h+=2)if("string"==typeof a[h]){const m=a[h+1],v="function"==typeof m?m(s):en(s[m]),C=l[c=a[h+2]],T=a[h+3];"boolean"==typeof T?v.removeEventListener(a[h],C,T):T>=0?l[c=T]():l[c=-T].unsubscribe(),h+=2}else{const m=l[c=a[h+1]];a[h].call(m)}if(null!==l){for(let h=c+1;h<l.length;h++)l[h]();s[7]=null}}(i,s),1===s[1].type&&kn(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&cn(s[3])){a!==s[3]&&iI(a,s);const l=s[19];null!==l&&l.detachView(i)}}}function sI(i,s,a){return function(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const c=i.data[l.directiveStart].encapsulation;if(c===qe.None||c===qe.Emulated)return null}return Ti(l,a)}(i,s.parent,a)}function ld(i,s,a,l,c){kn(i)?i.insertBefore(s,a,l,c):s.insertBefore(a,l,c)}function RE(i,s,a){kn(i)?i.appendChild(s,a):s.appendChild(a)}function aI(i,s,a,l,c){null!==l?ld(i,s,a,l,c):RE(i,s,a)}function vr(i,s){return kn(i)?i.parentNode(s):s.parentNode}let Ba=function(i,s,a){return 40&i.type?Ti(i,a):null};function T_(i,s,a,l){const c=sI(i,l,s),h=s[11],v=function(i,s,a){return Ba(i,s,a)}(l.parent||s[6],l,s);if(null!=c)if(Array.isArray(a))for(let C=0;C<a.length;C++)aI(h,c,a[C],v,!1);else aI(h,c,a,v,!1)}function ef(i,s){if(null!==s){const a=s.type;if(3&a)return Ti(s,i);if(4&a)return D_(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return ef(i,l);{const c=i[s.index];return cn(c)?D_(-1,c):en(c)}}if(32&a)return CE(s,i)()||en(i[s.index]);{const l=uI(i,s);return null!==l?Array.isArray(l)?l[0]:ef(Jp(i[16]),l):ef(i,s.next)}}return null}function uI(i,s){return null!==s?i[16][6].projection[s.projection]:null}function D_(i,s){const a=10+i+1;if(a<s.length){const l=s[a],c=l[1].firstChild;if(null!==c)return ef(l,c)}return s[7]}function A_(i,s,a,l,c,h,m){for(;null!=a;){const v=l[a.index],C=a.type;if(m&&0===s&&(v&&Nr(en(v),l),a.flags|=4),64!=(64&a.flags))if(8&C)A_(i,s,a.child,l,c,h,!1),ud(s,i,c,v,h);else if(32&C){const T=CE(a,l);let x;for(;x=T();)ud(s,i,c,x,h);ud(s,i,c,v,h)}else 16&C?sR(i,s,l,a,c,h):ud(s,i,c,v,h);a=m?a.projectionNext:a.next}}function tf(i,s,a,l,c,h){A_(a,l,i.firstChild,s,c,h,!1)}function sR(i,s,a,l,c,h){const m=a[16],C=m[6].projection[l.projection];if(Array.isArray(C))for(let T=0;T<C.length;T++)ud(s,i,c,C[T],h);else A_(i,s,C,m[3],c,h,!0)}function dI(i,s,a){kn(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function ME(i,s,a){kn(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function hI(i,s,a){let l=i.length;for(;;){const c=i.indexOf(s,a);if(-1===c)return c;if(0===c||i.charCodeAt(c-1)<=32){const h=s.length;if(c+h===l||i.charCodeAt(c+h)<=32)return c}a=c+1}}const pI="ng-template";function oR(i,s,a){let l=0;for(;l<i.length;){let c=i[l++];if(a&&"class"===c){if(c=i[l],-1!==hI(c.toLowerCase(),s,0))return!0}else if(1===c){for(;l<i.length&&"string"==typeof(c=i[l++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function gI(i){return 4===i.type&&i.value!==pI}function mI(i,s,a){return s===(4!==i.type||a?i.value:pI)}function aR(i,s,a){let l=4;const c=i.attrs||[],h=function(i){for(let s=0;s<i.length;s++)if(Np(i[s]))return s;return i.length}(c);let m=!1;for(let v=0;v<s.length;v++){const C=s[v];if("number"!=typeof C){if(!m)if(4&l){if(l=2|1&l,""!==C&&!mI(i,C,a)||""===C&&1===s.length){if(Wo(l))return!1;m=!0}}else{const T=8&l?C:s[++v];if(8&l&&null!==i.attrs){if(!oR(i.attrs,T,a)){if(Wo(l))return!1;m=!0}continue}const k=uR(8&l?"class":C,c,gI(i),a);if(-1===k){if(Wo(l))return!1;m=!0;continue}if(""!==T){let L;L=k>h?"":c[k+1].toLowerCase();const q=8&l?L:null;if(q&&-1!==hI(q,T,0)||2&l&&T!==L){if(Wo(l))return!1;m=!0}}}}else{if(!m&&!Wo(l)&&!Wo(C))return!1;if(m&&Wo(C))continue;m=!1,l=C|1&l}}return Wo(l)||m}function Wo(i){return 0==(1&i)}function uR(i,s,a,l){if(null===s)return-1;let c=0;if(l||!a){let h=!1;for(;c<s.length;){const m=s[c];if(m===i)return c;if(3===m||6===m)h=!0;else{if(1===m||2===m){let v=s[++c];for(;"string"==typeof v;)v=s[++c];continue}if(4===m)break;if(0===m){c+=4;continue}}c+=h?1:2}return-1}return function(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function S_(i,s,a=!1){for(let l=0;l<s.length;l++)if(aR(i,s[l],a))return!0;return!1}function hR(i,s){return i?":not("+s.trim()+")":s}function fR(i){let s=i[0],a=1,l=2,c="",h=!1;for(;a<i.length;){let m=i[a];if("string"==typeof m)if(2&l){const v=i[++a];c+="["+m+(v.length>0?'="'+v+'"':"")+"]"}else 8&l?c+="."+m:4&l&&(c+=" "+m);else""!==c&&!Wo(m)&&(s+=hR(h,c),c=""),l=m,h=h||!Wo(l);a++}return""!==c&&(s+=hR(h,c)),s}const Rt={};function kE(i){Ol(Ft(),Se(),Sr()+i,du())}function Ol(i,s,a,l){if(!l)if(3==(3&s[2])){const h=i.preOrderCheckHooks;null!==h&&Ia(s,h,a)}else{const h=i.preOrderHooks;null!==h&&Fo(s,h,0,a)}no(a)}function Ls(i,s){return i<<17|s<<2}function Zo(i){return i>>17&32767}function OE(i){return 2|i}function Mu(i){return(131068&i)>>2}function nf(i,s){return-131069&i|s<<2}function x_(i){return 1|i}function DI(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const c=a[l],h=a[l+1];if(-1!==h){const m=i.data[h];Po(c),m.contentQueries(2,s[h],h)}}}function k_(i,s,a,l,c,h,m,v,C,T){const x=s.blueprint.slice();return x[0]=c,x[2]=140|l,Vr(x),x[3]=x[15]=i,x[8]=a,x[10]=m||i&&i[10],x[11]=v||i&&i[11],x[12]=C||i&&i[12]||null,x[9]=T||i&&i[9]||null,x[6]=h,x[16]=2==s.type?i[16]:x,x}function rg(i,s,a,l,c){let h=i.data[s];if(null===h)h=function(i,s,a,l,c){const h=cu(),m=No(),C=i.data[s]=function(i,s,a,l,c,h){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?h:h&&h.parent,a,s,l,c);return null===i.firstChild&&(i.firstChild=C),null!==h&&(m?null==h.child&&null!==C.parent&&(h.child=C):null===h.next&&(h.next=C)),C}(i,s,a,l,c),wt.lFrame.inI18n&&(h.flags|=64);else if(64&h.type){h.type=a,h.value=l,h.attrs=c;const m=function(){const i=wt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();h.injectorIndex=null===m?-1:m.injectorIndex}return Qr(h,!0),h}function ig(i,s,a,l){if(0===a)return-1;const c=s.length;for(let h=0;h<a;h++)s.push(l),i.blueprint.push(l),i.data.push(null);return c}function sg(i,s,a){gu(s);try{const l=i.viewQuery;null!==l&&iw(1,l,a);const c=i.template;null!==c&&ag(i,s,c,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&DI(i,s),i.staticViewQueries&&iw(2,i.viewQuery,a);const h=i.components;null!==h&&function(i,s){for(let a=0;a<s.length;a++)OI(i,s[a])}(s,h)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,Oo()}}function Lu(i,s,a,l){const c=s[2];if(256==(256&c))return;gu(s);const h=du();try{Vr(s),function(i){wt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&ag(i,s,a,2,l);const m=3==(3&c);if(!h)if(m){const T=i.preOrderCheckHooks;null!==T&&Ia(s,T,null)}else{const T=i.preOrderHooks;null!==T&&Fo(s,T,0,null),ur(s,0)}if(function(i){for(let s=IE(i);null!==s;s=C_(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const c=a[l],h=c[3];0==(1024&c[2])&&wa(h,1),c[2]|=1024}}}(s),function(i){for(let s=IE(i);null!==s;s=C_(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1];Mc(l)&&Lu(c,l,c.template,l[8])}}(s),null!==i.contentQueries&&DI(i,s),!h)if(m){const T=i.contentCheckHooks;null!==T&&Ia(s,T)}else{const T=i.contentHooks;null!==T&&Fo(s,T,1),ur(s,1)}!function(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const c=a[l];if(c<0)no(~c);else{const h=c,m=a[++l],v=a[++l];Vc(m,h),v(2,s[h])}}}finally{no(-1)}}(i,s);const v=i.components;null!==v&&function(i,s){for(let a=0;a<s.length;a++)RR(i,s[a])}(s,v);const C=i.viewQuery;if(null!==C&&iw(2,C,l),!h)if(m){const T=i.viewCheckHooks;null!==T&&Ia(s,T)}else{const T=i.viewHooks;null!==T&&Fo(s,T,2),ur(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),h||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,wa(s[3],-1))}finally{Oo()}}function og(i,s,a,l){const c=s[10],h=!du(),m=Ea(s);try{h&&!m&&c.begin&&c.begin(),m&&sg(i,s,l),Lu(i,s,a,l)}finally{h&&!m&&c.end&&c.end()}}function ag(i,s,a,l,c){const h=Sr(),m=2&l;try{no(-1),m&&s.length>20&&Ol(i,s,20,du()),a(l,c)}finally{no(h)}}function WE(i,s,a){!Oc()||(function(i,s,a,l){const c=a.directiveStart,h=a.directiveEnd;i.firstCreatePass||Lo(a,s),Nr(l,s);const m=a.initialInputs;for(let v=c;v<h;v++){const C=i.data[v],T=cs(C);T&&gg(s,a,C);const x=vu(s,i,v,a);Nr(x,s),null!==m&&b1(0,v-c,x,C,0,m),T&&(di(a.index,s)[8]=x)}}(i,s,a,Ti(a,s)),128==(128&a.flags)&&function(i,s,a){const l=a.directiveStart,c=a.directiveEnd,m=a.index,v=wt.lFrame.currentDirectiveIndex;try{no(m);for(let C=l;C<c;C++){const T=i.data[C],x=s[C];Uc(C),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&V_(T,x)}}finally{no(-1),Uc(v)}}(i,s,a))}function lg(i,s,a=Ti){const l=s.localNames;if(null!==l){let c=s.index+1;for(let h=0;h<l.length;h+=2){const m=l[h+1],v=-1===m?a(s,i):i[m];i[c++]=v}}}function cg(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=P_(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function P_(i,s,a,l,c,h,m,v,C,T){const x=20+l,k=x+c,L=function(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:Rt);return a}(x,k),q="function"==typeof T?T():T;return L[1]={type:i,blueprint:L,template:a,queries:null,viewQuery:v,declTNode:s,data:L.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:C,consts:q,incompleteFirstPass:!1}}function SI(i,s,a,l){const c=BI(s);null===a?c.push(l):(c.push(a),i.firstCreatePass&&ow(i).push(l,c.length-1))}function xI(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const c=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,c):a[l]=[s,c]}return a}function _s(i,s,a,l,c,h,m,v){const C=Ti(s,a);let x,T=s.inputs;!v&&null!=T&&(x=T[l])?($I(i,a,x,l,c),il(s)&&function(i,s){const a=di(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(l=function(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),c=null!=m?m(c,s.value||"",l):c,kn(h)?h.setProperty(C,l,c):Rs(l)||(C.setProperty?C.setProperty(l,c):C[l]=c))}function QE(i,s,a,l){let c=!1;if(Oc()){const h=function(i,s,a){const l=i.directiveRegistry;let c=null;if(l)for(let h=0;h<l.length;h++){const m=l[h];S_(a,m.selectors,!1)&&(c||(c=[]),at(Lo(a,s),i,m.type),cs(m)?(fd(i,a),c.unshift(m)):c.push(m))}return c}(i,s,a),m=null===l?null:{"":-1};if(null!==h){c=!0,MI(a,i.data.length,h.length);for(let x=0;x<h.length;x++){const k=h[x];k.providersResolver&&k.providersResolver(k)}let v=!1,C=!1,T=ig(i,s,h.length,null);for(let x=0;x<h.length;x++){const k=h[x];a.mergedAttrs=_l(a.mergedAttrs,k.hostAttrs),AR(i,a,s,T,k),ew(T,k,m),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const L=k.type.prototype;!v&&(L.ngOnChanges||L.ngOnInit||L.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),v=!0),!C&&(L.ngOnChanges||L.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),C=!0),T++}!function(i,s){const l=s.directiveEnd,c=i.data,h=s.attrs,m=[];let v=null,C=null;for(let T=s.directiveStart;T<l;T++){const x=c[T],k=x.inputs,L=null===h||gI(s)?null:C1(k,h);m.push(L),v=xI(k,T,v),C=xI(x.outputs,T,C)}null!==v&&(v.hasOwnProperty("class")&&(s.flags|=16),v.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=m,s.inputs=v,s.outputs=C}(i,a)}m&&function(i,s,a){if(s){const l=i.localNames=[];for(let c=0;c<s.length;c+=2){const h=a[s[c+1]];if(null==h)throw new Ie("301",`Export of name '${s[c+1]}' not found!`);l.push(s[c],h)}}}(a,l,m)}return a.mergedAttrs=_l(a.mergedAttrs,a.attrs),c}function L_(i,s,a,l,c,h){const m=h.hostBindings;if(m){let v=i.hostBindingOpCodes;null===v&&(v=i.hostBindingOpCodes=[]);const C=~s.index;(function(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(v)!=C&&v.push(C),v.push(l,c,m)}}function V_(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function fd(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function ew(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;cs(s)&&(a[""]=i)}}function MI(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function AR(i,s,a,l,c){i.data[l]=c;const h=c.factory||(c.factory=eo(c.type)),m=new _u(h,cs(c),null);i.blueprint[l]=m,a[l]=m,L_(i,s,0,l,ig(i,a,c.hostVars,Rt),c)}function gg(i,s,a){const l=Ti(s,i),c=cg(a),h=i[10],m=B_(i,k_(i,c,null,a.onPush?64:16,l,s,h,h.createRenderer(l,a),null,null));i[s.index]=m}function ho(i,s,a,l,c,h){const m=Ti(i,s);!function(i,s,a,l,c,h,m){if(null==h)kn(i)?i.removeAttribute(s,c,a):s.removeAttribute(c);else{const v=null==m?fe(h):m(h,l||"",c);kn(i)?i.setAttribute(s,c,v,a):a?s.setAttributeNS(a,c,v):s.setAttribute(c,v)}}(s[11],m,h,i.value,a,l,c)}function b1(i,s,a,l,c,h){const m=h[s];if(null!==m){const v=l.setInput;for(let C=0;C<m.length;){const T=m[C++],x=m[C++],k=m[C++];null!==v?l.setInput(a,k,T,x):a[x]=k}}}function C1(i,s){let a=null,l=0;for(;l<s.length;){const c=s[l];if(0!==c)if(5!==c){if("number"==typeof c)break;i.hasOwnProperty(c)&&(null===a&&(a=[]),a.push(c,i[c],s[l+1])),l+=2}else l+=2;else l+=4}return a}function SR(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function RR(i,s){const a=di(s,i);if(Mc(a)){const l=a[1];80&a[2]?Lu(l,a,l.template,a[8]):a[5]>0&&PI(a)}}function PI(i){for(let l=IE(i);null!==l;l=C_(l))for(let c=10;c<l.length;c++){const h=l[c];if(1024&h[2]){const m=h[1];Lu(m,h,m.template,h[8])}else h[5]>0&&PI(h)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const c=di(a[l],i);Mc(c)&&c[5]>0&&PI(c)}}function OI(i,s){const a=di(s,i),l=a[1];(function(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),sg(l,a,a[8])}function B_(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function tw(i){for(;i;){i[2]|=64;const s=Jp(i);if(Ii(i)&&!s)return i;i=s}return null}function VI(i,s,a){const l=s[10];l.begin&&l.begin();try{Lu(i,s,i.template,a)}catch(c){throw mg(s,c),c}finally{l.end&&l.end()}}function rw(i){!function(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=y_(a),c=l[1];og(c,l,c.template,a)}}(i[8])}function iw(i,s,a){Po(0),s(i,a)}const sw=(()=>Promise.resolve(null))();function BI(i){return i[7]||(i[7]=[])}function ow(i){return i.cleanup||(i.cleanup=[])}function mg(i,s){const a=i[9],l=a?a.get(Yh,null):null;l&&l.handleError(s)}function $I(i,s,a,l,c){for(let h=0;h<a.length;){const m=a[h++],v=a[h++],C=s[m],T=i.data[m];null!==T.setInput?T.setInput(C,c,l,v):C[v]=c}}function zo(i,s,a){const l=va(s,i);!function(i,s,a){kn(i)?i.setValue(s,a):s.textContent=a}(i[11],l,a)}function j_(i,s,a){let l=a?i.styles:null,c=a?i.classes:null,h=0;if(null!==s)for(let m=0;m<s.length;m++){const v=s[m];"number"==typeof v?h=v:1==h?c=oe(c,v):2==h&&(l=oe(l,v+": "+s[++m]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=c:i.classesWithoutHost=c}const Fl=new Pn("INJECTOR",-1);class GI{get(s,a=ft){if(a===ft){const l=new Error(`NullInjectorError: No provider for ${te(s)}!`);throw l.name="NullInjectorError",l}return a}}const rf=new Pn("Set Injector scope."),_g={},uw={};let lw;function qI(){return void 0===lw&&(lw=new GI),lw}function ZI(i,s=null,a=null,l){return new T1(i,a,s||qI(),l)}class T1{constructor(s,a,l,c=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const h=[];a&&fs(a,v=>this.processProvider(v,s,a)),fs([s],v=>this.processInjectorType(v,[],h)),this.records.set(Fl,sf(void 0,this));const m=this.records.get(rf);this.scope=null!=m?m.value:null,this.source=c||("object"==typeof s?null:te(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=ft,l=et.Default){this.assertNotDestroyed();const c=gs(this),h=zn(void 0);try{if(!(l&et.SkipSelf)){let v=this.records.get(s);if(void 0===v){const C=("function"==typeof(i=s)||"object"==typeof i&&i instanceof Pn)&&Wn(s);v=C&&this.injectableDefInScope(C)?sf(yg(s),_g):null,this.records.set(s,v)}if(null!=v)return this.hydrate(s,v)}return(l&et.Self?qI():this.parent).get(s,a=l&et.Optional&&a===ft?null:a)}catch(m){if("NullInjectorError"===m.name){if((m[bt]=m[bt]||[]).unshift(te(s)),c)throw m;return Lh(m,s,"R3InjectorError",this.source)}throw m}finally{zn(h),gs(c)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((l,c)=>s.push(te(c))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(s,a,l){if(!(s=W(s)))return!1;let c=Zr(s);const h=null==c&&s.ngModule||void 0,m=void 0===h?s:h,v=-1!==l.indexOf(m);if(void 0!==h&&(c=Zr(h)),null==c)return!1;if(null!=c.imports&&!v){let x;l.push(m);try{fs(c.imports,k=>{this.processInjectorType(k,a,l)&&(void 0===x&&(x=[]),x.push(k))})}finally{}if(void 0!==x)for(let k=0;k<x.length;k++){const{ngModule:L,providers:q}=x[k];fs(q,X=>this.processProvider(X,L,q||G))}}this.injectorDefTypes.add(m);const C=eo(m)||(()=>new m);this.records.set(m,sf(C,_g));const T=c.providers;if(null!=T&&!v){const x=s;fs(T,k=>this.processProvider(k,x,T))}return void 0!==h&&void 0!==s.providers}processProvider(s,a,l){let c=af(s=W(s))?s:W(s&&s.provide);const h=dw(i=s)?sf(void 0,i.useValue):sf(cw(i),_g);var i;if(af(s)||!0!==s.multi)this.records.get(c);else{let m=this.records.get(c);m||(m=sf(void 0,_g,!0),m.factory=()=>Ji(m.multi),this.records.set(c,m)),c=s,m.multi.push(s)}this.records.set(c,h)}hydrate(s,a){return a.value===_g&&(a.value=uw,a.value=a.factory()),"object"==typeof a.value&&a.value&&null!==(i=a.value)&&"object"==typeof i&&"function"==typeof i.ngOnDestroy&&this.onDestroy.add(a.value),a.value;var i}injectableDefInScope(s){if(!s.providedIn)return!1;const a=W(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function yg(i){const s=Wn(i),a=null!==s?s.factory:eo(i);if(null!==a)return a;if(i instanceof Pn)throw new Error(`Token ${te(i)} is missing a \u0275prov definition.`);if(i instanceof Function)return function(i){const s=i.length;if(s>0){const l=function(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}(s,"?");throw new Error(`Can't resolve all parameters for ${te(i)}: (${l.join(", ")}).`)}const a=function(i){const s=i&&(i[zr]||i[Zn]);if(s){const a=function(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Error("unreachable")}function cw(i,s,a){let l;if(af(i)){const c=W(i);return eo(c)||yg(c)}if(dw(i))l=()=>W(i.useValue);else if(function(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...Ji(i.deps||[]));else if(function(i){return!(!i||!i.useExisting)}(i))l=()=>er(W(i.useExisting));else{const c=W(i&&(i.useClass||i.provide));if(!function(i){return!!i.deps}(i))return eo(c)||yg(c);l=()=>new c(...Ji(i.deps))}return l}function sf(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function dw(i){return null!==i&&"object"==typeof i&&Qi in i}function af(i){return"function"==typeof i}const hw=function(i,s,a){return function(i,s=null,a=null,l){const c=ZI(i,s,a,l);return c._resolveInjectorDefTypes(),c}({name:a},s,i,a)};let tr=(()=>{class i{static create(a,l){return Array.isArray(a)?hw(a,l,""):hw(a.providers,a.parent,a.name||"")}}return i.THROW_IF_NOT_FOUND=ft,i.NULL=new GI,i.\u0275prov=Yt({token:i,providedIn:"any",factory:()=>er(Fl)}),i.__NG_ELEMENT_ID__=-1,i})();function gi(i,s){Ca(y_(i)[1],Dn())}function yw(i){let s=function(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let c;if(cs(i))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Error("Directives cannot inherit Components");c=s.\u0275dir}if(c){if(a){l.push(c);const m=i;m.inputs=W_(i.inputs),m.declaredInputs=W_(i.declaredInputs),m.outputs=W_(i.outputs);const v=c.hostBindings;v&&vw(i,v);const C=c.viewQuery,T=c.contentQueries;if(C&&$R(i,C),T&&lT(i,T),be(i.inputs,c.inputs),be(i.declaredInputs,c.declaredInputs),be(i.outputs,c.outputs),cs(c)&&c.data.animation){const x=i.data;x.animation=(x.animation||[]).concat(c.data.animation)}}const h=c.features;if(h)for(let m=0;m<h.length;m++){const v=h[m];v&&v.ngInherit&&v(i),v===yw&&(a=!1)}}s=Object.getPrototypeOf(s)}!function(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const c=i[l];c.hostVars=s+=c.hostVars,c.hostAttrs=_l(c.hostAttrs,a=_l(a,c.hostAttrs))}}(l)}function W_(i){return i===z?{}:i===G?[]:i}function $R(i,s){const a=i.viewQuery;i.viewQuery=a?(l,c)=>{s(l,c),a(l,c)}:s}function lT(i,s){const a=i.contentQueries;i.contentQueries=a?(l,c,h)=>{s(l,c,h),a(l,c,h)}:s}function vw(i,s){const a=i.hostBindings;i.hostBindings=a?(l,c)=>{s(l,c),a(l,c)}:s}let uf=null;function Mr(){if(!uf){const i=_t.Symbol;if(i&&i.iterator)uf=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(uf=l)}}}return uf}function md(i){return!!z_(i)&&(Array.isArray(i)||!(i instanceof Map)&&Mr()in i)}function z_(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Oi(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function K_(i,s,a,l){const c=Se();return Oi(c,ds(),s)&&(Ft(),ho(Qn(),c,i,s,a,l)),K_}function _d(i,s,a,l){return Oi(i,ds(),a)?s+fe(a)+l:Rt}function Ig(i,s,a,l,c,h,m,v){const C=Se(),T=Ft(),x=i+20,k=T.firstCreatePass?function(i,s,a,l,c,h,m,v,C){const T=s.consts,x=rg(s,i,4,m||null,Ki(T,v));QE(s,a,x,Ki(T,C)),Ca(s,x);const k=x.tViews=P_(2,x,l,c,h,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T);return null!==s.queries&&(s.queries.template(s,x),k.queries=s.queries.embeddedTView(x)),x}(x,T,C,s,a,l,c,h,m):T.data[x];Qr(k,!1);const L=C[11].createComment("");T_(T,C,L,k),Nr(L,C),B_(C,C[x]=SR(L,C,L,k)),au(k)&&WE(T,C,k),null!=m&&lg(C,k,v)}function Q_(i){return function(i,s){return i[s]}(wt.lFrame.contextLView,20+i)}function Uu(i,s=et.Default){const a=Se();return null===a?er(i,s):Wc(Dn(),a,W(i),s)}function uy(i,s,a){const l=Se();return Oi(l,ds(),s)&&_s(Ft(),Qn(),l,i,s,l[11],a,!1),uy}function Ag(i,s,a,l,c){const m=c?"class":"style";$I(i,a,s.inputs[m],m,l)}function ly(i,s,a,l){const c=Se(),h=Ft(),m=20+i,v=c[11],C=c[m]=DE(v,s,wt.lFrame.currentNamespace),T=h.firstCreatePass?function(i,s,a,l,c,h,m){const v=s.consts,T=rg(s,i,2,c,Ki(v,h));return QE(s,a,T,Ki(v,m)),null!==T.attrs&&j_(T,T.attrs,!1),null!==T.mergedAttrs&&j_(T,T.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,T),T}(m,h,c,0,s,a,l):h.data[m];Qr(T,!0);const x=T.mergedAttrs;null!==x&&Gc(v,C,x);const k=T.classes;null!==k&&ME(v,C,k);const L=T.styles;null!==L&&dI(v,C,L),64!=(64&T.flags)&&T_(h,c,C,T),0===wt.lFrame.elementDepthCount&&Nr(C,c),wt.lFrame.elementDepthCount++,au(T)&&(WE(h,c,T),function(i,s,a){if(Cc(s)){const c=s.directiveEnd;for(let h=s.directiveStart;h<c;h++){const m=i.data[h];m.contentQueries&&m.contentQueries(1,a[h],h)}}}(h,T,c)),null!==l&&lg(c,T)}function vd(){let i=Dn();No()?wt.lFrame.isParent=!1:(i=i.parent,Qr(i,!1));const s=i;wt.lFrame.elementDepthCount--;const a=Ft();a.firstCreatePass&&(Ca(a,i),Cc(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function(i){return 0!=(16&i.flags)}(s)&&Ag(a,s,Se(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function(i){return 0!=(32&i.flags)}(s)&&Ag(a,s,Se(),s.stylesWithoutHost,!1)}function cy(i,s,a,l){ly(i,s,a,l),vd()}function NT(){return Se()}function xg(i){return!!i&&"function"==typeof i.then}function Rg(i){return!!i&&"function"==typeof i.subscribe}const Ng=Rg;function dy(i,s,a,l){const c=Se(),h=Ft(),m=Dn();return function(i,s,a,l,c,h,m,v){const C=au(l),x=i.firstCreatePass&&ow(i),k=s[8],L=BI(s);let q=!0;if(3&l.type||v){const se=Ti(l,s),Le=v?v(se):se,Te=L.length,ut=v?It=>v(en(It[l.index])):l.index;if(kn(a)){let It=null;if(!v&&C&&(It=function(i,s,a,l){const c=i.cleanup;if(null!=c)for(let h=0;h<c.length-1;h+=2){const m=c[h];if(m===a&&c[h+1]===l){const v=s[7],C=c[h+2];return v.length>C?v[C]:null}"string"==typeof m&&(h+=2)}return null}(i,s,c,l.index)),null!==It)(It.__ngLastListenerFn__||It).__ngNextListenerFn__=h,It.__ngLastListenerFn__=h,q=!1;else{h=hy(l,s,k,h,!1);const nn=a.listen(Le,c,h);L.push(h,nn),x&&x.push(c,ut,Te,Te+1)}}else h=hy(l,s,k,h,!0),Le.addEventListener(c,h,m),L.push(h),x&&x.push(c,ut,Te,m)}else h=hy(l,s,k,h,!1);const X=l.outputs;let he;if(q&&null!==X&&(he=X[c])){const se=he.length;if(se)for(let Le=0;Le<se;Le+=2){const Or=s[he[Le]][he[Le+1]].subscribe(h),bs=L.length;L.push(h,Or),x&&x.push(c,l.index,bs,-(bs+1))}}}(h,c,c[11],m,i,s,!!a,l),dy}function _f(i,s,a,l){try{return!1!==a(l)}catch(c){return mg(i,c),!1}}function hy(i,s,a,l,c){return function h(m){if(m===Function)return l;const v=2&i.flags?di(i.index,s):s;0==(32&s[2])&&tw(v);let C=_f(s,0,l,m),T=h.__ngNextListenerFn__;for(;T;)C=_f(s,0,T,m)&&C,T=T.__ngNextListenerFn__;return c&&!1===C&&(m.preventDefault(),m.returnValue=!1),C}}function Lw(i,s,a){return kg(i,"",s,"",a),Lw}function kg(i,s,a,l,c){const h=Se(),m=_d(h,s,a,l);return m!==Rt&&_s(Ft(),Qn(),h,i,m,h[11],c,!1),kg}function Hn(i,s,a,l,c){const h=i[a+1],m=null===s;let v=l?Zo(h):Mu(h),C=!1;for(;0!==v&&(!1===C||m);){const x=i[v+1];my(i[v],s)&&(C=!0,i[v+1]=l?x_(x):OE(x)),v=l?Zo(x):Mu(x)}C&&(i[a+1]=l?OE(h):x_(h))}function my(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&fr(i,s)>=0}function jw(i,s){return function(i,s,a,l){const c=Se(),h=Ft(),m=function(i){const s=wt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);h.firstUpdatePass&&function(i,s,a,l){const c=i.data;if(null===c[a+1]){const h=c[Sr()],m=function(i,s){return s>=i.expandoStartIndex}(i,a);(function(i,s){return 0!=(i.flags&(s?16:32))})(h,l)&&null===s&&!m&&(s=!1),s=function(i,s,a,l){const c=function(i){const s=wt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let h=l?s.residualClasses:s.residualStyles;if(null===c)0===(l?s.classBindings:s.styleBindings)&&(a=ql(a=Gw(null,i,s,a,l),s.attrs,l),h=null);else{const m=s.directiveStylingLast;if(-1===m||i[m]!==c)if(a=Gw(c,i,s,a,l),null===h){let C=function(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==Mu(l))return i[Zo(l)]}(i,s,l);void 0!==C&&Array.isArray(C)&&(C=Gw(null,i,s,C[1],l),C=ql(C,s.attrs,l),function(i,s,a,l){i[Zo(a?s.classBindings:s.styleBindings)]=l}(i,s,l,C))}else h=function(i,s,a){let l;const c=s.directiveEnd;for(let h=1+s.directiveStylingLast;h<c;h++)l=ql(l,i[h].hostAttrs,a);return ql(l,s.attrs,a)}(i,s,l)}return void 0!==h&&(l?s.residualClasses=h:s.residualStyles=h),a}(c,h,s,l),function(i,s,a,l,c,h){let m=h?s.classBindings:s.styleBindings,v=Zo(m),C=Mu(m);i[l]=a;let x,T=!1;if(Array.isArray(a)){const k=a;x=k[1],(null===x||fr(k,x)>0)&&(T=!0)}else x=a;if(c)if(0!==C){const L=Zo(i[v+1]);i[l+1]=Ls(L,v),0!==L&&(i[L+1]=nf(i[L+1],l)),i[v+1]=function(i,s){return 131071&i|s<<17}(i[v+1],l)}else i[l+1]=Ls(v,0),0!==v&&(i[v+1]=nf(i[v+1],l)),v=l;else i[l+1]=Ls(C,0),0===v?v=l:i[C+1]=nf(i[C+1],l),C=l;T&&(i[l+1]=OE(i[l+1])),Hn(i,x,l,!0),Hn(i,x,l,!1),function(i,s,a,l,c){const h=c?i.residualClasses:i.residualStyles;null!=h&&"string"==typeof s&&fr(h,s)>=0&&(a[l+1]=x_(a[l+1]))}(s,x,i,l,h),m=Ls(v,C),h?s.classBindings=m:s.styleBindings=m}(c,h,s,a,m,l)}}(h,i,m,l),s!==Rt&&Oi(c,m,s)&&function(i,s,a,l,c,h,m,v){if(!(3&s.type))return;const C=i.data,T=C[v+1];Wl(function(i){return 1==(1&i)}(T)?vf(C,s,a,c,Mu(T),m):void 0)||(Wl(h)||function(i){return 2==(2&i)}(T)&&(h=vf(C,null,a,c,v,m)),function(i,s,a,l,c){const h=kn(i);if(s)c?h?i.addClass(a,l):a.classList.add(l):h?i.removeClass(a,l):a.classList.remove(l);else{let m=-1===l.indexOf("-")?void 0:Ua.DashCase;if(null==c)h?i.removeStyle(a,l,m):a.style.removeProperty(l);else{const v="string"==typeof c&&c.endsWith("!important");v&&(c=c.slice(0,-10),m|=Ua.Important),h?i.setStyle(a,l,c,m):a.style.setProperty(l,c,v?"important":"")}}}(l,m,va(Sr(),a),c,h))}(h,h.data[Sr()],c,c[11],i,c[m+1]=function(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=te(Ho(i)))),i}(s,a),l,m)}(i,s,null,!0),jw}function Gw(i,s,a,l,c){let h=null;const m=a.directiveEnd;let v=a.directiveStylingLast;for(-1===v?v=a.directiveStart:v++;v<m&&(h=s[v],l=ql(l,h.hostAttrs,c),h!==i);)v++;return null!==i&&(a.directiveStylingLast=v),l}function ql(i,s,a){const l=a?1:2;let c=-1;if(null!==s)for(let h=0;h<s.length;h++){const m=s[h];"number"==typeof m?c=m:c===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Ri(i,m,!!a||s[++h]))}return void 0===i?null:i}function vf(i,s,a,l,c,h){const m=null===s;let v;for(;c>0;){const C=i[c],T=Array.isArray(C),x=T?C[1]:C,k=null===x;let L=a[c+1];L===Rt&&(L=k?G:void 0);let q=k?Ni(L,l):x===l?L:void 0;if(T&&!Wl(q)&&(q=Ni(C,l)),Wl(q)&&(v=q,m))return v;const X=i[c+1];c=m?Zo(X):Mu(X)}if(null!==s){let C=h?s.residualClasses:s.residualStyles;null!=C&&(v=Ni(C,l))}return v}function Wl(i){return void 0!==i}function Zw(i,s=""){const a=Se(),l=Ft(),c=i+20,h=l.firstCreatePass?rg(l,c,1,s,null):l.data[c],m=a[c]=function(i,s){return kn(i)?i.createText(s):i.createTextNode(s)}(a[11],s);T_(l,a,m,h),Qr(h,!1)}function zw(i){return Kw("",i,""),zw}function Kw(i,s,a){const l=Se(),c=_d(l,i,s,a);return c!==Rt&&zo(l,Sr(),c),Kw}function rs(i,s,a){const l=Se();return Oi(l,ds(),s)&&_s(Ft(),Qn(),l,i,s,l[11],a,!0),rs}const zl=void 0;var oN=["en",[["a","p"],["AM","PM"],zl],[["AM","PM"],zl,zl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],zl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],zl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",zl,"{1} 'at' {0}",zl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(i){const s=Math.floor(Math.abs(i)),a=i.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let wf={};function f0(i){const s=function(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=eD(s);if(a)return a;const l=s.split("-")[0];if(a=eD(l),a)return a;if("en"===l)return oN;throw new Error(`Missing locale data for the locale "${i}".`)}function p0(i){return f0(i)[yt.PluralCase]}function eD(i){return i in wf||(wf[i]=_t.ng&&_t.ng.common&&_t.ng.common.locales&&_t.ng.common.locales[i]),wf[i]}var yt=(()=>((yt=yt||{})[yt.LocaleId=0]="LocaleId",yt[yt.DayPeriodsFormat=1]="DayPeriodsFormat",yt[yt.DayPeriodsStandalone=2]="DayPeriodsStandalone",yt[yt.DaysFormat=3]="DaysFormat",yt[yt.DaysStandalone=4]="DaysStandalone",yt[yt.MonthsFormat=5]="MonthsFormat",yt[yt.MonthsStandalone=6]="MonthsStandalone",yt[yt.Eras=7]="Eras",yt[yt.FirstDayOfWeek=8]="FirstDayOfWeek",yt[yt.WeekendRange=9]="WeekendRange",yt[yt.DateFormat=10]="DateFormat",yt[yt.TimeFormat=11]="TimeFormat",yt[yt.DateTimeFormat=12]="DateTimeFormat",yt[yt.NumberSymbols=13]="NumberSymbols",yt[yt.NumberFormats=14]="NumberFormats",yt[yt.CurrencyCode=15]="CurrencyCode",yt[yt.CurrencySymbol=16]="CurrencySymbol",yt[yt.CurrencyName=17]="CurrencyName",yt[yt.Currencies=18]="Currencies",yt[yt.Directionality=19]="Directionality",yt[yt.PluralCase=20]="PluralCase",yt[yt.ExtraData=21]="ExtraData",yt))();const Qo="en-US";let by=Qo;function tt(i){Ln(i,"Expected localeId to be defined"),"string"==typeof i&&(by=i.toLowerCase().replace(/_/g,"-"))}function $r(i,s,a,l,c){if(i=W(i),Array.isArray(i))for(let h=0;h<i.length;h++)$r(i[h],s,a,l,c);else{const h=Ft(),m=Se();let v=af(i)?i:W(i.provide),C=cw(i);const T=Dn(),x=1048575&T.providerIndexes,k=T.directiveStart,L=T.providerIndexes>>20;if(af(i)||!i.multi){const q=new _u(C,c,Uu),X=Ql(v,s,c?x:x+L,k);-1===X?(at(Lo(T,m),h,v),On(h,i,s.length),s.push(v),T.directiveStart++,T.directiveEnd++,c&&(T.providerIndexes+=1048576),a.push(q),m.push(q)):(a[X]=q,m[X]=q)}else{const q=Ql(v,s,x+L,k),X=Ql(v,s,x,x+L),he=q>=0&&a[q],se=X>=0&&a[X];if(c&&!se||!c&&!he){at(Lo(T,m),h,v);const Le=function(i,s,a,l,c){const h=new _u(i,a,Uu);return h.multi=[],h.index=s,h.componentProviders=0,C0(h,c,l&&!a),h}(c?mD:_N,a.length,c,l,C);!c&&se&&(a[X].providerFactory=Le),On(h,i,s.length,0),s.push(v),T.directiveStart++,T.directiveEnd++,c&&(T.providerIndexes+=1048576),a.push(Le),m.push(Le)}else On(h,i,q>-1?q:X,C0(a[c?X:q],C,!c&&l));!c&&l&&se&&a[X].componentProviders++}}}function On(i,s,a,l){const c=af(s);if(c||function(i){return!!i.useClass}(s)){const m=(s.useClass||s).prototype.ngOnDestroy;if(m){const v=i.destroyHooks||(i.destroyHooks=[]);if(!c&&s.multi){const C=v.indexOf(a);-1===C?v.push(a,[l,m]):v[C+1].push(l,m)}else v.push(a,m)}}}function C0(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function Ql(i,s,a,l){for(let c=a;c<l;c++)if(s[c]===i)return c;return-1}function _N(i,s,a,l){return qu(this.multi,[])}function mD(i,s,a,l){const c=this.multi;let h;if(this.providerFactory){const m=this.providerFactory.componentProviders,v=vu(a,a[1],this.providerFactory.index,l);h=v.slice(0,m),qu(c,h);for(let C=m;C<v.length;C++)h.push(v[C])}else h=[],qu(c,h);return h}function qu(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function xf(i,s=[]){return a=>{a.providersResolver=(l,c)=>function(i,s,a){const l=Ft();if(l.firstCreatePass){const c=cs(i);$r(a,l.data,l.blueprint,c,!0),$r(s,l.data,l.blueprint,c,!1)}}(l,c?c(i):i,s)}}class em{}const T0="ngComponent";class vN{resolveComponentFactory(s){throw function(i){const s=Error(`No component factory found for ${te(i)}. Did you add it to @NgModule.entryComponents?`);return s[T0]=i,s}(s)}}let Rf=(()=>{class i{}return i.NULL=new vN,i})();function Ry(...i){}function Nf(i,s){return new Za(Ti(i,s))}const Mf=function(){return Nf(Dn(),Se())};let Za=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=Mf,i})();function D0(i){return i instanceof Za?i.nativeElement:i}class vo{}let _D=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>A0(),i})();const A0=function(){const i=Se(),a=di(Dn().index,i);return function(i){return i[11]}(Js(a)?a:i)};let Jl=(()=>{class i{}return i.\u0275prov=Yt({token:i,providedIn:"root",factory:()=>null}),i})();class Bs{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Ny=new Bs("12.2.16");class Pf{constructor(){}supports(s){return md(s)}create(s){return new R0(s)}}const yD=(i,s)=>s;class R0{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||yD}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,c=0,h=null;for(;a||l;){const m=!l||a&&a.currentIndex<N0(l,c,h)?a:l,v=N0(m,c,h),C=m.currentIndex;if(m===l)c--,l=l._nextRemoved;else if(a=a._next,null==m.previousIndex)c++;else{h||(h=[]);const T=v-c,x=C-c;if(T!=x){for(let L=0;L<T;L++){const q=L<h.length?h[L]:h[L]=0,X=q+L;x<=X&&X<T&&(h[L]=q+1)}h[m.previousIndex]=x-T}}v!==C&&s(m,v,C)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!md(s))throw new Error(`Error trying to diff '${te(s)}'. Only arrays and iterables are allowed`);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,h,m,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let v=0;v<this.length;v++)h=s[v],m=this._trackByFn(v,h),null!==a&&Object.is(a.trackById,m)?(l&&(a=this._verifyReinsertion(a,h,m,v)),Object.is(a.item,h)||this._addIdentityChange(a,h)):(a=this._mismatch(a,h,m,v),l=!0),a=a._next}else c=0,function(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Mr()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,v=>{m=this._trackByFn(c,v),null!==a&&Object.is(a.trackById,m)?(l&&(a=this._verifyReinsertion(a,v,m,c)),Object.is(a.item,v)||this._addIdentityChange(a,v)):(a=this._mismatch(a,v,m,c),l=!0),a=a._next,c++}),this.length=c;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,c){let h;return null===s?h=this._itTail:(h=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,h,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,c))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,h,c)):s=this._addAfter(new ED(a,l),h,c),s}_verifyReinsertion(s,a,l,c){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==h?s=this._reinsertAfter(h,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,h=s._nextRemoved;return null===c?this._removalsHead=h:c._nextRemoved=h,null===h?this._removalsTail=c:h._prevRemoved=c,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const c=null===a?this._itHead:a._next;return s._next=c,s._prev=a,null===c?this._itTail=s:c._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new bD),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new bD),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class ED{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class wD{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class bD{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new wD,this.map.set(a,l)),l.add(s)}get(s,a){const c=this.map.get(s);return c?c.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function N0(i,s,a){const l=i.previousIndex;if(null===l)return l;let c=0;return a&&l<a.length&&(c=a[l]),l+s+c}class M0{constructor(){}supports(s){return s instanceof Map||z_(s)}create(){return new CD}}class CD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||z_(s)))throw new Error(`Error trying to diff '${te(s)}'. Only maps and objects are allowed`)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,c)=>{if(a&&a.key===c)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const h=this._getOrCreateRecordForKey(c,l);a=this._insertBeforeOrAppend(a,h)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,a);const h=c._prev,m=c._next;return h&&(h._next=m),m&&(m._prev=h),c._next=null,c._prev=null,c}const l=new My(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class My{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ID(){return new ky([new Pf])}let ky=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||ID()),deps:[[i,new jn,new Os]]}}find(a){const l=this.factories.find(c=>c.supports(a));if(null!=l)return l;throw new Error(`Cannot find a differ supporting object '${a}' of type '${function(i){return i.name||typeof i}(a)}'`)}}return i.\u0275prov=Yt({token:i,providedIn:"root",factory:ID}),i})();function Sd(){return new za([new M0])}let za=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Sd()),deps:[[i,new jn,new Os]]}}find(a){const l=this.factories.find(c=>c.supports(a));if(l)return l;throw new Error(`Cannot find a differ supporting object '${a}'`)}}return i.\u0275prov=Yt({token:i,providedIn:"root",factory:Sd}),i})();function tm(i,s,a,l,c=!1){for(;null!==a;){const h=s[a.index];if(null!==h&&l.push(en(h)),cn(h))for(let v=10;v<h.length;v++){const C=h[v],T=C[1].firstChild;null!==T&&tm(C[1],C,T,l)}const m=a.type;if(8&m)tm(i,s,a.child,l);else if(32&m){const v=CE(a,s);let C;for(;C=v();)l.push(C)}else if(16&m){const v=uI(s,a);if(Array.isArray(v))l.push(...v);else{const C=Jp(s[16]);tm(C[1],C,v,l,!0)}}a=c?a.projectionNext:a.next}return l}class ea{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return tm(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(cn(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(Xp(s,l),pi(a,l))}this._attachedToViewContainer=!1}SE(this._lView[1],this._lView)}onDestroy(s){SI(this._lView[1],this._lView,null,s)}markForCheck(){tw(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){VI(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(i,s,a){to(!0);try{VI(i,s,a)}finally{to(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var s;this._appRef=null,tf(this._lView[1],s=this._lView,s[11],2,null,null)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=s}}class DD extends ea{constructor(s){super(s),this._view=s}detectChanges(){rw(this._view)}checkNoChanges(){!function(i){to(!0);try{rw(i)}finally{to(!1)}}(this._view)}get context(){return null}}const AD=function(i){return function(i,s,a){if(il(i)&&!a){const l=di(i.index,s);return new ea(l,l)}return 47&i.type?new ea(s[16],s):null}(Dn(),Se(),16==(16&i))};let nm=(()=>{class i{}return i.__NG_ELEMENT_ID__=AD,i})();const kr=[new M0],Oy=new ky([new Pf]),DN=new za(kr),SD=function(){return im(Dn(),Se())};let Ff=(()=>{class i{}return i.__NG_ELEMENT_ID__=SD,i})();const rm=Ff,xd=class extends rm{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s){const a=this._declarationTContainer.tViews,l=k_(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const h=this._declarationLView[19];return null!==h&&(l[19]=h.createEmbeddedView(a)),sg(a,l,s),new ea(l)}};function im(i,s){return 4&i.type?new xd(s,i,Nf(i,s)):null}class Xl{}class Lf{}const Pr=function(){return kD(Dn(),Se())};let tn=(()=>{class i{}return i.__NG_ELEMENT_ID__=Pr,i})();const ND=tn,Wu=class extends ND{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return Nf(this._hostTNode,this._hostLView)}get injector(){return new Ms(this._hostTNode,this._hostLView)}get parentInjector(){const s=Bt(this._hostTNode,this._hostLView);if(qc(s)){const a=Ta(s,this._hostLView),l=io(s);return new Ms(a[1].data[l+8],a)}return new Ms(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=MD(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){const c=s.createEmbeddedView(a||{});return this.insert(c,l),c}createComponent(s,a,l,c,h){const m=l||this.parentInjector;if(!h&&null==s.ngModule&&m){const C=m.get(Xl,null);C&&(h=C)}const v=s.create(m,c,void 0,h);return this.insert(v.hostView,a),v}insert(s,a){const l=s._lView,c=l[1];if(cn(l[3])){const x=this.indexOf(s);if(-1!==x)this.detach(x);else{const k=l[3],L=new Wu(k,k[6],k[3]);L.detach(L.indexOf(s))}}const h=this._adjustIndex(a),m=this._lContainer;!function(i,s,a,l){const c=10+l,h=a.length;l>0&&(a[c-1][4]=s),l<h-10?(s[4]=a[c],Ma(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const m=s[17];null!==m&&a!==m&&function(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(m,s);const v=s[19];null!==v&&v.insertView(i),s[2]|=128}(c,l,m,h);const v=D_(h,m),C=l[11],T=vr(C,m[7]);return null!==T&&function(i,s,a,l,c,h){l[0]=c,l[6]=s,tf(i,l,a,1,c,h)}(c,m[6],C,l,T,v),s.attachToViewContainerRef(),Ma(Es(m),h,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=MD(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=Xp(this._lContainer,a);l&&(pi(Es(this._lContainer),a),SE(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=Xp(this._lContainer,a);return l&&null!=pi(Es(this._lContainer),a)?new ea(l):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function MD(i){return i[8]}function Es(i){return i[8]||(i[8]=[])}function kD(i,s){let a;const l=s[i.index];if(cn(l))a=l;else{let c;if(8&i.type)c=en(l);else{const h=s[11];c=h.createComment("");const m=Ti(i,s);ld(h,vr(h,m),c,function(i,s){return kn(i)?i.nextSibling(s):s.nextSibling}(h,m),!1)}s[i.index]=a=SR(l,s,c,i),B_(s,a)}return new Wu(a,i,s)}const Bd={};class Z0 extends Rf{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Dt(s);return new eA(a,this.ngModule)}}function XD(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}const z0=new Pn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Qh});class eA extends em{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=s.selectors.map(fR).join(","),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return XD(this.componentDef.inputs)}get outputs(){return XD(this.componentDef.outputs)}create(s,a,l,c){const h=(c=c||this.ngModule)?function(i,s){return{get:(a,l,c)=>{const h=i.get(a,Bd,c);return h!==Bd||l===Bd?h:s.get(a,l,c)}}}(s,c.injector):s,m=h.get(vo,So),v=h.get(Jl,null),C=m.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",x=l?function(i,s,a){if(kn(i))return i.selectRootElement(s,a===qe.ShadowDom);let l="string"==typeof s?i.querySelector(s):s;return l.textContent="",l}(C,l,this.componentDef.encapsulation):DE(m.createRenderer(null,this.componentDef),T,function(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(T)),k=this.componentDef.onPush?576:528,L=function(i,s){return{components:[],scheduler:i||Qh,clean:sw,playerHandler:s||null,flags:0}}(),q=P_(0,null,null,1,0,null,null,null,null,null),X=k_(null,q,L,k,null,null,m,C,v,h);let he,se;gu(X);try{const Le=function(i,s,a,l,c,h){const m=a[1];a[20]=i;const C=rg(m,20,2,"#host",null),T=C.mergedAttrs=s.hostAttrs;null!==T&&(j_(C,T,!0),null!==i&&(Gc(c,i,T),null!==C.classes&&ME(c,i,C.classes),null!==C.styles&&dI(c,i,C.styles)));const x=l.createRenderer(i,s),k=k_(a,cg(s),null,s.onPush?64:16,a[20],C,l,x,h||null,null);return m.firstCreatePass&&(at(Lo(C,a),m,s.type),fd(m,C),MI(C,a.length,1)),B_(a,k),a[20]=k}(x,this.componentDef,X,m,C);if(x)if(l)Gc(C,x,["ng-version",Ny.full]);else{const{attrs:Te,classes:ut}=function(i){const s=[],a=[];let l=1,c=2;for(;l<i.length;){let h=i[l];if("string"==typeof h)2===c?""!==h&&s.push(h,i[++l]):8===c&&a.push(h);else{if(!Wo(c))break;c=h}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Te&&Gc(C,x,Te),ut&&ut.length>0&&ME(C,x,ut.join(" "))}if(se=Nc(q,20),void 0!==a){const Te=se.projection=[];for(let ut=0;ut<this.ngContentSelectors.length;ut++){const It=a[ut];Te.push(null!=It?Array.from(It):null)}}he=function(i,s,a,l,c){const h=a[1],m=function(i,s,a){const l=Dn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),AR(i,l,s,ig(i,s,1,null),a));const c=vu(s,i,l.directiveStart,l);Nr(c,s);const h=Ti(l,s);return h&&Nr(h,s),c}(h,a,s);if(l.components.push(m),i[8]=m,c&&c.forEach(C=>C(m,s)),s.contentQueries){const C=Dn();s.contentQueries(1,m,C.directiveStart)}const v=Dn();return!h.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(no(v.index),L_(a[1],v,0,v.directiveStart,v.directiveEnd,s),V_(s,m)),m}(Le,this.componentDef,X,L,[gi]),sg(q,X,null)}finally{Oo()}return new Jy(this.componentType,he,Nf(se,X),X,se)}}class Jy extends class{}{constructor(s,a,l,c,h){super(),this.location=l,this._rootLView=c,this._tNode=h,this.instance=a,this.hostView=this.changeDetectorRef=new DD(c),this.componentType=s}get injector(){return new Ms(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}const Hd=new Map;class sc extends Xl{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Z0(this);const l=Bn(s),c=s[Pe]||null;c&&tt(c),this._bootstrapComponents=Va(l.bootstrap),this._r3Injector=ZI(s,a,[{provide:Xl,useValue:this},{provide:Rf,useValue:this.componentFactoryResolver}],te(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=tr.THROW_IF_NOT_FOUND,l=et.Default){return s===tr||s===Xl||s===Fl?this:this._r3Injector.get(s,a,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class oc extends Lf{constructor(s){super(),this.moduleType=s,null!==Bn(s)&&function(i){const s=new Set;!function a(l){const c=Bn(l,!0),h=c.id;null!==h&&(function(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${te(s)} vs ${te(s.name)}`)}(h,Hd.get(h),l),Hd.set(h,l));const m=Va(c.imports);for(const v of m)s.has(v)||(s.add(v),a(v))}(i)}(s)}create(s){return new sc(this.moduleType,s)}}function zd(i){return s=>{setTimeout(i,void 0,s)}}const Hs=class extends f.xQ{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){var c,h,m;let v=s,C=a||(()=>null),T=l;if(s&&"object"==typeof s){const k=s;v=null===(c=k.next)||void 0===c?void 0:c.bind(k),C=null===(h=k.error)||void 0===h?void 0:h.bind(k),T=null===(m=k.complete)||void 0===m?void 0:m.bind(k)}this.__isAsync&&(C=zd(C),v&&(v=zd(v)),T&&(T=zd(T)));const x=super.subscribe({next:v,error:C,complete:T});return s instanceof $.w&&s.add(x),x}};function eb(){return this._results[Mr()]()}class tv{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Mr(),l=tv.prototype;l[a]||(l[a]=eb)}get changes(){return this._changes||(this._changes=new Hs)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const c=fi(s);(this._changesDetected=!function(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let c=i[l],h=s[l];if(a&&(c=a(c),h=a(h)),h!==c)return!1}return!0}(l._results,c,a))&&(l._results=c,l.length=c.length,l.last=c[this.length-1],l.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class nv{constructor(s){this.queryList=s,this.matches=null}clone(){return new nv(this.queryList)}setDirty(){this.queryList.setDirty()}}class rv{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,c=[];for(let h=0;h<l;h++){const m=a.getByIndex(h);c.push(this.queries[m.indexInDeclarationView].clone())}return new rv(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==mA(s,a).matches&&this.queries[a].setDirty()}}class iv{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class nb{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const c=null!==a?a.length:0,h=this.getByIndex(l).embeddedTView(s,c);h&&(h.indexInDeclarationView=l,null!==a?a.push(h):a=[h])}return null!==a?new nb(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class sv{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new sv(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let c=0;c<l.length;c++){const h=l[c];this.matchTNodeWithReadOption(s,a,rM(a,h)),this.matchTNodeWithReadOption(s,a,vl(a,s,h,!1,!1))}else l===Ff?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,vl(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const c=this.metadata.read;if(null!==c)if(c===Za||c===tn||c===Ff&&4&a.type)this.addMatch(a.index,-2);else{const h=vl(a,s,c,!1,!1);null!==h&&this.addMatch(a.index,h)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function rM(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function iM(i,s,a,l){return-1===a?function(i,s){return 11&i.type?Nf(i,s):4&i.type?im(i,s):null}(s,i):-2===a?function(i,s,a){return a===Za?Nf(s,i):a===Ff?im(s,i):a===tn?kD(s,i):void 0}(i,s,l):vu(i,i[1],a,s)}function Kd(i,s,a,l){const c=s[19].queries[l];if(null===c.matches){const h=i.data,m=a.matches,v=[];for(let C=0;C<m.length;C+=2){const T=m[C];v.push(T<0?null:iM(s,h[T],m[C+1],a.metadata.read))}c.matches=v}return c.matches}function mm(i,s,a,l){const c=i.queries.getByIndex(a),h=c.matches;if(null!==h){const m=Kd(i,s,c,a);for(let v=0;v<h.length;v+=2){const C=h[v];if(C>0)l.push(m[v/2]);else{const T=h[v+1],x=s[-C];for(let k=10;k<x.length;k++){const L=x[k];L[17]===L[3]&&mm(L[1],L,T,l)}if(null!==x[9]){const k=x[9];for(let L=0;L<k.length;L++){const q=k[L];mm(q[1],q,T,l)}}}}}return l}function _m(i){const s=Se(),a=Ft(),l=Ih();Po(l+1);const c=mA(a,l);if(i.dirty&&Ea(s)===(2==(2&c.metadata.flags))){if(null===c.matches)i.reset([]);else{const h=c.crossesNgTemplate?mm(a,s,l,[]):Kd(a,s,c,l);i.reset(h,D0),i.notifyOnChanges()}return!0}return!1}function rb(i,s,a,l){const c=Ft();if(c.firstCreatePass){const h=Dn();(function(i,s,a){null===i.queries&&(i.queries=new nb),i.queries.track(new sv(s,a))})(c,new iv(s,a,l),h.index),function(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(c,i),2==(2&a)&&(c.staticContentQueries=!0)}!function(i,s,a){const l=new tv(4==(4&a));SI(i,s,l,l.destroy),null===s[19]&&(s[19]=new rv),s[19].queries.push(new nv(l))}(c,Se(),a)}function ib(){return i=Se(),s=Ih(),i[19].queries[s].queryList;var i,s}function mA(i,s){return i.queries.getByIndex(s)}const yb=new Pn("Application Initializer");let Qf=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Ry,this.reject=Ry,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,c)=>{this.resolve=l,this.reject=c})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const h=this.appInits[c]();if(xg(h))a.push(h);else if(Ng(h)){const m=new Promise((v,C)=>{h.subscribe({complete:v,error:C})});a.push(m)}}Promise.all(a).then(()=>{l()}).catch(c=>{this.reject(c)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(er(yb,8))},i.\u0275prov=Yt({token:i,factory:i.\u0275fac}),i})();const pv=new Pn("AppId"),Eb={provide:pv,useFactory:function(){return`${Tm()}${Tm()}${Tm()}`},deps:[]};function Tm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const UA=new Pn("Platform Initializer"),BA=new Pn("Platform ID"),gv=new Pn("appBootstrapListener");let $A=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Yt({token:i,factory:i.\u0275fac}),i})();const Dm=new Pn("LocaleId"),HA=new Pn("DefaultCurrencyCode");class wM{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}const Am=function(i){return new oc(i)},wb=Am,bM=function(i){return Promise.resolve(Am(i))},bb=function(i){const s=Am(i),l=Va(Bn(i).declarations).reduce((c,h)=>{const m=Dt(h);return m&&c.push(new eA(m)),c},[]);return new wM(s,l)},Cb=bb,Ib=function(i){return Promise.resolve(bb(i))};let Sm=(()=>{class i{constructor(){this.compileModuleSync=wb,this.compileModuleAsync=bM,this.compileModuleAndAllComponentsSync=Cb,this.compileModuleAndAllComponentsAsync=Ib}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Yt({token:i,factory:i.\u0275fac}),i})();const Db=(()=>Promise.resolve(0))();function Ab(i){"undefined"==typeof Zone?Db.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class is{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Hs(!1),this.onMicrotaskEmpty=new Hs(!1),this.onStable=new Hs(!1),this.onError=new Hs(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!l&&a,c.shouldCoalesceRunChangeDetection=l,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function(){let i=_t.requestAnimationFrame,s=_t.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function(i){const s=()=>{!function(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(_t,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Nb(i),i.isCheckStableRunning=!0,lc(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Nb(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,c,h,m,v)=>{try{return _v(i),a.invokeTask(c,h,m,v)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||i.shouldCoalesceRunChangeDetection)&&s(),Ka(i)}},onInvoke:(a,l,c,h,m,v,C)=>{try{return _v(i),a.invoke(c,h,m,v,C)}finally{i.shouldCoalesceRunChangeDetection&&s(),Ka(i)}},onHasTask:(a,l,c,h)=>{a.hasTask(c,h),l===c&&("microTask"==h.change?(i._hasPendingMicrotasks=h.microTask,Nb(i),lc(i)):"macroTask"==h.change&&(i.hasPendingMacrotasks=h.macroTask))},onHandleError:(a,l,c,h)=>(a.handleError(c,h),i.runOutsideAngular(()=>i.onError.emit(h)),!1)})}(c)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!is.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(is.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,c){const h=this._inner,m=h.scheduleEventTask("NgZoneEvent: "+c,s,xb,Ry,Ry);try{return h.runTask(m,a,l)}finally{h.cancelTask(m)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const xb={};function lc(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Nb(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function _v(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Ka(i){i._nesting--,lc(i)}class Mb{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Hs,this.onMicrotaskEmpty=new Hs,this.onStable=new Hs,this.onError=new Hs}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,c){return s.apply(a,l)}}let KA=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{is.assertNotInAngularZone(),Ab(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ab(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,c){let h=-1;l&&l>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==h),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:h,updateCb:c})}whenStable(a,l,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,c){return[]}}return i.\u0275fac=function(a){return new(a||i)(er(is))},i.\u0275prov=Yt({token:i,factory:i.\u0275fac}),i})(),yv=(()=>{class i{constructor(){this._applications=new Map,xm.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return xm.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Yt({token:i,factory:i.\u0275fac}),i})();class TM{addToWindow(s){}findTestabilityInTree(s,a,l){return null}}function DM(i){xm=i}let xm=new TM,YA=!0,vv=!1;function kb(){return vv=!0,YA}function Pb(){if(vv)throw new Error("Cannot enable prod mode after platform setup.");YA=!1}let sa;const Ev=new Pn("AllowMultipleToken");class Ub{constructor(s,a){this.name=s,this.token=a}}function Bb(i,s,a=[]){const l=`Platform: ${s}`,c=new Pn(l);return(h=[])=>{let m=wv();if(!m||m.injector.get(Ev,!1))if(i)i(a.concat(h).concat({provide:c,useValue:!0}));else{const v=a.concat(h).concat({provide:c,useValue:!0},{provide:rf,useValue:"platform"});!function(i){if(sa&&!sa.destroyed&&!sa.injector.get(Ev,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");sa=i.get(jb);const s=i.get(UA,null);s&&s.forEach(a=>a())}(tr.create({providers:v,name:l}))}return function(i){const s=wv();if(!s)throw new Error("No platform exists!");if(!s.injector.get(i,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return s}(c)}}function wv(){return sa&&!sa.destroyed?sa:null}let jb=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const v=function(i,s){let a;return a="noop"===i?new Mb:("zone.js"===i?void 0:i)||new is({enableLongStackTrace:kb(),shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),C=[{provide:is,useValue:v}];return v.run(()=>{const T=tr.create({providers:C,parent:this.injector,name:a.moduleType.name}),x=a.create(T),k=x.injector.get(Yh,null);if(!k)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return v.runOutsideAngular(()=>{const L=v.onError.subscribe({next:q=>{k.handleError(q)}});x.onDestroy(()=>{$b(this._modules,x),L.unsubscribe()})}),function(i,s,a){try{const l=a();return xg(l)?l.catch(c=>{throw s.runOutsideAngular(()=>i.handleError(c)),c}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(k,v,()=>{const L=x.injector.get(Qf);return L.runInitializers(),L.donePromise.then(()=>(tt(x.injector.get(Dm,Qo)||Qo),this._moduleDoBootstrap(x),x))})})}bootstrapModule(a,l=[]){const c=JA({},l);return function(i,s,a){const l=new oc(a);return Promise.resolve(l)}(0,0,a).then(h=>this.bootstrapModuleFactory(h,c))}_moduleDoBootstrap(a){const l=a.injector.get(Rm);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(c=>l.bootstrap(c));else{if(!a.instance.ngDoBootstrap)throw new Error(`The module ${te(a.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(er(tr))},i.\u0275prov=Yt({token:i,factory:i.\u0275fac}),i})();function JA(i,s){return Array.isArray(s)?s.reduce(JA,i):Object.assign(Object.assign({},i),s)}let Rm=(()=>{class i{constructor(a,l,c,h,m){this._zone=a,this._injector=l,this._exceptionHandler=c,this._componentFactoryResolver=h,this._initStatus=m,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new O.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),C=new O.y(T=>{let x;this._zone.runOutsideAngular(()=>{x=this._zone.onStable.subscribe(()=>{is.assertNotInAngularZone(),Ab(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const k=this._zone.onUnstable.subscribe(()=>{is.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{x.unsubscribe(),k.unsubscribe()}});this.isStable=(0,ae.T)(v,C.pipe((0,ce.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let c;c=a instanceof em?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(c.componentType);const h=function(i){return i.isBoundToModule}(c)?void 0:this._injector.get(Xl),v=c.create(tr.NULL,[],l||c.selector,h),C=v.location.nativeElement,T=v.injector.get(KA,null),x=T&&v.injector.get(yv);return T&&x&&x.registerApplication(C,T),v.onDestroy(()=>{this.detachView(v.hostView),$b(this.components,v),x&&x.unregisterApplication(C)}),this._loadComponent(v),v}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;$b(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(gv,[]).concat(this._bootstrapListeners).forEach(c=>c(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(er(is),er(tr),er(Yh),er(Rf),er(Qf))},i.\u0275prov=Yt({token:i,factory:i.\u0275fac}),i})();function $b(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}class XA{}class qb{}const iS={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Wb=(()=>{class i{constructor(a,l){this._compiler=a,this._config=l||iS}load(a){return this.loadAndCompile(a)}loadAndCompile(a){let[l,c]=a.split("#");return void 0===c&&(c="default"),V(8255)(l).then(h=>h[c]).then(h=>Xd(h,l,c)).then(h=>this._compiler.compileModuleAsync(h))}loadFactory(a){let[l,c]=a.split("#"),h="NgFactory";return void 0===c&&(c="default",h=""),V(8255)(this._config.factoryPathPrefix+l+this._config.factoryPathSuffix).then(m=>m[c+h]).then(m=>Xd(m,l,c))}}return i.\u0275fac=function(a){return new(a||i)(er(Sm),er(qb,8))},i.\u0275prov=Yt({token:i,factory:i.\u0275fac}),i})();function Xd(i,s,a){if(!i)throw new Error(`Cannot find '${a}' in '${s}'`);return i}const cS=function(i){return null},LM=Bb(null,"core",[{provide:BA,useValue:"unknown"},{provide:jb,deps:[tr]},{provide:yv,deps:[]},{provide:$A,deps:[]}]),fS=[{provide:Rm,useClass:Rm,deps:[is,tr,Yh,Rf,Qf]},{provide:z0,deps:[is],useFactory:function(i){let s=[];return i.onStable.subscribe(()=>{for(;s.length;)s.pop()()}),function(a){s.push(a)}}},{provide:Qf,useClass:Qf,deps:[[new Os,yb]]},{provide:Sm,useClass:Sm,deps:[]},Eb,{provide:ky,useFactory:function(){return Oy},deps:[]},{provide:za,useFactory:function(){return DN},deps:[]},{provide:Dm,useFactory:function(i){return tt(i=i||"undefined"!=typeof $localize&&$localize.locale||Qo),i},deps:[[new Tu(Dm),new Os,new jn]]},{provide:HA,useValue:"USD"}];let BM=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(er(Rm))},i.\u0275mod=K({type:i}),i.\u0275inj=Rn({providers:fS}),i})()},8939:(Qe,Ee,V)=>{"use strict";V.d(Ee,{hO:()=>le,xv:()=>oe,Dh:()=>te,GT:()=>ne,cc:()=>pe,on:()=>U,pX:()=>ce});var f=V(7716),$=V(7841),O=V(2871);Qe=V.hmd(Qe);const ae=["ngOnDestroy"],ce=(fe,De,Ne,Xe={})=>new Proxy(fe,{get:(dt,Zt)=>Ne.runOutsideAngular(()=>{var Vt;if(fe[Zt])return(null===(Vt=null==Xe?void 0:Xe.spy)||void 0===Vt?void 0:Vt.get)&&Xe.spy.get(Zt,fe[Zt]),fe[Zt];if(ae.indexOf(Zt)>-1)return()=>{};const vt=De.toPromise().then(Oe=>{const Fe=Oe&&Oe[Zt];return"function"==typeof Fe?Fe.bind(Oe):Fe&&Fe.then?Fe.then($e=>Ne.run(()=>$e)):Ne.run(()=>Fe)});return new Proxy(()=>{},{get:(Oe,Fe)=>vt[Fe],apply:(Oe,Fe,$e)=>vt.then(mt=>{var rt;const Et=mt&&mt(...$e);return(null===(rt=null==Xe?void 0:Xe.spy)||void 0===rt?void 0:rt.apply)&&Xe.spy.apply(Zt,$e,Et),Et})})})}),ne=(fe,De)=>{De.forEach(Ne=>{Object.getOwnPropertyNames(Ne.prototype||Ne).forEach(Xe=>{Object.defineProperty(fe.prototype,Xe,Object.getOwnPropertyDescriptor(Ne.prototype||Ne,Xe))})})};class be{constructor(De){return De}}const te=new f.OlP("angularfire2.app.options"),oe=new f.OlP("angularfire2.app.name");function U(fe,De,Ne){const dt="object"==typeof Ne&&Ne||{};dt.name=dt.name||"string"==typeof Ne&&Ne||"[DEFAULT]";const Vt=$.Z.apps.filter(vt=>vt&&vt.name===dt.name)[0]||De.runOutsideAngular(()=>$.Z.initializeApp(fe,dt));try{JSON.stringify(fe)!==JSON.stringify(Vt.options)&&H("error",`${Vt.name} Firebase App already initialized with different options${Qe.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(vt){}return new be(Vt)}const H=(fe,...De)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[fe](...De)},W={provide:be,useFactory:U,deps:[te,f.R0b,[new f.FiY,oe]]};let le=(()=>{class fe{constructor(Ne){$.Z.registerVersion("angularfire",O.q4.full,"core"),$.Z.registerVersion("angularfire",O.q4.full,"app-compat"),$.Z.registerVersion("angular",f.q4F.full,Ne.toString())}static initializeApp(Ne,Xe){return{ngModule:fe,providers:[{provide:te,useValue:Ne},{provide:oe,useValue:Xe}]}}}return fe.\u0275fac=function(Ne){return new(Ne||fe)(f.LFG(f.Lbi))},fe.\u0275mod=f.oAB({type:fe}),fe.\u0275inj=f.cJS({providers:[W]}),fe})();function pe(fe,De,Ne,Xe,dt){const[,Zt,Vt]=globalThis.\u0275AngularfireInstanceCache.find(vt=>vt[0]===fe)||[];if(Zt)return function(fe,De){try{return fe.toString()===De.toString()}catch(Ne){return fe===De}}(dt,Vt)||(Be("error",`${De} was already initialized on the ${Ne} Firebase App with different settings.${we?" You may need to reload as Firebase is not HMR aware.":""}`),Be("warn",{is:dt,was:Vt})),Zt;{const vt=Xe();return globalThis.\u0275AngularfireInstanceCache.push([fe,vt,dt]),vt}}const we=!!Qe.hot,Be=(fe,...De)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[fe](...De)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2871:(Qe,Ee,V)=>{"use strict";V.d(Ee,{q4:()=>o_,iC:()=>Ni,fc:()=>Kc,HU:()=>Op,vb:()=>Ma,JM:()=>fs});var f=V(7716),$=V(2329),O=V(8239),ae=V(8026),ce=V(3854),ne=V(3910),be=V(5422),te=V(4544);const oe="@firebase/installations",U="0.5.9",W=`w:${U}`,le="FIS_v2",De=new ce.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ne(I){return I instanceof ce.ZR&&I.code.includes("request-failed")}function Xe({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function dt(I){return{token:I.token,requestStatus:2,expiresIn:mt(I.expiresIn),creationTime:Date.now()}}function Zt(I,A){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,O.Z)(function*(I,A){const B=(yield A.json()).error;return De.create("request-failed",{requestName:I,serverCode:B.code,serverMessage:B.message,serverStatus:B.status})})).apply(this,arguments)}function vt({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function Oe(I,{refreshToken:A}){const M=vt(I);return M.append("Authorization",function(I){return`${le} ${I}`}(A)),M}function Fe(I){return $e.apply(this,arguments)}function $e(){return($e=(0,O.Z)(function*(I){const A=yield I();return A.status>=500&&A.status<600?I():A})).apply(this,arguments)}function mt(I){return Number(I.replace("s","000"))}function Et(I,A){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:A},{fid:M}){const B=Xe(I),re=vt(I),ue=A.getImmediate({optional:!0});if(ue){const ft=yield ue.getHeartbeatsHeader();ft&&re.append("x-firebase-client",ft)}const Je={method:"POST",headers:re,body:JSON.stringify({fid:M,authVersion:le,appId:I.appId,sdkVersion:W})},gt=yield Fe(()=>fetch(B,Je));if(gt.ok){const ft=yield gt.json();return{fid:ft.fid||M,registrationStatus:2,refreshToken:ft.refreshToken,authToken:dt(ft.authToken)}}throw yield Zt("Create Installation",gt)})).apply(this,arguments)}function Lr(I){return new Promise(A=>{setTimeout(A,I)})}const qi=/^[cdef][\w-]{21}$/;function Ln(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const M=function(I){return function(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return qi.test(M)?M:""}catch(I){return""}}function Wr(I){return`${I.appName}!${I.appId}`}const Wi=new Map;function us(I,A){const M=Wr(I);Rn(M,A),function(I,A){const M=(!gn&&"BroadcastChannel"in self&&(gn=new BroadcastChannel("[Firebase] FID Change"),gn.onmessage=I=>{Rn(I.data.key,I.data.fid)}),gn);M&&M.postMessage({key:I,fid:A}),0===Wi.size&&gn&&(gn.close(),gn=null)}(M,A)}function Rn(I,A){const M=Wi.get(I);if(M)for(const B of M)B(A)}let gn=null;const Me="firebase-installations-store";let Zn=null;function cr(){return Zn||(Zn=(0,te.X3)("firebase-installations-database",1,{upgrade:(I,A)=>{switch(A){case 0:I.createObjectStore(Me)}}})),Zn}function et(I,A){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,O.Z)(function*(I,A){const M=Wr(I),re=(yield cr()).transaction(Me,"readwrite"),ue=re.objectStore(Me),ke=yield ue.get(M);return yield ue.put(A,M),yield re.done,(!ke||ke.fid!==A.fid)&&us(I,A.fid),A})).apply(this,arguments)}function Nn(I){return zn.apply(this,arguments)}function zn(){return(zn=(0,O.Z)(function*(I){const A=Wr(I),B=(yield cr()).transaction(Me,"readwrite");yield B.objectStore(Me).delete(A),yield B.done})).apply(this,arguments)}function Kn(I,A){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,O.Z)(function*(I,A){const M=Wr(I),re=(yield cr()).transaction(Me,"readwrite"),ue=re.objectStore(Me),ke=yield ue.get(M),Je=A(ke);return void 0===Je?yield ue.delete(M):yield ue.put(Je,M),yield re.done,Je&&(!ke||ke.fid!==Je.fid)&&us(I,Je.fid),Je})).apply(this,arguments)}function Vn(I){return _n.apply(this,arguments)}function _n(){return(_n=(0,O.Z)(function*(I){let A;const M=yield Kn(I.appConfig,B=>{const re=Co(B),ue=hn(I,re);return A=ue.registrationPromise,ue.installationEntry});return""===M.fid?{installationEntry:yield A}:{installationEntry:M,registrationPromise:A}})).apply(this,arguments)}function Co(I){return _t(I||{fid:Ln(),registrationStatus:0})}function hn(I,A){if(0===A.registrationStatus){if(!navigator.onLine)return{installationEntry:A,registrationPromise:Promise.reject(De.create("app-offline"))};const M={fid:A.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:M,registrationPromise:function(I,A){return ot.apply(this,arguments)}(I,M)}}return 1===A.registrationStatus?{installationEntry:A,registrationPromise:ls(I)}:{installationEntry:A}}function ot(){return(ot=(0,O.Z)(function*(I,A){try{const M=yield Et(I,A);return et(I.appConfig,M)}catch(M){throw Ne(M)&&409===M.customData.serverCode?yield Nn(I.appConfig):yield et(I.appConfig,{fid:A.fid,registrationStatus:0}),M}})).apply(this,arguments)}function ls(I){return oi.apply(this,arguments)}function oi(){return(oi=(0,O.Z)(function*(I){let A=yield Xt(I.appConfig);for(;1===A.registrationStatus;)yield Lr(100),A=yield Xt(I.appConfig);if(0===A.registrationStatus){const{installationEntry:M,registrationPromise:B}=yield Vn(I);return B||M}return A})).apply(this,arguments)}function Xt(I){return Kn(I,A=>{if(!A)throw De.create("installation-not-found");return _t(A)})}function _t(I){return function(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function $n(I,A){return z.apply(this,arguments)}function z(){return(z=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:A},M){const B=G(I,M),re=Oe(I,M),ue=A.getImmediate({optional:!0});if(ue){const ft=yield ue.getHeartbeatsHeader();ft&&re.append("x-firebase-client",ft)}const Je={method:"POST",headers:re,body:JSON.stringify({installation:{sdkVersion:W,appId:I.appId}})},gt=yield Fe(()=>fetch(B,Je));if(gt.ok)return dt(yield gt.json());throw yield Zt("Generate Auth Token",gt)})).apply(this,arguments)}function G(I,{fid:A}){return`${Xe(I)}/${A}/authTokens:generate`}function Q(I){return ve.apply(this,arguments)}function ve(){return(ve=(0,O.Z)(function*(I,A=!1){let M;const B=yield Kn(I.appConfig,ue=>{if(!xt(ue))throw De.create("not-registered");const ke=ue.authToken;if(!A&&yn(ke))return ue;if(1===ke.requestStatus)return M=Z(I,A),ue;{if(!navigator.onLine)throw De.create("app-offline");const Je=dr(ue);return M=Ze(I,Je),Je}});return M?yield M:B.authToken})).apply(this,arguments)}function Z(I,A){return ie.apply(this,arguments)}function ie(){return(ie=(0,O.Z)(function*(I,A){let M=yield Pe(I.appConfig);for(;1===M.authToken.requestStatus;)yield Lr(100),M=yield Pe(I.appConfig);const B=M.authToken;return 0===B.requestStatus?Q(I,A):B})).apply(this,arguments)}function Pe(I){return Kn(I,A=>{if(!xt(A))throw De.create("not-registered");return function(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(A.authToken)?Object.assign(Object.assign({},A),{authToken:{requestStatus:0}}):A})}function Ze(I,A){return ht.apply(this,arguments)}function ht(){return(ht=(0,O.Z)(function*(I,A){try{const M=yield $n(I,A),B=Object.assign(Object.assign({},A),{authToken:M});return yield et(I.appConfig,B),M}catch(M){if(!Ne(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const B=Object.assign(Object.assign({},A),{authToken:{requestStatus:0}});yield et(I.appConfig,B)}else yield Nn(I.appConfig);throw M}})).apply(this,arguments)}function xt(I){return void 0!==I&&2===I.registrationStatus}function yn(I){return 2===I.requestStatus&&!function(I){const A=Date.now();return A<I.creationTime||I.creationTime+I.expiresIn<A+36e5}(I)}function dr(I){const A={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:A})}function K(){return(K=(0,O.Z)(function*(I){const A=I,{installationEntry:M,registrationPromise:B}=yield Vn(A);return B?B.catch(console.error):Q(A).catch(console.error),M.fid})).apply(this,arguments)}function He(){return(He=(0,O.Z)(function*(I,A=!1){const M=I;return yield Nt(M),(yield Q(M,A)).token})).apply(this,arguments)}function Nt(I){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,O.Z)(function*(I){const{registrationPromise:A}=yield Vn(I);A&&(yield A)})).apply(this,arguments)}function vn(I){return De.create("missing-app-config-values",{valueName:I})}const Kr="installations";(0,ae._registerComponent)(new ne.wA(Kr,I=>{const A=I.getProvider("app").getImmediate();return{app:A,appConfig:function(I){if(!I||!I.options)throw vn("App Configuration");if(!I.name)throw vn("App Name");const A=["projectId","apiKey","appId"];for(const M of A)if(!I.options[M])throw vn(M);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(A),heartbeatServiceProvider:(0,ae._getProvider)(A,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,ae._registerComponent)(new ne.wA("installations-internal",I=>{const A=I.getProvider("app").getImmediate(),M=(0,ae._getProvider)(A,Kr).getImmediate();return{getId:()=>function(I){return K.apply(this,arguments)}(M),getToken:re=>function(I){return He.apply(this,arguments)}(M,re)}},"PRIVATE")),(0,ae.registerVersion)(oe,U),(0,ae.registerVersion)(oe,U,"esm2017");const ui="@firebase/remote-config",_r=new ce.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class au{constructor(A,M,B,re){this.client=A,this.storage=M,this.storageCache=B,this.logger=re}isCachedDataFresh(A,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const B=Date.now()-M,re=B<=A;return this.logger.debug(`Config fetch cache check. Cache age millis: ${B}. Cache max age millis (minimumFetchIntervalMillis setting): ${A}. Is cache hit: ${re}.`),re}fetch(A){var M=this;return(0,O.Z)(function*(){const[B,re]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(re&&M.isCachedDataFresh(A.cacheMaxAgeMillis,B))return re;A.eTag=re&&re.eTag;const ue=yield M.client.fetch(A),ke=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ue.status&&ke.push(M.storage.setLastSuccessfulFetchResponse(ue)),yield Promise.all(ke),ue})()}}function cs(I=navigator){return I.languages&&I.languages[0]||I.language}class Ii{constructor(A,M,B,re,ue,ke){this.firebaseInstallations=A,this.sdkVersion=M,this.namespace=B,this.projectId=re,this.apiKey=ue,this.appId=ke}fetch(A){var M=this;return(0,O.Z)(function*(){const[B,re]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),ke=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,Je={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":A.eTag||"*"},gt={sdk_version:M.sdkVersion,app_instance_id:B,app_instance_id_token:re,app_id:M.appId,language_code:cs()},ft={method:"POST",headers:Je,body:JSON.stringify(gt)},Jt=fetch(ke,ft),bt=new Promise((Qi,ps)=>{A.signal.addEventListener(()=>{const gs=new Error("The operation was aborted.");gs.name="AbortError",ps(gs)})});let Mi;try{yield Promise.race([Jt,bt]),Mi=yield Jt}catch(Qi){let ps="fetch-client-network";throw"AbortError"===Qi.name&&(ps="fetch-timeout"),_r.create(ps,{originalErrorMessage:Qi.message})}let Xn=Mi.status;const Pa=Mi.headers.get("ETag")||void 0;let Iu,Il;if(200===Mi.status){let Qi;try{Qi=yield Mi.json()}catch(ps){throw _r.create("fetch-client-parse",{originalErrorMessage:ps.message})}Iu=Qi.entries,Il=Qi.state}if("INSTANCE_STATE_UNSPECIFIED"===Il?Xn=500:"NO_CHANGE"===Il?Xn=304:("NO_TEMPLATE"===Il||"EMPTY_CONFIG"===Il)&&(Iu={}),304!==Xn&&200!==Xn)throw _r.create("fetch-status",{httpStatus:Xn});return{status:Xn,eTag:Pa,config:Iu}})()}}class hh{constructor(A,M){this.client=A,this.storage=M}fetch(A){var M=this;return(0,O.Z)(function*(){const B=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(A,B)})()}attemptFetch(A,{throttleEndTimeMillis:M,backoffCount:B}){var re=this;return(0,O.Z)(function*(){yield function(I,A){return new Promise((M,B)=>{const re=Math.max(A-Date.now(),0),ue=setTimeout(M,re);I.addEventListener(()=>{clearTimeout(ue),B(_r.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}(A.signal,M);try{const ue=yield re.client.fetch(A);return yield re.storage.deleteThrottleMetadata(),ue}catch(ue){if(!function(I){if(!(I instanceof ce.ZR&&I.customData))return!1;const A=Number(I.customData.httpStatus);return 429===A||500===A||503===A||504===A}(ue))throw ue;const ke={throttleEndTimeMillis:Date.now()+(0,ce.$s)(B),backoffCount:B+1};return yield re.storage.setThrottleMetadata(ke),re.attemptFetch(A,ke)}})()}}class ph{constructor(A,M,B,re,ue){this.app=A,this._client=M,this._storageCache=B,this._storage=re,this._logger=ue,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ic(I,A){const M=I.target.error||void 0;return _r.create(A,{originalErrorMessage:M&&M.message})}const Xs="app_namespace_store";class mh{constructor(A,M,B,re=function(){return new Promise((I,A)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=B=>{A(Ic(B,"storage-open"))},M.onsuccess=B=>{I(B.target.result)},M.onupgradeneeded=B=>{const re=B.target.result;switch(B.oldVersion){case 0:re.createObjectStore(Xs,{keyPath:"compositeKey"})}}}catch(M){A(_r.create("storage-open",{originalErrorMessage:M}))}})}()){this.appId=A,this.appName=M,this.namespace=B,this.openDbPromise=re}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(A){return this.set("last_fetch_status",A)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(A){return this.set("last_successful_fetch_timestamp_millis",A)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(A){return this.set("last_successful_fetch_response",A)}getActiveConfig(){return this.get("active_config")}setActiveConfig(A){return this.set("active_config",A)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(A){return this.set("active_config_etag",A)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(A){return this.set("throttle_metadata",A)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(A){var M=this;return(0,O.Z)(function*(){const B=yield M.openDbPromise;return new Promise((re,ue)=>{const Je=B.transaction([Xs],"readonly").objectStore(Xs),gt=M.createCompositeKey(A);try{const ft=Je.get(gt);ft.onerror=Jt=>{ue(Ic(Jt,"storage-get"))},ft.onsuccess=Jt=>{const bt=Jt.target.result;re(bt?bt.value:void 0)}}catch(ft){ue(_r.create("storage-get",{originalErrorMessage:ft&&ft.message}))}})})()}set(A,M){var B=this;return(0,O.Z)(function*(){const re=yield B.openDbPromise;return new Promise((ue,ke)=>{const gt=re.transaction([Xs],"readwrite").objectStore(Xs),ft=B.createCompositeKey(A);try{const Jt=gt.put({compositeKey:ft,value:M});Jt.onerror=bt=>{ke(Ic(bt,"storage-set"))},Jt.onsuccess=()=>{ue()}}catch(Jt){ke(_r.create("storage-set",{originalErrorMessage:Jt&&Jt.message}))}})})()}delete(A){var M=this;return(0,O.Z)(function*(){const B=yield M.openDbPromise;return new Promise((re,ue)=>{const Je=B.transaction([Xs],"readwrite").objectStore(Xs),gt=M.createCompositeKey(A);try{const ft=Je.delete(gt);ft.onerror=Jt=>{ue(Ic(Jt,"storage-delete"))},ft.onsuccess=()=>{re()}}catch(ft){ue(_r.create("storage-delete",{originalErrorMessage:ft&&ft.message}))}})})()}createCompositeKey(A){return[this.appId,this.appName,this.namespace,A].join()}}class t_{constructor(A){this.storage=A}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var A=this;return(0,O.Z)(function*(){const M=A.storage.getLastFetchStatus(),B=A.storage.getLastSuccessfulFetchTimestampMillis(),re=A.storage.getActiveConfig(),ue=yield M;ue&&(A.lastFetchStatus=ue);const ke=yield B;ke&&(A.lastSuccessfulFetchTimestampMillis=ke);const Je=yield re;Je&&(A.activeConfig=Je)})()}setLastFetchStatus(A){return this.lastFetchStatus=A,this.storage.setLastFetchStatus(A)}setLastSuccessfulFetchTimestampMillis(A){return this.lastSuccessfulFetchTimestampMillis=A,this.storage.setLastSuccessfulFetchTimestampMillis(A)}setActiveConfig(A){return this.activeConfig=A,this.storage.setActiveConfig(A)}}function Ip(){return ga.apply(this,arguments)}function ga(){return(ga=(0,O.Z)(function*(){if(!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch(I){return!1}})).apply(this,arguments)}(0,ae._registerComponent)(new ne.wA("remote-config",function(A,{instanceIdentifier:M}){const B=A.getProvider("app").getImmediate(),re=A.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw _r.create("registration-window");if(!(0,ce.hl)())throw _r.create("indexed-db-unavailable");const{projectId:ue,apiKey:ke,appId:Je}=B.options;if(!ue)throw _r.create("registration-project-id");if(!ke)throw _r.create("registration-api-key");if(!Je)throw _r.create("registration-app-id");const gt=new mh(Je,B.name,M=M||"firebase"),ft=new t_(gt),Jt=new be.Yd(ui);Jt.logLevel=be.in.ERROR;const bt=new Ii(re,ae.SDK_VERSION,M,ue,ke,Je),Mi=new hh(bt,gt),Xn=new au(Mi,gt,ft,Jt),Pa=new ph(B,Xn,ft,gt,Jt);return function(I){const A=(0,ce.m9)(I);A._initializePromise||(A._initializePromise=A._storageCache.loadFromStorage().then(()=>{A._isInitializationComplete=!0}))}(Pa),Pa},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(ui,"0.3.8"),(0,ae.registerVersion)(ui,"0.3.8","esm2017");const Dc="/firebase-messaging-sw.js",yh="/firebase-cloud-messaging-push-scope",Ac="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",eo="google.c.a.c_id",Sc="google.c.a.c_l",To="google.c.a.ts",Zi="google.c.a.e";var ma=(()=>{return(I=ma||(ma={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",ma;var I})();function or(I){const A=new Uint8Array(I);return btoa(String.fromCharCode(...A)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Tp(I){const M=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),B=atob(M),re=new Uint8Array(B.length);for(let ue=0;ue<B.length;++ue)re[ue]=B.charCodeAt(ue);return re}const _a="fcm_token_details_db",xc="fcm_token_object_Store";function zi(I){return Do.apply(this,arguments)}function Do(){return(Do=(0,O.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ue=>ue.name).includes(_a))return null;let A=null;return(yield(0,te.X3)(_a,5,{upgrade:(B=(0,O.Z)(function*(re,ue,ke,Je){var gt;if(ue<2||!re.objectStoreNames.contains(xc))return;const ft=Je.objectStore(xc),Jt=yield ft.index("fcmSenderId").get(I);if(yield ft.clear(),Jt)if(2===ue){const bt=Jt;if(!bt.auth||!bt.p256dh||!bt.endpoint)return;A={token:bt.fcmToken,createTime:null!==(gt=bt.createTime)&&void 0!==gt?gt:Date.now(),subscriptionOptions:{auth:bt.auth,p256dh:bt.p256dh,endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:"string"==typeof bt.vapidKey?bt.vapidKey:or(bt.vapidKey)}}}else if(3===ue){const bt=Jt;A={token:bt.fcmToken,createTime:bt.createTime,subscriptionOptions:{auth:or(bt.auth),p256dh:or(bt.p256dh),endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:or(bt.vapidKey)}}}else if(4===ue){const bt=Jt;A={token:bt.fcmToken,createTime:bt.createTime,subscriptionOptions:{auth:or(bt.auth),p256dh:or(bt.p256dh),endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:or(bt.vapidKey)}}}}),function(ue,ke,Je,gt){return B.apply(this,arguments)})})).close(),yield(0,te.Lj)(_a),yield(0,te.Lj)("fcm_vapid_details_db"),yield(0,te.Lj)("undefined"),wh(A)?A:null;var B})).apply(this,arguments)}function wh(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:A}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof A.auth&&A.auth.length>0&&"string"==typeof A.p256dh&&A.p256dh.length>0&&"string"==typeof A.endpoint&&A.endpoint.length>0&&"string"==typeof A.swScope&&A.swScope.length>0&&"string"==typeof A.vapidKey&&A.vapidKey.length>0}const Yr="firebase-messaging-store";let bh=null;function kn(){return bh||(bh=(0,te.X3)("firebase-messaging-database",1,{upgrade:(I,A)=>{switch(A){case 0:I.createObjectStore(Yr)}}})),bh}function Ao(I){return So.apply(this,arguments)}function So(){return(So=(0,O.Z)(function*(I){const A=va(I),B=yield(yield kn()).transaction(Yr).objectStore(Yr).get(A);if(B)return B;{const re=yield zi(I.appConfig.senderId);if(re)return yield uu(I,re),re}})).apply(this,arguments)}function uu(I,A){return en.apply(this,arguments)}function en(){return(en=(0,O.Z)(function*(I,A){const M=va(I),re=(yield kn()).transaction(Yr,"readwrite");return yield re.objectStore(Yr).put(A,M),yield re.done,A})).apply(this,arguments)}function ya(I){return xo.apply(this,arguments)}function xo(){return(xo=(0,O.Z)(function*(I){const A=va(I),B=(yield kn()).transaction(Yr,"readwrite");yield B.objectStore(Yr).delete(A),yield B.done})).apply(this,arguments)}function va({appConfig:I}){return I.appId}const ar=new ce.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Nc(I,A){return ci.apply(this,arguments)}function ci(){return(ci=(0,O.Z)(function*(I,A){const M=yield Vr(I),B=wt(A),re={method:"POST",headers:M,body:JSON.stringify(B)};let ue;try{ue=yield(yield fetch(Ki(I.appConfig),re)).json()}catch(ke){throw ar.create("token-subscribe-failed",{errorInfo:ke})}if(ue.error)throw ar.create("token-subscribe-failed",{errorInfo:ue.error.message});if(!ue.token)throw ar.create("token-subscribe-no-token");return ue.token})).apply(this,arguments)}function di(I,A){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,O.Z)(function*(I,A){const M=yield Vr(I),B=wt(A.subscriptionOptions),re={method:"PATCH",headers:M,body:JSON.stringify(B)};let ue;try{ue=yield(yield fetch(`${Ki(I.appConfig)}/${A.token}`,re)).json()}catch(ke){throw ar.create("token-update-failed",{errorInfo:ke})}if(ue.error)throw ar.create("token-update-failed",{errorInfo:ue.error.message});if(!ue.token)throw ar.create("token-update-no-token");return ue.token})).apply(this,arguments)}function Mc(I,A){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,O.Z)(function*(I,A){const B={method:"DELETE",headers:yield Vr(I)};try{const ue=yield(yield fetch(`${Ki(I.appConfig)}/${A}`,B)).json();if(ue.error)throw ar.create("token-unsubscribe-failed",{errorInfo:ue.error.message})}catch(re){throw ar.create("token-unsubscribe-failed",{errorInfo:re})}})).apply(this,arguments)}function Ki({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function Vr(I){return wa.apply(this,arguments)}function wa(){return(wa=(0,O.Z)(function*({appConfig:I,installations:A}){const M=yield A.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function wt({p256dh:I,auth:A,endpoint:M,vapidKey:B}){const re={web:{endpoint:M,auth:A,p256dh:I}};return B!==Ac&&(re.web.applicationPubKey=B),re}const kc=6048e5;function ul(I){return ll.apply(this,arguments)}function ll(){return(ll=(0,O.Z)(function*(I){const A=yield lu(I.swRegistration,I.vapidKey),M={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:A.endpoint,auth:or(A.getKey("auth")),p256dh:or(A.getKey("p256dh"))},B=yield Ao(I.firebaseDependencies);if(B){if(cu(B.subscriptionOptions,M))return Date.now()>=B.createTime+kc?Fc(I,{token:B.token,createTime:Date.now(),subscriptionOptions:M}):B.token;try{yield Mc(I.firebaseDependencies,B.token)}catch(re){console.warn(re)}return Se(I.firebaseDependencies,M)}return Se(I.firebaseDependencies,M)})).apply(this,arguments)}function Pc(I){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,O.Z)(function*(I){const A=yield Ao(I.firebaseDependencies);A&&(yield Mc(I.firebaseDependencies,A.token),yield ya(I.firebaseDependencies));const M=yield I.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function Fc(I,A){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,O.Z)(function*(I,A){try{const M=yield di(I.firebaseDependencies,A),B=Object.assign(Object.assign({},A),{token:M,createTime:Date.now()});return yield uu(I.firebaseDependencies,B),M}catch(M){throw yield Pc(I),M}})).apply(this,arguments)}function Se(I,A){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,O.Z)(function*(I,A){const B={token:yield Nc(I,A),createTime:Date.now(),subscriptionOptions:A};return yield uu(I,B),B.token})).apply(this,arguments)}function lu(I,A){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,O.Z)(function*(I,A){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Tp(A)})})).apply(this,arguments)}function cu(I,A){return A.vapidKey===I.vapidKey&&A.endpoint===I.endpoint&&A.auth===I.auth&&A.p256dh===I.p256dh}function xs(I){const A={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function(I,A){if(!A.notification)return;I.notification={};const M=A.notification.title;M&&(I.notification.title=M);const B=A.notification.body;B&&(I.notification.body=B);const re=A.notification.image;re&&(I.notification.image=re)}(A,I),function(I,A){!A.data||(I.data=A.data)}(A,I),function(I,A){if(!A.fcmOptions)return;I.fcmOptions={};const M=A.fcmOptions.link;M&&(I.fcmOptions.link=M);const B=A.fcmOptions.analytics_label;B&&(I.fcmOptions.analyticsLabel=B)}(A,I),A}function Dp(I){return"object"==typeof I&&!!I&&eo in I}function cl(I,A){const M=[];for(let B=0;B<I.length;B++)M.push(I.charAt(B)),B<A.length&&M.push(A.charAt(B));return M.join("")}function to(I){return ar.create("missing-app-config-values",{valueName:I})}cl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),cl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class hr{constructor(A,M,B){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const re=function(I){if(!I||!I.options)throw to("App Configuration Object");if(!I.name)throw to("App Name");const A=["projectId","apiKey","appId","messagingSenderId"],{options:M}=I;for(const B of A)if(!M[B])throw to(B);return{appName:I.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(A);this.firebaseDependencies={app:A,appConfig:re,installations:M,analyticsProvider:B}}_delete(){return Promise.resolve()}}function Jr(I){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,O.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(Dc,{scope:yh}),I.swRegistration.update().catch(()=>{})}catch(A){throw ar.create("failed-service-worker-registration",{browserErrorMessage:A.message})}})).apply(this,arguments)}function ds(I,A){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,O.Z)(function*(I,A){if(!A&&!I.swRegistration&&(yield Jr(I)),A||!I.swRegistration){if(!(A instanceof ServiceWorkerRegistration))throw ar.create("invalid-sw-registration");I.swRegistration=A}})).apply(this,arguments)}function Ch(I,A){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,O.Z)(function*(I,A){A?I.vapidKey=A:I.vapidKey||(I.vapidKey=Ac)})).apply(this,arguments)}function hu(){return(hu=(0,O.Z)(function*(I,A){if(!navigator)throw ar.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ar.create("permission-blocked");return yield Ch(I,null==A?void 0:A.vapidKey),yield ds(I,null==A?void 0:A.serviceWorkerRegistration),ul(I)})).apply(this,arguments)}function Uc(I,A,M){return ko.apply(this,arguments)}function ko(){return(ko=(0,O.Z)(function*(I,A,M){const B=Ih(A);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(B,{message_id:M[eo],message_name:M[Sc],message_time:M[To],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ih(I){switch(I){case ma.NOTIFICATION_CLICKED:return"notification_open";case ma.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function fu(){return(fu=(0,O.Z)(function*(I,A){const M=A.data;if(!M.isFirebaseMessaging)return;I.onMessageHandler&&M.messageType===ma.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(xs(M)):I.onMessageHandler.next(xs(M)));const B=M.data;Dp(B)&&"1"===B[Zi]&&(yield Uc(I,M.messageType,B))})).apply(this,arguments)}const pu="@firebase/messaging";function Th(){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,O.Z)(function*(){try{yield(0,ce.eu)()}catch(I){return!1}return"undefined"!=typeof window&&(0,ce.hl)()&&(0,ce.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,ae._registerComponent)(new ne.wA("messaging",I=>{const A=new hr(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function(I,A){return fu.apply(this,arguments)}(A,M)),A},"PUBLIC")),(0,ae._registerComponent)(new ne.wA("messaging-internal",I=>{const A=I.getProvider("messaging").getImmediate();return{getToken:B=>function(I,A){return hu.apply(this,arguments)}(A,B)}},"PRIVATE")),(0,ae.registerVersion)(pu,"0.9.13"),(0,ae.registerVersion)(pu,"0.9.13","esm2017");const pl="analytics",$c="firebase_id",Ia="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Fo="https://www.googletagmanager.com/gtag/js",ur=new be.Yd("@firebase/analytics");function mu(I){return Promise.all(I.map(A=>A.catch(M=>M)))}function Sp(I,A){const M=document.createElement("script");M.src=`${Fo}?l=${I}&id=${A}`,M.async=!0,document.head.appendChild(M)}function _u(I,A,M,B,re,ue){return gl.apply(this,arguments)}function gl(){return(gl=(0,O.Z)(function*(I,A,M,B,re,ue){const ke=B[re];try{if(ke)yield A[ke];else{const gt=(yield mu(M)).find(ft=>ft.measurementId===re);gt&&(yield A[gt.appId])}}catch(Je){ur.error(Je)}I("config",re,ue)})).apply(this,arguments)}function xp(I,A,M,B,re){return Di.apply(this,arguments)}function Di(){return(Di=(0,O.Z)(function*(I,A,M,B,re){try{let ue=[];if(re&&re.send_to){let ke=re.send_to;Array.isArray(ke)||(ke=[ke]);const Je=yield mu(M);for(const gt of ke){const ft=Je.find(bt=>bt.measurementId===gt),Jt=ft&&A[ft.appId];if(!Jt){ue=[];break}ue.push(Jt)}}0===ue.length&&(ue=Object.values(A)),yield Promise.all(ue),I("event",B,re||{})}catch(ue){ur.error(ue)}})).apply(this,arguments)}function n_(){const I=window.document.getElementsByTagName("script");for(const A of Object.values(I))if(A.src&&A.src.includes(Fo))return A;return null}const Yi=new ce.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),_l=new class{constructor(A={},M=1e3){this.throttleMetadata=A,this.intervalMillis=M}getThrottleMetadata(A){return this.throttleMetadata[A]}setThrottleMetadata(A,M){this.throttleMetadata[A]=M}deleteThrottleMetadata(A){delete this.throttleMetadata[A]}};function Mp(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function qc(I){return io.apply(this,arguments)}function io(){return(io=(0,O.Z)(function*(I){var A;const{appId:M,apiKey:B}=I,re={method:"GET",headers:Mp(B)},ue=Ia.replace("{app-id}",M),ke=yield fetch(ue,re);if(200!==ke.status&&304!==ke.status){let Je="";try{const gt=yield ke.json();(null===(A=gt.error)||void 0===A?void 0:A.message)&&(Je=gt.error.message)}catch(gt){}throw Yi.create("config-fetch-failed",{httpStatus:ke.status,responseMessage:Je})}return ke.json()})).apply(this,arguments)}function iE(I){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,O.Z)(function*(I,A=_l,M){const{appId:B,apiKey:re,measurementId:ue}=I.options;if(!B)throw Yi.create("no-app-id");if(!re){if(ue)return{measurementId:ue,appId:B};throw Yi.create("no-api-key")}const ke=A.getThrottleMetadata(B)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Je=new Pp;return setTimeout((0,O.Z)(function*(){Je.abort()}),void 0!==M?M:6e4),yu({appId:B,apiKey:re,measurementId:ue},ke,Je,A)})).apply(this,arguments)}function yu(I,A,M){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,O.Z)(function*(I,{throttleEndTimeMillis:A,backoffCount:M},B,re=_l){const{appId:ue,measurementId:ke}=I;try{yield kp(B,A)}catch(Je){if(ke)return ur.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ke} provided in the "measurementId" field in the local Firebase config. [${Je.message}]`),{appId:ue,measurementId:ke};throw Je}try{const Je=yield qc(I);return re.deleteThrottleMetadata(ue),Je}catch(Je){if(!Ah(Je)){if(re.deleteThrottleMetadata(ue),ke)return ur.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ke} provided in the "measurementId" field in the local Firebase config. [${Je.message}]`),{appId:ue,measurementId:ke};throw Je}const gt=503===Number(Je.customData.httpStatus)?(0,ce.$s)(M,re.intervalMillis,30):(0,ce.$s)(M,re.intervalMillis),ft={throttleEndTimeMillis:Date.now()+gt,backoffCount:M+1};return re.setThrottleMetadata(ue,ft),ur.debug(`Calling attemptFetch again in ${gt} millis`),yu(I,ft,B,re)}})).apply(this,arguments)}function kp(I,A){return new Promise((M,B)=>{const re=Math.max(A-Date.now(),0),ue=setTimeout(M,re);I.addEventListener(()=>{clearTimeout(ue),B(Yi.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}function Ah(I){if(!(I instanceof ce.ZR&&I.customData))return!1;const A=Number(I.customData.httpStatus);return 429===A||500===A||503===A||504===A}class Pp{constructor(){this.listeners=[]}addEventListener(A){this.listeners.push(A)}abort(){this.listeners.forEach(A=>A())}}function i_(){return Sh.apply(this,arguments)}function Sh(){return(Sh=(0,O.Z)(function*(){if(!(0,ce.hl)())return ur.warn(Yi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ce.eu)()}catch(I){return ur.warn(Yi.create("indexeddb-unavailable",{errorInfo:I}).message),!1}return!0})).apply(this,arguments)}function Da(){return(Da=(0,O.Z)(function*(I,A,M,B,re,ue,ke){var Je;const gt=iE(I);gt.then(Xn=>{M[Xn.measurementId]=Xn.appId,I.options.measurementId&&Xn.measurementId!==I.options.measurementId&&ur.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${Xn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Xn=>ur.error(Xn)),A.push(gt);const ft=i_().then(Xn=>{if(Xn)return B.getId()}),[Jt,bt]=yield Promise.all([gt,ft]);n_()||Sp(ue,Jt.measurementId),re("js",new Date);const Mi=null!==(Je=null==ke?void 0:ke.config)&&void 0!==Je?Je:{};return Mi.origin="firebase",Mi.update=!0,null!=bt&&(Mi[$c]=bt),re("config",Jt.measurementId,Mi),Jt.measurementId})).apply(this,arguments)}class yl{constructor(A){this.app=A}_delete(){return delete Bt[this.app.options.appId],Promise.resolve()}}let Bt={},at=[];const hs={};let Wc,Ns,Aa="dataLayer",Xr=!1;function vu(I,A,M){!function(){const I=[];if((0,ce.ru)()&&I.push("This is a browser extension environment."),(0,ce.zI)()||I.push("Cookies are not available."),I.length>0){const A=I.map((B,re)=>`(${re+1}) ${B}`).join(" "),M=Yi.create("invalid-analytics-context",{errorInfo:A});ur.warn(M.message)}}();const B=I.options.appId;if(!B)throw Yi.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw Yi.create("no-api-key");ur.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Bt[B])throw Yi.create("already-exists",{id:B});if(!Xr){!function(I){let A=[];Array.isArray(window[I])?A=window[I]:window[I]=A}(Aa);const{wrappedGtag:ue,gtagCore:ke}=function(I,A,M,B,re){let ue=function(...ke){window[B].push(arguments)};return window[re]&&"function"==typeof window[re]&&(ue=window[re]),window[re]=function(I,A,M,B){function ue(){return(ue=(0,O.Z)(function*(ke,Je,gt){try{"event"===ke?yield xp(I,A,M,Je,gt):"config"===ke?yield _u(I,A,M,B,Je,gt):I("set",Je)}catch(ft){ur.error(ft)}})).apply(this,arguments)}return function(ke,Je,gt){return ue.apply(this,arguments)}}(ue,I,A,M),{gtagCore:ue,wrappedGtag:window[re]}}(Bt,at,hs,Aa,"gtag");Ns=ue,Wc=ke,Xr=!0}return Bt[B]=function(I,A,M,B,re,ue,ke){return Da.apply(this,arguments)}(I,at,hs,A,Wc,Aa,M),new yl(I)}function Eu(){return(Eu=(0,O.Z)(function*(I,A,M,B,re){if(re&&re.global)I("event",M,B);else{const ue=yield A;I("event",M,Object.assign(Object.assign({},B),{send_to:ue}))}})).apply(this,arguments)}function Ur(){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,O.Z)(function*(){if((0,ce.ru)()||!(0,ce.zI)()||!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch(I){return!1}})).apply(this,arguments)}const Rh="@firebase/analytics";(0,ae._registerComponent)(new ne.wA(pl,(A,{options:M})=>vu(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ae._registerComponent)(new ne.wA("analytics-internal",function(A){try{const M=A.getProvider(pl).getImmediate();return{logEvent:(B,re,ue)=>function(I,A,M,B){I=(0,ce.m9)(I),function(I,A,M,B,re){return Eu.apply(this,arguments)}(Ns,Bt[I.app.options.appId],A,M,B).catch(re=>ur.error(re))}(M,B,re,ue)}}catch(M){throw Yi.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ae.registerVersion)(Rh,"0.7.9"),(0,ae.registerVersion)(Rh,"0.7.9","esm2017");var Mh=V(7771),s_=V(3637),sE=V(3342),Cu=V(309),xa=V(3101);const o_=new f.GfV("7.3.0"),kh="__angularfire_symbol__analyticsIsSupportedValue",xi="__angularfire_symbol__analyticsIsSupported",Bo="__angularfire_symbol__remoteConfigIsSupportedValue",zc="__angularfire_symbol__remoteConfigIsSupported",wn="__angularfire_symbol__messagingIsSupportedValue",Ra="__angularfire_symbol__messagingIsSupported";function fs(I,A,M){if(A){if(1===A.length)return A[0];const ue=A.filter(ke=>ke.app===M);if(1===ue.length)return ue[0]}return M.container.getProvider(I).getImmediate({optional:!0})}globalThis[xi]||(globalThis[xi]=Ur().then(I=>globalThis[kh]=I).catch(()=>globalThis[kh]=!1)),globalThis[Ra]||(globalThis[Ra]=Th().then(I=>globalThis[wn]=I).catch(()=>globalThis[wn]=!1)),globalThis[zc]||(globalThis[zc]=Ip().then(I=>globalThis[Bo]=I).catch(()=>globalThis[Bo]=!1));const Ma=(I,A)=>{const M=A?[A]:(0,$.C6)(),B=[];return M.forEach(re=>{re.container.getProvider(I).instances.forEach(ke=>{B.includes(ke)||B.push(ke)})}),B};function pi(){}class Ps{constructor(A,M=Mh.N){this.zone=A,this.delegate=M}now(){return this.delegate.now()}schedule(A,M,B){const re=this.zone;return this.delegate.schedule(function(ke){re.runGuarded(()=>{A.apply(this,[ke])})},M,B)}}class Ph{constructor(A){this.zone=A,this.task=null}call(A,M){const B=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",pi,{},pi,pi)),M.pipe((0,sE.b)({next:B,complete:B,error:B})).subscribe(A).add(B)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Op=(()=>{class I{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new Ps(Zone.current)),this.insideAngular=M.run(()=>new Ps(Zone.current,s_.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(M){return new(M||I)(f.LFG(f.R0b))},I.\u0275prov=f.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function oo(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function Kc(I){return I.pipe((0,Cu.QV)(oo().outsideAngular))}function Ni(I){return oo(),function(I){return function(M){return(M=M.lift(new Ph(I.ngZone))).pipe((0,xa.R)(I.outsideAngular),(0,Cu.QV)(I.insideAngular))}}(oo())(I)}},7014:(Qe,Ee,V)=>{"use strict";V.d(Ee,{$:()=>Lc,A:()=>Ln,B:()=>Wi,G:()=>il,H:()=>pa,J:()=>or,L:()=>At,M:()=>uu,N:()=>va,P:()=>Je,Q:()=>Ti,R:()=>Kc,T:()=>ar,U:()=>xo,V:()=>Ea,W:()=>Mc,X:()=>wt,Y:()=>No,Z:()=>Dp,_:()=>du,a:()=>Zc,a0:()=>Vc,a1:()=>Uc,a2:()=>Ih,a3:()=>fu,a4:()=>gu,a5:()=>Ap,a6:()=>Th,a7:()=>Oo,a8:()=>jc,a9:()=>Sr,aA:()=>c_,aB:()=>uo,aC:()=>Os,aD:()=>Tu,aE:()=>cn,aI:()=>yr,aL:()=>ci,aa:()=>rE,ab:()=>pl,ac:()=>Hc,af:()=>ur,ag:()=>Sp,ah:()=>ro,ak:()=>Oc,al:()=>Gc,an:()=>Ah,ao:()=>yl,ap:()=>Ys,aq:()=>cr,ar:()=>ou,as:()=>li,at:()=>gn,au:()=>sd,av:()=>nd,aw:()=>mn,ax:()=>Me,ay:()=>Qt,az:()=>bi,b:()=>Ns,c:()=>Il,d:()=>zt,e:()=>ps,f:()=>ao,g:()=>u_,h:()=>Jc,i:()=>Cu,j:()=>l_,k:()=>od,l:()=>Fh,m:()=>gE,o:()=>Ir,r:()=>A,s:()=>fr,u:()=>ue});var f=V(8239),$=V(3854),O=V(8026);function be(E,g){var _={};for(var b in E)Object.prototype.hasOwnProperty.call(E,b)&&g.indexOf(b)<0&&(_[b]=E[b]);if(null!=E&&"function"==typeof Object.getOwnPropertySymbols){var R=0;for(b=Object.getOwnPropertySymbols(E);R<b.length;R++)g.indexOf(b[R])<0&&Object.prototype.propertyIsEnumerable.call(E,b[R])&&(_[b[R]]=E[b[R]])}return _}var Et=V(5422),Ge=V(3910);const Ir={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Ln={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Wi=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},us=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Yt=new $.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Rn=new Et.Yd("@firebase/auth");function Wn(E,...g){Rn.logLevel<=Et.in.ERROR&&Rn.error(`Auth (${O.SDK_VERSION}): ${E}`,...g)}function gn(E,...g){throw zr(E,...g)}function mn(E,...g){return zr(E,...g)}function zs(E,g,_){const b=Object.assign(Object.assign({},us()),{[g]:_});return new $.LL("auth","Firebase",b).create(g,{appName:E.name})}function Zr(E,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&gn(E,"argument-error"),zs(E,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function zr(E,...g){if("string"!=typeof E){const _=g[0],b=[...g.slice(1)];return b[0]&&(b[0].appName=E.name),E._errorFactory.create(_,...b)}return Yt.create(E,...g)}function Me(E,g,..._){if(!E)throw zr(g,..._)}function Zn(E){const g="INTERNAL ASSERTION FAILED: "+E;throw Wn(g),new Error(g)}function cr(E,g){E||Zn(g)}const et=new Map;function Qt(E){cr(E instanceof Function,"Expected a class definition");let g=et.get(E);return g?(cr(g instanceof E,"Instance stored in cache mismatched with class"),g):(g=new E,et.set(E,g),g)}function Kn(){var E;return"undefined"!=typeof self&&(null===(E=self.location)||void 0===E?void 0:E.href)||""}function Ds(){return"http:"===Vn()||"https:"===Vn()}function Vn(){var E;return"undefined"!=typeof self&&(null===(E=self.location)||void 0===E?void 0:E.protocol)||null}class hn{constructor(g,_){this.shortDelay=g,this.longDelay=_,cr(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,$.uI)()||(0,$.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ds()||(0,$.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function qe(E,g){cr(E.emulator,"Emulator should always be set here");const{url:_}=E.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class ot{static initialize(g,_,b){this.fetchImpl=g,_&&(this.headersImpl=_),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Zn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Zn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Zn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ls={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},oi=new hn(3e4,6e4);function Xt(E,g){return E.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:E.tenantId}):g}function _t(E,g,_,b){return sr.apply(this,arguments)}function sr(){return(sr=(0,f.Z)(function*(E,g,_,b,R={}){return $n(E,R,(0,f.Z)(function*(){let N={},J={};b&&("GET"===g?J=b:N={body:JSON.stringify(b)});const _e=(0,$.xO)(Object.assign({key:E.config.apiKey},J)).slice(1),je=yield E._getAdditionalHeaders();return je["Content-Type"]="application/json",E.languageCode&&(je["X-Firebase-Locale"]=E.languageCode),ot.fetch()(ve(E,E.config.apiHost,_,_e),Object.assign({method:g,headers:je,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function $n(E,g,_){return z.apply(this,arguments)}function z(){return(z=(0,f.Z)(function*(E,g,_){E._canInitEmulator=!1;const b=Object.assign(Object.assign({},ls),g);try{const R=new Z(E),N=yield Promise.race([_(),R.promise]);R.clearNetworkTimeout();const J=yield N.json();if("needConfirmation"in J)throw ie(E,"account-exists-with-different-credential",J);if(N.ok&&!("errorMessage"in J))return J;{const _e=N.ok?J.errorMessage:J.error.message,[je,Ve]=_e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===je)throw ie(E,"credential-already-in-use",J);if("EMAIL_EXISTS"===je)throw ie(E,"email-already-in-use",J);if("USER_DISABLED"===je)throw ie(E,"user-disabled",J);const ze=b[je]||je.toLowerCase().replace(/[_\s]+/g,"-");if(Ve)throw zs(E,ze,Ve);gn(E,ze)}}catch(R){if(R instanceof $.ZR)throw R;gn(E,"network-request-failed")}})).apply(this,arguments)}function G(E,g,_,b){return Q.apply(this,arguments)}function Q(){return(Q=(0,f.Z)(function*(E,g,_,b,R={}){const N=yield _t(E,g,_,b,R);return"mfaPendingCredential"in N&&gn(E,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function ve(E,g,_,b){const R=`${g}${_}?${b}`;return E.config.emulator?qe(E.config,R):`${E.config.apiScheme}://${R}`}class Z{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,b)=>{this.timer=setTimeout(()=>b(mn(this.auth,"network-request-failed")),oi.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ie(E,g,_){const b={appName:E.name};_.email&&(b.email=_.email),_.phoneNumber&&(b.phoneNumber=_.phoneNumber);const R=mn(E,g,b);return R.customData._tokenResponse=_,R}function Ze(){return(Ze=(0,f.Z)(function*(E,g){return _t(E,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function ht(E,g){return xt.apply(this,arguments)}function xt(){return(xt=(0,f.Z)(function*(E,g){return _t(E,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function yn(E,g){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,f.Z)(function*(E,g){return _t(E,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function dr(E){if(E)try{const g=new Date(Number(E));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function K(){return(K=(0,f.Z)(function*(E,g=!1){const _=(0,$.m9)(E),b=yield _.getIdToken(g),R=He(b);Me(R&&R.exp&&R.auth_time&&R.iat,_.auth,"internal-error");const N="object"==typeof R.firebase?R.firebase:void 0,J=null==N?void 0:N.sign_in_provider;return{claims:R,token:b,authTime:dr(Ae(R.auth_time)),issuedAtTime:dr(Ae(R.iat)),expirationTime:dr(Ae(R.exp)),signInProvider:J||null,signInSecondFactor:(null==N?void 0:N.sign_in_second_factor)||null}})).apply(this,arguments)}function Ae(E){return 1e3*Number(E)}function He(E){const[g,_,b]=E.split(".");if(void 0===g||void 0===_||void 0===b)return Wn("JWT malformed, contained fewer than 3 sections"),null;try{const R=(0,$.tV)(_);return R?JSON.parse(R):(Wn("Failed to decode base64 JWT payload"),null)}catch(R){return Wn("Caught error parsing JWT payload as JSON",R),null}}function Mt(E,g){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,f.Z)(function*(E,g,_=!1){if(_)return g;try{return yield g}catch(b){throw b instanceof $.ZR&&ln(b)&&E.auth.currentUser===E&&(yield E.auth.signOut()),b}})).apply(this,arguments)}function ln({code:E}){return"auth/user-disabled"===E||"auth/user-token-expired"===E}class Un{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const R=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,R)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const b=this.getInterval(g);this.timerId=setTimeout((0,f.Z)(function*(){yield _.iteration()}),b)}iteration(){var g=this;return(0,f.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_.code&&g.schedule(!0))}g.schedule()})()}}class Bn{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=dr(this.lastLoginAt),this.creationTime=dr(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function $t(E){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,f.Z)(function*(E){var g;const _=E.auth,b=yield E.getIdToken(),R=yield Mt(E,yn(_,{idToken:b}));Me(null==R?void 0:R.users.length,_,"internal-error");const N=R.users[0];E._notifyReloadListener(N);const J=(null===(g=N.providerUserInfo)||void 0===g?void 0:g.length)?Kr(N.providerUserInfo):[],_e=vn(E.providerData,J),ze=!!E.isAnonymous&&!(E.email&&N.passwordHash||(null==_e?void 0:_e.length)),pn={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:_e,metadata:new Bn(N.createdAt,N.lastLoginAt),isAnonymous:ze};Object.assign(E,pn)})).apply(this,arguments)}function Ut(){return(Ut=(0,f.Z)(function*(E){const g=(0,$.m9)(E);yield $t(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function vn(E,g){return[...E.filter(b=>!g.some(R=>R.providerId===b.providerId)),...g]}function Kr(E){return E.map(g=>{var{providerId:_}=g,b=be(g,["providerId"]);return{providerId:_,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function Yn(){return(Yn=(0,f.Z)(function*(E,g){const _=yield $n(E,{},(0,f.Z)(function*(){const b=(0,$.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:R,apiKey:N}=E.config,J=ve(E,R,"/v1/token",`key=${N}`),_e=yield E._getAdditionalHeaders();return _e["Content-Type"]="application/x-www-form-urlencoded",ot.fetch()(J,{method:"POST",headers:_e,body:b})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class ai{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){Me(g.idToken,"internal-error"),Me(void 0!==g.idToken,"internal-error"),Me(void 0!==g.refreshToken,"internal-error");const _="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function(E){const g=He(E);return Me(g,"internal-error"),Me(void 0!==g.exp,"internal-error"),Me(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var b=this;return(0,f.Z)(function*(){return Me(!b.accessToken||b.refreshToken,g,"user-token-expired"),_||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(g,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var b=this;return(0,f.Z)(function*(){const{accessToken:R,refreshToken:N,expiresIn:J}=yield function(E,g){return Yn.apply(this,arguments)}(g,_);b.updateTokensAndExpiration(R,N,Number(J))})()}updateTokensAndExpiration(g,_,b){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(g,_){const{refreshToken:b,accessToken:R,expirationTime:N}=_,J=new ai;return b&&(Me("string"==typeof b,"internal-error",{appName:g}),J.refreshToken=b),R&&(Me("string"==typeof R,"internal-error",{appName:g}),J.accessToken=R),N&&(Me("number"==typeof N,"internal-error",{appName:g}),J.expirationTime=N),J}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new ai,this.toJSON())}_performRefresh(){return Zn("not implemented")}}function En(E,g){Me("string"==typeof E||void 0===E,"internal-error",{appName:g})}class ui{constructor(g){var{uid:_,auth:b,stsTokenManager:R}=g,N=be(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Un(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=b,this.stsTokenManager=R,this.accessToken=R.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new Bn(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,f.Z)(function*(){const b=yield Mt(_,_.stsTokenManager.getToken(_.auth,g));return Me(b,_.auth,"internal-error"),_.accessToken!==b&&(_.accessToken=b,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),b})()}getIdTokenResult(g){return function(E){return K.apply(this,arguments)}(this,g)}reload(){return function(E){return Ut.apply(this,arguments)}(this)}_assign(g){this!==g&&(Me(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new ui(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var b=this;return(0,f.Z)(function*(){let R=!1;g.idToken&&g.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(g),R=!0),_&&(yield $t(b)),yield b.auth._persistUserIfCurrent(b),R&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var g=this;return(0,f.Z)(function*(){const _=yield g.getIdToken();return yield Mt(g,function(E,g){return Ze.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var b,R,N,J,_e,je,Ve,ze;const pn=null!==(b=_.displayName)&&void 0!==b?b:void 0,An=null!==(R=_.email)&&void 0!==R?R:void 0,Rr=null!==(N=_.phoneNumber)&&void 0!==N?N:void 0,qo=null!==(J=_.photoURL)&&void 0!==J?J:void 0,Gh=null!==(_e=_.tenantId)&&void 0!==_e?_e:void 0,qh=null!==(je=_._redirectEventId)&&void 0!==je?je:void 0,__=null!==(Ve=_.createdAt)&&void 0!==Ve?Ve:void 0,Wh=null!==(ze=_.lastLoginAt)&&void 0!==ze?ze:void 0,{uid:lo,emailVerified:yE,isAnonymous:Ru,providerData:Nu,stsTokenManager:ei}=_;Me(lo&&ei,g,"internal-error");const qp=ai.fromJSON(this.name,ei);Me("string"==typeof lo,g,"internal-error"),En(pn,g.name),En(An,g.name),Me("boolean"==typeof yE,g,"internal-error"),Me("boolean"==typeof Ru,g,"internal-error"),En(Rr,g.name),En(qo,g.name),En(Gh,g.name),En(qh,g.name),En(__,g.name),En(Wh,g.name);const Zh=new ui({uid:lo,auth:g,email:An,emailVerified:yE,displayName:pn,isAnonymous:Ru,photoURL:qo,phoneNumber:Rr,tenantId:Gh,stsTokenManager:qp,createdAt:__,lastLoginAt:Wh});return Nu&&Array.isArray(Nu)&&(Zh.providerData=Nu.map(Ml=>Object.assign({},Ml))),qh&&(Zh._redirectEventId=qh),Zh}static _fromIdTokenResponse(g,_,b=!1){return(0,f.Z)(function*(){const R=new ai;R.updateFromServerResponse(_);const N=new ui({uid:_.localId,auth:g,stsTokenManager:R,isAnonymous:b});return yield $t(N),N})()}}const At=(()=>{class E{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(_,b){var R=this;return(0,f.Z)(function*(){R.storage[_]=b})()}_get(_){var b=this;return(0,f.Z)(function*(){const R=b.storage[_];return void 0===R?null:R})()}_remove(_){var b=this;return(0,f.Z)(function*(){delete b.storage[_]})()}_addListener(_,b){}_removeListener(_,b){}}return E.type="NONE",E})();function bi(E,g,_){return`firebase:${E}:${g}:${_}`}class Ci{constructor(g,_,b){this.persistence=g,this.auth=_,this.userKey=b;const{config:R,name:N}=this.auth;this.fullUserKey=bi(this.userKey,R.apiKey,N),this.fullPersistenceKey=bi("persistence",R.apiKey,N),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,f.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?ui._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,f.Z)(function*(){if(_.persistence===g)return;const b=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,b?_.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,b="authUser"){return(0,f.Z)(function*(){if(!_.length)return new Ci(Qt(At),g,b);const R=(yield Promise.all(_.map(function(){var Ve=(0,f.Z)(function*(ze){if(yield ze._isAvailable())return ze});return function(ze){return Ve.apply(this,arguments)}}()))).filter(Ve=>Ve);let N=R[0]||Qt(At);const J=bi(b,g.config.apiKey,g.name);let _e=null;for(const Ve of _)try{const ze=yield Ve._get(J);if(ze){const pn=ui._fromJSON(g,ze);Ve!==N&&(_e=pn),N=Ve;break}}catch(ze){}const je=R.filter(Ve=>Ve._shouldAllowMigration);return N._shouldAllowMigration&&je.length?(N=je[0],_e&&(yield N._set(J,_e.toJSON())),yield Promise.all(_.map(function(){var Ve=(0,f.Z)(function*(ze){if(ze!==N)try{yield ze._remove(J)}catch(pn){}});return function(ze){return Ve.apply(this,arguments)}}())),new Ci(N,g,b)):new Ci(N,g,b)})()}}function _r(E){const g=E.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Ks(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(da(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(fn(g))return"Blackberry";if(dh(g))return"Webos";if(Tr(g))return"Safari";if((g.includes("chrome/")||ha(g))&&!g.includes("edge/"))return"Chrome";if(li(g))return"Android";{const b=E.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==b?void 0:b.length))return b[1]}return"Other"}function da(E=(0,$.z$)()){return/firefox\//i.test(E)}function Tr(E=(0,$.z$)()){const g=E.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function ha(E=(0,$.z$)()){return/crios\//i.test(E)}function Ks(E=(0,$.z$)()){return/iemobile/i.test(E)}function li(E=(0,$.z$)()){return/android/i.test(E)}function fn(E=(0,$.z$)()){return/blackberry/i.test(E)}function dh(E=(0,$.z$)()){return/webos/i.test(E)}function ou(E=(0,$.z$)()){return/iphone|ipad|ipod/i.test(E)}function Ys(E=(0,$.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(E)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(E)}function As(E=(0,$.z$)()){return ou(E)||li(E)||dh(E)||fn(E)||/windows phone/i.test(E)||Ks(E)}function Dr(E,g=[]){let _;switch(E){case"Browser":_=_r((0,$.z$)());break;case"Worker":_=`${_r((0,$.z$)())}-${E}`;break;default:_=E}const b=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${O.SDK_VERSION}/${b}`}class Jm{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,_){const b=N=>new Promise((J,_e)=>{try{J(g(N))}catch(je){_e(je)}});b.onAbort=_,this.queue.push(b);const R=this.queue.length-1;return()=>{this.queue[R]=()=>Promise.resolve()}}runMiddleware(g){var _=this;return(0,f.Z)(function*(){if(_.auth.currentUser===g)return;const b=[];try{for(const R of _.queue)yield R(g),R.onAbort&&b.push(R.onAbort)}catch(R){b.reverse();for(const N of b)try{N()}catch(J){}throw _.auth._errorFactory.create("login-blocked",{originalMessage:R.message})}})()}}class Js{constructor(g,_,b){this.app=g,this.heartbeatServiceProvider=_,this.config=b,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Cc(this),this.idTokenSubscription=new Cc(this),this.beforeStateQueue=new Jm(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Yt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=b.sdkClientVersion}_initializeWithPersistence(g,_){var b=this;return _&&(this._popupRedirectResolver=Qt(_)),this._initializationPromise=this.queue((0,f.Z)(function*(){var R,N;if(!b._deleted&&(b.persistenceManager=yield Ci.create(b,g),!b._deleted)){if(null===(R=b._popupRedirectResolver)||void 0===R?void 0:R._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch(J){}yield b.initializeCurrentUser(_),b.lastNotifiedUid=(null===(N=b.currentUser)||void 0===N?void 0:N.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,f.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_,!0)}})()}initializeCurrentUser(g){var _=this;return(0,f.Z)(function*(){var b;const R=yield _.assertedPersistence.getCurrentUser();let N=R,J=!1;if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const _e=null===(b=_.redirectUser)||void 0===b?void 0:b._redirectEventId,je=null==N?void 0:N._redirectEventId,Ve=yield _.tryRedirectSignIn(g);(!_e||_e===je)&&(null==Ve?void 0:Ve.user)&&(N=Ve.user,J=!0)}if(!N)return _.directlySetCurrentUser(null);if(!N._redirectEventId){if(J)try{yield _.beforeStateQueue.runMiddleware(N)}catch(_e){N=R,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(_e))}return N?_.reloadAndSetCurrentUserOrClear(N):_.directlySetCurrentUser(null)}return Me(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===N._redirectEventId?_.directlySetCurrentUser(N):_.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(g){var _=this;return(0,f.Z)(function*(){let b=null;try{b=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch(R){yield _._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,f.Z)(function*(){try{yield $t(g)}catch(b){if("auth/network-request-failed"!==b.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const E=navigator;return E.languages&&E.languages[0]||E.language||null}()}_delete(){var g=this;return(0,f.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,f.Z)(function*(){const b=g?(0,$.m9)(g):null;return b&&Me(b.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(b&&b._clone(_))})()}_updateCurrentUser(g,_=!1){var b=this;return(0,f.Z)(function*(){if(!b._deleted)return g&&Me(b.tenantId===g.tenantId,b,"tenant-id-mismatch"),_||(yield b.beforeStateQueue.runMiddleware(g)),b.queue((0,f.Z)(function*(){yield b.directlySetCurrentUser(g),b.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,f.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var _=this;return this.queue((0,f.Z)(function*(){yield _.assertedPersistence.setPersistence(Qt(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new $.LL("auth","Firebase",g())}onAuthStateChanged(g,_,b){return this.registerStateListener(this.authStateSubscription,g,_,b)}beforeAuthStateChanged(g,_){return this.beforeStateQueue.pushCallback(g,_)}onIdTokenChanged(g,_,b){return this.registerStateListener(this.idTokenSubscription,g,_,b)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var b=this;return(0,f.Z)(function*(){const R=yield b.getOrInitRedirectPersistenceManager(_);return null===g?R.removeCurrentUser():R.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,f.Z)(function*(){if(!_.redirectPersistenceManager){const b=g&&Qt(g)||_._popupRedirectResolver;Me(b,_,"argument-error"),_.redirectPersistenceManager=yield Ci.create(_,[Qt(b._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,f.Z)(function*(){var b,R;return _._isInitialized&&(yield _.queue((0,f.Z)(function*(){}))),(null===(b=_._currentUser)||void 0===b?void 0:b._redirectEventId)===g?_._currentUser:(null===(R=_.redirectUser)||void 0===R?void 0:R._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,f.Z)(function*(){if(g===_.currentUser)return _.queue((0,f.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,b,R){if(this._deleted)return()=>{};const N="function"==typeof _?_:_.next.bind(_),J=this._isInitialized?Promise.resolve():this._initializationPromise;return Me(J,this,"internal-error"),J.then(()=>N(this.currentUser)),"function"==typeof _?g.addObserver(_,b,R):g.addObserver(_)}directlySetCurrentUser(g){var _=this;return(0,f.Z)(function*(){_.currentUser&&_.currentUser!==g&&(_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh()),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Dr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,f.Z)(function*(){var _;const b={"X-Client-Version":g.clientVersion};g.app.options.appId&&(b["X-Firebase-gmpid"]=g.app.options.appId);const R=yield null===(_=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return R&&(b["X-Firebase-Client"]=R),b})()}}function cn(E){return(0,$.m9)(E)}class Cc{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,$.ne)(_=>this.observer=_)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function il(E,g,_){const b=cn(E);Me(b._canInitEmulator,b,"emulator-config-failed"),Me(/^https?:\/\//.test(g),b,"invalid-emulator-scheme");const R=!!(null==_?void 0:_.disableWarnings),N=au(g),{host:J,port:_e}=function(E){const g=au(E),_=/(\/\/)?([^?#/]+)/.exec(E.substr(g.length));if(!_)return{host:"",port:null};const b=_[2].split("@").pop()||"",R=/^(\[[^\]]+\])(:|$)/.exec(b);if(R){const N=R[1];return{host:N,port:Ii(b.substr(N.length+1))}}{const[N,J]=b.split(":");return{host:N,port:Ii(J)}}}(g);b.config.emulator={url:`${N}//${J}${null===_e?"":`:${_e}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:J,port:_e,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:R})}),R||function(){function E(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",E):E())}()}function au(E){const g=E.indexOf(":");return g<0?"":E.substr(0,g+1)}function Ii(E){if(!E)return null;const g=Number(E);return isNaN(g)?null:g}class pa{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return Zn("not implemented")}_getIdTokenResponse(g){return Zn("not implemented")}_linkToIdToken(g,_){return Zn("not implemented")}_getReauthenticationResolver(g){return Zn("not implemented")}}function hh(E,g){return fh.apply(this,arguments)}function fh(){return(fh=(0,f.Z)(function*(E,g){return _t(E,"POST","/v1/accounts:resetPassword",Xt(E,g))})).apply(this,arguments)}function Cp(E,g){return ph.apply(this,arguments)}function ph(){return(ph=(0,f.Z)(function*(E,g){return _t(E,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Ic(E,g){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,f.Z)(function*(E,g){return _t(E,"POST","/v1/accounts:update",Xt(E,g))})).apply(this,arguments)}function gh(){return(gh=(0,f.Z)(function*(E,g){return G(E,"POST","/v1/accounts:signInWithPassword",Xt(E,g))})).apply(this,arguments)}function Tc(E,g){return mh.apply(this,arguments)}function mh(){return(mh=(0,f.Z)(function*(E,g){return _t(E,"POST","/v1/accounts:sendOobCode",Xt(E,g))})).apply(this,arguments)}function t_(E,g){return _h.apply(this,arguments)}function _h(){return(_h=(0,f.Z)(function*(E,g){return Tc(E,g)})).apply(this,arguments)}function nE(E,g){return sl.apply(this,arguments)}function sl(){return(sl=(0,f.Z)(function*(E,g){return Tc(E,g)})).apply(this,arguments)}function Ip(E,g){return ga.apply(this,arguments)}function ga(){return(ga=(0,f.Z)(function*(E,g){return Tc(E,g)})).apply(this,arguments)}function Dc(E,g){return yh.apply(this,arguments)}function yh(){return(yh=(0,f.Z)(function*(E,g){return Tc(E,g)})).apply(this,arguments)}function ol(){return(ol=(0,f.Z)(function*(E,g){return G(E,"POST","/v1/accounts:signInWithEmailLink",Xt(E,g))})).apply(this,arguments)}function Sc(){return(Sc=(0,f.Z)(function*(E,g){return G(E,"POST","/v1/accounts:signInWithEmailLink",Xt(E,g))})).apply(this,arguments)}class To extends pa{constructor(g,_,b,R=null){super("password",b),this._email=g,this._password=_,this._tenantId=R}static _fromEmailAndPassword(g,_){return new To(g,_,"password")}static _fromEmailAndCode(g,_,b=null){return new To(g,_,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,f.Z)(function*(){switch(_.signInMethod){case"password":return function(E,g){return gh.apply(this,arguments)}(g,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function(E,g){return ol.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:gn(g,"internal-error")}})()}_linkToIdToken(g,_){var b=this;return(0,f.Z)(function*(){switch(b.signInMethod){case"password":return Cp(g,{idToken:_,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function(E,g){return Sc.apply(this,arguments)}(g,{idToken:_,email:b._email,oobCode:b._password});default:gn(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Zi(E,g){return vh.apply(this,arguments)}function vh(){return(vh=(0,f.Z)(function*(E,g){return G(E,"POST","/v1/accounts:signInWithIdp",Xt(E,g))})).apply(this,arguments)}class or extends pa{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new or(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):gn("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:b,signInMethod:R}=_,N=be(_,["providerId","signInMethod"]);if(!b||!R)return null;const J=new or(b,R);return J.idToken=N.idToken||void 0,J.accessToken=N.accessToken||void 0,J.secret=N.secret,J.nonce=N.nonce,J.pendingToken=N.pendingToken||null,J}_getIdTokenResponse(g){return Zi(g,this.buildRequest())}_linkToIdToken(g,_){const b=this.buildRequest();return b.idToken=_,Zi(g,b)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,Zi(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,$.xO)(_)}return g}}function Tp(E,g){return _a.apply(this,arguments)}function _a(){return(_a=(0,f.Z)(function*(E,g){return _t(E,"POST","/v1/accounts:sendVerificationCode",Xt(E,g))})).apply(this,arguments)}function xc(){return(xc=(0,f.Z)(function*(E,g){return G(E,"POST","/v1/accounts:signInWithPhoneNumber",Xt(E,g))})).apply(this,arguments)}function Do(){return(Do=(0,f.Z)(function*(E,g){const _=yield G(E,"POST","/v1/accounts:signInWithPhoneNumber",Xt(E,g));if(_.temporaryProof)throw ie(E,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const wh={USER_NOT_FOUND:"user-not-found"};function Rc(){return(Rc=(0,f.Z)(function*(E,g){return G(E,"POST","/v1/accounts:signInWithPhoneNumber",Xt(E,Object.assign(Object.assign({},g),{operation:"REAUTH"})),wh)})).apply(this,arguments)}class Yr extends pa{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new Yr({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new Yr({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function(E,g){return xc.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function(E,g){return Do.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function(E,g){return Rc.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:b,verificationCode:R}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:b,code:R}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:b,phoneNumber:R,temporaryProof:N}=g;return b||_||R||N?new Yr({verificationId:_,verificationCode:b,phoneNumber:R,temporaryProof:N}):null}}class Ao{constructor(g){var _,b,R,N,J,_e;const je=(0,$.zd)((0,$.pd)(g)),Ve=null!==(_=je.apiKey)&&void 0!==_?_:null,ze=null!==(b=je.oobCode)&&void 0!==b?b:null,pn=function(E){switch(E){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(R=je.mode)&&void 0!==R?R:null);Me(Ve&&ze&&pn,"argument-error"),this.apiKey=Ve,this.operation=pn,this.code=ze,this.continueUrl=null!==(N=je.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(J=je.languageCode)&&void 0!==J?J:null,this.tenantId=null!==(_e=je.tenantId)&&void 0!==_e?_e:null}static parseLink(g){const _=function(E){const g=(0,$.zd)((0,$.pd)(E)).link,_=g?(0,$.zd)((0,$.pd)(g)).deep_link_id:null,b=(0,$.zd)((0,$.pd)(E)).deep_link_id;return(b?(0,$.zd)((0,$.pd)(b)).link:null)||b||_||g||E}(g);try{return new Ao(_)}catch(b){return null}}}let uu=(()=>{class E{constructor(){this.providerId=E.PROVIDER_ID}static credential(_,b){return To._fromEmailAndPassword(_,b)}static credentialWithLink(_,b){const R=Ao.parseLink(b);return Me(R,"argument-error"),To._fromEmailAndCode(_,R.code,R.tenantId)}}return E.PROVIDER_ID="password",E.EMAIL_PASSWORD_SIGN_IN_METHOD="password",E.EMAIL_LINK_SIGN_IN_METHOD="emailLink",E})();class en{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class ya extends en{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class xo extends ya{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return Me("providerId"in _&&"signInMethod"in _,"argument-error"),or._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return Me(g.idToken||g.accessToken,"argument-error"),or._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return xo.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return xo.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:b,oauthTokenSecret:R,pendingToken:N,nonce:J,providerId:_e}=g;if(!b&&!R&&!_&&!N||!_e)return null;try{return new xo(_e)._credential({idToken:_,accessToken:b,nonce:J,pendingToken:N})}catch(je){return null}}}let va=(()=>{class E extends ya{constructor(){super("facebook.com")}static credential(_){return or._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return E.credential(_.oauthAccessToken)}catch(b){return null}}}return E.FACEBOOK_SIGN_IN_METHOD="facebook.com",E.PROVIDER_ID="facebook.com",E})(),Ti=(()=>{class E extends ya{constructor(){super("google.com"),this.addScope("profile")}static credential(_,b){return or._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:b})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:b,oauthAccessToken:R}=_;if(!b&&!R)return null;try{return E.credential(b,R)}catch(N){return null}}}return E.GOOGLE_SIGN_IN_METHOD="google.com",E.PROVIDER_ID="google.com",E})(),ar=(()=>{class E extends ya{constructor(){super("github.com")}static credential(_){return or._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return E.credential(_.oauthAccessToken)}catch(b){return null}}}return E.GITHUB_SIGN_IN_METHOD="github.com",E.PROVIDER_ID="github.com",E})();class ci extends pa{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return Zi(g,this.buildRequest())}_linkToIdToken(g,_){const b=this.buildRequest();return b.idToken=_,Zi(g,b)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,Zi(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:b,signInMethod:R,pendingToken:N}=_;return b&&R&&N&&b===R?new ci(b,N):null}static _create(g,_){return new ci(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ea extends en{constructor(g){Me(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Ea.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Ea.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=ci.fromJSON(g);return Me(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:b}=g;if(!_||!b)return null;try{return ci._create(b,_)}catch(R){return null}}}let Mc=(()=>{class E extends ya{constructor(){super("twitter.com")}static credential(_,b){return or._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:b})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:b,oauthTokenSecret:R}=_;if(!b||!R)return null;try{return E.credential(b,R)}catch(N){return null}}}return E.TWITTER_SIGN_IN_METHOD="twitter.com",E.PROVIDER_ID="twitter.com",E})();function Ro(E,g){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,f.Z)(function*(E,g){return G(E,"POST","/v1/accounts:signUp",Xt(E,g))})).apply(this,arguments)}class Vr{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,b,R=!1){return(0,f.Z)(function*(){const N=yield ui._fromIdTokenResponse(g,b,R),J=wa(b);return new Vr({user:N,providerId:J,_tokenResponse:b,operationType:_})})()}static _forOperation(g,_,b){return(0,f.Z)(function*(){yield g._updateTokensIfNecessary(b,!0);const R=wa(b);return new Vr({user:g,providerId:R,_tokenResponse:b,operationType:_})})()}}function wa(E){return E.providerId?E.providerId:"phoneNumber"in E?"phone":null}function wt(E){return kc.apply(this,arguments)}function kc(){return(kc=(0,f.Z)(function*(E){var g;const _=cn(E);if(yield _._initializationPromise,null===(g=_.currentUser)||void 0===g?void 0:g.isAnonymous)return new Vr({user:_.currentUser,providerId:null,operationType:"signIn"});const b=yield Ro(_,{returnSecureToken:!0}),R=yield Vr._fromIdTokenResponse(_,"signIn",b,!0);return yield _._updateCurrentUser(R.user),R})).apply(this,arguments)}class ul extends $.ZR{constructor(g,_,b,R){var N;super(_.code,_.message),this.operationType=b,this.user=R,Object.setPrototypeOf(this,ul.prototype),this.customData={appName:g.name,tenantId:null!==(N=g.tenantId)&&void 0!==N?N:void 0,_serverResponse:_.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(g,_,b,R){return new ul(g,_,b,R)}}function ll(E,g,_,b){return("reauthenticate"===g?_._getReauthenticationResolver(E):_._getIdTokenResponse(E)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?ul._fromErrorAndOperation(E,N,g,b):N})}function Pc(E){return new Set(E.map(({providerId:g})=>g).filter(g=>!!g))}function Oc(E,g){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,f.Z)(function*(E,g){const _=(0,$.m9)(E);yield Ft(!0,_,g);const{providerUserInfo:b}=yield ht(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),R=Pc(b||[]);return _.providerData=_.providerData.filter(N=>R.has(N.providerId)),R.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function Ss(E,g){return Se.apply(this,arguments)}function Se(){return(Se=(0,f.Z)(function*(E,g,_=!1){const b=yield Mt(E,g._linkToIdToken(E.auth,yield E.getIdToken()),_);return Vr._forOperation(E,"link",b)})).apply(this,arguments)}function Ft(E,g,_){return lu.apply(this,arguments)}function lu(){return(lu=(0,f.Z)(function*(E,g,_){yield $t(g);const R=!1===E?"provider-already-linked":"no-such-provider";Me(Pc(g.providerData).has(_)===E,g.auth,R)})).apply(this,arguments)}function Dn(E,g){return cu.apply(this,arguments)}function cu(){return(cu=(0,f.Z)(function*(E,g,_=!1){const{auth:b}=E,R="reauthenticate";try{const N=yield Mt(E,ll(b,R,g,E),_);Me(N.idToken,b,"internal-error");const J=He(N.idToken);Me(J,b,"internal-error");const{sub:_e}=J;return Me(E.uid===_e,b,"user-mismatch"),Vr._forOperation(E,R,N)}catch(N){throw"auth/user-not-found"===(null==N?void 0:N.code)&&gn(b,"user-mismatch"),N}})).apply(this,arguments)}function xs(E,g){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,f.Z)(function*(E,g,_=!1){const b="signIn",R=yield ll(E,b,g),N=yield Vr._fromIdTokenResponse(E,b,R);return _||(yield E._updateCurrentUser(N.user)),N})).apply(this,arguments)}function No(E,g){return ba.apply(this,arguments)}function ba(){return(ba=(0,f.Z)(function*(E,g){return xs(cn(E),g)})).apply(this,arguments)}function Dp(E,g){return cl.apply(this,arguments)}function cl(){return(cl=(0,f.Z)(function*(E,g){const _=(0,$.m9)(E);return yield Ft(!1,_,g.providerId),Ss(_,g)})).apply(this,arguments)}function du(E,g){return to.apply(this,arguments)}function to(){return(to=(0,f.Z)(function*(E,g){return Dn((0,$.m9)(E),g)})).apply(this,arguments)}function hr(E,g){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,f.Z)(function*(E,g){return G(E,"POST","/v1/accounts:signInWithCustomToken",Xt(E,g))})).apply(this,arguments)}function Lc(E,g){return ds.apply(this,arguments)}function ds(){return(ds=(0,f.Z)(function*(E,g){const _=cn(E),b=yield hr(_,{token:g,returnSecureToken:!0}),R=yield Vr._fromIdTokenResponse(_,"signIn",b);return yield _._updateCurrentUser(R.user),R})).apply(this,arguments)}class Ar{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?Ch._fromServerResponse(g,_):gn(g,"internal-error")}}class Ch extends Ar{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new Ch(_)}}function Mo(E,g,_){var b;Me((null===(b=_.url)||void 0===b?void 0:b.length)>0,E,"invalid-continue-uri"),Me(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,E,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(Me(_.iOS.bundleId.length>0,E,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(Me(_.android.packageName.length>0,E,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function Vc(E,g,_){return hu.apply(this,arguments)}function hu(){return(hu=(0,f.Z)(function*(E,g,_){const b=(0,$.m9)(E),R={requestType:"PASSWORD_RESET",email:g};_&&Mo(b,R,_),yield nE(b,R)})).apply(this,arguments)}function Uc(E,g,_){return ko.apply(this,arguments)}function ko(){return(ko=(0,f.Z)(function*(E,g,_){yield hh((0,$.m9)(E),{oobCode:g,newPassword:_})})).apply(this,arguments)}function Ih(E,g){return Po.apply(this,arguments)}function Po(){return(Po=(0,f.Z)(function*(E,g){yield Ic((0,$.m9)(E),{oobCode:g})})).apply(this,arguments)}function fu(E,g){return pu.apply(this,arguments)}function pu(){return(pu=(0,f.Z)(function*(E,g){const _=(0,$.m9)(E),b=yield hh(_,{oobCode:g}),R=b.requestType;switch(Me(R,_,"internal-error"),R){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Me(b.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Me(b.mfaInfo,_,"internal-error");default:Me(b.email,_,"internal-error")}let N=null;return b.mfaInfo&&(N=Ar._fromServerResponse(cn(_),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:N},operation:R}})).apply(this,arguments)}function gu(E,g){return dl.apply(this,arguments)}function dl(){return(dl=(0,f.Z)(function*(E,g){const{data:_}=yield fu((0,$.m9)(E),g);return _.email})).apply(this,arguments)}function Ap(E,g,_){return hl.apply(this,arguments)}function hl(){return(hl=(0,f.Z)(function*(E,g,_){const b=cn(E),R=yield Ro(b,{returnSecureToken:!0,email:g,password:_}),N=yield Vr._fromIdTokenResponse(b,"signIn",R);return yield b._updateCurrentUser(N.user),N})).apply(this,arguments)}function Th(E,g,_){return No((0,$.m9)(E),uu.credential(g,_))}function Oo(E,g,_){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,f.Z)(function*(E,g,_){const b=(0,$.m9)(E),R={requestType:"EMAIL_SIGNIN",email:g};Me(_.handleCodeInApp,b,"argument-error"),_&&Mo(b,R,_),yield Ip(b,R)})).apply(this,arguments)}function jc(E,g){const _=Ao.parseLink(g);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}function Sr(E,g,_){return no.apply(this,arguments)}function no(){return(no=(0,f.Z)(function*(E,g,_){const b=(0,$.m9)(E),R=uu.credentialWithLink(g,_||Kn());return Me(R._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),No(b,R)})).apply(this,arguments)}function Qn(E,g){return fl.apply(this,arguments)}function fl(){return(fl=(0,f.Z)(function*(E,g){return _t(E,"POST","/v1/accounts:createAuthUri",Xt(E,g))})).apply(this,arguments)}function rE(E,g){return Dh.apply(this,arguments)}function Dh(){return(Dh=(0,f.Z)(function*(E,g){const b={identifier:g,continueUri:Ds()?Kn():"http://localhost"},{signinMethods:R}=yield Qn((0,$.m9)(E),b);return R||[]})).apply(this,arguments)}function pl(E,g){return $c.apply(this,arguments)}function $c(){return($c=(0,f.Z)(function*(E,g){const _=(0,$.m9)(E),R={requestType:"VERIFY_EMAIL",idToken:yield E.getIdToken()};g&&Mo(_.auth,R,g);const{email:N}=yield t_(_.auth,R);N!==E.email&&(yield E.reload())})).apply(this,arguments)}function Hc(E,g,_){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,f.Z)(function*(E,g,_){const b=(0,$.m9)(E),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield E.getIdToken(),newEmail:g};_&&Mo(b.auth,N,_);const{email:J}=yield Dc(b.auth,N);J!==E.email&&(yield E.reload())})).apply(this,arguments)}function Ia(E,g){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,f.Z)(function*(E,g){return _t(E,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function ur(E,g){return mu.apply(this,arguments)}function mu(){return(mu=(0,f.Z)(function*(E,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const b=(0,$.m9)(E),N={idToken:yield b.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},J=yield Mt(b,Ia(b.auth,N));b.displayName=J.displayName||null,b.photoURL=J.photoUrl||null;const _e=b.providerData.find(({providerId:je})=>"password"===je);_e&&(_e.displayName=b.displayName,_e.photoURL=b.photoURL),yield b._updateTokensIfNecessary(J)})).apply(this,arguments)}function Sp(E,g){return _u((0,$.m9)(E),g,null)}function ro(E,g){return _u((0,$.m9)(E),null,g)}function _u(E,g,_){return gl.apply(this,arguments)}function gl(){return(gl=(0,f.Z)(function*(E,g,_){const{auth:b}=E,N={idToken:yield E.getIdToken(),returnSecureToken:!0};g&&(N.email=g),_&&(N.password=_);const J=yield Mt(E,Cp(b,N));yield E._updateTokensIfNecessary(J,!0)})).apply(this,arguments)}class Di{constructor(g,_,b={}){this.isNewUser=g,this.providerId=_,this.profile=b}}class ml extends Di{constructor(g,_,b,R){super(g,_,b),this.username=R}}class Rp extends Di{constructor(g,_){super(g,"facebook.com",_)}}class n_ extends ml{constructor(g,_){super(g,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class r_ extends Di{constructor(g,_){super(g,"google.com",_)}}class Yi extends ml{constructor(g,_,b){super(g,"twitter.com",_,b)}}function Gc(E){const{user:g,_tokenResponse:_}=E;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function(E){var g,_;if(!E)return null;const{providerId:b}=E,R=E.rawUserInfo?JSON.parse(E.rawUserInfo):{},N=E.isNewUser||"identitytoolkit#SignupNewUserResponse"===E.kind;if(!b&&(null==E?void 0:E.idToken)){const J=null===(_=null===(g=He(E.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(J)return new Di(N,"anonymous"!==J&&"custom"!==J?J:null)}if(!b)return null;switch(b){case"facebook.com":return new Rp(N,R);case"github.com":return new n_(N,R);case"google.com":return new r_(N,R);case"twitter.com":return new Yi(N,R,E.screenName||null);case"custom":case"anonymous":return new Di(N,null);default:return new Di(N,b,R)}}(_)}class Ai{constructor(g,_){this.type=g,this.credential=_}static _fromIdtoken(g){return new Ai("enroll",g)}static _fromMfaPendingCredential(g){return new Ai("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,b;if(null==g?void 0:g.multiFactorSession){if(null===(_=g.multiFactorSession)||void 0===_?void 0:_.pendingCredential)return Ai._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(b=g.multiFactorSession)||void 0===b?void 0:b.idToken)return Ai._fromIdtoken(g.multiFactorSession.idToken)}return null}}class kp{constructor(g,_,b){this.session=g,this.hints=_,this.signInResolver=b}static _fromError(g,_){const b=cn(g),R=_.customData._serverResponse,N=(R.mfaInfo||[]).map(_e=>Ar._fromServerResponse(b,_e));Me(R.mfaPendingCredential,b,"internal-error");const J=Ai._fromMfaPendingCredential(R.mfaPendingCredential);return new kp(J,N,function(){var _e=(0,f.Z)(function*(je){const Ve=yield je._process(b,J);delete R.mfaInfo,delete R.mfaPendingCredential;const ze=Object.assign(Object.assign({},R),{idToken:Ve.idToken,refreshToken:Ve.refreshToken});switch(_.operationType){case"signIn":const pn=yield Vr._fromIdTokenResponse(b,_.operationType,ze);return yield b._updateCurrentUser(pn.user),pn;case"reauthenticate":return Me(_.user,b,"internal-error"),Vr._forOperation(_.user,_.operationType,ze);default:gn(b,"internal-error")}});return function(je){return _e.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,f.Z)(function*(){return _.signInResolver(g)})()}}function Ah(E,g){var _;const b=(0,$.m9)(E),R=g;return Me(g.customData.operationType,b,"argument-error"),Me(null===(_=R.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,b,"argument-error"),kp._fromError(b,R)}function Pp(E,g){return _t(E,"POST","/v2/accounts/mfaEnrollment:start",Xt(E,g))}class Lo{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(b=>Ar._fromServerResponse(g.auth,b)))})}static _fromUser(g){return new Lo(g)}getSession(){var g=this;return(0,f.Z)(function*(){return Ai._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,_){var b=this;return(0,f.Z)(function*(){const R=g,N=yield b.getSession(),J=yield Mt(b.user,R._process(b.user.auth,N,_));return yield b.user._updateTokensIfNecessary(J),b.user.reload()})()}unenroll(g){var _=this;return(0,f.Z)(function*(){const b="string"==typeof g?g:g.uid,R=yield _.user.getIdToken(),N=yield Mt(_.user,function(E,g){return _t(E,"POST","/v2/accounts/mfaEnrollment:withdraw",Xt(E,g))}(_.user.auth,{idToken:R,mfaEnrollmentId:b}));_.enrolledFactors=_.enrolledFactors.filter(({uid:J})=>J!==b),yield _.user._updateTokensIfNecessary(N);try{yield _.user.reload()}catch(J){if("auth/user-token-expired"!==J.code)throw J}})()}}const Da=new WeakMap;function yl(E){const g=(0,$.m9)(E);return Da.has(g)||Da.set(g,Lo._fromUser(g)),Da.get(g)}const Bt="__sak";class at{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Bt,"1"),this.storage.removeItem(Bt),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ns=(()=>{class E extends at{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,b)=>this.onStorageEvent(_,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const E=(0,$.z$)();return Tr(E)||ou(E)}()&&function(){try{return!(!window||window===window.top)}catch(E){return!1}}(),this.fallbackToPolling=As(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const b of Object.keys(this.listeners)){const R=this.storage.getItem(b),N=this.localCache[b];R!==N&&_(b,N,R)}}onStorageEvent(_,b=!1){if(!_.key)return void this.forAllChangedKeys((_e,je,Ve)=>{this.notifyListeners(_e,Ve)});const R=_.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const _e=this.storage.getItem(R);if(_.newValue!==_e)null!==_.newValue?this.storage.setItem(R,_.newValue):this.storage.removeItem(R);else if(this.localCache[R]===_.newValue&&!b)return}const N=()=>{const _e=this.storage.getItem(R);!b&&this.localCache[R]===_e||this.notifyListeners(R,_e)},J=this.storage.getItem(R);(0,$.w1)()&&10===document.documentMode&&J!==_.newValue&&_.newValue!==_.oldValue?setTimeout(N,10):N()}notifyListeners(_,b){this.localCache[_]=b;const R=this.listeners[_];if(R)for(const N of Array.from(R))N(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,b,R)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:b,newValue:R}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(b)}_removeListener(_,b){this.listeners[_]&&(this.listeners[_].delete(b),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,b){var R=()=>super._set,N=this;return(0,f.Z)(function*(){yield R().call(N,_,b),N.localCache[_]=JSON.stringify(b)})()}_get(_){var b=()=>super._get,R=this;return(0,f.Z)(function*(){const N=yield b().call(R,_);return R.localCache[_]=JSON.stringify(N),N})()}_remove(_){var b=()=>super._remove,R=this;return(0,f.Z)(function*(){yield b().call(R,_),delete R.localCache[_]})()}}return E.type="LOCAL",E})(),Zc=(()=>{class E extends at{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,b){}_removeListener(_,b){}}return E.type="SESSION",E})();let vu=(()=>{class E{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const b=this.receivers.find(N=>N.isListeningto(_));if(b)return b;const R=new E(_);return this.receivers.push(R),R}isListeningto(_){return this.eventTarget===_}handleEvent(_){var b=this;return(0,f.Z)(function*(){const R=_,{eventId:N,eventType:J,data:_e}=R.data,je=b.handlersMap[J];if(!(null==je?void 0:je.size))return;R.ports[0].postMessage({status:"ack",eventId:N,eventType:J});const Ve=Array.from(je).map(function(){var pn=(0,f.Z)(function*(An){return An(R.origin,_e)});return function(An){return pn.apply(this,arguments)}}()),ze=yield function(E){return Promise.all(E.map(function(){var g=(0,f.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(b){return{fulfilled:!1,reason:b}}});return function(_){return g.apply(this,arguments)}}()))}(Ve);R.ports[0].postMessage({status:"done",eventId:N,eventType:J,response:ze})})()}_subscribe(_,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(b)}_unsubscribe(_,b){this.handlersMap[_]&&b&&this.handlersMap[_].delete(b),(!b||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return E.receivers=[],E})();function yr(E="",g=10){let _="";for(let b=0;b<g;b++)_+=Math.floor(10*Math.random());return E+_}class Eu{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,b=50){var R=this;return(0,f.Z)(function*(){const N="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let J,_e;return new Promise((je,Ve)=>{const ze=yr("",20);N.port1.start();const pn=setTimeout(()=>{Ve(new Error("unsupported_event"))},b);_e={messageChannel:N,onMessage(An){const Rr=An;if(Rr.data.eventId===ze)switch(Rr.data.status){case"ack":clearTimeout(pn),J=setTimeout(()=>{Ve(new Error("timeout"))},3e3);break;case"done":clearTimeout(J),je(Rr.data.response);break;default:clearTimeout(pn),clearTimeout(J),Ve(new Error("invalid_response"))}}},R.handlers.add(_e),N.port1.addEventListener("message",_e.onMessage),R.target.postMessage({eventType:g,eventId:ze,data:_},[N.port2])}).finally(()=>{_e&&R.removeMessageHandler(_e)})})()}}function Jn(){return window}function El(){return void 0!==Jn().WorkerGlobalScope&&"function"==typeof Jn().importScripts}function bu(){return(bu=(0,f.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(E){return null}})).apply(this,arguments)}const Si="firebaseLocalStorageDb",so="firebaseLocalStorage",Ur="fbase_key";class Uo{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function xh(E,g){return E.transaction([so],g?"readwrite":"readonly").objectStore(so)}function Sa(){const E=indexedDB.open(Si,1);return new Promise((g,_)=>{E.addEventListener("error",()=>{_(E.error)}),E.addEventListener("upgradeneeded",()=>{const b=E.result;try{b.createObjectStore(so,{keyPath:Ur})}catch(R){_(R)}}),E.addEventListener("success",(0,f.Z)(function*(){const b=E.result;b.objectStoreNames.contains(so)?g(b):(b.close(),yield function(){const E=indexedDB.deleteDatabase(Si);return new Uo(E).toPromise()}(),g(yield Sa()))}))})}function lr(E,g,_){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,f.Z)(function*(E,g,_){const b=xh(E,!0).put({[Ur]:g,value:_});return new Uo(b).toPromise()})).apply(this,arguments)}function bl(){return(bl=(0,f.Z)(function*(E,g){const _=xh(E,!1).get(g),b=yield new Uo(_).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function Nh(E,g){const _=xh(E,!0).delete(g);return new Uo(_).toPromise()}const Cu=(()=>{class E{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,f.Z)(function*(){return _.db||(_.db=yield Sa()),_.db})()}_withRetries(_){var b=this;return(0,f.Z)(function*(){let R=0;for(;;)try{const N=yield b._openDb();return yield _(N)}catch(N){if(R++>3)throw N;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,f.Z)(function*(){return El()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,f.Z)(function*(){_.receiver=vu._getInstance(El()?self:null),_.receiver._subscribe("keyChanged",function(){var b=(0,f.Z)(function*(R,N){return{keyProcessed:(yield _._poll()).includes(N.key)}});return function(R,N){return b.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var b=(0,f.Z)(function*(R,N){return["keyChanged"]});return function(R,N){return b.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,f.Z)(function*(){var b,R;if(_.activeServiceWorker=yield function(){return bu.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Eu(_.activeServiceWorker);const N=yield _.sender._send("ping",{},800);!N||(null===(b=N[0])||void 0===b?void 0:b.fulfilled)&&(null===(R=N[0])||void 0===R?void 0:R.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var b=this;return(0,f.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function(){var E;return(null===(E=null==navigator?void 0:navigator.serviceWorker)||void 0===E?void 0:E.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:_},b.serviceWorkerReceiverAvailable?800:50)}catch(R){}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Sa();return yield lr(_,Bt,"1"),yield Nh(_,Bt),!0}catch(_){}return!1})()}_withPendingWrite(_){var b=this;return(0,f.Z)(function*(){b.pendingWrites++;try{yield _()}finally{b.pendingWrites--}})()}_set(_,b){var R=this;return(0,f.Z)(function*(){return R._withPendingWrite((0,f.Z)(function*(){return yield R._withRetries(N=>lr(N,_,b)),R.localCache[_]=b,R.notifyServiceWorker(_)}))})()}_get(_){var b=this;return(0,f.Z)(function*(){const R=yield b._withRetries(N=>function(E,g){return bl.apply(this,arguments)}(N,_));return b.localCache[_]=R,R})()}_remove(_){var b=this;return(0,f.Z)(function*(){return b._withPendingWrite((0,f.Z)(function*(){return yield b._withRetries(R=>Nh(R,_)),delete b.localCache[_],b.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,f.Z)(function*(){const b=yield _._withRetries(J=>{const _e=xh(J,!1).getAll();return new Uo(_e).toPromise()});if(!b)return[];if(0!==_.pendingWrites)return[];const R=[],N=new Set;for(const{fbase_key:J,value:_e}of b)N.add(J),JSON.stringify(_.localCache[J])!==JSON.stringify(_e)&&(_.notifyListeners(J,_e),R.push(J));for(const J of Object.keys(_.localCache))_.localCache[J]&&!N.has(J)&&(_.notifyListeners(J,null),R.push(J));return R})()}notifyListeners(_,b){this.localCache[_]=b;const R=this.listeners[_];if(R)for(const N of Array.from(R))N(b)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(b)}_removeListener(_,b){this.listeners[_]&&(this.listeners[_].delete(b),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return E.type="LOCAL",E})();function xa(E,g){return _t(E,"POST","/v2/accounts/mfaSignIn:start",Xt(E,g))}function xi(){return(xi=(0,f.Z)(function*(E){return(yield _t(E,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function zc(E){return new Promise((g,_)=>{const b=document.createElement("script");b.setAttribute("src",E),b.onload=g,b.onerror=R=>{const N=mn("internal-error");N.customData=R,_(N)},b.type="text/javascript",b.charset="UTF-8",function(){var E,g;return null!==(g=null===(E=document.getElementsByTagName("head"))||void 0===E?void 0:E[0])&&void 0!==g?g:document}().appendChild(b)})}function wn(E){return`__${E}${Math.floor(1e6*Math.random())}`}const xr=1e12;class Cl{constructor(g){this.auth=g,this.counter=xr,this._widgets=new Map}render(g,_){const b=this.counter;return this._widgets.set(b,new fi(g,this.auth.name,_||{})),this.counter++,b}reset(g){var _;const b=g||xr;null===(_=this._widgets.get(b))||void 0===_||_.delete(),this._widgets.delete(b)}getResponse(g){var _;return(null===(_=this._widgets.get(g||xr))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,f.Z)(function*(){var b;return null===(b=_._widgets.get(g||xr))||void 0===b||b.execute(),""})()}}class fi{constructor(g,_,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const R="string"==typeof g?document.getElementById(g):g;Me(R,"argument-error",{appName:_}),this.container=R,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(E){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<50;b++)g.push(_.charAt(Math.floor(Math.random()*_.length)));return g.join("")}();const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch(b){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(b){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ma=wn("rcb"),pi=new hn(3e4,6e4);class Ph{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Jn().grecaptcha}load(g,_=""){return Me((E=_).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(E),g,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(Jn().grecaptcha):new Promise((b,R)=>{const N=Jn().setTimeout(()=>{R(mn(g,"network-request-failed"))},pi.get());Jn()[Ma]=()=>{Jn().clearTimeout(N),delete Jn()[Ma];const _e=Jn().grecaptcha;if(!_e)return void R(mn(g,"internal-error"));const je=_e.render;_e.render=(Ve,ze)=>{const pn=je(Ve,ze);return this.counter++,pn},this.hostLanguage=_,b(_e)},zc(`https://www.google.com/recaptcha/api.js??${(0,$.xO)({onload:Ma,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(N),R(mn(g,"internal-error"))})});var E}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){return!!Jn().grecaptcha&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class oo{load(g){return(0,f.Z)(function*(){return new Cl(g)})()}clearedOneInstance(){}}const Fp="recaptcha",ka={theme:"light",type:"image"};class Kc{constructor(g,_=Object.assign({},ka),b){this.parameters=_,this.type=Fp,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=cn(b),this.isInvisible="invisible"===this.parameters.size,Me("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const R="string"==typeof g?document.getElementById(g):g;Me(R,this.auth,"argument-error"),this.container=R,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new oo:new Ph,this.validateStartingState()}verify(){var g=this;return(0,f.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),b=g.getAssertedRecaptcha();return b.getResponse(_)||new Promise(N=>{const J=_e=>{!_e||(g.tokenChangeListeners.delete(J),N(_e))};g.tokenChangeListeners.add(J),g.isInvisible&&b.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){Me(!this.parameters.sitekey,this.auth,"argument-error"),Me(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Me("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(b=>b(_)),"function"==typeof g)g(_);else if("string"==typeof g){const b=Jn()[g];"function"==typeof b&&b(_)}}}assertNotDestroyed(){Me(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,f.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const b=document.createElement("div");_.appendChild(b),_=b}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,f.Z)(function*(){Me(Ds()&&!El(),g.auth,"internal-error"),yield function(){let E=null;return new Promise(g=>{"complete"!==document.readyState?(E=()=>g(),window.addEventListener("load",E)):g()}).catch(g=>{throw E&&window.removeEventListener("load",E),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function(E){return xi.apply(this,arguments)}(g.auth);Me(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return Me(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ni{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=Yr._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function fr(E,g,_){return Oh.apply(this,arguments)}function Oh(){return(Oh=(0,f.Z)(function*(E,g,_){const b=cn(E),R=yield B(b,g,(0,$.m9)(_));return new Ni(R,N=>No(b,N))})).apply(this,arguments)}function Fh(E,g,_){return I.apply(this,arguments)}function I(){return(I=(0,f.Z)(function*(E,g,_){const b=(0,$.m9)(E);yield Ft(!1,b,"phone");const R=yield B(b.auth,g,(0,$.m9)(_));return new Ni(R,N=>Dp(b,N))})).apply(this,arguments)}function A(E,g,_){return M.apply(this,arguments)}function M(){return(M=(0,f.Z)(function*(E,g,_){const b=(0,$.m9)(E),R=yield B(b.auth,g,(0,$.m9)(_));return new Ni(R,N=>du(b,N))})).apply(this,arguments)}function B(E,g,_){return re.apply(this,arguments)}function re(){return(re=(0,f.Z)(function*(E,g,_){var b;const R=yield _.verify();try{let N;if(Me("string"==typeof R,E,"argument-error"),Me(_.type===Fp,E,"argument-error"),N="string"==typeof g?{phoneNumber:g}:g,"session"in N){const J=N.session;if("phoneNumber"in N)return Me("enroll"===J.type,E,"internal-error"),(yield Pp(E,{idToken:J.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:R}})).phoneSessionInfo.sessionInfo;{Me("signin"===J.type,E,"internal-error");const _e=(null===(b=N.multiFactorHint)||void 0===b?void 0:b.uid)||N.multiFactorUid;return Me(_e,E,"missing-multi-factor-info"),(yield xa(E,{mfaPendingCredential:J.credential,mfaEnrollmentId:_e,phoneSignInInfo:{recaptchaToken:R}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:J}=yield Tp(E,{phoneNumber:N.phoneNumber,recaptchaToken:R});return J}}finally{_._reset()}})).apply(this,arguments)}function ue(E,g){return ke.apply(this,arguments)}function ke(){return(ke=(0,f.Z)(function*(E,g){yield Ss((0,$.m9)(E),g)})).apply(this,arguments)}let Je=(()=>{class E{constructor(_){this.providerId=E.PROVIDER_ID,this.auth=cn(_)}verifyPhoneNumber(_,b){return B(this.auth,_,(0,$.m9)(b))}static credential(_,b){return Yr._fromVerification(_,b)}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:b,temporaryProof:R}=_;return b&&R?Yr._fromTokenResponse(b,R):null}}return E.PROVIDER_ID="phone",E.PHONE_SIGN_IN_METHOD="phone",E})();function gt(E,g){return g?Qt(g):(Me(E._popupRedirectResolver,E,"argument-error"),E._popupRedirectResolver)}class ft extends pa{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Zi(g,this._buildIdpRequest())}_linkToIdToken(g,_){return Zi(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return Zi(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function Jt(E){return xs(E.auth,new ft(E),E.bypassAuthState)}function bt(E){const{auth:g,user:_}=E;return Me(_,g,"internal-error"),Dn(_,new ft(E),E.bypassAuthState)}function Mi(E){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,f.Z)(function*(E){const{auth:g,user:_}=E;return Me(_,g,"internal-error"),Ss(_,new ft(E),E.bypassAuthState)})).apply(this,arguments)}class Pa{constructor(g,_,b,R,N=!1){this.auth=g,this.resolver=b,this.user=R,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,f.Z)(function*(b,R){g.pendingPromise={resolve:b,reject:R};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(N){g.reject(N)}});return function(b,R){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,f.Z)(function*(){const{urlResponse:b,sessionId:R,postBody:N,tenantId:J,error:_e,type:je}=g;if(_e)return void _.reject(_e);const Ve={auth:_.auth,requestUri:b,sessionId:R,tenantId:J||void 0,postBody:N||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(je)(Ve))}catch(ze){_.reject(ze)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Jt;case"linkViaPopup":case"linkViaRedirect":return Mi;case"reauthViaPopup":case"reauthViaRedirect":return bt;default:gn(this.auth,"internal-error")}}resolve(g){cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Iu=new hn(2e3,1e4);function Il(E,g,_){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,f.Z)(function*(E,g,_){const b=cn(E);Zr(E,g,en);const R=gt(b,_);return new jo(b,"signInViaPopup",g,R).executeNotNull()})).apply(this,arguments)}function ps(E,g,_){return gs.apply(this,arguments)}function gs(){return(gs=(0,f.Z)(function*(E,g,_){const b=(0,$.m9)(E);Zr(b.auth,g,en);const R=gt(b.auth,_);return new jo(b.auth,"reauthViaPopup",g,R,b).executeNotNull()})).apply(this,arguments)}function zt(E,g,_){return er.apply(this,arguments)}function er(){return(er=(0,f.Z)(function*(E,g,_){const b=(0,$.m9)(E);Zr(b.auth,g,en);const R=gt(b.auth,_);return new jo(b.auth,"linkViaPopup",g,R,b).executeNotNull()})).apply(this,arguments)}let jo=(()=>{class E extends Pa{constructor(_,b,R,N,J){super(_,b,N,J),this.provider=R,this.authWindow=null,this.pollId=null,E.currentPopupAction&&E.currentPopupAction.cancel(),E.currentPopupAction=this}executeNotNull(){var _=this;return(0,f.Z)(function*(){const b=yield _.execute();return Me(b,_.auth,"internal-error"),b})()}onExecution(){var _=this;return(0,f.Z)(function*(){cr(1===_.filter.length,"Popup operations only handle one event");const b=yr();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],b),_.authWindow.associatedEvent=b,_.resolver._originValidation(_.auth).catch(R=>{_.reject(R)}),_.resolver._isIframeWebStorageSupported(_.auth,R=>{R||_.reject(mn(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(mn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,E.currentPopupAction=null}pollUserCancellation(){const _=()=>{var b,R;this.pollId=(null===(R=null===(b=this.authWindow)||void 0===b?void 0:b.window)||void 0===R?void 0:R.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(mn(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,Iu.get())};_()}}return E.currentPopupAction=null,E})();const Ji=new Map;class Yc extends Pa{constructor(g,_,b=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,b),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,f.Z)(function*(){let b=Ji.get(_.auth._key());if(!b){try{const N=(yield function(E,g){return Lh.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;b=()=>Promise.resolve(N)}catch(R){b=()=>Promise.reject(R)}Ji.set(_.auth._key(),b)}return _.bypassAuthState||Ji.set(_.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,b=this;return(0,f.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(b,g);if("unknown"!==g.type){if(g.eventId){const R=yield b.auth._redirectUserForId(g.eventId);if(R)return b.user=R,_().call(b,g);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function Lh(){return(Lh=(0,f.Z)(function*(E,g){const _=jn(g),b=Vh(E);if(!(yield b._isAvailable()))return!1;const R="true"===(yield b._get(_));return yield b._remove(_),R})).apply(this,arguments)}function Xi(E,g){return Lp.apply(this,arguments)}function Lp(){return(Lp=(0,f.Z)(function*(E,g){return Vh(E)._set(jn(g),"true")})).apply(this,arguments)}function Tu(){Ji.clear()}function Os(E,g){Ji.set(E._key(),g)}function Vh(E){return Qt(E._redirectPersistence)}function jn(E){return bi("pendingRedirect",E.config.apiKey,E.name)}function ao(E,g,_){return function(E,g,_){return Qc.apply(this,arguments)}(E,g,_)}function Qc(){return(Qc=(0,f.Z)(function*(E,g,_){const b=cn(E);Zr(E,g,en);const R=gt(b,_);return yield Xi(R,b),R._openRedirect(b,g,"signInViaRedirect")})).apply(this,arguments)}function Jc(E,g,_){return function(E,g,_){return Up.apply(this,arguments)}(E,g,_)}function Up(){return(Up=(0,f.Z)(function*(E,g,_){const b=(0,$.m9)(E);Zr(b.auth,g,en);const R=gt(b.auth,_);yield Xi(R,b.auth);const N=yield ed(b);return R._openRedirect(b.auth,g,"reauthViaRedirect",N)})).apply(this,arguments)}function u_(E,g,_){return function(E,g,_){return Oa.apply(this,arguments)}(E,g,_)}function Oa(){return(Oa=(0,f.Z)(function*(E,g,_){const b=(0,$.m9)(E);Zr(b.auth,g,en);const R=gt(b.auth,_);yield Ft(!1,b,g.providerId),yield Xi(R,b.auth);const N=yield ed(b);return R._openRedirect(b.auth,g,"linkViaRedirect",N)})).apply(this,arguments)}function l_(E,g){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,f.Z)(function*(E,g){return yield cn(E)._initializationPromise,uo(E,g,!1)})).apply(this,arguments)}function uo(E,g){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,f.Z)(function*(E,g,_=!1){const b=cn(E),R=gt(b,g),J=yield new Yc(b,R,_).execute();return J&&!_&&(delete J.user._redirectEventId,yield b._persistUserIfCurrent(J.user),yield b._setRedirectUser(null,g)),J})).apply(this,arguments)}function ed(E){return Bp.apply(this,arguments)}function Bp(){return(Bp=(0,f.Z)(function*(E){const g=yr(`${E.uid}:::`);return E._redirectEventId=g,yield E.auth._setRedirectUser(E),yield E.auth._persistUserIfCurrent(E),g})).apply(this,arguments)}class c_{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(g,b)&&(_=!0,this.sendToConsumer(g,b),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function(E){switch(E.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return td(E);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var b;if(g.error&&!td(g)){const R=(null===(b=g.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";_.onError(mn(this.auth,R))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const b=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&b}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Au(g))}saveEventToCache(g){this.cachedEventUids.add(Au(g)),this.lastProcessedEventTime=Date.now()}}function Au(E){return[E.type,E.eventId,E.sessionId,E.tenantId].filter(g=>g).join("-")}function td({type:E,error:g}){return"unknown"===E&&"auth/no-auth-event"===(null==g?void 0:g.code)}function nd(E){return Su.apply(this,arguments)}function Su(){return(Su=(0,f.Z)(function*(E,g={}){return _t(E,"GET","/v1/projects",g)})).apply(this,arguments)}const uE=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xu=/^https?/;function Al(){return(Al=(0,f.Z)(function*(E){if(E.config.emulator)return;const{authorizedDomains:g}=yield nd(E);for(const _ of g)try{if(rd(_))return}catch(b){}gn(E,"unauthorized-domain")})).apply(this,arguments)}function rd(E){const g=Kn(),{protocol:_,hostname:b}=new URL(g);if(E.startsWith("chrome-extension://")){const J=new URL(E);return""===J.hostname&&""===b?"chrome-extension:"===_&&E.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&J.hostname===b}if(!xu.test(_))return!1;if(uE.test(E))return b===E;const R=E.replace(/\./g,"\\.");return new RegExp("^(.+\\."+R+"|"+R+")$","i").test(b)}const $p=new hn(3e4,6e4);function $o(){const E=Jn().___jsl;if(null==E?void 0:E.H)for(const g of Object.keys(E.H))if(E.H[g].r=E.H[g].r||[],E.H[g].L=E.H[g].L||[],E.H[g].r=[...E.H[g].L],E.CP)for(let _=0;_<E.CP.length;_++)E.CP[_]=null}let Uh=null;function cE(E){return Uh=Uh||function(E){return new Promise((g,_)=>{var b,R,N;function J(){$o(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{$o(),_(mn(E,"network-request-failed"))},timeout:$p.get()})}if(null===(R=null===(b=Jn().gapi)||void 0===b?void 0:b.iframes)||void 0===R?void 0:R.Iframe)g(gapi.iframes.getContext());else{if(!(null===(N=Jn().gapi)||void 0===N?void 0:N.load)){const _e=wn("iframefcb");return Jn()[_e]=()=>{gapi.load?J():_(mn(E,"network-request-failed"))},zc(`https://apis.google.com/js/api.js?onload=${_e}`).catch(je=>_(je))}J()}}).catch(g=>{throw Uh=null,g})}(E),Uh}const Bh=new hn(5e3,15e3),Sl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},d_=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hE(E){const g=E.config;Me(g.authDomain,E,"auth-domain-config-required");const _=g.emulator?qe(g,"emulator/auth/iframe"):`https://${E.config.authDomain}/__/auth/iframe`,b={apiKey:g.apiKey,appName:E.name,v:O.SDK_VERSION},R=d_.get(E.config.apiHost);R&&(b.eid=R);const N=E._getFrameworks();return N.length&&(b.fw=N.join(",")),`${_}?${(0,$.xO)(b).slice(1)}`}function id(){return(id=(0,f.Z)(function*(E){const g=yield cE(E),_=Jn().gapi;return Me(_,E,"internal-error"),g.open({where:document.body,url:hE(E),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Sl,dontclear:!0},b=>new Promise(function(){var R=(0,f.Z)(function*(N,J){yield b.restyle({setHideOnLeave:!1});const _e=mn(E,"network-request-failed"),je=Jn().setTimeout(()=>{J(_e)},Bh.get());function Ve(){Jn().clearTimeout(je),N(b)}b.ping(Ve).then(Ve,()=>{J(_e)})});return function(N,J){return R.apply(this,arguments)}}()))})).apply(this,arguments)}const Hp={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class g_{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function sd(E,g,_,b,R,N){Me(E.config.authDomain,E,"auth-domain-config-required"),Me(E.config.apiKey,E,"invalid-api-key");const J={apiKey:E.config.apiKey,appName:E.name,authType:_,redirectUrl:b,v:O.SDK_VERSION,eventId:R};if(g instanceof en){g.setDefaultLanguage(E.languageCode),J.providerId=g.providerId||"",(0,$.xb)(g.getCustomParameters())||(J.customParameters=JSON.stringify(g.getCustomParameters()));for(const[je,Ve]of Object.entries(N||{}))J[je]=Ve}if(g instanceof ya){const je=g.getScopes().filter(Ve=>""!==Ve);je.length>0&&(J.scopes=je.join(","))}E.tenantId&&(J.tid=E.tenantId);const _e=J;for(const je of Object.keys(_e))void 0===_e[je]&&delete _e[je];return`${function({config:E}){return E.emulator?qe(E,"emulator/auth/handler"):`https://${E.authDomain}/__/auth/handler`}(E)}?${(0,$.xO)(_e).slice(1)}`}const La="webStorageSupport",od=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Zc,this._completeRedirectFn=uo,this._overrideRedirectResult=Os}_openPopup(g,_,b,R){var N=this;return(0,f.Z)(function*(){var J;cr(null===(J=N.eventManagers[g._key()])||void 0===J?void 0:J.manager,"_initialize() not called before _openPopup()");const _e=sd(g,_,b,Kn(),R);return function(E,g,_,b=500,R=600){const N=Math.max((window.screen.availHeight-R)/2,0).toString(),J=Math.max((window.screen.availWidth-b)/2,0).toString();let _e="";const je=Object.assign(Object.assign({},Hp),{width:b.toString(),height:R.toString(),top:N,left:J}),Ve=(0,$.z$)().toLowerCase();_&&(_e=ha(Ve)?"_blank":_),da(Ve)&&(g=g||"http://localhost",je.scrollbars="yes");const ze=Object.entries(je).reduce((An,[Rr,qo])=>`${An}${Rr}=${qo},`,"");if(function(E=(0,$.z$)()){var g;return ou(E)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(Ve)&&"_self"!==_e)return function(E,g){const _=document.createElement("a");_.href=E,_.target=g;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(b)}(g||"",_e),new g_(null);const pn=window.open(g||"",_e,ze);Me(pn,E,"popup-blocked");try{pn.focus()}catch(An){}return new g_(pn)}(g,_e,yr())})()}_openRedirect(g,_,b,R){var N=this;return(0,f.Z)(function*(){return yield N._originValidation(g),E=sd(g,_,b,Kn(),R),Jn().location.href=E,new Promise(()=>{});var E})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:R,promise:N}=this.eventManagers[_];return R?Promise.resolve(R):(cr(N,"If manager is not set, promise should be"),N)}const b=this.initAndGetManager(g);return this.eventManagers[_]={promise:b},b.catch(()=>{delete this.eventManagers[_]}),b}initAndGetManager(g){var _=this;return(0,f.Z)(function*(){const b=yield function(E){return id.apply(this,arguments)}(g),R=new c_(g);return b.register("authEvent",N=>(Me(null==N?void 0:N.authEvent,g,"invalid-auth-event"),{status:R.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:R},_.iframes[g._key()]=b,R})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send(La,{type:La},R=>{var N;const J=null===(N=null==R?void 0:R[0])||void 0===N?void 0:N[La];void 0!==J&&_(!!J),gn(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function(E){return Al.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return As()||Tr()||ou()}};class ad extends class{constructor(g){this.factorId=g}_process(g,_,b){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,b);case"signin":return this._finalizeSignIn(g,_.credential);default:return Zn("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new ad(g)}_finalizeEnroll(g,_,b){return function(E,g){return _t(E,"POST","/v2/accounts/mfaEnrollment:finalize",Xt(E,g))}(g,{idToken:_,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function(E,g){return _t(E,"POST","/v2/accounts/mfaSignIn:finalize",Xt(E,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let gE=(()=>{class E{constructor(){}static assertion(_){return ad._fromCredential(_)}}return E.FACTOR_ID="phone",E})();var E,mE="@firebase/auth";class Gp{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,f.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(b=>{var R;g((null===(R=b)||void 0===R?void 0:R.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);!_||(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}E="Browser",(0,O._registerComponent)(new Ge.wA("auth",(g,{options:_})=>{const b=g.getProvider("app").getImmediate(),R=g.getProvider("heartbeat"),{apiKey:N,authDomain:J}=b.options;return((_e,je)=>{Me(N&&!N.includes(":"),"invalid-api-key",{appName:_e.name}),Me(!(null==J?void 0:J.includes(":")),"argument-error",{appName:_e.name});const Ve={apiKey:N,authDomain:J,clientPlatform:E,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Dr(E)},ze=new Js(_e,je,Ve);return function(E,g){const _=(null==g?void 0:g.persistence)||[],b=(Array.isArray(_)?_:[_]).map(Qt);(null==g?void 0:g.errorMap)&&E._updateErrorMap(g.errorMap),E._initializeWithPersistence(b,null==g?void 0:g.popupRedirectResolver)}(ze,_),ze})(b,R)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,b)=>{g.getProvider("auth-internal").initialize()})),(0,O._registerComponent)(new Ge.wA("auth-internal",g=>{const _=cn(g.getProvider("auth").getImmediate());return new Gp(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,O.registerVersion)(mE,"0.20.2",void 0),(0,O.registerVersion)(mE,"0.20.2","esm2017")},3854:(Qe,Ee,V)=>{"use strict";V.d(Ee,{BH:()=>le,LL:()=>Ge,ZR:()=>Et,gQ:()=>Me,zI:()=>$e,hu:()=>$,g5:()=>O,US:()=>ne,tV:()=>oe,h$:()=>be,L:()=>te,$s:()=>Xt,r3:()=>Yt,Sg:()=>pe,ne:()=>Zn,p$:()=>U,vZ:()=>gn,ZB:()=>H,gK:()=>Kn,pd:()=>zr,m9:()=>$n,z$:()=>Ie,GJ:()=>us,jU:()=>fe,ru:()=>De,d:()=>Xe,xb:()=>Rn,w1:()=>dt,hl:()=>Oe,uI:()=>we,UG:()=>Be,Yr:()=>Vt,b$:()=>Ne,G6:()=>vt,Mn:()=>Zt,w9:()=>Wi,cI:()=>qi,UI:()=>Wn,xO:()=>zs,zd:()=>Zr,DV:()=>Ts,ug:()=>hn,dS:()=>Co,Pz:()=>qr,Dv:()=>zn,Wj:()=>Vn,lb:()=>_n,eu:()=>Fe});const $=function(z,G){if(!z)throw O(G)},O=function(z){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+z)},ae=function(z){const G=[];let Q=0;for(let ve=0;ve<z.length;ve++){let Z=z.charCodeAt(ve);Z<128?G[Q++]=Z:Z<2048?(G[Q++]=Z>>6|192,G[Q++]=63&Z|128):55296==(64512&Z)&&ve+1<z.length&&56320==(64512&z.charCodeAt(ve+1))?(Z=65536+((1023&Z)<<10)+(1023&z.charCodeAt(++ve)),G[Q++]=Z>>18|240,G[Q++]=Z>>12&63|128,G[Q++]=Z>>6&63|128,G[Q++]=63&Z|128):(G[Q++]=Z>>12|224,G[Q++]=Z>>6&63|128,G[Q++]=63&Z|128)}return G},ne={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(z,G){if(!Array.isArray(z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Q=G?this.byteToCharMapWebSafe_:this.byteToCharMap_,ve=[];for(let Z=0;Z<z.length;Z+=3){const ie=z[Z],Pe=Z+1<z.length,Ze=Pe?z[Z+1]:0,ht=Z+2<z.length,xt=ht?z[Z+2]:0;let dr=(15&Ze)<<2|xt>>6,de=63&xt;ht||(de=64,Pe||(dr=64)),ve.push(Q[ie>>2],Q[(3&ie)<<4|Ze>>4],Q[dr],Q[de])}return ve.join("")},encodeString(z,G){return this.HAS_NATIVE_SUPPORT&&!G?btoa(z):this.encodeByteArray(ae(z),G)},decodeString(z,G){return this.HAS_NATIVE_SUPPORT&&!G?atob(z):function(z){const G=[];let Q=0,ve=0;for(;Q<z.length;){const Z=z[Q++];if(Z<128)G[ve++]=String.fromCharCode(Z);else if(Z>191&&Z<224){const ie=z[Q++];G[ve++]=String.fromCharCode((31&Z)<<6|63&ie)}else if(Z>239&&Z<365){const ht=((7&Z)<<18|(63&z[Q++])<<12|(63&z[Q++])<<6|63&z[Q++])-65536;G[ve++]=String.fromCharCode(55296+(ht>>10)),G[ve++]=String.fromCharCode(56320+(1023&ht))}else{const ie=z[Q++],Pe=z[Q++];G[ve++]=String.fromCharCode((15&Z)<<12|(63&ie)<<6|63&Pe)}}return G.join("")}(this.decodeStringToByteArray(z,G))},decodeStringToByteArray(z,G){this.init_();const Q=G?this.charToByteMapWebSafe_:this.charToByteMap_,ve=[];for(let Z=0;Z<z.length;){const ie=Q[z.charAt(Z++)],Ze=Z<z.length?Q[z.charAt(Z)]:0;++Z;const xt=Z<z.length?Q[z.charAt(Z)]:64;++Z;const Tt=Z<z.length?Q[z.charAt(Z)]:64;if(++Z,null==ie||null==Ze||null==xt||null==Tt)throw Error();ve.push(ie<<2|Ze>>4),64!==xt&&(ve.push(Ze<<4&240|xt>>2),64!==Tt&&ve.push(xt<<6&192|Tt))}return ve},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let z=0;z<this.ENCODED_VALS.length;z++)this.byteToCharMap_[z]=this.ENCODED_VALS.charAt(z),this.charToByteMap_[this.byteToCharMap_[z]]=z,this.byteToCharMapWebSafe_[z]=this.ENCODED_VALS_WEBSAFE.charAt(z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[z]]=z,z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(z)]=z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(z)]=z)}}},be=function(z){const G=ae(z);return ne.encodeByteArray(G,!0)},te=function(z){return be(z).replace(/\./g,"")},oe=function(z){try{return ne.decodeString(z,!0)}catch(G){console.error("base64Decode failed: ",G)}return null};function U(z){return H(void 0,z)}function H(z,G){if(!(G instanceof Object))return G;switch(G.constructor){case Date:return new Date(G.getTime());case Object:void 0===z&&(z={});break;case Array:z=[];break;default:return G}for(const Q in G)!G.hasOwnProperty(Q)||!W(Q)||(z[Q]=H(z[Q],G[Q]));return z}function W(z){return"__proto__"!==z}class le{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((G,Q)=>{this.resolve=G,this.reject=Q})}wrapCallback(G){return(Q,ve)=>{Q?this.reject(Q):this.resolve(ve),"function"==typeof G&&(this.promise.catch(()=>{}),1===G.length?G(Q):G(Q,ve))}}}function pe(z,G){if(z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ve=G||"demo-project",Z=z.iat||0,ie=z.sub||z.user_id;if(!ie)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Pe=Object.assign({iss:`https://securetoken.google.com/${ve}`,aud:ve,iat:Z,exp:Z+3600,auth_time:Z,sub:ie,user_id:ie,firebase:{sign_in_provider:"custom",identities:{}}},z);return[te(JSON.stringify({alg:"none",type:"JWT"})),te(JSON.stringify(Pe)),""].join(".")}function Ie(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function we(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ie())}function Be(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(z){return!1}}function fe(){return"object"==typeof self&&self.self===self}function De(){const z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof z&&void 0!==z.id}function Ne(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Xe(){return Ie().indexOf("Electron/")>=0}function dt(){const z=Ie();return z.indexOf("MSIE ")>=0||z.indexOf("Trident/")>=0}function Zt(){return Ie().indexOf("MSAppHost/")>=0}function Vt(){return!1}function vt(){return!Be()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Oe(){return"object"==typeof indexedDB}function Fe(){return new Promise((z,G)=>{try{let Q=!0;const ve="validate-browser-context-for-indexeddb-analytics-module",Z=self.indexedDB.open(ve);Z.onsuccess=()=>{Z.result.close(),Q||self.indexedDB.deleteDatabase(ve),z(!0)},Z.onupgradeneeded=()=>{Q=!1},Z.onerror=()=>{var ie;G((null===(ie=Z.error)||void 0===ie?void 0:ie.message)||"")}}catch(Q){G(Q)}})}function $e(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Et extends Error{constructor(G,Q,ve){super(Q),this.code=G,this.customData=ve,this.name="FirebaseError",Object.setPrototypeOf(this,Et.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ge.prototype.create)}}class Ge{constructor(G,Q,ve){this.service=G,this.serviceName=Q,this.errors=ve}create(G,...Q){const ve=Q[0]||{},Z=`${this.service}/${G}`,ie=this.errors[G],Pe=ie?function(z,G){return z.replace(Ir,(Q,ve)=>{const Z=G[ve];return null!=Z?String(Z):`<${ve}?>`})}(ie,ve):"Error";return new Et(Z,`${this.serviceName}: ${Pe} (${Z}).`,ve)}}const Ir=/\{\$([^}]+)}/g;function qi(z){return JSON.parse(z)}function qr(z){return JSON.stringify(z)}const Ln=function(z){let G={},Q={},ve={},Z="";try{const ie=z.split(".");G=qi(oe(ie[0])||""),Q=qi(oe(ie[1])||""),Z=ie[2],ve=Q.d||{},delete Q.d}catch(ie){}return{header:G,claims:Q,data:ve,signature:Z}},Wi=function(z){const Q=Ln(z).claims;return!!Q&&"object"==typeof Q&&Q.hasOwnProperty("iat")},us=function(z){const G=Ln(z).claims;return"object"==typeof G&&!0===G.admin};function Yt(z,G){return Object.prototype.hasOwnProperty.call(z,G)}function Ts(z,G){if(Object.prototype.hasOwnProperty.call(z,G))return z[G]}function Rn(z){for(const G in z)if(Object.prototype.hasOwnProperty.call(z,G))return!1;return!0}function Wn(z,G,Q){const ve={};for(const Z in z)Object.prototype.hasOwnProperty.call(z,Z)&&(ve[Z]=G.call(Q,z[Z],Z,z));return ve}function gn(z,G){if(z===G)return!0;const Q=Object.keys(z),ve=Object.keys(G);for(const Z of Q){if(!ve.includes(Z))return!1;const ie=z[Z],Pe=G[Z];if(mn(ie)&&mn(Pe)){if(!gn(ie,Pe))return!1}else if(ie!==Pe)return!1}for(const Z of ve)if(!Q.includes(Z))return!1;return!0}function mn(z){return null!==z&&"object"==typeof z}function zs(z){const G=[];for(const[Q,ve]of Object.entries(z))Array.isArray(ve)?ve.forEach(Z=>{G.push(encodeURIComponent(Q)+"="+encodeURIComponent(Z))}):G.push(encodeURIComponent(Q)+"="+encodeURIComponent(ve));return G.length?"&"+G.join("&"):""}function Zr(z){const G={};return z.replace(/^\?/,"").split("&").forEach(ve=>{if(ve){const[Z,ie]=ve.split("=");G[decodeURIComponent(Z)]=decodeURIComponent(ie)}}),G}function zr(z){const G=z.indexOf("?");if(!G)return"";const Q=z.indexOf("#",G);return z.substring(G,Q>0?Q:void 0)}class Me{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let G=1;G<this.blockSize;++G)this.pad_[G]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(G,Q){Q||(Q=0);const ve=this.W_;if("string"==typeof G)for(let Tt=0;Tt<16;Tt++)ve[Tt]=G.charCodeAt(Q)<<24|G.charCodeAt(Q+1)<<16|G.charCodeAt(Q+2)<<8|G.charCodeAt(Q+3),Q+=4;else for(let Tt=0;Tt<16;Tt++)ve[Tt]=G[Q]<<24|G[Q+1]<<16|G[Q+2]<<8|G[Q+3],Q+=4;for(let Tt=16;Tt<80;Tt++){const dr=ve[Tt-3]^ve[Tt-8]^ve[Tt-14]^ve[Tt-16];ve[Tt]=4294967295&(dr<<1|dr>>>31)}let xt,yn,Z=this.chain_[0],ie=this.chain_[1],Pe=this.chain_[2],Ze=this.chain_[3],ht=this.chain_[4];for(let Tt=0;Tt<80;Tt++){Tt<40?Tt<20?(xt=Ze^ie&(Pe^Ze),yn=1518500249):(xt=ie^Pe^Ze,yn=1859775393):Tt<60?(xt=ie&Pe|Ze&(ie|Pe),yn=2400959708):(xt=ie^Pe^Ze,yn=3395469782);const dr=(Z<<5|Z>>>27)+xt+ht+yn+ve[Tt]&4294967295;ht=Ze,Ze=Pe,Pe=4294967295&(ie<<30|ie>>>2),ie=Z,Z=dr}this.chain_[0]=this.chain_[0]+Z&4294967295,this.chain_[1]=this.chain_[1]+ie&4294967295,this.chain_[2]=this.chain_[2]+Pe&4294967295,this.chain_[3]=this.chain_[3]+Ze&4294967295,this.chain_[4]=this.chain_[4]+ht&4294967295}update(G,Q){if(null==G)return;void 0===Q&&(Q=G.length);const ve=Q-this.blockSize;let Z=0;const ie=this.buf_;let Pe=this.inbuf_;for(;Z<Q;){if(0===Pe)for(;Z<=ve;)this.compress_(G,Z),Z+=this.blockSize;if("string"==typeof G){for(;Z<Q;)if(ie[Pe]=G.charCodeAt(Z),++Pe,++Z,Pe===this.blockSize){this.compress_(ie),Pe=0;break}}else for(;Z<Q;)if(ie[Pe]=G[Z],++Pe,++Z,Pe===this.blockSize){this.compress_(ie),Pe=0;break}}this.inbuf_=Pe,this.total_+=Q}digest(){const G=[];let Q=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Z=this.blockSize-1;Z>=56;Z--)this.buf_[Z]=255&Q,Q/=256;this.compress_(this.buf_);let ve=0;for(let Z=0;Z<5;Z++)for(let ie=24;ie>=0;ie-=8)G[ve]=this.chain_[Z]>>ie&255,++ve;return G}}function Zn(z,G){const Q=new cr(z,G);return Q.subscribe.bind(Q)}class cr{constructor(G,Q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Q,this.task.then(()=>{G(this)}).catch(ve=>{this.error(ve)})}next(G){this.forEachObserver(Q=>{Q.next(G)})}error(G){this.forEachObserver(Q=>{Q.error(G)}),this.close(G)}complete(){this.forEachObserver(G=>{G.complete()}),this.close()}subscribe(G,Q,ve){let Z;if(void 0===G&&void 0===Q&&void 0===ve)throw new Error("Missing Observer.");Z=function(z,G){if("object"!=typeof z||null===z)return!1;for(const Q of["next","error","complete"])if(Q in z&&"function"==typeof z[Q])return!0;return!1}(G)?G:{next:G,error:Q,complete:ve},void 0===Z.next&&(Z.next=Nn),void 0===Z.error&&(Z.error=Nn),void 0===Z.complete&&(Z.complete=Nn);const ie=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Z.error(this.finalError):Z.complete()}catch(Pe){}}),this.observers.push(Z),ie}unsubscribeOne(G){void 0===this.observers||void 0===this.observers[G]||(delete this.observers[G],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(G){if(!this.finalized)for(let Q=0;Q<this.observers.length;Q++)this.sendOne(Q,G)}sendOne(G,Q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[G])try{Q(this.observers[G])}catch(ve){"undefined"!=typeof console&&console.error&&console.error(ve)}})}close(G){this.finalized||(this.finalized=!0,void 0!==G&&(this.finalError=G),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Nn(){}const zn=function(z,G,Q,ve){let Z;if(ve<G?Z="at least "+G:ve>Q&&(Z=0===Q?"none":"no more than "+Q),Z)throw new Error(z+" failed: Was called with "+ve+(1===ve?" argument.":" arguments.")+" Expects "+Z+".")};function Kn(z,G){return`${z} failed: ${G} argument `}function Vn(z,G,Q,ve){if((!ve||Q)&&"function"!=typeof Q)throw new Error(Kn(z,G)+"must be a valid function.")}function _n(z,G,Q,ve){if((!ve||Q)&&("object"!=typeof Q||null===Q))throw new Error(Kn(z,G)+"must be a valid context object.")}const Co=function(z){const G=[];let Q=0;for(let ve=0;ve<z.length;ve++){let Z=z.charCodeAt(ve);if(Z>=55296&&Z<=56319){const ie=Z-55296;ve++,$(ve<z.length,"Surrogate pair missing trail surrogate."),Z=65536+(ie<<10)+(z.charCodeAt(ve)-56320)}Z<128?G[Q++]=Z:Z<2048?(G[Q++]=Z>>6|192,G[Q++]=63&Z|128):Z<65536?(G[Q++]=Z>>12|224,G[Q++]=Z>>6&63|128,G[Q++]=63&Z|128):(G[Q++]=Z>>18|240,G[Q++]=Z>>12&63|128,G[Q++]=Z>>6&63|128,G[Q++]=63&Z|128)}return G},hn=function(z){let G=0;for(let Q=0;Q<z.length;Q++){const ve=z.charCodeAt(Q);ve<128?G++:ve<2048?G+=2:ve>=55296&&ve<=56319?(G+=4,Q++):G+=3}return G};function Xt(z,G=1e3,Q=2){const ve=G*Math.pow(Q,z),Z=Math.round(.5*ve*(Math.random()-.5)*2);return Math.min(144e5,ve+Z)}function $n(z){return z&&z._delegate?z._delegate:z}},2329:(Qe,Ee,V)=>{"use strict";V.d(Ee,{Mq:()=>f.getApp,C6:()=>f.getApps});var f=V(8026);(0,f.registerVersion)("firebase","9.8.2","app")},7841:(Qe,Ee,V)=>{"use strict";V.d(Ee,{Z:()=>f.Z});var f=V(3394);f.Z.registerVersion("firebase","9.8.2","app-compat")},4828:(Qe,Ee,V)=>{"use strict";V.r(Ee);var f=V(8239),$=V(3394),O=V(7014),ae=V(3854),be=(V(8026),V(5422),V(3910));function te(){return window}function H(){return(H=(0,f.Z)(function*(de,ee,K){var Ae;const{BuildInfo:He}=te();(0,O.aq)(ee.sessionId,"AuthEvent did not contain a session ID");const Nt=yield fe(ee.sessionId),Mt={};return(0,O.ar)()?Mt.ibi=He.packageName:(0,O.as)()?Mt.apn=He.packageName:(0,O.at)(de,"operation-not-supported-in-this-environment"),He.displayName&&(Mt.appDisplayName=He.displayName),Mt.sessionId=Nt,(0,O.au)(de,K,ee.type,void 0,null!==(Ae=ee.eventId)&&void 0!==Ae?Ae:void 0,Mt)})).apply(this,arguments)}function le(){return(le=(0,f.Z)(function*(de){const{BuildInfo:ee}=te(),K={};(0,O.ar)()?K.iosBundleId=ee.packageName:(0,O.as)()?K.androidPackageName=ee.packageName:(0,O.at)(de,"operation-not-supported-in-this-environment"),yield(0,O.av)(de,K)})).apply(this,arguments)}function we(){return(we=(0,f.Z)(function*(de,ee,K){const{cordova:Ae}=te();let He=()=>{};try{yield new Promise((Nt,Mt)=>{let Dt=null;function ln(){var $t;Nt();const Mn=null===($t=Ae.plugins.browsertab)||void 0===$t?void 0:$t.close;"function"==typeof Mn&&Mn(),"function"==typeof(null==K?void 0:K.close)&&K.close()}function Un(){Dt||(Dt=window.setTimeout(()=>{Mt((0,O.aw)(de,"redirect-cancelled-by-user"))},2e3))}function Bn(){"visible"===(null==document?void 0:document.visibilityState)&&Un()}ee.addPassiveListener(ln),document.addEventListener("resume",Un,!1),(0,O.as)()&&document.addEventListener("visibilitychange",Bn,!1),He=()=>{ee.removePassiveListener(ln),document.removeEventListener("resume",Un,!1),document.removeEventListener("visibilitychange",Bn,!1),Dt&&window.clearTimeout(Dt)}})}finally{He()}})).apply(this,arguments)}function fe(de){return De.apply(this,arguments)}function De(){return(De=(0,f.Z)(function*(de){const ee=Ne(de),K=yield crypto.subtle.digest("SHA-256",ee);return Array.from(new Uint8Array(K)).map(He=>He.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ne(de){if((0,O.aq)(/[0-9a-zA-Z]+/.test(de),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(de);const ee=new ArrayBuffer(de.length),K=new Uint8Array(ee);for(let Ae=0;Ae<de.length;Ae++)K[Ae]=de.charCodeAt(Ae);return K}class dt extends O.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(ee=>{this.resolveInialized=ee})}addPassiveListener(ee){this.passiveListeners.add(ee)}removePassiveListener(ee){this.passiveListeners.delete(ee)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(ee){return this.resolveInialized(),this.passiveListeners.forEach(K=>K(ee)),super.onEvent(ee)}initialized(){var ee=this;return(0,f.Z)(function*(){yield ee.initPromise})()}}function vt(de){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,f.Z)(function*(de){const ee=yield mt()._get(rt(de));return ee&&(yield mt()._remove(rt(de))),ee})).apply(this,arguments)}function $e(){const de=[],ee="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let K=0;K<20;K++){const Ae=Math.floor(Math.random()*ee.length);de.push(ee.charAt(Ae))}return de.join("")}function mt(){return(0,O.ay)(O.b)}function rt(de){return(0,O.az)("authEvent",de.config.apiKey,de.name)}function Lr(de){if(!(null==de?void 0:de.includes("?")))return{};const[ee,...K]=de.split("?");return(0,ae.zd)(K.join("?"))}function Ln(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,O.aw)("no-auth-event")}}function Yt(){var de;return(null===(de=null==self?void 0:self.location)||void 0===de?void 0:de.protocol)||null}function Rn(de=(0,ae.z$)()){return!("file:"!==Yt()&&"ionic:"!==Yt()&&"capacitor:"!==Yt()||!de.toLowerCase().match(/iphone|ipad|ipod|android/))}function Zr(){try{const de=self.localStorage,ee=O.aI();if(de)return de.setItem(ee,"1"),de.removeItem(ee),!function(de=(0,ae.z$)()){return(0,ae.w1)()&&11===(null==document?void 0:document.documentMode)||function(de=(0,ae.z$)()){return/Edge\/\d+/.test(de)}(de)}()||(0,ae.hl)()}catch(de){return zr()&&(0,ae.hl)()}return!1}function zr(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Me(){return("http:"===Yt()||"https:"===Yt()||(0,ae.ru)()||Rn())&&!((0,ae.b$)()||(0,ae.UG)())&&Zr()&&!zr()}function Zn(){return Rn()&&"undefined"!=typeof document}function et(){return(et=(0,f.Z)(function*(){return!!Zn()&&new Promise(de=>{const ee=setTimeout(()=>{de(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(ee),de(!0)})})})).apply(this,arguments)}const Nn={LOCAL:"local",NONE:"none",SESSION:"session"},zn=O.ax,Kn="persistence";function Vn(de){return _n.apply(this,arguments)}function _n(){return(_n=(0,f.Z)(function*(de){yield de._initializationPromise;const ee=hn(),K=O.az(Kn,de.config.apiKey,de.name);ee&&ee.setItem(K,de._getPersistence())})).apply(this,arguments)}function hn(){var de;try{return(null===(de="undefined"!=typeof window?window:null)||void 0===de?void 0:de.sessionStorage)||null}catch(ee){return null}}const qe=O.ax;class ot{constructor(){this.browserResolver=O.ay(O.k),this.cordovaResolver=O.ay(class{constructor(){this._redirectPersistence=O.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=O.aB,this._overrideRedirectResult=O.aC}_initialize(ee){var K=this;return(0,f.Z)(function*(){const Ae=ee._key();let He=K.eventManagers.get(Ae);return He||(He=new dt(ee),K.eventManagers.set(Ae,He),K.attachCallbackListeners(ee,He)),He})()}_openPopup(ee){(0,O.at)(ee,"operation-not-supported-in-this-environment")}_openRedirect(ee,K,Ae,He){var Nt=this;return(0,f.Z)(function*(){!function(de){var ee,K,Ae,He,Nt,Mt,Dt,ln,Un,Bn;const $t=te();(0,O.ax)("function"==typeof(null===(ee=null==$t?void 0:$t.universalLinks)||void 0===ee?void 0:ee.subscribe),de,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,O.ax)(void 0!==(null===(K=null==$t?void 0:$t.BuildInfo)||void 0===K?void 0:K.packageName),de,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,O.ax)("function"==typeof(null===(Nt=null===(He=null===(Ae=null==$t?void 0:$t.cordova)||void 0===Ae?void 0:Ae.plugins)||void 0===He?void 0:He.browsertab)||void 0===Nt?void 0:Nt.openUrl),de,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.ax)("function"==typeof(null===(ln=null===(Dt=null===(Mt=null==$t?void 0:$t.cordova)||void 0===Mt?void 0:Mt.plugins)||void 0===Dt?void 0:Dt.browsertab)||void 0===ln?void 0:ln.isAvailable),de,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.ax)("function"==typeof(null===(Bn=null===(Un=null==$t?void 0:$t.cordova)||void 0===Un?void 0:Un.InAppBrowser)||void 0===Bn?void 0:Bn.open),de,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(ee);const Mt=yield Nt._initialize(ee);yield Mt.initialized(),Mt.resetRedirect(),(0,O.aD)(),yield Nt._originValidation(ee);const Dt=function(de,ee,K=null){return{type:ee,eventId:K,urlResponse:null,sessionId:$e(),postBody:null,tenantId:de.tenantId,error:(0,O.aw)(de,"no-auth-event")}}(ee,Ae,He);yield function(de,ee){return mt()._set(rt(de),ee)}(ee,Dt);const ln=yield function(de,ee,K){return H.apply(this,arguments)}(ee,Dt,K),Un=yield function(de){const{cordova:ee}=te();return new Promise(K=>{ee.plugins.browsertab.isAvailable(Ae=>{let He=null;Ae?ee.plugins.browsertab.openUrl(de):He=ee.InAppBrowser.open(de,(0,O.ap)()?"_blank":"_system","location=yes"),K(He)})})}(ln);return function(de,ee,K){return we.apply(this,arguments)}(ee,Mt,Un)})()}_isIframeWebStorageSupported(ee,K){throw new Error("Method not implemented.")}_originValidation(ee){const K=ee._key();return this.originValidationPromises[K]||(this.originValidationPromises[K]=function(de){return le.apply(this,arguments)}(ee)),this.originValidationPromises[K]}attachCallbackListeners(ee,K){const{universalLinks:Ae,handleOpenURL:He,BuildInfo:Nt}=te(),Mt=setTimeout((0,f.Z)(function*(){yield vt(ee),K.onEvent(Ln())}),500),Dt=function(){var Bn=(0,f.Z)(function*($t){clearTimeout(Mt);const Mn=yield vt(ee);let We=null;Mn&&(null==$t?void 0:$t.url)&&(We=function(de,ee){var K,Ae;const He=function(de){const ee=Lr(de),K=ee.link?decodeURIComponent(ee.link):void 0,Ae=Lr(K).link,He=ee.deep_link_id?decodeURIComponent(ee.deep_link_id):void 0;return Lr(He).link||He||Ae||K||de}(ee);if(He.includes("/__/auth/callback")){const Nt=Lr(He),Mt=Nt.firebaseError?function(de){try{return JSON.parse(de)}catch(ee){return null}}(decodeURIComponent(Nt.firebaseError)):null,Dt=null===(Ae=null===(K=null==Mt?void 0:Mt.code)||void 0===K?void 0:K.split("auth/"))||void 0===Ae?void 0:Ae[1],ln=Dt?(0,O.aw)(Dt):null;return ln?{type:de.type,eventId:de.eventId,tenantId:de.tenantId,error:ln,urlResponse:null,sessionId:null,postBody:null}:{type:de.type,eventId:de.eventId,tenantId:de.tenantId,sessionId:de.sessionId,urlResponse:He,postBody:null}}return null}(Mn,$t.url)),K.onEvent(We||Ln())});return function(Mn){return Bn.apply(this,arguments)}}();void 0!==Ae&&"function"==typeof Ae.subscribe&&Ae.subscribe(null,Dt);const ln=He,Un=`${Nt.packageName.toLowerCase()}://`;te().handleOpenURL=function(){var Bn=(0,f.Z)(function*($t){if($t.toLowerCase().startsWith(Un)&&Dt({url:$t}),"function"==typeof ln)try{ln($t)}catch(Mn){console.error(Mn)}});return function($t){return Bn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=O.a,this._completeRedirectFn=O.aB,this._overrideRedirectResult=O.aC}_initialize(ee){var K=this;return(0,f.Z)(function*(){return yield K.selectUnderlyingResolver(),K.assertedUnderlyingResolver._initialize(ee)})()}_openPopup(ee,K,Ae,He){var Nt=this;return(0,f.Z)(function*(){return yield Nt.selectUnderlyingResolver(),Nt.assertedUnderlyingResolver._openPopup(ee,K,Ae,He)})()}_openRedirect(ee,K,Ae,He){var Nt=this;return(0,f.Z)(function*(){return yield Nt.selectUnderlyingResolver(),Nt.assertedUnderlyingResolver._openRedirect(ee,K,Ae,He)})()}_isIframeWebStorageSupported(ee,K){this.assertedUnderlyingResolver._isIframeWebStorageSupported(ee,K)}_originValidation(ee){return this.assertedUnderlyingResolver._originValidation(ee)}get _shouldInitProactively(){return Zn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return qe(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var ee=this;return(0,f.Z)(function*(){if(ee.underlyingResolver)return;const K=yield function(){return et.apply(this,arguments)}();ee.underlyingResolver=K?ee.cordovaResolver:ee.browserResolver})()}}function ls(de){return de.unwrap()}function Xt(de){return sr(de)}function sr(de){const{_tokenResponse:ee}=de instanceof ae.ZR?de.customData:de;if(!ee)return null;if(!(de instanceof ae.ZR)&&"temporaryProof"in ee&&"phoneNumber"in ee)return O.P.credentialFromResult(de);const K=ee.providerId;if(!K||K===O.o.PASSWORD)return null;let Ae;switch(K){case O.o.GOOGLE:Ae=O.Q;break;case O.o.FACEBOOK:Ae=O.N;break;case O.o.GITHUB:Ae=O.T;break;case O.o.TWITTER:Ae=O.W;break;default:const{oauthIdToken:He,oauthAccessToken:Nt,oauthTokenSecret:Mt,pendingToken:Dt,nonce:ln}=ee;return Nt||Mt||He||Dt?Dt?K.startsWith("saml.")?O.aL._create(K,Dt):O.J._fromParams({providerId:K,signInMethod:K,pendingToken:Dt,idToken:He,accessToken:Nt}):new O.U(K).credential({idToken:He,accessToken:Nt,rawNonce:ln}):null}return de instanceof ae.ZR?Ae.credentialFromError(de):Ae.credentialFromResult(de)}function $n(de,ee){return ee.catch(K=>{throw K instanceof ae.ZR&&function(de,ee){var K;const Ae=null===(K=ee.customData)||void 0===K?void 0:K._tokenResponse;if("auth/multi-factor-auth-required"===ee.code)ee.resolver=new Q(de,O.an(de,ee));else if(Ae){const He=sr(ee),Nt=ee;He&&(Nt.credential=He,Nt.tenantId=Ae.tenantId||void 0,Nt.email=Ae.email||void 0,Nt.phoneNumber=Ae.phoneNumber||void 0)}}(de,K),K}).then(K=>{const He=K.user;return{operationType:K.operationType,credential:Xt(K),additionalUserInfo:O.al(K),user:ve.getOrCreate(He)}})}function z(de,ee){return G.apply(this,arguments)}function G(){return(G=(0,f.Z)(function*(de,ee){const K=yield ee;return{verificationId:K.verificationId,confirm:Ae=>$n(de,K.confirm(Ae))}})).apply(this,arguments)}class Q{constructor(ee,K){this.resolver=K,this.auth=ee.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(ee){return $n(ls(this.auth),this.resolver.resolveSignIn(ee))}}class ve{constructor(ee){this._delegate=ee,this.multiFactor=O.ao(ee)}static getOrCreate(ee){return ve.USER_MAP.has(ee)||ve.USER_MAP.set(ee,new ve(ee)),ve.USER_MAP.get(ee)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(ee){return this._delegate.getIdTokenResult(ee)}getIdToken(ee){return this._delegate.getIdToken(ee)}linkAndRetrieveDataWithCredential(ee){return this.linkWithCredential(ee)}linkWithCredential(ee){var K=this;return(0,f.Z)(function*(){return $n(K.auth,O.Z(K._delegate,ee))})()}linkWithPhoneNumber(ee,K){var Ae=this;return(0,f.Z)(function*(){return z(Ae.auth,O.l(Ae._delegate,ee,K))})()}linkWithPopup(ee){var K=this;return(0,f.Z)(function*(){return $n(K.auth,O.d(K._delegate,ee,ot))})()}linkWithRedirect(ee){var K=this;return(0,f.Z)(function*(){return yield Vn(O.aE(K.auth)),O.g(K._delegate,ee,ot)})()}reauthenticateAndRetrieveDataWithCredential(ee){return this.reauthenticateWithCredential(ee)}reauthenticateWithCredential(ee){var K=this;return(0,f.Z)(function*(){return $n(K.auth,O._(K._delegate,ee))})()}reauthenticateWithPhoneNumber(ee,K){return z(this.auth,O.r(this._delegate,ee,K))}reauthenticateWithPopup(ee){return $n(this.auth,O.e(this._delegate,ee,ot))}reauthenticateWithRedirect(ee){var K=this;return(0,f.Z)(function*(){return yield Vn(O.aE(K.auth)),O.h(K._delegate,ee,ot)})()}sendEmailVerification(ee){return O.ab(this._delegate,ee)}unlink(ee){var K=this;return(0,f.Z)(function*(){return yield O.ak(K._delegate,ee),K})()}updateEmail(ee){return O.ag(this._delegate,ee)}updatePassword(ee){return O.ah(this._delegate,ee)}updatePhoneNumber(ee){return O.u(this._delegate,ee)}updateProfile(ee){return O.af(this._delegate,ee)}verifyBeforeUpdateEmail(ee,K){return O.ac(this._delegate,ee,K)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ve.USER_MAP=new WeakMap;const Z=O.ax;let ie=(()=>{class de{constructor(K,Ae){if(this.app=K,Ae.isInitialized())return this._delegate=Ae.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:He}=K.options;Z(He,"invalid-api-key",{appName:K.name}),Z(He,"invalid-api-key",{appName:K.name});const Nt="undefined"!=typeof window?ot:void 0;this._delegate=Ae.initialize({options:{persistence:Ze(He,K.name),popupRedirectResolver:Nt}}),this._delegate._updateErrorMap(O.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ve.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(K){this._delegate.languageCode=K}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(K){this._delegate.tenantId=K}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(K,Ae){O.G(this._delegate,K,Ae)}applyActionCode(K){return O.a2(this._delegate,K)}checkActionCode(K){return O.a3(this._delegate,K)}confirmPasswordReset(K,Ae){return O.a1(this._delegate,K,Ae)}createUserWithEmailAndPassword(K,Ae){var He=this;return(0,f.Z)(function*(){return $n(He._delegate,O.a5(He._delegate,K,Ae))})()}fetchProvidersForEmail(K){return this.fetchSignInMethodsForEmail(K)}fetchSignInMethodsForEmail(K){return O.aa(this._delegate,K)}isSignInWithEmailLink(K){return O.a8(this._delegate,K)}getRedirectResult(){var K=this;return(0,f.Z)(function*(){Z(Me(),K._delegate,"operation-not-supported-in-this-environment");const Ae=yield O.j(K._delegate,ot);return Ae?$n(K._delegate,Promise.resolve(Ae)):{credential:null,user:null}})()}addFrameworkForLogging(K){!function(de,ee){(0,O.aE)(de)._logFramework(ee)}(this._delegate,K)}onAuthStateChanged(K,Ae,He){const{next:Nt,error:Mt,complete:Dt}=Pe(K,Ae,He);return this._delegate.onAuthStateChanged(Nt,Mt,Dt)}onIdTokenChanged(K,Ae,He){const{next:Nt,error:Mt,complete:Dt}=Pe(K,Ae,He);return this._delegate.onIdTokenChanged(Nt,Mt,Dt)}sendSignInLinkToEmail(K,Ae){return O.a7(this._delegate,K,Ae)}sendPasswordResetEmail(K,Ae){return O.a0(this._delegate,K,Ae||void 0)}setPersistence(K){var Ae=this;return(0,f.Z)(function*(){let He;switch(function(de,ee){zn(Object.values(Nn).includes(ee),de,"invalid-persistence-type"),(0,ae.b$)()?zn(ee!==Nn.SESSION,de,"unsupported-persistence-type"):(0,ae.UG)()?zn(ee===Nn.NONE,de,"unsupported-persistence-type"):zr()?zn(ee===Nn.NONE||ee===Nn.LOCAL&&(0,ae.hl)(),de,"unsupported-persistence-type"):zn(ee===Nn.NONE||Zr(),de,"unsupported-persistence-type")}(Ae._delegate,K),K){case Nn.SESSION:He=O.a;break;case Nn.LOCAL:He=(yield O.ay(O.i)._isAvailable())?O.i:O.b;break;case Nn.NONE:He=O.L;break;default:return O.at("argument-error",{appName:Ae._delegate.name})}return Ae._delegate.setPersistence(He)})()}signInAndRetrieveDataWithCredential(K){return this.signInWithCredential(K)}signInAnonymously(){return $n(this._delegate,O.X(this._delegate))}signInWithCredential(K){return $n(this._delegate,O.Y(this._delegate,K))}signInWithCustomToken(K){return $n(this._delegate,O.$(this._delegate,K))}signInWithEmailAndPassword(K,Ae){return $n(this._delegate,O.a6(this._delegate,K,Ae))}signInWithEmailLink(K,Ae){return $n(this._delegate,O.a9(this._delegate,K,Ae))}signInWithPhoneNumber(K,Ae){return z(this._delegate,O.s(this._delegate,K,Ae))}signInWithPopup(K){var Ae=this;return(0,f.Z)(function*(){return Z(Me(),Ae._delegate,"operation-not-supported-in-this-environment"),$n(Ae._delegate,O.c(Ae._delegate,K,ot))})()}signInWithRedirect(K){var Ae=this;return(0,f.Z)(function*(){return Z(Me(),Ae._delegate,"operation-not-supported-in-this-environment"),yield Vn(Ae._delegate),O.f(Ae._delegate,K,ot)})()}updateCurrentUser(K){return this._delegate.updateCurrentUser(K)}verifyPasswordResetCode(K){return O.a4(this._delegate,K)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return de.Persistence=Nn,de})();function Pe(de,ee,K){let Ae=de;"function"!=typeof de&&({next:Ae,error:ee,complete:K}=de);const He=Ae;return{next:Mt=>He(Mt&&ve.getOrCreate(Mt)),error:ee,complete:K}}function Ze(de,ee){const K=function(de,ee){const K=hn();if(!K)return[];const Ae=O.az(Kn,de,ee);switch(K.getItem(Ae)){case Nn.NONE:return[O.L];case Nn.LOCAL:return[O.i,O.a];case Nn.SESSION:return[O.a];default:return[]}}(de,ee);if("undefined"!=typeof self&&!K.includes(O.i)&&K.push(O.i),"undefined"!=typeof window)for(const Ae of[O.b,O.a])K.includes(Ae)||K.push(Ae);return K.includes(O.L)||K.push(O.L),K}class ht{constructor(){this.providerId="phone",this._delegate=new O.P(ls($.Z.auth()))}static credential(ee,K){return O.P.credential(ee,K)}verifyPhoneNumber(ee,K){return this._delegate.verifyPhoneNumber(ee,K)}unwrap(){return this._delegate}}ht.PHONE_SIGN_IN_METHOD=O.P.PHONE_SIGN_IN_METHOD,ht.PROVIDER_ID=O.P.PROVIDER_ID;const xt=O.ax;var de;(de=$.Z).INTERNAL.registerComponent(new be.wA("auth-compat",ee=>{const K=ee.getProvider("app-compat").getImmediate(),Ae=ee.getProvider("auth");return new ie(K,Ae)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:O.A.EMAIL_SIGNIN,PASSWORD_RESET:O.A.PASSWORD_RESET,RECOVER_EMAIL:O.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:O.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:O.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:O.A.VERIFY_EMAIL}},EmailAuthProvider:O.M,FacebookAuthProvider:O.N,GithubAuthProvider:O.T,GoogleAuthProvider:O.Q,OAuthProvider:O.U,SAMLAuthProvider:O.V,PhoneAuthProvider:ht,PhoneMultiFactorGenerator:O.m,RecaptchaVerifier:class{constructor(ee,K,Ae=$.Z.app()){var He;xt(null===(He=Ae.options)||void 0===He?void 0:He.apiKey,"invalid-api-key",{appName:Ae.name}),this._delegate=new O.R(ee,K,Ae.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:O.W,Auth:ie,AuthCredential:O.H,Error:ae.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),de.registerVersion("@firebase/auth-compat","0.2.15")},7574:(Qe,Ee,V)=>{"use strict";V.d(Ee,{y:()=>H});var f=V(7393),O=V(9181),ae=V(6490),ne=V(6554),be=V(4487);var U=V(2494);let H=(()=>{class le{constructor(Ie){this._isScalar=!1,Ie&&(this._subscribe=Ie)}lift(Ie){const we=new le;return we.source=this,we.operator=Ie,we}subscribe(Ie,we,Be){const{operator:fe}=this,De=function(le,pe,Ie){if(le){if(le instanceof f.L)return le;if(le[O.b])return le[O.b]()}return le||pe||Ie?new f.L(le,pe,Ie):new f.L(ae.c)}(Ie,we,Be);if(De.add(fe?fe.call(De,this.source):this.source||U.v.useDeprecatedSynchronousErrorHandling&&!De.syncErrorThrowable?this._subscribe(De):this._trySubscribe(De)),U.v.useDeprecatedSynchronousErrorHandling&&De.syncErrorThrowable&&(De.syncErrorThrowable=!1,De.syncErrorThrown))throw De.syncErrorValue;return De}_trySubscribe(Ie){try{return this._subscribe(Ie)}catch(we){U.v.useDeprecatedSynchronousErrorHandling&&(Ie.syncErrorThrown=!0,Ie.syncErrorValue=we),function(le){for(;le;){const{closed:pe,destination:Ie,isStopped:we}=le;if(pe||we)return!1;le=Ie&&Ie instanceof f.L?Ie:null}return!0}(Ie)?Ie.error(we):console.warn(we)}}forEach(Ie,we){return new(we=W(we))((Be,fe)=>{let De;De=this.subscribe(Ne=>{try{Ie(Ne)}catch(Xe){fe(Xe),De&&De.unsubscribe()}},fe,Be)})}_subscribe(Ie){const{source:we}=this;return we&&we.subscribe(Ie)}[ne.L](){return this}pipe(...Ie){return 0===Ie.length?this:function(le){return 0===le.length?be.y:1===le.length?le[0]:function(Ie){return le.reduce((we,Be)=>Be(we),Ie)}}(Ie)(this)}toPromise(Ie){return new(Ie=W(Ie))((we,Be)=>{let fe;this.subscribe(De=>fe=De,De=>Be(De),()=>we(fe))})}}return le.create=pe=>new le(pe),le})();function W(le){if(le||(le=U.v.Promise||Promise),!le)throw new Error("no Promise impl found");return le}},6490:(Qe,Ee,V)=>{"use strict";V.d(Ee,{c:()=>O});var f=V(2494),$=V(4449);const O={closed:!0,next(ae){},error(ae){if(f.v.useDeprecatedSynchronousErrorHandling)throw ae;(0,$.z)(ae)},complete(){}}},9765:(Qe,Ee,V)=>{"use strict";V.d(Ee,{Yc:()=>be,xQ:()=>te});var f=V(7574),$=V(7393),O=V(5319),ae=V(7971),ce=V(8858),ne=V(9181);class be extends $.L{constructor(H){super(H),this.destination=H}}let te=(()=>{class U extends f.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[ne.b](){return new be(this)}lift(W){const le=new oe(this,this);return le.operator=W,le}next(W){if(this.closed)throw new ae.N;if(!this.isStopped){const{observers:le}=this,pe=le.length,Ie=le.slice();for(let we=0;we<pe;we++)Ie[we].next(W)}}error(W){if(this.closed)throw new ae.N;this.hasError=!0,this.thrownError=W,this.isStopped=!0;const{observers:le}=this,pe=le.length,Ie=le.slice();for(let we=0;we<pe;we++)Ie[we].error(W);this.observers.length=0}complete(){if(this.closed)throw new ae.N;this.isStopped=!0;const{observers:W}=this,le=W.length,pe=W.slice();for(let Ie=0;Ie<le;Ie++)pe[Ie].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(W){if(this.closed)throw new ae.N;return super._trySubscribe(W)}_subscribe(W){if(this.closed)throw new ae.N;return this.hasError?(W.error(this.thrownError),O.w.EMPTY):this.isStopped?(W.complete(),O.w.EMPTY):(this.observers.push(W),new ce.W(this,W))}asObservable(){const W=new f.y;return W.source=this,W}}return U.create=(H,W)=>new oe(H,W),U})();class oe extends te{constructor(H,W){super(),this.destination=H,this.source=W}next(H){const{destination:W}=this;W&&W.next&&W.next(H)}error(H){const{destination:W}=this;W&&W.error&&this.destination.error(H)}complete(){const{destination:H}=this;H&&H.complete&&this.destination.complete()}_subscribe(H){const{source:W}=this;return W?this.source.subscribe(H):O.w.EMPTY}}},8858:(Qe,Ee,V)=>{"use strict";V.d(Ee,{W:()=>$});var f=V(5319);class $ extends f.w{constructor(ae,ce){super(),this.subject=ae,this.subscriber=ce,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const ae=this.subject,ce=ae.observers;if(this.subject=null,!ce||0===ce.length||ae.isStopped||ae.closed)return;const ne=ce.indexOf(this.subscriber);-1!==ne&&ce.splice(ne,1)}}},7393:(Qe,Ee,V)=>{"use strict";V.d(Ee,{L:()=>be});var f=V(9105),$=V(6490),O=V(5319),ae=V(9181),ce=V(2494),ne=V(4449);class be extends O.w{constructor(U,H,W){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=$.c;break;case 1:if(!U){this.destination=$.c;break}if("object"==typeof U){U instanceof be?(this.syncErrorThrowable=U.syncErrorThrowable,this.destination=U,U.add(this)):(this.syncErrorThrowable=!0,this.destination=new te(this,U));break}default:this.syncErrorThrowable=!0,this.destination=new te(this,U,H,W)}}[ae.b](){return this}static create(U,H,W){const le=new be(U,H,W);return le.syncErrorThrowable=!1,le}next(U){this.isStopped||this._next(U)}error(U){this.isStopped||(this.isStopped=!0,this._error(U))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(U){this.destination.next(U)}_error(U){this.destination.error(U),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:U}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=U,this}}class te extends be{constructor(U,H,W,le){super(),this._parentSubscriber=U;let pe,Ie=this;(0,f.m)(H)?pe=H:H&&(pe=H.next,W=H.error,le=H.complete,H!==$.c&&(Ie=Object.create(H),(0,f.m)(Ie.unsubscribe)&&this.add(Ie.unsubscribe.bind(Ie)),Ie.unsubscribe=this.unsubscribe.bind(this))),this._context=Ie,this._next=pe,this._error=W,this._complete=le}next(U){if(!this.isStopped&&this._next){const{_parentSubscriber:H}=this;ce.v.useDeprecatedSynchronousErrorHandling&&H.syncErrorThrowable?this.__tryOrSetError(H,this._next,U)&&this.unsubscribe():this.__tryOrUnsub(this._next,U)}}error(U){if(!this.isStopped){const{_parentSubscriber:H}=this,{useDeprecatedSynchronousErrorHandling:W}=ce.v;if(this._error)W&&H.syncErrorThrowable?(this.__tryOrSetError(H,this._error,U),this.unsubscribe()):(this.__tryOrUnsub(this._error,U),this.unsubscribe());else if(H.syncErrorThrowable)W?(H.syncErrorValue=U,H.syncErrorThrown=!0):(0,ne.z)(U),this.unsubscribe();else{if(this.unsubscribe(),W)throw U;(0,ne.z)(U)}}}complete(){if(!this.isStopped){const{_parentSubscriber:U}=this;if(this._complete){const H=()=>this._complete.call(this._context);ce.v.useDeprecatedSynchronousErrorHandling&&U.syncErrorThrowable?(this.__tryOrSetError(U,H),this.unsubscribe()):(this.__tryOrUnsub(H),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(U,H){try{U.call(this._context,H)}catch(W){if(this.unsubscribe(),ce.v.useDeprecatedSynchronousErrorHandling)throw W;(0,ne.z)(W)}}__tryOrSetError(U,H,W){if(!ce.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{H.call(this._context,W)}catch(le){return ce.v.useDeprecatedSynchronousErrorHandling?(U.syncErrorValue=le,U.syncErrorThrown=!0,!0):((0,ne.z)(le),!0)}return!1}_unsubscribe(){const{_parentSubscriber:U}=this;this._context=null,this._parentSubscriber=null,U.unsubscribe()}}},5319:(Qe,Ee,V)=>{"use strict";V.d(Ee,{w:()=>ne});var f=V(9796),$=V(1555),O=V(9105);const ce=(()=>{function te(oe){return Error.call(this),this.message=oe?`${oe.length} errors occurred during unsubscription:\n${oe.map((U,H)=>`${H+1}) ${U.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=oe,this}return te.prototype=Object.create(Error.prototype),te})();class ne{constructor(oe){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,oe&&(this._ctorUnsubscribe=!0,this._unsubscribe=oe)}unsubscribe(){let oe;if(this.closed)return;let{_parentOrParents:U,_ctorUnsubscribe:H,_unsubscribe:W,_subscriptions:le}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,U instanceof ne)U.remove(this);else if(null!==U)for(let pe=0;pe<U.length;++pe)U[pe].remove(this);if((0,O.m)(W)){H&&(this._unsubscribe=void 0);try{W.call(this)}catch(pe){oe=pe instanceof ce?be(pe.errors):[pe]}}if((0,f.k)(le)){let pe=-1,Ie=le.length;for(;++pe<Ie;){const we=le[pe];if((0,$.K)(we))try{we.unsubscribe()}catch(Be){oe=oe||[],Be instanceof ce?oe=oe.concat(be(Be.errors)):oe.push(Be)}}}if(oe)throw new ce(oe)}add(oe){let U=oe;if(!oe)return ne.EMPTY;switch(typeof oe){case"function":U=new ne(oe);case"object":if(U===this||U.closed||"function"!=typeof U.unsubscribe)return U;if(this.closed)return U.unsubscribe(),U;if(!(U instanceof ne)){const le=U;U=new ne,U._subscriptions=[le]}break;default:throw new Error("unrecognized teardown "+oe+" added to Subscription.")}let{_parentOrParents:H}=U;if(null===H)U._parentOrParents=this;else if(H instanceof ne){if(H===this)return U;U._parentOrParents=[H,this]}else{if(-1!==H.indexOf(this))return U;H.push(this)}const W=this._subscriptions;return null===W?this._subscriptions=[U]:W.push(U),U}remove(oe){const U=this._subscriptions;if(U){const H=U.indexOf(oe);-1!==H&&U.splice(H,1)}}}var te;function be(te){return te.reduce((oe,U)=>oe.concat(U instanceof ce?U.errors:U),[])}ne.EMPTY=((te=new ne).closed=!0,te)},2494:(Qe,Ee,V)=>{"use strict";V.d(Ee,{v:()=>$});let f=!1;const $={Promise:void 0,set useDeprecatedSynchronousErrorHandling(O){if(O){const ae=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+ae.stack)}else f&&console.log("RxJS: Back to a better error behavior. Thank you. <3");f=O},get useDeprecatedSynchronousErrorHandling(){return f}}},5345:(Qe,Ee,V)=>{"use strict";V.d(Ee,{IY:()=>ae,Ds:()=>ne,ft:()=>te});var f=V(7393),$=V(7574),O=V(7444);class ae extends f.L{constructor(U){super(),this.parent=U}_next(U){this.parent.notifyNext(U)}_error(U){this.parent.notifyError(U),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class ne extends f.L{notifyNext(U){this.destination.next(U)}notifyError(U){this.destination.error(U)}notifyComplete(){this.destination.complete()}}function te(oe,U){if(U.closed)return;if(oe instanceof $.y)return oe.subscribe(U);let H;try{H=(0,O.s)(oe)(U)}catch(W){U.error(W)}return H}},2441:(Qe,Ee,V)=>{"use strict";V.d(Ee,{c:()=>ce,N:()=>ne});var f=V(9765),$=V(7574),O=V(5319),ae=V(1307);class ce extends $.y{constructor(H,W){super(),this.source=H,this.subjectFactory=W,this._refCount=0,this._isComplete=!1}_subscribe(H){return this.getSubject().subscribe(H)}getSubject(){const H=this._subject;return(!H||H.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let H=this._connection;return H||(this._isComplete=!1,H=this._connection=new O.w,H.add(this.source.subscribe(new be(this.getSubject(),this))),H.closed&&(this._connection=null,H=O.w.EMPTY)),H}refCount(){return(0,ae.x)()(this)}}const ne=(()=>{const U=ce.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:U._subscribe},_isComplete:{value:U._isComplete,writable:!0},getSubject:{value:U.getSubject},connect:{value:U.connect},refCount:{value:U.refCount}}})();class be extends f.Yc{constructor(H,W){super(H),this.connectable=W}_error(H){this._unsubscribe(),super._error(H)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const H=this.connectable;if(H){this.connectable=null;const W=H._connection;H._refCount=0,H._subject=null,H._connection=null,W&&W.unsubscribe()}}}},9193:(Qe,Ee,V)=>{"use strict";V.d(Ee,{E:()=>$,c:()=>O});var f=V(7574);const $=new f.y(ce=>ce.complete());function O(ce){return ce?function(ce){return new f.y(ne=>ce.schedule(()=>ne.complete()))}(ce):$}},4402:(Qe,Ee,V)=>{"use strict";V.d(Ee,{D:()=>Ie});var f=V(7574),$=V(7444),O=V(5319),ae=V(6554),be=V(4087),te=V(377),H=V(4072),W=V(9489);function Ie(we,Be){return Be?function(we,Be){if(null!=we){if(function(we){return we&&"function"==typeof we[ae.L]}(we))return function(we,Be){return new f.y(fe=>{const De=new O.w;return De.add(Be.schedule(()=>{const Ne=we[ae.L]();De.add(Ne.subscribe({next(Xe){De.add(Be.schedule(()=>fe.next(Xe)))},error(Xe){De.add(Be.schedule(()=>fe.error(Xe)))},complete(){De.add(Be.schedule(()=>fe.complete()))}}))})),De})}(we,Be);if((0,H.t)(we))return function(we,Be){return new f.y(fe=>{const De=new O.w;return De.add(Be.schedule(()=>we.then(Ne=>{De.add(Be.schedule(()=>{fe.next(Ne),De.add(Be.schedule(()=>fe.complete()))}))},Ne=>{De.add(Be.schedule(()=>fe.error(Ne)))}))),De})}(we,Be);if((0,W.z)(we))return(0,be.r)(we,Be);if(function(we){return we&&"function"==typeof we[te.hZ]}(we)||"string"==typeof we)return function(we,Be){if(!we)throw new Error("Iterable cannot be null");return new f.y(fe=>{const De=new O.w;let Ne;return De.add(()=>{Ne&&"function"==typeof Ne.return&&Ne.return()}),De.add(Be.schedule(()=>{Ne=we[te.hZ](),De.add(Be.schedule(function(){if(fe.closed)return;let Xe,dt;try{const Zt=Ne.next();Xe=Zt.value,dt=Zt.done}catch(Zt){return void fe.error(Zt)}dt?fe.complete():(fe.next(Xe),this.schedule())}))})),De})}(we,Be)}throw new TypeError((null!==we&&typeof we||we)+" is not observable")}(we,Be):we instanceof f.y?we:new f.y((0,$.s)(we))}},6693:(Qe,Ee,V)=>{"use strict";V.d(Ee,{n:()=>ae});var f=V(7574),$=V(5015),O=V(4087);function ae(ce,ne){return ne?(0,O.r)(ce,ne):new f.y((0,$.V)(ce))}},6682:(Qe,Ee,V)=>{"use strict";V.d(Ee,{T:()=>ce});var f=V(7574),$=V(4869),O=V(3282),ae=V(6693);function ce(...ne){let be=Number.POSITIVE_INFINITY,te=null,oe=ne[ne.length-1];return(0,$.K)(oe)?(te=ne.pop(),ne.length>1&&"number"==typeof ne[ne.length-1]&&(be=ne.pop())):"number"==typeof oe&&(be=ne.pop()),null===te&&1===ne.length&&ne[0]instanceof f.y?ne[0]:(0,O.J)(be)((0,ae.n)(ne,te))}},5917:(Qe,Ee,V)=>{"use strict";V.d(Ee,{of:()=>ae});var f=V(4869),$=V(6693),O=V(4087);function ae(...ce){let ne=ce[ce.length-1];return(0,f.K)(ne)?(ce.pop(),(0,O.r)(ce,ne)):(0,$.n)(ce)}},8002:(Qe,Ee,V)=>{"use strict";V.d(Ee,{U:()=>$});var f=V(7393);function $(ce,ne){return function(te){if("function"!=typeof ce)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return te.lift(new O(ce,ne))}}class O{constructor(ne,be){this.project=ne,this.thisArg=be}call(ne,be){return be.subscribe(new ae(ne,this.project,this.thisArg))}}class ae extends f.L{constructor(ne,be,te){super(ne),this.project=be,this.count=0,this.thisArg=te||this}_next(ne){let be;try{be=this.project.call(this.thisArg,ne,this.count++)}catch(te){return void this.destination.error(te)}this.destination.next(be)}}},3282:(Qe,Ee,V)=>{"use strict";V.d(Ee,{J:()=>O});var f=V(9773),$=V(4487);function O(ae=Number.POSITIVE_INFINITY){return(0,f.zg)($.y,ae)}},9773:(Qe,Ee,V)=>{"use strict";V.d(Ee,{zg:()=>ae});var f=V(8002),$=V(4402),O=V(5345);function ae(te,oe,U=Number.POSITIVE_INFINITY){return"function"==typeof oe?H=>H.pipe(ae((W,le)=>(0,$.D)(te(W,le)).pipe((0,f.U)((pe,Ie)=>oe(W,pe,le,Ie))),U)):("number"==typeof oe&&(U=oe),H=>H.lift(new ce(te,U)))}class ce{constructor(oe,U=Number.POSITIVE_INFINITY){this.project=oe,this.concurrent=U}call(oe,U){return U.subscribe(new ne(oe,this.project,this.concurrent))}}class ne extends O.Ds{constructor(oe,U,H=Number.POSITIVE_INFINITY){super(oe),this.project=U,this.concurrent=H,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(oe){this.active<this.concurrent?this._tryNext(oe):this.buffer.push(oe)}_tryNext(oe){let U;const H=this.index++;try{U=this.project(oe,H)}catch(W){return void this.destination.error(W)}this.active++,this._innerSub(U)}_innerSub(oe){const U=new O.IY(this),H=this.destination;H.add(U);const W=(0,O.ft)(oe,U);W!==U&&H.add(W)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(oe){this.destination.next(oe)}notifyComplete(){const oe=this.buffer;this.active--,oe.length>0?this._next(oe.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(Qe,Ee,V)=>{"use strict";V.d(Ee,{ht:()=>H,QV:()=>oe});var f=V(7393),$=V(9193),O=V(5917),ae=V(7574);class te{constructor(pe,Ie,we){this.kind=pe,this.value=Ie,this.error=we,this.hasValue="N"===pe}observe(pe){switch(this.kind){case"N":return pe.next&&pe.next(this.value);case"E":return pe.error&&pe.error(this.error);case"C":return pe.complete&&pe.complete()}}do(pe,Ie,we){switch(this.kind){case"N":return pe&&pe(this.value);case"E":return Ie&&Ie(this.error);case"C":return we&&we()}}accept(pe,Ie,we){return pe&&"function"==typeof pe.next?this.observe(pe):this.do(pe,Ie,we)}toObservable(){switch(this.kind){case"N":return(0,O.of)(this.value);case"E":return le=this.error,new ae.y(Ie=>Ie.error(le));case"C":return(0,$.c)()}var le;throw new Error("unexpected notification kind value")}static createNext(pe){return void 0!==pe?new te("N",pe):te.undefinedValueNotification}static createError(pe){return new te("E",void 0,pe)}static createComplete(){return te.completeNotification}}function oe(le,pe=0){return function(we){return we.lift(new U(le,pe))}}te.completeNotification=new te("C"),te.undefinedValueNotification=new te("N",void 0);class U{constructor(pe,Ie=0){this.scheduler=pe,this.delay=Ie}call(pe,Ie){return Ie.subscribe(new H(pe,this.scheduler,this.delay))}}class H extends f.L{constructor(pe,Ie,we=0){super(pe),this.scheduler=Ie,this.delay=we}static dispatch(pe){const{notification:Ie,destination:we}=pe;Ie.observe(we),this.unsubscribe()}scheduleMessage(pe){this.destination.add(this.scheduler.schedule(H.dispatch,this.delay,new W(pe,this.destination)))}_next(pe){this.scheduleMessage(te.createNext(pe))}_error(pe){this.scheduleMessage(te.createError(pe)),this.unsubscribe()}_complete(){this.scheduleMessage(te.createComplete()),this.unsubscribe()}}class W{constructor(pe,Ie){this.notification=pe,this.destination=Ie}}},1307:(Qe,Ee,V)=>{"use strict";V.d(Ee,{x:()=>$});var f=V(7393);function $(){return function(ne){return ne.lift(new O(ne))}}class O{constructor(ne){this.connectable=ne}call(ne,be){const{connectable:te}=this;te._refCount++;const oe=new ae(ne,te),U=be.subscribe(oe);return oe.closed||(oe.connection=te.connect()),U}}class ae extends f.L{constructor(ne,be){super(ne),this.connectable=be}_unsubscribe(){const{connectable:ne}=this;if(!ne)return void(this.connection=null);this.connectable=null;const be=ne._refCount;if(be<=0)return void(this.connection=null);if(ne._refCount=be-1,be>1)return void(this.connection=null);const{connection:te}=this,oe=ne._connection;this.connection=null,oe&&(!te||oe===te)&&oe.unsubscribe()}}},8819:(Qe,Ee,V)=>{"use strict";V.d(Ee,{B:()=>be});var f=V(2441);var ae=V(1307),ce=V(9765);function ne(){return new ce.xQ}function be(){return te=>(0,ae.x)()(function(te,oe){return function(H){let W;W="function"==typeof te?te:function(){return te};const le=Object.create(H,f.N);return le.source=H,le.subjectFactory=W,le}}(ne)(te))}},3101:(Qe,Ee,V)=>{"use strict";V.d(Ee,{R:()=>Be});var f=V(7574);let $=1;const O=Promise.resolve(),ae={};function ce(De){return De in ae&&(delete ae[De],!0)}const ne={setImmediate(De){const Ne=$++;return ae[Ne]=!0,O.then(()=>ce(Ne)&&De()),Ne},clearImmediate(De){ce(De)}};var te=V(6465),U=V(6102);const le=new class extends U.v{flush(Ne){this.active=!0,this.scheduled=void 0;const{actions:Xe}=this;let dt,Zt=-1,Vt=Xe.length;Ne=Ne||Xe.shift();do{if(dt=Ne.execute(Ne.state,Ne.delay))break}while(++Zt<Vt&&(Ne=Xe.shift()));if(this.active=!1,dt){for(;++Zt<Vt&&(Ne=Xe.shift());)Ne.unsubscribe();throw dt}}}(class extends te.o{constructor(Ne,Xe){super(Ne,Xe),this.scheduler=Ne,this.work=Xe}requestAsyncId(Ne,Xe,dt=0){return null!==dt&&dt>0?super.requestAsyncId(Ne,Xe,dt):(Ne.actions.push(this),Ne.scheduled||(Ne.scheduled=ne.setImmediate(Ne.flush.bind(Ne,null))))}recycleAsyncId(Ne,Xe,dt=0){if(null!==dt&&dt>0||null===dt&&this.delay>0)return super.recycleAsyncId(Ne,Xe,dt);0===Ne.actions.length&&(ne.clearImmediate(Xe),Ne.scheduled=void 0)}});var pe=V(9796);class we extends f.y{constructor(Ne,Xe=0,dt=le){var De;super(),this.source=Ne,this.delayTime=Xe,this.scheduler=dt,(!(!(0,pe.k)(De=Xe)&&De-parseFloat(De)+1>=0)||Xe<0)&&(this.delayTime=0),(!dt||"function"!=typeof dt.schedule)&&(this.scheduler=le)}static create(Ne,Xe=0,dt=le){return new we(Ne,Xe,dt)}static dispatch(Ne){const{source:Xe,subscriber:dt}=Ne;return this.add(Xe.subscribe(dt))}_subscribe(Ne){return this.scheduler.schedule(we.dispatch,this.delayTime,{source:this.source,subscriber:Ne})}}function Be(De,Ne=0){return function(dt){return dt.lift(new fe(De,Ne))}}class fe{constructor(Ne,Xe){this.scheduler=Ne,this.delay=Xe}call(Ne,Xe){return new we(Xe,this.delay,this.scheduler).subscribe(Ne)}}},3342:(Qe,Ee,V)=>{"use strict";V.d(Ee,{b:()=>ae});var f=V(7393);function $(){}var O=V(9105);function ae(be,te,oe){return function(H){return H.lift(new ce(be,te,oe))}}class ce{constructor(te,oe,U){this.nextOrObserver=te,this.error=oe,this.complete=U}call(te,oe){return oe.subscribe(new ne(te,this.nextOrObserver,this.error,this.complete))}}class ne extends f.L{constructor(te,oe,U,H){super(te),this._tapNext=$,this._tapError=$,this._tapComplete=$,this._tapError=U||$,this._tapComplete=H||$,(0,O.m)(oe)?(this._context=this,this._tapNext=oe):oe&&(this._context=oe,this._tapNext=oe.next||$,this._tapError=oe.error||$,this._tapComplete=oe.complete||$)}_next(te){try{this._tapNext.call(this._context,te)}catch(oe){return void this.destination.error(oe)}this.destination.next(te)}_error(te){try{this._tapError.call(this._context,te)}catch(oe){return void this.destination.error(oe)}this.destination.error(te)}_complete(){try{this._tapComplete.call(this._context)}catch(te){return void this.destination.error(te)}return this.destination.complete()}}},4087:(Qe,Ee,V)=>{"use strict";V.d(Ee,{r:()=>O});var f=V(7574),$=V(5319);function O(ae,ce){return new f.y(ne=>{const be=new $.w;let te=0;return be.add(ce.schedule(function(){te!==ae.length?(ne.next(ae[te++]),ne.closed||be.add(this.schedule())):ne.complete()})),be})}},6465:(Qe,Ee,V)=>{"use strict";V.d(Ee,{o:()=>O});var f=V(5319);class $ extends f.w{constructor(ce,ne){super()}schedule(ce,ne=0){return this}}class O extends ${constructor(ce,ne){super(ce,ne),this.scheduler=ce,this.work=ne,this.pending=!1}schedule(ce,ne=0){if(this.closed)return this;this.state=ce;const be=this.id,te=this.scheduler;return null!=be&&(this.id=this.recycleAsyncId(te,be,ne)),this.pending=!0,this.delay=ne,this.id=this.id||this.requestAsyncId(te,this.id,ne),this}requestAsyncId(ce,ne,be=0){return setInterval(ce.flush.bind(ce,this),be)}recycleAsyncId(ce,ne,be=0){if(null!==be&&this.delay===be&&!1===this.pending)return ne;clearInterval(ne)}execute(ce,ne){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const be=this._execute(ce,ne);if(be)return be;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ce,ne){let te,be=!1;try{this.work(ce)}catch(oe){be=!0,te=!!oe&&oe||new Error(oe)}if(be)return this.unsubscribe(),te}_unsubscribe(){const ce=this.id,ne=this.scheduler,be=ne.actions,te=be.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==te&&be.splice(te,1),null!=ce&&(this.id=this.recycleAsyncId(ne,ce,null)),this.delay=null}}},6102:(Qe,Ee,V)=>{"use strict";V.d(Ee,{v:()=>$});let f=(()=>{class O{constructor(ce,ne=O.now){this.SchedulerAction=ce,this.now=ne}schedule(ce,ne=0,be){return new this.SchedulerAction(this,ce).schedule(be,ne)}}return O.now=()=>Date.now(),O})();class $ extends f{constructor(ae,ce=f.now){super(ae,()=>$.delegate&&$.delegate!==this?$.delegate.now():ce()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(ae,ce=0,ne){return $.delegate&&$.delegate!==this?$.delegate.schedule(ae,ce,ne):super.schedule(ae,ce,ne)}flush(ae){const{actions:ce}=this;if(this.active)return void ce.push(ae);let ne;this.active=!0;do{if(ne=ae.execute(ae.state,ae.delay))break}while(ae=ce.shift());if(this.active=!1,ne){for(;ae=ce.shift();)ae.unsubscribe();throw ne}}}},3637:(Qe,Ee,V)=>{"use strict";V.d(Ee,{z:()=>O,P:()=>ae});var f=V(6465);const O=new(V(6102).v)(f.o),ae=O},7771:(Qe,Ee,V)=>{"use strict";V.d(Ee,{c:()=>ne,N:()=>ce});var f=V(6465),O=V(6102);const ce=new class extends O.v{}(class extends f.o{constructor(te,oe){super(te,oe),this.scheduler=te,this.work=oe}schedule(te,oe=0){return oe>0?super.schedule(te,oe):(this.delay=oe,this.state=te,this.scheduler.flush(this),this)}execute(te,oe){return oe>0||this.closed?super.execute(te,oe):this._execute(te,oe)}requestAsyncId(te,oe,U=0){return null!==U&&U>0||null===U&&this.delay>0?super.requestAsyncId(te,oe,U):te.flush(this)}}),ne=ce},377:(Qe,Ee,V)=>{"use strict";V.d(Ee,{hZ:()=>$});const $="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(Qe,Ee,V)=>{"use strict";V.d(Ee,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(Qe,Ee,V)=>{"use strict";V.d(Ee,{b:()=>f});const f="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(Qe,Ee,V)=>{"use strict";V.d(Ee,{N:()=>$});const $=(()=>{function O(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return O.prototype=Object.create(Error.prototype),O})()},4449:(Qe,Ee,V)=>{"use strict";function f($){setTimeout(()=>{throw $},0)}V.d(Ee,{z:()=>f})},4487:(Qe,Ee,V)=>{"use strict";function f($){return $}V.d(Ee,{y:()=>f})},9796:(Qe,Ee,V)=>{"use strict";V.d(Ee,{k:()=>f});const f=Array.isArray||($=>$&&"number"==typeof $.length)},9489:(Qe,Ee,V)=>{"use strict";V.d(Ee,{z:()=>f});const f=$=>$&&"number"==typeof $.length&&"function"!=typeof $},9105:(Qe,Ee,V)=>{"use strict";function f($){return"function"==typeof $}V.d(Ee,{m:()=>f})},1555:(Qe,Ee,V)=>{"use strict";function f($){return null!==$&&"object"==typeof $}V.d(Ee,{K:()=>f})},4072:(Qe,Ee,V)=>{"use strict";function f($){return!!$&&"function"!=typeof $.subscribe&&"function"==typeof $.then}V.d(Ee,{t:()=>f})},4869:(Qe,Ee,V)=>{"use strict";function f($){return $&&"function"==typeof $.schedule}V.d(Ee,{K:()=>f})},7444:(Qe,Ee,V)=>{"use strict";V.d(Ee,{s:()=>H});var f=V(5015),$=V(4449),ae=V(377),ne=V(6554),te=V(9489),oe=V(4072),U=V(1555);const H=W=>{if(W&&"function"==typeof W[ne.L])return(W=>le=>{const pe=W[ne.L]();if("function"!=typeof pe.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return pe.subscribe(le)})(W);if((0,te.z)(W))return(0,f.V)(W);if((0,oe.t)(W))return(W=>le=>(W.then(pe=>{le.closed||(le.next(pe),le.complete())},pe=>le.error(pe)).then(null,$.z),le))(W);if(W&&"function"==typeof W[ae.hZ])return(W=>le=>{const pe=W[ae.hZ]();for(;;){let Ie;try{Ie=pe.next()}catch(we){return le.error(we),le}if(Ie.done){le.complete();break}if(le.next(Ie.value),le.closed)break}return"function"==typeof pe.return&&le.add(()=>{pe.return&&pe.return()}),le})(W);{const pe=`You provided ${(0,U.K)(W)?"an invalid object":`'${W}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(pe)}}},5015:(Qe,Ee,V)=>{"use strict";V.d(Ee,{V:()=>f});const f=$=>O=>{for(let ae=0,ce=$.length;ae<ce&&!O.closed;ae++)O.next($[ae]);O.complete()}},6944:(Qe,Ee,V)=>{"use strict";var f=V(7716);let $=null;function O(){return $}const be=new f.OlP("DocumentToken");let te=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,f.Yz7)({factory:oe,token:n,providedIn:"platform"}),n})();function oe(){return(0,f.LFG)(H)}const U=new f.OlP("Location Initialized");let H=(()=>{class n extends te{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){W()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){W()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(be))},n.\u0275prov=(0,f.Yz7)({factory:le,token:n,providedIn:"platform"}),n})();function W(){return!!window.history.pushState}function le(){return new H((0,f.LFG)(be))}function pe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ie(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function we(n){return n&&"?"!==n[0]?"?"+n:n}let Be=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,f.Yz7)({factory:fe,token:n,providedIn:"root"}),n})();function fe(n){const e=(0,f.LFG)(be).location;return new Ne((0,f.LFG)(te),e&&e.origin||"")}const De=new f.OlP("appBaseHref");let Ne=(()=>{class n extends Be{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return pe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+we(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const d=this.prepareExternalUrl(o+we(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){const d=this.prepareExternalUrl(o+we(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(te),f.LFG(De,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Xe=(()=>{class n extends Be{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=pe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let d=this.prepareExternalUrl(o+we(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){let d=this.prepareExternalUrl(o+we(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(te),f.LFG(De,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),dt=(()=>{class n{constructor(t,r){this._subject=new f.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Ie(vt(o)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+we(r))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,vt(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+we(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+we(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Be),f.LFG(te))},n.normalizeQueryParams=we,n.joinWithSlash=pe,n.stripTrailingSlash=Ie,n.\u0275prov=(0,f.Yz7)({factory:Zt,token:n,providedIn:"root"}),n})();function Zt(){return new dt((0,f.LFG)(Be),(0,f.LFG)(te))}function vt(n){return n.replace(/\/index.html$/,"")}var $e=(()=>(($e=$e||{})[$e.Zero=0]="Zero",$e[$e.One=1]="One",$e[$e.Two=2]="Two",$e[$e.Few=3]="Few",$e[$e.Many=4]="Many",$e[$e.Other=5]="Other",$e))();const zr=f.kL8;class bi{}let _r=(()=>{class n extends bi{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(zr(r||this.locale)(t)){case $e.Zero:return"zero";case $e.One:return"one";case $e.Two:return"two";case $e.Few:return"few";case $e.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.soG))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Ys=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new bc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){fa("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){fa("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class bc{constructor(){this.$implicit=null,this.ngIf=null}}function fa(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}let To=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[{provide:bi,useClass:_r}]}),n})();function _a(n){return"server"===n}let Do=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new wh((0,f.LFG)(be),window)}),n})();class wh{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=al(this.window.history)||al(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function al(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ao extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new Ao,$||($=n)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(So=So||document.querySelector("base"),So?So.getAttribute("href"):null);return null==t?null:function(n){en=en||document.createElement("a"),en.setAttribute("href",n);const e=en.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){So=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let en,So=null;const xo=new f.OlP("TRANSITION_ID"),Ti=[{provide:f.ip1,useFactory:function(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[xo,be,f.zs3],multi:!0}];class ar{static init(){(0,f.VLi)(new ar)}addToWindow(e){f.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const o=f.dqk.getAllAngularTestabilities();let u=o.length,d=!1;const p=function(y){d=d||y,u--,0==u&&r(d)};o.forEach(function(y){y.whenStable(p)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Nc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Ss=new f.OlP("EventManagerPlugins");let Se=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const d=o[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ss),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Ft{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let lu=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Dn=(()=>{class n extends lu{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(cu),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(cu))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(be))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function cu(n){O().remove(n)}const xs={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Qr=/%COMP%/g;function hr(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?hr(n,o,t):(o=o.replace(Qr,n),t.push(o))}return t}function Jr(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ds=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Ar(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case f.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new hu(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case f.ifc.ShadowDom:return new Uc(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=hr(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Se),f.LFG(Dn),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Ar{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(xs[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=xs[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=xs[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,o&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Jr(r)):this.eventManager.addEventListener(e,t,Jr(r))}}class hu extends Ar{constructor(e,t,r,o){super(e),this.component=r;const u=hr(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr="_ngcontent-%COMP%".replace(Qr,o+"-"+r.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(Qr,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Uc extends Ar{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=hr(o.id,o.styles,[]);for(let d=0;d<u.length;d++){const p=document.createElement("style");p.textContent=u[d],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let ko=(()=>{class n extends Ft{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(be))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Oo=["alt","control","meta","shift"],jc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Sr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Dh={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let pl=(()=>{class n extends Ft{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let d="";if(Oo.forEach(y=>{const w=r.indexOf(y);w>-1&&(r.splice(w,1),d+=y+".")}),d+=u,0!=r.length||0===u.length)return null;const p={};return p.domEventName=o,p.fullKey=d,p}static getEventFullKey(t){let r="",o=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Sr.hasOwnProperty(e)&&(e=Sr[e]))}return jc[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Oo.forEach(u=>{u!=o&&Dh[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(be))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Di=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function(){Ao.makeCurrent(),ar.init()},multi:!0},{provide:be,useFactory:function(){return(0,f.RDi)(document),document},deps:[]}]),ml=[[],{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function(){return new f.qLn},deps:[]},{provide:Ss,useClass:ko,multi:!0,deps:[be,f.R0b,f.Lbi]},{provide:Ss,useClass:pl,multi:!0,deps:[be]},[],{provide:ds,useClass:ds,deps:[Se,Dn,f.AFp]},{provide:f.FYo,useExisting:ds},{provide:lu,useExisting:Dn},{provide:Dn,useClass:Dn,deps:[be]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b]},{provide:Se,useClass:Se,deps:[Ss,f.R0b]},{provide:class{},useClass:Nc,deps:[]},[]];let Rp=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:xo,useExisting:f.AFp},Ti]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(n,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:ml,imports:[To,f.hGG]}),n})();"undefined"!=typeof window&&window;const yl_firebase={apiKey:"AIzaSyACAe5MLGpzHwnmmudbq_G6PYxdFGJudZs",authDomain:"portal-ae5ef.firebaseapp.com",projectId:"portal-ae5ef",storageBucket:"portal-ae5ef.appspot.com",messagingSenderId:"172240261404",appId:"1:172240261404:web:2a4c96f816f170a8bdaad9",measurementId:"G-JLDG13LNCR"};var Bt=V(4402),at=V(5917),hs=V(9765),Aa=V(7971);class hi extends hs.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Aa.N;return this._value}next(e){super.next(this._value=e)}}var Wc=V(4869),Ns=V(9796),Xr=V(7393);class Zc extends Xr.L{notifyNext(e,t,r,o,u){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class vl extends Xr.L{constructor(e,t,r){super(),this.parent=e,this.outerValue=t,this.outerIndex=r,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var vu=V(7444),yr=V(7574);function Eu(n,e,t,r,o=new vl(n,t,r)){if(!o.closed)return e instanceof yr.y?e.subscribe(o):(0,vu.s)(e)(o)}var Jn=V(6693);const Ms={};class wu{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new bu(e,this.resultSelector))}}class bu extends Zc{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(Ms),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let r=0;r<t;r++)this.add(Eu(this,e[r],void 0,r))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,r){const o=this.values,d=this.toRespond?o[r]===Ms?--this.toRespond:this.toRespond:0;o[r]=t,0===d&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}const ks=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();var Si=V(3282);function so(...n){return(0,Si.J)(1)((0,at.of)(...n))}var Ur=V(9193);function Uo(n){return new yr.y(e=>{let t;try{t=n()}catch(o){return void e.error(o)}return(t?(0,Bt.D)(t):(0,Ur.c)()).subscribe(e)})}var xh=V(2441),St=V(8002),Sa=V(5345);function lr(n,e){return"function"==typeof e?t=>t.pipe(lr((r,o)=>(0,Bt.D)(n(r,o)).pipe((0,St.U)((u,d)=>e(r,u,o,d))))):t=>t.lift(new Pn(n))}class Pn{constructor(e){this.project=e}call(e,t){return t.subscribe(new Rh(e,this.project))}}class Rh extends Sa.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const r=this.index++;try{t=this.project(e,r)}catch(o){return void this.destination.error(o)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const r=new Sa.IY(this),o=this.destination;o.add(r),this.innerSubscription=(0,Sa.ft)(e,r),this.innerSubscription!==r&&o.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const Nh=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function Mh(n){return e=>0===n?(0,Ur.c)():e.lift(new s_(n))}class s_{constructor(e){if(this.total=e,this.total<0)throw new Nh}call(e,t){return t.subscribe(new sE(e,this.total))}}class sE extends Xr.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))}}function Cu(...n){const e=n[n.length-1];return(0,Wc.K)(e)?(n.pop(),t=>so(n,t,e)):t=>so(n,t)}function xa(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(o){return o.lift(new o_(n,e,t))}}class o_{constructor(e,t,r=!1){this.accumulator=e,this.seed=t,this.hasSeed=r}call(e,t){return t.subscribe(new kh(e,this.accumulator,this.seed,this.hasSeed))}}class kh extends Xr.L{constructor(e,t,r,o){super(e),this.accumulator=t,this._seed=r,this.hasSeed=o,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let r;try{r=this.accumulator(this.seed,e,t)}catch(o){this.destination.error(o)}this.seed=r,this.destination.next(r)}}function xi(n,e){return function(r){return r.lift(new Bo(n,e))}}class Bo{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new zc(e,this.predicate,this.thisArg))}}class zc extends Xr.L{constructor(e,t,r){super(e),this.predicate=t,this.thisArg=r,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}t&&this.destination.next(e)}}function wn(n){return function(t){const r=new Ra(n),o=t.lift(r);return r.caught=o}}class Ra{constructor(e){this.selector=e}call(e,t){return t.subscribe(new Na(e,this.selector,this.caught))}}class Na extends Sa.Ds{constructor(e,t,r){super(e),this.selector=t,this.caught=r}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(u){return void super.error(u)}this._unsubscribeAndRecycle();const r=new Sa.IY(this);this.add(r);const o=(0,Sa.ft)(t,r);o!==r&&this.add(o)}}}var xr=V(9773);function Cl(n,e){return(0,xr.zg)(n,e,1)}function fi(n){return function(t){return 0===n?(0,Ur.c)():t.lift(new fs(n))}}class fs{constructor(e){if(this.total=e,this.total<0)throw new Nh}call(e,t){return t.subscribe(new Ma(e,this.total))}}class Ma extends Xr.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,r=this.total,o=this.count++;t.length<r?t.push(e):t[o%r]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const r=this.count>=this.total?this.total:this.count,o=this.ring;for(let u=0;u<r;u++){const d=t++%r;e.next(o[d])}}e.complete()}}function pi(n=Op){return e=>e.lift(new Ps(n))}class Ps{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new Ph(e,this.errorFactory))}}class Ph extends Xr.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function Op(){return new ks}function oo(n=null){return e=>e.lift(new Fp(n))}class Fp{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new ka(e,this.defaultValue))}}class ka extends Xr.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var Kc=V(4487);function Ni(n,e){const t=arguments.length>=2;return r=>r.pipe(n?xi((o,u)=>n(o,u,r)):Kc.y,Mh(1),t?oo(e):pi(()=>new ks))}var fr=V(3342),Oh=V(1307),Fh=V(5319);class A{constructor(e){this.callback=e}call(e,t){return t.subscribe(new M(e,this.callback))}}class M extends Xr.L{constructor(e,t){super(e),this.add(new Fh.w(t))}}class B{constructor(e,t){this.id=e,this.url=t}}class re extends B{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ue extends B{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ke extends B{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Je extends B{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class gt extends B{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ft extends B{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Jt extends B{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class bt extends B{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mi extends B{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xn{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Pa{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Iu{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Il{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qi{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ps{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gs{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const zt="primary";class er{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function jo(n){return new er(n)}const oE="ngNavigationCancelingError";function Ji(n){const e=Error("NavigationCancelingError: "+n);return e[oE]=!0,e}function aE(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const d=r[u],p=n[u];if(d.startsWith(":"))o[d.substring(1)]=p;else if(d!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Xi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!Lp(n[o],e[o]))return!1;return!0}function Lp(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function Tu(n){return Array.prototype.concat.apply([],n)}function Os(n){return n.length>0?n[n.length-1]:null}function jn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ao(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,Bt.D)(Promise.resolve(n)):(0,at.of)(n)}const Qc={exact:function u_(n,e,t){if(!Du(n.segments,e.segments)||!Xc(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!u_(n.children[r],e.children[r],t))return!1;return!0},subset:Oa},Jc={exact:function(n,e){return Xi(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Lp(n[t],e[t]))},ignored:()=>!0};function Vp(n,e,t){return Qc[t.paths](n.root,e.root,t.matrixParams)&&Jc[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Oa(n,e,t){return l_(n,e,e.segments,t)}function l_(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!Du(o,t)||e.hasChildren()||!Xc(o,t,r))}if(n.segments.length===t.length){if(!Du(n.segments,t)||!Xc(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!Oa(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Du(n.segments,o)&&Xc(n.segments,o,r)&&n.children[zt])&&l_(n.children[zt],e,u,r)}}function Xc(n,e,t){return e.every((r,o)=>Jc[t](n[o].parameters,r.parameters))}class uo{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=jo(this.queryParams)),this._queryParamMap}toString(){return Dl.serialize(this)}}class Kt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,jn(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return nd(this)}}class ed{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=jo(this.parameters)),this._parameterMap}toString(){return $o(this)}}function Du(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Au{}class td{parse(e){const t=new hE(e);return new uo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){var n;return`${`/${Su(e.root,!0)}`}${function(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${xu(t)}=${xu(o)}`).join("&"):`${xu(t)}=${xu(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${n=e.fragment,encodeURI(n)}`:""}`}}const Dl=new td;function nd(n){return n.segments.map(e=>$o(e)).join("/")}function Su(n,e){if(!n.hasChildren())return nd(n);if(e){const t=n.children[zt]?Su(n.children[zt],!1):"",r=[];return jn(n.children,(o,u)=>{u!==zt&&r.push(`${u}:${Su(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function(n,e){let t=[];return jn(n.children,(r,o)=>{o===zt&&(t=t.concat(e(r,o)))}),jn(n.children,(r,o)=>{o!==zt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===zt?[Su(n.children[zt],!1)]:[`${o}:${Su(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[zt]?`${nd(n)}/${t[0]}`:`${nd(n)}/(${t.join("//")})`}}function uE(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xu(n){return uE(n).replace(/%3B/gi,";")}function Al(n){return uE(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function rd(n){return decodeURIComponent(n)}function $p(n){return rd(n.replace(/\+/g,"%20"))}function $o(n){return`${Al(n.path)}${function(n){return Object.keys(n).map(e=>`;${Al(e)}=${Al(n[e])}`).join("")}(n.parameters)}`}const cE=/^[^\/()?;=#]+/;function Bh(n){const e=n.match(cE);return e?e[0]:""}const dE=/^[^=?&#]+/,Sl=/^[^?&#]+/;class hE{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Kt([],{}):new Kt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[zt]=new Kt(e,t)),r}parseSegment(){const e=Bh(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new ed(rd(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Bh(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=Bh(this.remaining);o&&(r=o,this.capture(r))}e[rd(t)]=rd(r)}parseQueryParam(e){const t=function(n){const e=n.match(dE);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function(n){const e=n.match(Sl);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=$p(t),u=$p(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Bh(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=zt);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[zt]:new Kt([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class h_{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=id(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=id(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Hp(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Hp(e,this._root).map(t=>t.value)}}function id(n,e){if(n===e.value)return e;for(const t of e.children){const r=id(n,t);if(r)return r}return null}function Hp(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Hp(n,t);if(r.length)return r.unshift(e),r}return[]}class Go{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function xl(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class f_ extends h_{constructor(e,t){super(e),this.snapshot=t,ms(this,e)}toString(){return this.snapshot.toString()}}function p_(n,e){const t=function(n,e){const d=new Fa([],{},{},"",{},zt,e,null,n.root,-1,{});return new sd("",new Go(d,[]))}(n,e),r=new hi([new ed("",{})]),o=new hi({}),u=new hi({}),d=new hi({}),p=new hi(""),y=new Rl(r,o,d,p,u,zt,e,t.root);return y.snapshot=t.root,new f_(new Go(y,[]),t)}class Rl{constructor(e,t,r,o,u,d,p,y){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=p,this._futureSnapshot=y}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,St.U)(e=>jo(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,St.U)(e=>jo(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function fE(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Fa{constructor(e,t,r,o,u,d,p,y,w,D,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=p,this.routeConfig=y,this._urlSegment=w,this._lastPathIndex=D,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=jo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=jo(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class sd extends h_{constructor(e,t){super(t),this.url=e,ms(this,t)}toString(){return La(this._root)}}function ms(n,e){e.value._routerState=n,e.children.forEach(t=>ms(n,t))}function La(n){const e=n.children.length>0?` { ${n.children.map(La).join(", ")} } `:"";return`${n.value}${e}`}function jh(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Xi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Xi(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Xi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Xi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function od(n,e){return Xi(n.params,e.params)&&function(n,e){return Du(n,e)&&n.every((t,r)=>Xi(t.parameters,e[r].parameters))}(n.url,e.url)&&!(!n.parent!=!e.parent)&&(!n.parent||od(n.parent,e.parent))}function ad(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return ad(n,r,o);return ad(n,r)})}(n,e,t);return new Go(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return gE(e,d),d}}const r=function(n){return new Rl(new hi(n.url),new hi(n.params),new hi(n.queryParams),new hi(n.fragment),new hi(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>ad(n,u));return new Go(r,o)}}function gE(n,e){if(n.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=n.value;for(let t=0;t<n.children.length;++t)gE(n.children[t],e.children[t])}function Nl(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Hh(n){return"object"==typeof n&&null!=n&&n.outlets}function _E(n,e,t,r,o){let u={};return r&&jn(r,(d,p)=>{u[p]=Array.isArray(d)?d.map(y=>`${y}`):`${d}`}),new uo(t.root===n?e:E(t.root,n,e),u,o)}function E(n,e,t){const r={};return jn(n.children,(o,u)=>{r[u]=o===e?t:E(o,e,t)}),new Kt(n.segments,r)}class g{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Nl(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(Hh);if(o&&o!==Os(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class b{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function _e(n,e,t){if(n||(n=new Kt([],{})),0===n.segments.length&&n.hasChildren())return je(n,e,t);const r=function(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const d=n.segments[o],p=t[r];if(Hh(p))break;const y=`${p}`,w=r<t.length-1?t[r+1]:null;if(o>0&&void 0===y)break;if(y&&w&&"object"==typeof w&&void 0===w.outlets){if(!Rr(y,w,d))return u;r+=2}else{if(!Rr(y,{},d))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Kt(n.segments.slice(0,r.pathIndex),{});return u.children[zt]=new Kt(n.segments.slice(r.pathIndex),n.children),je(u,0,o)}return r.match&&0===o.length?new Kt(n.segments,{}):r.match&&!n.hasChildren()?ze(n,e,t):r.match?je(n,0,o):ze(n,e,t)}function je(n,e,t){if(0===t.length)return new Kt(n.segments,{});{const r=function(n){return Hh(n[0])?n[0].outlets:{[zt]:n}}(t),o={};return jn(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[d]=_e(n.children[d],e,u))}),jn(n.children,(u,d)=>{void 0===r[d]&&(o[d]=u)}),new Kt(n.segments,o)}}function ze(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(Hh(u)){const y=pn(u.outlets);return new Kt(r,y)}if(0===o&&Nl(t[0])){r.push(new ed(n.segments[e].path,An(t[0]))),o++;continue}const d=Hh(u)?u.outlets[zt]:`${u}`,p=o<t.length-1?t[o+1]:null;d&&p&&Nl(p)?(r.push(new ed(d,An(p))),o+=2):(r.push(new ed(d,{})),o++)}return new Kt(r,{})}function pn(n){const e={};return jn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=ze(new Kt([],{}),0,t))}),e}function An(n){const e={};return jn(n,(t,r)=>e[r]=`${t}`),e}function Rr(n,e,t){return n==t.path&&Xi(e,t.parameters)}class Gh{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),jh(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=xl(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,o[d],r),delete o[d]}),jn(o,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet);if(r&&r.outlet){const o=r.outlet.detach(),u=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:u})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=xl(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=xl(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new ps(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Il(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(jh(o),o===u)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const p=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(p.contexts),d.attachRef=p.componentRef,d.route=p.route.value,d.outlet&&d.outlet.attach(p.componentRef,p.route.value),qh(p.route)}else{const p=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),y=p?p.module.componentFactoryResolver:null;d.attachRef=null,d.route=o,d.resolver=y,d.outlet&&d.outlet.activateWith(o,y),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}function qh(n){jh(n.value),n.children.forEach(qh)}class Wh{constructor(e,t){this.routes=e,this.module=t}}function lo(n){return"function"==typeof n}function Ru(n){return n instanceof uo}const Ml=Symbol("INITIAL_VALUE");function Nr(){return lr(n=>function(...n){let e,t;return(0,Wc.K)(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&(0,Ns.k)(n[0])&&(n=n[0]),(0,Jn.n)(n,t).lift(new wu(e))}(n.map(e=>e.pipe(Mh(1),Cu(Ml)))).pipe(xa((e,t)=>{let r=!1;return t.reduce((o,u,d)=>o!==Ml?o:(u===Ml&&(r=!0),r||!1!==u&&d!==t.length-1&&!Ru(u)?o:u),e)},Ml),xi(e=>e!==Ml),(0,St.U)(e=>Ru(e)?e:!0===e),Mh(1)))}let zh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},directives:function(){return[ef]},encapsulation:2}),n})();function y_(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Ox(r,Fx(e,r))}}function Ox(n,e){n.children&&y_(n.children,e)}function Fx(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function v_(n){const e=n.children&&n.children.map(v_),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==zt&&(t.component=zh),t}function co(n){return n.outlet||zt}function vE(n,e){const t=n.filter(r=>co(r)===e);return t.push(...n.filter(r=>co(r)!==e)),t}const KC={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Wp(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},KC):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const u=(e.matcher||aE)(t,n,e);if(!u)return Object.assign({},KC);const d={};jn(u.posParams,(y,w)=>{d[w]=y.path});const p=u.consumed.length>0?Object.assign(Object.assign({},d),u.consumed[u.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:u.consumed,lastChild:u.consumed.length,parameters:p,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function E_(n,e,t,r,o="corrected"){if(t.length>0&&function(n,e,t){return t.some(r=>Zp(n,e,r)&&co(r)!==zt)}(n,t,r)){const d=new Kt(e,function(n,e,t,r){const o={};o[zt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&co(u)!==zt){const d=new Kt([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[co(u)]=d}return o}(n,e,r,new Kt(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(r=>Zp(n,e,r))}(n,t,r)){const d=new Kt(n.segments,function(n,e,t,r,o,u){const d={};for(const p of r)if(Zp(n,t,p)&&!o[co(p)]){const y=new Kt([],{});y._sourceSegment=n,y._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[co(p)]=y}return Object.assign(Object.assign({},o),d)}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new Kt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Zp(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function QC(n,e,t,r){return!!(co(n)===r||r!==zt&&Zp(e,t,n))&&("**"===n.path||Wp(e,n,t).matched)}function Ux(n,e,t){return 0===e.length&&!n.children[t]}class Kh{constructor(e){this.segmentGroup=e||null}}class zp{constructor(e){this.urlTree=e}}function w_(n){return new yr.y(e=>e.error(new Kh(n)))}function JC(n){return new yr.y(e=>e.error(new zp(n)))}function Yh(n){return new yr.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class $x{constructor(e,t,r,o,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(f.h0i)}apply(){const e=E_(this.urlTree.root,[],[],this.config).segmentGroup,t=new Kt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,zt).pipe((0,St.U)(u=>this.createUrlTree(wE(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(wn(u=>{if(u instanceof zp)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Kh?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,zt).pipe((0,St.U)(o=>this.createUrlTree(wE(o),e.queryParams,e.fragment))).pipe(wn(o=>{throw o instanceof Kh?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new Kt([],{[zt]:e}):e;return new uo(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,St.U)(u=>new Kt([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,Bt.D)(o).pipe(Cl(u=>{const d=r.children[u],p=vE(t,u);return this.expandSegmentGroup(e,p,d,u).pipe((0,St.U)(y=>({segment:y,outlet:u})))}),xa((u,d)=>(u[d.outlet]=d.segment,u),{}),function(n,e){const t=arguments.length>=2;return r=>r.pipe(n?xi((o,u)=>n(o,u,r)):Kc.y,fi(1),t?oo(e):pi(()=>new ks))}())}expandSegment(e,t,r,o,u,d){return(0,Bt.D)(r).pipe(Cl(p=>this.expandSegmentAgainstRoute(e,t,r,p,o,u,d).pipe(wn(w=>{if(w instanceof Kh)return(0,at.of)(null);throw w}))),Ni(p=>!!p),wn((p,y)=>{if(p instanceof ks||"EmptyError"===p.name){if(Ux(t,o,u))return(0,at.of)(new Kt([],{}));throw new Kh(t)}throw p}))}expandSegmentAgainstRoute(e,t,r,o,u,d,p){return QC(o,t,u,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,d):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d):w_(t):w_(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?JC(u):this.lineralizeSegments(r,u).pipe((0,xr.zg)(d=>{const p=new Kt(d,{});return this.expandSegment(e,p,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){const{matched:p,consumedSegments:y,lastChild:w,positionalParamSegments:D}=Wp(t,o,u);if(!p)return w_(t);const S=this.applyRedirectCommands(y,o.redirectTo,D);return o.redirectTo.startsWith("/")?JC(S):this.lineralizeSegments(o,S).pipe((0,xr.zg)(P=>this.expandSegment(e,t,r,P.concat(u.slice(w)),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?(0,at.of)(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,St.U)(P=>(r._loadedConfig=P,new Kt(o,{})))):(0,at.of)(new Kt(o,{}));const{matched:d,consumedSegments:p,lastChild:y}=Wp(t,r,o);if(!d)return w_(t);const w=o.slice(y);return this.getChildConfig(e,r,o).pipe((0,xr.zg)(S=>{const P=S.module,j=S.routes,{segmentGroup:Y,slicedSegments:ye}=E_(t,p,w,j),xe=new Kt(Y.segments,Y.children);if(0===ye.length&&xe.hasChildren())return this.expandChildren(P,j,xe).pipe((0,St.U)(st=>new Kt(p,st)));if(0===j.length&&0===ye.length)return(0,at.of)(new Kt(p,{}));const ct=co(r)===u;return this.expandSegment(P,xe,j,ye,ct?zt:u,!0).pipe((0,St.U)(nt=>new Kt(p.concat(nt.segments),nt.children)))}))}getChildConfig(e,t,r){return t.children?(0,at.of)(new Wh(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,at.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,xr.zg)(o=>{return o?this.configLoader.load(e.injector,t).pipe((0,St.U)(u=>(t._loadedConfig=u,u))):(n=t,new yr.y(e=>e.error(Ji(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):(0,at.of)(new Wh([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;if(!o||0===o.length)return(0,at.of)(!0);const u=o.map(d=>{const p=e.get(d);let y;if((n=p)&&lo(n.canLoad))y=p.canLoad(t,r);else{if(!lo(p))throw new Error("Invalid CanLoad guard");y=p(t,r)}var n;return ao(y)});return(0,at.of)(u).pipe(Nr(),(0,fr.b)(d=>{if(!Ru(d))return;const p=Ji(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw p.url=d,p}),(0,St.U)(d=>!0===d))}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return(0,at.of)(r);if(o.numberOfChildren>1||!o.children[zt])return Yh(e.redirectTo);o=o.children[zt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new uo(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return jn(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const p=o.substring(1);r[u]=t[p]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let d={};return jn(t.children,(p,y)=>{d[y]=this.createSegmentGroup(e,p,r,o)}),new Kt(u,d)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function wE(n){const e={};for(const r of Object.keys(n.children)){const u=wE(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function(n){if(1===n.numberOfChildren&&n.children[zt]){const e=n.children[zt];return new Kt(n.segments.concat(e.segments),e.children)}return n}(new Kt(n.segments,e))}class Fs{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Kp{constructor(e,t){this.component=e,this.route=t}}function Gx(n,e,t){const r=n._root;return Qh(r,e?e._root:null,t,[r.value])}function Yp(n,e,t){const r=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Qh(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=xl(e);return n.children.forEach(d=>{(function(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const y=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Du(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Du(n.url,e.url)||!Xi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!od(n,e)||!Xi(n.queryParams,e.queryParams);case"paramsChange":default:return!od(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);y?o.canActivateChecks.push(new Fs(r)):(u.data=d.data,u._resolvedData=d._resolvedData),Qh(n,e,u.component?p?p.children:null:t,r,o),y&&p&&p.outlet&&p.outlet.isActivated&&o.canDeactivateChecks.push(new Kp(p.outlet.component,d))}else d&&Qp(e,p,o),o.canActivateChecks.push(new Fs(r)),Qh(n,null,u.component?p?p.children:null:t,r,o)})(d,u[d.value.outlet],t,r.concat([d.value]),o),delete u[d.value.outlet]}),jn(u,(d,p)=>Qp(d,t.getContext(p),o)),o}function Qp(n,e,t){const r=xl(n),o=n.value;jn(r,(u,d)=>{Qp(u,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new Kp(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class CE{}function eI(n){return new yr.y(e=>e.error(n))}class Jp{constructor(e,t,r,o,u,d){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=d}recognize(){const e=E_(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,zt);if(null===t)return null;const r=new Fa([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},zt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Go(r,t),u=new sd(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=fE(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const d=t.children[u],p=vE(e,u),y=this.processSegmentGroup(p,d,u);if(null===y)return null;r.push(...y)}const o=C_(r);return o.sort((e,t)=>e.value.outlet===zt?-1:t.value.outlet===zt?1:e.value.outlet.localeCompare(t.value.outlet)),o}processSegment(e,t,r,o){for(const u of e){const d=this.processSegmentAgainstRoute(u,t,r,o);if(null!==d)return d}return Ux(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!QC(e,t,r,o))return null;let u,d=[],p=[];if("**"===e.path){const j=r.length>0?Os(r).parameters:{};u=new Fa(r,j,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,I_(e),co(e),e.component,e,Kx(t),ud(t)+r.length,TE(e))}else{const j=Wp(t,e,r);if(!j.matched)return null;d=j.consumedSegments,p=r.slice(j.lastChild),u=new Fa(d,j.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,I_(e),co(e),e.component,e,Kx(t),ud(t)+d.length,TE(e))}const y=(n=e).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:w,slicedSegments:D}=E_(t,d,p,y.filter(j=>void 0===j.redirectTo),this.relativeLinkResolution);var n;if(0===D.length&&w.hasChildren()){const j=this.processChildren(y,w);return null===j?null:[new Go(u,j)]}if(0===y.length&&0===D.length)return[new Go(u,[])];const S=co(e)===o,P=this.processSegment(y,w,D,S?zt:o);return null===P?null:[new Go(u,P)]}}function IE(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function C_(n){const e=[],t=new Set;for(const r of n){if(!IE(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=C_(r.children);e.push(new Go(r.value,o))}return e.filter(r=>!t.has(r))}function Kx(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function ud(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function I_(n){return n.data||{}}function TE(n){return n.resolve||{}}function AE(n){return lr(e=>{const t=n(e);return t?(0,Bt.D)(t).pipe((0,St.U)(()=>e)):(0,at.of)(e)})}class iI extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Xp=new f.OlP("ROUTES");class SE{constructor(e,t,r,o){this.loader=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,St.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const d=u.create(e);return new Wh(Tu(d.injector.get(Xp,void 0,f.XFs.Self|f.XFs.Optional)).map(v_),d)}),wn(u=>{throw t._loader$=void 0,u}));return t._loader$=new xh.c(o,()=>new hs.xQ).pipe((0,Oh.x)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?(0,Bt.D)(this.loader.load(e)):ao(e()).pipe((0,xr.zg)(t=>t instanceof f.YKP?(0,at.of)(t):(0,Bt.D)(this.compiler.compileModuleAsync(t))))}}class xE{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Xh,this.attachRef=null}}class Xh{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new xE,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class sI{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function oI(n){throw n}function ld(n,e,t){return e.parse("/")}function RE(n,e){return(0,at.of)(null)}const aI={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},rR={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let vr=(()=>{class n{constructor(t,r,o,u,d,p,y,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new hs.xQ,this.errorHandler=oI,this.malformedUriErrorHandler=ld,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:RE,afterPreactivation:RE},this.urlHandlingStrategy=new sI,this.routeReuseStrategy=new iI,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(f.h0i),this.console=d.get(f.c2e);const P=d.get(f.R0b);this.isNgZoneEnabled=P instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=new uo(new Kt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new SE(p,y,j=>this.triggerEvent(new Xn(j)),j=>this.triggerEvent(new Pa(j))),this.routerState=p_(this.currentUrlTree,this.rootComponentType),this.transitions=new hi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(xi(o=>0!==o.id),(0,St.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),lr(o=>{let u=!1,d=!1;return(0,at.of)(o).pipe((0,fr.b)(p=>{this.currentNavigation={id:p.id,initialUrl:p.currentRawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),lr(p=>{const y=this.browserUrlTree.toString(),w=!this.navigated||p.extractedUrl.toString()!==y||y!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||w)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return eg(p.source)&&(this.browserUrlTree=p.extractedUrl),(0,at.of)(p).pipe(lr(S=>{const P=this.transitions.getValue();return r.next(new re(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),P!==this.transitions.getValue()?Ur.E:Promise.resolve(S)}),function(n,e,t,r){return lr(o=>function(n,e,t,r,o){return new $x(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,St.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,fr.b)(S=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:S.urlAfterRedirects})}),function(n,e,t,r,o){return(0,xr.zg)(u=>function(n,e,t,r,o="emptyOnly",u="legacy"){try{const d=new Jp(n,e,t,r,o,u).recognize();return null===d?eI(new CE):(0,at.of)(d)}catch(d){return eI(d)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,St.U)(d=>Object.assign(Object.assign({},u),{targetSnapshot:d}))))}(this.rootComponentType,this.config,S=>this.serializeUrl(S),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,fr.b)(S=>{"eager"===this.urlUpdateStrategy&&(S.extras.skipLocationChange||this.setBrowserUrl(S.urlAfterRedirects,S),this.browserUrlTree=S.urlAfterRedirects);const P=new gt(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(P)}));if(w&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:P,extractedUrl:j,source:Y,restoredState:ye,extras:xe}=p,ct=new re(P,this.serializeUrl(j),Y,ye);r.next(ct);const lt=p_(j,this.rootComponentType).snapshot;return(0,at.of)(Object.assign(Object.assign({},p),{targetSnapshot:lt,urlAfterRedirects:j,extras:Object.assign(Object.assign({},xe),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=p.rawUrl,this.browserUrlTree=p.urlAfterRedirects,p.resolve(null),Ur.E}),AE(p=>{const{targetSnapshot:y,id:w,extractedUrl:D,rawUrl:S,extras:{skipLocationChange:P,replaceUrl:j}}=p;return this.hooks.beforePreactivation(y,{navigationId:w,appliedUrlTree:D,rawUrlTree:S,skipLocationChange:!!P,replaceUrl:!!j})}),(0,fr.b)(p=>{const y=new ft(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}),(0,St.U)(p=>Object.assign(Object.assign({},p),{guards:Gx(p.targetSnapshot,p.currentSnapshot,this.rootContexts)})),function(n,e){return(0,xr.zg)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?(0,at.of)(Object.assign(Object.assign({},t),{guardsResult:!0})):function(n,e,t,r){return(0,Bt.D)(n).pipe((0,xr.zg)(o=>function(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!u||0===u.length)return(0,at.of)(!0);const d=u.map(p=>{const y=Yp(p,e,o);let w;if(function(n){return n&&lo(n.canDeactivate)}(y))w=ao(y.canDeactivate(n,e,t,r));else{if(!lo(y))throw new Error("Invalid CanDeactivate guard");w=ao(y(n,e,t,r))}return w.pipe(Ni())});return(0,at.of)(d).pipe(Nr())}(o.component,o.route,t,e,r)),Ni(o=>!0!==o,!0))}(d,r,o,n).pipe((0,xr.zg)(p=>p&&function(n){return"boolean"==typeof n}(p)?function(n,e,t,r){return(0,Bt.D)(e).pipe(Cl(o=>so(function(n,e){return null!==n&&e&&e(new Iu(n)),(0,at.of)(!0)}(o.route.parent,r),function(n,e){return null!==n&&e&&e(new Qi(n)),(0,at.of)(!0)}(o.route,r),function(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>Uo(()=>{const p=d.guards.map(y=>{const w=Yp(y,d.node,t);let D;if(function(n){return n&&lo(n.canActivateChild)}(w))D=ao(w.canActivateChild(r,n));else{if(!lo(w))throw new Error("Invalid CanActivateChild guard");D=ao(w(r,n))}return D.pipe(Ni())});return(0,at.of)(p).pipe(Nr())}));return(0,at.of)(u).pipe(Nr())}(n,o.path,t),function(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,at.of)(!0);const o=r.map(u=>Uo(()=>{const d=Yp(u,e,t);let p;if(function(n){return n&&lo(n.canActivate)}(d))p=ao(d.canActivate(e,n));else{if(!lo(d))throw new Error("Invalid CanActivate guard");p=ao(d(e,n))}return p.pipe(Ni())}));return(0,at.of)(o).pipe(Nr())}(n,o.route,t))),Ni(o=>!0!==o,!0))}(r,u,n,e):(0,at.of)(p)),(0,St.U)(p=>Object.assign(Object.assign({},t),{guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),(0,fr.b)(p=>{if(Ru(p.guardsResult)){const w=Ji(`Redirecting to "${this.serializeUrl(p.guardsResult)}"`);throw w.url=p.guardsResult,w}const y=new Jt(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(y)}),xi(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,""),!1)),AE(p=>{if(p.guards.canActivateChecks.length)return(0,at.of)(p).pipe((0,fr.b)(y=>{const w=new bt(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(w)}),lr(y=>{let w=!1;return(0,at.of)(y).pipe(function(n,e){return(0,xr.zg)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return(0,at.of)(t);let u=0;return(0,Bt.D)(o).pipe(Cl(d=>function(n,e,t,r){return function(n,e,t,r){const o=Object.keys(n);if(0===o.length)return(0,at.of)({});const u={};return(0,Bt.D)(o).pipe((0,xr.zg)(d=>function(n,e,t,r){const o=Yp(n,e,r);return ao(o.resolve?o.resolve(e,t):o(e,t))}(n[d],e,t,r).pipe((0,fr.b)(p=>{u[d]=p}))),fi(1),(0,xr.zg)(()=>Object.keys(u).length===o.length?(0,at.of)(u):Ur.E))}(n._resolve,n,e,r).pipe((0,St.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),fE(n,t).resolve),null)))}(d.route,r,n,e)),(0,fr.b)(()=>u++),fi(1),(0,xr.zg)(d=>u===o.length?(0,at.of)(t):Ur.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,fr.b)({next:()=>w=!0,complete:()=>{w||(this.restoreHistory(y),this.cancelNavigationTransition(y,"At least one route resolver didn't emit any value."))}}))}),(0,fr.b)(y=>{const w=new Mi(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(w)}))}),AE(p=>{const{targetSnapshot:y,id:w,extractedUrl:D,rawUrl:S,extras:{skipLocationChange:P,replaceUrl:j}}=p;return this.hooks.afterPreactivation(y,{navigationId:w,appliedUrlTree:D,rawUrlTree:S,skipLocationChange:!!P,replaceUrl:!!j})}),(0,St.U)(p=>{const y=function(n,e,t){const r=ad(n,e._root,t?t._root:void 0);return new f_(r,e)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return Object.assign(Object.assign({},p),{targetRouterState:y})}),(0,fr.b)(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((n,e,t)=>(0,St.U)(r=>(new Gh(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),(0,fr.b)({next(){u=!0},complete(){u=!0}}),function(n){return e=>e.lift(new A(n))}(()=>{var p;if(!u&&!d){const y=`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(o),this.cancelNavigationTransition(o,y)):this.cancelNavigationTransition(o,y)}(null===(p=this.currentNavigation)||void 0===p?void 0:p.id)===o.id&&(this.currentNavigation=null)}),wn(p=>{if(d=!0,function(n){return n&&n[oE]}(p)){const y=Ru(p.url);y||(this.navigated=!0,this.restoreHistory(o,!0));const w=new ke(o.id,this.serializeUrl(o.extractedUrl),p.message);r.next(w),y?setTimeout(()=>{const D=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),S={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||eg(o.source)};this.scheduleNavigation(D,"imperative",null,S,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const y=new Je(o.id,this.serializeUrl(o.extractedUrl),p);r.next(y);try{o.resolve(this.errorHandler(p))}catch(w){o.reject(w)}}return Ur.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,r)&&setTimeout(()=>{const{source:o,state:u,urlTree:d}=r,p={replaceUrl:!0};if(u){const y=Object.assign({},u);delete y.navigationId,delete y.\u0275routerPageId,0!==Object.keys(y).length&&(p.state=y)}this.scheduleNavigation(d,o,u,p)},0),this.lastLocationChangeInfo=r}))}extractLocationChangeInfoFromEvent(t){var r;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(r=t.state)||void 0===r?void 0:r.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,r){if(!t)return!0;const o=r.urlTree.toString()===t.urlTree.toString();return r.transitionId!==t.transitionId||!o||!("hashchange"===r.source&&"popstate"===t.source||"popstate"===r.source&&"hashchange"===t.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){y_(t),this.config=t.map(v_),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:d,queryParamsHandling:p,preserveFragment:y}=r,w=o||this.routerState.root,D=y?this.currentUrlTree.fragment:d;let S=null;switch(p){case"merge":S=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=u||null}return null!==S&&(S=this.removeEmptyProps(S)),function(n,e,t,r,o){if(0===t.length)return _E(e.root,e.root,e,r,o);const u=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new g(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const p={};return jn(u.outlets,(y,w)=>{p[w]="string"==typeof y?y.split("/"):y}),[...o,{outlets:p}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===d?(u.split("/").forEach((p,y)=>{0==y&&"."===p||(0==y&&""===p?t=!0:".."===p?e++:""!=p&&o.push(p))}),o):[...o,u]},[]);return new g(t,e,r)}(t);if(u.toRoot())return _E(e.root,new Kt([],{}),e,r,o);const d=function(n,e,t){if(n.isAbsolute)return new b(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new b(u,u===e.root,0)}const r=Nl(n.commands[0])?0:1;return function(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new b(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),p=d.processChildren?je(d.segmentGroup,d.index,u.commands):_e(d.segmentGroup,d.index,u.commands);return _E(d.segmentGroup,p,e,r,o)}(w,this.currentUrlTree,t,S,null!=D?D:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Ru(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},aI):!1===r?Object.assign({},rR):r,Ru(t))return Vp(this.currentUrlTree,t,o);const u=this.parseUrl(t);return Vp(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new ue(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,d){var p,y;if(this.disposed)return Promise.resolve(!1);const w=this.getTransition(),D=eg(r)&&w&&!eg(w.source),j=(this.lastSuccessfulId===w.id||this.currentNavigation?w.rawUrl:w.urlAfterRedirects).toString()===t.toString();if(D&&j)return Promise.resolve(!0);let Y,ye,xe;d?(Y=d.resolve,ye=d.reject,xe=d.promise):xe=new Promise((nt,st)=>{Y=nt,ye=st});const ct=++this.navigationId;let lt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),lt=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(p=this.browserPageId)&&void 0!==p?p:0:(null!==(y=this.browserPageId)&&void 0!==y?y:0)+1):lt=0,this.setTransition({id:ct,targetPageId:lt,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:Y,reject:ye,promise:xe,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),xe.catch(nt=>Promise.reject(nt))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===d?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===d&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new ke(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.DyG),f.LFG(Au),f.LFG(Xh),f.LFG(dt),f.LFG(f.zs3),f.LFG(f.v3s),f.LFG(f.Sil),f.LFG(void 0))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function eg(n){return"imperative"!==n}let kl=(()=>{class n{constructor(t,r,o,u,d){this.router=t,this.route=r,this.commands=[],this.onChanges=new hs.xQ,null==o&&u.setAttribute(d.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:Pl(this.skipLocationChange),replaceUrl:Pl(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Pl(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(vr),f.Y36(Rl),f.$8M("tabindex"),f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&f.NdJ("click",function(){return r.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[f.TTD]}),n})(),Ba=(()=>{class n{constructor(t,r,o){this.router=t,this.route=r,this.locationStrategy=o,this.commands=[],this.onChanges=new hs.xQ,this.subscription=t.events.subscribe(u=>{u instanceof ue&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,o,u,d){if(0!==t||r||o||u||d||"string"==typeof this.target&&"_self"!=this.target)return!0;const p={skipLocationChange:Pl(this.skipLocationChange),replaceUrl:Pl(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,p),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Pl(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(vr),f.Y36(Rl),f.Y36(Be))},n.\u0275dir=f.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&f.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&(f.Ikx("href",r.href,f.LSH),f.uIk("target",r.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[f.TTD]}),n})();function Pl(n){return""===n||!!n}let cd=(()=>{class n{constructor(t,r,o,u,d,p){this.router=t,this.element=r,this.renderer=o,this.cdr=u,this.link=d,this.linkWithHref=p,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=t.events.subscribe(y=>{y instanceof ue&&this.update()})}ngAfterContentInit(){(0,at.of)(this.links.changes,this.linksWithHrefs.changes,(0,at.of)(null)).pipe((0,Si.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const r=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(o=>!!o).map(o=>o.onChanges);this.linkInputChangesSubscription=(0,Bt.D)(r).pipe((0,Si.J)()).subscribe(o=>{this.isActive!==this.isLinkActive(this.router)(o)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(o=>!!o)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}))})}isLinkActive(t){const r=function(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return o=>t.isActive(o.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(vr),f.Y36(f.SBq),f.Y36(f.Qsj),f.Y36(f.sBO),f.Y36(kl,8),f.Y36(Ba,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,o){if(1&t&&(f.Suo(o,kl,5),f.Suo(o,Ba,5)),2&t){let u;f.iGM(u=f.CRH())&&(r.links=u),f.iGM(u=f.CRH())&&(r.linksWithHrefs=u)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[f.TTD]}),n})(),ef=(()=>{class n{constructor(t,r,o,u,d){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.name=u||zt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const d=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),p=this.parentContexts.getOrCreateContext(this.name).children,y=new uI(t,p,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,y),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Xh),f.Y36(f.s_b),f.Y36(f._Vd),f.$8M("name"),f.Y36(f.sBO))},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),n})();class uI{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Rl?this.route:e===Xh?this.childContexts:this.parent.get(e,t)}}class D_{}class A_{preload(e,t){return(0,at.of)(null)}}let tf=(()=>{class n{constructor(t,r,o,u,d){this.router=t,this.injector=u,this.preloadingStrategy=d,this.loader=new SE(r,o,w=>t.triggerEvent(new Xn(w)),w=>t.triggerEvent(new Pa(w)))}setUpPreloading(){this.subscription=this.router.events.pipe(xi(t=>t instanceof ue),Cl(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(f.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const d=u._loadedConfig;o.push(this.processRoutes(d.module,d.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children));return(0,Bt.D)(o).pipe((0,Si.J)(),(0,St.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?(0,at.of)(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,xr.zg)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(vr),f.LFG(f.v3s),f.LFG(f.Sil),f.LFG(f.zs3),f.LFG(D_))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),NE=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof re?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ue&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof gs&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new gs(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(vr),f.LFG(Do),f.LFG(void 0))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const dd=new f.OlP("ROUTER_CONFIGURATION"),cI=new f.OlP("ROUTER_FORROOT_GUARD"),ME=[dt,{provide:Au,useClass:td},{provide:vr,useFactory:function(n,e,t,r,o,u,d,p={},y,w){const D=new vr(null,n,e,t,r,o,u,Tu(d));return y&&(D.urlHandlingStrategy=y),w&&(D.routeReuseStrategy=w),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy)}(p,D),p.enableTracing&&D.events.subscribe(S=>{var P,j;null===(P=console.group)||void 0===P||P.call(console,`Router Event: ${S.constructor.name}`),console.log(S.toString()),console.log(S),null===(j=console.groupEnd)||void 0===j||j.call(console)}),D},deps:[Au,Xh,dt,f.zs3,f.v3s,f.Sil,Xp,dd,[class{},new f.FiY],[class{},new f.FiY]]},Xh,{provide:Rl,useFactory:function(n){return n.routerState.root},deps:[vr]},{provide:f.v3s,useClass:f.EAV},tf,A_,class{preload(e,t){return t().pipe(wn(()=>(0,at.of)(null)))}},{provide:dd,useValue:{enableTracing:!1}}];function hI(){return new f.PXZ("Router",vr)}let fI=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[ME,mI(t),{provide:cI,useFactory:gI,deps:[[vr,new f.FiY,new f.tp0]]},{provide:dd,useValue:r||{}},{provide:Be,useFactory:oR,deps:[te,[new f.tBr(De),new f.FiY],dd]},{provide:NE,useFactory:pI,deps:[vr,Do,dd]},{provide:D_,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:A_},{provide:f.PXZ,multi:!0,useFactory:hI},[S_,{provide:f.ip1,multi:!0,useFactory:lR,deps:[S_]},{provide:_I,useFactory:cR,deps:[S_]},{provide:f.tb,multi:!0,useExisting:_I}]]}}static forChild(t){return{ngModule:n,providers:[mI(t)]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(cI,8),f.LFG(vr,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function pI(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new NE(n,e,t)}function oR(n,e,t={}){return t.useHash?new Xe(n,e):new Ne(n,e)}function gI(n){return"guarded"}function mI(n){return[{provide:f.deG,multi:!0,useValue:n},{provide:Xp,multi:!0,useValue:n}]}let S_=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new hs.xQ}appInitializer(){return this.injector.get(U,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(p=>r=p),u=this.injector.get(vr),d=this.injector.get(dd);return"disabled"===d.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?(0,at.of)(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(dd),o=this.injector.get(tf),u=this.injector.get(NE),d=this.injector.get(vr),p=this.injector.get(f.z2F);t===p.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),o.setUpPreloading(),u.init(),d.resetRootComponentType(p.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.zs3))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function lR(n){return n.appInitializer.bind(n)}function cR(n){return n.bootstrapListener.bind(n)}const _I=new f.OlP("Router Initializer");let fR=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-not-found"]],decls:15,vars:0,consts:[[1,"page_404"],[1,"container"],[1,"row"],[1,"col-sm-12"],[1,"col-sm-10","col-sm-offset-1","text-center"],[1,"four_zero_four_bg"],[1,"text-center"],[1,"contant_box_404"],[1,"h2"],["routerLink","",1,"link_404"]],template:function(t,r){1&t&&(f.TgZ(0,"section",0),f.TgZ(1,"div",1),f.TgZ(2,"div",2),f.TgZ(3,"div",3),f.TgZ(4,"div",4),f.TgZ(5,"div",5),f.TgZ(6,"h1",6),f._uU(7,"404"),f.qZA(),f.qZA(),f.TgZ(8,"div",7),f.TgZ(9,"h3",8),f._uU(10," Look like you're lost "),f.qZA(),f.TgZ(11,"p"),f._uU(12,"the page you are looking for not avaible!"),f.qZA(),f.TgZ(13,"a",9),f._uU(14,"Go to Home"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA())},directives:[Ba],styles:['.page_404[_ngcontent-%COMP%]{padding:40px 0;background:#fff;font-family:"Arvo",serif}.page_404[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.four_zero_four_bg[_ngcontent-%COMP%]{background-image:url(https://cdn.dribbble.com/users/285475/screenshots/2083086/dribbble_1.gif);height:400px;background-position:center}.four_zero_four_bg[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:80px}.four_zero_four_bg[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:80px}.link_404[_ngcontent-%COMP%]{color:#fff!important;padding:10px 20px;background:#39ac31;margin:20px 0;display:inline-block}.contant_box_404[_ngcontent-%COMP%]{margin-top:-50px}']}),n})();var pR=V(1555);function Rt(n,e){return new yr.y(t=>{const r=n.length;if(0===r)return void t.complete();const o=new Array(r);let u=0,d=0;for(let p=0;p<r;p++){const y=(0,Bt.D)(n[p]);let w=!1;t.add(y.subscribe({next:D=>{w||(w=!0,d++),o[p]=D},error:D=>t.error(D),complete:()=>{u++,(u===r||!w)&&(d===r&&t.next(e?e.reduce((D,S,P)=>(D[S]=o[P],D),{}):o),t.complete())}}))}})}let kE=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),Ol=(()=>{class n extends kE{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const Ls=new f.OlP("NgValueAccessor"),mR={provide:Ls,useExisting:(0,f.Gpc)(()=>nf),multi:!0},Mu=new f.OlP("CompositionEventMode");let nf=(()=>{class n extends kE{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(Mu,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[f._Bn([mR]),f.qOj]}),n})();function ku(n){return null==n||0===n.length}function x_(n){return null!=n&&"number"==typeof n.length}const es=new f.OlP("NgValidators"),Pu=new f.OlP("NgAsyncValidators"),g1=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Vs{static min(e){return function(n){return e=>{if(ku(e.value)||ku(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function(n){return e=>{if(ku(e.value)||ku(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return R_(e)}static requiredTrue(e){return function(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function(n){return ku(n.value)||g1.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function(n){return e=>ku(e.value)||!x_(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function(n){return e=>x_(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function(n){if(!n)return hd;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(ku(r.value))return null;const o=r.value;return e.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}(e)}static nullValidator(e){return null}static compose(e){return ER(e)}static composeAsync(e){return wR(e)}}function R_(n){return ku(n.value)?{required:!0}:null}function hd(n){return null}function LE(n){return null!=n}function VE(n){const e=(0,f.QGY)(n)?(0,Bt.D)(n):n;return(0,f.CqO)(e),e}function EI(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function N_(n,e){return e.map(t=>t(n))}function vR(n){return n.map(e=>function(n){return!n.validate}(e)?e:t=>e.validate(t))}function ER(n){if(!n)return null;const e=n.filter(LE);return 0==e.length?null:function(t){return EI(N_(t,e))}}function wI(n){return null!=n?ER(vR(n)):null}function wR(n){if(!n)return null;const e=n.filter(LE);return 0==e.length?null:function(t){return function(...n){if(1===n.length){const e=n[0];if((0,Ns.k)(e))return Rt(e,null);if((0,pR.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Rt(t.map(r=>e[r]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return Rt(n=1===n.length&&(0,Ns.k)(n[0])?n[0]:n,null).pipe((0,St.U)(t=>e(...t)))}return Rt(n,null)}(N_(t,e).map(VE)).pipe((0,St.U)(EI))}}function bI(n){return null!=n?wR(vR(n)):null}function bR(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function CR(n){return n._rawValidators}function IR(n){return n._rawAsyncValidators}function CI(n){return n?Array.isArray(n)?n:[n]:[]}function UE(n,e){return Array.isArray(n)?n.includes(e):n===e}function Ou(n,e){const t=CI(e);return CI(n).forEach(o=>{UE(t,o)||t.push(o)}),t}function M_(n,e){return CI(e).filter(t=>!UE(n,t))}let II=(()=>{class n{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=wI(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=bI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,r){return!!this.control&&this.control.hasError(t,r)}getError(t,r){return this.control?this.control.getError(t,r):null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n}),n})(),ki=(()=>{class n extends II{get formDirective(){return null}get path(){return null}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();class ja extends II{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class BE{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let Fu=(()=>{class n extends BE{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ja,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[f.qOj]}),n})(),jE=(()=>{class n extends BE{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ki,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[f.qOj]}),n})();function og(n,e){lg(n,e),e.valueAccessor.writeValue(n.value),function(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&ZE(n,e)})}(n,e),function(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&ZE(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function ag(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),cg(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function ug(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function lg(n,e){const t=CR(n);null!==e.validator?n.setValidators(bR(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=IR(n);null!==e.asyncValidator?n.setAsyncValidators(bR(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();ug(e._rawValidators,o),ug(e._rawAsyncValidators,o)}function cg(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=CR(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(d=>d!==e.validator);u.length!==o.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const o=IR(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(d=>d!==e.asyncValidator);u.length!==o.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return ug(e._rawValidators,r),ug(e._rawAsyncValidators,r),t}function ZE(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function O_(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const F_="VALID",dg="INVALID",hg="PENDING",fg="DISABLED";function L_(n){return(V_(n)?n.validators:n)||null}function RI(n){return Array.isArray(n)?wI(n):n||null}function JE(n,e){return(V_(e)?e.asyncValidators:n)||null}function NI(n){return Array.isArray(n)?bI(n):n||null}function V_(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class XE{constructor(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=RI(this._rawValidators),this._composedAsyncValidatorFn=NI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===F_}get invalid(){return this.status===dg}get pending(){return this.status==hg}get disabled(){return this.status===fg}get enabled(){return this.status!==fg}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=RI(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=NI(e)}addValidators(e){this.setValidators(Ou(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Ou(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(M_(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(M_(e,this._rawAsyncValidators))}hasValidator(e){return UE(this._rawValidators,e)}hasAsyncValidator(e){return UE(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=hg,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=fg,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=F_,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===F_||this.status===hg)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?fg:F_}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=hg,this._hasOwnPendingAsyncValidator=!0;const t=VE(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=r instanceof pg?r.controls.hasOwnProperty(o)?r.controls[o]:null:r instanceof ew&&r.at(o)||null}),r}(this,e)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?fg:this.errors?dg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(hg)?hg:this._anyControlsHaveStatus(dg)?dg:F_}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){V_(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class fd extends XE{constructor(e=null,t,r){super(L_(t),JE(r,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){O_(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){O_(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class pg extends XE{constructor(e,t,r){super(L_(t),JE(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t instanceof fd?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class ew extends XE{constructor(e,t,r){super(L_(t),JE(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((r,o)=>{this._throwIfControlMissing(o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof fd?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let rw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const sw=new f.OlP("NgModelWithFormControlWarning"),jI={provide:ki,useExisting:(0,f.Gpc)(()=>mg)};let mg=(()=>{class n extends ki{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new f.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(cg(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return og(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){ag(t.control||null,t,!1),O_(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(ag(r||null,t),o instanceof fd&&(og(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function(n,e){lg(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function(n,e){return cg(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){lg(this.form,this),this._oldForm&&cg(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(es,10),f.Y36(Pu,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&f.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([jI]),f.qOj,f.TTD]}),n})();const I1={provide:ja,useExisting:(0,f.Gpc)(()=>Fl)};let Fl=(()=>{class n extends ja{constructor(t,r,o,u,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.update=new f.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===nf?t=u:function(n){return Object.getPrototypeOf(n.constructor)===Ol}(u)?r=u:o=u}),o||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ki,13),f.Y36(es,10),f.Y36(Pu,10),f.Y36(Ls,10),f.Y36(sw,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[f._Bn([I1]),f.qOj,f.TTD]}),n._ngModelWarningSentOnce=!1,n})();const af={provide:es,useExisting:(0,f.Gpc)(()=>$_),multi:!0};let $_=(()=>{class n{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&"false"!=`${t}`,this._onChange&&this._onChange()}validate(t){return this.required?R_(t):null}registerOnValidatorChange(t){this._onChange=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&f.uIk("required",r.required?"":null)},inputs:{required:"required"},features:[f._Bn([af])]}),n})(),XI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[rw]]}),n})(),UR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[XI]}),n})(),fw=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:sw,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[XI]}),n})(),tT=(()=>{class n{group(t,r=null){const o=this._reduceControls(t);let p,u=null,d=null;return null!=r&&(function(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(u=null!=r.validators?r.validators:null,d=null!=r.asyncValidators?r.asyncValidators:null,p=null!=r.updateOn?r.updateOn:void 0):(u=null!=r.validator?r.validator:null,d=null!=r.asyncValidator?r.asyncValidator:null)),new pg(o,{asyncValidators:d,updateOn:p,validators:u})}control(t,r,o){return new fd(t,r,o)}array(t,r,o){const u=t.map(d=>this._createControl(d));return new ew(u,r,o)}_reduceControls(t){const r={};return Object.keys(t).forEach(o=>{r[o]=this._createControl(t[o])}),r}_createControl(t){return t instanceof fd||t instanceof pg||t instanceof ew?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,f.Yz7)({factory:function(){return new n},token:n,providedIn:fw}),n})();var pw=V(3637),bn=V(2871);function pd(){return n=>n.lift(new gw)}class gw{call(e,t){return t.subscribe(new nT(e))}}class nT extends Xr.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}function mw(n,e){return t=>t.lift(new rT(n,e))}class rT{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new iT(e,this.compare,this.keySelector))}}class iT extends Xr.L{constructor(e,t,r){super(e),this.keySelector=r,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:o}=this;t=o?o(e):e}catch(o){return this.destination.error(o)}let r=!1;if(this.hasKey)try{const{compare:o}=this;r=o(this.key,t)}catch(o){return this.destination.error(o)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))}}var it,Br=V(8939),_w=(V(4828),V(3394)),Ce=V(8239),Pi=V(8026),Ha=V(3910),fo=V(5422),F=V(3854),jR="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ll={},vg=vg||{},Lt=jR||self;function Eg(){}function G_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function q_(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var sT="closure_uid_"+(1e9*Math.random()>>>0),S1=0;function x1(n,e,t){return n.call.apply(n.bind,arguments)}function oT(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function ti(n,e,t){return(ti=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?x1:oT).apply(null,arguments)}function wg(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function gi(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var d=Array(arguments.length-2),p=2;p<arguments.length;p++)d[p-2]=arguments[p];return e.prototype[o].apply(r,d)}}function gd(){this.s=this.s,this.o=this.o}var yw={};gd.prototype.s=!1,gd.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,sT)&&n[sT]||(n[sT]=++S1)}(this);delete yw[n]}},gd.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const uT=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},W_=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function lT(n){return Array.prototype.concat.apply([],arguments)}function vw(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Z_(n){return/^[\s\xa0]*$/.test(n)}var Mr,cT=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function ts(n,e){return-1!=n.indexOf(e)}function uf(n,e){return n<e?-1:n>e?1:0}e:{var Ew=Lt.navigator;if(Ew){var po=Ew.userAgent;if(po){Mr=po;break e}}Mr=""}function md(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function dT(n){const e={};for(const t in n)e[t]=n[t];return e}var hT="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function z_(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<hT.length;u++)t=hT[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function go(n){return go[" "](n),n}go[" "]=Eg;var Vu,n,Oi=ts(Mr,"Opera"),mo=ts(Mr,"Trident")||ts(Mr,"MSIE"),Cg=ts(Mr,"Edge"),ys=Cg||mo,K_=ts(Mr,"Gecko")&&!(ts(Mr.toLowerCase(),"webkit")&&!ts(Mr,"Edge"))&&!(ts(Mr,"Trident")||ts(Mr,"MSIE"))&&!ts(Mr,"Edge"),lf=ts(Mr.toLowerCase(),"webkit")&&!ts(Mr,"Edge");function _d(){var n=Lt.document;return n?n.documentMode:void 0}e:{var Vl="",Ul=(n=Mr,K_?/rv:([^\);]+)(\)|;)/.exec(n):Cg?/Edge\/([\d\.]+)/.exec(n):mo?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):lf?/WebKit\/(\S+)/.exec(n):Oi?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Ul&&(Vl=Ul?Ul[1]:""),mo){var Bl=_d();if(null!=Bl&&Bl>parseFloat(Vl)){Vu=String(Bl);break e}}Vu=Vl}var cf={};function df(){return e=cf,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let n=0;const e=cT(String(Vu)).split("."),t=cT("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",u=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=uf(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||uf(0==o[2].length,0==u[2].length)||uf(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n}();var e}var fT=Lt.document&&mo&&(_d()||parseInt(Vu,10))||void 0,pT=function(){if(!Lt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Lt.addEventListener("test",Eg,e),Lt.removeEventListener("test",Eg,e)}catch(t){}return n}();function mi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function hf(n,e){if(mi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(K_){e:{try{go(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:gT[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&hf.Z.h.call(this)}}mi.prototype.h=function(){this.defaultPrevented=!0},gi(hf,mi);var gT={2:"touch",3:"pen",4:"mouse"};hf.prototype.h=function(){hf.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var ff="closure_listenable_"+(1e6*Math.random()|0),mT=0;function _T(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++mT,this.ca=this.fa=!1}function Y_(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Ig(n){this.src=n,this.g={},this.h=0}function bw(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=uT(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(Y_(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Q_(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}Ig.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=Q_(n,e,r,o);return-1<d?(e=n[d],t||(e.fa=!1)):((e=new _T(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var J_="closure_lm_"+(1e6*Math.random()|0),Cw={};function HR(n,e,t,r,o){if(r&&r.once)return ET(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)HR(n,e[u],t,r,o);return null}return t=bT(t),n&&n[ff]?n.N(e,t,q_(r)?!!r.capture:!!r,o):yT(n,e,t,!1,r,o)}function yT(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var d=q_(o)?!!o.capture:!!o,p=Dw(n);if(p||(n[J_]=p=new Ig(n)),(t=p.add(e,t,r,d,u)).proxy)return t;if(r=function(){var e=R1;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)pT||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(wT(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function ET(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)ET(n,e[u],t,r,o);return null}return t=bT(t),n&&n[ff]?n.O(e,t,q_(r)?!!r.capture:!!r,o):yT(n,e,t,!0,r,o)}function Iw(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)Iw(n,e[u],t,r,o);else r=q_(r)?!!r.capture:!!r,t=bT(t),n&&n[ff]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Q_(u=n.g[e],t,r,o))&&(Y_(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Dw(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Q_(e,t,r,o)),(t=-1<n?e[n]:null)&&Tw(t))}function Tw(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[ff])bw(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(wT(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Dw(e))?(bw(t,n),0==t.h&&(t.src=null,e[J_]=null)):Y_(n)}}}function wT(n){return n in Cw?Cw[n]:Cw[n]="on"+n}function R1(n,e){if(n.ca)n=!0;else{e=new hf(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Tw(n),n=t.call(r,e)}return n}function Dw(n){return(n=n[J_])instanceof Ig?n:null}var X_="__closure_events_fn_"+(1e9*Math.random()>>>0);function bT(n){return"function"==typeof n?n:(n[X_]||(n[X_]=function(e){return n.handleEvent(e)}),n[X_])}function _i(){gd.call(this),this.i=new Ig(this),this.P=this,this.I=null}function Fi(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new mi(e,n);else if(e instanceof mi)e.target=e.target||n;else{var o=e;z_(e=new mi(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];o=ey(d,r,!0,e)&&o}if(o=ey(d=e.g=n,r,!0,e)&&o,o=ey(d,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=ey(d=e.g=t[u],r,!1,e)&&o}function ey(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ca&&d.capture==t){var p=d.listener,y=d.ia||d.src;d.fa&&bw(n.i,d),o=!1!==p.call(y,r)&&o}}return o&&!r.defaultPrevented}gi(_i,gd),_i.prototype[ff]=!0,_i.prototype.removeEventListener=function(n,e,t,r){Iw(this,n,e,t,r)},_i.prototype.M=function(){if(_i.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Y_(t[r]);delete n.g[e],n.h--}}this.I=null},_i.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},_i.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var CT=Lt.JSON.stringify;function GR(){var n=xw;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var TT,ty=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Aw,n=>n.reset());class Aw{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function WR(n){Lt.setTimeout(()=>{throw n},0)}function IT(n,e){TT||function(){var n=Lt.Promise.resolve(void 0);TT=function(){n.then(M1)}}(),Sw||(TT(),Sw=!0),xw.add(n,e)}var Sw=!1,xw=new class{constructor(){this.h=this.g=null}add(e,t){const r=ty.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function M1(){for(var n;n=GR();){try{n.h.call(n.g)}catch(t){WR(t)}var e=ty;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Sw=!1}function ny(n,e){_i.call(this),this.h=n||1,this.g=e||Lt,this.j=ti(this.kb,this),this.l=Date.now()}function $l(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Rw(n,e,t){if("function"==typeof n)t&&(n=ti(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ti(n.handleEvent,n)}return 2147483647<Number(e)?-1:Lt.setTimeout(n,e||0)}function Nw(n){n.g=Rw(()=>{n.g=null,n.i&&(n.i=!1,Nw(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}gi(ny,_i),(it=ny.prototype).da=!1,it.S=null,it.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Fi(this,"tick"),this.da&&($l(this),this.start()))}},it.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},it.M=function(){ny.Z.M.call(this),$l(this),delete this.g};class ZR extends gd{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Nw(this)}M(){super.M(),this.g&&(Lt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pf(n){gd.call(this),this.h=n,this.g={}}gi(pf,gd);var Tg=[];function DT(n,e,t,r){Array.isArray(t)||(t&&(Tg[0]=t.toString()),t=Tg);for(var o=0;o<t.length;o++){var u=HR(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Mw(n){md(n.g,function(e,t){this.g.hasOwnProperty(t)&&Tw(e)},n),n.g={}}function ry(){this.g=!0}function gf(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<o.length;d++)o[d]=""}}}return CT(t)}catch(p){return e}}(n,t)+(r?" "+r:"")})}pf.prototype.M=function(){pf.Z.M.call(this),Mw(this)},pf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ry.prototype.Aa=function(){this.g=!1},ry.prototype.info=function(){};var yd={},kw=null;function Dg(){return kw=kw||new _i}function iy(n){mi.call(this,yd.Ma,n)}function sy(n){const e=Dg();Fi(e,new iy(e,n))}function oy(n,e){mi.call(this,yd.STAT_EVENT,n),this.stat=e}function ns(n){const e=Dg();Fi(e,new oy(e,n))}function QR(n,e){mi.call(this,yd.Na,n),this.size=e}function Uu(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Lt.setTimeout(function(){n()},e)}yd.Ma="serverreachability",gi(iy,mi),yd.STAT_EVENT="statevent",gi(oy,mi),yd.Na="timingevent",gi(QR,mi);var ay={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},uy={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Ag(){}function ly(){}Ag.prototype.h=null;var Pw,vd={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function cy(){mi.call(this,"d")}function xT(){mi.call(this,"c")}function Sg(){}function mf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new pf(this),this.P=NT,this.W=new ny(n=ys?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new RT}function RT(){this.i=null,this.g="",this.h=!1}gi(cy,mi),gi(xT,mi),gi(Sg,Ag),Sg.prototype.g=function(){return new XMLHttpRequest},Sg.prototype.i=function(){return{}},Pw=new Sg;var NT=45e3,xg={},Rg={};function Ng(n,e,t){n.K=1,n.v=my(Ga(e)),n.s=t,n.U=!0,dy(n,null)}function dy(n,e){n.F=Date.now(),_f(n),n.A=Ga(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),XR(t.h,"t",r),n.C=0,t=n.l.H,n.h=new RT,n.g=c0(n.l,t?e:null,!n.s),0<n.O&&(n.L=new ZR(ti(n.Ia,n,n.g),n.O)),DT(n.V,n.g,"readystatechange",n.gb),e=n.H?dT(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),sy(1),function(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var d="",p=u.split("&"),y=0;y<p.length;y++){var w=p[y].split("=");if(1<w.length){var D=w[0];w=w[1];var S=D.split("_");d=2<=S.length&&"type"==S[1]?d+(D+"=")+w+"&":d+(D+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Ow(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function MT(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=kT(n,t),o==Rg){4==e&&(n.o=4,ns(14),r=!1),gf(n.j,n.m,null,"[Incomplete Response]");break}if(o==xg){n.o=4,ns(15),gf(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}gf(n.j,n.m,o,null),Fw(n,o)}Ow(n)&&o!=Rg&&o!=xg&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ns(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),s0(e),e.L=!0,ns(11))):(gf(n.j,n.m,t,"[Invalid Chunked Response]"),Ed(n),Mg(n))}function kT(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Rg:(t=Number(e.substring(t,r)),isNaN(t)?xg:(r+=1)+t>e.length?Rg:(e=e.substr(r,t),n.C=r+t,e))}function _f(n){n.Y=Date.now()+n.P,hy(n,n.P)}function hy(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Uu(ti(n.eb,n),e)}function fy(n){n.B&&(Lt.clearTimeout(n.B),n.B=null)}function Mg(n){0==n.l.G||n.I||o0(n.l,n)}function Ed(n){fy(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,$l(n.W),Mw(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Fw(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Us(t.i,n)))if(t.I=n.N,!n.J&&Us(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(w){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=Uu(ti(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Hg(t),yy(t)}r0(t),ns(18)}if(1>=_o(t.i)&&t.ka){try{t.ka()}catch(w){}t.ka=void 0}}else Zl(t,11)}else if((n.J||t.g==n)&&Hg(t),!Z_(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let w=o[e];if(t.U=w[0],w=w[1],2==t.G)if("c"==w[0]){t.J=w[1],t.la=w[2];const D=w[3];null!=D&&(t.ma=D,t.h.info("VER="+t.ma));const S=w[4];null!=S&&(t.za=S,t.h.info("SVER="+t.za));const P=w[5];null!=P&&"number"==typeof P&&0<P&&(t.K=r=1.5*P,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const j=n.g;if(j){const Y=j.g?j.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Y){var u=r.i;!u.g&&(ts(Y,"spdy")||ts(Y,"quic")||ts(Y,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(_y(u,u.h),u.h=null))}if(r.D){const ye=j.g?j.g.getResponseHeader("X-HTTP-Session-Id"):null;ye&&(r.sa=ye,Hn(r.F,r.D,ye))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var d=n;if((r=t).oa=l0(r,r.H?r.la:null,r.W),d.J){$w(r.i,d);var p=d,y=r.K;y&&p.setTimeout(y),p.B&&(fy(p),_f(p)),r.g=d}else QT(r);0<t.l.length&&vy(t)}else"stop"!=w[0]&&"close"!=w[0]||Zl(t,7);else 3==t.G&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?Zl(t,7):t0(t):"noop"!=w[0]&&t.j&&t.j.wa(w),t.A=0)}sy(4)}catch(w){}}function kg(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(G_(n)||"string"==typeof n)W_(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(G_(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;o=(r=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(G_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n)).length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function wd(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof wd)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function py(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Hl(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)Hl(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function Hl(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(it=mf.prototype).setTimeout=function(n){this.P=n},it.gb=function(n){n=n.target;const e=this.L;e&&3==Wa(n)?e.l():this.Ia(n)},it.Ia=function(n){try{if(n==this.g)e:{const D=Wa(this.g);var e=this.g.Da();const S=this.g.ba();if(!(3>D)&&(3!=D||ys||this.g&&(this.h.h||this.g.ga()||WT(this.g)))){this.I||4!=D||7==e||sy(8==e||0>=S?3:2),fy(this);var t=this.g.ba();this.N=t;t:if(Ow(this)){var r=WT(this.g);n="";var o=r.length,u=4==Wa(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ed(this),Mg(this);var d="";break t}this.h.i=new Lt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==t,function(n,e,t,r,o,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.X,D,t),this.i){if(this.$&&!this.J){t:{if(this.g){var p,y=this.g;if((p=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Z_(p)){var w=p;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,ns(12),Ed(this),Mg(this);break e}gf(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Fw(this,t)}this.U?(MT(this,D,d),ys&&this.i&&3==D&&(DT(this.V,this.W,"tick",this.fb),this.W.start())):(gf(this.j,this.m,d,null),Fw(this,d)),4==D&&Ed(this),this.i&&!this.I&&(4==D?o0(this.l,this):(this.i=!1,_f(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,ns(12)):(this.o=0,ns(13)),Ed(this),Mg(this)}}}catch(D){}},it.fb=function(){if(this.g){var n=Wa(this.g),e=this.g.ga();this.C<e.length&&(fy(this),MT(this,n,e),this.i&&4!=n&&_f(this))}},it.cancel=function(){this.I=!0,Ed(this)},it.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(sy(3),ns(17)),Ed(this),this.o=2,Mg(this)):hy(this,this.Y-n)},(it=wd.prototype).R=function(){py(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},it.T=function(){return py(this),this.g.concat()},it.get=function(n,e){return Hl(this.h,n)?this.h[n]:e},it.set=function(n,e){Hl(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},it.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var Vw=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Gl(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Gl){this.g=void 0!==e?e:n.g,Pg(this,n.j),this.s=n.s,Uw(this,n.i),gy(this,n.m),this.l=n.l,e=n.h;var t=new Lg;t.i=e.i,e.g&&(t.g=new wd(e.g),t.h=e.h),OT(this,t),this.o=n.o}else n&&(t=String(n).match(Vw))?(this.g=!!e,Pg(this,t[1]||"",!0),this.s=Og(t[2]||""),Uw(this,t[3]||"",!0),gy(this,t[4]),this.l=Og(t[5]||"",!0),OT(this,t[6]||"",!0),this.o=Og(t[7]||"")):(this.g=!!e,this.h=new Lg(null,this.g))}function Ga(n){return new Gl(n)}function Pg(n,e,t){n.j=t?Og(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Uw(n,e,t){n.i=t?Og(e,!0):e}function gy(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function OT(n,e,t){e instanceof Lg?(n.h=e,function(n,e){e&&!n.j&&(Bu(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(jT(this,r),XR(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Fg(e,yf)),n.h=new Lg(e,n.g))}function Hn(n,e,t){n.h.set(e,t)}function my(n){return Hn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Og(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Fg(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,LT),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function LT(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Gl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Fg(e,VT,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Fg(e,VT,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Fg(t,"/"==t.charAt(0)?BT:UT,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Fg(t,JR)),n.join("")};var VT=/[#\/\?@]/g,UT=/[#\?:]/g,BT=/[#\?]/g,yf=/[#\?@]/g,JR=/#/g;function Lg(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Bu(n){n.g||(n.g=new wd,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function jT(n,e){Bu(n),e=bd(n,e),Hl(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Hl((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&py(n)))}function Bw(n,e){return Bu(n),e=bd(n,e),Hl(n.g.h,e)}function XR(n,e,t){jT(n,e),0<t.length&&(n.i=null,n.g.set(bd(n,e),vw(t)),n.h+=t.length)}function bd(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function $T(n){this.l=n||eN,n=Lt.PerformanceNavigationTiming?0<(n=Lt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Lt.g&&Lt.g.Ea&&Lt.g.Ea()&&Lt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(it=Lg.prototype).add=function(n,e){Bu(this),this.i=null,n=bd(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},it.forEach=function(n,e){Bu(this),this.g.forEach(function(t,r){W_(t,function(o){n.call(e,o,r,this)},this)},this)},it.T=function(){Bu(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},it.R=function(n){Bu(this);var e=[];if("string"==typeof n)Bw(this,n)&&(e=lT(e,this.g.get(bd(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=lT(e,n[t])}return e},it.set=function(n,e){return Bu(this),this.i=null,Bw(this,n=bd(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},it.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},it.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var d=o;""!==r[u]&&(d+="="+encodeURIComponent(String(r[u]))),n.push(d)}}return this.i=n.join("&")};var eN=10;function Yo(n){return!!n.h||!!n.g&&n.g.size>=n.j}function _o(n){return n.h?1:n.g?n.g.size:0}function Us(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function _y(n,e){n.g?n.g.add(e):n.h=e}function $w(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function HT(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return vw(n.i)}function Hw(){}function tN(){this.g=new Hw}function nN(n,e,t){const r=t||"";try{kg(n,function(o,u){let d=o;q_(o)&&(d=CT(o)),e.push(r+u+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function ql(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function Vg(n){this.l=n.$b||null,this.j=n.ib||!1}function Ug(n,e){_i.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=qw,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}$T.prototype.cancel=function(){if(this.i=HT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Hw.prototype.stringify=function(n){return Lt.JSON.stringify(n,void 0)},Hw.prototype.parse=function(n){return Lt.JSON.parse(n,void 0)},gi(Vg,Ag),Vg.prototype.g=function(){return new Ug(this.l,this.j)},Vg.prototype.i=function(n){return function(){return n}}({}),gi(Ug,_i);var qw=0;function Ww(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function vf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Wl(n)}function Wl(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(it=Ug.prototype).open=function(n,e){if(this.readyState!=qw)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Wl(this)},it.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Lt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},it.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,vf(this)),this.readyState=qw},it.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Wl(this)),this.g&&(this.readyState=3,Wl(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Lt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ww(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},it.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?vf(this):Wl(this),3==this.readyState&&Ww(this)}},it.Ua=function(n){this.g&&(this.response=this.responseText=n,vf(this))},it.Ta=function(n){this.g&&(this.response=n,vf(this))},it.ha=function(){this.g&&vf(this)},it.setRequestHeader=function(n,e){this.v.append(n,e)},it.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},it.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Ug.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var rN=Lt.JSON.parse;function Er(n){_i.call(this),this.headers=new wd,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Zw,this.K=this.L=!1}gi(Er,_i);var Zw="",zw=/^https?$/i,Kw=["POST","PUT"];function qT(n){return"content-type"==n.toLowerCase()}function Yw(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Qw(n),Bg(n)}function Qw(n){n.D||(n.D=!0,Fi(n,"complete"),Fi(n,"error"))}function Jw(n){if(n.h&&void 0!==vg&&(!n.C[1]||4!=Wa(n)||2!=n.ba()))if(n.v&&4==Wa(n))Rw(n.Fa,0,n);else if(Fi(n,"readystatechange"),4==Wa(n)){n.h=!1;try{const p=n.ba();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===p){var o=String(n.H).match(Vw)[1]||null;if(!o&&Lt.self&&Lt.self.location){var u=Lt.self.location.protocol;o=u.substr(0,u.length-1)}r=!zw.test(o?o.toLowerCase():"")}t=r}if(t)Fi(n,"complete"),Fi(n,"success");else{n.m=6;try{var d=2<Wa(n)?n.g.statusText:""}catch(y){d=""}n.j=d+" ["+n.ba()+"]",Qw(n)}}finally{Bg(n)}}}function Bg(n,e){if(n.g){Xw(n);const t=n.g,r=n.C[0]?Eg:null;n.g=null,n.C=null,e||Fi(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function Xw(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Lt.clearTimeout(n.A),n.A=null)}function Wa(n){return n.g?n.g.readyState:0}function WT(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Zw:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function e0(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function(n){let e="";return md(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Hn(n,e,t))}function jg(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function ZT(n){this.za=0,this.l=[],this.h=new ry,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=jg("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=jg("baseRetryDelayMs",5e3,n),this.$a=jg("retryDelaySeedMs",1e4,n),this.Ya=jg("forwardChannelMaxRetries",2,n),this.ra=jg("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new $T(n&&n.concurrentRequestLimit),this.Ca=new tN,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function t0(n){if(zT(n),3==n.G){var e=n.V++,t=Ga(n.F);Hn(t,"SID",n.J),Hn(t,"RID",e),Hn(t,"TYPE","terminate"),$g(n,t),(e=new mf(n,n.h,e,void 0)).K=2,e.v=my(Ga(t)),t=!1,Lt.navigator&&Lt.navigator.sendBeacon&&(t=Lt.navigator.sendBeacon(e.v.toString(),"")),!t&&Lt.Image&&((new Image).src=e.v,t=!0),t||(e.g=c0(e.l,null),e.g.ea(e.v)),e.F=Date.now(),_f(e)}u0(n)}function yy(n){n.g&&(s0(n),n.g.cancel(),n.g=null)}function zT(n){yy(n),n.u&&(Lt.clearTimeout(n.u),n.u=null),Hg(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Lt.clearTimeout(n.m),n.m=null)}function n0(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&vy(n)}function vy(n){Yo(n.i)||n.m||(n.m=!0,IT(n.Ha,n),n.C=0)}function KT(n,e){var t;t=e?e.m:n.V++;const r=Ga(n.F);Hn(r,"SID",n.J),Hn(r,"RID",t),Hn(r,"AID",n.U),$g(n,r),n.o&&n.s&&e0(r,n.o,n.s),t=new mf(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=YT(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),_y(n.i,t),Ng(t,r,e)}function $g(n,e){n.j&&kg({},function(t,r){Hn(e,r,t)})}function YT(n,e,t){t=Math.min(n.l.length,t);var r=n.j?ti(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=o[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let p=!0;for(let y=0;y<t;y++){let w=o[y].h;const D=o[y].g;if(w-=u,0>w)u=Math.max(0,o[y].h-100),p=!1;else try{nN(D,d,"req"+w+"_")}catch(S){r&&r(D)}}if(p){r=d.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function QT(n){n.g||n.u||(n.Y=1,IT(n.Ga,n),n.A=0)}function r0(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Uu(ti(n.Ga,n),a0(n,n.A)),n.A++,0))}function s0(n){null!=n.B&&(Lt.clearTimeout(n.B),n.B=null)}function JT(n){n.g=new mf(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Ga(n.oa);Hn(e,"RID","rpc"),Hn(e,"SID",n.J),Hn(e,"CI",n.N?"0":"1"),Hn(e,"AID",n.U),$g(n,e),Hn(e,"TYPE","xmlhttp"),n.o&&n.s&&e0(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=my(Ga(e)),t.s=null,t.U=!0,dy(t,n)}function Hg(n){null!=n.v&&(Lt.clearTimeout(n.v),n.v=null)}function o0(n,e){var t=null;if(n.g==e){Hg(n),s0(n),n.g=null;var r=2}else{if(!Us(n.i,e))return;t=e.D,$w(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Fi(r=Dg(),new QR(r,t,e,o)),vy(n)}else QT(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function(n,e){return!(_o(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Uu(ti(n.Ha,n,e),a0(n,n.C)),n.C++,0)))}(n,e)||2==r&&r0(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:Zl(n,5);break;case 4:Zl(n,10);break;case 3:Zl(n,6);break;default:Zl(n,2)}}function a0(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Zl(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=ti(n.jb,n);t||(t=new Gl("//www.google.com/images/cleardot.gif"),Lt.location&&"http"==Lt.location.protocol||Pg(t,"https"),my(t)),function(n,e){const t=new ry;if(Lt.Image){const r=new Image;r.onload=wg(ql,t,r,"TestLoadImage: loaded",!0,e),r.onerror=wg(ql,t,r,"TestLoadImage: error",!1,e),r.onabort=wg(ql,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=wg(ql,t,r,"TestLoadImage: timeout",!1,e),Lt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ns(2);n.G=0,n.j&&n.j.va(e),u0(n),zT(n)}function u0(n){n.G=0,n.I=-1,n.j&&((0!=HT(n.i).length||0!=n.l.length)&&(n.i.i.length=0,vw(n.l),n.l.length=0),n.j.ua())}function l0(n,e,t){let r=function(n){return n instanceof Gl?Ga(n):new Gl(n,void 0)}(t);if(""!=r.i)e&&Uw(r,e+"."+r.i),gy(r,r.m);else{const o=Lt.location;r=function(n,e,t,r){var o=new Gl(null,void 0);return n&&Pg(o,n),e&&Uw(o,e),t&&gy(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&md(n.aa,function(o,u){Hn(r,u,o)}),t=n.sa,(e=n.D)&&t&&Hn(r,e,t),Hn(r,"VER",n.ma),$g(n,r),r}function c0(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Er(t&&n.Ba&&!n.qa?new Vg({ib:!0}):n.qa)).L=n.H,e}function d0(){}function Gg(){if(mo&&!(10<=Number(fT)))throw Error("Environmental error: no available transport.")}function rs(n,e){_i.call(this),this.g=new ZT(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Z_(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Z_(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Ef(this)}function h0(n){cy.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function zl(){xT.call(this),this.status=1}function Ef(n){this.g=n}(it=Er.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Pw.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:Pw),this.g.onreadystatechange=ti(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void Yw(this,u)}n=t||"";const o=new wd(this.headers);r&&kg(r,function(u,d){o.set(d,u)}),r=function(n){e:{var e=qT;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=Lt.FormData&&n instanceof Lt.FormData,!(0<=uT(Kw,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,d){this.g.setRequestHeader(d,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Xw(this),0<this.B&&((this.K=function(n){return mo&&df()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ti(this.pa,this)):this.A=Rw(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Yw(this,u)}},it.pa=function(){void 0!==vg&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Fi(this,"timeout"),this.abort(8))},it.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Fi(this,"complete"),Fi(this,"abort"),Bg(this))},it.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Bg(this,!0)),Er.Z.M.call(this)},it.Fa=function(){this.s||(this.F||this.v||this.l?Jw(this):this.cb())},it.cb=function(){Jw(this)},it.ba=function(){try{return 2<Wa(this)?this.g.status:-1}catch(n){return-1}},it.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},it.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),rN(e)}},it.Da=function(){return this.m},it.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(it=ZT.prototype).ma=8,it.G=1,it.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},it.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new mf(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=dT(u),z_(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=YT(this,o,e),Hn(t=Ga(this.F),"RID",n),Hn(t,"CVER",22),this.D&&Hn(t,"X-HTTP-Session-Id",this.D),$g(this,t),this.o&&u&&e0(t,this.o,u),_y(this.i,o),this.Ra&&Hn(t,"TYPE","init"),this.ja?(Hn(t,"$req",e),Hn(t,"SID","null"),o.$=!0,Ng(o,t,null)):Ng(o,t,e),this.G=2}}else 3==this.G&&(n?KT(this,n):0==this.l.length||Yo(this.i)||KT(this))},it.Ga=function(){if(this.u=null,JT(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Uu(ti(this.bb,this),n)}},it.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ns(10),yy(this),JT(this))},it.ab=function(){null!=this.v&&(this.v=null,yy(this),r0(this),ns(19))},it.jb=function(n){n?(this.h.info("Successfully pinged google.com"),ns(2)):(this.h.info("Failed to ping google.com"),ns(1))},(it=d0.prototype).xa=function(){},it.wa=function(){},it.va=function(){},it.ua=function(){},it.Oa=function(){},Gg.prototype.g=function(n,e){return new rs(n,e)},gi(rs,_i),rs.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),IT(ti(n.hb,n,e))),ns(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=l0(n,null,n.W),vy(n)},rs.prototype.close=function(){t0(this.g)},rs.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,n0(this.g,e)}else this.v?((e={}).__data__=CT(n),n0(this.g,e)):n0(this.g,n)},rs.prototype.M=function(){this.g.j=null,delete this.j,t0(this.g),delete this.g,rs.Z.M.call(this)},gi(h0,cy),gi(zl,xT),gi(Ef,d0),Ef.prototype.xa=function(){Fi(this.g,"a")},Ef.prototype.wa=function(n){Fi(this.g,new h0(n))},Ef.prototype.va=function(n){Fi(this.g,new zl(n))},Ef.prototype.ua=function(){Fi(this.g,"b")},Gg.prototype.createWebChannel=Gg.prototype.g,rs.prototype.send=rs.prototype.u,rs.prototype.open=rs.prototype.m,rs.prototype.close=rs.prototype.close,ay.NO_ERROR=0,ay.TIMEOUT=8,ay.HTTP_ERROR=6,uy.COMPLETE="complete",ly.EventType=vd,vd.OPEN="a",vd.CLOSE="b",vd.ERROR="c",vd.MESSAGE="d",_i.prototype.listen=_i.prototype.N,Er.prototype.listenOnce=Er.prototype.O,Er.prototype.getLastError=Er.prototype.La,Er.prototype.getLastErrorCode=Er.prototype.Da,Er.prototype.getStatus=Er.prototype.ba,Er.prototype.getResponseJson=Er.prototype.Qa,Er.prototype.getResponseText=Er.prototype.ga,Er.prototype.send=Er.prototype.ea;var oN=Ll.createWebChannelTransport=function(){return new Gg},wf=Ll.getStatEventTarget=function(){return Dg()},XT=Ll.ErrorCode=ay,f0=Ll.EventType=uy,k1=Ll.Event=yd,p0=Ll.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},eD=Ll.FetchXmlHttpFactory=Vg,g0=Ll.WebChannel=ly,yt=Ll.XhrIo=Er;const tD="@firebase/firestore";class yi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yi.UNAUTHENTICATED=new yi(null),yi.GOOGLE_CREDENTIALS=new yi("google-credentials-uid"),yi.FIRST_PARTY=new yi("first-party-uid"),yi.MOCK_USER=new yi("mock-user");let bf="9.8.0";const Qo=new fo.Yd("@firebase/firestore");function m0(){return Qo.logLevel}function Ue(n,...e){if(Qo.logLevel<=fo.in.DEBUG){const t=e.map(by);Qo.debug(`Firestore (${bf}): ${n}`,...t)}}function qt(n,...e){if(Qo.logLevel<=fo.in.ERROR){const t=e.map(by);Qo.error(`Firestore (${bf}): ${n}`,...t)}}function wy(n,...e){if(Qo.logLevel<=fo.in.WARN){const t=e.map(by);Qo.warn(`Firestore (${bf}): ${n}`,...t)}}function by(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function tt(n="Unexpected state"){const e=`FIRESTORE (${bf}) INTERNAL ASSERTION FAILED: `+n;throw qt(e),new Error(e)}function kt(n,e){n||tt()}function Ye(n,e){return n}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends F.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ni{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class rD{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class aN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(yi.UNAUTHENTICATED))}shutdown(){}}class qg{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class uN{constructor(e){this.t=e,this.currentUser=yi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=w=>this.i!==o?(o=this.i,t(w)):Promise.resolve();let d=new ni;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new ni,e.enqueueRetryable(()=>u(this.currentUser))};const p=()=>{const w=d;e.enqueueRetryable((0,Ce.Z)(function*(){yield w.promise,yield u(r.currentUser)}))},y=w=>{Ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(w=>y(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?y(w):(Ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new ni)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(kt("string"==typeof r.accessToken),new rD(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return kt(null===e||"string"==typeof e),new yi(e)}}class lN{constructor(e,t,r){this.type="FirstParty",this.user=yi.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class cN{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new lN(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(yi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Wg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class iD{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.p;return this.p=u.token,Ue("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?o(u):Ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(kt("string"==typeof t.token),this.p=t.token,new Wg(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class vs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function hN(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}vs.A=-1;class Cf{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=hN(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Pt(n,e){return n<e?-1:n>e?1:0}function If(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function sD(n){return n+"\0"}class wr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Re(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return wr.fromMillis(Date.now())}static fromDate(e){return wr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new wr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Pt(this.nanoseconds,e.nanoseconds):Pt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ct{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ct(e)}static min(){return new Ct(new wr(0,0))}static max(){return new Ct(new wr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function _0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Kl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function oD(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Tf{constructor(e,t,r){void 0===t?t=0:t>e.length&&tt(),void 0===r?r=e.length-t:r>e.length-t&&tt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Tf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Tf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),d=t.get(o);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class dn extends Tf{construct(e,t,r){return new dn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new dn(t)}static emptyPath(){return new dn([])}}const fN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ri extends Tf{construct(e,t,r){return new ri(e,t,r)}static isValidIdentifier(e){return fN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ri.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ri(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Re(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const p=e[o];if("\\"===p){if(o+1===e.length)throw new Re(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if("\\"!==y&&"."!==y&&"`"!==y)throw new Re(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,o+=2}else"`"===p?(d=!d,o++):"."!==p||d?(r+=p,o++):(u(),o++)}if(u(),d)throw new Re(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ri(t)}static emptyPath(){return new ri([])}}class Zg{constructor(e){this.fields=e,e.sort(ri.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return If(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class ii{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new ii(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new ii(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ii.EMPTY_BYTE_STRING=new ii("");const aD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jo(n){if(kt(!!n),"string"==typeof n){let e=0;const t=aD.exec(n);if(kt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pr(n.seconds),nanos:pr(n.nanos)}}function pr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Cd(n){return"string"==typeof n?ii.fromBase64String(n):ii.fromUint8Array(n)}function Cy(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Df(n){const e=n.mapValue.fields.__previous_value__;return Cy(e)?Df(e):e}function zg(n){const e=Jo(n.mapValue.fields.__local_write_time__.timestampValue);return new wr(e.seconds,e.nanos)}class pN{constructor(e,t,r,o,u,d,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.useFetchStreams=y}}class ju{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ju("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ju&&e.projectId===this.projectId&&e.database===this.database}}function Kg(n){return null==n}function Yg(n){return 0===n&&1/n==-1/0}function y0(n){return"number"==typeof n&&Number.isInteger(n)&&!Yg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Ke{constructor(e){this.path=e}static fromPath(e){return new Ke(dn.fromString(e))}static fromName(e){return new Ke(dn.fromString(e).popFirst(5))}static empty(){return new Ke(dn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===dn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return dn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ke(new dn(e.slice()))}}const Yl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},$u={nullValue:"NULL_VALUE"};function Id(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Cy(n)?4:Ty(n)?9007199254740991:10:tt()}function Xo(n,e){if(n===e)return!0;const t=Id(n);if(t!==Id(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return zg(n).isEqual(zg(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Jo(r.timestampValue),d=Jo(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Cd(n.bytesValue).isEqual(Cd(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return pr(r.geoPointValue.latitude)===pr(o.geoPointValue.latitude)&&pr(r.geoPointValue.longitude)===pr(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return pr(r.integerValue)===pr(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=pr(r.doubleValue),d=pr(o.doubleValue);return u===d?Yg(u)===Yg(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return If(n.arrayValue.values||[],e.arrayValue.values||[],Xo);case 10:return function(r,o){const u=r.mapValue.fields||{},d=o.mapValue.fields||{};if(_0(u)!==_0(d))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(void 0===d[p]||!Xo(u[p],d[p])))return!1;return!0}(n,e);default:return tt()}var o}function Qg(n,e){return void 0!==(n.values||[]).find(t=>Xo(t,e))}function Hu(n,e){if(n===e)return 0;const t=Id(n),r=Id(e);if(t!==r)return Pt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Pt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const d=pr(o.integerValue||o.doubleValue),p=pr(u.integerValue||u.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1}(n,e);case 3:return uD(n.timestampValue,e.timestampValue);case 4:return uD(zg(n),zg(e));case 5:return Pt(n.stringValue,e.stringValue);case 6:return function(o,u){const d=Cd(o),p=Cd(u);return d.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const d=o.split("/"),p=u.split("/");for(let y=0;y<d.length&&y<p.length;y++){const w=Pt(d[y],p[y]);if(0!==w)return w}return Pt(d.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const d=Pt(pr(o.latitude),pr(u.latitude));return 0!==d?d:Pt(pr(o.longitude),pr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const d=o.values||[],p=u.values||[];for(let y=0;y<d.length&&y<p.length;++y){const w=Hu(d[y],p[y]);if(w)return w}return Pt(d.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===Yl.mapValue&&u===Yl.mapValue)return 0;if(o===Yl.mapValue)return 1;if(u===Yl.mapValue)return-1;const d=o.fields||{},p=Object.keys(d),y=u.fields||{},w=Object.keys(y);p.sort(),w.sort();for(let D=0;D<p.length&&D<w.length;++D){const S=Pt(p[D],w[D]);if(0!==S)return S;const P=Hu(d[p[D]],y[w[D]]);if(0!==P)return P}return Pt(p.length,w.length)}(n.mapValue,e.mapValue);default:throw tt()}}function uD(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Pt(n,e);const t=Jo(n),r=Jo(e),o=Pt(t.seconds,r.seconds);return 0!==o?o:Pt(t.nanos,r.nanos)}function Td(n){return v0(n)}function v0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Jo(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Cd(n.bytesValue).toBase64():"referenceValue"in n?Ke.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=v0(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const p of o)d?d=!1:u+=",",u+=`${p}:${v0(r.fields[p])}`;return u+"}"}(n.mapValue):tt();var e}function Gu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function E0(n){return!!n&&"integerValue"in n}function Af(n){return!!n&&"arrayValue"in n}function w0(n){return!!n&&"nullValue"in n}function lD(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Iy(n){return!!n&&"mapValue"in n}function Jg(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Kl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Jg(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Jg(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Ty(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function gN(n){return"nullValue"in n?$u:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Gu(ju.empty(),Ke.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:tt()}function cD(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Gu(ju.empty(),Ke.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Yl:tt()}function dD(n,e){const t=Hu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function hD(n,e){const t=Hu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Li{constructor(e){this.value=e}static empty(){return new Li({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Iy(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jg(t)}setAll(e){let t=ri.emptyPath(),r={},o=[];e.forEach((d,p)=>{if(!t.isImmediateParentOf(p)){const y=this.getFieldsMap(t);this.applyChanges(y,r,o),r={},o=[],t=p.popLast()}d?r[p.lastSegment()]=Jg(d):o.push(p.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());Iy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Xo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Iy(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Kl(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new Li(Jg(this.value))}}function fD(n){const e=[];return Kl(n.fields,(t,r)=>{const o=new ri([t]);if(Iy(r)){const u=fD(r.mapValue).fields;if(0===u.length)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new Zg(e)}class Gn{constructor(e,t,r,o,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=d}static newInvalidDocument(e){return new Gn(e,0,Ct.min(),Ct.min(),Li.empty(),0)}static newFoundDocument(e,t,r){return new Gn(e,1,t,Ct.min(),r,0)}static newNoDocument(e,t){return new Gn(e,2,t,Ct.min(),Li.empty(),0)}static newUnknownDocument(e,t){return new Gn(e,3,t,Ct.min(),Li.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Li.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Li.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Gn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Dy{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function b0(n){return n.fields.find(e=>2===e.kind)}function Dd(n){return n.fields.filter(e=>2!==e.kind)}Dy.UNKNOWN_ID=-1;class Xg{constructor(e,t){this.fieldPath=e,this.kind=t}}class Sf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Sf(0,yo.min())}}function pD(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=Ct.fromTimestamp(1e9===r?new wr(t+1,0):new wr(t,r));return new yo(o,Ke.empty(),e)}function mN(n){return new yo(n.readTime,n.key,-1)}class yo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new yo(Ct.min(),Ke.empty(),-1)}static max(){return new yo(Ct.max(),Ke.empty(),-1)}}function gD(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ke.comparator(n.documentKey,e.documentKey),0!==t?t:Pt(n.largestBatchId,e.largestBatchId))}class br{constructor(e,t){this.comparator=e,this.root=t||$r.EMPTY}insert(e,t){return new br(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,$r.BLACK,null,null))}remove(e){return new br(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$r.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ay(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ay(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ay(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ay(this.root,e,this.comparator,!0)}}class Ay{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $r{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:$r.RED,this.left=null!=o?o:$r.EMPTY,this.right=null!=u?u:$r.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new $r(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return $r.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return $r.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$r.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$r.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw tt();const e=this.left.check();if(e!==this.right.check())throw tt();return e+(this.isRed()?0:1)}}$r.EMPTY=null,$r.RED=!0,$r.BLACK=!1,$r.EMPTY=new class{constructor(){this.size=0}get key(){throw tt()}get value(){throw tt()}get color(){throw tt()}get left(){throw tt()}get right(){throw tt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new $r(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class On{constructor(e){this.comparator=e,this.data=new br(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new C0(this.data.getIterator())}getIteratorFrom(e){return new C0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof On)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new On(this.comparator);return t.data=e,t}}class C0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ql(n){return n.hasNext()?n.getNext():void 0}class _N{constructor(e,t=null,r=[],o=[],u=null,d=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=p,this.P=null}}function mD(n,e=null,t=[],r=[],o=null,u=null,d=null){return new _N(n,e,t,r,o,u,d)}function qu(n){const e=Ye(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+Td(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Kg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Td(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Td(r)).join(",")),e.P=t}return e.P}function xf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!Za(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!Xo(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!bN(n.startAt,e.startAt)&&bN(n.endAt,e.endAt)}function Sy(n){return Ke.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function em(n,e){return n.filters.filter(t=>t instanceof Vi&&t.field.isEqual(e))}function I0(n,e,t){let r=$u,o=!0;for(const u of em(n,e)){let d=$u,p=!0;switch(u.op){case"<":case"<=":d=gN(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,p=!1;break;case"!=":case"not-in":d=$u}dD({value:r,inclusive:o},{value:d,inclusive:p})<0&&(r=d,o=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];dD({value:r,inclusive:o},{value:d,inclusive:t.inclusive})<0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}function T0(n,e,t){let r=Yl,o=!0;for(const u of em(n,e)){let d=Yl,p=!0;switch(u.op){case">=":case">":d=cD(u.value),p=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,p=!1;break;case"!=":case"not-in":d=Yl}hD({value:r,inclusive:o},{value:d,inclusive:p})>0&&(r=d,o=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];hD({value:r,inclusive:o},{value:d,inclusive:t.inclusive})>0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}class Vi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new vN(e,t,r):"array-contains"===t?new Ry(e,r):"in"===t?new EN(e,r):"not-in"===t?new Nf(e,r):"array-contains-any"===t?new wN(e,r):new Vi(e,t,r)}static V(e,t,r){return"in"===t?new Rf(e,r):new O1(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Hu(t,this.value)):null!==t&&Id(this.value)===Id(t)&&this.v(Hu(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return tt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class vN extends Vi{constructor(e,t,r){super(e,t,r),this.key=Ke.fromName(r.referenceValue)}matches(e){const t=Ke.comparator(e.key,this.key);return this.v(t)}}class Rf extends Vi{constructor(e,t){super(e,"in",t),this.keys=xy(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class O1 extends Vi{constructor(e,t){super(e,"not-in",t),this.keys=xy(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function xy(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ke.fromName(r.referenceValue))}class Ry extends Vi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Af(t)&&Qg(t.arrayValue,this.value)}}class EN extends Vi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Qg(this.value.arrayValue,t)}}class Nf extends Vi{constructor(e,t){super(e,"not-in",t)}matches(e){if(Qg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Qg(this.value.arrayValue,t)}}class wN extends Vi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Af(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Qg(this.value.arrayValue,r))}}class Ad{constructor(e,t){this.position=e,this.inclusive=t}}class Mf{constructor(e,t="asc"){this.field=e,this.dir=t}}function Za(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function D0(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],d=n.position[o];if(r=u.field.isKeyField()?Ke.comparator(Ke.fromName(d.referenceValue),t.key):Hu(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function bN(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Xo(n.position[t],e.position[t]))return!1;return!0}class vo{constructor(e,t=null,r=[],o=[],u=null,d="F",p=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=p,this.endAt=y,this.D=null,this.C=null}}function _D(n,e,t,r,o,u,d,p){return new vo(n,e,t,r,o,u,d,p)}function kf(n){return new vo(n)}function A0(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function S0(n){for(const e of n.filters)if(e.S())return e.field;return null}function x0(n){return null!==n.collectionGroup}function Jl(n){const e=Ye(n);if(null===e.D){e.D=[];const t=S0(e),r=A0(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Mf(t)),e.D.push(new Mf(ri.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Mf(ri.keyField(),u))}}}return e.D}function Bs(n){const e=Ye(n);if(!e.C)if("F"===e.limitType)e.C=mD(e.path,e.collectionGroup,Jl(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Jl(e))t.push(new Mf(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Ad(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new Ad(e.startAt.position,e.startAt.inclusive):null;e.C=mD(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.C}function Ny(n,e,t){return new vo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Pf(n,e){return xf(Bs(n),Bs(e))&&n.limitType===e.limitType}function yD(n){return`${qu(Bs(n))}|lt:${n.limitType}`}function vD(n){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Td(r.value)}`;var r}).join(", ")}]`),Kg(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Td(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Td(t)).join(",")),`Target(${e})`}(Bs(n))}; limitType=${n.limitType})`}function R0(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Ke.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,d){const p=D0(o,u,d);return o.inclusive?p<=0:p<0}(t.startAt,Jl(t),r)||t.endAt&&!function(o,u,d){const p=D0(o,u,d);return o.inclusive?p>=0:p>0}(t.endAt,Jl(t),r)));var t,r}function ED(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function wD(n){return(e,t)=>{let r=!1;for(const o of Jl(n)){const u=bD(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function bD(n,e,t){const r=n.field.isKeyField()?Ke.comparator(e.key,t.key):function(o,u,d){const p=u.data.field(o),y=d.data.field(o);return null!==p&&null!==y?Hu(p,y):tt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return tt()}}function N0(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yg(e)?"-0":e}}function M0(n){return{integerValue:""+n}}function CD(n,e){return y0(e)?M0(e):N0(n,e)}class My{constructor(){this._=void 0}}function ID(n,e,t){return n instanceof Sd?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof za?tm(n,e):n instanceof ea?DD(n,e):function(r,o){const u=TD(r,o),d=CN(u)+CN(r.k);return E0(u)&&E0(r.k)?M0(d):N0(r.M,d)}(n,e)}function ky(n,e,t){return n instanceof za?tm(n,e):n instanceof ea?DD(n,e):t}function TD(n,e){return n instanceof Of?E0(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Sd extends My{}class za extends My{constructor(e){super(),this.elements=e}}function tm(n,e){const t=AD(e);for(const r of n.elements)t.some(o=>Xo(o,r))||t.push(r);return{arrayValue:{values:t}}}class ea extends My{constructor(e){super(),this.elements=e}}function DD(n,e){let t=AD(e);for(const r of n.elements)t=t.filter(o=>!Xo(o,r));return{arrayValue:{values:t}}}class Of extends My{constructor(e,t){super(),this.M=e,this.k=t}}function CN(n){return pr(n.integerValue||n.doubleValue)}function AD(n){return Af(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class nm{constructor(e,t){this.field=e,this.transform=t}}class TN{constructor(e,t){this.version=e,this.transformResults=t}}class kr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new kr}static exists(e){return new kr(void 0,e)}static updateTime(e){return new kr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Py(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Oy{}function DN(n,e,t){n instanceof rm?function(r,o,u){const d=r.value.clone(),p=im(r.fieldTransforms,o,u.transformResults);d.setAll(p),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof xd?function(r,o,u){if(!Py(r.precondition,o))return void o.convertToUnknownDocument(u.version);const d=im(r.fieldTransforms,o,u.transformResults),p=o.data;p.setAll(xD(r)),p.setAll(d),o.convertToFoundDocument(u.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function k0(n,e,t){var o;n instanceof rm?function(r,o,u){if(!Py(r.precondition,o))return;const d=r.value.clone(),p=Xl(r.fieldTransforms,u,o);d.setAll(p),o.convertToFoundDocument(Ff(o),d).setHasLocalMutations()}(n,e,t):n instanceof xd?function(r,o,u){if(!Py(r.precondition,o))return;const d=Xl(r.fieldTransforms,u,o),p=o.data;p.setAll(xD(r)),p.setAll(d),o.convertToFoundDocument(Ff(o),p).setHasLocalMutations()}(n,e,t):Py(n.precondition,o=e)&&o.convertToNoDocument(Ct.min())}function L1(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=TD(r.transform,o||null);null!=u&&(null==t&&(t=Li.empty()),t.set(r.field,u))}return t||null}function SD(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&If(t,r,(o,u)=>function(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof za&&r instanceof za||t instanceof ea&&r instanceof ea?If(t.elements,r.elements,Xo):t instanceof Of&&r instanceof Of?Xo(t.k,r.k):t instanceof Sd&&r instanceof Sd);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function Ff(n){return n.isFoundDocument()?n.version:Ct.min()}class rm extends Oy{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class xd extends Oy{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}}function xD(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function im(n,e,t){const r=new Map;kt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],d=u.transform,p=e.data.field(u.field);r.set(u.field,ky(d,p,t[o]))}return r}function Xl(n,e,t){const r=new Map;for(const o of n){const u=o.transform,d=t.data.field(o.field);r.set(o.field,ID(u,d,e))}return r}class Lf extends Oy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class P0 extends Oy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class V1{constructor(e){this.count=e}}var Pr,tn;function RD(n){switch(n){default:return tt();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0}}function ND(n){if(void 0===n)return qt("GRPC error has no .code"),ge.UNKNOWN;switch(n){case Pr.OK:return ge.OK;case Pr.CANCELLED:return ge.CANCELLED;case Pr.UNKNOWN:return ge.UNKNOWN;case Pr.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case Pr.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case Pr.INTERNAL:return ge.INTERNAL;case Pr.UNAVAILABLE:return ge.UNAVAILABLE;case Pr.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case Pr.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case Pr.NOT_FOUND:return ge.NOT_FOUND;case Pr.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case Pr.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case Pr.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case Pr.ABORTED:return ge.ABORTED;case Pr.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case Pr.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case Pr.DATA_LOSS:return ge.DATA_LOSS;default:return tt()}}(tn=Pr||(Pr={}))[tn.OK=0]="OK",tn[tn.CANCELLED=1]="CANCELLED",tn[tn.UNKNOWN=2]="UNKNOWN",tn[tn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tn[tn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tn[tn.NOT_FOUND=5]="NOT_FOUND",tn[tn.ALREADY_EXISTS=6]="ALREADY_EXISTS",tn[tn.PERMISSION_DENIED=7]="PERMISSION_DENIED",tn[tn.UNAUTHENTICATED=16]="UNAUTHENTICATED",tn[tn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tn[tn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tn[tn.ABORTED=10]="ABORTED",tn[tn.OUT_OF_RANGE=11]="OUT_OF_RANGE",tn[tn.UNIMPLEMENTED=12]="UNIMPLEMENTED",tn[tn.INTERNAL=13]="INTERNAL",tn[tn.UNAVAILABLE=14]="UNAVAILABLE",tn[tn.DATA_LOSS=15]="DATA_LOSS";class Wu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Kl(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return oD(this.inner)}size(){return this.innerSize}}const MD=new br(Ke.comparator);function Es(){return MD}const kD=new br(Ke.comparator);function Fy(...n){let e=kD;for(const t of n)e=e.insert(t.key,t);return e}function sm(){return new Wu(n=>n.toString(),(n,e)=>n.isEqual(e))}const AN=new br(Ke.comparator),PD=new On(Ke.comparator);function Sn(...n){let e=PD;for(const t of n)e=e.add(t);return e}const OD=new On(Pt);function Rd(){return OD}class ec{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Ly.createSynthesizedTargetChangeForCurrentChange(e,t)),new ec(Ct.min(),r,Rd(),Es(),Sn())}}class Ly{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Ly(ii.EMPTY_BYTE_STRING,t,Sn(),Sn(),Sn())}}class tc{constructor(e,t,r,o){this.O=e,this.removedTargetIds=t,this.key=r,this.F=o}}class Tn{constructor(e,t){this.targetId=e,this.$=t}}class Zu{constructor(e,t,r=ii.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class Nd{constructor(){this.B=0,this.L=Ot(),this.U=ii.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=Sn(),t=Sn(),r=Sn();return this.L.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:tt()}}),new Ly(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=Ot()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class om{constructor(e){this.nt=e,this.st=new Map,this.it=Es(),this.rt=SN(),this.ot=new On(Pt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:tt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,o)=>{this.ft(o)&&t(o)})}_t(e){const t=e.targetId,r=e.$.count,o=this.wt(t);if(o){const u=o.target;if(Sy(u))if(0===r){const d=new Ke(u.path);this.ct(t,d,Gn.newNoDocument(d,Ct.min()))}else kt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,d)=>{const p=this.wt(d);if(p){if(u.current&&Sy(p.target)){const y=new Ke(p.target.path);null!==this.it.get(y)||this.It(d,y)||this.ct(d,y,Gn.newNoDocument(y,e))}u.j&&(t.set(d,u.H()),u.J())}});let r=Sn();this.rt.forEach((u,d)=>{let p=!0;d.forEachWhile(y=>{const w=this.wt(y);return!w||2===w.purpose||(p=!1,!1)}),p&&(r=r.add(u))}),this.it.forEach((u,d)=>d.setReadTime(e));const o=new ec(e,t,this.ot,this.it,r);return this.it=Es(),this.rt=SN(),this.ot=new On(Pt),o}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,t)?o.Y(t,1):o.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Nd,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new On(Pt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Ue("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new Nd),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function SN(){return new br(Ke.comparator)}function Ot(){return new br(Ke.comparator)}const Eo={asc:"ASCENDING",desc:"DESCENDING"},O0={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Md{constructor(e,t){this.databaseId=e,this.N=t}}function Vy(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function F0(n,e){return n.N?e.toBase64():e.toUint8Array()}function FD(n,e){return Vy(n,e.toTimestamp())}function vi(n){return kt(!!n),Ct.fromTimestamp(function(e){const t=Jo(e);return new wr(t.seconds,t.nanos)}(n))}function L0(n,e){return(t=n,new dn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function LD(n){const e=dn.fromString(n);return kt(Gy(e)),e}function Ui(n,e){return L0(n.databaseId,e.path)}function Cn(n,e){const t=LD(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ke(U0(t))}function js(n,e){return L0(n.databaseId,e)}function V0(n){const e=LD(n);return 4===e.length?dn.emptyPath():U0(e)}function am(n){return new dn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function U0(n){return kt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Uy(n,e,t){return{name:Ui(n,e),fields:t.value.mapValue.fields}}function kd(n,e,t){const r=Cn(n,e.name),o=vi(e.updateTime),u=new Li({mapValue:{fields:e.fields}}),d=Gn.newFoundDocument(r,o,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function ta(n,e){let t;if(e instanceof rm)t={update:Uy(n,e.key,e.value)};else if(e instanceof Lf)t={delete:Ui(n,e.key)};else if(e instanceof xd)t={update:Uy(n,e.key,e.data),updateMask:NN(e.fieldMask)};else{if(!(e instanceof P0))return tt();t={verify:Ui(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const d=u.transform;if(d instanceof Sd)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof za)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof ea)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Of)return{fieldPath:u.field.canonicalString(),increment:d.k};throw tt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:FD(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:tt()),t;var o}function B0(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?kr.updateTime(vi(o.updateTime)):void 0!==o.exists?kr.exists(o.exists):kr.none():kr.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,d){let p=null;"setToServerValue"in d?(kt("REQUEST_TIME"===d.setToServerValue),p=new Sd):"appendMissingElements"in d?p=new za(d.appendMissingElements.values||[]):"removeAllFromArray"in d?p=new ea(d.removeAllFromArray.values||[]):"increment"in d?p=new Of(u,d.increment):tt();const y=ri.fromServerFormat(d.fieldPath);return new nm(y,p)}(n,o)):[];var o;if(e.update){const o=Cn(n,e.update.name),u=new Li({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new Zg((e.updateMask.fieldPaths||[]).map(w=>ri.fromServerFormat(w)));return new xd(o,u,d,t,r)}return new rm(o,u,t,r)}if(e.delete){const o=Cn(n,e.delete);return new Lf(o,t)}if(e.verify){const o=Cn(n,e.verify);return new P0(o,t)}return tt()}function By(n,e){return{documents:[js(n,e.path)]}}function Vf(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=js(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=js(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(y){if(0===y.length)return;const w=y.map(D=>function(S){if("=="===S.op){if(lD(S.value))return{unaryFilter:{field:Od(S.field),op:"IS_NAN"}};if(w0(S.value))return{unaryFilter:{field:Od(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(lD(S.value))return{unaryFilter:{field:Od(S.field),op:"IS_NOT_NAN"}};if(w0(S.value))return{unaryFilter:{field:Od(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Od(S.field),op:$y(S.op),value:S.value}}}(D));return 1===w.length?w[0]:{compositeFilter:{op:"AND",filters:w}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(y){if(0!==y.length)return y.map(w=>{return{field:Od((D=w).field),direction:RN(D.dir)};var D})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(w=e.limit,n.N||Kg(w)?w:{value:w});var w,p,y;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(p=e.startAt).inclusive,values:p.position}),e.endAt&&(t.structuredQuery.endAt={before:!(y=e.endAt).inclusive,values:y.position}),t}function jy(n){let e=V0(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){kt(1===r);const D=t.from[0];D.allDescendants?o=D.collectionId:e=e.child(D.collectionId)}let u=[];t.where&&(u=Pd(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(D=>{return new Mf(Fd((S=D).field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let p=null;t.limit&&(p=function(D){let S;return S="object"==typeof D?D.value:D,Kg(S)?null:S}(t.limit));let y=null;var D;t.startAt&&(y=new Ad((D=t.startAt).values||[],!!D.before));let w=null;return t.endAt&&(w=function(D){return new Ad(D.values||[],!D.before)}(t.endAt)),_D(e,o,d,u,p,"F",y,w)}function Pd(n){return n?void 0!==n.unaryFilter?[Hy(n)]:void 0!==n.fieldFilter?[BD(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Pd(e)).reduce((e,t)=>e.concat(t)):tt():[]}function RN(n){return Eo[n]}function $y(n){return O0[n]}function Od(n){return{fieldPath:n.canonicalString()}}function Fd(n){return ri.fromServerFormat(n.fieldPath)}function BD(n){return Vi.create(Fd(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return tt()}}(n.fieldFilter.op),n.fieldFilter.value)}function Hy(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Fd(n.unaryFilter.field);return Vi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Fd(n.unaryFilter.field);return Vi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Fd(n.unaryFilter.field);return Vi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Fd(n.unaryFilter.field);return Vi.create(o,"!=",{nullValue:"NULL_VALUE"});default:return tt()}}function NN(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Gy(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ei(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=MN(e)),e=U1(n.get(t),e);return MN(e)}function U1(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function MN(n){return n+"\x01\x01"}function pt(n){const e=n.length;if(kt(e>=2),2===e)return kt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),dn.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&tt(),n.charAt(d+1)){case"\x01":const p=n.substring(u,d);let y;0===o.length?y=p:(o+=p,y=o,o=""),r.push(y);break;case"\x10":o+=n.substring(u,d),o+="\0";break;case"\x11":o+=n.substring(u,d+1);break;default:tt()}u=d+2}return new dn(r)}const kN=["userId","batchId"];function nc(n,e){return[n,Ei(e)]}function jD(n,e,t){return[n,Ei(e),t]}const PN={},ON=["prefixPath","collectionGroup","readTime","documentId"],B1=["prefixPath","collectionGroup","documentId"],j1=["collectionGroup","readTime","prefixPath","documentId"],FN=["canonicalId","targetId"],Bi=["targetId","path"],LN=["path","targetId"],VN=["collectionId","parent"],j0=["indexId","uid"],UN=["uid","sequenceNumber"],BN=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],jN=["indexId","uid","orderedDocumentKey"],$N=["userId","collectionPath","documentId"],HN=["userId","collectionPath","largestBatchId"],GN=["userId","collectionGroup","largestBatchId"],qy=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],qN=[...qy,"documentOverlays"],$D=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],HD=[...$D,"indexConfiguration","indexState","indexEntries"],Wy="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class GD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&tt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new me((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof me?t:me.resolve(t)}catch(t){return me.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):me.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):me.reject(t)}static resolve(e){return new me((t,r)=>{t(e)})}static reject(e){return new me((t,r)=>{r(e)})}static waitFor(e){return new me((t,r)=>{let o=0,u=0,d=!1;e.forEach(p=>{++o,p.next(()=>{++u,d&&u===o&&t()},y=>r(y))}),d=!0,u===o&&t()})}static or(e){let t=me.resolve(!1);for(const r of e)t=t.next(o=>o?me.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}}class Zy{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new ni,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new lm(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const o=$0(r.target.error);this.At.reject(new lm(e,o))}}static open(e,t,r,o){try{return new Zy(t,e.transaction(o,r))}catch(u){throw new lm(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Ue("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new ZN(t)}}class na{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===na.Vt((0,F.z$)())&&qt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ue("SimpleDb","Removing database:",e),ra(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,F.hl)())return!1;if(na.St())return!0;const e=(0,F.z$)(),t=na.Vt(e),r=0<t&&t<10,o=na.Dt(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,Ce.Z)(function*(){return t.db||(Ue("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{o(new lm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const p=d.target.error;o("VersionError"===p.name?new Re(ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new Re(ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new lm(e,p))},u.onupgradeneeded=d=>{Ue("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.Pt.kt(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{Ue("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,Ce.Z)(function*(){const d="readonly"===t;let p=0;for(;;){++p;try{u.db=yield u.Nt(e);const y=Zy.open(u.db,e,d?"readonly":"readwrite",r),w=o(y).next(D=>(y.bt(),D)).catch(D=>(y.abort(D),me.reject(D))).toPromise();return w.catch(()=>{}),yield y.Rt,w}catch(y){const w="FirebaseError"!==y.name&&p<3;if(Ue("SimpleDb","Transaction failed with error:",y.message,"Retrying:",w),u.close(),!w)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class WN{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return ra(this.Ft.delete())}}class lm extends Re{constructor(e,t){super(ge.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ld(n){return"IndexedDbTransactionError"===n.name}class ZN{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ue("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ue("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ra(r)}add(e){return Ue("SimpleDb","ADD",this.store.name,e,e),ra(this.store.add(e))}get(e){return ra(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ue("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ue("SimpleDb","DELETE",this.store.name,e),ra(this.store.delete(e))}count(){return Ue("SimpleDb","COUNT",this.store.name),ra(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.Kt(o,(d,p)=>{u.push(p)}).next(()=>u)}{const o=this.store.getAll(r.range);return new me((u,d)=>{o.onerror=p=>{d(p.target.error)},o.onsuccess=p=>{u(p.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new me((o,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}Qt(e,t){Ue("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const o=this.cursor(r);return this.Kt(o,(u,d,p)=>p.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Kt(o,t)}zt(e){const t=this.cursor({});return new me((r,o)=>{t.onerror=u=>{const d=$0(u.target.error);o(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(p=>{p?d.continue():r()}):r()}})}Kt(e,t){const r=[];return new me((o,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const p=d.target.result;if(!p)return void o();const y=new WN(p),w=t(p.primaryKey,p.value,y);if(w instanceof me){const D=w.catch(S=>(y.done(),me.reject(S)));r.push(D)}y.isDone?o():null===y.Lt?p.continue():p.continue(y.Lt)}}).next(()=>me.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ra(n){return new me((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=$0(r.target.error);t(o)}})}let qD=!1;function $0(n){const e=na.Vt((0,F.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return qD||(qD=!0,setTimeout(()=>{throw r},0)),r}}return n}class H0 extends GD{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function gr(n,e){const t=Ye(n);return na.xt(t.Ht,e)}class WD{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&DN(u,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&k0(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&k0(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(Ct.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Sn())}isEqual(e){return this.batchId===e.batchId&&If(this.mutations,e.mutations,(t,r)=>SD(t,r))&&If(this.baseMutations,e.baseMutations,(t,r)=>SD(t,r))}}class zy{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){kt(e.mutations.length===r.length);let o=AN;const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new zy(e,t,r,o)}}class G0{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class rc{constructor(e,t,r,o,u=Ct.min(),d=Ct.min(),p=ii.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p}withSequenceNumber(e){return new rc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new rc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new rc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class ZD{constructor(e){this.Jt=e}}function zD(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:cm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Ui(o=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Vy(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Vd(e.version)};else{if(!e.isUnknownDocument())return tt();r.unknownDocument={path:t.path.toArray(),version:Vd(e.version)}}var o,u;return r}function cm(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Vd(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ud(n){const e=new wr(n.seconds,n.nanoseconds);return Ct.fromTimestamp(e)}function dm(n,e){const t=(e.baseMutations||[]).map(u=>B0(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>B0(n.Jt,u)),o=wr.fromMillis(e.localWriteTimeMs);return new WD(e.batchId,o,t,r)}function Ky(n){const e=Ud(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Ud(n.lastLimboFreeSnapshotVersion):Ct.min();let r;var o;return void 0!==n.query.documents?(kt(1===(o=n.query).documents.length),r=Bs(kf(V0(o.documents[0])))):r=Bs(jy(n.query)),new rc(r,n.targetId,0,n.lastListenSequenceNumber,e,t,ii.fromBase64String(n.resumeToken))}function KN(n,e){const t=Vd(e.snapshotVersion),r=Vd(e.lastLimboFreeSnapshotVersion);let o;o=Sy(e.target)?By(n.Jt,e.target):Vf(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:qu(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function hm(n){const e=jy({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Ny(e,e.limit,"L"):e}function q0(n,e){return new G0(e.largestBatchId,B0(n.Jt,e.overlayMutation))}function KD(n,e){const t=e.path.lastSegment();return[n,Ei(e.path.popLast()),t]}class YN{getBundleMetadata(e,t){return YD(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Ud(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return YD(e).put({bundleId:(r=t).id,createTime:Vd(vi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return QD(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:hm(o.bundledQuery),readTime:Ud(o.readTime)};var o})}saveNamedQuery(e,t){return QD(e).put({name:(r=t).name,readTime:Vd(vi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function YD(n){return gr(n,"bundles")}function QD(n){return gr(n,"namedQueries")}class W0{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new W0(e,t.uid||"")}getOverlay(e,t){return Uf(e).get(KD(this.userId,t)).next(r=>r?q0(this.M,r):null)}saveOverlays(e,t,r){const o=[];return r.forEach((u,d)=>{const p=new G0(t,d);o.push(this.Xt(e,p))}),me.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(Ei(d.getCollectionPath())));const u=[];return o.forEach(d=>{const p=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(Uf(e).Qt("collectionPathOverlayIndex",p))}),me.waitFor(u)}getOverlaysForCollection(e,t,r){const o=sm(),u=Ei(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Uf(e).qt("collectionPathOverlayIndex",d).next(p=>{for(const y of p){const w=q0(this.M,y);o.set(w.getKey(),w)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=sm();let d;const p=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Uf(e).Wt({index:"collectionGroupOverlayIndex",range:p},(y,w,D)=>{const S=q0(this.M,w);u.size()<o||S.largestBatchId===d?(u.set(S.getKey(),S),d=S.largestBatchId):D.done()}).next(()=>u)}Xt(e,t){return Uf(e).put(function(r,o,u){const[d,p,y]=KD(o,u.mutation.key);return{userId:o,collectionPath:p,documentId:y,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:ta(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function Uf(n){return gr(n,"documentOverlays")}class zu{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(pr(e.integerValue));else if("doubleValue"in e){const r=pr(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),Yg(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Cd(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?Ty(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):tt()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const o of Object.keys(r))this.re(o,t),this.te(r[o],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const o of r)this.te(o,t)}ae(e,t){this.ne(t,37),Ke.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function QN(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Bd(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=QN(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}zu.fe=new zu;class ji{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const o=t.codePointAt(0);this._e(240|o>>>18),this._e(128|63&o>>>12),this._e(128|63&o>>>6),this._e(128|63&o)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const o=t.codePointAt(0);this.ge(240|o>>>18),this.ge(128|63&o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o)}}this.ye()}Te(e){const t=this.Ee(e),r=Bd(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Re(e){const t=this.Ee(e),r=Bd(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class JD{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class ia{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class jd{constructor(){this.De=new ji,this.Ce=new JD(this.De),this.xe=new ia(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class $d{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new $d(this.indexId,this.documentKey,this.arrayValue,r)}}function ic(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Z0(n.arrayValue,e.arrayValue),0!==t?t:(t=Z0(n.directionalValue,e.directionalValue),0!==t?t:Ke.comparator(n.documentKey,e.documentKey)))}function Z0(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class XD{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=b0(e);if(void 0!==t&&!this.Be(t))return!1;const r=Dd(e);let o=0,u=0;for(;o<r.length&&this.Be(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Fe){const d=r[o];if(!this.Le(this.Fe,d)||!this.Ue(this.Me[u++],d))return!1;++o}for(;o<r.length;++o){const d=r[o];if(u>=this.Me.length||!this.Ue(this.Me[u++],d))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class JN{constructor(){this.qe=new z0}addToCollectionParentIndex(e,t){return this.qe.add(t),me.resolve()}getCollectionParents(e,t){return me.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return me.resolve()}deleteFieldIndex(e,t){return me.resolve()}getDocumentsMatchingTarget(e,t){return me.resolve(null)}getIndexType(e,t){return me.resolve(0)}getFieldIndexes(e,t){return me.resolve([])}getNextCollectionGroupToUpdate(e){return me.resolve(null)}getMinOffset(e,t){return me.resolve(yo.min())}updateCollectionGroup(e,t,r){return me.resolve()}updateIndexEntries(e,t){return me.resolve()}}class z0{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new On(dn.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new On(dn.comparator)).toArray()}}const Yy=new Uint8Array(0);class eA{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new z0,this.Ge=new Wu(r=>qu(r),(r,o)=>xf(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:Ei(o)};return tA(e).put(u)}return me.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[sD(t),""],!1,!0);return tA(e).qt(o).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(pt(d.parent))}return r})}addFieldIndex(e,t){const r=Jy(e),o={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var u;return delete o.indexId,r.add(o).next()}deleteFieldIndex(e,t){const r=Jy(e),o=Xy(e),u=Qy(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Qy(e);let o=!0;const u=new Map;return me.forEach(this.Qe(t),d=>this.je(e,d).next(p=>{o&&(o=!!p),u.set(d,p)})).next(()=>{if(o){let d=Sn();const p=[];return me.forEach(u,(y,w)=>{var D;Ue("IndexedDbIndexManager",`Using index ${D=y,`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map(nt=>`${nt.fieldPath}:${nt.kind}`).join(",")}`} to execute ${qu(t)}`);const S=function(nt,st){const jt=b0(st);if(void 0===jt)return null;for(const an of em(nt,jt.fieldPath))switch(an.op){case"array-contains-any":return an.value.arrayValue.values||[];case"array-contains":return[an.value]}return null}(w,y),P=function(nt,st){const jt=new Map;for(const an of Dd(st))for(const si of em(nt,an.fieldPath))switch(si.op){case"==":case"in":jt.set(an.fieldPath.canonicalString(),si.value);break;case"not-in":case"!=":return jt.set(an.fieldPath.canonicalString(),si.value),Array.from(jt.values())}return null}(w,y),j=function(nt,st){const jt=[];let an=!0;for(const si of Dd(st)){const rl=0===si.kind?I0(nt,si.fieldPath,nt.startAt):T0(nt,si.fieldPath,nt.startAt);jt.push(rl.value),an&&(an=rl.inclusive)}return new Ad(jt,an)}(w,y),Y=function(nt,st){const jt=[];let an=!0;for(const si of Dd(st)){const rl=0===si.kind?T0(nt,si.fieldPath,nt.endAt):I0(nt,si.fieldPath,nt.endAt);jt.push(rl.value),an&&(an=rl.inclusive)}return new Ad(jt,an)}(w,y),ye=this.We(y,w,j),xe=this.We(y,w,Y),ct=this.ze(y,w,P),lt=this.He(y.indexId,S,ye,j.inclusive,xe,Y.inclusive,ct);return me.forEach(lt,nt=>r.Gt(nt,t.limit).next(st=>{st.forEach(jt=>{const an=Ke.fromSegments(jt.documentKey);d.has(an)||(d=d.add(an),p.push(an))})}))}).next(()=>p)}return me.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,o,u,d,p){const y=(null!=t?t.length:1)*Math.max(r.length,u.length),w=y/(null!=t?t.length:1),D=[];for(let S=0;S<y;++S){const P=t?this.Je(t[S/w]):Yy,j=this.Ye(e,P,r[S%w],o),Y=this.Xe(e,P,u[S%w],d),ye=p.map(xe=>this.Ye(e,P,xe,!0));D.push(...this.createRange(j,Y,ye))}return D}Ye(e,t,r,o){const u=new $d(e,Ke.empty(),t,r);return o?u:u.ke()}Xe(e,t,r,o){const u=new $d(e,Ke.empty(),t,r);return o?u.ke():u}je(e,t){const r=new XD(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let d=null;for(const p of u)r.$e(p)&&(!d||p.fields.length>d.fields.length)&&(d=p);return d})}getIndexType(e,t){let r=2;return me.forEach(this.Qe(t),o=>this.je(e,o).next(u=>{u?0!==r&&u.fields.length<function(d){let p=new On(ri.comparator),y=!1;for(const w of d.filters){const D=w;D.field.isKeyField()||("array-contains"===D.op||"array-contains-any"===D.op?y=!0:p=p.add(D.field))}for(const w of d.orderBy)w.field.isKeyField()||(p=p.add(w.field));return p.size+(y?1:0)}(o)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new jd;for(const o of Dd(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const d=r.Ne(o.kind);zu.fe.Zt(u,d)}return r.Se()}Je(e){const t=new jd;return zu.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new jd;return zu.fe.Zt(Gu(this.databaseId,t),r.Ne(function(o){const u=Dd(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let o=[];o.push(new jd);let u=0;for(const d of Dd(e)){const p=r[u++];for(const y of o)if(this.en(t,d.fieldPath)&&Af(p))o=this.nn(o,d,p);else{const w=y.Ne(d.kind);zu.fe.Zt(p,w)}}return this.sn(o)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const o=[...e],u=[];for(const d of r.arrayValue.values||[])for(const p of o){const y=new jd;y.seed(p.Se()),zu.fe.Zt(d,y.Ne(t.kind)),u.push(y)}return u}en(e,t){return!!e.filters.find(r=>r instanceof Vi&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Jy(e),o=Xy(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const d=[];return me.forEach(u,p=>o.get([p.indexId,this.uid]).next(y=>{d.push(function(w,D){const S=D?new Sf(D.sequenceNumber,new yo(Ud(D.readTime),new Ke(pt(D.documentKey)),D.largestBatchId)):Sf.empty(),P=w.fields.map(([j,Y])=>new Xg(ri.fromServerFormat(j),Y));return new Dy(w.indexId,w.collectionGroup,P,S)}(p,y))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Pt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=Jy(e),u=Xy(e);return this.rn(e).next(d=>o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(p=>me.forEach(p,y=>{return u.put({indexId:y.indexId,uid:this.user.uid||"",sequenceNumber:d,readTime:Vd((P=r).readTime),documentKey:Ei(P.documentKey.path),largestBatchId:P.largestBatchId});var P})))}updateIndexEntries(e,t){const r=new Map;return me.forEach(t,(o,u)=>{const d=r.get(o.collectionGroup);return(d?me.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(p=>(r.set(o.collectionGroup,p),me.forEach(p,y=>this.on(e,o,y).next(w=>{const D=this.un(u,y);return w.isEqual(D)?me.resolve():this.an(e,u,y,w,D)}))))})}cn(e,t,r,o){return Qy(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,o){return Qy(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const o=Qy(e);let u=new On(ic);return o.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(d,p)=>{u=u.add(new $d(r.indexId,t,p.arrayValue,p.directionalValue))}).next(()=>u)}un(e,t){let r=new On(ic);const o=this.Ze(t,e);if(null==o)return r;const u=b0(t);if(null!=u){const d=e.data.field(u.fieldPath);if(Af(d))for(const p of d.arrayValue.values||[])r=r.add(new $d(t.indexId,e.key,this.Je(p),o))}else r=r.add(new $d(t.indexId,e.key,Yy,o));return r}an(e,t,r,o,u){Ue("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(p,y,w,D,S){const P=p.getIterator(),j=y.getIterator();let Y=Ql(P),ye=Ql(j);for(;Y||ye;){let xe=!1,ct=!1;if(Y&&ye){const lt=w(Y,ye);lt<0?ct=!0:lt>0&&(xe=!0)}else null!=Y?ct=!0:xe=!0;xe?(D(ye),ye=Ql(j)):ct?(S(Y),Y=Ql(P)):(Y=Ql(P),ye=Ql(j))}}(o,u,ic,p=>{d.push(this.cn(e,t,r,p))},p=>{d.push(this.hn(e,t,r,p))}),me.waitFor(d)}rn(e){let t=1;return Xy(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,p)=>ic(d,p)).filter((d,p,y)=>!p||0!==ic(d,y[p-1]));const o=[];o.push(e);for(const d of r){const p=ic(d,e),y=ic(d,t);if(0===p)o[0]=e.ke();else if(p>0&&y<0)o.push(d),o.push(d.ke());else if(y>0)break}o.push(t);const u=[];for(let d=0;d<o.length;d+=2)u.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,Yy,[]],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,Yy,[]]));return u}getMinOffset(e,t){let r;return me.forEach(this.Qe(t),o=>this.je(e,o).next(u=>{u?(!r||gD(u.indexState.offset,r)<0)&&(r=u.indexState.offset):r=yo.min()})).next(()=>r)}}function tA(n){return gr(n,"collectionParents")}function Qy(n){return gr(n,"indexEntries")}function Jy(n){return gr(n,"indexConfiguration")}function Xy(n){return gr(n,"indexState")}const Hd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class $s{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new $s(e,$s.DEFAULT_COLLECTION_PERCENTILE,$s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function K0(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let p=0;const y=r.Wt({range:d},(D,S,P)=>(p++,P.delete()));u.push(y.next(()=>{kt(1===p)}));const w=[];for(const D of t.mutations){const S=jD(e,D.key.path,t.batchId);u.push(o.delete(S)),w.push(D.key)}return me.waitFor(u).next(()=>w)}function ev(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw tt();e=n.noDocument}return JSON.stringify(e).length}$s.DEFAULT_COLLECTION_PERCENTILE=10,$s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$s.DEFAULT=new $s(41943040,$s.DEFAULT_COLLECTION_PERCENTILE,$s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$s.DISABLED=new $s(-1,0,0);class nA{constructor(e,t,r,o){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=o,this.ln={}}static Yt(e,t,r,o){kt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new nA(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return sc(e).Wt({index:"userMutationsIndex",range:r},(o,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=oc(e),d=sc(e);return d.add({}).next(p=>{kt("number"==typeof p);const y=new WD(p,t,r,o),w=function(P,j,Y){const ye=Y.baseMutations.map(ct=>ta(P.Jt,ct)),xe=Y.mutations.map(ct=>ta(P.Jt,ct));return{userId:j,batchId:Y.batchId,localWriteTimeMs:Y.localWriteTime.toMillis(),baseMutations:ye,mutations:xe}}(this.M,this.userId,y),D=[];let S=new On((P,j)=>Pt(P.canonicalString(),j.canonicalString()));for(const P of o){const j=jD(this.userId,P.key.path,p);S=S.add(P.key.path.popLast()),D.push(d.put(w)),D.push(u.put(j,PN))}return S.forEach(P=>{D.push(this.indexManager.addToCollectionParentIndex(e,P))}),e.addOnCommittedListener(()=>{this.ln[p]=y.keys()}),me.waitFor(D).next(()=>y)})}lookupMutationBatch(e,t){return sc(e).get(t).next(r=>r?(kt(r.userId===this.userId),dm(this.M,r)):null)}fn(e,t){return this.ln[t]?me.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.ln[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return sc(e).Wt({index:"userMutationsIndex",range:o},(d,p,y)=>{p.userId===this.userId&&(kt(p.batchId>=r),u=dm(this.M,p)),y.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return sc(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(o,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return sc(e).qt("userMutationsIndex",t).next(r=>r.map(o=>dm(this.M,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=nc(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return oc(e).Wt({range:o},(d,p,y)=>{const[w,D,S]=d,P=pt(D);if(w===this.userId&&t.path.isEqual(P))return sc(e).get(S).next(j=>{if(!j)throw tt();kt(j.userId===this.userId),u.push(dm(this.M,j))});y.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new On(Pt);const o=[];return t.forEach(u=>{const d=nc(this.userId,u.path),p=IDBKeyRange.lowerBound(d),y=oc(e).Wt({range:p},(w,D,S)=>{const[P,j,Y]=w,ye=pt(j);P===this.userId&&u.path.isEqual(ye)?r=r.add(Y):S.done()});o.push(y)}),me.waitFor(o).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=nc(this.userId,r),d=IDBKeyRange.lowerBound(u);let p=new On(Pt);return oc(e).Wt({range:d},(y,w,D)=>{const[S,P,j]=y,Y=pt(P);S===this.userId&&r.isPrefixOf(Y)?Y.length===o&&(p=p.add(j)):D.done()}).next(()=>this.dn(e,p))}dn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(sc(e).get(u).next(d=>{if(null===d)throw tt();kt(d.userId===this.userId),r.push(dm(this.M,d))}))}),me.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return K0(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),me.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return me.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return oc(e).Wt({range:r},(u,d,p)=>{if(u[0]===this.userId){const y=pt(u[1]);o.push(y)}else p.done()}).next(()=>{kt(0===o.length)})})}containsKey(e,t){return Y0(e,this.userId,t)}wn(e){return rA(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Y0(n,e,t){const r=nc(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return oc(n).Wt({range:u,jt:!0},(p,y,w)=>{const[D,S,P]=p;D===e&&S===o&&(d=!0),w.done()}).next(()=>d)}function sc(n){return gr(n,"mutations")}function oc(n){return gr(n,"documentMutations")}function rA(n){return gr(n,"mutationQueues")}class Gd{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new Gd(0)}static yn(){return new Gd(-1)}}class XN{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new Gd(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>Ct.fromTimestamp(new wr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.In(e,o)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Bf(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(kt(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return Bf(e).Wt((d,p)=>{const y=Ky(p);y.sequenceNumber<=t&&null===r.get(y.targetId)&&(o++,u.push(this.removeTargetData(e,y)))}).next(()=>me.waitFor(u)).next(()=>o)}forEachTarget(e,t){return Bf(e).Wt((r,o)=>{const u=Ky(o);t(u)})}pn(e){return iA(e).get("targetGlobalKey").next(t=>(kt(null!==t),t))}In(e,t){return iA(e).put("targetGlobalKey",t)}Tn(e,t){return Bf(e).put(KN(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=qu(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Bf(e).Wt({range:o,index:"queryTargetsIndex"},(d,p,y)=>{const w=Ky(p);xf(t,w.target)&&(u=w,y.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=ac(e);return t.forEach(d=>{const p=Ei(d.path);o.push(u.put({targetId:r,path:p})),o.push(this.referenceDelegate.addReference(e,r,d))}),me.waitFor(o)}removeMatchingKeys(e,t,r){const o=ac(e);return me.forEach(t,u=>{const d=Ei(u.path);return me.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=ac(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=ac(e);let u=Sn();return o.Wt({range:r,jt:!0},(d,p,y)=>{const w=pt(d[1]),D=new Ke(w);u=u.add(D)}).next(()=>u)}containsKey(e,t){const r=Ei(t.path),o=IDBKeyRange.bound([r],[sD(r)],!1,!0);let u=0;return ac(e).Wt({index:"documentTargetsIndex",jt:!0,range:o},([d,p],y,w)=>{0!==d&&(u++,w.done())}).next(()=>u>0)}Et(e,t){return Bf(e).get(t).next(r=>r?Ky(r):null)}}function Bf(n){return gr(n,"targets")}function iA(n){return gr(n,"targetGlobal")}function ac(n){return gr(n,"targetDocuments")}function qd(n){return Q0.apply(this,arguments)}function Q0(){return(Q0=(0,Ce.Z)(function*(n){if(n.code!==ge.FAILED_PRECONDITION||n.message!==Wy)throw n;Ue("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function sA([n,e],[t,r]){const o=Pt(n,t);return 0===o?Pt(e,r):o}class eM{constructor(e){this.An=e,this.buffer=new On(sA),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();sA(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class fm{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Ue("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,Ce.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){Ld(o)?Ue("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield qd(o)}yield t.Sn(e)}))}}class oA{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return me.resolve(vs.A);const r=new eM(t);return this.Dn.forEachTarget(e,o=>r.Pn(o.sequenceNumber)).next(()=>this.Dn.xn(e,o=>r.Pn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(Hd)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Hd):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,o,u,d,p,y,w;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,d=Date.now(),this.nthSequenceNumber(e,o))).next(S=>(r=S,p=Date.now(),this.removeTargets(e,r,t))).next(S=>(u=S,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(w=Date.now(),m0()<=fo.in.DEBUG&&Ue("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-D}ms\n\tDetermined least recently used ${o} in `+(p-d)+`ms\n\tRemoved ${u} targets in `+(y-p)+`ms\n\tRemoved ${S} documents in `+(w-y)+`ms\nTotal Duration: ${w-D}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:S})))}}class aA{constructor(e,t){this.db=e,this.garbageCollector=new oA(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,o)=>t(o))}addReference(e,t,r){return pm(e,r)}removeReference(e,t,r){return pm(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return pm(e,t)}On(e,t){return function(r,o){let u=!1;return rA(r).zt(d=>Y0(r,d,o).next(p=>(p&&(u=!0),me.resolve(!p)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Mn(e,(d,p)=>{if(p<=t){const y=this.On(e,d).next(w=>{if(!w)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,Ct.min()),ac(e).delete([0,Ei(d.path)])))});o.push(y)}}).next(()=>me.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return pm(e,t)}Mn(e,t){const r=ac(e);let o,u=vs.A;return r.Wt({index:"documentTargetsIndex"},([d,p],{path:y,sequenceNumber:w})=>{0===d?(u!==vs.A&&t(new Ke(pt(o)),u),u=w,o=y):u=vs.A}).next(()=>{u!==vs.A&&t(new Ke(pt(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function pm(n,e){return ac(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ei(e.path),sequenceNumber:r}));var r}class J0{constructor(){this.changes=new Wu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Gn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?me.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class uA{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Wd(e).put(r)}removeEntry(e,t,r){return Wd(e).delete(function(o,u){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],cm(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=Gn.newInvalidDocument(t);return Wd(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(gm(t))},(o,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:Gn.newInvalidDocument(t)};return Wd(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(gm(t))},(o,u)=>{r={document:this.$n(t,u),size:ev(u)}}).next(()=>r)}getEntries(e,t){let r=Es();return this.Ln(e,t,(o,u)=>{const d=this.$n(o,u);r=r.insert(o,d)}).next(()=>r)}Un(e,t){let r=Es(),o=new br(Ke.comparator);return this.Ln(e,t,(u,d)=>{const p=this.$n(u,d);r=r.insert(u,p),o=o.insert(u,ev(d))}).next(()=>({documents:r,qn:o}))}Ln(e,t,r){if(t.isEmpty())return me.resolve();let o=new On(dA);t.forEach(y=>o=o.add(y));const u=IDBKeyRange.bound(gm(o.first()),gm(o.last())),d=o.getIterator();let p=d.getNext();return Wd(e).Wt({index:"documentKeyIndex",range:u},(y,w,D)=>{const S=Ke.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;p&&dA(p,S)<0;)r(p,null),p=d.getNext();p&&p.isEqual(S)&&(r(p,w),p=d.hasNext()?d.getNext():null),p?D.Ut(gm(p)):D.done()}).next(()=>{for(;p;)r(p,null),p=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),cm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Wd(e).qt(IDBKeyRange.bound(o,u,!0)).next(d=>{let p=Es();for(const y of d){const w=this.$n(Ke.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);p=p.insert(w.key,w)}return p})}getAllFromCollectionGroup(e,t,r,o){let u=Es();const d=cA(t,r),p=cA(t,yo.max());return Wd(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,p,!0)},(y,w,D)=>{const S=this.$n(Ke.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);u=u.insert(S.key,S),u.size===o&&D.done()}).next(()=>u)}newChangeBuffer(e){return new tM(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return lA(e).get("remoteDocumentGlobalKey").next(t=>(kt(!!t),t))}Fn(e,t){return lA(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function(n,e){let t;if(e.document)t=kd(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ke.fromSegments(e.noDocument.path),o=Ud(e.noDocument.readTime);t=Gn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return tt();{const r=Ke.fromSegments(e.unknownDocument.path),o=Ud(e.unknownDocument.version);t=Gn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new wr(r[0],r[1]);return Ct.fromTimestamp(o)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(Ct.min()))return r}return Gn.newInvalidDocument(e)}}class tM extends J0{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new Wu(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new On((u,d)=>Pt(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const p=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,p.readTime)),d.isValidDocument()){const y=zD(this.Kn.M,d);o=o.add(u.path.popLast()),r+=ev(y)-p.size,t.push(this.Kn.addEntry(e,u,y))}else if(r-=p.size,this.trackRemovals){const y=zD(this.Kn.M,d.convertToNoDocument(Ct.min()));t.push(this.Kn.addEntry(e,u,y))}}),o.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),me.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:o})=>(o.forEach((u,d)=>{this.Gn.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function lA(n){return gr(n,"remoteDocumentGlobal")}function Wd(n){return gr(n,"remoteDocumentsV14")}function gm(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function cA(n,e){const t=e.documentKey.path.toArray();return[n,cm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function dA(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Pt(t[u],r[u]),o)return o;return o=Pt(t.length,r.length),o||(o=Pt(t[t.length-2],r[r.length-2]),o||Pt(t[t.length-1],r[r.length-1]))}class nM{constructor(e){this.M=e}kt(e,t,r,o){const u=new Zy("createOrUpgrade",t);var p;r<1&&o>=1&&(e.createObjectStore("owner"),(p=e).createObjectStore("mutationQueues",{keyPath:"userId"}),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",kN,{unique:!0}),p.createObjectStore("documentMutations"),jf(e),function(p){p.createObjectStore("remoteDocuments")}(e));let d=me.resolve();return r<3&&o>=3&&(0!==r&&(function(p){p.deleteObjectStore("targetDocuments"),p.deleteObjectStore("targets"),p.deleteObjectStore("targetGlobal")}(e),jf(e)),d=d.next(()=>function(p){const y=p.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ct.min().toTimestamp(),targetCount:0};return y.put("targetGlobalKey",w)}(u))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(p,y){return y.store("mutations").qt().next(w=>{p.deleteObjectStore("mutations"),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",kN,{unique:!0});const D=y.store("mutations"),S=w.map(P=>D.put(P));return me.waitFor(S)})}(e,u))),d=d.next(()=>{!function(p){p.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.Qn(u))),r<6&&o>=6&&(d=d.next(()=>(function(p){p.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&o>=7&&(d=d.next(()=>this.Wn(u))),r<8&&o>=8&&(d=d.next(()=>this.zn(e,u))),r<9&&o>=9&&(d=d.next(()=>{!function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.Hn(u))),r<11&&o>=11&&(d=d.next(()=>{(function(p){p.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(p){p.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(p){const y=p.createObjectStore("documentOverlays",{keyPath:$N});y.createIndex("collectionPathOverlayIndex",HN,{unique:!1}),y.createIndex("collectionGroupOverlayIndex",GN,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(p){const y=p.createObjectStore("remoteDocumentsV14",{keyPath:ON});y.createIndex("documentKeyIndex",B1),y.createIndex("collectionGroupIndex",j1)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>{!function(p){p.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),p.createObjectStore("indexState",{keyPath:j0}).createIndex("sequenceNumberIndex",UN,{unique:!1}),p.createObjectStore("indexEntries",{keyPath:BN}).createIndex("documentKeyIndex",jN,{unique:!1})}(e)})),d}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,o)=>{t+=ev(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(o=>me.forEach(o,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",d).next(p=>me.forEach(p,y=>{kt(y.userId===u.userId);const w=dm(this.M,y);return K0(e,u.userId,w).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Wt((d,p)=>{const y=new dn(d),w=[0,Ei(y)];u.push(t.get(w).next(D=>D?me.resolve():t.put({targetId:0,path:Ei(y),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>me.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:VN});const r=t.store("collectionParents"),o=new z0,u=d=>{if(o.add(d)){const p=d.lastSegment(),y=d.popLast();return r.put({collectionId:p,parent:Ei(y)})}};return t.store("remoteDocuments").Wt({jt:!0},(d,p)=>{const y=new dn(d);return u(y.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([d,p,y],w)=>{const D=pt(p);return u(D.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,o)=>{const u=Ky(o),d=KN(this.M,u);return t.put(d)})}Jn(e,t){const r=t.store("remoteDocuments"),o=[];return r.Wt((u,d)=>{const p=t.store("remoteDocumentsV14"),y=(w=d,w.document?new Ke(dn.fromString(w.document.name).popFirst(5)):w.noDocument?Ke.fromSegments(w.noDocument.path):w.unknownDocument?Ke.fromSegments(w.unknownDocument.path):tt()).path.toArray();var w;const D={prefixPath:y.slice(0,y.length-2),collectionGroup:y[y.length-2],documentId:y[y.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(p.put(D))}).next(()=>me.waitFor(o))}}function jf(n){n.createObjectStore("targetDocuments",{keyPath:Bi}).createIndex("documentTargetsIndex",LN,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",FN,{unique:!0}),n.createObjectStore("targetGlobal")}const Zd="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class X0{constructor(e,t,r,o,u,d,p,y,w,D,S=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=d,this.document=p,this.Xn=w,this.Zn=D,this.ts=S,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=P=>Promise.resolve(),!X0.vt())throw new Re(ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new aA(this,o),this.hs=t+"main",this.M=new ZD(y),this.ls=new na(this.hs,this.ts,new nM(this.M)),this.fs=new XN(this.referenceDelegate,this.M),this.ds=new uA(this.M),this._s=new YN,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===D&&qt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(ge.FAILED_PRECONDITION,Zd);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new vs(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,Ce.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,Ce.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,Ce.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Hs(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(Ld(e))return Ue("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ue("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return zd(e).get("owner").next(t=>me.resolve(this.Ps(t)))}Vs(e){return Hs(e).delete(this.clientId)}vs(){var e=this;return(0,Ce.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=gr(r,"clientMetadata");return o.qt().next(u=>{const d=e.Ds(u,18e5),p=u.filter(y=>-1===d.indexOf(y));return me.forEach(p,y=>o.delete(y.clientId)).next(()=>p)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?me.resolve(!0):zd(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new Re(ge.FAILED_PRECONDITION,Zd);return!1}}return!(!this.networkEnabled||!this.inForeground)||Hs(e).qt().next(r=>void 0===this.Ds(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,p=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&p)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ue("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ce.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new H0(t,vs.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>Hs(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return nA.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new eA(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return W0.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Ue("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=14===(d=this.ts)?HD:13===d?$D:12===d?qN:11===d?qy:void tt();var d;let p;return this.ls.runTransaction(e,o,u,y=>(p=new H0(y,this.es?this.es.next():vs.A),"readwrite-primary"===t?this.Es(p).next(w=>!!w||this.As(p)).next(w=>{if(!w)throw qt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Re(ge.FAILED_PRECONDITION,Wy);return r(p)}).next(w=>this.bs(p).next(()=>w)):this.$s(p).next(()=>r(p)))).then(y=>(p.raiseOnCommittedEvent(),y))}$s(e){return zd(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Re(ge.FAILED_PRECONDITION,Zd)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return zd(e).put("owner",t)}static vt(){return na.vt()}Rs(e){const t=zd(e);return t.get("owner").next(r=>this.Ps(r)?(Ue("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):me.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(qt(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,F.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Ue("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return qt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){qt("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function zd(n){return gr(n,"owner")}function Hs(n){return gr(n,"clientMetadata")}function eb(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class tv{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(o=>{for(const u of r)u.applyToLocalView(o);return o})}qs(e,t){e.forEach((r,o)=>{for(const u of t)u.applyToLocalView(o)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return Ke.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.js(e,t.path):x0(t)?this.Ws(e,t,r):this.zs(e,t,r);var o}js(e,t){return this.Ls(e,new Ke(t)).next(r=>{let o=Fy();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Ws(e,t,r){const o=t.collectionGroup;let u=Fy();return this.indexManager.getCollectionParents(e,o).next(d=>me.forEach(d,p=>{const y=(w=t,D=p.child(o),new vo(D,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,D;return this.zs(e,y,r).next(w=>{w.forEach((D,S)=>{u=u.insert(D,S)})})}).next(()=>u))}zs(e,t,r){let o;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const d of u)for(const p of d.mutations){const y=p.key;let w=o.get(y);null==w&&(w=Gn.newInvalidDocument(y),o=o.insert(y,w)),k0(p,w,d.localWriteTime),w.isFoundDocument()||(o=o.remove(y))}}).next(()=>(o.forEach((u,d)=>{R0(t,d)||(o=o.remove(u))}),o))}}class tb{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=o}static Ys(e,t){let r=Sn(),o=Sn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new tb(e,t.fromCache,r,o)}}class hA{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,o){return this.ti(e,t).next(u=>u||this.ei(e,t,o,r)).next(u=>u||this.ni(e,t))}ti(e,t){return me.resolve(null)}ei(e,t,r,o){return function(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||o.isEqual(Ct.min())?this.ni(e,t):this.Zs.Ks(e,r).next(u=>{const d=this.si(t,u);return this.ii(t,d,r,o)?this.ni(e,t):(m0()<=fo.in.DEBUG&&Ue("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),vD(t)),this.ri(e,d,t,pD(o,-1)))})}si(e,t){let r=new On(wD(e));return t.forEach((o,u)=>{R0(e,u)&&(r=r.add(u))}),r}ii(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ni(e,t){return m0()<=fo.in.DEBUG&&Ue("QueryEngine","Using full collection scan to execute query:",vD(t)),this.Zs.Qs(e,t,yo.min())}ri(e,t,r,o){return this.Zs.Qs(e,r,o).next(u=>(t.forEach(d=>{u=u.insert(d.key,d)}),u))}}class $1{constructor(e,t,r,o){this.persistence=e,this.oi=t,this.M=o,this.ui=new br(Pt),this.ai=new Wu(u=>qu(u),xf),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new tv(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function nv(n,e,t,r){return new $1(n,e,t,r)}function rv(n,e){return iv.apply(this,arguments)}function iv(){return(iv=(0,Ce.Z)(function*(n,e){const t=Ye(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.Bs.getAllMutationBatches(r).next(u=>(o=u,t.li(e),t.Bs.getAllMutationBatches(r))).next(u=>{const d=[],p=[];let y=Sn();for(const w of o){d.push(w.batchId);for(const D of w.mutations)y=y.add(D.key)}for(const w of u){p.push(w.batchId);for(const D of w.mutations)y=y.add(D.key)}return t.fi.Ks(r,y).next(w=>({di:w,removedBatchIds:d,addedBatchIds:p}))})})})).apply(this,arguments)}function nb(n,e){const t=Ye(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.hi.newChangeBuffer({trackRemovals:!0});return function(d,p,y,w){const D=y.batch,S=D.keys();let P=me.resolve();return S.forEach(j=>{P=P.next(()=>w.getEntry(p,j)).next(Y=>{const ye=y.docVersions.get(j);kt(null!==ye),Y.version.compareTo(ye)<0&&(D.applyToRemoteDocument(Y,y),Y.isValidDocument()&&(Y.setReadTime(y.commitVersion),w.addEntry(Y)))})}),P.next(()=>d.Bs.removeMutationBatch(p,D))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,o))})}function sv(n){const e=Ye(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function rM(n,e){const t=Ye(n),r=e.snapshotVersion;let o=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.hi.newChangeBuffer({trackRemovals:!0});o=t.ui;const p=[];e.targetChanges.forEach((w,D)=>{const S=o.get(D);if(!S)return;p.push(t.fs.removeMatchingKeys(u,w.removedDocuments,D).next(()=>t.fs.addMatchingKeys(u,w.addedDocuments,D)));let P=S.withSequenceNumber(u.currentSequenceNumber);var j,Y,ye;e.targetMismatches.has(D)?P=P.withResumeToken(ii.EMPTY_BYTE_STRING,Ct.min()).withLastLimboFreeSnapshotVersion(Ct.min()):w.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(w.resumeToken,r)),o=o.insert(D,P),Y=P,ye=w,(0===(j=S).resumeToken.approximateByteSize()||Y.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=3e8||ye.addedDocuments.size+ye.modifiedDocuments.size+ye.removedDocuments.size>0)&&p.push(t.fs.updateTargetData(u,P))});let y=Es();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(u,w))}),p.push(fA(u,d,e.documentUpdates).next(w=>{y=w})),!r.isEqual(Ct.min())){const w=t.fs.getLastRemoteSnapshotVersion(u).next(D=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));p.push(w)}return me.waitFor(p).next(()=>d.apply(u)).next(()=>t.fi.Gs(u,y)).next(()=>y)}).then(u=>(t.ui=o,u))}function fA(n,e,t){let r=Sn();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=Es();return t.forEach((d,p)=>{const y=o.get(d);p.isNoDocument()&&p.version.isEqual(Ct.min())?(e.removeEntry(d,p.readTime),u=u.insert(d,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||0===p.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(p),u=u.insert(d,p)):Ue("LocalStore","Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",p.version)}),u})}function iM(n,e){const t=Ye(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function $f(n,e){const t=Ye(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.fs.getTargetData(r,e).next(u=>u?(o=u,me.resolve(o)):t.fs.allocateTargetId(r).next(d=>(o=new rc(e,d,0,r.currentSequenceNumber),t.fs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.ui.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function Kd(n,e,t){return mm.apply(this,arguments)}function mm(){return(mm=(0,Ce.Z)(function*(n,e,t){const r=Ye(n),o=r.ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Ld(d))throw d;Ue("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.ui=r.ui.remove(e),r.ai.delete(o.target)})).apply(this,arguments)}function _m(n,e,t){const r=Ye(n);let o=Ct.min(),u=Sn();return r.persistence.runTransaction("Execute query","readonly",d=>function(p,y,w){const D=Ye(p),S=D.ai.get(w);return void 0!==S?me.resolve(D.ui.get(S)):D.fs.getTargetData(y,w)}(r,d,Bs(e)).next(p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(d,p.targetId).next(y=>{u=y})}).next(()=>r.oi.Qs(d,e,t?o:Ct.min(),t?u:Sn())).next(p=>(ib(r,ED(e),p),{documents:p,_i:u})))}function pA(n,e){const t=Ye(n),r=Ye(t.fs),o=t.ui.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(d=>d?d.target:null))}function rb(n,e){const t=Ye(n),r=t.ci.get(e)||Ct.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.hi.getAllFromCollectionGroup(o,e,pD(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(ib(t,e,o),o))}function ib(n,e,t){let r=Ct.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ci.set(e,r)}function ov(){return(ov=(0,Ce.Z)(function*(n,e,t,r){const o=Ye(n);let u=Sn(),d=Es();for(const w of t){const D=e.wi(w.metadata.name);w.document&&(u=u.add(D));const S=e.mi(w);S.setReadTime(e.gi(w.metadata.readTime)),d=d.insert(D,S)}const p=o.hi.newChangeBuffer({trackRemovals:!0}),y=yield $f(o,(w=r,Bs(kf(dn.fromString(`__bundle__/docs/${w}`)))));var w;return o.persistence.runTransaction("Apply bundle documents","readwrite",w=>fA(w,p,d).next(D=>(p.apply(w),D)).next(D=>o.fs.removeMatchingKeysForTargetId(w,y.targetId).next(()=>o.fs.addMatchingKeys(w,u,y.targetId)).next(()=>o.fi.Gs(w,D)).next(()=>D)))})).apply(this,arguments)}function gA(n,e){return sb.apply(this,arguments)}function sb(){return(sb=(0,Ce.Z)(function*(n,e,t=Sn()){const r=yield $f(n,Bs(hm(e.bundledQuery))),o=Ye(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const d=vi(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o._s.saveNamedQuery(u,e);const p=r.withResumeToken(ii.EMPTY_BYTE_STRING,d);return o.ui=o.ui.insert(p.targetId,p),o.fs.updateTargetData(u,p).next(()=>o.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.fs.addMatchingKeys(u,t,r.targetId)).next(()=>o._s.saveNamedQuery(u,e))})})).apply(this,arguments)}class mA{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return me.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:vi(r.createTime)}),me.resolve()}getNamedQuery(e,t){return me.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:hm(r.bundledQuery),readTime:vi(r.readTime)}),me.resolve();var r}}class oM{constructor(){this.overlays=new br(Ke.comparator),this.Ii=new Map}getOverlay(e,t){return me.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.Xt(e,t,u)}),me.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Ii.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Ii.delete(r)),me.resolve()}getOverlaysForCollection(e,t,r){const o=sm(),u=t.length+1,d=new Ke(t.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const y=p.getNext().value,w=y.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===u&&y.largestBatchId>r&&o.set(y.getKey(),y)}return me.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new br((w,D)=>w-D);const d=this.overlays.getIterator();for(;d.hasNext();){const w=d.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let D=u.get(w.largestBatchId);null===D&&(D=sm(),u=u.insert(w.largestBatchId,D)),D.set(w.getKey(),w)}}const p=sm(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((w,D)=>p.set(w,D)),!(p.size()>=o)););return me.resolve(p)}Xt(e,t,r){if(null===r)return;const o=this.overlays.get(r.key);if(null!==o){const d=this.Ii.get(o.largestBatchId).delete(r.key);this.Ii.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new G0(t,r));let u=this.Ii.get(t);void 0===u&&(u=Sn(),this.Ii.set(t,u)),this.Ii.set(t,u.add(r.key))}}class _A{constructor(){this.Ti=new On(In.Ei),this.Ai=new On(In.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new In(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new In(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new Ke(new dn([])),r=new In(t,e),o=new In(t,e+1),u=[];return this.Ai.forEachInRange([r,o],d=>{this.Pi(d),u.push(d.key)}),u}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new Ke(new dn([])),r=new In(t,e),o=new In(t,e+1);let u=Sn();return this.Ai.forEachInRange([r,o],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new In(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class In{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return Ke.comparator(e.key,t.key)||Pt(e.Ci,t.Ci)}static Ri(e,t){return Pt(e.Ci,t.Ci)||Ke.comparator(e.key,t.key)}}class Hf{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new On(In.Ei)}checkEmpty(e){return me.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,o){const u=this.xi;this.xi++;const d=new WD(u,t,r,o);this.Bs.push(d);for(const p of o)this.Ni=this.Ni.add(new In(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return me.resolve(d)}lookupMutationBatch(e,t){return me.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.Mi(t+1),u=o<0?0:o;return me.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return me.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new In(t,0),o=new In(t,Number.POSITIVE_INFINITY),u=[];return this.Ni.forEachInRange([r,o],d=>{const p=this.ki(d.Ci);u.push(p)}),me.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new On(Pt);return t.forEach(o=>{const u=new In(o,0),d=new In(o,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([u,d],p=>{r=r.add(p.Ci)})}),me.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;Ke.isDocumentKey(u)||(u=u.child(""));const d=new In(new Ke(u),0);let p=new On(Pt);return this.Ni.forEachWhile(y=>{const w=y.key.path;return!!r.isPrefixOf(w)&&(w.length===o&&(p=p.add(y.Ci)),!0)},d),me.resolve(this.Oi(p))}Oi(e){const t=[];return e.forEach(r=>{const o=this.ki(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){kt(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return me.forEach(t.mutations,o=>{const u=new In(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new In(t,0),o=this.Ni.firstAfterOrEqual(r);return me.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return me.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class aM{constructor(e){this.$i=e,this.docs=new br(Ke.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,d=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return me.resolve(r?r.document.mutableCopy():Gn.newInvalidDocument(t))}getEntries(e,t){let r=Es();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Gn.newInvalidDocument(o))}),me.resolve(r)}getAllFromCollection(e,t,r){let o=Es();const u=new Ke(t.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:p,value:{document:y}}=d.getNext();if(!t.isPrefixOf(p.path))break;p.path.length>t.length+1||gD(mN(y),r)<=0||(o=o.insert(y.key,y.mutableCopy()))}return me.resolve(o)}getAllFromCollectionGroup(e,t,r,o){tt()}Bi(e,t){return me.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new uM(this)}getSize(e){return me.resolve(this.size)}}class uM extends J0{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Kn.addEntry(e,o)):this.Kn.removeEntry(r)}),me.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class H1{constructor(e){this.persistence=e,this.Li=new Wu(t=>qu(t),xf),this.lastRemoteSnapshotVersion=Ct.min(),this.highestTargetId=0,this.Ui=0,this.qi=new _A,this.targetCount=0,this.Ki=Gd.gn()}forEachTarget(e,t){return this.Li.forEach((r,o)=>t(o)),me.resolve()}getLastRemoteSnapshotVersion(e){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return me.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),me.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new Gd(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,me.resolve()}updateTargetData(e,t){return this.Tn(t),me.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,me.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Li.forEach((d,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.Li.delete(d),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)}),me.waitFor(u).next(()=>o)}getTargetCount(e){return me.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return me.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),me.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),me.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),me.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return me.resolve(r)}containsKey(e,t){return me.resolve(this.qi.containsKey(t))}}class ym{constructor(e,t){this.Gi={},this.overlays={},this.es=new vs(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new H1(this),this.indexManager=new JN,this.ds=new aM(r=>this.referenceDelegate.Qi(r)),this.M=new ZD(t),this._s=new mA(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new oM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new Hf(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Ue("MemoryPersistence","Starting transaction:",e);const o=new lM(this.es.next());return this.referenceDelegate.ji(),r(o).next(u=>this.referenceDelegate.Wi(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}zi(e,t){return me.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class lM extends GD{constructor(e){super(),this.currentSequenceNumber=e}}class vm{constructor(e){this.persistence=e,this.Hi=new _A,this.Ji=null}static Yi(e){return new vm(e)}get Xi(){if(this.Ji)return this.Ji;throw tt()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),me.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),me.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),me.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(o=>this.Xi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Xi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.Xi,r=>{const o=Ke.fromPath(r);return this.Zi(e,o).next(u=>{u||t.removeEntry(o,Ct.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return me.or([()=>me.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function yA(n,e){return`firestore_clients_${n}_${e}`}function ob(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function ab(n,e){return`firestore_targets_${n}_${e}`}class av{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static tr(e,t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new Re(o.error.code,o.error.message))),d?new av(e,t,o.state,u):(qt("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Yd{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Re(r.error.code,r.error.message))),u?new Yd(e,r.state,o):(qt("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Em{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=Rd();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=y0(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return o?new Em(e,u):(qt("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class uv{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new uv(t.clientId,t.onlineState):(qt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Gf{constructor(){this.activeTargetIds=Rd()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wm{constructor(e,t,r,o,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new br(Pt),this.started=!1,this.cr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.hr=yA(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new Gf),this.dr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(p){return`firestore_bundle_loaded_v2_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.syncEngine.Fs();for(const o of t){if(o===e.ir)continue;const u=e.getItem(yA(e.persistenceKey,o));if(u){const d=Em.tr(o,u);d&&(e.ar=e.ar.insert(d.clientId,d))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const o=e.pr(r);o&&e.Ir(o)}for(const o of e.cr)e.ur(o);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(ab(this.persistenceKey,e));if(r){const o=Yd.tr(e,r);o&&(t=o.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ab(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Ar(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ue("SharedClientState","READ",e,t),t}setItem(e,t){Ue("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ue("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ue("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void qt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,Ce.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const o=t.vr(r.key);return t.Sr(o,null)}{const o=t.Dr(r.key,r.newValue);if(o)return t.Sr(o.clientId,o)}}else if(t._r.test(r.key)){if(null!==r.newValue){const o=t.Cr(r.key,r.newValue);if(o)return t.Nr(o)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const o=t.kr(r.key,r.newValue);if(o)return t.Mr(o)}}else if(r.key===t.mr){if(null!==r.newValue){const o=t.pr(r.newValue);if(o)return t.Ir(o)}}else if(r.key===t.lr){const o=function(u){let d=vs.A;if(null!=u)try{const p=JSON.parse(u);kt("number"==typeof p),d=p}catch(p){qt("SharedClientState","Failed to read sequence number from WebStorage",p)}return d}(r.newValue);o!==vs.A&&t.sequenceNumberHandler(o)}else if(r.key===t.gr){const o=t.Or(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Fr(u)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const o=new av(this.currentUser,e,t,r),u=ob(this.persistenceKey,this.currentUser,e);this.setItem(u,o.er())}Ar(e){const t=ob(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const o=ab(this.persistenceKey,e),u=new Yd(e,t,r);this.setItem(o,u.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return Em.tr(r,t)}Cr(e,t){const r=this._r.exec(e),o=Number(r[1]);return av.tr(new yi(void 0!==r[2]?r[2]:null),o,t)}kr(e,t){const r=this.wr.exec(e),o=Number(r[1]);return Yd.tr(o,t)}pr(e){return uv.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,Ce.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);Ue("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),o=this.Tr(this.ar),u=this.Tr(r),d=[],p=[];return u.forEach(y=>{o.has(y)||d.push(y)}),o.forEach(y=>{u.has(y)||p.push(y)}),this.syncEngine.Lr(d,p).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=Rd();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class cM{constructor(){this.Ur=new Gf,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new Gf,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class vA{Kr(e){}shutdown(){}}class EA{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){Ue("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){Ue("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const wA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class lv{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class bA extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,o,u){const d=this.ho(e,t);Ue("RestConnection","Sending: ",d,r);const p={};return this.lo(p,o,u),this.fo(e,d,p,r).then(y=>(Ue("RestConnection","Received: ",y),y),y=>{throw wy("RestConnection",`${e} failed with error: `,y,"url: ",d,"request:",r),y})}_o(e,t,r,o,u){return this.co(e,t,r,o,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+bf,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}ho(e,t){return`${this.uo}/v1/${t}:${wA[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,o){return new Promise((u,d)=>{const p=new yt;p.listenOnce(f0.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case XT.NO_ERROR:const w=p.getResponseJson();Ue("Connection","XHR received:",JSON.stringify(w)),u(w);break;case XT.TIMEOUT:Ue("Connection",'RPC "'+e+'" timed out'),d(new Re(ge.DEADLINE_EXCEEDED,"Request time out"));break;case XT.HTTP_ERROR:const D=p.getStatus();if(Ue("Connection",'RPC "'+e+'" failed with status:',D,"response text:",p.getResponseText()),D>0){const S=p.getResponseJson().error;if(S&&S.status&&S.message){const P=function(j){const Y=j.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(Y)>=0?Y:ge.UNKNOWN}(S.status);d(new Re(P,S.message))}else d(new Re(ge.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new Re(ge.UNAVAILABLE,"Connection failed."));break;default:tt()}}finally{Ue("Connection",'RPC "'+e+'" completed.')}});const y=JSON.stringify(o);p.send(t,"POST",y,r,15)})}wo(e,t,r){const o=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=oN(),d=wf(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(p.xmlHttpFactory=new eD({})),this.lo(p.initMessageHeaders,t,r),(0,F.uI)()||(0,F.b$)()||(0,F.d)()||(0,F.w1)()||(0,F.Mn)()||(0,F.ru)()||(p.httpHeadersOverwriteParam="$httpHeaders");const y=o.join("");Ue("Connection","Creating WebChannel: "+y,p);const w=u.createWebChannel(y,p);let D=!1,S=!1;const P=new lv({Jr:Y=>{S?Ue("Connection","Not sending because WebChannel is closed:",Y):(D||(Ue("Connection","Opening WebChannel transport."),w.open(),D=!0),Ue("Connection","WebChannel sending:",Y),w.send(Y))},Yr:()=>w.close()}),j=(Y,ye,xe)=>{Y.listen(ye,ct=>{try{xe(ct)}catch(lt){setTimeout(()=>{throw lt},0)}})};return j(w,g0.EventType.OPEN,()=>{S||Ue("Connection","WebChannel transport opened.")}),j(w,g0.EventType.CLOSE,()=>{S||(S=!0,Ue("Connection","WebChannel transport closed"),P.ro())}),j(w,g0.EventType.ERROR,Y=>{S||(S=!0,wy("Connection","WebChannel transport errored:",Y),P.ro(new Re(ge.UNAVAILABLE,"The operation could not be completed")))}),j(w,g0.EventType.MESSAGE,Y=>{var ye;if(!S){const xe=Y.data[0];kt(!!xe);const ct=xe,lt=ct.error||(null===(ye=ct[0])||void 0===ye?void 0:ye.error);if(lt){Ue("Connection","WebChannel received error:",lt);const nt=lt.status;let st=function(an){const si=Pr[an];if(void 0!==si)return ND(si)}(nt),jt=lt.message;void 0===st&&(st=ge.INTERNAL,jt="Unknown error status: "+nt+" with message "+lt.message),S=!0,P.ro(new Re(st,jt)),w.close()}else Ue("Connection","WebChannel received:",xe),P.oo(xe)}}),j(d,k1.STAT_EVENT,Y=>{Y.stat===p0.PROXY?Ue("Connection","Detected buffering proxy"):Y.stat===p0.NOPROXY&&Ue("Connection","Detected no buffering proxy")}),setTimeout(()=>{P.io()},0),P}}function CA(){return"undefined"!=typeof window?window:null}function qf(){return"undefined"!=typeof document?document:null}function Qd(n){return new Md(n,!0)}class ub{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=o,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),o=Math.max(0,t-r);o>0&&Ue("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,o,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class IA{constructor(e,t,r,o,u,d,p,y){this.Yn=e,this.Vo=r,this.vo=o,this.So=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=y,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new ub(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Ce.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,Ce.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,Ce.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===ge.RESOURCE_EXHAUSTED?(qt(t.toString()),qt("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===ge.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Do===t&&this.Qo(r,o)},r=>{e(()=>{const o=new Re(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(o)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(o=>{r(()=>this.jo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Oo(){var e=this;this.state=5,this.No.Ro((0,Ce.Z)(function*(){e.state=0,e.start()}))}jo(e){return Ue("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(Ue("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class TA extends IA{constructor(e,t,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.M=u}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:tt(),o=e.targetChange.targetIds||[],u=function(y,w){return y.N?(kt(void 0===w||"string"==typeof w),ii.fromBase64String(w||"")):(kt(void 0===w||w instanceof Uint8Array),ii.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&function(y){const w=void 0===y.code?ge.UNKNOWN:ND(y.code);return new Re(w,y.message||"")}(d);t=new Zu(r,o,u,p||null)}else if("documentChange"in e){const r=e.documentChange,o=Cn(n,r.document.name),u=vi(r.document.updateTime),d=new Li({mapValue:{fields:r.document.fields}}),p=Gn.newFoundDocument(o,u,d);t=new tc(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,o=Cn(n,r.document),u=r.readTime?vi(r.readTime):Ct.min(),d=Gn.newNoDocument(o,u);t=new tc([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=Cn(n,r.document);t=new tc([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return tt();{const r=e.filter,u=new V1(r.count||0);t=new Tn(r.targetId,u)}}var y;return t}(this.M,e),r=function(o){if(!("targetChange"in o))return Ct.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?Ct.min():u.readTime?vi(u.readTime):Ct.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=am(this.M),t.addTarget=function(o,u){let d;const p=u.target;return d=Sy(p)?{documents:By(o,p)}:{query:Vf(o,p)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=F0(o,u.resumeToken):u.snapshotVersion.compareTo(Ct.min())>0&&(d.readTime=Vy(o,u.snapshotVersion.toTimestamp())),d}(this.M,e);const r=function(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return tt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=am(this.M),t.removeTarget=e,this.Lo(t)}}class DA extends IA{constructor(e,t,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.M=u,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(kt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function(n,e){return n&&n.length>0?(kt(void 0!==e),n.map(t=>function(r,o){let u=vi(r.updateTime?r.updateTime:o);return u.isEqual(Ct.min())&&(u=vi(o)),new TN(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=vi(e.commitTime);return this.listener.tu(r,t)}return kt(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=am(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>ta(this.M,r))};this.Lo(t)}}class AA extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=o,this.su=!1}iu(){if(this.su)throw new Re(ge.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.So.co(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Re(ge.UNKNOWN,o.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.So._o(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Re(ge.UNKNOWN,o.toString())})}terminate(){this.su=!0}}class dM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(qt(t),this.uu=!1):Ue("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class SA{constructor(e,t,r,o,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=u,this.gu.Kr(p=>{r.enqueueAndForget((0,Ce.Z)(function*(){var y;uc(d)&&(Ue("RemoteStore","Restarting streams for network reachability change."),yield(y=(0,Ce.Z)(function*(w){const D=Ye(w);D.wu.add(4),yield Zf(D),D.yu.set("Unknown"),D.wu.delete(4),yield Wf(D)}),function(w){return y.apply(this,arguments)})(d))}))}),this.yu=new dM(r,o)}}function Wf(n){return lb.apply(this,arguments)}function lb(){return(lb=(0,Ce.Z)(function*(n){if(uc(n))for(const e of n.mu)yield e(!0)})).apply(this,arguments)}function Zf(n){return cv.apply(this,arguments)}function cv(){return(cv=(0,Ce.Z)(function*(n){for(const e of n.mu)yield e(!1)})).apply(this,arguments)}function dv(n,e){const t=Ye(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),db(t)?fv(t):Cm(t).Mo()&&hv(t,e))}function zf(n,e){const t=Ye(n),r=Cm(t);t._u.delete(e),r.Mo()&&cb(t,e),0===t._u.size&&(r.Mo()?r.$o():uc(t)&&t.yu.set("Unknown"))}function hv(n,e){n.pu.Z(e.targetId),Cm(n).Ho(e)}function cb(n,e){n.pu.Z(e),Cm(n).Jo(e)}function fv(n){n.pu=new om({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),Cm(n).start(),n.yu.au()}function db(n){return uc(n)&&!Cm(n).ko()&&n._u.size>0}function uc(n){return 0===Ye(n).wu.size}function xA(n){n.pu=void 0}function RA(n){return NA.apply(this,arguments)}function NA(){return(NA=(0,Ce.Z)(function*(n){n._u.forEach((e,t)=>{hv(n,e)})})).apply(this,arguments)}function G1(n,e){return MA.apply(this,arguments)}function MA(){return(MA=(0,Ce.Z)(function*(n,e){xA(n),db(n)?(n.yu.lu(e),fv(n)):n.yu.set("Unknown")})).apply(this,arguments)}function q1(n,e,t){return kA.apply(this,arguments)}function kA(){return(kA=(0,Ce.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof Zu&&2===e.state&&e.cause)try{yield(r=(0,Ce.Z)(function*(o,u){const d=u.cause;for(const p of u.targetIds)o._u.has(p)&&(yield o.remoteSyncer.rejectListen(p,d),o._u.delete(p),o.pu.removeTarget(p))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Ue("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield hb(n,r)}else if(e instanceof tc?n.pu.ut(e):e instanceof Tn?n.pu._t(e):n.pu.ht(e),!t.isEqual(Ct.min()))try{const r=yield sv(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const d=o.pu.yt(u);return d.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const w=o._u.get(y);w&&o._u.set(y,w.withResumeToken(p.resumeToken,u))}}),d.targetMismatches.forEach(p=>{const y=o._u.get(p);if(!y)return;o._u.set(p,y.withResumeToken(ii.EMPTY_BYTE_STRING,y.snapshotVersion)),cb(o,p);const w=new rc(y.target,p,1,y.sequenceNumber);hv(o,w)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Ue("RemoteStore","Failed to raise snapshot:",r),yield hb(n,r)}var r})).apply(this,arguments)}function hb(n,e,t){return PA.apply(this,arguments)}function PA(){return(PA=(0,Ce.Z)(function*(n,e,t){if(!Ld(e))throw e;n.wu.add(1),yield Zf(n),n.yu.set("Offline"),t||(t=()=>sv(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ce.Z)(function*(){Ue("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield Wf(n)}))})).apply(this,arguments)}function hM(n,e){return e().catch(t=>hb(n,t,e))}function bm(n){return OA.apply(this,arguments)}function OA(){return(OA=(0,Ce.Z)(function*(n){const e=Ye(n),t=Jd(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;W1(e);)try{const o=yield iM(e.localStore,r);if(null===o){0===e.du.length&&t.$o();break}r=o.batchId,Z1(e,o)}catch(o){yield hb(e,o)}fM(e)&&pM(e)})).apply(this,arguments)}function W1(n){return uc(n)&&n.du.length<10}function Z1(n,e){n.du.push(e);const t=Jd(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function fM(n){return uc(n)&&!Jd(n).ko()&&n.du.length>0}function pM(n){Jd(n).start()}function z1(n){return FA.apply(this,arguments)}function FA(){return(FA=(0,Ce.Z)(function*(n){Jd(n).nu()})).apply(this,arguments)}function K1(n){return fb.apply(this,arguments)}function fb(){return(fb=(0,Ce.Z)(function*(n){const e=Jd(n);for(const t of n.du)e.Zo(t.mutations)})).apply(this,arguments)}function gM(n,e,t){return pb.apply(this,arguments)}function pb(){return(pb=(0,Ce.Z)(function*(n,e,t){const r=n.du.shift(),o=zy.from(r,e,t);yield hM(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield bm(n)})).apply(this,arguments)}function Y1(n,e){return LA.apply(this,arguments)}function LA(){return(LA=(0,Ce.Z)(function*(n,e){var t;e&&Jd(n).Xo&&(yield(t=(0,Ce.Z)(function*(r,o){if(RD(u=o.code)&&u!==ge.ABORTED){const d=r.du.shift();Jd(r).Fo(),yield hM(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield bm(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),fM(n)&&pM(n)})).apply(this,arguments)}function mM(n,e){return gb.apply(this,arguments)}function gb(){return(gb=(0,Ce.Z)(function*(n,e){const t=Ye(n);t.asyncQueue.verifyOperationInProgress(),Ue("RemoteStore","RemoteStore received new credentials");const r=uc(t);t.wu.add(3),yield Zf(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield Wf(t)})).apply(this,arguments)}function mb(n,e){return _b.apply(this,arguments)}function _b(){return(_b=(0,Ce.Z)(function*(n,e){const t=Ye(n);e?(t.wu.delete(2),yield Wf(t)):e||(t.wu.add(2),yield Zf(t),t.yu.set("Unknown"))})).apply(this,arguments)}function Cm(n){return n.Iu||(n.Iu=function(e,t,r){const o=Ye(e);return o.iu(),new TA(t,o.So,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Xr:RA.bind(null,n),eo:G1.bind(null,n),zo:q1.bind(null,n)}),n.mu.push(function(){var e=(0,Ce.Z)(function*(t){t?(n.Iu.Fo(),db(n)?fv(n):n.yu.set("Unknown")):(yield n.Iu.stop(),xA(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function Jd(n){return n.Tu||(n.Tu=function(e,t,r){const o=Ye(e);return o.iu(),new DA(t,o.So,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Xr:z1.bind(null,n),eo:Y1.bind(null,n),eu:K1.bind(null,n),tu:gM.bind(null,n)}),n.mu.push(function(){var e=(0,Ce.Z)(function*(t){t?(n.Tu.Fo(),yield bm(n)):(yield n.Tu.stop(),n.du.length>0&&(Ue("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class VA{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new ni,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,u){const d=Date.now()+r,p=new VA(e,t,d,o,u);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Re(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Im(n,e){if(qt("AsyncQueue",`${e}: ${n}`),Ld(n))return new Re(ge.UNAVAILABLE,`${e}: ${n}`);throw n}class Kf{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ke.comparator(t.key,r.key):(t,r)=>Ke.comparator(t.key,r.key),this.keyedMap=Fy(),this.sortedSet=new br(this.comparator)}static emptySet(e){return new Kf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Kf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Kf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class _M{constructor(){this.Eu=new br(Ke.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):tt():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Yf{constructor(e,t,r,o,u,d,p,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=y}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new Yf(e,t,Kf.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class yb{constructor(){this.Ru=void 0,this.listeners=[]}}class Qf{constructor(){this.queries=new Wu(e=>yD(e),Pf),this.onlineState="Unknown",this.bu=new Set}}function pv(n,e){return vb.apply(this,arguments)}function vb(){return(vb=(0,Ce.Z)(function*(n,e){const t=Ye(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new yb),o)try{u.Ru=yield t.onListen(r)}catch(d){const p=Im(d,`Initialization of query '${vD(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,u),u.listeners.push(e),e.Pu(t.onlineState),u.Ru&&e.Vu(u.Ru)&&gv(t)})).apply(this,arguments)}function Eb(n,e){return Tm.apply(this,arguments)}function Tm(){return(Tm=(0,Ce.Z)(function*(n,e){const t=Ye(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)})).apply(this,arguments)}function UA(n,e){const t=Ye(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const p of d.listeners)p.Vu(o)&&(r=!0);d.Ru=o}}r&&gv(t)}function BA(n,e,t){const r=Ye(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function gv(n){n.bu.forEach(e=>{e.next()})}class jA{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Yf(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=Yf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class $A{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class Dm{constructor(e){this.M=e}wi(e){return Cn(this.M,e)}mi(e){return e.metadata.exists?kd(this.M,e.document,!1):Gn.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return vi(e)}}class HA{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=yM(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=dn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new Dm(this.M);for(const o of e)if(o.metadata.queries){const u=r.wi(o.metadata.name);for(const d of o.metadata.queries){const p=(t.get(d)||Sn()).add(u);t.set(d,p)}}return t}complete(){var e=this;return(0,Ce.Z)(function*(){const t=yield function(n,e,t,r){return ov.apply(this,arguments)}(e.localStore,new Dm(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const o of e.queries)yield gA(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function yM(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class vM{constructor(e){this.key=e}}class EM{constructor(e){this.key=e}}class GA{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=Sn(),this.mutatedKeys=Sn(),this.Gu=wD(e),this.Qu=new Kf(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new _M,o=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,p=!1;const y="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,w="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((D,S)=>{const P=o.get(D),j=R0(this.query,S)?S:null,Y=!!P&&this.mutatedKeys.has(P.key),ye=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let xe=!1;P&&j?P.data.isEqual(j.data)?Y!==ye&&(r.track({type:3,doc:j}),xe=!0):this.Hu(P,j)||(r.track({type:2,doc:j}),xe=!0,(y&&this.Gu(j,y)>0||w&&this.Gu(j,w)<0)&&(p=!0)):!P&&j?(r.track({type:0,doc:j}),xe=!0):P&&!j&&(r.track({type:1,doc:P}),xe=!0,(y||w)&&(p=!0)),xe&&(j?(d=d.add(j),u=ye?u.add(D):u.delete(D)):(d=d.delete(D),u=u.delete(D)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const D="F"===this.query.limitType?d.last():d.first();d=d.delete(D.key),u=u.delete(D.key),r.track({type:1,doc:D})}return{Qu:d,zu:r,ii:p,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Au();u.sort((w,D)=>function(S,P){const j=Y=>{switch(Y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt()}};return j(S)-j(P)}(w.type,D.type)||this.Gu(w.doc,D.doc)),this.Ju(r);const d=t?this.Yu():[],p=0===this.Ku.size&&this.current?1:0,y=p!==this.qu;return this.qu=p,0!==u.length||y?{snapshot:new Yf(this.query,e.Qu,o,u,e.mutatedKeys,0===p,y,!1),Xu:d}:{Xu:d}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new _M,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Sn(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new EM(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new vM(r))}),t}ta(e){this.Uu=e._i,this.Ku=Sn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return Yf.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class Q1{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class mv{constructor(e){this.key=e,this.na=!1}}class wM{constructor(e,t,r,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.sa={},this.ia=new Wu(p=>yD(p),Pf),this.ra=new Map,this.oa=new Set,this.ua=new br(Ke.comparator),this.aa=new Map,this.ca=new _A,this.ha={},this.la=new Map,this.fa=Gd.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function J1(n,e){return qA.apply(this,arguments)}function qA(){return(qA=(0,Ce.Z)(function*(n,e){const t=Ev(n);let r,o;const u=t.ia.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.ea();else{const d=yield $f(t.localStore,Bs(e));t.isPrimaryClient&&dv(t.remoteStore,d);const p=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield Am(t,e,r,"current"===p)}return o})).apply(this,arguments)}function Am(n,e,t,r){return wb.apply(this,arguments)}function wb(){return(wb=(0,Ce.Z)(function*(n,e,t,r){n._a=(D,S,P)=>{return(j=(0,Ce.Z)(function*(Y,ye,xe,ct){let lt=ye.view.Wu(xe);lt.ii&&(lt=yield _m(Y.localStore,ye.query,!1).then(({documents:jt})=>ye.view.Wu(jt,lt)));const nt=ct&&ct.targetChanges.get(ye.targetId),st=ye.view.applyChanges(lt,Y.isPrimaryClient,nt);return Rb(Y,ye.targetId,st.Xu),st.snapshot}),function(Y,ye,xe,ct){return j.apply(this,arguments)})(n,D,S,P);var j};const o=yield _m(n.localStore,e,!0),u=new GA(e,o._i),d=u.Wu(o.documents),p=Ly.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),y=u.applyChanges(d,n.isPrimaryClient,p);Rb(n,t,y.Xu);const w=new Q1(e,t,u);return n.ia.set(e,w),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),y.snapshot})).apply(this,arguments)}function X1(n,e){return WA.apply(this,arguments)}function WA(){return(WA=(0,Ce.Z)(function*(n,e){const t=Ye(n),r=t.ia.get(e),o=t.ra.get(r.targetId);if(o.length>1)return t.ra.set(r.targetId,o.filter(u=>!Pf(u,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Kd(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),zf(t.remoteStore,r.targetId),lc(t,r.targetId)}).catch(qd))):(lc(t,r.targetId),yield Kd(t.localStore,r.targetId,!0))})).apply(this,arguments)}function ZA(){return(ZA=(0,Ce.Z)(function*(n,e,t){const r=Ub(n);try{const o=yield function(u,d){const p=Ye(u),y=wr.now(),w=d.reduce((S,P)=>S.add(P.key),Sn());let D;return p.persistence.runTransaction("Locally write mutations","readwrite",S=>p.fi.Ks(S,w).next(P=>{D=P;const j=[];for(const Y of d){const ye=L1(Y,D.get(Y.key));null!=ye&&j.push(new xd(Y.key,ye,fD(ye.value.mapValue),kr.exists(!0)))}return p.Bs.addMutationBatch(S,y,j,d)})).then(S=>(S.applyToLocalDocumentSet(D),{batchId:S.batchId,changes:D}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,d,p){let y=u.ha[u.currentUser.toKey()];y||(y=new br(Pt)),y=y.insert(d,p),u.ha[u.currentUser.toKey()]=y}(r,o.batchId,t),yield Ka(r,o.changes),yield bm(r.remoteStore)}catch(o){const u=Im(o,"Failed to persist write");t.reject(u)}})).apply(this,arguments)}function bb(n,e){return Cb.apply(this,arguments)}function Cb(){return(Cb=(0,Ce.Z)(function*(n,e){const t=Ye(n);try{const r=yield rM(t.localStore,e);e.targetChanges.forEach((o,u)=>{const d=t.aa.get(u);d&&(kt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.na=!0:o.modifiedDocuments.size>0?kt(d.na):o.removedDocuments.size>0&&(kt(d.na),d.na=!1))}),yield Ka(t,r,e)}catch(r){yield qd(r)}})).apply(this,arguments)}function CM(n,e,t){const r=Ye(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ia.forEach((u,d)=>{const p=d.view.Pu(e);p.snapshot&&o.push(p.snapshot)}),function(u,d){const p=Ye(u);p.onlineState=d;let y=!1;p.queries.forEach((w,D)=>{for(const S of D.listeners)S.Pu(d)&&(y=!0)}),y&&gv(p)}(r.eventManager,e),o.length&&r.sa.zo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function eO(n,e,t){return Ib.apply(this,arguments)}function Ib(){return(Ib=(0,Ce.Z)(function*(n,e,t){const r=Ye(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.aa.get(e),u=o&&o.key;if(u){let d=new br(Ke.comparator);d=d.insert(u,Gn.newNoDocument(u,Ct.min()));const p=Sn().add(u),y=new ec(Ct.min(),new Map,new On(Pt),d,p);yield bb(r,y),r.ua=r.ua.remove(u),r.aa.delete(e),_v(r)}else yield Kd(r.localStore,e,!1).then(()=>lc(r,e,t)).catch(qd)})).apply(this,arguments)}function Sm(n,e){return Tb.apply(this,arguments)}function Tb(){return(Tb=(0,Ce.Z)(function*(n,e){const t=Ye(n),r=e.batch.batchId;try{const o=yield nb(t.localStore,e);xb(t,r,null),is(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ka(t,o)}catch(o){yield qd(o)}})).apply(this,arguments)}function IM(n,e,t){return Db.apply(this,arguments)}function Db(){return(Db=(0,Ce.Z)(function*(n,e,t){const r=Ye(n);try{const o=yield function(u,d){const p=Ye(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let w;return p.Bs.lookupMutationBatch(y,d).next(D=>(kt(null!==D),w=D.keys(),p.Bs.removeMutationBatch(y,D))).next(()=>p.Bs.performConsistencyCheck(y)).next(()=>p.fi.Ks(y,w))})}(r.localStore,e);xb(r,e,t),is(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ka(r,o)}catch(o){yield qd(o)}})).apply(this,arguments)}function Sb(){return(Sb=(0,Ce.Z)(function*(n,e){const t=Ye(n);uc(t.remoteStore)||Ue("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=Ye(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>d.Bs.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const o=t.la.get(r)||[];o.push(e),t.la.set(r,o)}catch(r){const o=Im(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}})).apply(this,arguments)}function is(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function xb(n,e,t){const r=Ye(n);let o=r.ha[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.ha[r.currentUser.toKey()]=o}}function lc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||zA(n,r)})}function zA(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(zf(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),_v(n))}function Rb(n,e,t){for(const r of t)r instanceof vM?(n.ca.addReference(r.key,e),Nb(n,r)):r instanceof EM?(Ue("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||zA(n,r.key)):tt()}function Nb(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||(Ue("SyncEngine","New document in limbo: "+t),n.oa.add(r),_v(n))}function _v(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new Ke(dn.fromString(e)),r=n.fa.next();n.aa.set(r,new mv(t)),n.ua=n.ua.insert(t,r),dv(n.remoteStore,new rc(Bs(kf(t.path)),r,2,vs.A))}}function Ka(n,e,t){return Mb.apply(this,arguments)}function Mb(){return(Mb=(0,Ce.Z)(function*(n,e,t){const r=Ye(n),o=[],u=[],d=[];var p;r.ia.isEmpty()||(r.ia.forEach((p,y)=>{d.push(r._a(y,e,t).then(w=>{if(w){r.isPrimaryClient&&r.sharedClientState.updateQueryState(y.targetId,w.fromCache?"not-current":"current"),o.push(w);const D=tb.Ys(y.targetId,w);u.push(D)}}))}),yield Promise.all(d),r.sa.zo(o),yield(p=(0,Ce.Z)(function*(y,w){const D=Ye(y);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>me.forEach(w,P=>me.forEach(P.Hs,j=>D.persistence.referenceDelegate.addReference(S,P.targetId,j)).next(()=>me.forEach(P.Js,j=>D.persistence.referenceDelegate.removeReference(S,P.targetId,j)))))}catch(S){if(!Ld(S))throw S;Ue("LocalStore","Failed to update sequence numbers: "+S)}for(const S of w){const P=S.targetId;if(!S.fromCache){const j=D.ui.get(P),ye=j.withLastLimboFreeSnapshotVersion(j.snapshotVersion);D.ui=D.ui.insert(P,ye)}}}),function(y,w){return p.apply(this,arguments)})(r.localStore,u))})).apply(this,arguments)}function KA(n,e){return yv.apply(this,arguments)}function yv(){return(yv=(0,Ce.Z)(function*(n,e){const t=Ye(n);if(!t.currentUser.isEqual(e)){Ue("SyncEngine","User change. New user:",e.toKey());const r=yield rv(t.localStore,e);t.currentUser=e,(o=t).la.forEach(d=>{d.forEach(p=>{p.reject(new Re(ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ka(t,r.di)}var o})).apply(this,arguments)}function TM(n,e){const t=Ye(n),r=t.aa.get(e);if(r&&r.na)return Sn().add(r.key);{let o=Sn();const u=t.ra.get(e);if(!u)return o;for(const d of u){const p=t.ia.get(d);o=o.unionWith(p.view.ju)}return o}}function DM(n,e){return xm.apply(this,arguments)}function xm(){return(xm=(0,Ce.Z)(function*(n,e){const t=Ye(n),r=yield _m(t.localStore,e.query,!0),o=e.view.ta(r);return t.isPrimaryClient&&Rb(t,e.targetId,o.Xu),o})).apply(this,arguments)}function YA(n,e){return vv.apply(this,arguments)}function vv(){return(vv=(0,Ce.Z)(function*(n,e){const t=Ye(n);return rb(t.localStore,e).then(r=>Ka(t,r))})).apply(this,arguments)}function kb(n,e,t,r){return Pb.apply(this,arguments)}function Pb(){return(Pb=(0,Ce.Z)(function*(n,e,t,r){const o=Ye(n),u=yield function(d,p){const y=Ye(d),w=Ye(y.Bs);return y.persistence.runTransaction("Lookup mutation documents","readonly",D=>w.fn(D,p).next(S=>S?y.fi.Ks(D,S):me.resolve(null)))}(o.localStore,e);var p;null!==u?("pending"===t?yield bm(o.remoteStore):"acknowledged"===t||"rejected"===t?(xb(o,e,r||null),is(o,e),p=e,Ye(Ye(o.localStore).Bs)._n(p)):tt(),yield Ka(o,u)):Ue("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function Ob(){return(Ob=(0,Ce.Z)(function*(n,e){const t=Ye(n);if(Ev(t),Ub(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield AM(t,r.toArray());t.da=!0,yield mb(t.remoteStore,!0);for(const u of o)dv(t.remoteStore,u)}else if(!1===e&&!1!==t.da){const r=[];let o=Promise.resolve();t.ra.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(lc(t,d),Kd(t.localStore,d,!0))),zf(t.remoteStore,d)}),yield o,yield AM(t,r),function(u){const d=Ye(u);d.aa.forEach((p,y)=>{zf(d.remoteStore,y)}),d.ca.Si(),d.aa=new Map,d.ua=new br(Ke.comparator)}(t),t.da=!1,yield mb(t.remoteStore,!1)}})).apply(this,arguments)}function AM(n,e,t){return Fb.apply(this,arguments)}function Fb(){return(Fb=(0,Ce.Z)(function*(n,e,t){const r=Ye(n),o=[],u=[];for(const d of e){let p;const y=r.ra.get(d);if(y&&0!==y.length){p=yield $f(r.localStore,Bs(y[0]));for(const w of y){const D=r.ia.get(w),S=yield DM(r,D);S.snapshot&&u.push(S.snapshot)}}else{const w=yield pA(r.localStore,d);p=yield $f(r.localStore,w),yield Am(r,SM(w),d,!1)}o.push(p)}return r.sa.zo(u),o})).apply(this,arguments)}function SM(n){return _D(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function xM(n){const e=Ye(n);return Ye(Ye(e.localStore).persistence).Fs()}function RM(n,e,t,r){return Lb.apply(this,arguments)}function Lb(){return(Lb=(0,Ce.Z)(function*(n,e,t,r){const o=Ye(n);if(o.da)return void Ue("SyncEngine","Ignoring unexpected query state notification.");const u=o.ra.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield rb(o.localStore,ED(u[0])),p=ec.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Ka(o,d,p);break}case"rejected":yield Kd(o.localStore,e,!0),lc(o,e,r);break;default:tt()}})).apply(this,arguments)}function tO(n,e,t){return Vb.apply(this,arguments)}function Vb(){return(Vb=(0,Ce.Z)(function*(n,e,t){const r=Ev(n);if(r.da){for(const o of e){if(r.ra.has(o)){Ue("SyncEngine","Adding an already active target "+o);continue}const u=yield pA(r.localStore,o),d=yield $f(r.localStore,u);yield Am(r,SM(u),d.targetId,!1),dv(r.remoteStore,d)}for(const o of t)r.ra.has(o)&&(yield Kd(r.localStore,o,!1).then(()=>{zf(r.remoteStore,o),lc(r,o)}).catch(qd))}})).apply(this,arguments)}function Ev(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=bb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=TM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=eO.bind(null,e),e.sa.zo=UA.bind(null,e.eventManager),e.sa.wa=BA.bind(null,e.eventManager),e}function Ub(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Sm.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=IM.bind(null,e),e}class Bb{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ce.Z)(function*(){t.M=Qd(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return nv(this.persistence,new hA,e.initialUser,this.M)}ya(e){return new ym(vm.Yi,this.M)}ga(e){return new cM}terminate(){var e=this;return(0,Ce.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class QA extends Bb{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ce.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield Ub(r.Ta.syncEngine),yield bm(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return nv(this.persistence,new hA,e.initialUser,this.M)}pa(e){return new fm(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=eb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?$s.withCacheSize(this.cacheSizeBytes):$s.DEFAULT;return new X0(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,CA(),qf(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new cM}}class nO extends QA{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ce.Z)(function*(){yield t().call(r,e);const o=r.Ta.syncEngine;r.sharedClientState instanceof wm&&(r.sharedClientState.syncEngine={$r:kb.bind(null,o),Br:RM.bind(null,o),Lr:tO.bind(null,o),Fs:xM.bind(null,o),Fr:YA.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,Ce.Z)(function*(d){yield function(n,e){return Ob.apply(this,arguments)}(r.Ta.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):d||r.gcScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}ga(e){const t=CA();if(!wm.vt(t))throw new Re(ge.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=eb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new wm(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class wv{initialize(e,t){var r=this;return(0,Ce.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>CM(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=KA.bind(null,r.syncEngine),yield mb(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Qf}createDatastore(e){const t=Qd(e.databaseInfo.databaseId),r=new bA(e.databaseInfo);return new AA(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=p=>CM(this.syncEngine,p,0),d=EA.vt()?new EA:new vA,new SA(t,r,o,u,d);var t,r,o,u,d}createSyncEngine(e,t){return function(r,o,u,d,p,y,w){const D=new wM(r,o,u,d,p,y);return w&&(D.da=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ce.Z)(function*(t){const r=Ye(t);Ue("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield Zf(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function jb(n,e=10240){let t=0;return{read:()=>(0,Ce.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ce.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class bv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class MM{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new ni,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,Ce.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,Ce.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),o=Number(r);isNaN(o)&&e.va(`length string (${r}) is not valid number`);const u=yield e.Sa(o);return new $A(JSON.parse(u),t.length+o)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,Ce.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,Ce.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class JA{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ce.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Re(ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,Ce.Z)(function*(u,d){const p=Ye(u),y=am(p.M)+"/documents",w={documents:d.map(j=>Ui(p.M,j))},D=yield p._o("BatchGetDocuments",y,w),S=new Map;D.forEach(j=>{const Y=function(n,e){return"found"in e?function(t,r){kt(!!r.found);const o=Cn(t,r.found.name),u=vi(r.found.updateTime),d=new Li({mapValue:{fields:r.found.fields}});return Gn.newFoundDocument(o,u,d)}(n,e):"missing"in e?function(t,r){kt(!!r.missing),kt(!!r.readTime);const o=Cn(t,r.missing),u=vi(r.readTime);return Gn.newNoDocument(o,u)}(n,e):tt()}(p.M,j);S.set(Y.key.toString(),Y)});const P=[];return d.forEach(j=>{const Y=S.get(j.toString());kt(!!Y),P.push(Y)}),P}),function(u,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Lf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ce.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=Ke.fromPath(o);e.mutations.push(new P0(u,e.precondition(u)))}),yield(r=(0,Ce.Z)(function*(o,u){const d=Ye(o),p=am(d.M)+"/documents",y={writes:u.map(w=>ta(d.M,w))};yield d.co("Commit",p,y)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw tt();t=Ct.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Re(ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?kr.updateTime(t):kr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ct.min()))throw new Re(ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return kr.updateTime(t)}return kr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Rm{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.xa=r.maxAttempts,this.No=new ub(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,Ce.Z)(function*(){const t=new JA(e.datastore),r=e.ka(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Ma(u)}))}).catch(o=>{e.Ma(o)})}))}ka(e){try{const t=this.updateFunction(e);return!Kg(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!RD(t)}return!1}}class $b{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=yi.UNAUTHENTICATED,this.clientId=Cf.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,Ce.Z)(function*(p){Ue("FirestoreClient","Received user=",p.uid),yield u.authCredentialListener(p),u.user=p});return function(p){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Ue("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,Ce.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Re(ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ni;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Im(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function Hb(n,e){return Gb.apply(this,arguments)}function Gb(){return(Gb=(0,Ce.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ue("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,Ce.Z)(function*(u){r.isEqual(u)||(yield rv(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e})).apply(this,arguments)}function XA(n,e){return eS.apply(this,arguments)}function eS(){return(eS=(0,Ce.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield tS(n);Ue("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>mM(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>mM(e.remoteStore,u)),n.onlineComponents=e})).apply(this,arguments)}function tS(n){return nS.apply(this,arguments)}function nS(){return(nS=(0,Ce.Z)(function*(n){return n.offlineComponents||(Ue("FirestoreClient","Using default OfflineComponentProvider"),yield Hb(n,new Bb)),n.offlineComponents})).apply(this,arguments)}function Nm(n){return Cv.apply(this,arguments)}function Cv(){return(Cv=(0,Ce.Z)(function*(n){return n.onlineComponents||(Ue("FirestoreClient","Using default OnlineComponentProvider"),yield XA(n,new wv)),n.onlineComponents})).apply(this,arguments)}function rS(n){return tS(n).then(e=>e.persistence)}function qb(n){return tS(n).then(e=>e.localStore)}function iS(n){return Nm(n).then(e=>e.remoteStore)}function Wb(n){return Nm(n).then(e=>e.syncEngine)}function Xd(n){return sS.apply(this,arguments)}function sS(){return(sS=(0,Ce.Z)(function*(n){const e=yield Nm(n),t=e.eventManager;return t.onListen=J1.bind(null,e.syncEngine),t.onUnlisten=X1.bind(null,e.syncEngine),t})).apply(this,arguments)}function Hr(n,e,t={}){const r=new ni;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(o,u,d,p,y){const w=new bv({next:S=>{u.enqueueAndForget(()=>Eb(o,D));const P=S.docs.has(d);!P&&S.fromCache?y.reject(new Re(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&S.fromCache&&p&&"server"===p.source?y.reject(new Re(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(S)},error:S=>y.reject(S)}),D=new jA(kf(d.path),w,{includeMetadataChanges:!0,ku:!0});return pv(o,D)}(yield Xd(n),n.asyncQueue,e,t,r)})),r.promise}function zb(n,e,t={}){const r=new ni;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(o,u,d,p,y){const w=new bv({next:S=>{u.enqueueAndForget(()=>Eb(o,D)),S.fromCache&&"server"===p.source?y.reject(new Re(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(S)},error:S=>y.reject(S)}),D=new jA(d,w,{includeMetadataChanges:!0,ku:!0});return pv(o,D)}(yield Xd(n),n.asyncQueue,e,t,r)})),r.promise}const aS=new Map;function Tv(n,e,t){if(!t)throw new Re(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function cc(n,e,t,r){if(!0===e&&!0===r)throw new Re(ge.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Kb(n){if(!Ke.isDocumentKey(n))throw new Re(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Dv(n){if(Ke.isDocumentKey(n))throw new Re(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Jf(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":tt()}function un(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Jf(n);throw new Re(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Mm(n,e){if(e<=0)throw new Re(ge.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class uS{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Re(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Re(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,cc("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class eh{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uS({}),this._settingsFrozen=!1,e instanceof ju?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Re(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ju(o.options.projectId)}(e))}get app(){if(!this._app)throw new Re(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Re(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uS(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new aN;switch(t.type){case"gapi":const r=t.client;return kt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new cN(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Re(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=aS.get(e);t&&(Ue("ComponentProvider","Removing Datastore"),aS.delete(e),t.terminate())}(this),Promise.resolve()}}class Ht{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ya(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ht(this.firestore,e,this._key)}}class ss{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ss(this.firestore,e,this._query)}}class Ya extends ss{constructor(e,t,r){super(e,t,kf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ht(this.firestore,null,new Ke(e))}withConverter(e){return new Ya(this.firestore,e,this._path)}}function cS(n,e,...t){if(n=(0,F.m9)(n),Tv("collection","path",e),n instanceof eh){const r=dn.fromString(e,...t);return Dv(r),new Ya(n,null,r)}{if(!(n instanceof Ht||n instanceof Ya))throw new Re(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(dn.fromString(e,...t));return Dv(r),new Ya(n.firestore,null,r)}}function th(n,e,...t){if(n=(0,F.m9)(n),1===arguments.length&&(e=Cf.R()),Tv("doc","path",e),n instanceof eh){const r=dn.fromString(e,...t);return Kb(r),new Ht(n,null,new Ke(r))}{if(!(n instanceof Ht||n instanceof Ya))throw new Re(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(dn.fromString(e,...t));return Kb(r),new Ht(n.firestore,n instanceof Ya?n.converter:null,new Ke(r))}}function dS(n,e){return n=(0,F.m9)(n),e=(0,F.m9)(e),(n instanceof Ht||n instanceof Ya)&&(e instanceof Ht||e instanceof Ya)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function FM(n,e){return n=(0,F.m9)(n),e=(0,F.m9)(e),n instanceof ss&&e instanceof ss&&n.firestore===e.firestore&&Pf(n._query,e._query)&&n.converter===e.converter}class oO{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new ub(this,"async_queue_retry"),this.Qa=()=>{const t=qf();t&&Ue("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=qf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=qf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new ni;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,Ce.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!Ld(t))throw t;Ue("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,qt("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const o=VA.createAndSchedule(this,e,t,r,u=>this.Ha(u));return this.La.push(o),o}ja(){this.Ua&&tt()}verifyOperationInProgress(){}Ja(){var e=this;return(0,Ce.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function hS(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class LM{constructor(){this._progressObserver={},this._taskCompletionResolver=new ni,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class nr extends eh{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new oO,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||fS(this),this._firestoreClient.terminate()}}function Gr(n){return n._firestoreClient||fS(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function fS(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new pN(n._databaseId,u,n._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));var u,p;n._firestoreClient=new $b(n._authCredentials,n._appCheckCredentials,n._queue,r)}function jM(n,e,t){const r=new ni;return n.asyncQueue.enqueue((0,Ce.Z)(function*(){try{yield Hb(n,t),yield XA(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(u=o).name?u.code===ge.FAILED_PRECONDITION||u.code===ge.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var u})).then(()=>r.promise)}function pS(n){if(n._initialized||n._terminated)throw new Re(ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ku{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Re(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ri(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Qa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qa(ii.fromBase64String(e))}catch(t){throw new Re(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Qa(ii.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Xf{constructor(e){this._methodName=e}}class Av{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Pt(this._lat,e._lat)||Pt(this._long,e._long)}}const WM=/^__.*__$/;class ZM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new xd(e,this.data,this.fieldMask,t,this.fieldTransforms):new rm(e,this.data,t,this.fieldTransforms)}}class ep{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new xd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Yb(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt()}}class Qb{constructor(e,t,r,o,u,d){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=o,void 0===u&&this.tc(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new Qb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.nc({path:r,ic:!1});return o.rc(e),o}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.nc({path:r,ic:!1});return o.tc(),o}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return np(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(Yb(this.ec)&&WM.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class zM{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||Qd(e)}lc(e,t,r,o=!1){return new Qb({ec:e,methodName:t,hc:r,path:ri.emptyPath(),ic:!1,cc:o},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function tp(n){const e=n._freezeSettings(),t=Qd(n._databaseId);return new zM(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Jb(n,e,t,r,o,u={}){const d=n.lc(u.merge||u.mergeFields?2:0,e,t,o);rC("Data must be an object, but it was:",d,r);const p=QM(r,d);let y,w;if(u.merge)y=new Zg(d.fieldMask),w=d.fieldTransforms;else if(u.mergeFields){const D=[];for(const S of u.mergeFields){const P=Rv(e,S,t);if(!d.contains(P))throw new Re(ge.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);Nv(D,P)||D.push(P)}y=new Zg(D),w=d.fieldTransforms.filter(S=>y.covers(S.field))}else y=null,w=d.fieldTransforms;return new ZM(new Li(p),y,w)}class Sv extends Xf{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Sv}}function xv(n,e,t){return new Qb({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class Xb extends Xf{_toFieldTransform(e){return new nm(e.path,new Sd)}isEqual(e){return e instanceof Xb}}class KM extends Xf{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=xv(this,e,!0),r=this.fc.map(u=>wi(u,t)),o=new za(r);return new nm(e.path,o)}isEqual(e){return this===e}}class YM extends Xf{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=xv(this,e,!0),r=this.fc.map(u=>wi(u,t)),o=new ea(r);return new nm(e.path,o)}isEqual(e){return this===e}}class hO extends Xf{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new Of(e.M,CD(e.M,this.dc));return new nm(e.path,t)}isEqual(e){return this===e}}function eC(n,e,t,r){const o=n.lc(1,e,t);rC("Data must be an object, but it was:",o,r);const u=[],d=Li.empty();Kl(r,(y,w)=>{const D=km(e,y,t);w=(0,F.m9)(w);const S=o.oc(D);if(w instanceof Sv)u.push(D);else{const P=wi(w,S);null!=P&&(u.push(D),d.set(D,P))}});const p=new Zg(u);return new ep(d,p,o.fieldTransforms)}function tC(n,e,t,r,o,u){const d=n.lc(1,e,t),p=[Rv(e,r,t)],y=[o];if(u.length%2!=0)throw new Re(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<u.length;P+=2)p.push(Rv(e,u[P])),y.push(u[P+1]);const w=[],D=Li.empty();for(let P=p.length-1;P>=0;--P)if(!Nv(w,p[P])){const j=p[P];let Y=y[P];Y=(0,F.m9)(Y);const ye=d.oc(j);if(Y instanceof Sv)w.push(j);else{const xe=wi(Y,ye);null!=xe&&(w.push(j),D.set(j,xe))}}const S=new Zg(w);return new ep(D,S,d.fieldTransforms)}function gS(n,e,t,r=!1){return wi(t,n.lc(r?4:3,e))}function wi(n,e){if(nC(n=(0,F.m9)(n)))return rC("Unsupported field value:",e,n),QM(n,e);if(n instanceof Xf)return function(t,r){if(!Yb(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const d of t){let p=wi(d,r.uc(u));null==p&&(p={nullValue:"NULL_VALUE"}),o.push(p),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,F.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return CD(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=wr.fromDate(t);return{timestampValue:Vy(r.M,o)}}if(t instanceof wr){const o=new wr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Vy(r.M,o)}}if(t instanceof Av)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Qa)return{bytesValue:F0(r.M,t._byteString)};if(t instanceof Ht){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.ac(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:L0(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${Jf(t)}`)}(n,e)}function QM(n,e){const t={};return oD(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Kl(n,(r,o)=>{const u=wi(o,e.sc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function nC(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof wr||n instanceof Av||n instanceof Qa||n instanceof Ht||n instanceof Xf)}function rC(n,e,t){if(!nC(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Jf(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function Rv(n,e,t){if((e=(0,F.m9)(e))instanceof Ku)return e._internalPath;if("string"==typeof e)return km(n,e);throw np("Field path arguments must be of type string or ",n,!1,void 0,t)}const mS=new RegExp("[~\\*/\\[\\]]");function km(n,e,t){if(e.search(mS)>=0)throw np(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ku(...e.split("."))._internalPath}catch(r){throw np(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function np(n,e,t,r,o){const u=r&&!r.isEmpty(),d=void 0!==o;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let y="";return(u||d)&&(y+=" (found",u&&(y+=` in field ${r}`),d&&(y+=` in document ${o}`),y+=")"),new Re(ge.INVALID_ARGUMENT,p+n+y)}function Nv(n,e){return n.some(t=>t.isEqual(e))}class nh{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Ht(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Mv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(rh("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Mv extends nh{data(){return super.data()}}function rh(n,e){return"string"==typeof e?km(n,e):e instanceof Ku?e._internalPath:e._delegate._internalPath}class dc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ja extends nh{constructor(e,t,r,o,u,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Pm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(rh("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Pm extends Ja{data(e={}){return super.data(e)}}class hc{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new dc(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Pm(this._firestore,this._userDataWriter,r.key,r,new dc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new Pm(r._firestore,r._userDataWriter,d.doc.key,d.doc,new dc(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const p=new Pm(r._firestore,r._userDataWriter,d.doc.key,d.doc,new dc(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let y=-1,w=-1;return 0!==d.type&&(y=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),w=u.indexOf(d.doc.key)),{type:_S(d.type),doc:p,oldIndex:y,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function _S(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt()}}function yS(n,e){return n instanceof Ja&&e instanceof Ja?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof hc&&e instanceof hc&&n._firestore===e._firestore&&FM(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function vS(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Re(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Om{}function Xa(n,...e){for(const t of e)n=t._apply(n);return n}class JM extends Om{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=tp(e.firestore),r=function(o,u,d,p,y,w,D){let S;if(y.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Re(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){bS(D,w);const j=[];for(const Y of D)j.push(wS(p,o,Y));S={arrayValue:{values:j}}}else S=wS(p,o,D)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||bS(D,w),S=gS(d,"where",D,"in"===w||"not-in"===w);const P=Vi.create(y,w,S);return function(j,Y){if(Y.S()){const xe=S0(j);if(null!==xe&&!xe.isEqual(Y.field))throw new Re(ge.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${xe.toString()}' and '${Y.field.toString()}'`);const ct=A0(j);null!==ct&&CS(0,Y.field,ct)}const ye=function(xe,ct){for(const lt of xe.filters)if(ct.indexOf(lt.op)>=0)return lt.op;return null}(j,function(xe){switch(xe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Y.op));if(null!==ye)throw new Re(ge.INVALID_ARGUMENT,ye===Y.op?`Invalid query. You cannot use more than one '${Y.op.toString()}' filter.`:`Invalid query. You cannot use '${Y.op.toString()}' filters with '${ye.toString()}' filters.`)}(o,P),P}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new ss(e.firestore,e.converter,function(o,u){const d=o.filters.concat([u]);return new vo(o.path,o.collectionGroup,o.explicitOrderBy.slice(),d,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class Fm extends Om{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Re(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Re(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Mf(o,u);return function(p,y){if(null===A0(p)){const w=S0(p);null!==w&&CS(0,w,y.field)}}(r,d),d}(e._query,this._c,this.gc);return new ss(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new vo(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class iC extends Om{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new ss(e.firestore,e.converter,Ny(e._query,this.yc,this.Ic))}}class oC extends Om{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=aC(e,this.type,this.Tc,this.Ec);return new ss(e.firestore,e.converter,(o=t,new vo((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class ES extends Om{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=aC(e,this.type,this.Tc,this.Ec);return new ss(e.firestore,e.converter,(o=t,new vo((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function aC(n,e,t,r){if(t[0]=(0,F.m9)(t[0]),t[0]instanceof nh)return function(o,u,d,p,y){if(!p)throw new Re(ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const w=[];for(const D of Jl(o))if(D.field.isKeyField())w.push(Gu(u,p.key));else{const S=p.data.field(D.field);if(Cy(S))throw new Re(ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const P=D.field.canonicalString();throw new Re(ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${P}' (used as the orderBy) does not exist.`)}w.push(S)}return new Ad(w,y)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=tp(n.firestore);return function(u,d,p,y,w,D){const S=u.explicitOrderBy;if(w.length>S.length)throw new Re(ge.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const P=[];for(let j=0;j<w.length;j++){const Y=w[j];if(S[j].field.isKeyField()){if("string"!=typeof Y)throw new Re(ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof Y}`);if(!x0(u)&&-1!==Y.indexOf("/"))throw new Re(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${Y}' contains a slash.`);const ye=u.path.child(dn.fromString(Y));if(!Ke.isDocumentKey(ye))throw new Re(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${ye}' is not because it contains an odd number of segments.`);const xe=new Ke(ye);P.push(Gu(d,xe))}else{const ye=gS(p,y,Y);P.push(ye)}}return new Ad(P,D)}(n._query,n.firestore._databaseId,o,e,t,r)}}function wS(n,e,t){if("string"==typeof(t=(0,F.m9)(t))){if(""===t)throw new Re(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!x0(e)&&-1!==t.indexOf("/"))throw new Re(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(dn.fromString(t));if(!Ke.isDocumentKey(r))throw new Re(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Gu(n,new Ke(r))}if(t instanceof Ht)return Gu(n,t._key);throw new Re(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jf(t)}.`)}function bS(n,e){if(!Array.isArray(n)||0===n.length)throw new Re(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Re(ge.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function CS(n,e,t){if(!t.isEqual(e))throw new Re(ge.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const fc={maxAttempts:5};class ih{convertValue(e,t="none"){switch(Id(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Cd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw tt()}}convertObject(e,t){const r={};return Kl(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new Av(pr(e.latitude),pr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Df(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(zg(e));default:return null}}convertTimestamp(e){const t=Jo(e);return new wr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=dn.fromString(e);kt(Gy(r));const o=new ju(r.get(1),r.get(3)),u=new Ke(r.popFirst(5));return o.isEqual(t)||qt(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function rp(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class nk extends ih{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ht(this.firestore,null,t)}}class IS{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=tp(e)}set(e,t,r){this._verifyNotCommitted();const o=pc(e,this._firestore),u=rp(o.converter,t,r),d=Jb(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,kr.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=pc(e,this._firestore);let d;return d="string"==typeof(t=(0,F.m9)(t))||t instanceof Ku?tC(this._dataReader,"WriteBatch.update",u._key,t,r,o):eC(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,kr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=pc(e,this._firestore);return this._mutations=this._mutations.concat(new Lf(t._key,kr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function pc(n,e){if((n=(0,F.m9)(n)).firestore!==e)throw new Re(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class sh extends ih{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ht(this.firestore,null,t)}}function eu(n,e,t){n=un(n,Ht);const r=un(n.firestore,nr),o=rp(n.converter,e,t);return op(r,[Jb(tp(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,kr.none())])}function ip(n,e,t,...r){n=un(n,Ht);const o=un(n.firestore,nr),u=tp(o);let d;return d="string"==typeof(e=(0,F.m9)(e))||e instanceof Ku?tC(u,"updateDoc",n._key,e,t,r):eC(u,"updateDoc",n._key,e),op(o,[d.toMutation(n._key,kr.exists(!0))])}function oh(n,...e){var t,r,o;n=(0,F.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||hS(e[d])||(u=e[d],d++);const p={includeMetadataChanges:u.includeMetadataChanges};if(hS(e[d])){const S=e[d];e[d]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[d+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[d+2]=null===(o=S.complete)||void 0===o?void 0:o.bind(S)}let y,w,D;if(n instanceof Ht)w=un(n.firestore,nr),D=kf(n._key.path),y={next:S=>{e[d]&&e[d](lC(w,n,S))},error:e[d+1],complete:e[d+2]};else{const S=un(n,ss);w=un(S.firestore,nr),D=S._query;const P=new sh(w);y={next:j=>{e[d]&&e[d](new hc(w,P,S,j))},error:e[d+1],complete:e[d+2]},vS(n._query)}return function(S,P,j,Y){const ye=new bv(Y),xe=new jA(P,ye,j);return S.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return pv(yield Xd(S),xe)})),()=>{ye.Aa(),S.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return Eb(yield Xd(S),xe)}))}}(Gr(w),D,p,y)}function op(n,e){return function(t,r){const o=new ni;return t.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(n,e,t){return ZA.apply(this,arguments)}(yield Wb(t),r,o)})),o.promise}(Gr(n),e)}function lC(n,e,t){const r=t.docs.get(e._key),o=new sh(n);return new Ja(n,o,e._key,r,new dc(t.hasPendingWrites,t.fromCache),e.converter)}class AS extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=tp(e)}get(e){const t=pc(e,this._firestore),r=new nk(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return tt();const u=o[0];if(u.isFoundDocument())return new nh(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new nh(this._firestore,r,t._key,null,t.converter);throw tt()})}set(e,t,r){const o=pc(e,this._firestore),u=rp(o.converter,t,r),d=Jb(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const u=pc(e,this._firestore);let d;return d="string"==typeof(t=(0,F.m9)(t))||t instanceof Ku?tC(this._dataReader,"Transaction.update",u._key,t,r,o):eC(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=pc(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=pc(e,this._firestore),r=new sh(this._firestore);return super.get(e).then(o=>new Ja(this._firestore,r,t._key,o._document,new dc(!1,!1),t.converter))}}function NS(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function hk(){if("undefined"==typeof Uint8Array)throw new Re("unimplemented","Uint8Arrays are not available in this environment.")}function fk(){if("undefined"==typeof atob)throw new Re("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){bf=Pi.SDK_VERSION,(0,Pi._registerComponent)(new Ha.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new nr(o,new uN(t.getProvider("auth-internal")),new iD(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,Pi.registerVersion)(tD,"3.4.9",n),(0,Pi.registerVersion)(tD,"3.4.9","esm2017")}();class Vv{constructor(e){this._delegate=e}static fromBase64String(e){return fk(),new Vv(Qa.fromBase64String(e))}static fromUint8Array(e){return hk(),new Vv(Qa.fromUint8Array(e))}toBase64(){return fk(),this._delegate.toBase64()}toUint8Array(){return hk(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function dC(n){return function(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of["next","error","complete"])if(r in t&&"function"==typeof t[r])return!0;return!1}(n)}class fO{enableIndexedDbPersistence(e,t){return function(n,e){pS(n=un(n,nr));const t=Gr(n),r=n._freezeSettings(),o=new wv;return jM(t,o,new QA(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(n){pS(n=un(n,nr));const e=Gr(n),t=n._freezeSettings(),r=new wv;return jM(e,r,new nO(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(n){if(n._initialized&&!n._terminated)throw new Re(ge.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ni;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{yield(t=(0,Ce.Z)(function*(r){if(!na.vt())return Promise.resolve();const o=r+"main";yield na.delete(o)}),function(r){return t.apply(this,arguments)})(eb(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class gk{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ju||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&wy("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function(n,e,t,r={}){var o;const u=(n=un(n,eh))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&wy("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,p;if("string"==typeof r.mockUserToken)d=r.mockUserToken,p=yi.MOCK_USER;else{d=(0,F.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Re(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new yi(y)}n._authCredentials=new qg(new rD(d,p))}}(this._delegate,e,t,r)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){const e=yield rS(n),t=yield iS(n);return e.setNetworkEnabled(!0),function(r){const o=Ye(r);return o.wu.delete(0),Wf(o)}(t)}))}(Gr(n=un(n,nr)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){const e=yield rS(n),t=yield iS(n);return e.setNetworkEnabled(!1),(r=(0,Ce.Z)(function*(o){const u=Ye(o);u.wu.add(0),yield Zf(u),u.yu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Gr(n=un(n,nr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,cc("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(e){const t=new ni;return e.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(n,e){return Sb.apply(this,arguments)}(yield Wb(e),t)})),t.promise}(Gr(n=un(n,nr)))}(this._delegate)}onSnapshotsInSync(e){return function(n,e){return function(n,e){const t=new bv(e);return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return r=yield Xd(n),o=t,Ye(r).bu.add(o),void o.next();var r,o})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return r=yield Xd(n),o=t,void Ye(r).bu.delete(o);var r,o}))}}(Gr(n=un(n,nr)),hS(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new v(this,cS(this._delegate,e))}catch(t){throw ws(t,"collection()","Firestore.collection()")}}doc(e){try{return new aa(this,th(this._delegate,e))}catch(t){throw ws(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new c(this,function(n,e){if(n=un(n,eh),Tv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Re(ge.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ss(n,null,(t=e,new vo(dn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ws(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(n,e,t){n=un(n,nr);const r=Object.assign(Object.assign({},fc),t);return function(o){if(o.maxAttempts<1)throw new Re(ge.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(n,e,t){const r=new ni;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){const o=yield(u=n,Nm(u).then(d=>d.datastore));var u;new Rm(n.asyncQueue,o,t,e,r).run()})),r.promise}(Gr(n),o=>e(new AS(n,o)),r)}(this._delegate,t=>e(new MS(this,t)))}batch(){return Gr(this._delegate),new mk(new IS(this._delegate,e=>op(this._delegate,e)))}loadBundle(e){return function(n,e){const t=Gr(n=un(n,nr)),r=new LM;return function(n,e,t,r){const o=function(u,d){let p;return p="string"==typeof u?(new TextEncoder).encode(u):u,y=function(y,w){if(y instanceof Uint8Array)return jb(y,w);if(y instanceof ArrayBuffer)return jb(new Uint8Array(y),w);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new MM(y,d);var y}(t,Qd(e));n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){!function(n,e,t){const r=Ye(n);var o;(o=(0,Ce.Z)(function*(u,d,p){try{const y=yield d.getMetadata();if(yield function(P,j){const Y=Ye(P),ye=vi(j.createTime);return Y.persistence.runTransaction("hasNewerBundle","readonly",xe=>Y._s.getBundleMetadata(xe,j.id)).then(xe=>!!xe&&xe.createTime.compareTo(ye)>=0)}(u.localStore,y))return yield d.close(),p._completeWith({taskState:"Success",documentsLoaded:(P=y).totalDocuments,bytesLoaded:P.totalBytes,totalDocuments:P.totalDocuments,totalBytes:P.totalBytes}),Promise.resolve(new Set);p._updateProgress(yM(y));const w=new HA(y,u.localStore,d.M);let D=yield d.ma();for(;D;){const P=yield w.Fu(D);P&&p._updateProgress(P),D=yield d.ma()}const S=yield w.complete();return yield Ka(u,S.Lu,void 0),yield function(P,j){const Y=Ye(P);return Y.persistence.runTransaction("Save bundle","readwrite",ye=>Y._s.saveBundleMetadata(ye,j))}(u.localStore,y),p._completeWith(S.progress),Promise.resolve(S.Bu)}catch(y){return wy("SyncEngine",`Loading bundle failed with ${y}`),p._failWith(y),Promise.resolve(new Set)}var P}),function(u,d,p){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield Wb(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function(n,e){return function(n,e){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){return function(t,r){const o=Ye(t);return o.persistence.runTransaction("Get named query","readonly",u=>o._s.getNamedQuery(u,r))}(yield qb(n),e)}))}(Gr(n=un(n,nr)),e).then(t=>t?new ss(n,null,t.query):null)}(this._delegate,e).then(t=>t?new c(this,t):null)}}class hC extends ih{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vv(new Qa(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return aa.forKey(t,this.firestore,null)}}class MS{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new hC(e)}get(e){const t=C(e);return this._delegate.get(t).then(r=>new a(this._firestore,new Ja(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=C(e);return r?(NS("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=C(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=C(e);return this._delegate.delete(t),this}}class mk{constructor(e){this._delegate=e}set(e,t,r){const o=C(e);return r?(NS("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=C(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=C(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class up{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Pm(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new l(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=up.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new up(e,new hC(e),t),o.set(t,u)),u}}up.INSTANCES=new WeakMap;class aa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new hC(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new aa(t,new Ht(t._delegate,r,new Ke(e)))}static forKey(e,t,r){return new aa(t,new Ht(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new v(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new v(this.firestore,cS(this._delegate,e))}catch(t){throw ws(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,F.m9)(e))instanceof Ht&&dS(this._delegate,e)}set(e,t){t=NS("DocumentReference.set",t);try{return t?eu(this._delegate,e,t):eu(this._delegate,e)}catch(r){throw ws(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?ip(this._delegate,e):ip(this._delegate,e,t,...r)}catch(o){throw ws(o,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return op(un(n.firestore,nr),[new Lf(n._key,kr.none())])}(this._delegate)}onSnapshot(...e){const t=i(e),r=s(e,o=>new a(this.firestore,new Ja(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return oh(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=un(n,Ht);const e=un(n.firestore,nr),t=Gr(e),r=new sh(e);return function(n,e){const t=new ni;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(r=(0,Ce.Z)(function*(o,u,d){try{const p=yield function(y,w){const D=Ye(y);return D.persistence.runTransaction("read document","readonly",S=>D.fi.Ls(S,w))}(o,u);p.isFoundDocument()?d.resolve(p):p.isNoDocument()?d.resolve(null):d.reject(new Re(ge.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const y=Im(p,`Failed to get document '${u} from cache`);d.reject(y)}}),function(o,u,d){return r.apply(this,arguments)})(yield qb(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Ja(e,r,n._key,o,new dc(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=un(n,Ht);const e=un(n.firestore,nr);return Hr(Gr(e),n._key,{source:"server"}).then(t=>lC(e,n,t))}(this._delegate):function(n){n=un(n,Ht);const e=un(n.firestore,nr);return Hr(Gr(e),n._key).then(t=>lC(e,n,t))}(this._delegate),t.then(r=>new a(this.firestore,new Ja(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new aa(this.firestore,this._delegate.withConverter(e?up.getInstance(this.firestore,e):null))}}function ws(n,e,t){return n.message=n.message.replace(e,t),n}function i(n){for(const e of n)if("object"==typeof e&&!dC(e))return e;return{}}function s(n,e){var t,r;let o;return o=dC(n[0])?n[0]:dC(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class a{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new aa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return yS(this._delegate,e._delegate)}}class l extends a{data(e){const t=this._delegate.data(e);return function(n,e){n||tt()}(void 0!==t),t}}class c{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new hC(e)}where(e,t,r){try{return new c(this.firestore,Xa(this._delegate,function(n,e,t){const r=e,o=rh("where",n);return new JM(o,r,t)}(e,t,r)))}catch(o){throw ws(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new c(this.firestore,Xa(this._delegate,function(n,e="asc"){const t=e,r=rh("orderBy",n);return new Fm(r,t)}(e,t)))}catch(r){throw ws(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new c(this.firestore,Xa(this._delegate,function(n){return Mm("limit",n),new iC("limit",n,"F")}(e)))}catch(t){throw ws(t,"limit()","Query.limit()")}}limitToLast(e){try{return new c(this.firestore,Xa(this._delegate,function(n){return Mm("limitToLast",n),new iC("limitToLast",n,"L")}(e)))}catch(t){throw ws(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new c(this.firestore,Xa(this._delegate,function(...n){return new oC("startAt",n,!0)}(...e)))}catch(t){throw ws(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new c(this.firestore,Xa(this._delegate,function(...n){return new oC("startAfter",n,!1)}(...e)))}catch(t){throw ws(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new c(this.firestore,Xa(this._delegate,function(...n){return new ES("endBefore",n,!1)}(...e)))}catch(t){throw ws(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new c(this.firestore,Xa(this._delegate,function(...n){return new ES("endAt",n,!0)}(...e)))}catch(t){throw ws(t,"endAt()","Query.endAt()")}}isEqual(e){return FM(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=un(n,ss);const e=un(n.firestore,nr),t=Gr(e),r=new sh(e);return function(n,e){const t=new ni;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(r=(0,Ce.Z)(function*(o,u,d){try{const p=yield _m(o,u,!0),y=new GA(u,p._i),w=y.Wu(p.documents),D=y.applyChanges(w,!1);d.resolve(D.snapshot)}catch(p){const y=Im(p,`Failed to execute query '${u} against cache`);d.reject(y)}}),function(o,u,d){return r.apply(this,arguments)})(yield qb(n),e,t);var r})),t.promise}(t,n._query).then(o=>new hc(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=un(n,ss);const e=un(n.firestore,nr),t=Gr(e),r=new sh(e);return zb(t,n._query,{source:"server"}).then(o=>new hc(e,r,n,o))}(this._delegate):function(n){n=un(n,ss);const e=un(n.firestore,nr),t=Gr(e),r=new sh(e);return vS(n._query),zb(t,n._query).then(o=>new hc(e,r,n,o))}(this._delegate),t.then(r=>new m(this.firestore,new hc(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=i(e),r=s(e,o=>new m(this.firestore,new hc(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return oh(this._delegate,t,r)}withConverter(e){return new c(this.firestore,this._delegate.withConverter(e?up.getInstance(this.firestore,e):null))}}class h{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new l(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class m{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new c(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new l(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new h(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new l(this._firestore,r))})}isEqual(e){return yS(this._delegate,e._delegate)}}class v extends c{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new aa(this.firestore,e):null}doc(e){try{return new aa(this.firestore,void 0===e?th(this._delegate):th(this._delegate,e))}catch(t){throw ws(t,"doc()","CollectionReference.doc()")}}add(e){return function(n,e){const t=un(n.firestore,nr),r=th(n),o=rp(n.converter,e);return op(t,[Jb(tp(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,kr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new aa(this.firestore,t))}isEqual(e){return dS(this._delegate,e._delegate)}withConverter(e){return new v(this.firestore,this._delegate.withConverter(e?up.getInstance(this.firestore,e):null))}}function C(n){return un(n,Ht)}class T{constructor(...e){this._delegate=new Ku(...e)}static documentId(){return new T(ri.keyField().canonicalString())}isEqual(e){return(e=(0,F.m9)(e))instanceof Ku&&this._delegate._internalPath.isEqual(e._internalPath)}}class x{constructor(e){this._delegate=e}static serverTimestamp(){const e=new Xb("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new x(e)}static delete(){const e=new Sv("deleteField");return e._methodName="FieldValue.delete",new x(e)}static arrayUnion(...e){const t=function(...n){return new KM("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new x(t)}static arrayRemove(...e){const t=function(...n){return new YM("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new x(t)}static increment(e){const t=function(n){return new hO("increment",n)}(e);return t._methodName="FieldValue.increment",new x(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const k={Firestore:gk,GeoPoint:Av,Timestamp:wr,Blob:Vv,Transaction:MS,WriteBatch:mk,DocumentReference:aa,DocumentSnapshot:a,Query:c,QueryDocumentSnapshot:l,QuerySnapshot:m,CollectionReference:v,FieldPath:T,FieldValue:x,setLogLevel:function(n){!function(n){Qo.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function(n){(function(n,e){n.INTERNAL.registerComponent(new Ha.wA("firestore-compat",t=>((e,t)=>new gk(e,t,new fO))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},k)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.18")}(_w.Z);var X=V(6682),he=V(309),se=V(7771),Le=V(8858);class Te extends hs.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new ut(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,r=t?this._events:this._trimBufferThenGetEvents(),o=this.scheduler,u=r.length;let d;if(this.closed)throw new Aa.N;if(this.isStopped||this.hasError?d=Fh.w.EMPTY:(this.observers.push(e),d=new Le.W(this,e)),o&&e.add(e=new he.ht(e,o)),t)for(let p=0;p<u&&!e.closed;p++)e.next(r[p]);else for(let p=0;p<u&&!e.closed;p++)e.next(r[p].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),d}_getNow(){return(this.scheduler||se.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,r=this._windowTime,o=this._events,u=o.length;let d=0;for(;d<u&&!(e-o[d].time<r);)d++;return u>t&&(d=Math.max(d,u-t)),d>0&&o.splice(0,d),o}}class ut{constructor(e,t){this.time=e,this.value=t}}function It(n,e,t){let r;return r=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},o=>o.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:r}){let o,d,u=0,p=!1,y=!1;return function(D){let S;u++,!o||p?(p=!1,o=new Te(n,e,r),S=o.subscribe(this),d=D.subscribe({next(P){o.next(P)},error(P){p=!0,o.error(P)},complete(){y=!0,d=void 0,o.complete()}}),y&&(d=void 0)):S=o.subscribe(this),this.add(()=>{u--,S.unsubscribe(),S=void 0,d&&!y&&t&&0===u&&(d.unsubscribe(),d=void 0,o=void 0)})}}(r))}function Or(n,e){return e?lr(()=>n,e):lr(()=>n)}var bs=V(3101);V(2329);const gO=new Map,nU={activated:!1,tokenObservers:[]},rU={initialized:!1,enabled:!1};function $i(n){return gO.get(n)||nU}function Qu(n,e){gO.set(n,e)}function OS(){return rU}class uU{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ce.Z)(function*(){t.stop();try{t.pending=new F.BH,yield function(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new F.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Gs=new F.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function _O(n){if(!$i(n).activated)throw Gs.create("use-before-activation",{appName:n.name})}function vk(n,e){return Ek.apply(this,arguments)}function Ek(){return(Ek=(0,Ce.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const S=yield o.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const u={method:"POST",body:JSON.stringify(e),headers:r};let d,p;try{d=yield fetch(n,u)}catch(S){throw Gs.create("fetch-network-error",{originalErrorMessage:S.message})}if(200!==d.status)throw Gs.create("fetch-status-error",{httpStatus:d.status});try{p=yield d.json()}catch(S){throw Gs.create("fetch-parse-error",{originalErrorMessage:S.message})}const y=p.ttl.match(/^([\d.]+)(s)$/);if(!y||!y[2]||isNaN(Number(y[1])))throw Gs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${p.ttl}`});const w=1e3*Number(y[1]),D=Date.now();return{token:p.token,expireTimeMillis:D+w,issuedAtTimeMillis:D}})).apply(this,arguments)}function pU(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const gC="firebase-app-check-store";let VS=null;function vO(){return VS||(VS=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(Gs.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{const o=r.target.result;switch(r.oldVersion){case 0:o.createObjectStore(gC,{keyPath:"compositeKey"})}}}catch(t){e(Gs.create("storage-open",{originalErrorMessage:t.message}))}}),VS)}function wk(){return(wk=(0,Ce.Z)(function*(n,e){const r=(yield vO()).transaction(gC,"readwrite"),u=r.objectStore(gC).put({compositeKey:n,value:e});return new Promise((d,p)=>{u.onsuccess=y=>{d()},r.onerror=y=>{var w;p(Gs.create("storage-set",{originalErrorMessage:null===(w=y.target.error)||void 0===w?void 0:w.message}))}})})).apply(this,arguments)}const mC=new fo.Yd("@firebase/app-check");function CO(n,e){return(0,F.hl)()?function(n,e){return function(n,e){return wk.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{mC.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function IO(){return OS().enabled}function TO(){return Tk.apply(this,arguments)}function Tk(){return(Tk=(0,Ce.Z)(function*(){const n=OS();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const IU={error:"UNKNOWN_ERROR"};function TU(n){return F.US.encodeString(JSON.stringify(n),!1)}function US(n){return Dk.apply(this,arguments)}function Dk(){return(Dk=(0,Ce.Z)(function*(n,e=!1){const t=n.app;_O(t);const r=$i(t);let u,o=r.token;if(!o){const y=yield r.cachedTokenPromise;y&&BS(y)&&(o=y)}if(!e&&o&&BS(o))return{token:o.token};let p,d=!1;if(IO()){r.exchangeTokenPromise||(r.exchangeTokenPromise=vk(pU(t,yield TO()),n.heartbeatServiceProvider).then(w=>(r.exchangeTokenPromise=void 0,w)),d=!0);const y=yield r.exchangeTokenPromise;return yield CO(t,y),Qu(t,Object.assign(Object.assign({},r),{token:y})),{token:y.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(y=>(r.exchangeTokenPromise=void 0,y)),d=!0),o=yield r.exchangeTokenPromise}catch(y){"appCheck/throttled"===y.code?mC.warn(y.message):mC.error(y),u=y}return o?(p={token:o.token},Qu(t,Object.assign(Object.assign({},r),{token:o})),yield CO(t,o)):p=AU(u),d&&AO(t,p),p})).apply(this,arguments)}function Sk(n,e){const t=$i(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Qu(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function DO(n){const{app:e}=n,t=$i(e);let r=t.tokenRefresher;r||(r=function(n){const{app:e}=n;return new uU((0,Ce.Z)(function*(){let r;if(r=$i(e).token?yield US(n,!0):yield US(n),r.error)throw r.error}),()=>!0,()=>{const t=$i(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Qu(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function AO(n,e){const t=$i(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function BS(n){return n.expireTimeMillis-Date.now()>0}function AU(n){return{token:TU(IU),error:n}}class SU{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=$i(this.app);for(const t of e)Sk(this.app,t.next);return Promise.resolve()}}const OO="app-check-internal";(0,Pi._registerComponent)(new Ha.wA("app-check",n=>function(n,e){return new SU(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(OO).initialize()})),(0,Pi._registerComponent)(new Ha.wA(OO,n=>function(n){return{getToken:e=>US(n,e),addTokenListener:e=>function(n,e,t,r){const{app:o}=n,u=$i(o),d={next:t,error:r,type:e};if(Qu(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,d]})),u.token&&BS(u.token)){const p=u.token;Promise.resolve().then(()=>{t({token:p.token}),DO(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>DO(n))}(n,"INTERNAL",e),removeTokenListener:e=>Sk(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Pi.registerVersion)("@firebase/app-check","0.5.8");class _C{constructor(){return(0,bn.vb)("app-check")}}"undefined"!=typeof window&&window;var $S=V(7841);const kk=new f.OlP("angularfire2.auth.use-emulator"),Pk=new f.OlP("angularfire2.auth.settings"),Ok=new f.OlP("angularfire2.auth.tenant-id"),Fk=new f.OlP("angularfire2.auth.langugage-code"),Lk=new f.OlP("angularfire2.auth.use-device-language"),Vk=new f.OlP("angularfire.auth.persistence"),Uk=(n,e,t,r,o,u,d,p)=>(0,Br.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const y=e.runOutsideAngular(()=>n.auth());if(t&&y.useEmulator(...t),r&&(y.tenantId=r),y.languageCode=o,u&&y.useDeviceLanguage(),d)for(const[w,D]of Object.entries(d))y.settings[w]=D;return p&&y.setPersistence(p),y},[t,r,o,u,d,p]);let Uv=(()=>{class n{constructor(t,r,o,u,d,p,y,w,D,S,P,j){const Y=new hs.xQ,ye=(0,at.of)(void 0).pipe((0,he.QV)(d.outsideAngular),lr(()=>u.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,4828)))),(0,St.U)(()=>(0,Br.on)(t,u,r)),(0,St.U)(xe=>Uk(xe,u,p,w,D,S,y,P)),It({bufferSize:1,refCount:!1}));if(_a(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,at.of)(null);else{ye.pipe(Ni()).subscribe();const ct=ye.pipe(lr(st=>st.getRedirectResult().then(jt=>jt,()=>null)),bn.iC,It({bufferSize:1,refCount:!1})),lt=ye.pipe(lr(st=>new yr.y(jt=>({unsubscribe:u.runOutsideAngular(()=>st.onAuthStateChanged(an=>jt.next(an),an=>jt.error(an),()=>jt.complete()))})))),nt=ye.pipe(lr(st=>new yr.y(jt=>({unsubscribe:u.runOutsideAngular(()=>st.onIdTokenChanged(an=>jt.next(an),an=>jt.error(an),()=>jt.complete()))}))));this.authState=ct.pipe(Or(lt),(0,bs.R)(d.outsideAngular),(0,he.QV)(d.insideAngular)),this.user=ct.pipe(Or(nt),(0,bs.R)(d.outsideAngular),(0,he.QV)(d.insideAngular)),this.idToken=this.user.pipe(lr(st=>st?(0,Bt.D)(st.getIdToken()):(0,at.of)(null))),this.idTokenResult=this.user.pipe(lr(st=>st?(0,Bt.D)(st.getIdTokenResult()):(0,at.of)(null))),this.credential=(0,X.T)(ct,Y,this.authState.pipe(xi(st=>!st))).pipe((0,St.U)(st=>(null==st?void 0:st.user)?st:null),(0,bs.R)(d.outsideAngular),(0,he.QV)(d.insideAngular))}return(0,Br.pX)(this,ye,u,{spy:{apply:(xe,ct,lt)=>{(xe.startsWith("signIn")||xe.startsWith("createUser"))&&lt.then(nt=>Y.next(nt))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Br.Dh),f.LFG(Br.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(bn.HU),f.LFG(kk,8),f.LFG(Pk,8),f.LFG(Ok,8),f.LFG(Fk,8),f.LFG(Lk,8),f.LFG(Vk,8),f.LFG(_C,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),zU=(()=>{class n{constructor(){$S.Z.registerVersion("angularfire",bn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[Uv]}),n})();function LO(n,e){return function(n,e=pw.z){return new yr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function Bk(n,e){return LO(n,e).pipe((0,St.U)(t=>({payload:t,type:"query"})))}function HS(n,e){return Bk(n,e).pipe(Cu(void 0),pd(),(0,St.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,p)=>{const y=o.find(D=>D.doc.ref.isEqual(d.ref)),w=null==t?void 0:t.payload.docs.find(D=>D.ref.isEqual(d.ref));y&&JSON.stringify(y.doc.metadata)===JSON.stringify(d.metadata)||!y&&w&&JSON.stringify(w.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:d}})}),u}))}function VO(n,e,t){return HS(n,t).pipe(xa((r,o)=>function(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return jk(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return jk(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return jk(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),mw(),(0,St.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function jk(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function UO(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class BO{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=HS(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,St.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(Cu(void 0),pd(),xi(([r,o])=>o.length>0||!r),(0,St.U)(([r,o])=>o),bn.iC)}auditTrail(e){return this.stateChanges(e).pipe(xa((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=UO(e);return VO(this.query,t,this.afs.schedulers.outsideAngular).pipe(bn.iC)}valueChanges(e={}){return Bk(this.query,this.afs.schedulers.outsideAngular).pipe((0,St.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),bn.iC)}get(e){return(0,Bt.D)(this.query.get(e)).pipe(bn.iC)}add(e){return this.ref.add(e)}doc(e){return new jO(this.ref.doc(e),this.afs)}}class jO{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=GO(r,t);return new BO(o,u,this.afs)}snapshotChanges(){return function(n,e){return LO(n,e).pipe(Cu(void 0),pd(),(0,St.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(bn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,St.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Bt.D)(this.ref.get(e)).pipe(bn.iC)}}class XU{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?HS(this.query,this.afs.schedulers.outsideAngular).pipe((0,St.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),xi(t=>t.length>0),bn.iC):HS(this.query,this.afs.schedulers.outsideAngular).pipe(bn.iC)}auditTrail(e){return this.stateChanges(e).pipe(xa((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=UO(e);return VO(this.query,t,this.afs.schedulers.outsideAngular).pipe(bn.iC)}valueChanges(e={}){return Bk(this.query,this.afs.schedulers.outsideAngular).pipe((0,St.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),bn.iC)}get(e){return(0,Bt.D)(this.query.get(e)).pipe(bn.iC)}}const $O=new f.OlP("angularfire2.enableFirestorePersistence"),HO=new f.OlP("angularfire2.firestore.persistenceSettings"),e2=new f.OlP("angularfire2.firestore.settings"),t2=new f.OlP("angularfire2.firestore.use-emulator");function GO(n,e=(t=>t)){return{query:e(n),ref:n}}let GS=(()=>{class n{constructor(t,r,o,u,d,p,y,w,D,S,P,j,Y,ye,xe,ct,lt){this.schedulers=y;const nt=(0,Br.on)(t,p,r),st=D;S&&Uk(nt,p,P,Y,ye,xe,j,ct),[this.firestore,this.persistenceEnabled$]=(0,Br.cc)(`${nt.name}.firestore`,"AngularFirestore",nt.name,()=>{const jt=p.runOutsideAngular(()=>nt.firestore());if(u&&jt.settings(u),st&&jt.useEmulator(...st),o&&!_a(d)){const an=()=>{try{return(0,Bt.D)(jt.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(si){return"undefined"!=typeof console&&console.warn(si),(0,at.of)(!1)}};return[jt,p.runOutsideAngular(an)]}return[jt,(0,at.of)(!1)]},[u,st,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=GO(o,r),p=this.schedulers.ngZone.run(()=>u);return new BO(p,d,this)}collectionGroup(t,r){const o=r||(d=>d),u=this.firestore.collectionGroup(t);return new XU(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new jO(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Br.Dh),f.LFG(Br.xv,8),f.LFG($O,8),f.LFG(e2,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(bn.HU),f.LFG(HO,8),f.LFG(t2,8),f.LFG(Uv,8),f.LFG(kk,8),f.LFG(Pk,8),f.LFG(Ok,8),f.LFG(Fk,8),f.LFG(Lk,8),f.LFG(Vk,8),f.LFG(_C,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),n2=(()=>{class n{constructor(){$S.Z.registerVersion("angularfire",bn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:$O,useValue:!0},{provide:HO,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[GS]}),n})(),r2=(()=>{class n{constructor(t,r){this.fb=t,this.firestore=r,this.submitLoader=!1,this.title="Contact form",this.ngUnsubscribe=new hs.xQ,this.contactForm=this.fb.group({firstName:["",[Vs.required]],lastName:["",[Vs.required]],email:["",[Vs.required]],description:["",[Vs.required,Vs.minLength(10)]]})}ngOnInit(){}submit(t){new Date("dd:mm:yyyy HH:mm:ss"),this.firestore.collection("contact-form").doc(this._newId).set({firstName:this.contactForm.value.firstName,lastName:this.contactForm.value.lastName,email:this.contactForm.value.email,description:this.contactForm.value.description}).then(o=>{alert("Thanks for contacting us through our portal. We resolved your inquiry as soon  as possible."),console.log(o),this.contactForm.reset()}).catch(o=>{console.log(o)})}isFieldInvalid(t){var r,o;return null===(o=null===(r=this.contactForm)||void 0===r?void 0:r.get(t))||void 0===o?void 0:o.invalid}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(tT),f.Y36(GS))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-contact-us"]],decls:44,vars:2,consts:[[1,"header"],["routerLink","",1,"logo"],[1,"header-right"],["routerLink","/home","routerLinkActive","active"],["routerLink","/contact","routerLinkActive","active"],["routerLink","/about","routerLinkActive","active"],["routerLink","/register-user","routerLinkActive","active"],["routerLink","/sign-in","routerLinkActive","active"],[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock",3,"formGroup"],[1,"formGroup"],["for","fname"],["type","text","formControlName","firstName","placeholder","First Name","required","",1,"formControl"],["firstName",""],["for","lname"],["type","text","formControlName","lastName","placeholder","Last Name","required","",1,"formControl"],["lastName",""],["for","email"],["type","email","formControlName","email","placeholder","abc@gmail.com","required","",1,"formControl"],["email",""],["for","subject"],["id","subject","name","subject","formControlName","description","placeholder","Write something..","required","",2,"height","200px"],["type","submit","value","Submit",3,"disabled","click"],[1,"footer"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"a",1),f._uU(2,"Logo"),f.qZA(),f.TgZ(3,"div",2),f.TgZ(4,"a",3),f._uU(5,"Home"),f.qZA(),f.TgZ(6,"a",4),f._uU(7,"Contact"),f.qZA(),f.TgZ(8,"a",5),f._uU(9,"About"),f.qZA(),f.TgZ(10,"a",6),f._uU(11,"Sign Up"),f.qZA(),f.TgZ(12,"a",7),f._uU(13,"Sign In"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(14,"div",8),f.TgZ(15,"div",9),f.TgZ(16,"div",10),f.TgZ(17,"h3"),f._uU(18,"Contact Us"),f.qZA(),f._UZ(19,"hr"),f.TgZ(20,"div",11),f.TgZ(21,"label",12),f._uU(22,"First Name"),f.qZA(),f._UZ(23,"input",13,14),f.qZA(),f.TgZ(25,"div",11),f.TgZ(26,"label",15),f._uU(27,"Last Name"),f.qZA(),f._UZ(28,"input",16,17),f.qZA(),f.TgZ(30,"div",11),f.TgZ(31,"label",18),f._uU(32,"Email"),f.qZA(),f._UZ(33,"input",19,20),f.qZA(),f.TgZ(35,"div",11),f.TgZ(36,"label",21),f._uU(37,"Subject"),f.qZA(),f._UZ(38,"textarea",22),f.qZA(),f.TgZ(39,"div",11),f.TgZ(40,"input",23),f.NdJ("click",function(){return r.submit(r.contactForm.value)}),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(41,"div",24),f.TgZ(42,"p"),f._uU(43," \xa9 copyright 2022 designed by Bhuwan Paneru "),f.qZA(),f.qZA()),2&t&&(f.xp6(16),f.Q6J("formGroup",r.contactForm),f.xp6(24),f.Q6J("disabled",r.contactForm.invalid))},directives:[Ba,cd,jE,mg,nf,Fu,Fl,$_],styles:["input[type=text][_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box;margin-top:6px;margin-bottom:16px;resize:vertical}input[type=submit][_ngcontent-%COMP%]{background-color:#04aa6d;color:#fff;padding:12px 20px;border:none;border-radius:4px;cursor:pointer}input[type=submit][_ngcontent-%COMP%]:hover{background-color:#45a049}"]}),n})(),i2=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-about"]],decls:25,vars:0,consts:[[1,"header"],["routerLink","",1,"logo"],[1,"header-right"],["routerLink","/home","routerLinkActive","active"],["routerLink","/contact","routerLinkActive","active"],["routerLink","/about","routerLinkActive","active"],["routerLink","/register-user","routerLinkActive","active"],["routerLink","/sign-in","routerLinkActive","active"],[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"footer"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"a",1),f._uU(2,"Logo"),f.qZA(),f.TgZ(3,"div",2),f.TgZ(4,"a",3),f._uU(5,"Home"),f.qZA(),f.TgZ(6,"a",4),f._uU(7,"Contact"),f.qZA(),f.TgZ(8,"a",5),f._uU(9,"About"),f.qZA(),f.TgZ(10,"a",6),f._uU(11,"Sign Up"),f.qZA(),f.TgZ(12,"a",7),f._uU(13,"Sign In"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(14,"div",8),f.TgZ(15,"div",9),f.TgZ(16,"div",10),f.TgZ(17,"h3"),f._uU(18,"About Us"),f.qZA(),f._UZ(19,"hr"),f.TgZ(20,"p"),f._uU(21," What is Lorem Ipsum?\nLorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum. Why do we use it?\nIt is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like). Where does it come from?\nContrary to popular belief, Lorem Ipsum is not simply random text. It has roots in a piece of classical Latin literature from 45 BC, making it over 2000 years old. Richard McClintock, a Latin professor at Hampden-Sydney College in Virginia, looked up one of the more obscure Latin words, consectetur, from a Lorem Ipsum passage, and going through the cites of the word in classical literature, discovered the undoubtable source. Lorem Ipsum comes from sections 1.10.32 and 1.10.33 of \"de Finibus Bonorum et Malorum\" (The Extremes of Good and Evil) by Cicero, written in 45 BC. This book is a treatise on the theory of ethics, very popular during the Renaissance. The first line of Lorem Ipsum, \"Lorem ipsum dolor sit amet..\", comes from a line in section 1.10.32. The standard chunk of Lorem Ipsum used since the 1500s is reproduced below for those interested. Sections 1.10.32 and 1.10.33 from \"de Finibus Bonorum et Malorum\" by Cicero are also reproduced in their exact original form, accompanied by English versions from the 1914 translation by H. Rackham. Where can I get some?\nThere are many variations of passages of Lorem Ipsum available, but the majority have suffered alteration in some form, by injected humour, or randomised words which don't look even slightly believable. If you are going to use a passage of Lorem Ipsum, you need to be sure there isn't anything embarrassing hidden in the middle of text. All the Lorem Ipsum generators on the Internet tend to repeat predefined chunks as necessary, making this the first true generator on the Internet. It uses a dictionary of over 200 Latin words, combined with a handful of model sentence structures, to generate Lorem Ipsum which looks reasonable. The generated Lorem Ipsum is therefore always free from repetition, injected humour, or non-characteristic words etc. "),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(22,"div",11),f.TgZ(23,"p"),f._uU(24," \xa9 copyright 2022 designed by Bhuwan Paneru "),f.qZA(),f.qZA())},directives:[Ba,cd],styles:[""]}),n})(),s2=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-landing"]],decls:25,vars:0,consts:[[1,"header"],["routerLink","",1,"logo"],[1,"header-right"],["routerLink","/home","routerLinkActive","active"],["routerLink","/contact","routerLinkActive","active"],["routerLink","/about","routerLinkActive","active"],["routerLink","/register-user","routerLinkActive","active"],["routerLink","/sign-in","routerLinkActive","active"],[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"footer"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"a",1),f._uU(2,"Logo"),f.qZA(),f.TgZ(3,"div",2),f.TgZ(4,"a",3),f._uU(5,"Home"),f.qZA(),f.TgZ(6,"a",4),f._uU(7,"Contact"),f.qZA(),f.TgZ(8,"a",5),f._uU(9,"About"),f.qZA(),f.TgZ(10,"a",6),f._uU(11,"Sign Up"),f.qZA(),f.TgZ(12,"a",7),f._uU(13,"Sign In"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(14,"div",8),f.TgZ(15,"div",9),f.TgZ(16,"div",10),f.TgZ(17,"h3"),f._uU(18,"Home"),f.qZA(),f._UZ(19,"hr"),f.TgZ(20,"p"),f._uU(21,' Contrary to popular belief, Lorem Ipsum is not simply random text. It has roots in a piece of classical Latin literature from 45 BC, making it over 2000 years old. Richard McClintock, a Latin professor at Hampden-Sydney College in Virginia, looked up one of the more obscure Latin words, consectetur, from a Lorem Ipsum passage, and going through the cites of the word in classical literature, discovered the undoubtable source. Lorem Ipsum comes from sections 1.10.32 and 1.10.33 of "de Finibus Bonorum et Malorum" (The Extremes of Good and Evil) by Cicero, written in 45 BC. This book is a treatise on the theory of ethics, very popular during the Renaissance. The first line of Lorem Ipsum, "Lorem ipsum dolor sit amet..", comes from a line in section 1.10.32. The standard chunk of Lorem Ipsum used since the 1500s is reproduced below for those interested. Sections 1.10.32 and 1.10.33 from "de Finibus Bonorum et Malorum" by Cicero are also reproduced in their exact original form, accompanied by English versions from the 1914 translation by H. Rackham '),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(22,"div",11),f.TgZ(23,"p"),f._uU(24," \xa9 copyright 2022 designed by Bhuwan Paneru "),f.qZA(),f.qZA())},directives:[Ba,cd],styles:[""]}),n})();var o2=V(7014);let dp=(()=>{class n{constructor(t,r,o,u){this.afs=t,this.afAuth=r,this.router=o,this.ngZone=u,this.afAuth.authState.subscribe(d=>{d?(console.log(typeof d),this.userData=d,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(o=>{this.SetUserData(o.user),this.ngZone.run(()=>{this.router.navigate(["dashboard"])})}).catch(o=>{window.alert(o.message)})}SignUp(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r).then(o=>{this.SendVerificationMail(),this.SetUserData(o.user)}).catch(o=>{window.alert(o.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}GoogleAuth(){return this.AuthLogin(new o2.Q).then(t=>{t&&this.router.navigate(["dashboard"])})}AuthLogin(t){return this.afAuth.signInWithPopup(t).then(r=>{this.SetUserData(r.user),localStorage.getItem("user"),this.ngZone.run(()=>{this.router.navigate(["dashboard"])})}).catch(r=>{window.alert(r)})}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(GS),f.LFG(Uv),f.LFG(vr),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function a2(n,e){if(1&n&&(f.TgZ(0,"div",4),f.TgZ(1,"div",18),f.TgZ(2,"div",19),f._UZ(3,"img",20),f.TgZ(4,"div",21),f.TgZ(5,"h1"),f._uU(6,"Hello: "),f.TgZ(7,"strong"),f._uU(8),f.qZA(),f.qZA(),f.TgZ(9,"p"),f._uU(10,"User ID: "),f.TgZ(11,"strong"),f._uU(12),f.qZA(),f.qZA(),f.TgZ(13,"p"),f._uU(14,"Email: "),f.TgZ(15,"strong"),f._uU(16),f.qZA(),f.qZA(),f.TgZ(17,"p"),f._uU(18,"Email Verified: "),f.TgZ(19,"strong"),f._uU(20),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&n){const t=e.ngIf;f.xp6(3),f.s9C("src",t.photoURL?t.photoURL:"/assets/dummy-user.png",f.LSH),f.s9C("alt",t.displayName),f.xp6(5),f.Oqu(t.displayName?t.displayName:"User"),f.xp6(4),f.Oqu(t.uid),f.xp6(4),f.Oqu(t.email),f.xp6(4),f.Oqu(t.emailVerified)}}let u2=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(dp))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-dashboard"]],decls:22,vars:1,consts:[[1,"navbar","navbar-dark","fixed-top","bg-dark","flex-md-nowrap","p-0","shadow"],[1,"navbar-brand","col-sm-3","col-md-2","mr-0"],["src","assets/service-icon-01.png","alt","Logo",1,"brand-logo"],[1,"container-fluid"],[1,"row"],[1,"col-md-2","d-md-block","bg-light","sidebar"],[1,"sidebar-sticky"],[1,"nav","flex-column"],[1,"nav-item"],[1,"nav-link","active"],[1,"fas","fa-user"],[1,"nav-link",3,"click"],[1,"fas","fa-sign-out-alt"],["role","main",1,"col-md-9","ml-sm-auto","col-lg-10","px-4"],[1,"inner-adjust"],[1,"pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],["class","row",4,"ngIf"],[1,"col-md-12"],[1,"media"],[1,"align-self-start","mr-5","img-thumbnail","rounded-circle",3,"src","alt"],[1,"media-body"]],template:function(t,r){1&t&&(f.TgZ(0,"nav",0),f.TgZ(1,"a",1),f._UZ(2,"img",2),f.qZA(),f.qZA(),f.TgZ(3,"div",3),f.TgZ(4,"div",4),f.TgZ(5,"nav",5),f.TgZ(6,"div",6),f.TgZ(7,"ul",7),f.TgZ(8,"li",8),f.TgZ(9,"a",9),f._UZ(10,"i",10),f._uU(11,"User Profile "),f.qZA(),f.qZA(),f.TgZ(12,"li",8),f.TgZ(13,"a",11),f.NdJ("click",function(){return r.authService.SignOut()}),f._UZ(14,"i",12),f._uU(15,"Log out "),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(16,"main",13),f.TgZ(17,"div",14),f.TgZ(18,"div",15),f.TgZ(19,"h1",16),f._uU(20,"User Profile"),f.qZA(),f.qZA(),f.YNc(21,a2,21,6,"div",17),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&t&&(f.xp6(21),f.Q6J("ngIf",r.authService.userData))},directives:[Ys],styles:[""]}),n})(),l2=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(dp))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-forgot-password"]],decls:17,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"text-center"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["passwordResetEmail",""],["type","submit","value","Reset Password",1,"btn","btnPrimary",3,"click"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,r){if(1&t){const o=f.EpF();f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"div",2),f.TgZ(3,"h3"),f._uU(4,"Reset Password"),f.qZA(),f.TgZ(5,"p",3),f._uU(6,"Please enter your email address to request a password reset."),f.qZA(),f.TgZ(7,"div",4),f._UZ(8,"input",5,6),f.qZA(),f.TgZ(10,"div",4),f.TgZ(11,"input",7),f.NdJ("click",function(){f.CHM(o);const d=f.MAs(9);return r.authService.ForgotPassword(d.value)}),f.qZA(),f.qZA(),f.qZA(),f.TgZ(12,"div",8),f.TgZ(13,"span"),f._uU(14,"Go back to ? "),f.TgZ(15,"span",9),f._uU(16,"Log In"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()}},directives:[kl],styles:[""]}),n})(),c2=(()=>{class n{constructor(t,r,o,u,d){this.authService=t,this.afs=r,this.afAuth=o,this.router=u,this.ngZone=d}ngOnInit(){}SignIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(o=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(o.user)}).catch(o=>{window.alert(o.message)})}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(dp),f.Y36(GS),f.Y36(Uv),f.Y36(vr),f.Y36(f.R0b))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-sign-in"]],decls:43,vars:0,consts:[[1,"header"],["routerLink","",1,"logo"],[1,"header-right"],["routerLink","/home","routerLinkActive","active"],["routerLink","/contact","routerLinkActive","active"],["routerLink","/about","routerLinkActive","active"],["routerLink","/register-user","routerLinkActive","active"],["routerLink","/sign-in","routerLinkActive","active"],[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","text","placeholder","Username","required","",1,"formControl"],["userName",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPassword",""],["type","button","value","Log in",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],["type","button",1,"btn","googleBtn",3,"click"],[1,"fab","fa-google-plus-g"],[1,"forgotPassword"],["routerLink","/forgot-password"],[1,"redirectToLogin"],["routerLink","/register-user",1,"redirect"]],template:function(t,r){if(1&t){const o=f.EpF();f.TgZ(0,"div",0),f.TgZ(1,"a",1),f._uU(2,"Logo"),f.qZA(),f.TgZ(3,"div",2),f.TgZ(4,"a",3),f._uU(5,"Home"),f.qZA(),f.TgZ(6,"a",4),f._uU(7,"Contact"),f.qZA(),f.TgZ(8,"a",5),f._uU(9,"About"),f.qZA(),f.TgZ(10,"a",6),f._uU(11,"Sign Up"),f.qZA(),f.TgZ(12,"a",7),f._uU(13,"Sign In"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(14,"div",8),f.TgZ(15,"div",9),f.TgZ(16,"div",10),f.TgZ(17,"h3"),f._uU(18,"Sign In"),f.qZA(),f.TgZ(19,"div",11),f._UZ(20,"input",12,13),f.qZA(),f.TgZ(22,"div",11),f._UZ(23,"input",14,15),f.qZA(),f.TgZ(25,"div",11),f.TgZ(26,"input",16),f.NdJ("click",function(){f.CHM(o);const d=f.MAs(21),p=f.MAs(24);return r.SignIn(d.value,p.value)}),f.qZA(),f.qZA(),f.TgZ(27,"div",11),f.TgZ(28,"span",17),f.TgZ(29,"span",18),f._uU(30,"Or"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(31,"div",11),f.TgZ(32,"button",19),f.NdJ("click",function(){return r.authService.GoogleAuth()}),f._UZ(33,"i",20),f._uU(34," Log in with Google "),f.qZA(),f.qZA(),f.TgZ(35,"div",21),f.TgZ(36,"span",22),f._uU(37,"Forgot Password?"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(38,"div",23),f.TgZ(39,"span"),f._uU(40,"Don't have an account?"),f.TgZ(41,"span",24),f._uU(42," Sign Up"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()}},directives:[Ba,cd,kl],styles:[""]}),n})(),d2=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(dp))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-sign-up"]],decls:40,vars:0,consts:[[1,"header"],["routerLink","",1,"logo"],[1,"header-right"],["routerLink","/home","routerLinkActive","active"],["routerLink","/contact","routerLinkActive","active"],["routerLink","/about","routerLinkActive","active"],["routerLink","/register-user","routerLinkActive","active"],["routerLink","/sign-in","routerLinkActive","active"],[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["userEmail",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPwd",""],["type","button","value","Sign Up",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],["type","button",1,"btn","googleBtn",3,"click"],[1,"fab","fa-google-plus-g"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,r){if(1&t){const o=f.EpF();f.TgZ(0,"div",0),f.TgZ(1,"a",1),f._uU(2,"Logo"),f.qZA(),f.TgZ(3,"div",2),f.TgZ(4,"a",3),f._uU(5,"Home"),f.qZA(),f.TgZ(6,"a",4),f._uU(7,"Contact"),f.qZA(),f.TgZ(8,"a",5),f._uU(9,"About"),f.qZA(),f.TgZ(10,"a",6),f._uU(11,"Sign Up"),f.qZA(),f.TgZ(12,"a",7),f._uU(13,"Sign In"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(14,"div",8),f.TgZ(15,"div",9),f.TgZ(16,"div",10),f.TgZ(17,"h3"),f._uU(18,"Sign Up"),f.qZA(),f.TgZ(19,"div",11),f._UZ(20,"input",12,13),f.qZA(),f.TgZ(22,"div",11),f._UZ(23,"input",14,15),f.qZA(),f.TgZ(25,"div",11),f.TgZ(26,"input",16),f.NdJ("click",function(){f.CHM(o);const d=f.MAs(21),p=f.MAs(24);return r.authService.SignUp(d.value,p.value)}),f.qZA(),f.qZA(),f.TgZ(27,"div",11),f.TgZ(28,"span",17),f.TgZ(29,"span",18),f._uU(30,"Or"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(31,"div",11),f.TgZ(32,"button",19),f.NdJ("click",function(){return r.authService.GoogleAuth()}),f._UZ(33,"i",20),f._uU(34," Continue with Google "),f.qZA(),f.qZA(),f.qZA(),f.TgZ(35,"div",21),f.TgZ(36,"span"),f._uU(37,"Already have an account? "),f.TgZ(38,"span",22),f._uU(39,"Log In"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()}},directives:[Ba,cd,kl],styles:[""]}),n})();function h2(n,e){if(1&n&&(f.TgZ(0,"div",4),f.TgZ(1,"p",9),f._uU(2,"We have sent a confirmation email to "),f.TgZ(3,"strong"),f._uU(4),f.qZA(),f._uU(5,"."),f.qZA(),f.TgZ(6,"p",9),f._uU(7,"Please check your email and click on the link to verfiy your email address."),f.qZA(),f.qZA()),2&n){const t=e.ngIf;f.xp6(4),f.Oqu(t.email)}}let f2=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(dp))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-verify-email"]],decls:15,vars:1,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],["class","formGroup",4,"ngIf"],[1,"formGroup"],["type","button",1,"btn","btnPrimary",3,"click"],[1,"fas","fa-redo-alt"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"],[1,"text-center"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"div",2),f.TgZ(3,"h3"),f._uU(4,"Thank You for Registering"),f.qZA(),f.YNc(5,h2,8,1,"div",3),f.TgZ(6,"div",4),f.TgZ(7,"button",5),f.NdJ("click",function(){return r.authService.SendVerificationMail()}),f._UZ(8,"i",6),f._uU(9," Resend Verification Email "),f.qZA(),f.qZA(),f.qZA(),f.TgZ(10,"div",7),f.TgZ(11,"span"),f._uU(12,"Go back to?"),f.TgZ(13,"span",8),f._uU(14," Sign in"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&t&&(f.xp6(5),f.Q6J("ngIf",r.authService.userData))},directives:[Ys,kl],styles:[""]}),n})(),p2=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return!0===this.authService.isLoggedIn||(this.router.navigate(["home"]),!1)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(dp),f.LFG(vr))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Um=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return 1!=this.authService.isLoggedIn||(this.router.navigate(["dashboard"]),!1)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(dp),f.LFG(vr))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const g2=[{path:"",redirectTo:"/dashboard",pathMatch:"full"},{path:"home",component:s2,canActivate:[Um]},{path:"sign-in",component:c2,canActivate:[Um]},{path:"register-user",component:d2,canActivate:[Um]},{path:"dashboard",component:u2,canActivate:[p2]},{path:"forgot-password",component:l2,canActivate:[Um]},{path:"verify-email-address",component:f2,canActivate:[Um]},{path:"contact",component:r2,canActivate:[Um]},{path:"about",component:i2,canActivate:[Um]},{path:"**",component:fR}];let m2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[fI.forRoot(g2)],fI]}),n})(),_2=(()=>{class n{constructor(){this.title="portal"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},directives:[ef],styles:[""]}),n})();class v2{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new E2(e,this.dueTime,this.scheduler))}}class E2 extends Xr.L{constructor(e,t,r){super(e),this.dueTime=t,this.scheduler=r,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(w2,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function w2(n){n.debouncedNext()}const qO="firebasestorage.googleapis.com",WO="storageBucket";class Fr extends F.ZR{constructor(e,t){super($k(e),`Firebase Storage: ${t} (${$k(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Fr.prototype)}_codeEquals(e){return $k(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function $k(n){return"storage/"+n}function Hk(){return new Fr("unknown","An unknown error occurred, please check the error payload for server response.")}function ZO(){return new Fr("canceled","User canceled the upload/download.")}function zO(){return new Fr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Bv(n){return new Fr("invalid-argument",n)}function KO(){return new Fr("app-deleted","The Firebase app was deleted.")}function YO(n){return new Fr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function yC(n,e){return new Fr("invalid-format","String does not match format '"+n+"': "+e)}function vC(n){throw new Fr("internal-error","Internal error: "+n)}class Cs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Cs.makeFromUrl(e,t)}catch(o){return new Cs(e,"")}if(""===r.path)return r;throw function(n){return new Fr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const o="([A-Za-z0-9.\\-_]+)",p=new RegExp("^gs://"+o+"(/(.*))?$","i");function w(st){st.path_=decodeURIComponent(st.path)}const S=t.replace(/[.]/g,"\\."),nt=[{regex:p,indices:{bucket:1,path:3},postModify:function(st){"/"===st.path.charAt(st.path.length-1)&&(st.path_=st.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${o}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:w},{regex:new RegExp(`^https?://${t===qO?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${o}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:w}];for(let st=0;st<nt.length;st++){const jt=nt[st],an=jt.regex.exec(e);if(an){let rl=an[jt.indices.path];rl||(rl=""),r=new Cs(an[jt.indices.bucket],rl),jt.postModify(r);break}}if(null==r)throw function(n){return new Fr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class O2{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function qS(n){return"string"==typeof n||n instanceof String}function QO(n){return Gk()&&n instanceof Blob}function Gk(){return"undefined"!=typeof Blob}function qk(n,e,t,r){if(r<e)throw Bv(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Bv(`Invalid value for '${n}'. Expected ${t} or less.`)}function ah(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function JO(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var hp=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(hp||(hp={})),hp))();class j2{constructor(e,t,r,o,u,d,p,y,w,D,S){this.url_=e,this.method_=t,this.headers_=r,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=d,this.callback_=p,this.errorCallback_=y,this.timeout_=w,this.progressCallback_=D,this.connectionFactory_=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((P,j)=>{this.resolve_=P,this.reject_=j,this.start_()})}start_(){const t=(r,o)=>{const u=this.resolve_,d=this.reject_,p=o.connection;if(o.wasSuccessCode)try{const y=this.callback_(p,p.getResponse());!function(n){return void 0!==n}(y)?u():u(y)}catch(y){d(y)}else if(null!==p){const y=Hk();y.serverResponse=p.getErrorText(),d(this.errorCallback_?this.errorCallback_(p,y):y)}else d(o.canceled?this.appDelete_?KO():ZO():new Fr("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))};this.canceled_?t(0,new WS(!1,null,!0)):this.backoffId_=function(n,e,t){let r=1,o=null,u=null,d=!1,p=0;function y(){return 2===p}let w=!1;function D(...xe){w||(w=!0,e.apply(null,xe))}function S(xe){o=setTimeout(()=>{o=null,n(j,y())},xe)}function P(){u&&clearTimeout(u)}function j(xe,...ct){if(w)return void P();if(xe)return P(),void D.call(null,xe,...ct);if(y()||d)return P(),void D.call(null,xe,...ct);let nt;r<64&&(r*=2),1===p?(p=2,nt=0):nt=1e3*(r+Math.random()),S(nt)}let Y=!1;function ye(xe){Y||(Y=!0,P(),!w&&(null!==o?(xe||(p=2),clearTimeout(o),S(0)):xe||(p=1)))}return S(0),u=setTimeout(()=>{d=!0,ye(!0)},t),ye}((r,o)=>{if(o)return void r(!1,new WS(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const d=p=>{null!==this.progressCallback_&&this.progressCallback_(p.loaded,p.lengthComputable?p.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(d),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(d),this.pendingConnection_=null;const p=u.getErrorCode()===hp.NO_ERROR,y=u.getStatus();if(!p||this.isRetryStatusCode_(y)){const D=u.getErrorCode()===hp.ABORT;return void r(!1,new WS(!1,null,D))}const w=-1!==this.successCodes_.indexOf(y);r(!0,new WS(w,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,o=-1!==[408,429].indexOf(e),u=-1!==this.additionalRetryCodes_.indexOf(e);return t||o||u}}class WS{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function z2(...n){const e="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(Gk())return new Blob(n);throw new Fr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const ua={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Wk{constructor(e,t){this.data=e,this.contentType=t||null}}function Zk(n,e){switch(n){case ua.RAW:return new Wk(XO(e));case ua.BASE64:case ua.BASE64URL:return new Wk(eF(n,e));case ua.DATA_URL:return new Wk(function(n){const e=new tF(n);return e.base64?eF(ua.BASE64,e.rest):function(n){let e;try{e=decodeURIComponent(n)}catch(t){throw yC(ua.DATA_URL,"Malformed data URL.")}return XO(e)}(e.rest)}(e),function(n){return new tF(n).contentType}(e))}throw Hk()}function XO(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function eF(n,e){switch(n){case ua.BASE64:{const o=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(o||u)throw yC(n,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case ua.BASE64URL:{const o=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(o||u)throw yC(n,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function(n){return atob(n)}(e)}catch(o){throw yC(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}class tF{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw yC(ua.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=e.substring(e.indexOf(",")+1)}}class gc{constructor(e,t){let r=0,o="";QO(e)?(this.data_=e,r=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(QO(this.data_)){const o=function(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===o?null:new gc(o)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new gc(r,!0)}}static getBlob(...e){if(Gk()){const t=e.map(r=>r instanceof gc?r.data_:r);return new gc(z2.apply(null,t))}{const t=e.map(d=>qS(d)?Zk(ua.RAW,d).data:d.data_);let r=0;t.forEach(d=>{r+=d.byteLength});const o=new Uint8Array(r);let u=0;return t.forEach(d=>{for(let p=0;p<d.length;p++)o[u++]=d[p]}),new gc(o,!0)}}uploadData(){return this.data_}}function zk(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function nF(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function rB(n,e){return e}class qs{constructor(e,t,r,o){this.server=e,this.local=t||e,this.writable=!!r,this.xform=o||rB}}let ZS=null;function EC(){if(ZS)return ZS;const n=[];n.push(new qs("bucket")),n.push(new qs("generation")),n.push(new qs("metageneration")),n.push(new qs("name","fullPath",!0));const t=new qs("name");t.xform=function(u,d){return function(n){return!qS(n)||n.length<2?n:nF(n)}(d)},n.push(t);const o=new qs("size");return o.xform=function(u,d){return void 0!==d?Number(d):d},n.push(o),n.push(new qs("timeCreated")),n.push(new qs("updated")),n.push(new qs("md5Hash",null,!0)),n.push(new qs("cacheControl",null,!0)),n.push(new qs("contentDisposition",null,!0)),n.push(new qs("contentEncoding",null,!0)),n.push(new qs("contentLanguage",null,!0)),n.push(new qs("contentType",null,!0)),n.push(new qs("metadata","customMetadata",!0)),ZS=n,ZS}function rF(n,e,t){const r=zk(e);return null===r?null:function(n,e,t){const r={type:"file"},o=t.length;for(let u=0;u<o;u++){const d=t[u];r[d.local]=d.xform(r,e[d.server])}return function(n,e){Object.defineProperty(n,"ref",{get:function(){const u=new Cs(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function Kk(n,e){const t={},r=e.length;for(let o=0;o<r;o++){const u=e[o];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const iF="prefixes";class mc{constructor(e,t,r,o){this.url=e,this.method=t,this.handler=r,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function _c(n){if(!n)throw Hk()}function zS(n,e){return function(r,o){const u=rF(n,o,e);return _c(null!==u),u}}function jv(n){return function(t,r){let o;return o=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?new Fr("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Fr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?function(n){return new Fr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function(n){return new Fr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,o.serverResponse=r.serverResponse,o}}function wC(n){const e=jv(n);return function(r,o){let u=e(r,o);return 404===r.getStatus()&&(u=function(n){return new Fr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=o.serverResponse,u}}function oF(n,e,t){const o=ah(e.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,p=new mc(o,"GET",zS(n,t),d);return p.errorHandler=wC(e),p}function hB(n,e,t,r,o){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),o&&(u.maxResults=o);const p=ah(e.bucketOnlyServerUrl(),n.host,n._protocol),w=n.maxOperationRetryTime,D=new mc(p,"GET",function(n,e){return function(r,o){const u=function(n,e,t){const r=zk(t);return null===r?null:function(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[iF])for(const o of t[iF]){const u=o.replace(/\/$/,""),d=n._makeStorageReference(new Cs(e,u));r.prefixes.push(d)}if(t.items)for(const o of t.items){const u=n._makeStorageReference(new Cs(e,o.name));r.items.push(u)}return r}(n,e,r)}(n,e,o);return _c(null!==u),u}}(n,e.bucket),w);return D.urlParams=u,D.errorHandler=jv(e),D}function uF(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function(n,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}class KS{constructor(e,t,r,o){this.current=e,this.total=t,this.finalized=!!r,this.metadata=o||null}}function Yk(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(o){_c(!1)}return _c(!!t&&-1!==(e||["active"]).indexOf(t)),t}const EB={STATE_CHANGED:"state_changed"},Ws={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Qk(n){switch(n){case"running":case"pausing":case"canceling":return Ws.RUNNING;case"paused":return Ws.PAUSED;case"success":return Ws.SUCCESS;case"canceled":return Ws.CANCELED;case"error":default:return Ws.ERROR}}class wB{constructor(e,t,r){if(function(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function $v(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class CB extends class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=hp.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=hp.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=hp.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,o){if(this.sent_)throw vC("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==o)for(const u in o)o.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,o[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw vC("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw vC("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw vC("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw vC("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Ju(){return new CB}class hF{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=EC(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=o=>{this._request=void 0,this._chunkMultiplier=1,o._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=o,this._transition("error"))},this._metadataErrorHandler=o=>{this._request=void 0,o._codeEquals("canceled")?this.completeTransitions_():(this._error=o,this._transition("error"))},this._promise=new Promise((o,u)=>{this._resolve=o,this._reject=u,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function(n,e,t,r,o){const u=e.bucketOnlyServerUrl(),d=uF(e,r,o),p={name:d.fullPath},y=ah(u,n.host,n._protocol),D={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":d.contentType,"Content-Type":"application/json; charset=utf-8"},S=Kk(d,t),Y=new mc(y,"POST",function(ye){let xe;Yk(ye);try{xe=ye.getResponseHeader("X-Goog-Upload-URL")}catch(ct){_c(!1)}return _c(qS(xe)),xe},n.maxUploadRetryTime);return Y.urlParams=p,Y.headers=D,Y.body=S,Y.errorHandler=jv(e),Y}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,Ju,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const o=function(n,e,t,r){const y=new mc(t,"POST",function(w){const D=Yk(w,["active","final"]);let S=null;try{S=w.getResponseHeader("X-Goog-Upload-Size-Received")}catch(j){_c(!1)}S||_c(!1);const P=Number(S);return _c(!isNaN(P)),new KS(P,r.size(),"final"===D)},n.maxUploadRetryTime);return y.headers={"X-Goog-Upload-Command":"query"},y.errorHandler=jv(e),y}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(o,Ju,t,r);this._request=u,u.getPromise().then(d=>{d=d,this._request=void 0,this._updateProgress(d.current),this._needToFetchStatus=!1,d.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new KS(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((o,u)=>{let d;try{d=function(n,e,t,r,o,u,d,p){const y=new KS(0,0);if(d?(y.current=d.current,y.total=d.total):(y.current=0,y.total=r.size()),r.size()!==y.total)throw new Fr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");const w=y.total-y.current;let D=w;o>0&&(D=Math.min(D,o));const S=y.current,Y={"X-Goog-Upload-Command":D===w?"upload, finalize":"upload","X-Goog-Upload-Offset":`${y.current}`},ye=r.slice(S,S+D);if(null===ye)throw zO();const nt=new mc(t,"POST",function(st,jt){const an=Yk(st,["active","final"]),si=y.current+D,rl=r.size();let c1;return c1="final"===an?zS(e,u)(st,jt):null,new KS(si,rl,"final"===an,c1)},e.maxUploadRetryTime);return nt.headers=Y,nt.body=ye.uploadData(),nt.progressCallback=p||null,nt.errorHandler=jv(n),nt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(y){return this._error=y,void this._transition("error")}const p=this._ref.storage._makeRequest(d,Ju,o,u);this._request=p,p.getPromise().then(y=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(y.current),y.finalized?(this._metadata=y.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=oF(this._ref.storage,this._ref._location,this._mappings),o=this._ref.storage._makeRequest(r,Ju,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function(n,e,t,r,o){const u=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"},y=function(){let nt="";for(let st=0;st<2;st++)nt+=Math.random().toString().slice(2);return nt}();d["Content-Type"]="multipart/related; boundary="+y;const w=uF(e,r,o),D=Kk(w,t),j=gc.getBlob("--"+y+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+D+"\r\n--"+y+"\r\nContent-Type: "+w.contentType+"\r\n\r\n",r,"\r\n--"+y+"--");if(null===j)throw zO();const Y={name:w.fullPath},ye=ah(u,n.host,n._protocol),ct=n.maxUploadRetryTime,lt=new mc(ye,"POST",zS(n,t),ct);return lt.urlParams=Y,lt.headers=d,lt.body=j.uploadData(),lt.errorHandler=jv(e),lt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,Ju,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=ZO(),this._state=e,this._notifyObservers();break;case"error":case"success":this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Qk(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,o){const u=new wB(t||void 0,r||void 0,o||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Qk(this._state)){case Ws.SUCCESS:$v(this._resolve.bind(null,this.snapshot))();break;case Ws.CANCELED:case Ws.ERROR:$v(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Qk(this._state)){case Ws.RUNNING:case Ws.PAUSED:e.next&&$v(e.next.bind(e,this.snapshot))();break;case Ws.SUCCESS:e.complete&&$v(e.complete.bind(e))();break;case Ws.CANCELED:case Ws.ERROR:e.error&&$v(e.error.bind(e,this._error))();break;default:e.error&&$v(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Bm{constructor(e,t){this._service=e,this._location=t instanceof Cs?t:Cs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Bm(e,t)}get root(){const e=new Cs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return nF(this._location.path)}get storage(){return this._service}get parent(){const e=function(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Cs(this._location.bucket,e);return new Bm(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw YO(e)}}function pF(n,e,t){return Jk.apply(this,arguments)}function Jk(){return(Jk=(0,Ce.Z)(function*(n,e,t){const o=yield gF(n,{pageToken:t});e.prefixes.push(...o.prefixes),e.items.push(...o.items),null!=o.nextPageToken&&(yield pF(n,e,o.nextPageToken))})).apply(this,arguments)}function gF(n,e){null!=e&&"number"==typeof e.maxResults&&qk("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=hB(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Ju)}function OB(n){n._throwIfRoot("getDownloadURL");const e=function(n,e,t){const o=ah(e.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,p=new mc(o,"GET",function(n,e){return function(r,o){const u=rF(n,o,e);return _c(null!==u),function(n,e,t,r){const o=zk(e);if(null===o||!qS(o.downloadTokens))return null;const u=o.downloadTokens;if(0===u.length)return null;const d=encodeURIComponent;return u.split(",").map(w=>{const S=n.fullPath;return ah("/b/"+d(n.bucket)+"/o/"+d(S),t,r)+JO({alt:"media",token:w})})[0]}(u,o,n.host,n._protocol)}}(n,t),d);return p.errorHandler=wC(e),p}(n.storage,n._location,EC());return n.storage.makeRequestWithTokens(e,Ju).then(t=>{if(null===t)throw new Fr("no-download-url","The given file does not have any download URLs.");return t})}function mF(n,e){const t=function(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Cs(n._location.bucket,t);return new Bm(n.storage,r)}function _F(n,e){if(n instanceof Xk){const t=n;if(null==t._bucket)throw new Fr("no-default-bucket","No default bucket found. Did you set the '"+WO+"' property when initializing the app?");const r=new Bm(t,t._bucket);return null!=e?_F(r,e):r}return void 0!==e?mF(n,e):n}function UB(n,e){if(e&&function(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof Xk)return function(n,e){return new Bm(n,e)}(n,e);throw Bv("To use ref(service, url), the first argument must be a Storage instance.")}return _F(n,e)}function yF(n,e){const t=null==e?void 0:e[WO];return null==t?null:Cs.makeFromBucketSpec(t,n)}class Xk{constructor(e,t,r,o,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=o,this._firebaseVersion=u,this._bucket=null,this._host=qO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=o?Cs.makeFromBucketSpec(o,this._host):yF(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Cs.makeFromBucketSpec(this._url,e):yF(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){qk("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){qk("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Ce.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Ce.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Bm(this,e)}_makeRequest(e,t,r,o){if(this._deleted)return new O2(KO());{const u=function(n,e,t,r,o,u){const d=JO(n.urlParams),p=n.url+d,y=Object.assign({},n.headers);return function(n,e){e&&(n["X-Firebase-GMPID"]=e)}(y,e),function(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(y,t),function(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(y,u),function(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(y,r),new j2(p,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o)}(e,this._appId,r,o,t,this._firebaseVersion);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e,t){var r=this;return(0,Ce.Z)(function*(){const[o,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,o,u).getPromise()})()}}const vF="@firebase/storage";function bF(n,e){return UB(n=(0,F.m9)(n),e)}(0,Pi._registerComponent)(new Ha.wA("storage",function(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new Xk(t,r,o,e,Pi.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,Pi.registerVersion)(vF,"0.9.6",""),(0,Pi.registerVersion)(vF,"0.9.6","esm2017");class YS{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class CF{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new YS(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new YS(r,this,this._ref))},t)}on(e,t,r,o){let u;return t&&(u="function"==typeof t?d=>t(new YS(d,this,this._ref)):{next:t.next?d=>t.next(new YS(d,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,o||void 0)}}class IF{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new uh(e,this._service))}get items(){return this._delegate.items.map(e=>new uh(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class uh{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function(n,e){return mF(n,e)}(this._delegate,e);return new uh(t,this.storage)}get root(){return new uh(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new uh(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new CF(function(n,e,t){return function(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new hF(n,new gc(e),t)}(n=(0,F.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=ua.RAW,r){this._throwIfRoot("putString");const o=Zk(t,e),u=Object.assign({},r);return null==u.contentType&&null!=o.contentType&&(u.contentType=o.contentType),new CF(new hF(this._delegate,new gc(o.data,!0),u),this)}listAll(){return function(n){return function(n){const e={prefixes:[],items:[]};return pF(n,e).then(()=>e)}(n=(0,F.m9)(n))}(this._delegate).then(e=>new IF(e,this.storage))}list(e){return function(n,e){return gF(n=(0,F.m9)(n),e)}(this._delegate,e||void 0).then(t=>new IF(t,this.storage))}getMetadata(){return function(n){return function(n){n._throwIfRoot("getMetadata");const e=oF(n.storage,n._location,EC());return n.storage.makeRequestWithTokens(e,Ju)}(n=(0,F.m9)(n))}(this._delegate)}updateMetadata(e){return function(n,e){return function(n,e){n._throwIfRoot("updateMetadata");const t=function(n,e,t,r){const u=ah(e.fullServerUrl(),n.host,n._protocol),p=Kk(t,r),w=n.maxOperationRetryTime,D=new mc(u,"PATCH",zS(n,r),w);return D.headers={"Content-Type":"application/json; charset=utf-8"},D.body=p,D.errorHandler=wC(e),D}(n.storage,n._location,e,EC());return n.storage.makeRequestWithTokens(t,Ju)}(n=(0,F.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function(n){return OB(n=(0,F.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(n){return function(n){n._throwIfRoot("deleteObject");const e=function(n,e){const r=ah(e.fullServerUrl(),n.host,n._protocol),p=new mc(r,"DELETE",function(y,w){},n.maxOperationRetryTime);return p.successCodes=[200,204],p.errorHandler=wC(e),p}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Ju)}(n=(0,F.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw YO(e)}}class TF{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(DF(e))throw Bv("ref() expected a child path but got a URL, use refFromURL instead.");return new uh(bF(this._delegate,e),this)}refFromURL(e){if(!DF(e))throw Bv("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Cs.makeFromUrl(e,this._delegate.host)}catch(t){throw Bv("refFromUrl() expected a valid full URL but got an invalid one.")}return new uh(bF(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function(n,e,t,r={}){!function(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:o}=r;o&&(n._overrideAuthToken="string"==typeof o?o:(0,F.Sg)(o,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function DF(n){return/^[A-Za-z]+:\/\//.test(n)}function tj(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new TF(t,r)}function AF(n){const e=function(n){return new yr.y(e=>{const t=d=>e.next(d);t(n.snapshot);const u=n.on("state_changed",t);return n.then(d=>{t(d),e.complete()},d=>{t(n.snapshot),(d=>{e.error(d)})(d)}),function(){u()}}).pipe(function(n,e=pw.P){return t=>t.lift(new v2(n,e))}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,St.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function QS(n){return{getDownloadURL:()=>(0,at.of)(void 0).pipe(bn.fc,lr(()=>n.getDownloadURL()),bn.iC),getMetadata:()=>(0,at.of)(void 0).pipe(bn.fc,lr(()=>n.getMetadata()),bn.iC),delete:()=>(0,Bt.D)(n.delete()),child:e=>QS(n.child(e)),updateMetadata:e=>(0,Bt.D)(n.updateMetadata(e)),put:(e,t)=>AF(n.put(e,t)),putString:(e,t,r)=>AF(n.putString(e,t,r)),list:e=>(0,Bt.D)(n.list(e)),listAll:()=>(0,Bt.D)(n.listAll())}}!function(n){const e={TaskState:Ws,TaskEvent:EB,StringFormat:ua,Storage:TF,Reference:uh};n.INTERNAL.registerComponent(new Ha.wA("storage-compat",tj,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.14")}(_w.Z);const ij=new f.OlP("angularfire2.storageBucket"),sj=new f.OlP("angularfire2.storage.maxUploadRetryTime"),oj=new f.OlP("angularfire2.storage.maxOperationRetryTime"),aj=new f.OlP("angularfire2.storage.use-emulator");let uj=(()=>{class n{constructor(t,r,o,u,d,p,y,w,D,S){const P=(0,Br.on)(t,d,r);this.storage=(0,Br.cc)(`${P.name}.storage.${o}`,"AngularFireStorage",P.name,()=>{const j=d.runOutsideAngular(()=>P.storage(o||void 0)),Y=D;return Y&&j.useEmulator(...Y),y&&j.setMaxUploadRetryTime(y),w&&j.setMaxOperationRetryTime(w),j},[y,w])}ref(t){return QS(this.storage.ref(t))}refFromURL(t){return QS(this.storage.refFromURL(t))}upload(t,r,o){return QS(this.storage.ref(t)).put(r,o)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Br.Dh),f.LFG(Br.xv,8),f.LFG(ij,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(bn.HU),f.LFG(sj,8),f.LFG(oj,8),f.LFG(aj,8),f.LFG(_C,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),lj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})(),cj=(()=>{class n{constructor(){$S.Z.registerVersion("angularfire",bn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[uj],imports:[lj]}),n})();var dj=V(8819);class fj{constructor(e,t){this.observables=e,this.project=t}call(e,t){return t.subscribe(new pj(e,this.observables,this.project))}}class pj extends Zc{constructor(e,t,r){super(e),this.observables=t,this.project=r,this.toRespond=[];const o=t.length;this.values=new Array(o);for(let u=0;u<o;u++)this.toRespond.push(u);for(let u=0;u<o;u++)this.add(Eu(this,t[u],void 0,u))}notifyNext(e,t,r){this.values[r]=t;const o=this.toRespond;if(o.length>0){const u=o.indexOf(r);-1!==u&&o.splice(u,1)}}notifyComplete(){}_next(e){if(0===this.toRespond.length){const t=[e,...this.values];this.project?this._tryProject(t):this.destination.next(t)}}_tryProject(e){let t;try{t=this.project.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}class mj{constructor(e){this.predicate=e}call(e,t){return t.subscribe(new _j(e,this.predicate))}}class _j extends Xr.L{constructor(e,t){super(e),this.predicate=t,this.skipping=!0,this.index=0}_next(e){const t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)}tryCallPredicate(e){try{const t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(t){this.destination.error(t)}}}const SF="@firebase/database";let eP="";function RF(n){eP=n}class yj{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,F.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,F.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class vj{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,F.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const NF=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new yj(e)}}catch(e){}return new vj},jm=NF("localStorage"),tP=NF("sessionStorage"),Hv=new fo.Yd("@firebase/database"),MF=function(){let n=1;return function(){return n++}}(),kF=function(n){const e=(0,F.dS)(n),t=new F.gQ;t.update(e);const r=t.digest();return F.US.encodeByteArray(r)},bC=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=bC.apply(null,r):e+="object"==typeof r?(0,F.Pz)(r):r,e+=" "}return e};let $m=null,PF=!0;const OF=function(n,e){(0,F.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Hv.logLevel=fo.in.VERBOSE,$m=Hv.log.bind(Hv),e&&tP.set("logging_enabled",!0)):"function"==typeof n?$m=n:($m=null,tP.remove("logging_enabled"))},Hi=function(...n){if(!0===PF&&(PF=!1,null===$m&&!0===tP.get("logging_enabled")&&OF(!0)),$m){const e=bC.apply(null,n);$m(e)}},CC=function(n){return function(...e){Hi(n,...e)}},nP=function(...n){const e="FIREBASE INTERNAL ERROR: "+bC(...n);Hv.error(e)},yc=function(...n){const e=`FIREBASE FATAL ERROR: ${bC(...n)}`;throw Hv.error(e),new Error(e)},Is=function(...n){const e="FIREBASE WARNING: "+bC(...n);Hv.warn(e)},JS=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},lh="[MIN_NAME]",vc="[MAX_NAME]",Hm=function(n,e){if(n===e)return 0;if(n===lh||e===vc)return-1;if(e===lh||n===vc)return 1;{const t=XS(n),r=XS(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},bj=function(n,e){return n===e?0:n<e?-1:1},IC=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,F.Pz)(e))},rP=function(n){if("object"!=typeof n||null===n)return(0,F.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,F.Pz)(e[r]),t+=":",t+=rP(n[e[r]]);return t+="}",t},FF=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let o=0;o<t;o+=e)r.push(n.substring(o,o+e>t?t:o+e));return r};function Gi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const LF=function(n){(0,F.hu)(!JS(n),"Invalid JSON number");const r=1023;let o,u,d,p,y;0===n?(u=0,d=0,o=1/n==-1/0?1:0):(o=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(p=Math.min(Math.floor(Math.log(n)/Math.LN2),r),u=p+r,d=Math.round(n*Math.pow(2,52-p)-Math.pow(2,52))):(u=0,d=Math.round(n/Math.pow(2,-1074))));const w=[];for(y=52;y;y-=1)w.push(d%2?1:0),d=Math.floor(d/2);for(y=11;y;y-=1)w.push(u%2?1:0),u=Math.floor(u/2);w.push(o?1:0),w.reverse();const D=w.join("");let S="";for(y=0;y<64;y+=8){let P=parseInt(D.substr(y,8),2).toString(16);1===P.length&&(P="0"+P),S+=P}return S.toLowerCase()},Dj=new RegExp("^-?(0*)\\d{1,10}$"),VF=-2147483648,iP=2147483647,XS=function(n){if(Dj.test(n)){const e=Number(n);if(e>=VF&&e<=iP)return e}return null},Gv=function(n){try{n()}catch(e){setTimeout(()=>{throw Is("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},TC=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class Sj{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Is(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class xj{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(o=>this.auth_=o)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Hi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Is(e)}}let DC=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const HF=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,WF="websocket",ZF="long_polling";class oP{constructor(e,t,r,o,u=!1,d="",p=!1){this.secure=t,this.namespace=r,this.webSocketOnly=o,this.nodeAdmin=u,this.persistenceKey=d,this.includeNamespaceInQueryParams=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=jm.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&jm.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function zF(n,e,t){let r;if((0,F.hu)("string"==typeof e,"typeof type must == string"),(0,F.hu)("object"==typeof t,"typeof params must == object"),e===WF)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==ZF)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const o=[];return Gi(t,(u,d)=>{o.push(u+"="+d)}),r+o.join("&")}class Nj{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,F.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,F.p$)(this.counters_)}}const aP={},uP={};function lP(n){const e=n.toString();return aP[e]||(aP[e]=new Nj),aP[e]}class kj{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<r.length;++o)r[o]&&Gv(()=>{this.onMessage_(r[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class fp{constructor(e,t,r,o,u,d,p){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=o,this.authToken=u,this.transportSessionId=d,this.lastSessionId=p,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=CC(e),this.stats_=lP(t),this.urlFn=y=>(this.appCheckToken&&(y.ac=this.appCheckToken),zF(t,ZF,y))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new kj(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,F.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new cP((...u)=>{const[d,p,y,w,D]=u;if(this.incrementIncomingBytes_(u),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===d)this.id=p,this.password=y;else{if("close"!==d)throw new Error("Unrecognized command received: "+d);p?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(p,()=>{this.onClosed_()})):this.onClosed_()}},(...u)=>{const[d,p]=u;this.incrementIncomingBytes_(u),this.myPacketOrderer.handleResponse(d,p)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&HF.test(location.hostname)&&(r.r="f");const o=this.urlFn(r);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){fp.forceAllow_=!0}static forceDisallow(){fp.forceDisallow_=!0}static isAvailable(){return!((0,F.Yr)()||!fp.forceAllow_&&(fp.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,F.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,F.h$)(t),o=FF(r,1840);for(let u=0;u<o.length;u++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[u]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,F.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,F.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class cP{constructor(e,t,r,o){if(this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,F.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=MF(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=cP.createIFrame_();let u="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(u='<script>document.domain="'+document.domain+'";<\/script>');const d="<html><body>"+u+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(d),this.myIFrame.doc.close()}catch(p){Hi("frame writing exception"),p.stack&&Hi(p.stack),Hi(p)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Hi("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const d=this.pendingSegs.shift();r=r+"&seg"+o+"="+d.seg+"&ts"+o+"="+d.ts+"&d"+o+"="+d.d,o++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},o=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(o),r()})}addTag(e,t){(0,F.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const o=r.readyState;(!o||"loaded"===o||"complete"===o)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Hi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let tx=null;"undefined"!=typeof MozWebSocket?tx=MozWebSocket:"undefined"!=typeof WebSocket&&(tx=WebSocket);let qv=(()=>{class n{constructor(t,r,o,u,d,p,y){this.connId=t,this.applicationId=o,this.appCheckToken=u,this.authToken=d,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=CC(this.connId),this.stats_=lP(r),this.connURL=n.connectionURL_(r,p,y,u,o),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,o,u,d){const p={v:"5"};return!(0,F.Yr)()&&"undefined"!=typeof location&&location.hostname&&HF.test(location.hostname)&&(p.r="f"),r&&(p.s=r),o&&(p.ls=o),u&&(p.ac=u),d&&(p.p=d),zF(t,WF,p)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,jm.set("previous_websocket_failure",!0);try{let o;if((0,F.Yr)()){const d={headers:{"User-Agent":`Firebase/5/${eP}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(d.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(d.headers["X-Firebase-AppCheck"]=this.appCheckToken);const p=process.env,y=0===this.connURL.indexOf("wss://")?p.HTTPS_PROXY||p.https_proxy:p.HTTP_PROXY||p.http_proxy;y&&(d.proxy={origin:y})}this.mySock=new tx(this.connURL,[],o)}catch(o){this.log_("Error instantiating WebSocket.");const u=o.message||o.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=o=>{this.handleIncomingFrame(o)},this.mySock.onerror=o=>{this.log_("WebSocket error.  Closing connection.");const u=o.message||o.data;u&&this.log_(u),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const o=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);o&&o.length>1&&parseFloat(o[1])<4.4&&(t=!0)}return!t&&null!==tx&&!n.forceDisallow_}static previouslyFailed(){return jm.isInMemoryStorage||!0===jm.get("previous_websocket_failure")}markConnectionHealthy(){jm.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const o=(0,F.cI)(r);this.onMessage(o)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,F.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const o=this.extractFrameCount_(r);null!==o&&this.appendFrame_(o)}}send(t){this.resetKeepAlive();const r=(0,F.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const o=FF(r,16384);o.length>1&&this.sendString_(String(o.length));for(let u=0;u<o.length;u++)this.sendString_(o[u])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),tL=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[fp,qv]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=qv&&qv.isAvailable();let o=r&&!qv.previouslyFailed();if(t.webSocketOnly&&(r||Is("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[qv];else{const u=this.transports_=[];for(const d of n.ALL_TRANSPORTS)d&&d.isAvailable()&&u.push(d);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class uL{constructor(e,t,r,o,u,d,p,y,w,D){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=o,this.authToken_=u,this.onMessage_=d,this.onReady_=p,this.onDisconnect_=y,this.onKill_=w,this.lastSessionId=D,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=CC("c:"+this.id+":"),this.transportManager_=new tL(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=TC(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=IC("t",e),r=IC("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=IC("t",e),r=IC("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=IC("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?nP("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):nP("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,o=e.h;this.sessionId=e.s,this.repoInfo_.host=o,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Is("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),TC(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):TC(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(jm.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class lL{put(e,t,r,o){}merge(e,t,r,o){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class cL{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,F.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let o=0;o<r.length;o++)r[o].callback.apply(r[o].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const o=this.getInitialEvent(e);o&&t.apply(r,o)}off(e,t,r){this.validateEventType_(e);const o=this.listeners_[e]||[];for(let u=0;u<o.length;u++)if(o[u].callback===t&&(!r||r===o[u].context))return void o.splice(u,1)}validateEventType_(e){(0,F.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class nx extends cL{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,F.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new nx}getInitialEvent(e){return(0,F.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Fn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[r]=this.pieces_[o],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function xn(){return new Fn("")}function rn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function pp(n){return n.pieces_.length-n.pieceNum_}function qn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Fn(n.pieces_,e)}function hP(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function AC(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function fL(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Fn(e,0)}function mr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Fn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let o=0;o<r.length;o++)r[o].length>0&&t.push(r[o])}return new Fn(t,0)}function sn(n){return n.pieceNum_>=n.pieces_.length}function Zs(n,e){const t=rn(n),r=rn(e);if(null===t)return e;if(t===r)return Zs(qn(n),qn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function t$(n,e){const t=AC(n,0),r=AC(e,0);for(let o=0;o<t.length&&o<r.length;o++){const u=Hm(t[o],r[o]);if(0!==u)return u}return t.length===r.length?0:t.length<r.length?-1:1}function fP(n,e){if(pp(n)!==pp(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function tu(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(pp(n)>pp(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class n${constructor(e,t){this.errorPrefix_=t,this.parts_=AC(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,F.ug)(this.parts_[r]);pL(this)}}function pL(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Gm(n))}function Gm(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class pP extends cL{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new pP}getInitialEvent(e){return(0,F.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const SC=1e3;let ix,qm=(()=>{class n extends lL{constructor(t,r,o,u,d,p,y,w){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=o,this.onConnectStatus_=u,this.onServerInfoUpdate_=d,this.authTokenProvider_=p,this.appCheckTokenProvider_=y,this.authOverride_=w,this.id=n.nextPersistentConnectionId_++,this.log_=CC("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=SC,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,w&&!(0,F.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");pP.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&nx.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,o){const u=++this.requestNumber_,d={r:u,a:t,b:r};this.log_((0,F.Pz)(d)),(0,F.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(d),o&&(this.requestCBHash_[u]=o)}get(t){this.initConnection_();const r=new F.BH,o={p:t._path.toString(),q:t._queryObject},u={action:"g",request:o,onComplete:p=>{const y=p.d;"ok"===p.s?(this.onDataUpdate_(o.p,y,!1,null),r.resolve(y)):r.reject(y)}};this.outstandingGets_.push(u),this.outstandingGetCount_++;const d=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const p=this.outstandingGets_[d];void 0===p||u!==p||(delete this.outstandingGets_[d],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+d+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(d),r.promise}listen(t,r,o,u){this.initConnection_();const d=t._queryIdentifier,p=t._path.toString();this.log_("Listen called for "+p+" "+d),this.listens.has(p)||this.listens.set(p,new Map),(0,F.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,F.hu)(!this.listens.get(p).has(d),"listen() called twice for same path/queryId.");const y={onComplete:u,hashFn:r,query:t,tag:o};this.listens.get(p).set(d,y),this.connected_&&this.sendListen_(y)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,o=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(o)})}sendListen_(t){const r=t.query,o=r._path.toString(),u=r._queryIdentifier;this.log_("Listen on "+o+" for "+u);const d={p:o};t.tag&&(d.q=r._queryObject,d.t=t.tag),d.h=t.hashFn(),this.sendRequest("q",d,y=>{const w=y.d,D=y.s;n.warnOnListenWarnings_(w,r),(this.listens.get(o)&&this.listens.get(o).get(u))===t&&(this.log_("listen response",y),"ok"!==D&&this.removeListen_(o,u),t.onComplete&&t.onComplete(D,w))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,F.r3)(t,"w")){const o=(0,F.DV)(t,"w");if(Array.isArray(o)&&~o.indexOf("no_index")){const u='".indexOn": "'+r._queryParams.getIndex().toString()+'"',d=r._path.toString();Is(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${u} at ${d} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,F.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,F.w9)(t)?"auth":"gauth",o={cred:t};null===this.authOverride_?o.noauth=!0:"object"==typeof this.authOverride_&&(o.authvar=this.authOverride_),this.sendRequest(r,o,u=>{const d=u.s,p=u.d||"error";this.authToken_===t&&("ok"===d?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(d,p))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,o=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,o)})}unlisten(t,r){const o=t._path.toString(),u=t._queryIdentifier;this.log_("Unlisten called for "+o+" "+u),(0,F.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(o,u)&&this.connected_&&this.sendUnlisten_(o,u,t._queryObject,r)}sendUnlisten_(t,r,o,u){this.log_("Unlisten on "+t+" for "+r);const d={p:t};u&&(d.q=o,d.t=u),this.sendRequest("n",d)}onDisconnectPut(t,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:o})}onDisconnectMerge(t,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:o})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,o,u){const d={p:r,d:o};this.log_("onDisconnect "+t,d),this.sendRequest(t,d,p=>{u&&setTimeout(()=>{u(p.s,p.d)},Math.floor(0))})}put(t,r,o,u){this.putInternal("p",t,r,o,u)}merge(t,r,o,u){this.putInternal("m",t,r,o,u)}putInternal(t,r,o,u,d){this.initConnection_();const p={p:r,d:o};void 0!==d&&(p.h=d),this.outstandingPuts_.push({action:t,request:p,onComplete:u}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,o=this.outstandingPuts_[t].request,u=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,o,d=>{this.log_(r+" response",d),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),u&&u(d.s,d.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,o=>{"ok"!==o.s&&this.log_("reportStats","Error sending stats: "+o.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,F.Pz)(t));const r=t.r,o=this.requestCBHash_[r];o&&(delete this.requestCBHash_[r],o(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):nP("Unrecognized action received from server: "+(0,F.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,F.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=SC,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=SC,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=SC),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Ce.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),o=t.onReady_.bind(t),u=t.onRealtimeDisconnect_.bind(t),d=t.id+":"+n.nextConnectionId_++,p=t.lastSessionId;let y=!1,w=null;const D=function(){w?w.close():(y=!0,u())};t.realtime_={close:D,sendRequest:function(j){(0,F.hu)(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(j)}};const P=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[j,Y]=yield Promise.all([t.authTokenProvider_.getToken(P),t.appCheckTokenProvider_.getToken(P)]);y?Hi("getToken() completed but was canceled"):(Hi("getToken() completed. Creating connection."),t.authToken_=j&&j.accessToken,t.appCheckToken_=Y&&Y.token,w=new uL(d,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,o,u,ye=>{Is(ye+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},p))}catch(j){t.log_("Failed to get token: "+j),y||(t.repoInfo_.nodeAdmin&&Is(j),D())}}})()}interrupt(t){Hi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Hi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,F.xb)(this.interruptReasons_)&&(this.reconnectDelay_=SC,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let o;o=r?r.map(d=>rP(d)).join("$"):"default";const u=this.removeListen_(t,o);u&&u.onComplete&&u.onComplete("permission_denied")}removeListen_(t,r){const o=new Fn(t).toString();let u;if(this.listens.has(o)){const d=this.listens.get(o);u=d.get(r),d.delete(r),0===d.size&&this.listens.delete(o)}else u=void 0;return u}onAuthRevoked_(t,r){Hi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Hi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,F.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+eP.replace(/\./g,"-")]=1,(0,F.uI)()?t["framework.cordova"]=1:(0,F.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=nx.getInstance().currentlyOnline();return(0,F.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class on{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new on(e,t)}}class rx{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new on(lh,e),o=new on(lh,t);return 0!==this.compare(r,o)}minPost(){return on.MIN}}class _L extends rx{static get __EMPTY_NODE(){return ix}static set __EMPTY_NODE(e){ix=e}compare(e,t){return Hm(e.name,t.name)}isDefinedOn(e){throw(0,F.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return on.MIN}maxPost(){return new on(vc,ix)}makePost(e,t){return(0,F.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new on(e,ix)}toString(){return".key"}}const Ec=new _L;class sx{constructor(e,t,r,o,u=null){this.isReverse_=o,this.resultGenerator_=u,this.nodeStack_=[];let d=1;for(;!e.isEmpty();)if(e=e,d=t?r(e.key,t):1,o&&(d*=-1),d<0)e=this.isReverse_?e.left:e.right;else{if(0===d){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let mP,Xu=(()=>{class n{constructor(t,r,o,u,d){this.key=t,this.value=r,this.color=null!=o?o:n.RED,this.left=null!=u?u:wo.EMPTY_NODE,this.right=null!=d?d:wo.EMPTY_NODE}copy(t,r,o,u,d){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=o?o:this.color,null!=u?u:this.left,null!=d?d:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,o){let u=this;const d=o(t,u.key);return u=d<0?u.copy(null,null,null,u.left.insert(t,r,o),null):0===d?u.copy(null,r,null,null,null):u.copy(null,null,null,null,u.right.insert(t,r,o)),u.fixUp_()}removeMin_(){if(this.left.isEmpty())return wo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let o,u;if(o=this,r(t,o.key)<0)!o.left.isEmpty()&&!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.remove(t,r),null);else{if(o.left.isRed_()&&(o=o.rotateRight_()),!o.right.isEmpty()&&!o.right.isRed_()&&!o.right.left.isRed_()&&(o=o.moveRedRight_()),0===r(t,o.key)){if(o.right.isEmpty())return wo.EMPTY_NODE;u=o.right.min_(),o=o.copy(u.key,u.value,null,null,o.right.removeMin_())}o=o.copy(null,null,null,null,o.right.remove(t,r))}return o.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class wo{constructor(e,t=wo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new wo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Xu.BLACK,null,null))}remove(e){return new wo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Xu.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,o=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return o?o.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(o=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new sx(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new sx(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new sx(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new sx(this.root_,null,this.comparator_,!0,e)}}function d$(n,e){return Hm(n.name,e.name)}function gP(n,e){return Hm(n,e)}wo.EMPTY_NODE=new class{copy(e,t,r,o,u){return this}insert(e,t,r){return new Xu(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const yL=function(n){return"number"==typeof n?"number:"+LF(n):"string:"+n},vL=function(n){if(n.isLeafNode()){const e=n.val();(0,F.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,F.r3)(e,".sv"),"Priority must be a string or number.")}else(0,F.hu)(n===mP||n.isEmpty(),"priority of unexpected type.");(0,F.hu)(n===mP||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let EL,wL,bL,Wv=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,F.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),vL(this.priorityNode_)}static set __childrenNodeConstructor(t){EL=t}static get __childrenNodeConstructor(){return EL}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return sn(t)?this:".priority"===rn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const o=rn(t);return null===o?r:r.isEmpty()&&".priority"!==o?this:((0,F.hu)(".priority"!==o||1===pp(t),".priority must be the last token in a path"),this.updateImmediateChild(o,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(qn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+yL(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?LF(this.value_):this.value_,this.lazyHash_=kF(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,F.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,o=typeof this.value_,u=n.VALUE_TYPE_ORDER.indexOf(r),d=n.VALUE_TYPE_ORDER.indexOf(o);return(0,F.hu)(u>=0,"Unknown leaf type: "+r),(0,F.hu)(d>=0,"Unknown leaf type: "+o),u===d?"object"===o?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:d-u}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const rr=new class extends rx{compare(e,t){const r=e.node.getPriority(),o=t.node.getPriority(),u=r.compareTo(o);return 0===u?Hm(e.name,t.name):u}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return on.MIN}maxPost(){return new on(vc,new Wv("[PRIORITY-POST]",bL))}makePost(e,t){const r=wL(e);return new on(t,new Wv("[PRIORITY-POST]",r))}toString(){return".priority"}},m$=Math.log(2);class _${constructor(e){this.count=parseInt(Math.log(e+1)/m$,10),this.current_=this.count-1;const o=(u=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&o}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const ox=function(n,e,t,r){n.sort(e);const o=function(y,w){const D=w-y;let S,P;if(0===D)return null;if(1===D)return S=n[y],P=t?t(S):S,new Xu(P,S.node,Xu.BLACK,null,null);{const j=parseInt(D/2,10)+y,Y=o(y,j),ye=o(j+1,w);return S=n[j],P=t?t(S):S,new Xu(P,S.node,Xu.BLACK,Y,ye)}},p=function(y){let w=null,D=null,S=n.length;const P=function(Y,ye){const xe=S-Y,ct=S;S-=Y;const lt=o(xe+1,ct),nt=n[xe],st=t?t(nt):nt;j(new Xu(st,nt.node,ye,null,lt))},j=function(Y){w?(w.left=Y,w=Y):(D=Y,w=Y)};for(let Y=0;Y<y.count;++Y){const ye=y.nextBitIsOne(),xe=Math.pow(2,y.count-(Y+1));ye?P(xe,Xu.BLACK):(P(xe,Xu.BLACK),P(xe,Xu.RED))}return D}(new _$(n.length));return new wo(r||e,p)};let _P;const Zv={};class ch{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,F.hu)(Zv&&rr,"ChildrenNode.ts has not been loaded"),_P=_P||new ch({".priority":Zv},{".priority":rr}),_P}get(e){const t=(0,F.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof wo?t:null}hasIndex(e){return(0,F.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,F.hu)(e!==Ec,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let o=!1;const u=t.getIterator(on.Wrap);let p,d=u.getNext();for(;d;)o=o||e.isDefinedOn(d.node),r.push(d),d=u.getNext();p=o?ox(r,e.getCompare()):Zv;const y=e.toString(),w=Object.assign({},this.indexSet_);w[y]=e;const D=Object.assign({},this.indexes_);return D[y]=p,new ch(D,w)}addToIndexes(e,t){const r=(0,F.UI)(this.indexes_,(o,u)=>{const d=(0,F.DV)(this.indexSet_,u);if((0,F.hu)(d,"Missing index implementation for "+u),o===Zv){if(d.isDefinedOn(e.node)){const p=[],y=t.getIterator(on.Wrap);let w=y.getNext();for(;w;)w.name!==e.name&&p.push(w),w=y.getNext();return p.push(e),ox(p,d.getCompare())}return Zv}{const p=t.get(e.name);let y=o;return p&&(y=y.remove(new on(e.name,p))),y.insert(e,e.node)}});return new ch(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,F.UI)(this.indexes_,o=>{if(o===Zv)return o;{const u=t.get(e.name);return u?o.remove(new on(e.name,u)):o}});return new ch(r,this.indexSet_)}}let xC,Wt=(()=>{class n{constructor(t,r,o){this.children_=t,this.priorityNode_=r,this.indexMap_=o,this.lazyHash_=null,this.priorityNode_&&vL(this.priorityNode_),this.children_.isEmpty()&&(0,F.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return xC||(xC=new n(new wo(gP),null,ch.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||xC}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?xC:r}}getChild(t){const r=rn(t);return null===r?this:this.getImmediateChild(r).getChild(qn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,F.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const o=new on(t,r);let u,d;r.isEmpty()?(u=this.children_.remove(t),d=this.indexMap_.removeFromIndexes(o,this.children_)):(u=this.children_.insert(t,r),d=this.indexMap_.addToIndexes(o,this.children_));const p=u.isEmpty()?xC:this.priorityNode_;return new n(u,p,d)}}updateChild(t,r){const o=rn(t);if(null===o)return r;{(0,F.hu)(".priority"!==rn(t)||1===pp(t),".priority must be the last token in a path");const u=this.getImmediateChild(o).updateChild(qn(t),r);return this.updateImmediateChild(o,u)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let o=0,u=0,d=!0;if(this.forEachChild(rr,(p,y)=>{r[p]=y.val(t),o++,d&&n.INTEGER_REGEXP_.test(p)?u=Math.max(u,Number(p)):d=!1}),!t&&d&&u<2*o){const p=[];for(const y in r)p[y]=r[y];return p}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+yL(this.getPriority().val())+":"),this.forEachChild(rr,(r,o)=>{const u=o.hash();""!==u&&(t+=":"+r+":"+u)}),this.lazyHash_=""===t?"":kF(t)}return this.lazyHash_}getPredecessorChildName(t,r,o){const u=this.resolveIndex_(o);if(u){const d=u.getPredecessorKey(new on(t,r));return d?d.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const o=r.minKey();return o&&o.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new on(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const o=r.maxKey();return o&&o.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new on(r,this.children_.get(r)):null}forEachChild(t,r){const o=this.resolveIndex_(t);return o?o.inorderTraversal(u=>r(u.name,u.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const o=this.resolveIndex_(r);if(o)return o.getIteratorFrom(t,u=>u);{const u=this.children_.getIteratorFrom(t.name,on.Wrap);let d=u.peek();for(;null!=d&&r.compare(d,t)<0;)u.getNext(),d=u.peek();return u}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const o=this.resolveIndex_(r);if(o)return o.getReverseIteratorFrom(t,u=>u);{const u=this.children_.getReverseIteratorFrom(t.name,on.Wrap);let d=u.peek();for(;null!=d&&r.compare(d,t)>0;)u.getNext(),d=u.peek();return u}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===RC?-1:0}withIndex(t){if(t===Ec||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Ec||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const o=this.getIterator(rr),u=r.getIterator(rr);let d=o.getNext(),p=u.getNext();for(;d&&p;){if(d.name!==p.name||!d.node.equals(p.node))return!1;d=o.getNext(),p=u.getNext()}return null===d&&null===p}return!1}return!1}}resolveIndex_(t){return t===Ec?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const RC=new class extends Wt{constructor(){super(new wo(gP),Wt.EMPTY_NODE,ch.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Wt.EMPTY_NODE}isEmpty(){return!1}};function Cr(n,e=null){if(null===n)return Wt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,F.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Wv(n,Cr(e));if(n instanceof Array){let t=Wt.EMPTY_NODE;return Gi(n,(r,o)=>{if((0,F.r3)(n,r)&&"."!==r.substring(0,1)){const u=Cr(o);(u.isLeafNode()||!u.isEmpty())&&(t=t.updateImmediateChild(r,u))}}),t.updatePriority(Cr(e))}{const t=[];let r=!1;if(Gi(n,(d,p)=>{if("."!==d.substring(0,1)){const y=Cr(p);y.isEmpty()||(r=r||!y.getPriority().isEmpty(),t.push(new on(d,y)))}}),0===t.length)return Wt.EMPTY_NODE;const u=ox(t,d$,d=>d.name,gP);if(r){const d=ox(t,rr.getCompare());return new Wt(u,Cr(e),new ch({".priority":d},{".priority":rr}))}return new Wt(u,Cr(e),ch.Default)}}Object.defineProperties(on,{MIN:{value:new on(lh,Wt.EMPTY_NODE)},MAX:{value:new on(vc,RC)}}),_L.__EMPTY_NODE=Wt.EMPTY_NODE,Wv.__childrenNodeConstructor=Wt,function(n){mP=n}(RC),function(n){bL=n}(RC),function(n){wL=n}(Cr);class yP extends rx{constructor(e){super(),this.indexPath_=e,(0,F.hu)(!sn(e)&&".priority"!==rn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),o=this.extractChild(t.node),u=r.compareTo(o);return 0===u?Hm(e.name,t.name):u}makePost(e,t){const r=Cr(e),o=Wt.EMPTY_NODE.updateChild(this.indexPath_,r);return new on(t,o)}maxPost(){const e=Wt.EMPTY_NODE.updateChild(this.indexPath_,RC);return new on(vc,e)}toString(){return AC(this.indexPath_,0).join("/")}}const vP=new class extends rx{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Hm(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return on.MIN}maxPost(){return on.MAX}makePost(e,t){const r=Cr(e);return new on(t,r)}toString(){return".value"}},zv="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",w$=function(){let n=0;const e=[];return function(t){const r=t===n;let o;n=t;const u=new Array(8);for(o=7;o>=0;o--)u[o]=zv.charAt(t%64),t=Math.floor(t/64);(0,F.hu)(0===t,"Cannot push at time == 0");let d=u.join("");if(r){for(o=11;o>=0&&63===e[o];o--)e[o]=0;e[o]++}else for(o=0;o<12;o++)e[o]=Math.floor(64*Math.random());for(o=0;o<12;o++)d+=zv.charAt(e[o]);return(0,F.hu)(20===d.length,"nextPushId: Length should be 20."),d}}(),TL=function(n){if(n===""+iP)return"-";const e=XS(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let d=0;d<t.length;d++)t[d]=n.charAt(d);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return vc;const u=zv.charAt(zv.indexOf(t[r])+1);return t[r]=u,t.slice(0,r+1).join("")},DL=function(n){if(n===""+VF)return lh;const e=XS(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+iP:(delete t[t.length-1],t.join("")):(t[t.length-1]=zv.charAt(zv.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function AL(n){return{type:"value",snapshotNode:n}}function Kv(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function NC(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function MC(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class wP{constructor(e){this.index_=e}updateChild(e,t,r,o,u,d){(0,F.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const p=e.getImmediateChild(t);return p.getChild(o).equals(r.getChild(o))&&p.isEmpty()===r.isEmpty()||(null!=d&&(r.isEmpty()?e.hasChild(t)?d.trackChildChange(NC(t,p)):(0,F.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):p.isEmpty()?d.trackChildChange(Kv(t,r)):d.trackChildChange(MC(t,r,p))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(rr,(o,u)=>{t.hasChild(o)||r.trackChildChange(NC(o,u))}),t.isLeafNode()||t.forEachChild(rr,(o,u)=>{if(e.hasChild(o)){const d=e.getImmediateChild(o);d.equals(u)||r.trackChildChange(MC(o,u,d))}else r.trackChildChange(Kv(o,u))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Wt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class kC{constructor(e){this.indexedFilter_=new wP(e.getIndex()),this.index_=e.getIndex(),this.startPost_=kC.getStartPost_(e),this.endPost_=kC.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,o,u,d){return this.matches(new on(t,r))||(r=Wt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,o,u,d)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Wt.EMPTY_NODE);let o=t.withIndex(this.index_);o=o.updatePriority(Wt.EMPTY_NODE);const u=this;return t.forEachChild(rr,(d,p)=>{u.matches(new on(d,p))||(o=o.updateImmediateChild(d,Wt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,o,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class C${constructor(e){this.rangedFilter_=new kC(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,o,u,d){return this.rangedFilter_.matches(new on(t,r))||(r=Wt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,o,u,d):this.fullLimitUpdateChild_(e,t,r,u,d)}updateFullNode(e,t,r){let o;if(t.isLeafNode()||t.isEmpty())o=Wt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let u;o=Wt.EMPTY_NODE.withIndex(this.index_),u=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let d=0;for(;u.hasNext()&&d<this.limit_;){const p=u.getNext();let y;if(y=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),p)<=0:this.index_.compare(p,this.rangedFilter_.getEndPost())<=0,!y)break;o=o.updateImmediateChild(p.name,p.node),d++}}else{let u,d,p,y;if(o=t.withIndex(this.index_),o=o.updatePriority(Wt.EMPTY_NODE),this.reverse_){y=o.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),d=this.rangedFilter_.getStartPost();const S=this.index_.getCompare();p=(P,j)=>S(j,P)}else y=o.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),d=this.rangedFilter_.getEndPost(),p=this.index_.getCompare();let w=0,D=!1;for(;y.hasNext();){const S=y.getNext();!D&&p(u,S)<=0&&(D=!0),D&&w<this.limit_&&p(S,d)<=0?w++:o=o.updateImmediateChild(S.name,Wt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,o,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,o,u){let d;if(this.reverse_){const S=this.index_.getCompare();d=(P,j)=>S(j,P)}else d=this.index_.getCompare();const p=e;(0,F.hu)(p.numChildren()===this.limit_,"");const y=new on(t,r),w=this.reverse_?p.getFirstChild(this.index_):p.getLastChild(this.index_),D=this.rangedFilter_.matches(y);if(p.hasChild(t)){const S=p.getImmediateChild(t);let P=o.getChildAfterChild(this.index_,w,this.reverse_);for(;null!=P&&(P.name===t||p.hasChild(P.name));)P=o.getChildAfterChild(this.index_,P,this.reverse_);const j=null==P?1:d(P,y);if(D&&!r.isEmpty()&&j>=0)return null!=u&&u.trackChildChange(MC(t,r,S)),p.updateImmediateChild(t,r);{null!=u&&u.trackChildChange(NC(t,S));const ye=p.updateImmediateChild(t,Wt.EMPTY_NODE);return null!=P&&this.rangedFilter_.matches(P)?(null!=u&&u.trackChildChange(Kv(P.name,P.node)),ye.updateImmediateChild(P.name,P.node)):ye}}return r.isEmpty()?e:D&&d(w,y)>=0?(null!=u&&(u.trackChildChange(NC(w.name,w.node)),u.trackChildChange(Kv(t,r))),p.updateImmediateChild(t,r).updateImmediateChild(w.name,Wt.EMPTY_NODE)):e}}class ax{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=rr}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:lh}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:vc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,F.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===rr}copy(){const e=new ax;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function bP(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function CP(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function ux(n,e){const t=n.copy();return t.index_=e,t}function SL(n){const e={};if(n.isDefault())return e;let t;return n.index_===rr?t="$priority":n.index_===vP?t="$value":n.index_===Ec?t="$key":((0,F.hu)(n.index_ instanceof yP,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,F.Pz)(t),n.startSet_&&(e.startAt=(0,F.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,F.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,F.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,F.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function xL(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==rr&&(e.i=n.index_.toString()),e}class lx extends lL{constructor(e,t,r,o){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=o,this.log_=CC("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,F.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,o){const u=e._path.toString();this.log_("Listen called for "+u+" "+e._queryIdentifier);const d=lx.getListenId_(e,r),p={};this.listens_[d]=p;const y=SL(e._queryParams);this.restRequest_(u+".json",y,(w,D)=>{let S=D;if(404===w&&(S=null,w=null),null===w&&this.onDataUpdate_(u,S,!1,r),(0,F.DV)(this.listens_,d)===p){let P;P=w?401===w?"permission_denied":"rest_error:"+w:"ok",o(P,null)}})}unlisten(e,t){const r=lx.getListenId_(e,t);delete this.listens_[r]}get(e){const t=SL(e._queryParams),r=e._path.toString(),o=new F.BH;return this.restRequest_(r+".json",t,(u,d)=>{let p=d;404===u&&(p=null,u=null),null===u?(this.onDataUpdate_(r,p,!1,null),o.resolve(p)):o.reject(new Error(p))}),o.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,u])=>{o&&o.accessToken&&(t.auth=o.accessToken),u&&u.token&&(t.ac=u.token);const d=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,F.xO)(t);this.log_("Sending REST request for "+d);const p=new XMLHttpRequest;p.onreadystatechange=()=>{if(r&&4===p.readyState){this.log_("REST Response for "+d+" received. status:",p.status,"response:",p.responseText);let y=null;if(p.status>=200&&p.status<300){try{y=(0,F.cI)(p.responseText)}catch(w){Is("Failed to parse JSON response for "+d+": "+p.responseText)}r(null,y)}else 401!==p.status&&404!==p.status&&Is("Got unsuccessful REST response for "+d+" Status: "+p.status),r(p.status);r=null}},p.open("GET",d,!0),p.send()})}}class x${constructor(){this.rootNode_=Wt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function cx(){return{value:null,children:new Map}}function Yv(n,e,t){if(sn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=rn(e);n.children.has(r)||n.children.set(r,cx()),Yv(n.children.get(r),e=qn(e),t)}}function IP(n,e){if(sn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(rr,(r,o)=>{Yv(n,new Fn(r),o)}),IP(n,e)}}if(n.children.size>0){const t=rn(e);return e=qn(e),n.children.has(t)&&IP(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function TP(n,e,t){null!==n.value?t(e,n.value):function(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,o)=>{TP(o,new Fn(e.toString()+"/"+r),t)})}class N${constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Gi(this.last_,(r,o)=>{t[r]=t[r]-o}),this.last_=e,t}}class P${constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new N$(e);const r=1e4+2e4*Math.random();TC(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Gi(e,(o,u)=>{u>0&&(0,F.r3)(this.statsToReport_,o)&&(t[o]=u,r=!0)}),r&&this.server_.reportStats(t),TC(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var nu=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(nu||(nu={})),nu))();function SP(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class dx{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=nu.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(sn(this.path)){if(null!=this.affectedTree.value)return(0,F.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Fn(e));return new dx(xn(),t,this.revert)}}return(0,F.hu)(rn(this.path)===e,"operationForChild called for unrelated child."),new dx(qn(this.path),this.affectedTree,this.revert)}}class PC{constructor(e,t){this.source=e,this.path=t,this.type=nu.LISTEN_COMPLETE}operationForChild(e){return sn(this.path)?new PC(this.source,xn()):new PC(this.source,qn(this.path))}}class Wm{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=nu.OVERWRITE}operationForChild(e){return sn(this.path)?new Wm(this.source,xn(),this.snap.getImmediateChild(e)):new Wm(this.source,qn(this.path),this.snap)}}class Qv{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=nu.MERGE}operationForChild(e){if(sn(this.path)){const t=this.children.subtree(new Fn(e));return t.isEmpty()?null:t.value?new Wm(this.source,xn(),t.value):new Qv(this.source,xn(),t)}return(0,F.hu)(rn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Qv(this.source,qn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class gp{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(sn(e))return this.isFullyInitialized()&&!this.filtered_;const t=rn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class O${constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function OC(n,e,t,r,o,u){const d=r.filter(p=>p.type===t);d.sort((p,y)=>function(n,e,t){if(null==e.childName||null==t.childName)throw(0,F.g5)("Should only compare child_ events.");const r=new on(e.childName,e.snapshotNode),o=new on(t.childName,t.snapshotNode);return n.index_.compare(r,o)}(n,p,y)),d.forEach(p=>{const y=function(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,p,u);o.forEach(w=>{w.respondsTo(p.type)&&e.push(w.createEvent(y,n.query_))})})}function hx(n,e){return{eventCache:n,serverCache:e}}function FC(n,e,t,r){return hx(new gp(e,t,r),n.serverCache)}function NL(n,e,t,r){return hx(n.eventCache,new gp(e,t,r))}function fx(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Zm(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let xP;class ir{constructor(e,t=(()=>(xP||(xP=new wo(bj)),xP))()){this.value=e,this.children=t}static fromObject(e){let t=new ir(null);return Gi(e,(r,o)=>{t=t.set(new Fn(r),o)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:xn(),value:this.value};if(sn(e))return null;{const r=rn(e),o=this.children.get(r);if(null!==o){const u=o.findRootMostMatchingPathAndValue(qn(e),t);return null!=u?{path:mr(new Fn(r),u.path),value:u.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(sn(e))return this;{const t=rn(e),r=this.children.get(t);return null!==r?r.subtree(qn(e)):new ir(null)}}set(e,t){if(sn(e))return new ir(t,this.children);{const r=rn(e),u=(this.children.get(r)||new ir(null)).set(qn(e),t),d=this.children.insert(r,u);return new ir(this.value,d)}}remove(e){if(sn(e))return this.children.isEmpty()?new ir(null):new ir(null,this.children);{const t=rn(e),r=this.children.get(t);if(r){const o=r.remove(qn(e));let u;return u=o.isEmpty()?this.children.remove(t):this.children.insert(t,o),null===this.value&&u.isEmpty()?new ir(null):new ir(this.value,u)}return this}}get(e){if(sn(e))return this.value;{const t=rn(e),r=this.children.get(t);return r?r.get(qn(e)):null}}setTree(e,t){if(sn(e))return t;{const r=rn(e),u=(this.children.get(r)||new ir(null)).setTree(qn(e),t);let d;return d=u.isEmpty()?this.children.remove(r):this.children.insert(r,u),new ir(this.value,d)}}fold(e){return this.fold_(xn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((o,u)=>{r[o]=u.fold_(mr(e,o),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,xn(),t)}findOnPath_(e,t,r){const o=!!this.value&&r(t,this.value);if(o)return o;if(sn(e))return null;{const u=rn(e),d=this.children.get(u);return d?d.findOnPath_(qn(e),mr(t,u),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,xn(),t)}foreachOnPath_(e,t,r){if(sn(e))return this;{this.value&&r(t,this.value);const o=rn(e),u=this.children.get(o);return u?u.foreachOnPath_(qn(e),mr(t,o),r):new ir(null)}}foreach(e){this.foreach_(xn(),e)}foreach_(e,t){this.children.inorderTraversal((r,o)=>{o.foreach_(mr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class el{constructor(e){this.writeTree_=e}static empty(){return new el(new ir(null))}}function LC(n,e,t){if(sn(e))return new el(new ir(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const o=r.path;let u=r.value;const d=Zs(o,e);return u=u.updateChild(d,t),new el(n.writeTree_.set(o,u))}{const o=new ir(t),u=n.writeTree_.setTree(e,o);return new el(u)}}}function RP(n,e,t){let r=n;return Gi(t,(o,u)=>{r=LC(r,mr(e,o),u)}),r}function ML(n,e){if(sn(e))return el.empty();{const t=n.writeTree_.setTree(e,new ir(null));return new el(t)}}function NP(n,e){return null!=zm(n,e)}function zm(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Zs(t.path,e)):null}function kL(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(rr,(r,o)=>{e.push(new on(r,o))}):n.writeTree_.children.inorderTraversal((r,o)=>{null!=o.value&&e.push(new on(r,o.value))}),e}function mp(n,e){if(sn(e))return n;{const t=zm(n,e);return new el(null!=t?new ir(t):n.writeTree_.subtree(e))}}function MP(n){return n.writeTree_.isEmpty()}function Jv(n,e){return PL(xn(),n.writeTree_,e)}function PL(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((o,u)=>{".priority"===o?((0,F.hu)(null!==u.value,"Priority writes must always be leaf nodes"),r=u.value):t=PL(mr(n,o),u,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(mr(n,".priority"),r)),t}}function px(n,e){return UL(e,n)}function G$(n,e){if(n.snap)return tu(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&tu(mr(n.path,t),e))return!0;return!1}function W$(n){return n.visible}function OL(n,e,t){let r=el.empty();for(let o=0;o<n.length;++o){const u=n[o];if(e(u)){const d=u.path;let p;if(u.snap)tu(t,d)?(p=Zs(t,d),r=LC(r,p,u.snap)):tu(d,t)&&(p=Zs(d,t),r=LC(r,xn(),u.snap.getChild(p)));else{if(!u.children)throw(0,F.g5)("WriteRecord should have .snap or .children");if(tu(t,d))p=Zs(t,d),r=RP(r,p,u.children);else if(tu(d,t))if(p=Zs(d,t),sn(p))r=RP(r,xn(),u.children);else{const y=(0,F.DV)(u.children,rn(p));if(y){const w=y.getChild(qn(p));r=LC(r,xn(),w)}}}}}return r}function FL(n,e,t,r,o){if(r||o){const u=mp(n.visibleWrites,e);return!o&&MP(u)?t:o||null!=t||NP(u,xn())?Jv(OL(n.allWrites,function(w){return(w.visible||o)&&(!r||!~r.indexOf(w.writeId))&&(tu(w.path,e)||tu(e,w.path))},e),t||Wt.EMPTY_NODE):null}{const u=zm(n.visibleWrites,e);if(null!=u)return u;{const d=mp(n.visibleWrites,e);return MP(d)?t:null!=t||NP(d,xn())?Jv(d,t||Wt.EMPTY_NODE):null}}}function gx(n,e,t,r){return FL(n.writeTree,n.treePath,e,t,r)}function kP(n,e){return function(n,e,t){let r=Wt.EMPTY_NODE;const o=zm(n.visibleWrites,e);if(o)return o.isLeafNode()||o.forEachChild(rr,(u,d)=>{r=r.updateImmediateChild(u,d)}),r;if(t){const u=mp(n.visibleWrites,e);return t.forEachChild(rr,(d,p)=>{const y=Jv(mp(u,new Fn(d)),p);r=r.updateImmediateChild(d,y)}),kL(u).forEach(d=>{r=r.updateImmediateChild(d.name,d.node)}),r}return kL(mp(n.visibleWrites,e)).forEach(d=>{r=r.updateImmediateChild(d.name,d.node)}),r}(n.writeTree,n.treePath,e)}function LL(n,e,t,r){return function(n,e,t,r,o){(0,F.hu)(r||o,"Either existingEventSnap or existingServerSnap must exist");const u=mr(e,t);if(NP(n.visibleWrites,u))return null;{const d=mp(n.visibleWrites,u);return MP(d)?o.getChild(t):Jv(d,o.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function mx(n,e){return function(n,e){return zm(n.visibleWrites,e)}(n.writeTree,mr(n.treePath,e))}function PP(n,e,t){return function(n,e,t,r){const o=mr(e,t),u=zm(n.visibleWrites,o);return null!=u?u:r.isCompleteForChild(t)?Jv(mp(n.visibleWrites,o),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function VL(n,e){return UL(mr(n.treePath,e),n.writeTree)}function UL(n,e){return{treePath:n,writeTree:e}}class eH{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,F.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,F.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const o=this.changeMap.get(r);if(o){const u=o.type;if("child_added"===t&&"child_removed"===u)this.changeMap.set(r,MC(r,e.snapshotNode,o.snapshotNode));else if("child_removed"===t&&"child_added"===u)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===u)this.changeMap.set(r,NC(r,o.oldSnap));else if("child_changed"===t&&"child_added"===u)this.changeMap.set(r,Kv(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==u)throw(0,F.g5)("Illegal combination of changes: "+e+" occurred after "+o);this.changeMap.set(r,MC(r,e.snapshotNode,o.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const BL=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class OP{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new gp(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return PP(this.writes_,e,r)}}getChildAfterChild(e,t,r){const o=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Zm(this.viewCache_),u=function(n,e,t,r,o,u){return function(n,e,t,r,o,u,d){let p;const y=mp(n.visibleWrites,e),w=zm(y,xn());if(null!=w)p=w;else{if(null==t)return[];p=Jv(y,t)}if(p=p.withIndex(d),p.isEmpty()||p.isLeafNode())return[];{const D=[],S=d.getCompare(),P=u?p.getReverseIteratorFrom(r,d):p.getIteratorFrom(r,d);let j=P.getNext();for(;j&&D.length<o;)0!==S(j,r)&&D.push(j),j=P.getNext();return D}}(n.writeTree,n.treePath,e,t,r,o,u)}(this.writes_,o,t,1,r,e);return 0===u.length?null:u[0]}}function jL(n,e,t,r,o,u){const d=e.eventCache;if(null!=mx(r,t))return e;{let p,y;if(sn(t))if((0,F.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const w=Zm(e),S=kP(r,w instanceof Wt?w:Wt.EMPTY_NODE);p=n.filter.updateFullNode(e.eventCache.getNode(),S,u)}else{const w=gx(r,Zm(e));p=n.filter.updateFullNode(e.eventCache.getNode(),w,u)}else{const w=rn(t);if(".priority"===w){(0,F.hu)(1===pp(t),"Can't have a priority with additional path components");const D=d.getNode();y=e.serverCache.getNode();const S=LL(r,t,D,y);p=null!=S?n.filter.updatePriority(D,S):d.getNode()}else{const D=qn(t);let S;if(d.isCompleteForChild(w)){y=e.serverCache.getNode();const P=LL(r,t,d.getNode(),y);S=null!=P?d.getNode().getImmediateChild(w).updateChild(D,P):d.getNode().getImmediateChild(w)}else S=PP(r,w,e.serverCache);p=null!=S?n.filter.updateChild(d.getNode(),w,S,D,o,u):d.getNode()}}return FC(e,p,d.isFullyInitialized()||sn(t),n.filter.filtersNodes())}}function _x(n,e,t,r,o,u,d,p){const y=e.serverCache;let w;const D=d?n.filter:n.filter.getIndexedFilter();if(sn(t))w=D.updateFullNode(y.getNode(),r,null);else if(D.filtersNodes()&&!y.isFiltered()){const j=y.getNode().updateChild(t,r);w=D.updateFullNode(y.getNode(),j,null)}else{const j=rn(t);if(!y.isCompleteForPath(t)&&pp(t)>1)return e;const Y=qn(t),xe=y.getNode().getImmediateChild(j).updateChild(Y,r);w=".priority"===j?D.updatePriority(y.getNode(),xe):D.updateChild(y.getNode(),j,xe,Y,BL,null)}const S=NL(e,w,y.isFullyInitialized()||sn(t),D.filtersNodes());return jL(n,S,t,o,new OP(o,S,u),p)}function FP(n,e,t,r,o,u,d){const p=e.eventCache;let y,w;const D=new OP(o,e,u);if(sn(t))w=n.filter.updateFullNode(e.eventCache.getNode(),r,d),y=FC(e,w,!0,n.filter.filtersNodes());else{const S=rn(t);if(".priority"===S)w=n.filter.updatePriority(e.eventCache.getNode(),r),y=FC(e,w,p.isFullyInitialized(),p.isFiltered());else{const P=qn(t),j=p.getNode().getImmediateChild(S);let Y;if(sn(P))Y=r;else{const ye=D.getCompleteChild(S);Y=null!=ye?".priority"===hP(P)&&ye.getChild(fL(P)).isEmpty()?ye:ye.updateChild(P,r):Wt.EMPTY_NODE}y=j.equals(Y)?e:FC(e,n.filter.updateChild(p.getNode(),S,Y,P,D,d),p.isFullyInitialized(),n.filter.filtersNodes())}}return y}function $L(n,e){return n.eventCache.isCompleteForChild(e)}function HL(n,e,t){return t.foreach((r,o)=>{e=e.updateChild(r,o)}),e}function LP(n,e,t,r,o,u,d,p){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let w,y=e;w=sn(t)?r:new ir(null).setTree(t,r);const D=e.serverCache.getNode();return w.children.inorderTraversal((S,P)=>{if(D.hasChild(S)){const Y=HL(0,e.serverCache.getNode().getImmediateChild(S),P);y=_x(n,y,new Fn(S),Y,o,u,d,p)}}),w.children.inorderTraversal((S,P)=>{const j=!e.serverCache.isCompleteForChild(S)&&void 0===P.value;if(!D.hasChild(S)&&!j){const ye=HL(0,e.serverCache.getNode().getImmediateChild(S),P);y=_x(n,y,new Fn(S),ye,o,u,d,p)}}),y}class cH{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,o=new wP(r.getIndex()),u=function(n){return n.loadsAllData()?new wP(n.getIndex()):n.hasLimit()?new C$(n):new kC(n)}(r);this.processor_=function(n){return{filter:n}}(u);const d=t.serverCache,p=t.eventCache,y=o.updateFullNode(Wt.EMPTY_NODE,d.getNode(),null),w=u.updateFullNode(Wt.EMPTY_NODE,p.getNode(),null),D=new gp(y,d.isFullyInitialized(),o.filtersNodes()),S=new gp(w,p.isFullyInitialized(),u.filtersNodes());this.viewCache_=hx(S,D),this.eventGenerator_=new O$(this.query_)}get query(){return this.query_}}function fH(n,e){const t=Zm(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!sn(e)&&!t.getImmediateChild(rn(e)).isEmpty())?t.getChild(e):null}function GL(n){return 0===n.eventRegistrations_.length}function qL(n,e,t){const r=[];if(t){(0,F.hu)(null==e,"A cancel should cancel all event registrations.");const o=n.query._path;n.eventRegistrations_.forEach(u=>{const d=u.createCancelEvent(t,o);d&&r.push(d)})}if(e){let o=[];for(let u=0;u<n.eventRegistrations_.length;++u){const d=n.eventRegistrations_[u];if(d.matches(e)){if(e.hasAnyCallback()){o=o.concat(n.eventRegistrations_.slice(u+1));break}}else o.push(d)}n.eventRegistrations_=o}else n.eventRegistrations_=[];return r}function WL(n,e,t,r){e.type===nu.MERGE&&null!==e.source.queryId&&((0,F.hu)(Zm(n.viewCache_),"We should always have a full cache before handling merges"),(0,F.hu)(fx(n.viewCache_),"Missing event cache, even though we have a server cache"));const o=n.viewCache_,u=function(n,e,t,r,o){const u=new eH;let d,p;if(t.type===nu.OVERWRITE){const w=t;w.source.fromUser?d=FP(n,e,w.path,w.snap,r,o,u):((0,F.hu)(w.source.fromServer,"Unknown source."),p=w.source.tagged||e.serverCache.isFiltered()&&!sn(w.path),d=_x(n,e,w.path,w.snap,r,o,p,u))}else if(t.type===nu.MERGE){const w=t;w.source.fromUser?d=function(n,e,t,r,o,u,d){let p=e;return r.foreach((y,w)=>{const D=mr(t,y);$L(e,rn(D))&&(p=FP(n,p,D,w,o,u,d))}),r.foreach((y,w)=>{const D=mr(t,y);$L(e,rn(D))||(p=FP(n,p,D,w,o,u,d))}),p}(n,e,w.path,w.children,r,o,u):((0,F.hu)(w.source.fromServer,"Unknown source."),p=w.source.tagged||e.serverCache.isFiltered(),d=LP(n,e,w.path,w.children,r,o,p,u))}else if(t.type===nu.ACK_USER_WRITE){const w=t;d=w.revert?function(n,e,t,r,o,u){let d;if(null!=mx(r,t))return e;{const p=new OP(r,e,o),y=e.eventCache.getNode();let w;if(sn(t)||".priority"===rn(t)){let D;if(e.serverCache.isFullyInitialized())D=gx(r,Zm(e));else{const S=e.serverCache.getNode();(0,F.hu)(S instanceof Wt,"serverChildren would be complete if leaf node"),D=kP(r,S)}D=D,w=n.filter.updateFullNode(y,D,u)}else{const D=rn(t);let S=PP(r,D,e.serverCache);null==S&&e.serverCache.isCompleteForChild(D)&&(S=y.getImmediateChild(D)),w=null!=S?n.filter.updateChild(y,D,S,qn(t),p,u):e.eventCache.getNode().hasChild(D)?n.filter.updateChild(y,D,Wt.EMPTY_NODE,qn(t),p,u):y,w.isEmpty()&&e.serverCache.isFullyInitialized()&&(d=gx(r,Zm(e)),d.isLeafNode()&&(w=n.filter.updateFullNode(w,d,u)))}return d=e.serverCache.isFullyInitialized()||null!=mx(r,xn()),FC(e,w,d,n.filter.filtersNodes())}}(n,e,w.path,r,o,u):function(n,e,t,r,o,u,d){if(null!=mx(o,t))return e;const p=e.serverCache.isFiltered(),y=e.serverCache;if(null!=r.value){if(sn(t)&&y.isFullyInitialized()||y.isCompleteForPath(t))return _x(n,e,t,y.getNode().getChild(t),o,u,p,d);if(sn(t)){let w=new ir(null);return y.getNode().forEachChild(Ec,(D,S)=>{w=w.set(new Fn(D),S)}),LP(n,e,t,w,o,u,p,d)}return e}{let w=new ir(null);return r.foreach((D,S)=>{const P=mr(t,D);y.isCompleteForPath(P)&&(w=w.set(D,y.getNode().getChild(P)))}),LP(n,e,t,w,o,u,p,d)}}(n,e,w.path,w.affectedTree,r,o,u)}else{if(t.type!==nu.LISTEN_COMPLETE)throw(0,F.g5)("Unknown operation type: "+t.type);d=function(n,e,t,r,o){const u=e.serverCache;return jL(n,NL(e,u.getNode(),u.isFullyInitialized()||sn(t),u.isFiltered()),t,r,BL,o)}(n,e,t.path,r,u)}const y=u.getChanges();return function(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const o=r.getNode().isLeafNode()||r.getNode().isEmpty(),u=fx(n);(t.length>0||!n.eventCache.isFullyInitialized()||o&&!r.getNode().equals(u)||!r.getNode().getPriority().equals(u.getPriority()))&&t.push(AL(fx(e)))}}(e,d,y),{viewCache:d,changes:y}}(n.processor_,o,e,t,r);return function(n,e){(0,F.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,F.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,u.viewCache),(0,F.hu)(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=u.viewCache,ZL(n,u.changes,u.viewCache.eventCache.getNode(),null)}function ZL(n,e,t,r){return function(n,e,t,r){const o=[],u=[];return e.forEach(d=>{"child_changed"===d.type&&n.index_.indexedValueChanged(d.oldSnap,d.snapshotNode)&&u.push(function(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(d.childName,d.snapshotNode))}),OC(n,o,"child_removed",e,r,t),OC(n,o,"child_added",e,r,t),OC(n,o,"child_moved",u,r,t),OC(n,o,"child_changed",e,r,t),OC(n,o,"value",e,r,t),o}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let yx,Ex;class zL{constructor(){this.views=new Map}}function VP(n,e,t,r){const o=e.source.queryId;if(null!==o){const u=n.views.get(o);return(0,F.hu)(null!=u,"SyncTree gave us an op for an invalid query."),WL(u,e,t,r)}{let u=[];for(const d of n.views.values())u=u.concat(WL(d,e,t,r));return u}}function KL(n,e,t,r,o){const d=n.views.get(e._queryIdentifier);if(!d){let p=gx(t,o?r:null),y=!1;p?y=!0:r instanceof Wt?(p=kP(t,r),y=!1):(p=Wt.EMPTY_NODE,y=!1);const w=hx(new gp(p,y,!1),new gp(r,o,!1));return new cH(e,w)}return d}function YL(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function _p(n,e){let t=null;for(const r of n.views.values())t=t||fH(r,e);return t}function QL(n,e){return e._queryParams.loadsAllData()?vx(n):n.views.get(e._queryIdentifier)}function JL(n,e){return null!=QL(n,e)}function yp(n){return null!=vx(n)}function vx(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let CH=1;class XL{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ir(null),this.pendingWriteTree_={visibleWrites:el.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function UP(n,e,t,r,o){return function(n,e,t,r,o){(0,F.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:o}),o&&(n.visibleWrites=LC(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,o),o?Xv(n,new Wm({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function vp(n,e,t=!1){const r=function(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function(n,e){const t=n.allWrites.findIndex(p=>p.writeId===e);(0,F.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let o=r.visible,u=!1,d=n.allWrites.length-1;for(;o&&d>=0;){const p=n.allWrites[d];p.visible&&(d>=t&&G$(p,r.path)?o=!1:tu(r.path,p.path)&&(u=!0)),d--}return!!o&&(u?(function(n){n.visibleWrites=OL(n.allWrites,W$,xn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=ML(n.visibleWrites,r.path):Gi(r.children,y=>{n.visibleWrites=ML(n.visibleWrites,mr(r.path,y))}),!0))}(n.pendingWriteTree_,e)){let u=new ir(null);return null!=r.snap?u=u.set(xn(),!0):Gi(r.children,d=>{u=u.set(new Fn(d),!0)}),Xv(n,new dx(r.path,u,t))}return[]}function VC(n,e,t){return Xv(n,new Wm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function BP(n,e,t,r){const o=e._path,u=n.syncPointTree_.get(o);let d=[];if(u&&("default"===e._queryIdentifier||JL(u,e))){const p=function(n,e,t,r){const o=e._queryIdentifier,u=[];let d=[];const p=yp(n);if("default"===o)for(const[y,w]of n.views.entries())d=d.concat(qL(w,t,r)),GL(w)&&(n.views.delete(y),w.query._queryParams.loadsAllData()||u.push(w.query));else{const y=n.views.get(o);y&&(d=d.concat(qL(y,t,r)),GL(y)&&(n.views.delete(o),y.query._queryParams.loadsAllData()||u.push(y.query)))}return p&&!yp(n)&&u.push(new((0,F.hu)(yx,"Reference.ts has not been loaded"),yx)(e._repo,e._path)),{removed:u,events:d}}(u,e,t,r);(function(n){return 0===n.views.size})(u)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const y=p.removed;d=p.events;const w=-1!==y.findIndex(S=>S._queryParams.loadsAllData()),D=n.syncPointTree_.findOnPath(o,(S,P)=>yp(P));if(w&&!D){const S=n.syncPointTree_.subtree(o);if(!S.isEmpty()){const P=function(n){return n.fold((e,t,r)=>{if(t&&yp(t))return[vx(t)];{let o=[];return t&&(o=YL(t)),Gi(r,(u,d)=>{o=o.concat(d)}),o}})}(S);for(let j=0;j<P.length;++j){const Y=P[j],ye=Y.query,xe=rV(n,Y);n.listenProvider_.startListening(UC(ye),bx(n,ye),xe.hashFn,xe.onComplete)}}}if(!D&&y.length>0&&!r)if(w){const S=null;n.listenProvider_.stopListening(UC(e),S)}else y.forEach(S=>{const P=n.queryToTagMap.get(Cx(S));n.listenProvider_.stopListening(UC(S),P)});!function(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const o=Cx(r),u=n.queryToTagMap.get(o);n.queryToTagMap.delete(o),n.tagToQueryMap.delete(u)}}}(n,y)}return d}function eV(n,e,t){const r=e._path;let o=null,u=!1;n.syncPointTree_.foreachOnPath(r,(S,P)=>{const j=Zs(S,r);o=o||_p(P,j),u=u||yp(P)});let p,d=n.syncPointTree_.get(r);d?(u=u||yp(d),o=o||_p(d,xn())):(d=new zL,n.syncPointTree_=n.syncPointTree_.set(r,d)),null!=o?p=!0:(p=!1,o=Wt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((P,j)=>{const Y=_p(j,xn());Y&&(o=o.updateImmediateChild(P,Y))}));const y=JL(d,e);if(!y&&!e._queryParams.loadsAllData()){const S=Cx(e);(0,F.hu)(!n.queryToTagMap.has(S),"View does not exist, but we have a tag");const P=CH++;n.queryToTagMap.set(S,P),n.tagToQueryMap.set(P,S)}let D=function(n,e,t,r,o,u){const d=KL(n,e,r,o,u);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,d),function(n,e){n.eventRegistrations_.push(e)}(d,t),function(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(rr,(u,d)=>{r.push(Kv(u,d))}),t.isFullyInitialized()&&r.push(AL(t.getNode())),ZL(n,r,t.getNode(),e)}(d,t)}(d,e,t,px(n.pendingWriteTree_,r),o,p);if(!y&&!u){const S=QL(d,e);D=D.concat(function(n,e,t){const r=e._path,o=bx(n,e),u=rV(n,t),d=n.listenProvider_.startListening(UC(e),o,u.hashFn,u.onComplete),p=n.syncPointTree_.subtree(r);if(o)(0,F.hu)(!yp(p.value),"If we're adding a query, it shouldn't be shadowed");else{const y=p.fold((w,D,S)=>{if(!sn(w)&&D&&yp(D))return[vx(D).query];{let P=[];return D&&(P=P.concat(YL(D).map(j=>j.query))),Gi(S,(j,Y)=>{P=P.concat(Y)}),P}});for(let w=0;w<y.length;++w){const D=y[w];n.listenProvider_.stopListening(UC(D),bx(n,D))}}return d}(n,e,S))}return D}function wx(n,e,t){const o=n.pendingWriteTree_,u=n.syncPointTree_.findOnPath(e,(d,p)=>{const w=_p(p,Zs(d,e));if(w)return w});return FL(o,e,u,t,!0)}function Xv(n,e){return tV(e,n.syncPointTree_,null,px(n.pendingWriteTree_,xn()))}function tV(n,e,t,r){if(sn(n.path))return nV(n,e,t,r);{const o=e.get(xn());null==t&&null!=o&&(t=_p(o,xn()));let u=[];const d=rn(n.path),p=n.operationForChild(d),y=e.children.get(d);if(y&&p){const w=t?t.getImmediateChild(d):null,D=VL(r,d);u=u.concat(tV(p,y,w,D))}return o&&(u=u.concat(VP(o,n,r,t))),u}}function nV(n,e,t,r){const o=e.get(xn());null==t&&null!=o&&(t=_p(o,xn()));let u=[];return e.children.inorderTraversal((d,p)=>{const y=t?t.getImmediateChild(d):null,w=VL(r,d),D=n.operationForChild(d);D&&(u=u.concat(nV(D,p,y,w)))}),o&&(u=u.concat(VP(o,n,r,t))),u}function rV(n,e){const t=e.query,r=bx(n,t);return{hashFn:()=>(function(n){return n.viewCache_.serverCache.getNode()}(e)||Wt.EMPTY_NODE).hash(),onComplete:o=>{if("ok"===o)return r?function(n,e,t){const r=jP(n,t);if(r){const o=$P(r),u=o.path,d=o.queryId,p=Zs(u,e);return HP(n,u,new PC(SP(d),p))}return[]}(n,t._path,r):function(n,e){return Xv(n,new PC({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const u=function(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(o,t);return BP(n,t,null,u)}}}}function bx(n,e){const t=Cx(e);return n.queryToTagMap.get(t)}function Cx(n){return n._path.toString()+"$"+n._queryIdentifier}function jP(n,e){return n.tagToQueryMap.get(e)}function $P(n){const e=n.indexOf("$");return(0,F.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Fn(n.substr(0,e))}}function HP(n,e,t){const r=n.syncPointTree_.get(e);return(0,F.hu)(r,"Missing sync point for query tag that we're tracking"),VP(r,t,px(n.pendingWriteTree_,e),null)}function UC(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new((0,F.hu)(Ex,"Reference.ts has not been loaded"),Ex)(n._repo,n._path):n}class GP{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new GP(t)}node(){return this.node_}}class qP{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=mr(this.path_,e);return new qP(this.syncTree_,t)}node(){return wx(this.syncTree_,this.path_)}}const iV=function(n,e,t){return n&&"object"==typeof n?((0,F.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?FH(n[".sv"],e,t):"object"==typeof n[".sv"]?LH(n[".sv"],e):void(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},FH=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:(0,F.hu)(!1,"Unexpected server value: "+n)}},LH=function(n,e,t){n.hasOwnProperty("increment")||(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,F.hu)(!1,"Unexpected increment value: "+r);const o=e.node();if((0,F.hu)(null!=o,"Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;const d=o.getValue();return"number"!=typeof d?r:d+r},sV=function(n,e,t,r){return ZP(e,new qP(t,n),r)},WP=function(n,e,t){return ZP(n,new GP(e),t)};function ZP(n,e,t){const r=n.getPriority().val(),o=iV(r,e.getImmediateChild(".priority"),t);let u;if(n.isLeafNode()){const d=n,p=iV(d.getValue(),e,t);return p!==d.getValue()||o!==d.getPriority().val()?new Wv(p,Cr(o)):n}{const d=n;return u=d,o!==d.getPriority().val()&&(u=u.updatePriority(new Wv(o))),d.forEachChild(rr,(p,y)=>{const w=ZP(y,e.getImmediateChild(p),t);w!==y&&(u=u.updateImmediateChild(p,w))}),u}}class zP{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function Ix(n,e){let t=e instanceof Fn?e:new Fn(e),r=n,o=rn(t);for(;null!==o;){const u=(0,F.DV)(r.node.children,o)||{children:{},childCount:0};r=new zP(o,r,u),t=qn(t),o=rn(t)}return r}function Km(n){return n.node.value}function KP(n,e){n.node.value=e,YP(n)}function oV(n){return n.node.childCount>0}function Tx(n,e){Gi(n.node.children,(t,r)=>{e(new zP(t,n,r))})}function aV(n,e,t,r){t&&!r&&e(n),Tx(n,o=>{aV(o,e,!0,r)}),t&&r&&e(n)}function BC(n){return new Fn(null===n.parent?n.name:BC(n.parent)+"/"+n.name)}function YP(n){null!==n.parent&&function(n,e,t){const r=function(n){return void 0===Km(n)&&!oV(n)}(t),o=(0,F.r3)(n.node.children,e);r&&o?(delete n.node.children[e],n.node.childCount--,YP(n)):!r&&!o&&(n.node.children[e]=t.node,n.node.childCount++,YP(n))}(n.parent,n.name,n)}const jH=/[\[\].#$\/\u0000-\u001F\u007F]/,$H=/[\[\].#$\u0000-\u001F\u007F]/,QP=10485760,Dx=function(n){return"string"==typeof n&&0!==n.length&&!jH.test(n)},uV=function(n){return"string"==typeof n&&0!==n.length&&!$H.test(n)},jC=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!JS(n)||n&&"object"==typeof n&&(0,F.r3)(n,".sv")},wc=function(n,e,t,r){r&&void 0===e||$C((0,F.gK)(n,"value"),e,t)},$C=function(n,e,t){const r=t instanceof Fn?new n$(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Gm(r));if("function"==typeof e)throw new Error(n+"contains a function "+Gm(r)+" with contents = "+e.toString());if(JS(e))throw new Error(n+"contains "+e.toString()+" "+Gm(r));if("string"==typeof e&&e.length>QP/3&&(0,F.ug)(e)>QP)throw new Error(n+"contains a string greater than "+QP+" utf8 bytes "+Gm(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let o=!1,u=!1;if(Gi(e,(d,p)=>{if(".value"===d)o=!0;else if(".priority"!==d&&".sv"!==d&&(u=!0,!Dx(d)))throw new Error(n+" contains an invalid key ("+d+") "+Gm(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,F.ug)(e),pL(n)})(r,d),$C(n,p,r),function(n){const e=n.parts_.pop();n.byteLength_-=(0,F.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),o&&u)throw new Error(n+' contains ".value" child '+Gm(r)+" in addition to actual children.")}},lV=function(n,e,t,r){if(r&&void 0===e)return;const o=(0,F.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(o+" must be an object containing the children to replace.");const u=[];Gi(e,(d,p)=>{const y=new Fn(d);if($C(o,p,mr(t,y)),".priority"===hP(y)&&!jC(p))throw new Error(o+"contains an invalid value for '"+y.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");u.push(y)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const u=AC(r);for(let d=0;d<u.length;d++)if((".priority"!==u[d]||d!==u.length-1)&&!Dx(u[d]))throw new Error(n+"contains an invalid key ("+u[d]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(t$);let o=null;for(t=0;t<e.length;t++){if(r=e[t],null!==o&&tu(o,r))throw new Error(n+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(o,u)},JP=function(n,e,t){if(!t||void 0!==e){if(JS(e))throw new Error((0,F.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!jC(e))throw new Error((0,F.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},HC=function(n,e,t,r){if(!(r&&void 0===t||Dx(t)))throw new Error((0,F.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},GC=function(n,e,t,r){if(!(r&&void 0===t||uV(t)))throw new Error((0,F.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ru=function(n,e){if(".info"===rn(e))throw new Error(n+" failed = Can't modify data under /.info/")},cV=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Dx(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),uV(n)}(t))throw new Error((0,F.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class WH{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ax(n,e){let t=null;for(let r=0;r<e.length;r++){const o=e[r],u=o.getPath();null!==t&&!fP(u,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:u}),t.events.push(o)}t&&n.eventLists_.push(t)}function XP(n,e,t){Ax(n,t),dV(n,r=>fP(r,e))}function iu(n,e,t){Ax(n,t),dV(n,r=>tu(r,e)||tu(e,r))}function dV(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const o=n.eventLists_[r];o&&(e(o.path)?(ZH(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function ZH(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();$m&&Hi("event: "+t.toString()),Gv(r)}}}const hV="repo_interrupt";class KH{constructor(e,t,r,o){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new WH,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=cx(),this.transactionQueueTree_=new zP,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function fV(n){const t=n.infoData_.getNode(new Fn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function qC(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:fV(n)})}function pV(n,e,t,r,o){n.dataUpdateCount++;const u=new Fn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let d=[];if(o)if(r){const y=(0,F.UI)(t,w=>Cr(w));d=function(n,e,t,r){const o=jP(n,r);if(o){const u=$P(o),d=u.path,p=u.queryId,y=Zs(d,e),w=ir.fromObject(t);return HP(n,d,new Qv(SP(p),y,w))}return[]}(n.serverSyncTree_,u,y,o)}else{const y=Cr(t);d=function(n,e,t,r){const o=jP(n,r);if(null!=o){const u=$P(o),d=u.path,p=u.queryId,y=Zs(d,e);return HP(n,d,new Wm(SP(p),y,t))}return[]}(n.serverSyncTree_,u,y,o)}else if(r){const y=(0,F.UI)(t,w=>Cr(w));d=function(n,e,t){const r=ir.fromObject(t);return Xv(n,new Qv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,u,y)}else{const y=Cr(t);d=VC(n.serverSyncTree_,u,y)}let p=u;d.length>0&&(p=tE(n,u)),iu(n.eventQueue_,p,d)}function gV(n,e){e1(n,"connected",e),!1===e&&function(n){eE(n,"onDisconnectEvents");const e=qC(n),t=cx();TP(n.onDisconnect_,xn(),(o,u)=>{const d=sV(o,u,n.serverSyncTree_,e);Yv(t,o,d)});let r=[];TP(t,xn(),(o,u)=>{r=r.concat(VC(n.serverSyncTree_,o,u));const d=i1(n,o);tE(n,d)}),n.onDisconnect_=cx(),iu(n.eventQueue_,xn(),r)}(n)}function e1(n,e,t){const r=new Fn("/.info/"+e),o=Cr(t);n.infoData_.updateSnapshot(r,o);const u=VC(n.infoSyncTree_,r,o);iu(n.eventQueue_,r,u)}function Sx(n){return n.nextWriteId_++}function t1(n,e,t,r,o){eE(n,"set",{path:e.toString(),value:t,priority:r});const u=qC(n),d=Cr(t,r),p=wx(n.serverSyncTree_,e),y=WP(d,p,u),w=Sx(n),D=UP(n.serverSyncTree_,e,y,w,!0);Ax(n.eventQueue_,D),n.server_.put(e.toString(),d.val(!0),(P,j)=>{const Y="ok"===P;Y||Is("set at "+e+" failed: "+P);const ye=vp(n.serverSyncTree_,w,!Y);iu(n.eventQueue_,e,ye),Ep(0,o,P,j)});const S=i1(n,e);tE(n,S),iu(n.eventQueue_,S,[])}function t3(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,o)=>{"ok"===r&&IP(n.onDisconnect_,e),Ep(0,t,r,o)})}function mV(n,e,t,r){const o=Cr(t);n.server_.onDisconnectPut(e.toString(),o.val(!0),(u,d)=>{"ok"===u&&Yv(n.onDisconnect_,e,o),Ep(0,r,u,d)})}function n1(n,e,t){let r;r=".info"===rn(e._path)?BP(n.infoSyncTree_,e,t):BP(n.serverSyncTree_,e,t),XP(n.eventQueue_,e._path,r)}function _V(n){n.persistentConnection_&&n.persistentConnection_.interrupt(hV)}function eE(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Hi(t,...e)}function Ep(n,e,t,r){e&&Gv(()=>{if("ok"===t)e(null);else{const o=(t||"error").toUpperCase();let u=o;r&&(u+=": "+r);const d=new Error(u);d.code=o,e(d)}})}function r1(n,e,t){return wx(n.serverSyncTree_,e,t)||Wt.EMPTY_NODE}function xx(n,e=n.transactionQueueTree_){if(e||Rx(n,e),Km(e)){const t=vV(n,e);(0,F.hu)(t.length>0,"Sending zero length transaction queue"),t.every(o=>0===o.status)&&function(n,e,t){const r=t.map(w=>w.currentWriteId),o=r1(n,e,r);let u=o;const d=o.hash();for(let w=0;w<t.length;w++){const D=t[w];(0,F.hu)(0===D.status,"tryToSendTransactionQueue_: items in queue should all be run."),D.status=1,D.retryCount++;const S=Zs(e,D.path);u=u.updateChild(S,D.currentOutputSnapshotRaw)}const p=u.val(!0),y=e;n.server_.put(y.toString(),p,w=>{eE(n,"transaction put response",{path:y.toString(),status:w});let D=[];if("ok"===w){const S=[];for(let P=0;P<t.length;P++)t[P].status=2,D=D.concat(vp(n.serverSyncTree_,t[P].currentWriteId)),t[P].onComplete&&S.push(()=>t[P].onComplete(null,!0,t[P].currentOutputSnapshotResolved)),t[P].unwatcher();Rx(n,Ix(n.transactionQueueTree_,e)),xx(n,n.transactionQueueTree_),iu(n.eventQueue_,e,D);for(let P=0;P<S.length;P++)Gv(S[P])}else{if("datastale"===w)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{Is("transaction at "+y.toString()+" failed: "+w);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=w}tE(n,e)}},d)}(n,BC(e),t)}else oV(e)&&Tx(e,t=>{xx(n,t)})}function tE(n,e){const t=yV(n,e),r=BC(t);return function(n,e,t){if(0===e.length)return;const r=[];let o=[];const d=e.filter(p=>0===p.status).map(p=>p.currentWriteId);for(let p=0;p<e.length;p++){const y=e[p],w=Zs(t,y.path);let S,D=!1;if((0,F.hu)(null!==w,"rerunTransactionsUnderNode_: relativePath should not be null."),4===y.status)D=!0,S=y.abortReason,o=o.concat(vp(n.serverSyncTree_,y.currentWriteId,!0));else if(0===y.status)if(y.retryCount>=25)D=!0,S="maxretry",o=o.concat(vp(n.serverSyncTree_,y.currentWriteId,!0));else{const P=r1(n,y.path,d);y.currentInputSnapshot=P;const j=e[p].update(P.val());if(void 0!==j){$C("transaction failed: Data returned ",j,y.path);let Y=Cr(j);"object"==typeof j&&null!=j&&(0,F.r3)(j,".priority")||(Y=Y.updatePriority(P.getPriority()));const xe=y.currentWriteId,ct=qC(n),lt=WP(Y,P,ct);y.currentOutputSnapshotRaw=Y,y.currentOutputSnapshotResolved=lt,y.currentWriteId=Sx(n),d.splice(d.indexOf(xe),1),o=o.concat(UP(n.serverSyncTree_,y.path,lt,y.currentWriteId,y.applyLocally)),o=o.concat(vp(n.serverSyncTree_,xe,!0))}else D=!0,S="nodata",o=o.concat(vp(n.serverSyncTree_,y.currentWriteId,!0))}iu(n.eventQueue_,t,o),o=[],D&&(e[p].status=2,setTimeout(e[p].unwatcher,Math.floor(0)),e[p].onComplete&&r.push("nodata"===S?()=>e[p].onComplete(null,!1,e[p].currentInputSnapshot):()=>e[p].onComplete(new Error(S),!1,null)))}Rx(n,n.transactionQueueTree_);for(let p=0;p<r.length;p++)Gv(r[p]);xx(n,n.transactionQueueTree_)}(n,vV(n,t),r),r}function yV(n,e){let t,r=n.transactionQueueTree_;for(t=rn(e);null!==t&&void 0===Km(r);)r=Ix(r,t),t=rn(e=qn(e));return r}function vV(n,e){const t=[];return EV(n,e,t),t.sort((r,o)=>r.order-o.order),t}function EV(n,e,t){const r=Km(e);if(r)for(let o=0;o<r.length;o++)t.push(r[o]);Tx(e,o=>{EV(n,o,t)})}function Rx(n,e){const t=Km(e);if(t){let r=0;for(let o=0;o<t.length;o++)2!==t[o].status&&(t[r]=t[o],r++);t.length=r,KP(e,t.length>0?t:void 0)}Tx(e,r=>{Rx(n,r)})}function i1(n,e){const t=BC(yV(n,e)),r=Ix(n.transactionQueueTree_,e);return function(n,e,t){let r=n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,o=>{s1(n,o)}),s1(n,r),aV(r,o=>{s1(n,o)}),t}function s1(n,e){const t=Km(e);if(t){const r=[];let o=[],u=-1;for(let d=0;d<t.length;d++)3===t[d].status||(1===t[d].status?((0,F.hu)(u===d-1,"All SENT items should be at beginning of queue."),u=d,t[d].status=3,t[d].abortReason="set"):((0,F.hu)(0===t[d].status,"Unexpected transaction status in abort"),t[d].unwatcher(),o=o.concat(vp(n.serverSyncTree_,t[d].currentWriteId,!0)),t[d].onComplete&&r.push(t[d].onComplete.bind(null,new Error("set"),!1,null))));-1===u?KP(e,void 0):t.length=u+1,iu(n.eventQueue_,BC(e),o);for(let d=0;d<r.length;d++)Gv(r[d])}}const o1=function(n,e){const t=d3(n),r=t.namespace;return"firebase.com"===t.domain&&yc(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&yc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Is("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new oP(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Fn(t.pathString)}},d3=function(n){let e="",t="",r="",o="",u="",d=!0,p="https",y=443;if("string"==typeof n){let w=n.indexOf("//");w>=0&&(p=n.substring(0,w-1),n=n.substring(w+2));let D=n.indexOf("/");-1===D&&(D=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(D,S)),D<S&&(o=function(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let o=t[r];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch(u){}e+="/"+o}return e}(n.substring(D,S)));const P=function(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Is(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));w=e.indexOf(":"),w>=0?(d="https"===p||"wss"===p,y=parseInt(e.substring(w+1),10)):w=e.length;const j=e.slice(0,w);if("localhost"===j.toLowerCase())t="localhost";else if(j.split(".").length<=2)t=j;else{const Y=e.indexOf(".");r=e.substring(0,Y).toLowerCase(),t=e.substring(Y+1),u=r}"ns"in P&&(u=P.ns)}return{host:e,port:y,domain:t,subdomain:r,secure:d,scheme:p,pathString:o,namespace:u}};class wV{constructor(e,t,r,o){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=o}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,F.Pz)(this.snapshot.exportVal())}}class bV{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class CV{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,F.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class IV{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new F.BH;return t3(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){ru("OnDisconnect.remove",this._path);const e=new F.BH;return mV(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){ru("OnDisconnect.set",this._path),wc("OnDisconnect.set",e,this._path,!1);const t=new F.BH;return mV(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){ru("OnDisconnect.setWithPriority",this._path),wc("OnDisconnect.setWithPriority",e,this._path,!1),JP("OnDisconnect.setWithPriority",t,!1);const r=new F.BH;return function(n,e,t,r,o){const u=Cr(t,r);n.server_.onDisconnectPut(e.toString(),u.val(!0),(d,p)=>{"ok"===d&&Yv(n.onDisconnect_,e,u),Ep(0,o,d,p)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){ru("OnDisconnect.update",this._path),lV("OnDisconnect.update",e,this._path,!1);const t=new F.BH;return function(n,e,t,r){if((0,F.xb)(t))return Hi("onDisconnect().update() called with empty data.  Don't do anything."),void Ep(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(o,u)=>{"ok"===o&&Gi(t,(d,p)=>{const y=Cr(p);Yv(n.onDisconnect_,mr(e,d),y)}),Ep(0,r,o,u)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class bo{constructor(e,t,r,o){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=o}get key(){return sn(this._path)?null:hP(this._path)}get ref(){return new su(this._repo,this._path)}get _queryIdentifier(){const e=xL(this._queryParams),t=rP(e);return"{}"===t?"default":t}get _queryObject(){return xL(this._queryParams)}isEqual(e){if(!((e=(0,F.m9)(e))instanceof bo))return!1;const t=this._repo===e._repo,r=fP(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function Nx(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function wp(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Ec){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==lh)throw new Error(r);if("string"!=typeof e)throw new Error(o)}if(n.hasEnd()){if(n.getIndexEndName()!==vc)throw new Error(r);if("string"!=typeof t)throw new Error(o)}}else if(n.getIndex()===rr){if(null!=e&&!jC(e)||null!=t&&!jC(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,F.hu)(n.getIndex()instanceof yP||n.getIndex()===vP,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Mx(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class su extends bo{constructor(e,t){super(e,t,new ax,!1)}get parent(){const e=fL(this._path);return null===e?null:new su(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Ym{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Fn(e),r=Qm(this.ref,e);return new Ym(this._node.getChild(t),r,rr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,o)=>e(new Ym(o,Qm(this.ref,r),rr)))}hasChild(e){const t=new Fn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function TV(n,e){return(n=(0,F.m9)(n))._checkNotDeleted("ref"),void 0!==e?Qm(n._root,e):n._root}function DV(n,e){(n=(0,F.m9)(n))._checkNotDeleted("refFromURL");const t=o1(e,n._repo.repoInfo_.nodeAdmin);cV("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&yc("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),TV(n,t.path.toString())}function Qm(n,e){return null===rn((n=(0,F.m9)(n))._path)?((t=e)&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),GC("child","path",t,!1)):GC("child","path",e,!1),new su(n._repo,mr(n._path,e));var t}function a1(n,e){n=(0,F.m9)(n),ru("set",n._path),wc("set",e,n._path,!1);const t=new F.BH;return t1(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function m3(n,e){lV("update",e,n._path,!1);const t=new F.BH;return function(n,e,t,r){eE(n,"update",{path:e.toString(),value:t});let o=!0;const u=qC(n),d={};if(Gi(t,(p,y)=>{o=!1,d[p]=sV(mr(e,p),Cr(y),n.serverSyncTree_,u)}),o)Hi("update() called with empty data.  Don't do anything."),Ep(0,r,"ok",void 0);else{const p=Sx(n),y=function(n,e,t,r){!function(n,e,t,r){(0,F.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=RP(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const o=ir.fromObject(t);return Xv(n,new Qv({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,o))}(n.serverSyncTree_,e,d,p);Ax(n.eventQueue_,y),n.server_.merge(e.toString(),t,(w,D)=>{const S="ok"===w;S||Is("update at "+e+" failed: "+w);const P=vp(n.serverSyncTree_,p,!S),j=P.length>0?tE(n,e):e;iu(n.eventQueue_,j,P),Ep(0,r,w,D)}),Gi(t,w=>{const D=i1(n,mr(e,w));tE(n,D)}),iu(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function _3(n){return function(n,e){const t=function(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(w,D)=>{const S=Zs(w,t);r=r||_p(D,S)});let o=n.syncPointTree_.get(t);o?r=r||_p(o,xn()):(o=new zL,n.syncPointTree_=n.syncPointTree_.set(t,o));const u=null!=r,d=u?new gp(r,!0,!1):null;return function(n){return fx(n.viewCache_)}(KL(o,e,px(n.pendingWriteTree_,e._path),u?d.getNode():Wt.EMPTY_NODE,u))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const o=Cr(r).withIndex(e._queryParams.getIndex()),u=VC(n.serverSyncTree_,e._path,o);return XP(n.eventQueue_,e._path,u),Promise.resolve(o)},r=>(eE(n,"get for query "+(0,F.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,F.m9)(n))._repo,n).then(e=>new Ym(e,new su(n._repo,n._path),n._queryParams.getIndex()))}class kx{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new wV("value",this,new Ym(e.snapshotNode,new su(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new bV(this,e,t):null}matches(e){return e instanceof kx&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Px{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new bV(this,e,t):null}createEvent(e,t){(0,F.hu)(null!=e.childName,"Child events should have a childName.");const r=Qm(new su(t._repo,t._path),e.childName),o=t._queryParams.getIndex();return new wV(e.type,this,new Ym(e.snapshotNode,r,o),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Px&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function WC(n,e,t,r,o){let u;if("object"==typeof r&&(u=void 0,o=r),"function"==typeof r&&(u=r),o&&o.onlyOnce){const y=t,w=(D,S)=>{n1(n._repo,n,p),y(D,S)};w.userCallback=t.userCallback,w.context=t.context,t=w}const d=new CV(t,u||void 0),p="value"===e?new kx(d):new Px(e,d);return function(n,e,t){let r;r=".info"===rn(e._path)?eV(n.infoSyncTree_,e,t):eV(n.serverSyncTree_,e,t),XP(n.eventQueue_,e._path,r)}(n._repo,n,p),()=>n1(n._repo,n,p)}function u1(n,e,t,r){return WC(n,"value",e,t,r)}function AV(n,e,t,r){return WC(n,"child_added",e,t,r)}function SV(n,e,t,r){return WC(n,"child_changed",e,t,r)}function xV(n,e,t,r){return WC(n,"child_moved",e,t,r)}function RV(n,e,t,r){return WC(n,"child_removed",e,t,r)}function NV(n,e,t){let r=null;const o=t?new CV(t):null;"value"===e?r=new kx(o):e&&(r=new Px(e,o)),n1(n._repo,n,r)}class tl{}class MV extends tl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){wc("endAt",this._value,e._path,!0);const t=CP(e._queryParams,this._value,this._key);if(Mx(t),wp(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new bo(e._repo,e._path,t,e._orderByCalled)}}class v3 extends tl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){wc("endBefore",this._value,e._path,!1);const t=function(n,e,t){let r,o;return n.index_===Ec?("string"==typeof e&&(e=DL(e)),o=CP(n,e,t)):(r=null==t?lh:DL(t),o=CP(n,e,r)),o.endBeforeSet_=!0,o}(e._queryParams,this._value,this._key);if(Mx(t),wp(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new bo(e._repo,e._path,t,e._orderByCalled)}}class kV extends tl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){wc("startAt",this._value,e._path,!0);const t=bP(e._queryParams,this._value,this._key);if(Mx(t),wp(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new bo(e._repo,e._path,t,e._orderByCalled)}}class b3 extends tl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){wc("startAfter",this._value,e._path,!1);const t=function(n,e,t){let r;if(n.index_===Ec)"string"==typeof e&&(e=TL(e)),r=bP(n,e,t);else{let o;o=null==t?vc:TL(t),r=bP(n,e,o)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(Mx(t),wp(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new bo(e._repo,e._path,t,e._orderByCalled)}}class I3 extends tl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new bo(e._repo,e._path,function(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class D3 extends tl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new bo(e._repo,e._path,function(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class S3 extends tl{constructor(e){super(),this._path=e}_apply(e){Nx(e,"orderByChild");const t=new Fn(this._path);if(sn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new yP(t),o=ux(e._queryParams,r);return wp(o),new bo(e._repo,e._path,o,!0)}}class R3 extends tl{_apply(e){Nx(e,"orderByKey");const t=ux(e._queryParams,Ec);return wp(t),new bo(e._repo,e._path,t,!0)}}class M3 extends tl{_apply(e){Nx(e,"orderByPriority");const t=ux(e._queryParams,rr);return wp(t),new bo(e._repo,e._path,t,!0)}}class P3 extends tl{_apply(e){Nx(e,"orderByValue");const t=ux(e._queryParams,vP);return wp(t),new bo(e._repo,e._path,t,!0)}}class F3 extends tl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(wc("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new MV(this._value,this._key)._apply(new kV(this._value,this._key)._apply(e))}}function nl(n,...e){let t=(0,F.m9)(n);for(const r of e)t=r._apply(t);return t}(function(n){(0,F.hu)(!yx,"__referenceConstructor has already been defined"),yx=n})(su),function(n){(0,F.hu)(!Ex,"__referenceConstructor has already been defined"),Ex=n}(su);const l1={};function OV(n,e,t,r,o){let u=r||n.options.databaseURL;void 0===u&&(n.options.projectId||yc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Hi("Using default host for project ",n.options.projectId),u=`${n.options.projectId}-default-rtdb.firebaseio.com`);let y,w,d=o1(u,o),p=d.repoInfo;"undefined"!=typeof process&&process.env&&(w=process.env.FIREBASE_DATABASE_EMULATOR_HOST),w?(y=!0,u=`http://${w}?ns=${p.namespace}`,d=o1(u,o),p=d.repoInfo):y=!d.repoInfo.secure;const D=o&&y?new DC(DC.OWNER):new xj(n.name,n.options,e);cV("Invalid Firebase Database URL",d),sn(d.path)||yc("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function(n,e,t,r){let o=l1[e.name];o||(o={},l1[e.name]=o);let u=o[n.toURLString()];return u&&yc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),u=new KH(n,false,t,r),o[n.toURLString()]=u,u}(p,n,D,new Sj(n.name,t));return new H3(S,n)}class H3{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(n,e,t){if(n.stats_=lP(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new lx(n.repoInfo_,(r,o,u,d)=>{pV(n,r,o,u,d)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>gV(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,F.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new qm(n.repoInfo_,e,(r,o,u,d)=>{pV(n,r,o,u,d)},r=>{gV(n,r)},r=>{!function(n,e){Gi(e,(t,r)=>{e1(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function(n,e){const t=n.toString();return uP[t]||(uP[t]=e()),uP[t]}(n.repoInfo_,()=>new P$(n.stats_,n.server_)),n.infoData_=new x$,n.infoSyncTree_=new XL({startListening:(r,o,u,d)=>{let p=[];const y=n.infoData_.getNode(r._path);return y.isEmpty()||(p=VC(n.infoSyncTree_,r._path,y),setTimeout(()=>{d("ok")},0)),p},stopListening:()=>{}}),e1(n,"connected",!1),n.serverSyncTree_=new XL({startListening:(r,o,u,d)=>(n.server_.listen(r,u,o,(p,y)=>{const w=d(p,y);iu(n.eventQueue_,r._path,w)}),[]),stopListening:(r,o)=>{n.server_.unlisten(r,o)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new su(this._repo,xn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(n,e){const t=l1[e];(!t||t[n.key]!==n)&&yc(`Database ${e}(${n.repoInfo_}) has already been deleted.`),_V(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&yc("Cannot call "+e+" on a deleted database.")}}function FV(){tL.IS_TRANSPORT_INITIALIZED&&Is("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function G3(){FV(),fp.forceDisallow()}function q3(){FV(),qv.forceDisallow(),fp.forceAllow()}function K3(n,e){OF(n,e)}class eG{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}qm.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},qm.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},RF(Pi.SDK_VERSION),(0,Pi._registerComponent)(new Ha.wA("database",(e,{instanceIdentifier:t})=>OV(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Pi.registerVersion)(SF,"0.13.0",void 0),(0,Pi.registerVersion)(SF,"0.13.0","esm2017");const iG=new fo.Yd("@firebase/database-compat"),LV=function(n){iG.warn("FIREBASE WARNING: "+n)};class aG{constructor(e){this._delegate=e}cancel(e){(0,F.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,F.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,F.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,F.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,F.Dv)("OnDisconnect.set",1,2,arguments.length),(0,F.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),o=>t(o)),r}setWithPriority(e,t,r){(0,F.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,F.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const o=this._delegate.setWithPriority(e,t);return r&&o.then(()=>r(null),u=>r(u)),o}update(e,t){if((0,F.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const o={};for(let u=0;u<e.length;++u)o[""+u]=e[u];e=o,LV("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,F.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),o=>t(o)),r}}class uG{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,F.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class bp{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,F.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,F.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,F.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,F.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,F.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),GC("DataSnapshot.child","path",e,!1),new bp(this._database,this._delegate.child(e))}hasChild(e){return(0,F.Dv)("DataSnapshot.hasChild",1,1,arguments.length),GC("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,F.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,F.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,F.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new bp(this._database,t)))}hasChildren(){return(0,F.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,F.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,F.Dv)("DataSnapshot.ref",0,0,arguments.length),new la(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class as{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,o){var u;(0,F.Dv)("Query.on",2,4,arguments.length),(0,F.Wj)("Query.on","callback",t,!1);const d=as.getCancelAndContextArgs_("Query.on",r,o),p=(w,D)=>{t.call(d.context,new bp(this.database,w),D)};p.userCallback=t,p.context=d.context;const y=null===(u=d.cancel)||void 0===u?void 0:u.bind(d.context);switch(e){case"value":return u1(this._delegate,p,y),t;case"child_added":return AV(this._delegate,p,y),t;case"child_removed":return RV(this._delegate,p,y),t;case"child_changed":return SV(this._delegate,p,y),t;case"child_moved":return xV(this._delegate,p,y),t;default:throw new Error((0,F.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,F.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,F.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,F.Wj)("Query.off","callback",t,!0),(0,F.lb)("Query.off","context",r,!0),t){const o=()=>{};o.userCallback=t,o.context=r,NV(this._delegate,e,o)}else NV(this._delegate,e)}get(){return _3(this._delegate).then(e=>new bp(this.database,e))}once(e,t,r,o){(0,F.Dv)("Query.once",1,4,arguments.length),(0,F.Wj)("Query.once","callback",t,!0);const u=as.getCancelAndContextArgs_("Query.once",r,o),d=new F.BH,p=(w,D)=>{const S=new bp(this.database,w);t&&t.call(u.context,S,D),d.resolve(S)};p.userCallback=t,p.context=u.context;const y=w=>{u.cancel&&u.cancel.call(u.context,w),d.reject(w)};switch(e){case"value":u1(this._delegate,p,y,{onlyOnce:!0});break;case"child_added":AV(this._delegate,p,y,{onlyOnce:!0});break;case"child_removed":RV(this._delegate,p,y,{onlyOnce:!0});break;case"child_changed":SV(this._delegate,p,y,{onlyOnce:!0});break;case"child_moved":xV(this._delegate,p,y,{onlyOnce:!0});break;default:throw new Error((0,F.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return d.promise}limitToFirst(e){return(0,F.Dv)("Query.limitToFirst",1,1,arguments.length),new as(this.database,nl(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new I3(n)}(e)))}limitToLast(e){return(0,F.Dv)("Query.limitToLast",1,1,arguments.length),new as(this.database,nl(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new D3(n)}(e)))}orderByChild(e){return(0,F.Dv)("Query.orderByChild",1,1,arguments.length),new as(this.database,nl(this._delegate,function(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return GC("orderByChild","path",n,!1),new S3(n)}(e)))}orderByKey(){return(0,F.Dv)("Query.orderByKey",0,0,arguments.length),new as(this.database,nl(this._delegate,new R3))}orderByPriority(){return(0,F.Dv)("Query.orderByPriority",0,0,arguments.length),new as(this.database,nl(this._delegate,new M3))}orderByValue(){return(0,F.Dv)("Query.orderByValue",0,0,arguments.length),new as(this.database,nl(this._delegate,new P3))}startAt(e=null,t){return(0,F.Dv)("Query.startAt",0,2,arguments.length),new as(this.database,nl(this._delegate,function(n=null,e){return HC("startAt","key",e,!0),new kV(n,e)}(e,t)))}startAfter(e=null,t){return(0,F.Dv)("Query.startAfter",0,2,arguments.length),new as(this.database,nl(this._delegate,function(n,e){return HC("startAfter","key",e,!0),new b3(n,e)}(e,t)))}endAt(e=null,t){return(0,F.Dv)("Query.endAt",0,2,arguments.length),new as(this.database,nl(this._delegate,function(n,e){return HC("endAt","key",e,!0),new MV(n,e)}(e,t)))}endBefore(e=null,t){return(0,F.Dv)("Query.endBefore",0,2,arguments.length),new as(this.database,nl(this._delegate,function(n,e){return HC("endBefore","key",e,!0),new v3(n,e)}(e,t)))}equalTo(e,t){return(0,F.Dv)("Query.equalTo",1,2,arguments.length),new as(this.database,nl(this._delegate,function(n,e){return HC("equalTo","key",e,!0),new F3(n,e)}(e,t)))}toString(){return(0,F.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,F.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,F.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof as))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const o={cancel:void 0,context:void 0};if(t&&r)o.cancel=t,(0,F.Wj)(e,"cancel",o.cancel,!0),o.context=r,(0,F.lb)(e,"context",o.context,!0);else if(t)if("object"==typeof t&&null!==t)o.context=t;else{if("function"!=typeof t)throw new Error((0,F.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");o.cancel=t}return o}get ref(){return new la(this.database,new su(this._delegate._repo,this._delegate._path))}}class la extends as{constructor(e,t){super(e,new bo(t._repo,t._path,new ax,!1)),this.database=e,this._delegate=t}getKey(){return(0,F.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,F.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new la(this.database,Qm(this._delegate,e))}getParent(){(0,F.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new la(this.database,e):null}getRoot(){return(0,F.Dv)("Reference.root",0,0,arguments.length),new la(this.database,this._delegate.root)}set(e,t){(0,F.Dv)("Reference.set",1,2,arguments.length),(0,F.Wj)("Reference.set","onComplete",t,!0);const r=a1(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}update(e,t){if((0,F.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const o={};for(let u=0;u<e.length;++u)o[""+u]=e[u];e=o,LV("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ru("Reference.update",this._delegate._path),(0,F.Wj)("Reference.update","onComplete",t,!0);const r=m3(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}setWithPriority(e,t,r){(0,F.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,F.Wj)("Reference.setWithPriority","onComplete",r,!0);const o=function(n,e,t){if(ru("setWithPriority",n._path),wc("setWithPriority",e,n._path,!1),JP("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new F.BH;return t1(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&o.then(()=>r(null),u=>r(u)),o}remove(e){(0,F.Dv)("Reference.remove",0,1,arguments.length),(0,F.Wj)("Reference.remove","onComplete",e,!0);const t=function(n){return ru("remove",n._path),a1(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,F.Dv)("Reference.transaction",1,3,arguments.length),(0,F.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,F.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,F.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const o=function(n,e,t){var r;if(n=(0,F.m9)(n),ru("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const o=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,u=new F.BH,p=u1(n,()=>{});return function(n,e,t,r,o,u){eE(n,"transaction on "+e);const d={path:e,update:t,onComplete:r,status:null,order:MF(),applyLocally:u,retryCount:0,unwatcher:o,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},p=r1(n,e,void 0);d.currentInputSnapshot=p;const y=d.update(p.val());if(void 0===y)d.unwatcher(),d.currentOutputSnapshotRaw=null,d.currentOutputSnapshotResolved=null,d.onComplete&&d.onComplete(null,!1,d.currentInputSnapshot);else{$C("transaction failed: Data returned ",y,d.path),d.status=0;const w=Ix(n.transactionQueueTree_,e),D=Km(w)||[];let S;D.push(d),KP(w,D),"object"==typeof y&&null!==y&&(0,F.r3)(y,".priority")?(S=(0,F.DV)(y,".priority"),(0,F.hu)(jC(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(wx(n.serverSyncTree_,e)||Wt.EMPTY_NODE).getPriority().val();const P=qC(n),j=Cr(y,S),Y=WP(j,p,P);d.currentOutputSnapshotRaw=j,d.currentOutputSnapshotResolved=Y,d.currentWriteId=Sx(n);const ye=UP(n.serverSyncTree_,e,Y,d.currentWriteId,d.applyLocally);iu(n.eventQueue_,e,ye),xx(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(y,w,D)=>{let S=null;y?u.reject(y):(S=new Ym(D,new su(n._repo,n._path),rr),u.resolve(new eG(w,S)))},p,o),u.promise}(this._delegate,e,{applyLocally:r}).then(u=>new uG(u.committed,new bp(this.database,u.snapshot)));return t&&o.then(u=>t(null,u.committed,u.snapshot),u=>t(u,!1,null)),o}setPriority(e,t){(0,F.Dv)("Reference.setPriority",1,2,arguments.length),(0,F.Wj)("Reference.setPriority","onComplete",t,!0);const r=function(n,e){n=(0,F.m9)(n),ru("setPriority",n._path),JP("setPriority",e,!1);const t=new F.BH;return t1(n._repo,mr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}push(e,t){(0,F.Dv)("Reference.push",0,2,arguments.length),(0,F.Wj)("Reference.push","onComplete",t,!0);const r=function(n,e){n=(0,F.m9)(n),ru("push",n._path),wc("push",e,n._path,!0);const t=fV(n._repo),r=w$(t),o=Qm(n,r),u=Qm(n,r);let d;return d=null!=e?a1(u,e).then(()=>u):Promise.resolve(u),o.then=d.then.bind(d),o.catch=d.then.bind(d,void 0),o}(this._delegate,e),o=r.then(d=>new la(this.database,d));t&&o.then(()=>t(null),d=>t(d));const u=new la(this.database,r);return u.then=o.then.bind(o),u.catch=o.catch.bind(o,void 0),u}onDisconnect(){return ru("Reference.onDisconnect",this._delegate._path),new aG(new IV(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class ZC{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:G3,forceLongPolling:q3}}useEmulator(e,t,r={}){!function(n,e,t,r={}){(n=(0,F.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&yc("Cannot call useEmulator() after instance has already been initialized.");const o=n._repoInternal;let u;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&yc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),u=new DC(DC.OWNER);else if(r.mockUserToken){const d="string"==typeof r.mockUserToken?r.mockUserToken:(0,F.Sg)(r.mockUserToken,n.app.options.projectId);u=new DC(d)}!function(n,e,t,r){n.repoInfo_=new oP(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(o,e,t,u)}(this._delegate,e,t,r)}ref(e){if((0,F.Dv)("database.ref",0,1,arguments.length),e instanceof la){const t=DV(this._delegate,e.toString());return new la(this,t)}{const t=TV(this._delegate,e);return new la(this,t)}}refFromURL(e){(0,F.Dv)("database.refFromURL",1,1,arguments.length);const r=DV(this._delegate,e);return new la(this,r)}goOffline(){return(0,F.Dv)("database.goOffline",0,0,arguments.length),function(n){(n=(0,F.m9)(n))._checkNotDeleted("goOffline"),_V(n._repo)}(this._delegate)}goOnline(){return(0,F.Dv)("database.goOnline",0,0,arguments.length),function(n){(n=(0,F.m9)(n))._checkNotDeleted("goOnline"),function(n){n.persistentConnection_&&n.persistentConnection_.resume(hV)}(n._repo)}(this._delegate)}}ZC.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:n=>function(n){return{".sv":{increment:n}}}(n)};var cG=Object.freeze({__proto__:null,initStandalone:function({app:n,url:e,version:t,customAuthImpl:r,namespace:o,nodeAdmin:u=!1}){RF(t);const d=new Ha.zt("auth-internal",new Ha.H0("database-standalone"));return d.setComponent(new Ha.wA("auth-internal",()=>r,"PRIVATE")),{instance:new ZC(OV(n,d,void 0,e,u),n),namespace:o}}});const dG=ZC.ServerValue;function VV(n){return null==n}function UV(n){return"function"==typeof n.set}function BV(n,e){return UV(e)?e:n.ref(e)}function jV(n,e){if(function(n){return"string"==typeof n}(n))return e.stringCase();if(UV(n))return e.firebaseCase();if(function(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function zC(n,e,t="on",r=pw.z){return new yr.y(o=>{let u=null;return u=n[t](e,(d,p)=>{r.schedule(()=>{o.next({snapshot:d,prevKey:p})}),"once"===t&&r.schedule(()=>o.complete())},d=>{r.schedule(()=>o.error(d))}),"on"===t?{unsubscribe(){null!=u&&n.off(e,u)}}:{unsubscribe(){}}}).pipe((0,St.U)(o=>{const{snapshot:u,prevKey:d}=o;let p=null;return u.exists()&&(p=u.key),{type:e,payload:u,prevKey:d,key:p}}),(0,dj.B)())}function $V(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function _G(n,e){const{payload:t,prevKey:r,key:o}=e,u=$V(n,o),d=function(n,e){if(VV(e))return 0;{const t=$V(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let p=null;e.payload.forEach(y=>{const w={payload:y,type:"value",prevKey:p,key:y.key};return p=y.key,n=[...n,w],!1})}return n;case"child_added":if(u>-1){const p=n[u-1];(p&&p.key||null)!==r&&(n=n.filter(y=>y.payload.key!==t.key)).splice(d,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(d,0,e)}return n;case"child_removed":return n.filter(p=>p.payload.key!==t.key);case"child_changed":return n.map(p=>p.payload.key===o?e:p);case"child_moved":if(u>-1){const p=n.splice(u,1)[0];return(n=n.slice()).splice(d,0,p),n}return n;default:return n}}function HV(n){return(VV(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function GV(n,e,t){return function(n,e,t){return zC(n,"value","once",t).pipe(lr(r=>{const o=[(0,at.of)(r)];return e.forEach(u=>o.push(zC(n,u,"on",t))),(0,X.T)(...o).pipe(xa(_G,[]))}),mw())}(n,e=HV(e),t)}function qV(n,e,t){const r=(e=HV(e)).map(o=>zC(n,o,"on",t));return(0,X.T)(...r)}function WV(n,e){return function(r,o){return jV(r,{stringCase:()=>n.child(r)[e](o),firebaseCase:()=>r[e](o),snapshotCase:()=>r.ref[e](o)})}}function wG(n){return function(t){return t?jV(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function ZV(n,e){return function(){return zC(n,"value","on",e)}}!function(n){n.INTERNAL.registerComponent(new Ha.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),o=e.getProvider("database").getImmediate({identifier:t});return new ZC(o,r)},"PUBLIC").setServiceProps({Reference:la,Query:as,Database:ZC,DataSnapshot:bp,enableLogging:K3,INTERNAL:cG,ServerValue:dG}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.0")}(_w.Z);const IG=new f.OlP("angularfire2.realtimeDatabaseURL"),TG=new f.OlP("angularfire2.database.use-emulator");let DG=(()=>{class n{constructor(t,r,o,u,d,p,y,w,D,S,P,j,Y,ye,xe){this.schedulers=p;const ct=y,lt=(0,Br.on)(t,d,r);w&&Uk(lt,d,D,P,j,Y,S,ye),this.database=(0,Br.cc)(`${lt.name}.database.${o}`,"AngularFireDatabase",lt.name,()=>{const nt=d.runOutsideAngular(()=>lt.database(o||void 0));return ct&&nt.useEmulator(...ct),nt},[ct])}list(t,r){const o=this.schedulers.ngZone.runOutsideAngular(()=>BV(this.database,t));let u=o;return r&&(u=r(o)),function(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:WV(r,"update"),set:WV(r,"set"),push:o=>r.push(o),remove:wG(r),snapshotChanges:o=>GV(n,o,t).pipe(bn.iC),stateChanges:o=>qV(n,o,t).pipe(bn.iC),auditTrail:o=>function(n,e,t){return function(n,e,t){return function(n,e){return zC(n,"value","on",e).pipe((0,St.U)(t=>{let r;return t.payload.forEach(o=>(r=o.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function(...n){return e=>{let t;return"function"==typeof n[n.length-1]&&(t=n.pop()),e.lift(new fj(n,t))}}(e),(0,St.U)(([o,u])=>{const d=o.lastKeyToLoad,p=u.map(y=>y.key);return{actions:u,lastKeyToLoad:d,loadedKeys:p}}),function(n){return e=>e.lift(new mj(n))}(o=>-1===o.loadedKeys.indexOf(o.lastKeyToLoad)),(0,St.U)(o=>o.actions))}(n,qV(n,e).pipe(xa((o,u)=>[...o,u],[])),t)}(n,o,t).pipe(bn.iC),valueChanges:(o,u)=>GV(n,o,t).pipe((0,St.U)(p=>p.map(y=>u&&u.idField?Object.assign(Object.assign({},y.payload.val()),{[u.idField]:y.key}):y.payload.val())),bn.iC)}}(u,this)}object(t){return function(n,e){return{query:n,snapshotChanges:()=>ZV(n,e.schedulers.outsideAngular)().pipe(bn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>ZV(n,e.schedulers.outsideAngular)().pipe(bn.iC,(0,St.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>BV(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Br.Dh),f.LFG(Br.xv,8),f.LFG(IG,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(bn.HU),f.LFG(TG,8),f.LFG(Uv,8),f.LFG(kk,8),f.LFG(Pk,8),f.LFG(Ok,8),f.LFG(Fk,8),f.LFG(Lk,8),f.LFG(Vk,8),f.LFG(_C,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),AG=(()=>{class n{constructor(){$S.Z.registerVersion("angularfire",bn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[DG]}),n})(),SG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[_2]}),n.\u0275inj=f.cJS({providers:[dp],imports:[[Rp,fw,UR,m2,fI,Br.hO.initializeApp(yl_firebase),zU,n2,cj,AG]]}),n})();(0,f.G48)(),Di().bootstrapModule(SG).catch(n=>console.error(n))},3394:(Qe,Ee,V)=>{"use strict";V.d(Ee,{Z:()=>Ie});var f=V(3854),$=V(3910),O=V(8026),ae=V(5422);class ce{constructor(Be,fe){this._delegate=Be,this.firebase=fe,(0,O._addComponent)(Be,new $.wA("app-compat",()=>this,"PUBLIC")),this.container=Be.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Be){this._delegate.automaticDataCollectionEnabled=Be}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Be=>{this._delegate.checkDestroyed(),Be()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(Be,fe=O._DEFAULT_ENTRY_NAME){var De;this._delegate.checkDestroyed();const Ne=this._delegate.container.getProvider(Be);return!Ne.isInitialized()&&"EXPLICIT"===(null===(De=Ne.getComponent())||void 0===De?void 0:De.instantiationMode)&&Ne.initialize(),Ne.getImmediate({identifier:fe})}_removeServiceInstance(Be,fe=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Be).clearInstance(fe)}_addComponent(Be){(0,O._addComponent)(this._delegate,Be)}_addOrOverwriteComponent(Be){(0,O._addOrOverwriteComponent)(this._delegate,Be)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const be=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),U=function oe(){const we=function(we){const Be={},fe={__esModule:!0,initializeApp:function(vt,Oe={}){const Fe=O.initializeApp(vt,Oe);if((0,f.r3)(Be,Fe.name))return Be[Fe.name];const $e=new we(Fe,fe);return Be[Fe.name]=$e,$e},app:Ne,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function(vt){const Oe=vt.name,Fe=Oe.replace("-compat","");if(O._registerComponent(vt)&&"PUBLIC"===vt.type){const $e=(mt=Ne())=>{if("function"!=typeof mt[Fe])throw be.create("invalid-app-argument",{appName:Oe});return mt[Fe]()};void 0!==vt.serviceProps&&(0,f.ZB)($e,vt.serviceProps),fe[Fe]=$e,we.prototype[Fe]=function(...mt){return this._getService.bind(this,Oe).apply(this,vt.multipleInstances?mt:[])}}return"PUBLIC"===vt.type?fe[Fe]:null},removeApp:function(vt){delete Be[vt]},useAsService:function(vt,Oe){return"serverAuth"===Oe?null:Oe},modularAPIs:O}};function Ne(vt){if(!(0,f.r3)(Be,vt=vt||O._DEFAULT_ENTRY_NAME))throw be.create("no-app",{appName:vt});return Be[vt]}return fe.default=fe,Object.defineProperty(fe,"apps",{get:function(){return Object.keys(Be).map(vt=>Be[vt])}}),Ne.App=we,fe}(ce);return we.INTERNAL=Object.assign(Object.assign({},we.INTERNAL),{createFirebaseNamespace:oe,extendNamespace:function(fe){(0,f.ZB)(we,fe)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),we}(),H=new ae.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const we=self.firebase.SDK_VERSION;we&&we.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ie=U;(0,O.registerVersion)("@firebase/app-compat","0.1.26",undefined)},8026:(Qe,Ee,V)=>{"use strict";V.r(Ee),V.d(Ee,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>Zr,_DEFAULT_ENTRY_NAME:()=>qr,_addComponent:()=>Wi,_addOrOverwriteComponent:()=>us,_apps:()=>Gt,_clearComponents:()=>Wn,_components:()=>Wr,_getProvider:()=>Ts,_registerComponent:()=>Yt,_removeServiceInstance:()=>Rn,deleteApp:()=>cr,getApp:()=>Me,getApps:()=>Zn,initializeApp:()=>zr,onLog:()=>Nn,registerVersion:()=>Qt,setLogLevel:()=>zn});var f=V(8239),$=V(3910),O=V(5422),ae=V(3854),ce=V(4544);class ne{constructor(ie){this.container=ie}getPlatformInfoString(){return this.container.getProviders().map(Pe=>{if(function(Z){const ie=Z.getComponent();return"VERSION"===(null==ie?void 0:ie.type)}(Pe)){const Ze=Pe.getImmediate();return`${Ze.library}/${Ze.version}`}return null}).filter(Pe=>Pe).join(" ")}}const te="@firebase/app",U=new O.Yd("@firebase/app"),qr="[DEFAULT]",Ln={[te]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Gt=new Map,Wr=new Map;function Wi(Z,ie){try{Z.container.addComponent(ie)}catch(Pe){U.debug(`Component ${ie.name} failed to register with FirebaseApp ${Z.name}`,Pe)}}function us(Z,ie){Z.container.addOrOverwriteComponent(ie)}function Yt(Z){const ie=Z.name;if(Wr.has(ie))return U.debug(`There were multiple attempts to register component ${ie}.`),!1;Wr.set(ie,Z);for(const Pe of Gt.values())Wi(Pe,Z);return!0}function Ts(Z,ie){const Pe=Z.container.getProvider("heartbeat").getImmediate({optional:!0});return Pe&&Pe.triggerHeartbeat(),Z.container.getProvider(ie)}function Rn(Z,ie,Pe=qr){Ts(Z,ie).clearInstance(Pe)}function Wn(){Wr.clear()}const mn=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class zs{constructor(ie,Pe,Ze){this._isDeleted=!1,this._options=Object.assign({},ie),this._config=Object.assign({},Pe),this._name=Pe.name,this._automaticDataCollectionEnabled=Pe.automaticDataCollectionEnabled,this._container=Ze,this.container.addComponent(new $.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ie){this.checkDestroyed(),this._automaticDataCollectionEnabled=ie}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ie){this._isDeleted=ie}checkDestroyed(){if(this.isDeleted)throw mn.create("app-deleted",{appName:this._name})}}const Zr="9.8.2";function zr(Z,ie={}){"object"!=typeof ie&&(ie={name:ie});const Pe=Object.assign({name:qr,automaticDataCollectionEnabled:!1},ie),Ze=Pe.name;if("string"!=typeof Ze||!Ze)throw mn.create("bad-app-name",{appName:String(Ze)});const ht=Gt.get(Ze);if(ht){if((0,ae.vZ)(Z,ht.options)&&(0,ae.vZ)(Pe,ht.config))return ht;throw mn.create("duplicate-app",{appName:Ze})}const xt=new $.H0(Ze);for(const Tt of Wr.values())xt.addComponent(Tt);const yn=new zs(Z,Pe,xt);return Gt.set(Ze,yn),yn}function Me(Z=qr){const ie=Gt.get(Z);if(!ie)throw mn.create("no-app",{appName:Z});return ie}function Zn(){return Array.from(Gt.values())}function cr(Z){return et.apply(this,arguments)}function et(){return(et=(0,f.Z)(function*(Z){const ie=Z.name;Gt.has(ie)&&(Gt.delete(ie),yield Promise.all(Z.container.getProviders().map(Pe=>Pe.delete())),Z.isDeleted=!0)})).apply(this,arguments)}function Qt(Z,ie,Pe){var Ze;let ht=null!==(Ze=Ln[Z])&&void 0!==Ze?Ze:Z;Pe&&(ht+=`-${Pe}`);const xt=ht.match(/\s|\//),yn=ie.match(/\s|\//);if(xt||yn){const Tt=[`Unable to register library "${ht}" with version "${ie}":`];return xt&&Tt.push(`library name "${ht}" contains illegal characters (whitespace or "/")`),xt&&yn&&Tt.push("and"),yn&&Tt.push(`version name "${ie}" contains illegal characters (whitespace or "/")`),void U.warn(Tt.join(" "))}Yt(new $.wA(`${ht}-version`,()=>({library:ht,version:ie}),"VERSION"))}function Nn(Z,ie){if(null!==Z&&"function"!=typeof Z)throw mn.create("invalid-log-argument");(0,O.Am)(Z,ie)}function zn(Z){(0,O.Ub)(Z)}const Vn="firebase-heartbeat-store";let _n=null;function Co(){return _n||(_n=(0,ce.X3)("firebase-heartbeat-database",1,{upgrade:(Z,ie)=>{switch(ie){case 0:Z.createObjectStore(Vn)}}}).catch(Z=>{throw mn.create("storage-open",{originalErrorMessage:Z.message})})),_n}function qe(){return(qe=(0,f.Z)(function*(Z){try{return(yield Co()).transaction(Vn).objectStore(Vn).get(oi(Z))}catch(ie){throw mn.create("storage-get",{originalErrorMessage:ie.message})}})).apply(this,arguments)}function ot(Z,ie){return ls.apply(this,arguments)}function ls(){return(ls=(0,f.Z)(function*(Z,ie){try{const Ze=(yield Co()).transaction(Vn,"readwrite");return yield Ze.objectStore(Vn).put(ie,oi(Z)),Ze.done}catch(Pe){throw mn.create("storage-set",{originalErrorMessage:Pe.message})}})).apply(this,arguments)}function oi(Z){return`${Z.name}!${Z.options.appId}`}class sr{constructor(ie){this.container=ie,this._heartbeatsCache=null;const Pe=this.container.getProvider("app").getImmediate();this._storage=new G(Pe),this._heartbeatsCachePromise=this._storage.read().then(Ze=>(this._heartbeatsCache=Ze,Ze))}triggerHeartbeat(){var ie=this;return(0,f.Z)(function*(){const Ze=ie.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ht=$n();if(null===ie._heartbeatsCache&&(ie._heartbeatsCache=yield ie._heartbeatsCachePromise),ie._heartbeatsCache.lastSentHeartbeatDate!==ht&&!ie._heartbeatsCache.heartbeats.some(xt=>xt.date===ht))return ie._heartbeatsCache.heartbeats.push({date:ht,agent:Ze}),ie._heartbeatsCache.heartbeats=ie._heartbeatsCache.heartbeats.filter(xt=>{const yn=new Date(xt.date).valueOf();return Date.now()-yn<=2592e6}),ie._storage.overwrite(ie._heartbeatsCache)})()}getHeartbeatsHeader(){var ie=this;return(0,f.Z)(function*(){if(null===ie._heartbeatsCache&&(yield ie._heartbeatsCachePromise),null===ie._heartbeatsCache||0===ie._heartbeatsCache.heartbeats.length)return"";const Pe=$n(),{heartbeatsToSend:Ze,unsentEntries:ht}=function(Z,ie=1024){const Pe=[];let Ze=Z.slice();for(const ht of Z){const xt=Pe.find(yn=>yn.agent===ht.agent);if(xt){if(xt.dates.push(ht.date),Q(Pe)>ie){xt.dates.pop();break}}else if(Pe.push({agent:ht.agent,dates:[ht.date]}),Q(Pe)>ie){Pe.pop();break}Ze=Ze.slice(1)}return{heartbeatsToSend:Pe,unsentEntries:Ze}}(ie._heartbeatsCache.heartbeats),xt=(0,ae.L)(JSON.stringify({version:2,heartbeats:Ze}));return ie._heartbeatsCache.lastSentHeartbeatDate=Pe,ht.length>0?(ie._heartbeatsCache.heartbeats=ht,yield ie._storage.overwrite(ie._heartbeatsCache)):(ie._heartbeatsCache.heartbeats=[],ie._storage.overwrite(ie._heartbeatsCache)),xt})()}}function $n(){return(new Date).toISOString().substring(0,10)}class G{constructor(ie){this.app=ie,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ie=this;return(0,f.Z)(function*(){return(yield ie._canUseIndexedDBPromise)&&(yield function(Z){return qe.apply(this,arguments)}(ie.app))||{heartbeats:[]}})()}overwrite(ie){var Pe=this;return(0,f.Z)(function*(){var Ze;if(yield Pe._canUseIndexedDBPromise){const xt=yield Pe.read();return ot(Pe.app,{lastSentHeartbeatDate:null!==(Ze=ie.lastSentHeartbeatDate)&&void 0!==Ze?Ze:xt.lastSentHeartbeatDate,heartbeats:ie.heartbeats})}})()}add(ie){var Pe=this;return(0,f.Z)(function*(){var Ze;if(yield Pe._canUseIndexedDBPromise){const xt=yield Pe.read();return ot(Pe.app,{lastSentHeartbeatDate:null!==(Ze=ie.lastSentHeartbeatDate)&&void 0!==Ze?Ze:xt.lastSentHeartbeatDate,heartbeats:[...xt.heartbeats,...ie.heartbeats]})}})()}}function Q(Z){return(0,ae.L)(JSON.stringify({version:2,heartbeats:Z})).length}Yt(new $.wA("platform-logger",ie=>new ne(ie),"PRIVATE")),Yt(new $.wA("heartbeat",ie=>new sr(ie),"PRIVATE")),Qt(te,"0.7.25",""),Qt(te,"0.7.25","esm2017"),Qt("fire-js","")},3910:(Qe,Ee,V)=>{"use strict";V.d(Ee,{wA:()=>O,H0:()=>te,zt:()=>ce});var f=V(8239),$=V(3854);class O{constructor(U,H,W){this.name=U,this.instanceFactory=H,this.type=W,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(U){return this.instantiationMode=U,this}setMultipleInstances(U){return this.multipleInstances=U,this}setServiceProps(U){return this.serviceProps=U,this}setInstanceCreatedCallback(U){return this.onInstanceCreated=U,this}}const ae="[DEFAULT]";class ce{constructor(U,H){this.name=U,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(U){const H=this.normalizeInstanceIdentifier(U);if(!this.instancesDeferred.has(H)){const W=new $.BH;if(this.instancesDeferred.set(H,W),this.isInitialized(H)||this.shouldAutoInitialize())try{const le=this.getOrInitializeService({instanceIdentifier:H});le&&W.resolve(le)}catch(le){}}return this.instancesDeferred.get(H).promise}getImmediate(U){var H;const W=this.normalizeInstanceIdentifier(null==U?void 0:U.identifier),le=null!==(H=null==U?void 0:U.optional)&&void 0!==H&&H;if(!this.isInitialized(W)&&!this.shouldAutoInitialize()){if(le)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:W})}catch(pe){if(le)return null;throw pe}}getComponent(){return this.component}setComponent(U){if(U.name!==this.name)throw Error(`Mismatching Component ${U.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=U,this.shouldAutoInitialize()){if("EAGER"===U.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:ae})}catch(H){}for(const[H,W]of this.instancesDeferred.entries()){const le=this.normalizeInstanceIdentifier(H);try{const pe=this.getOrInitializeService({instanceIdentifier:le});W.resolve(pe)}catch(pe){}}}}clearInstance(U=ae){this.instancesDeferred.delete(U),this.instancesOptions.delete(U),this.instances.delete(U)}delete(){var U=this;return(0,f.Z)(function*(){const H=Array.from(U.instances.values());yield Promise.all([...H.filter(W=>"INTERNAL"in W).map(W=>W.INTERNAL.delete()),...H.filter(W=>"_delete"in W).map(W=>W._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(U=ae){return this.instances.has(U)}getOptions(U=ae){return this.instancesOptions.get(U)||{}}initialize(U={}){const{options:H={}}=U,W=this.normalizeInstanceIdentifier(U.instanceIdentifier);if(this.isInitialized(W))throw Error(`${this.name}(${W}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const le=this.getOrInitializeService({instanceIdentifier:W,options:H});for(const[pe,Ie]of this.instancesDeferred.entries())W===this.normalizeInstanceIdentifier(pe)&&Ie.resolve(le);return le}onInit(U,H){var W;const le=this.normalizeInstanceIdentifier(H),pe=null!==(W=this.onInitCallbacks.get(le))&&void 0!==W?W:new Set;pe.add(U),this.onInitCallbacks.set(le,pe);const Ie=this.instances.get(le);return Ie&&U(Ie,le),()=>{pe.delete(U)}}invokeOnInitCallbacks(U,H){const W=this.onInitCallbacks.get(H);if(W)for(const le of W)try{le(U,H)}catch(pe){}}getOrInitializeService({instanceIdentifier:U,options:H={}}){let W=this.instances.get(U);if(!W&&this.component&&(W=this.component.instanceFactory(this.container,{instanceIdentifier:(oe=U,oe===ae?void 0:oe),options:H}),this.instances.set(U,W),this.instancesOptions.set(U,H),this.invokeOnInitCallbacks(W,U),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,U,W)}catch(le){}var oe;return W||null}normalizeInstanceIdentifier(U=ae){return this.component?this.component.multipleInstances?U:ae:U}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class te{constructor(U){this.name=U,this.providers=new Map}addComponent(U){const H=this.getProvider(U.name);if(H.isComponentSet())throw new Error(`Component ${U.name} has already been registered with ${this.name}`);H.setComponent(U)}addOrOverwriteComponent(U){this.getProvider(U.name).isComponentSet()&&this.providers.delete(U.name),this.addComponent(U)}getProvider(U){if(this.providers.has(U))return this.providers.get(U);const H=new ce(U,this);return this.providers.set(U,H),H}getProviders(){return Array.from(this.providers.values())}}},5422:(Qe,Ee,V)=>{"use strict";V.d(Ee,{in:()=>$,Yd:()=>be,Ub:()=>te,Am:()=>oe});const f=[];var $=(()=>{return(U=$||($={}))[U.DEBUG=0]="DEBUG",U[U.VERBOSE=1]="VERBOSE",U[U.INFO=2]="INFO",U[U.WARN=3]="WARN",U[U.ERROR=4]="ERROR",U[U.SILENT=5]="SILENT",$;var U})();const O={debug:$.DEBUG,verbose:$.VERBOSE,info:$.INFO,warn:$.WARN,error:$.ERROR,silent:$.SILENT},ae=$.INFO,ce={[$.DEBUG]:"log",[$.VERBOSE]:"log",[$.INFO]:"info",[$.WARN]:"warn",[$.ERROR]:"error"},ne=(U,H,...W)=>{if(H<U.logLevel)return;const le=(new Date).toISOString(),pe=ce[H];if(!pe)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[pe](`[${le}]  ${U.name}:`,...W)};class be{constructor(H){this.name=H,this._logLevel=ae,this._logHandler=ne,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in $))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?O[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,$.DEBUG,...H),this._logHandler(this,$.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,$.VERBOSE,...H),this._logHandler(this,$.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,$.INFO,...H),this._logHandler(this,$.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,$.WARN,...H),this._logHandler(this,$.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,$.ERROR,...H),this._logHandler(this,$.ERROR,...H)}}function te(U){f.forEach(H=>{H.setLogLevel(U)})}function oe(U,H){for(const W of f){let le=null;H&&H.level&&(le=O[H.level]),W.userLogHandler=null===U?null:(pe,Ie,...we)=>{const Be=we.map(fe=>{if(null==fe)return null;if("string"==typeof fe)return fe;if("number"==typeof fe||"boolean"==typeof fe)return fe.toString();if(fe instanceof Error)return fe.message;try{return JSON.stringify(fe)}catch(De){return null}}).filter(fe=>fe).join(" ");Ie>=(null!=le?le:pe.logLevel)&&U({level:$[Ie].toLowerCase(),message:Be,args:we,type:pe.name})}}}},4544:(Qe,Ee,V)=>{"use strict";V.d(Ee,{Lj:()=>Xe,X3:()=>Ne});var f=V(8239);let O,ae;const be=new WeakMap,te=new WeakMap,oe=new WeakMap,U=new WeakMap,H=new WeakMap;let pe={get(Oe,Fe,$e){if(Oe instanceof IDBTransaction){if("done"===Fe)return te.get(Oe);if("objectStoreNames"===Fe)return Oe.objectStoreNames||oe.get(Oe);if("store"===Fe)return $e.objectStoreNames[1]?void 0:$e.objectStore($e.objectStoreNames[0])}return fe(Oe[Fe])},set:(Oe,Fe,$e)=>(Oe[Fe]=$e,!0),has:(Oe,Fe)=>Oe instanceof IDBTransaction&&("done"===Fe||"store"===Fe)||Fe in Oe};function Be(Oe){return"function"==typeof Oe?function(Oe){return Oe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(Oe)?function(...Fe){return Oe.apply(De(this),Fe),fe(be.get(this))}:function(...Fe){return fe(Oe.apply(De(this),Fe))}:function(Fe,...$e){const mt=Oe.call(De(this),Fe,...$e);return oe.set(mt,Fe.sort?Fe.sort():[Fe]),fe(mt)}}(Oe):(Oe instanceof IDBTransaction&&function(Oe){if(te.has(Oe))return;const Fe=new Promise(($e,mt)=>{const rt=()=>{Oe.removeEventListener("complete",Et),Oe.removeEventListener("error",Ge),Oe.removeEventListener("abort",Ge)},Et=()=>{$e(),rt()},Ge=()=>{mt(Oe.error||new DOMException("AbortError","AbortError")),rt()};Oe.addEventListener("complete",Et),Oe.addEventListener("error",Ge),Oe.addEventListener("abort",Ge)});te.set(Oe,Fe)}(Oe),((Oe,Fe)=>Fe.some($e=>Oe instanceof $e))(Oe,O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(Oe,pe):Oe)}function fe(Oe){if(Oe instanceof IDBRequest)return function(Oe){const Fe=new Promise(($e,mt)=>{const rt=()=>{Oe.removeEventListener("success",Et),Oe.removeEventListener("error",Ge)},Et=()=>{$e(fe(Oe.result)),rt()},Ge=()=>{mt(Oe.error),rt()};Oe.addEventListener("success",Et),Oe.addEventListener("error",Ge)});return Fe.then($e=>{$e instanceof IDBCursor&&be.set($e,Oe)}).catch(()=>{}),H.set(Fe,Oe),Fe}(Oe);if(U.has(Oe))return U.get(Oe);const Fe=Be(Oe);return Fe!==Oe&&(U.set(Oe,Fe),H.set(Fe,Oe)),Fe}const De=Oe=>H.get(Oe);function Ne(Oe,Fe,{blocked:$e,upgrade:mt,blocking:rt,terminated:Et}={}){const Ge=indexedDB.open(Oe,Fe),Lr=fe(Ge);return mt&&Ge.addEventListener("upgradeneeded",Ir=>{mt(fe(Ge.result),Ir.oldVersion,Ir.newVersion,fe(Ge.transaction))}),$e&&Ge.addEventListener("blocked",()=>$e()),Lr.then(Ir=>{Et&&Ir.addEventListener("close",()=>Et()),rt&&Ir.addEventListener("versionchange",()=>rt())}).catch(()=>{}),Lr}function Xe(Oe,{blocked:Fe}={}){const $e=indexedDB.deleteDatabase(Oe);return Fe&&$e.addEventListener("blocked",()=>Fe()),fe($e).then(()=>{})}const dt=["get","getKey","getAll","getAllKeys","count"],Zt=["put","add","delete","clear"],Vt=new Map;function vt(Oe,Fe){if(!(Oe instanceof IDBDatabase)||Fe in Oe||"string"!=typeof Fe)return;if(Vt.get(Fe))return Vt.get(Fe);const $e=Fe.replace(/FromIndex$/,""),mt=Fe!==$e,rt=Zt.includes($e);if(!($e in(mt?IDBIndex:IDBObjectStore).prototype)||!rt&&!dt.includes($e))return;const Et=function(){var Ge=(0,f.Z)(function*(Lr,...Ir){const qi=this.transaction(Lr,rt?"readwrite":"readonly");let qr=qi.store;return mt&&(qr=qr.index(Ir.shift())),(yield Promise.all([qr[$e](...Ir),rt&&qi.done]))[0]});return function(Ir){return Ge.apply(this,arguments)}}();return Vt.set(Fe,Et),Et}var Oe;pe=QV(YV({},Oe=pe),{get:(Fe,$e,mt)=>vt(Fe,$e)||Oe.get(Fe,$e,mt),has:(Fe,$e)=>!!vt(Fe,$e)||Oe.has(Fe,$e)})},8239:(Qe,Ee,V)=>{"use strict";function f(O,ae,ce,ne,be,te,oe){try{var U=O[te](oe),H=U.value}catch(W){return void ce(W)}U.done?ae(H):Promise.resolve(H).then(ne,be)}function $(O){return function(){var ae=this,ce=arguments;return new Promise(function(ne,be){var te=O.apply(ae,ce);function oe(H){f(te,ne,be,oe,U,"next",H)}function U(H){f(te,ne,be,oe,U,"throw",H)}oe(void 0)})}}V.d(Ee,{Z:()=>$})}},Qe=>{Qe(Qe.s=6944)}]);