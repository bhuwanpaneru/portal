var AG=Object.defineProperty,SG=Object.defineProperties,xG=Object.getOwnPropertyDescriptors,ZV=Object.getOwnPropertySymbols,RG=Object.prototype.hasOwnProperty,NG=Object.prototype.propertyIsEnumerable,zV=(Qe,Ee,V)=>Ee in Qe?AG(Qe,Ee,{enumerable:!0,configurable:!0,writable:!0,value:V}):Qe[Ee]=V,KV=(Qe,Ee)=>{for(var V in Ee||(Ee={}))RG.call(Ee,V)&&zV(Qe,V,Ee[V]);if(ZV)for(var V of ZV(Ee))NG.call(Ee,V)&&zV(Qe,V,Ee[V]);return Qe},YV=(Qe,Ee)=>SG(Qe,xG(Ee));(self.webpackChunkportal=self.webpackChunkportal||[]).push([[179],{8255:Qe=>{function Ee(V){return Promise.resolve().then(()=>{var f=new Error("Cannot find module '"+V+"'");throw f.code="MODULE_NOT_FOUND",f})}Ee.keys=()=>[],Ee.resolve=Ee,Ee.id=8255,Qe.exports=Ee},7716:(Qe,Ee,V)=>{"use strict";V.d(Ee,{deG:()=>Vh,tb:()=>yv,AFp:()=>W0,ip1:()=>mc,CZH:()=>ia,hGG:()=>iO,z2F:()=>up,sBO:()=>fD,Sil:()=>ih,_Vd:()=>Bd,EJc:()=>Ev,SBq:()=>Ya,qLn:()=>sf,vpe:()=>ra,gxx:()=>Zl,tBr:()=>Tu,XFs:()=>et,OlP:()=>Mn,zs3:()=>Xn,ZZ4:()=>Yg,aQg:()=>By,soG:()=>vv,YKP:()=>oc,v3s:()=>DM,h0i:()=>Qo,PXZ:()=>pb,R0b:()=>Vs,FiY:()=>Rs,Lbi:()=>_v,g9A:()=>mv,Qsj:()=>mN,FYo:()=>Zu,JOm:()=>ja,Tiy:()=>Jw,q3G:()=>Ke,tp0:()=>Vn,EAV:()=>Eb,Rgc:()=>Xg,dDg:()=>BA,DyG:()=>Ma,q4F:()=>zg,GfV:()=>Fy,s_b:()=>ac,ifc:()=>qe,eFA:()=>Cv,G48:()=>lb,Gpc:()=>H,X6Q:()=>ub,_c5:()=>iS,VLi:()=>ob,c2e:()=>NA,zSh:()=>ff,wAp:()=>yt,vHH:()=>Te,EiD:()=>_e,mCW:()=>Va,qzn:()=>Ul,JVY:()=>cE,pB0:()=>jo,eBb:()=>dd,L6k:()=>o_,LAX:()=>Yp,cg1:()=>rc,Tjo:()=>NM,kL8:()=>kT,yhl:()=>s_,dqk:()=>_t,sIi:()=>wd,CqO:()=>ry,QGY:()=>Sf,F4k:()=>xf,RDi:()=>Lc,AaK:()=>te,z3N:()=>Bo,qOj:()=>mf,TTD:()=>bo,_Bn:()=>nD,xp6:()=>NE,uIk:()=>_w,ekj:()=>py,Suo:()=>Jd,Xpm:()=>yn,lG2:()=>Mt,Yz7:()=>Kt,cJS:()=>Dn,oAB:()=>K,Yjl:()=>kt,Y36:()=>Bu,_UZ:()=>ey,qZA:()=>X_,TgZ:()=>Df,EpF:()=>ny,n5z:()=>Nl,Ikx:()=>wy,LFG:()=>Jn,$8M:()=>bu,NdJ:()=>Tw,CRH:()=>ov,Q6J:()=>Ii,s9C:()=>Rf,iGM:()=>aA,MAs:()=>WI,CHM:()=>lu,LSH:()=>Rr,kYT:()=>Ae,YNc:()=>bf,_uU:()=>Ff,Oqu:()=>Nd});var f=V(9765),$=V(5319),O=V(7574),ae=V(6682),ce=V(8819);function ne(i){for(let s in i)if(i[s]===ne)return s;throw Error("Could not find renamed property on target object.")}function Ce(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function te(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(te).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function oe(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const U=ne({__forward_ref__:ne});function H(i){return i.__forward_ref__=H,i.toString=function(){return te(this())},i}function W(i){return le(i)?i():i}function le(i){return"function"==typeof i&&i.hasOwnProperty(U)&&i.__forward_ref__===H}class Te extends Error{constructor(s,a){super(function(i,s){return`${i?`NG0${i}: `:""}${s}`}(s,a)),this.code=s}}function fe(i){return"string"==typeof i?i:null==i?"":String(i)}function De(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():fe(i)}function qt(i,s){const a=s?` in ${s}`:"";throw new Te("201",`No provider for ${De(i)} found${a}`)}function Pn(i,s){null==i&&function(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function Kt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Dn(i){return{providers:i.providers||[],imports:i.imports||[]}}function Gn(i){return gn(i,Xr)||gn(i,qn)}function gn(i,s){return i.hasOwnProperty(s)?i[s]:null}function Jr(i){return i&&(i.hasOwnProperty(Me)||i.hasOwnProperty(cr))?i[Me]:null}const Xr=ne({\u0275prov:ne}),Me=ne({\u0275inj:ne}),qn=ne({ngInjectableDef:ne}),cr=ne({ngInjectorDef:ne});var et=(()=>((et=et||{})[et.Default=0]="Default",et[et.Host=1]="Host",et[et.Self=2]="Self",et[et.SkipSelf=4]="SkipSelf",et[et.Optional=8]="Optional",et))();let Yt;function Wn(i){const s=Yt;return Yt=i,s}function Zn(i,s,a){const l=Gn(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&et.Optional?null:void 0!==s?s:void qt(te(i),"Injector")}function On(i){return{toString:i}.toString()}var _n=(()=>((_n=_n||{})[_n.OnPush=0]="OnPush",_n[_n.Default=1]="Default",_n))(),qe=(()=>((qe=qe||{})[qe.Emulated=0]="Emulated",qe[qe.None=2]="None",qe[qe.ShadowDom=3]="ShadowDom",qe))();const at="undefined"!=typeof globalThis&&globalThis,as="undefined"!=typeof window&&window,di="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,_t=at||"undefined"!=typeof global&&global||as||di,z={},G=[],J=ne({\u0275cmp:ne}),ve=ne({\u0275dir:ne}),Z=ne({\u0275pipe:ne}),ie=ne({\u0275mod:ne}),Pe=ne({\u0275loc:ne}),ze=ne({\u0275fac:ne}),ht=ne({__NG_ELEMENT_ID__:ne});let xt=0;function yn(i){return On(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===_n.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||G,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||qe.Emulated,id:"c",styles:i.styles||G,_:null,setInput:null,schemas:i.schemas||null,tView:null},d=i.directives,h=i.features,m=i.pipes;return l.id+=xt++,l.inputs=He(i.inputs,a),l.outputs=He(i.outputs),h&&h.forEach(v=>v(l)),l.directiveDefs=d?()=>("function"==typeof d?d():d).map(dr):null,l.pipeDefs=m?()=>("function"==typeof m?m():m).map(de):null,l})}function dr(i){return Tt(i)||function(i){return i[ve]||null}(i)}function de(i){return function(i){return i[Z]||null}(i)}const ee={};function K(i){return On(()=>{const s={type:i.type,bootstrap:i.bootstrap||G,declarations:i.declarations||G,imports:i.imports||G,exports:i.exports||G,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(ee[i.id]=i.type),s})}function Ae(i,s){return On(()=>{const a=Ln(i,!0);a.declarations=s.declarations||G,a.imports=s.imports||G,a.exports=s.exports||G})}function He(i,s){if(null==i)return z;const a={};for(const l in i)if(i.hasOwnProperty(l)){let d=i[l],h=d;Array.isArray(d)&&(h=d[1],d=d[0]),a[d]=l,s&&(s[d]=h)}return a}const Mt=yn;function kt(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Tt(i){return i[J]||null}function Ln(i,s){const a=i[ie]||null;if(!a&&!0===s)throw new Error(`Type ${te(i)} does not have '\u0275mod' property.`);return a}function Zs(i){return Array.isArray(i)&&"object"==typeof i[1]}function ln(i){return Array.isArray(i)&&!0===i[1]}function Rc(i){return 0!=(8&i.flags)}function gl(i){return 2==(2&i.flags)}function au(i){return 1==(1&i.flags)}function us(i){return null!==i.template}function Ri(i){return 0!=(512&i[2])}function Ks(i,s){return i.hasOwnProperty(ze)?i[ze]:null}class Oc{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function bo(){return Ki}function Ki(i){return i.type.prototype.ngOnChanges&&(i.setInput=ya),Ah}function Ah(){const i=Mp(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===z)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function ya(i,s,a,l){const d=Mp(i)||function(i,s){return i[or]=s}(i,{previous:z,current:null}),h=d.current||(d.current={}),m=d.previous,v=this.declaredInputs[a],w=m[v];h[v]=new Oc(w&&w.currentValue,s,m===z),i[l]=s}bo.ngInherit=!0;const or="__ngSimpleChanges__";function Mp(i){return i[or]||null}let yl;function Lc(i){yl=i}function Nn(i){return!!i.listen}const To={createRenderer:(i,s)=>void 0!==yl?yl:"undefined"!=typeof document?document:void 0};function Xt(i){for(;Array.isArray(i);)i=i[0];return i}function wa(i,s){return Xt(s[i])}function Ni(i,s){return Xt(s[i.index])}function Vc(i,s){return i.data[s]}function mi(i,s){const a=s[i];return Zs(a)?a:a[0]}function ba(i){return 4==(4&i[2])}function Uc(i){return 128==(128&i[2])}function Qi(i,s){return null==s?null:i[s]}function jr(i){i[18]=0}function Ca(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const wt={lFrame:Pp(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function $c(){return wt.bindingsEnabled}function Se(){return wt.lFrame.lView}function Ft(){return wt.lFrame.tView}function lu(i){return wt.lFrame.contextLView=i,i[8]}function Cn(){let i=cu();for(;null!==i&&64===i.type;)i=i.parent;return i}function cu(){return wt.lFrame.currentTNode}function ni(i,s){const a=wt.lFrame;a.currentTNode=i,a.isParent=s}function So(){return wt.lFrame.isParent}function du(){return wt.isInCheckNoChangesMode}function Ys(i){wt.isInCheckNoChangesMode=i}function ls(){return wt.lFrame.bindingIndex++}function qc(i,s){const a=wt.lFrame;a.bindingIndex=a.bindingRootIndex=i,Wc(s)}function Wc(i){wt.lFrame.currentDirectiveIndex=i}function Mh(){return wt.lFrame.currentQueryIndex}function No(i){wt.lFrame.currentQueryIndex=i}function fu(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function pu(i,s,a){if(a&et.SkipSelf){let d=s,h=i;for(;!(d=d.parent,null!==d||a&et.Host||(d=fu(h),null===d||(h=h[15],10&d.type))););if(null===d)return!1;s=d,i=h}const l=wt.lFrame=bl();return l.currentTNode=s,l.lView=i,!0}function gu(i){const s=bl(),a=i[1];wt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function bl(){const i=wt.lFrame,s=null===i?null:i.child;return null===s?Pp(i):s}function Pp(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Cl(){const i=wt.lFrame;return wt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const kh=Cl;function Mo(){const i=Cl();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Sr(){return wt.lFrame.selectedIndex}function Qs(i){wt.lFrame.selectedIndex=i}function Kn(){const i=wt.lFrame;return Vc(i.tView,i.selectedIndex)}function Ta(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const h=i.data[a].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:v,ngAfterViewInit:w,ngAfterViewChecked:T,ngOnDestroy:x}=h;m&&(i.contentHooks||(i.contentHooks=[])).push(-a,m),v&&((i.contentHooks||(i.contentHooks=[])).push(a,v),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,v)),w&&(i.viewHooks||(i.viewHooks=[])).push(-a,w),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=x&&(i.destroyHooks||(i.destroyHooks=[])).push(a,x)}}function Da(i,s,a){mu(i,s,3,a)}function ko(i,s,a,l){(3&i[2])===a&&mu(i,s,a,l)}function ur(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function mu(i,s,a,l){const h=null!=l?l:-1,m=s.length-1;let v=0;for(let w=void 0!==l?65535&i[18]:0;w<m;w++)if("number"==typeof s[w+1]){if(v=s[w],null!=l&&v>=l)break}else s[w]<0&&(i[18]+=65536),(v<h||-1==h)&&(Op(i,a,s,w),i[18]=(4294901760&i[18])+w+2),w++}function Op(i,s,a,l){const d=a[l]<0,h=a[l+1],v=i[d?-a[l]:a[l]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{h.call(v)}finally{}}}else try{h.call(v)}finally{}}class _u{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function Qc(i,s,a){const l=Nn(i);let d=0;for(;d<a.length;){const h=a[d];if("number"==typeof h){if(0!==h)break;d++;const m=a[d++],v=a[d++],w=a[d++];l?i.setAttribute(s,v,w,m):s.setAttributeNS(m,v,w)}else{const m=h,v=a[++d];Ts(m)?l&&i.setProperty(s,m,v):l?i.setAttribute(s,m,v):s.setAttribute(m,v),d++}}return d}function Vp(i){return 3===i||4===i||6===i}function Ts(i){return 64===i.charCodeAt(0)}function Sl(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const d=s[l];"number"==typeof d?a=d:0===a||Up(i,a,d,null,-1===a||2===a?s[++l]:null)}}return i}function Up(i,s,a,l,d){let h=0,m=i.length;if(-1===s)m=-1;else for(;h<i.length;){const v=i[h++];if("number"==typeof v){if(v===s){m=-1;break}if(v>s){m=h-1;break}}}for(;h<i.length;){const v=i[h];if("number"==typeof v)break;if(v===a){if(null===l)return void(null!==d&&(i[h+1]=d));if(l===i[h+1])return void(i[h+2]=d)}h++,null!==l&&h++,null!==d&&h++}-1!==m&&(i.splice(m,0,s),h=m+1),i.splice(h++,0,a),null!==l&&i.splice(h++,0,l),null!==d&&i.splice(h++,0,d)}function Jc(i){return-1!==i}function Xs(i){return 32767&i}function Aa(i,s){let a=function(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let yu=!0;function ki(i){const s=yu;return yu=i,s}let Jm=0;function Po(i,s){const a=xl(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,Sa(l.data,i),Sa(s,null),Sa(l.blueprint,null));const d=Ut(i,s),h=i.injectorIndex;if(Jc(d)){const m=Xs(d),v=Aa(d,s),w=v[1].data;for(let T=0;T<8;T++)s[h+T]=v[m+T]|w[m+T]}return s[h+8]=d,h}function Sa(i,s){i.push(0,0,0,0,0,0,0,0,s)}function xl(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Ut(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,d=s;for(;null!==d;){const h=d[1],m=h.type;if(l=2===m?h.declTNode:1===m?d[6]:null,null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function ut(i,s,a){!function(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(ht)&&(l=a[ht]),null==l&&(l=a[ht]=Jm++);const d=255&l;s.data[i+(d>>5)]|=1<<d}(i,s,a)}function xa(i,s,a){if(a&et.Optional)return i;qt(s,"NodeInjector")}function _i(i,s,a,l){if(a&et.Optional&&void 0===l&&(l=null),0==(a&(et.Self|et.Host))){const d=i[9],h=Wn(void 0);try{return d?d.get(s,l,a&et.Optional):Zn(s,l,a&et.Optional)}finally{Wn(h)}}return xa(l,s,a)}function Xc(i,s,a,l=et.Default,d){if(null!==i){const h=function(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(ht)?i[ht]:void 0;return"number"==typeof s?s>=0?255&s:ii:s}(a);if("function"==typeof h){if(!pu(s,i,l))return l&et.Host?xa(d,a,l):_i(s,a,l,d);try{const m=h(l);if(null!=m||l&et.Optional)return m;qt(a)}finally{kh()}}else if("number"==typeof h){let m=null,v=xl(i,s),w=-1,T=l&et.Host?s[16][6]:null;for((-1===v||l&et.SkipSelf)&&(w=-1===v?Ut(i,s):s[v+8],-1!==w&&Yn(l,!1)?(m=s[1],v=Xs(w),s=Aa(w,s)):v=-1);-1!==v;){const x=s[1];if(Eu(h,v,x.data)){const k=ed(v,s,a,m,l,T);if(k!==Ds)return k}w=s[v+8],-1!==w&&Yn(l,s[1].data[v+8]===T)&&Eu(h,v,s)?(m=x,v=Xs(w),s=Aa(w,s)):v=-1}}}return _i(s,a,l,d)}const Ds={};function ii(){return new As(Cn(),Se())}function ed(i,s,a,l,d,h){const m=s[1],v=m.data[i+8],x=Rl(v,m,a,null==l?gl(v)&&yu:l!=m&&0!=(3&v.type),d&et.Host&&h===v);return null!==x?vu(s,m,x,v):Ds}function Rl(i,s,a,l,d){const h=i.providerIndexes,m=s.data,v=1048575&h,w=i.directiveStart,x=h>>20,L=d?v+x:i.directiveEnd;for(let q=l?v:v+x;q<L;q++){const Y=m[q];if(q<w&&a===Y||q>=w&&Y.type===a)return q}if(d){const q=m[w];if(q&&us(q)&&q.type===a)return w}return null}function vu(i,s,a,l){let d=i[a];const h=s.data;if(function(i){return i instanceof _u}(d)){const m=d;m.resolving&&function(i,s){throw new Te("200",`Circular dependency in DI detected for ${i}`)}(De(h[a]));const v=ki(m.canSeeViewProviders);m.resolving=!0;const w=m.injectImpl?Wn(m.injectImpl):null;pu(i,l,et.Default);try{d=i[a]=m.factory(void 0,h,i,l),s.firstCreatePass&&a>=l.directiveStart&&function(i,s,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:h}=s.type.prototype;if(l){const m=Ki(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,m),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,m)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),h&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,h),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,h))}(a,h[a],s)}finally{null!==w&&Wn(w),ki(v),m.resolving=!1,kh()}}return d}function Eu(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function Yn(i,s){return!(i&et.Self||i&et.Host&&s)}class As{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return Xc(this._tNode,this._lView,s,l,a)}}function Nl(i){return On(()=>{const s=i.prototype.constructor,a=s[ze]||wu(s),l=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==l;){const h=d[ze]||wu(d);if(h&&h!==a)return h;d=Object.getPrototypeOf(d)}return h=>new h})}function wu(i){return le(i)?()=>{const s=wu(W(i));return s&&s()}:Ks(i)}function bu(i){return function(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const h=a[d];if(Vp(h))break;if(0===h)d+=2;else if("number"==typeof h)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(h===s)return a[d+1];d+=2}}}return null}(Cn(),i)}const Ss="__parameters__";function $r(i,s,a){return On(()=>{const l=function(i){return function(...a){if(i){const l=i(...a);for(const d in l)this[d]=l[d]}}}(s);function d(...h){if(this instanceof d)return l.apply(this,h),this;const m=new d(...h);return v.annotation=m,v;function v(w,T,x){const k=w.hasOwnProperty(Ss)?w[Ss]:Object.defineProperty(w,Ss,{value:[]})[Ss];for(;k.length<=x;)k.push(null);return(k[x]=k[x]||[]).push(m),w}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class Mn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Kt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Vh=new Mn("AnalyzeForEntryComponents"),Ma=Function;function yi(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),yi(l,s)):s!==i&&s.push(l)}return s}function ds(i,s){i.forEach(a=>Array.isArray(a)?ds(a,s):s(a))}function Pa(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function vi(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function Fi(i,s,a){let l=fr(i,s);return l>=0?i[1|l]=a:(l=~l,function(i,s,a,l){let d=i.length;if(d==s)i.push(a,l);else if(1===d)i.push(l,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>s;)i[d]=i[d-2],d--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function Li(i,s){const a=fr(i,s);if(a>=0)return i[1|a]}function fr(i,s){return function(i,s,a){let l=0,d=i.length>>a;for(;d!==l;){const h=l+(d-l>>1),m=i[h<<a];if(s===m)return h<<a;m>s?d=h:l=h+1}return~(d<<a)}(i,s,1)}const ft={},Qt="__NG_DI_FLAG__",bt="ngTempTokenPath",Qn=/\n/gm,Iu="__source",Xi=ne({provide:String,useValue:ne});let hs;function fs(i){const s=hs;return hs=i,s}function Wt(i,s=et.Default){if(void 0===hs)throw new Error("inject() must be called from an injection context");return null===hs?Zn(i,void 0,s):hs.get(i,s&et.Optional?null:void 0,s)}function Jn(i,s=et.Default){return(Yt||Wt)(W(i),s)}function es(i){const s=[];for(let a=0;a<i.length;a++){const l=W(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Error("Arguments array must have arguments.");let d,h=et.Default;for(let m=0;m<l.length;m++){const v=l[m],w=sE(v);"number"==typeof w?-1===w?d=v.token:h|=w:d=v}s.push(Jn(d,h))}else s.push(Jn(l))}return s}function rd(i,s){return i[Qt]=s,i.prototype[Qt]=s,i}function sE(i){return i[Qt]}function qh(i,s,a,l){const d=i[bt];throw s[Iu]&&d.unshift(s[Iu]),i.message=function(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let d=te(s);if(Array.isArray(s))d=s.map(te).join(" -> ");else if("object"==typeof s){let h=[];for(let m in s)if(s.hasOwnProperty(m)){let v=s[m];h.push(m+":"+("string"==typeof v?JSON.stringify(v):te(v)))}d=`{${h.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${i.replace(Qn,"\n  ")}`}("\n"+i.message,d,a,l),i.ngTokenPath=d,i[bt]=null,i}const Tu=rd($r("Inject",i=>({token:i})),-1),Rs=rd($r("Optional"),8),Vn=rd($r("SkipSelf"),4);let Au;function Ll(i){var s;return(null===(s=function(){if(void 0===Au&&(Au=null,_t.trustedTypes))try{Au=_t.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch(i){}return Au}())||void 0===s?void 0:s.createHTML(i))||i}class Uo{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class aE extends Uo{getTypeName(){return"HTML"}}class Zh extends Uo{getTypeName(){return"Style"}}class uE extends Uo{getTypeName(){return"Script"}}class zh extends Uo{getTypeName(){return"URL"}}class lE extends Uo{getTypeName(){return"ResourceURL"}}function Bo(i){return i instanceof Uo?i.changingThisBreaksApplicationSecurity:i}function Ul(i,s){const a=s_(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}function s_(i){return i instanceof Uo&&i.getTypeName()||null}function cE(i){return new aE(i)}function o_(i){return new Zh(i)}function dd(i){return new uE(i)}function Yp(i){return new zh(i)}function jo(i){return new lE(i)}class a_{constructor(s){this.inertDocumentHelper=s}getInertBodyElement(s){s="<body><remove></remove>"+s;try{const a=(new window.DOMParser).parseFromString(Ll(s),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(s):(a.removeChild(a.firstChild),a)}catch(a){return null}}}class u_{constructor(s){if(this.defaultDoc=s,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const a=this.inertDocument.createElement("html");this.inertDocument.appendChild(a);const l=this.inertDocument.createElement("body");a.appendChild(l)}}getInertBodyElement(s){const a=this.inertDocument.createElement("template");if("content"in a)return a.innerHTML=Ll(s),a;const l=this.inertDocument.createElement("body");return l.innerHTML=Ll(s),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(l),l}stripCustomNsAttrs(s){const a=s.attributes;for(let d=a.length-1;0<d;d--){const m=a.item(d).name;("xmlns:ns1"===m||0===m.indexOf("ns1:"))&&s.removeAttribute(m)}let l=s.firstChild;for(;l;)l.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(l),l=l.nextSibling}}const jl=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,hE=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Va(i){return(i=String(i)).match(jl)||i.match(hE)?i:"unsafe:"+i}function ps(i){const s={};for(const a of i.split(","))s[a]=!0;return s}function Ua(...i){const s={};for(const a of i)for(const l in a)a.hasOwnProperty(l)&&(s[l]=!0);return s}const Kh=ps("area,br,col,hr,img,wbr"),fd=ps("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),c_=ps("rp,rt"),Yh=Ua(Kh,Ua(fd,ps("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ua(c_,ps("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ua(c_,fd)),Qp=ps("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),$l=ps("srcset"),E=Ua(Qp,$l,ps("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ps("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),g=ps("script,style,template");class _{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(s){let a=s.firstChild,l=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?l=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,l&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let d=this.checkClobberedElement(a,a.nextSibling);if(d){a=d;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(s){const a=s.nodeName.toLowerCase();if(!Yh.hasOwnProperty(a))return this.sanitizedSomething=!0,!g.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const l=s.attributes;for(let d=0;d<l.length;d++){const h=l.item(d),m=h.name,v=m.toLowerCase();if(!E.hasOwnProperty(v)){this.sanitizedSomething=!0;continue}let w=h.value;Qp[v]&&(w=Va(w)),$l[v]&&(i=w,w=(i=String(i)).split(",").map(s=>Va(s.trim())).join(", ")),this.buf.push(" ",m,'="',N(w),'"')}var i;return this.buf.push(">"),!0}endElement(s){const a=s.nodeName.toLowerCase();Yh.hasOwnProperty(a)&&!Kh.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(s){this.buf.push(N(s))}checkClobberedElement(s,a){if(a&&(s.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${s.outerHTML}`);return a}}const C=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,R=/([^\#-~ |!])/g;function N(i){return i.replace(/&/g,"&amp;").replace(C,function(s){return"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";"}).replace(R,function(s){return"&#"+s.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let X;function _e(i,s){let a=null;try{X=X||function(i){const s=new u_(i);return function(){try{return!!(new window.DOMParser).parseFromString(Ll(""),"text/html")}catch(i){return!1}}()?new a_(s):s}(i);let l=s?String(s):"";a=X.getInertBodyElement(l);let d=5,h=l;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,l=h,h=a.innerHTML,a=X.getInertBodyElement(l)}while(l!==h);return Ll((new _).sanitizeChildren(je(a)||a))}finally{if(a){const l=je(a)||a;for(;l.firstChild;)l.removeChild(l.firstChild)}}}function je(i){return"content"in i&&function(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var Ke=(()=>((Ke=Ke||{})[Ke.NONE=0]="NONE",Ke[Ke.HTML=1]="HTML",Ke[Ke.STYLE=2]="STYLE",Ke[Ke.SCRIPT=3]="SCRIPT",Ke[Ke.URL=4]="URL",Ke[Ke.RESOURCE_URL=5]="RESOURCE_URL",Ke))();function Rr(i){const s=function(){const i=Se();return i&&i[12]}();return s?s.sanitize(Ke.URL,i)||"":Ul(i,"URL")?Bo(i):Va(fe(i))}const Hl="__ngContext__";function Nr(i,s){i[Hl]=s}function h_(i){const s=function(i){return i[Hl]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function tg(i){return i.ngOriginalError}function AC(i,...s){i.error(...s)}class sf{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),l=this._findContext(s),d=(i=s)&&i.ngErrorLogger||AC;var i;d(this._console,"ERROR",s),a&&d(this._console,"ORIGINAL ERROR",a),l&&d(this._console,"ERROR CONTEXT",l)}_findContext(s){return s?s.ngDebugContext||this._findContext(tg(s)):null}_findOriginalError(s){let a=s&&tg(s);for(;a&&tg(a);)a=tg(a);return a||null}}const af=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(_t))();function Ba(i){return i instanceof Function?i():i}var ja=(()=>((ja=ja||{})[ja.Important=1]="Important",ja[ja.DashCase=2]="DashCase",ja))();function wE(i,s){return undefined(i,s)}function sg(i){const s=i[3];return ln(s)?s[3]:s}function bE(i){return Px(i[13])}function __(i){return Px(i[4])}function Px(i){for(;null!==i&&!ln(i);)i=i[4];return i}function gd(i,s,a,l,d){if(null!=l){let h,m=!1;ln(l)?h=l:Zs(l)&&(m=!0,l=l[0]);const v=Xt(l);0===i&&null!==a?null==d?SE(s,a,v):md(s,a,v,d||null,!0):1===i&&null!==a?md(s,a,v,d||null,!0):2===i?function(i,s,a){const l=Mr(i,s);l&&function(i,s,a,l){Nn(i)?i.removeChild(s,a,l):s.removeChild(a)}(i,l,s,a)}(s,v,m):3===i&&s.destroyNode(v),null!=h&&function(i,s,a,l,d){const h=a[7];h!==Xt(a)&&gd(s,i,l,h,d);for(let v=10;v<a.length;v++){const w=a[v];df(w[1],w,i,s,l,h)}}(s,i,h,a,d)}}function IE(i,s,a){return Nn(i)?i.createElement(s,a):null===a?i.createElement(s):i.createElementNS(a,s)}function kC(i,s){const a=i[9],l=a.indexOf(s),d=s[3];1024&s[2]&&(s[2]&=-1025,Ca(d,-1)),a.splice(l,1)}function og(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const d=l[17];null!==d&&d!==i&&kC(d,l),s>0&&(i[a-1][4]=l[4]);const h=vi(i,10+s);!function(i,s){df(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const m=h[19];null!==m&&m.detachView(h[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function DE(i,s){if(!(256&s[2])){const a=s[11];Nn(a)&&a.destroyNode&&df(i,s,a,3,null,null),function(i){let s=i[13];if(!s)return AE(i[1],i);for(;s;){let a=null;if(Zs(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)Zs(s)&&AE(s[1],s),s=s[3];null===s&&(s=i),Zs(s)&&AE(s[1],s),a=s&&s[4]}s=a}}(s)}}function AE(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const d=s[a[l]];if(!(d instanceof _u)){const h=a[l+1];if(Array.isArray(h))for(let m=0;m<h.length;m+=2){const v=d[h[m]],w=h[m+1];try{w.call(v)}finally{}}else try{h.call(d)}finally{}}}}(i,s),function(i,s){const a=i.cleanup,l=s[7];let d=-1;if(null!==a)for(let h=0;h<a.length-1;h+=2)if("string"==typeof a[h]){const m=a[h+1],v="function"==typeof m?m(s):Xt(s[m]),w=l[d=a[h+2]],T=a[h+3];"boolean"==typeof T?v.removeEventListener(a[h],w,T):T>=0?l[d=T]():l[d=-T].unsubscribe(),h+=2}else{const m=l[d=a[h+1]];a[h].call(m)}if(null!==l){for(let h=d+1;h<l.length;h++)l[h]();s[7]=null}}(i,s),1===s[1].type&&Nn(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&ln(s[3])){a!==s[3]&&kC(a,s);const l=s[19];null!==l&&l.detachView(i)}}}function PC(i,s,a){return function(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const d=i.data[l.directiveStart].encapsulation;if(d===qe.None||d===qe.Emulated)return null}return Ni(l,a)}(i,s.parent,a)}function md(i,s,a,l,d){Nn(i)?i.insertBefore(s,a,l,d):s.insertBefore(a,l,d)}function SE(i,s,a){Nn(i)?i.appendChild(s,a):s.appendChild(a)}function FC(i,s,a,l,d){null!==l?md(i,s,a,l,d):SE(i,s,a)}function Mr(i,s){return Nn(i)?i.parentNode(s):s.parentNode}let $a=function(i,s,a){return 40&i.type?Ni(i,a):null};function v_(i,s,a,l){const d=PC(i,l,s),h=s[11],v=function(i,s,a){return $a(i,s,a)}(l.parent||s[6],l,s);if(null!=d)if(Array.isArray(a))for(let w=0;w<a.length;w++)FC(h,d,a[w],v,!1);else FC(h,d,a,v,!1)}function cf(i,s){if(null!==s){const a=s.type;if(3&a)return Ni(s,i);if(4&a)return E_(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return cf(i,l);{const d=i[s.index];return ln(d)?E_(-1,d):Xt(d)}}if(32&a)return wE(s,i)()||Xt(i[s.index]);{const l=LC(i,s);return null!==l?Array.isArray(l)?l[0]:cf(sg(i[16]),l):cf(i,s.next)}}return null}function LC(i,s){return null!==s?i[16][6].projection[s.projection]:null}function E_(i,s){const a=10+i+1;if(a<s.length){const l=s[a],d=l[1].firstChild;if(null!==d)return cf(l,d)}return s[7]}function w_(i,s,a,l,d,h,m){for(;null!=a;){const v=l[a.index],w=a.type;if(m&&0===s&&(v&&Nr(Xt(v),l),a.flags|=4),64!=(64&a.flags))if(8&w)w_(i,s,a.child,l,d,h,!1),gd(s,i,d,v,h);else if(32&w){const T=wE(a,l);let x;for(;x=T();)gd(s,i,d,x,h);gd(s,i,d,v,h)}else 16&w?qx(i,s,l,a,d,h):gd(s,i,d,v,h);a=m?a.projectionNext:a.next}}function df(i,s,a,l,d,h){w_(a,l,i.firstChild,s,d,h,!1)}function qx(i,s,a,l,d,h){const m=a[16],w=m[6].projection[l.projection];if(Array.isArray(w))for(let T=0;T<w.length;T++)gd(s,i,d,w[T],h);else w_(i,s,w,m[3],d,h,!0)}function BC(i,s,a){Nn(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function RE(i,s,a){Nn(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function jC(i,s,a){let l=i.length;for(;;){const d=i.indexOf(s,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const h=s.length;if(d+h===l||i.charCodeAt(d+h)<=32)return d}a=d+1}}const HC="ng-template";function Wx(i,s,a){let l=0;for(;l<i.length;){let d=i[l++];if(a&&"class"===d){if(d=i[l],-1!==jC(d.toLowerCase(),s,0))return!0}else if(1===d){for(;l<i.length&&"string"==typeof(d=i[l++]);)if(d.toLowerCase()===s)return!0;return!1}}return!1}function GC(i){return 4===i.type&&i.value!==HC}function qC(i,s,a){return s===(4!==i.type||a?i.value:HC)}function Zx(i,s,a){let l=4;const d=i.attrs||[],h=function(i){for(let s=0;s<i.length;s++)if(Vp(i[s]))return s;return i.length}(d);let m=!1;for(let v=0;v<s.length;v++){const w=s[v];if("number"!=typeof w){if(!m)if(4&l){if(l=2|1&l,""!==w&&!qC(i,w,a)||""===w&&1===s.length){if(Ho(l))return!1;m=!0}}else{const T=8&l?w:s[++v];if(8&l&&null!==i.attrs){if(!Wx(i.attrs,T,a)){if(Ho(l))return!1;m=!0}continue}const k=zx(8&l?"class":w,d,GC(i),a);if(-1===k){if(Ho(l))return!1;m=!0;continue}if(""!==T){let L;L=k>h?"":d[k+1].toLowerCase();const q=8&l?L:null;if(q&&-1!==jC(q,T,0)||2&l&&T!==L){if(Ho(l))return!1;m=!0}}}}else{if(!m&&!Ho(l)&&!Ho(w))return!1;if(m&&Ho(w))continue;m=!1,l=w|1&l}}return Ho(l)||m}function Ho(i){return 0==(1&i)}function zx(i,s,a,l){if(null===s)return-1;let d=0;if(l||!a){let h=!1;for(;d<s.length;){const m=s[d];if(m===i)return d;if(3===m||6===m)h=!0;else{if(1===m||2===m){let v=s[++d];for(;"string"==typeof v;)v=s[++d];continue}if(4===m)break;if(0===m){d+=4;continue}}d+=h?1:2}return-1}return function(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function b_(i,s,a=!1){for(let l=0;l<s.length;l++)if(Zx(i,s[l],a))return!0;return!1}function Jx(i,s){return i?":not("+s.trim()+")":s}function Xx(i){let s=i[0],a=1,l=2,d="",h=!1;for(;a<i.length;){let m=i[a];if("string"==typeof m)if(2&l){const v=i[++a];d+="["+m+(v.length>0?'="'+v+'"':"")+"]"}else 8&l?d+="."+m:4&l&&(d+=" "+m);else""!==d&&!Ho(m)&&(s+=Jx(h,d),d=""),l=m,h=h||!Ho(l);a++}return""!==d&&(s+=Jx(h,d)),s}const Rt={};function NE(i){Wl(Ft(),Se(),Sr()+i,du())}function Wl(i,s,a,l){if(!l)if(3==(3&s[2])){const h=i.preOrderCheckHooks;null!==h&&Da(s,h,a)}else{const h=i.preOrderHooks;null!==h&&ko(s,h,0,a)}Qs(a)}function Ms(i,s){return i<<17|s<<2}function Go(i){return i>>17&32767}function kE(i){return 2|i}function Mu(i){return(131068&i)>>2}function hf(i,s){return-131069&i|s<<2}function C_(i){return 1|i}function tI(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],h=a[l+1];if(-1!==h){const m=i.data[h];No(d),m.contentQueries(2,s[h],h)}}}function A_(i,s,a,l,d,h,m,v,w,T){const x=s.blueprint.slice();return x[0]=d,x[2]=140|l,jr(x),x[3]=x[15]=i,x[8]=a,x[10]=m||i&&i[10],x[11]=v||i&&i[11],x[12]=w||i&&i[12]||null,x[9]=T||i&&i[9]||null,x[6]=h,x[16]=2==s.type?i[16]:x,x}function cg(i,s,a,l,d){let h=i.data[s];if(null===h)h=function(i,s,a,l,d){const h=cu(),m=So(),w=i.data[s]=function(i,s,a,l,d,h){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?h:h&&h.parent,a,s,l,d);return null===i.firstChild&&(i.firstChild=w),null!==h&&(m?null==h.child&&null!==w.parent&&(h.child=w):null===h.next&&(h.next=w)),w}(i,s,a,l,d),wt.lFrame.inI18n&&(h.flags|=64);else if(64&h.type){h.type=a,h.value=l,h.attrs=d;const m=function(){const i=wt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();h.injectorIndex=null===m?-1:m.injectorIndex}return ni(h,!0),h}function dg(i,s,a,l){if(0===a)return-1;const d=s.length;for(let h=0;h<a;h++)s.push(l),i.blueprint.push(l),i.data.push(null);return d}function hg(i,s,a){gu(s);try{const l=i.viewQuery;null!==l&&nw(1,l,a);const d=i.template;null!==d&&pg(i,s,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&tI(i,s),i.staticViewQueries&&nw(2,i.viewQuery,a);const h=i.components;null!==h&&function(i,s){for(let a=0;a<s.length;a++)cI(i,s[a])}(s,h)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,Mo()}}function Lu(i,s,a,l){const d=s[2];if(256==(256&d))return;gu(s);const h=du();try{jr(s),function(i){wt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&pg(i,s,a,2,l);const m=3==(3&d);if(!h)if(m){const T=i.preOrderCheckHooks;null!==T&&Da(s,T,null)}else{const T=i.preOrderHooks;null!==T&&ko(s,T,0,null),ur(s,0)}if(function(i){for(let s=bE(i);null!==s;s=__(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const d=a[l],h=d[3];0==(1024&d[2])&&Ca(h,1),d[2]|=1024}}}(s),function(i){for(let s=bE(i);null!==s;s=__(s))for(let a=10;a<s.length;a++){const l=s[a],d=l[1];Uc(l)&&Lu(d,l,d.template,l[8])}}(s),null!==i.contentQueries&&tI(i,s),!h)if(m){const T=i.contentCheckHooks;null!==T&&Da(s,T)}else{const T=i.contentHooks;null!==T&&ko(s,T,1),ur(s,1)}!function(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)Qs(~d);else{const h=d,m=a[++l],v=a[++l];qc(m,h),v(2,s[h])}}}finally{Qs(-1)}}(i,s);const v=i.components;null!==v&&function(i,s){for(let a=0;a<s.length;a++)mR(i,s[a])}(s,v);const w=i.viewQuery;if(null!==w&&nw(2,w,l),!h)if(m){const T=i.viewCheckHooks;null!==T&&Da(s,T)}else{const T=i.viewHooks;null!==T&&ko(s,T,2),ur(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),h||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,Ca(s[3],-1))}finally{Mo()}}function fg(i,s,a,l){const d=s[10],h=!du(),m=ba(s);try{h&&!m&&d.begin&&d.begin(),m&&hg(i,s,l),Lu(i,s,a,l)}finally{h&&!m&&d.end&&d.end()}}function pg(i,s,a,l,d){const h=Sr(),m=2&l;try{Qs(-1),m&&s.length>20&&Wl(i,s,20,du()),a(l,d)}finally{Qs(h)}}function GE(i,s,a){!$c()||(function(i,s,a,l){const d=a.directiveStart,h=a.directiveEnd;i.firstCreatePass||Po(a,s),Nr(l,s);const m=a.initialInputs;for(let v=d;v<h;v++){const w=i.data[v],T=us(w);T&&bg(s,a,w);const x=vu(s,i,v,a);Nr(x,s),null!==m&&b1(0,v-d,x,w,0,m),T&&(mi(a.index,s)[8]=x)}}(i,s,a,Ni(a,s)),128==(128&a.flags)&&function(i,s,a){const l=a.directiveStart,d=a.directiveEnd,m=a.index,v=wt.lFrame.currentDirectiveIndex;try{Qs(m);for(let w=l;w<d;w++){const T=i.data[w],x=s[w];Wc(w),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&M_(T,x)}}finally{Qs(-1),Wc(v)}}(i,s,a))}function mg(i,s,a=Ni){const l=s.localNames;if(null!==l){let d=s.index+1;for(let h=0;h<l.length;h+=2){const m=l[h+1],v=-1===m?a(s,i):i[m];i[d++]=v}}}function _g(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=S_(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function S_(i,s,a,l,d,h,m,v,w,T){const x=20+l,k=x+d,L=function(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:Rt);return a}(x,k),q="function"==typeof T?T():T;return L[1]={type:i,blueprint:L,template:a,queries:null,viewQuery:v,declTNode:s,data:L.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:w,consts:q,incompleteFirstPass:!1}}function rI(i,s,a,l){const d=gI(s);null===a?d.push(l):(d.push(a),i.firstCreatePass&&iw(i).push(l,d.length-1))}function iI(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const d=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,d):a[l]=[s,d]}return a}function ms(i,s,a,l,d,h,m,v){const w=Ni(s,a);let x,T=s.inputs;!v&&null!=T&&(x=T[l])?(_I(i,a,x,l,d),gl(s)&&function(i,s){const a=mi(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(l=function(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),d=null!=m?m(d,s.value||"",l):d,Nn(h)?h.setProperty(w,l,d):Ts(l)||(w.setProperty?w.setProperty(l,d):w[l]=d))}function KE(i,s,a,l){let d=!1;if($c()){const h=function(i,s,a){const l=i.directiveRegistry;let d=null;if(l)for(let h=0;h<l.length;h++){const m=l[h];b_(a,m.selectors,!1)&&(d||(d=[]),ut(Po(a,s),i,m.type),us(m)?(Ed(i,a),d.unshift(m)):d.push(m))}return d}(i,s,a),m=null===l?null:{"":-1};if(null!==h){d=!0,aI(a,i.data.length,h.length);for(let x=0;x<h.length;x++){const k=h[x];k.providersResolver&&k.providersResolver(k)}let v=!1,w=!1,T=dg(i,s,h.length,null);for(let x=0;x<h.length;x++){const k=h[x];a.mergedAttrs=Sl(a.mergedAttrs,k.hostAttrs),fR(i,a,s,T,k),JE(T,k,m),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const L=k.type.prototype;!v&&(L.ngOnChanges||L.ngOnInit||L.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),v=!0),!w&&(L.ngOnChanges||L.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),w=!0),T++}!function(i,s){const l=s.directiveEnd,d=i.data,h=s.attrs,m=[];let v=null,w=null;for(let T=s.directiveStart;T<l;T++){const x=d[T],k=x.inputs,L=null===h||GC(s)?null:C1(k,h);m.push(L),v=iI(k,T,v),w=iI(x.outputs,T,w)}null!==v&&(v.hasOwnProperty("class")&&(s.flags|=16),v.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=m,s.inputs=v,s.outputs=w}(i,a)}m&&function(i,s,a){if(s){const l=i.localNames=[];for(let d=0;d<s.length;d+=2){const h=a[s[d+1]];if(null==h)throw new Te("301",`Export of name '${s[d+1]}' not found!`);l.push(s[d],h)}}}(a,l,m)}return a.mergedAttrs=Sl(a.mergedAttrs,a.attrs),d}function N_(i,s,a,l,d,h){const m=h.hostBindings;if(m){let v=i.hostBindingOpCodes;null===v&&(v=i.hostBindingOpCodes=[]);const w=~s.index;(function(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(v)!=w&&v.push(w),v.push(l,d,m)}}function M_(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function Ed(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function JE(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;us(s)&&(a[""]=i)}}function aI(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function fR(i,s,a,l,d){i.data[l]=d;const h=d.factory||(d.factory=Ks(d.type)),m=new _u(h,us(d),null);i.blueprint[l]=m,a[l]=m,N_(i,s,0,l,dg(i,a,d.hostVars,Rt),d)}function bg(i,s,a){const l=Ni(s,i),d=_g(a),h=i[10],m=P_(i,A_(i,d,null,a.onPush?64:16,l,s,h,h.createRenderer(l,a),null,null));i[s.index]=m}function oo(i,s,a,l,d,h){const m=Ni(i,s);!function(i,s,a,l,d,h,m){if(null==h)Nn(i)?i.removeAttribute(s,d,a):s.removeAttribute(d);else{const v=null==m?fe(h):m(h,l||"",d);Nn(i)?i.setAttribute(s,d,v,a):a?s.setAttributeNS(a,d,v):s.setAttribute(d,v)}}(s[11],m,h,i.value,a,l,d)}function b1(i,s,a,l,d,h){const m=h[s];if(null!==m){const v=l.setInput;for(let w=0;w<m.length;){const T=m[w++],x=m[w++],k=m[w++];null!==v?l.setInput(a,k,T,x):a[x]=k}}}function C1(i,s){let a=null,l=0;for(;l<s.length;){const d=s[l];if(0!==d)if(5!==d){if("number"==typeof d)break;i.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,i[d],s[l+1])),l+=2}else l+=2;else l+=4}return a}function pR(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function mR(i,s){const a=mi(s,i);if(Uc(a)){const l=a[1];80&a[2]?Lu(l,a,l.template,a[8]):a[5]>0&&lI(a)}}function lI(i){for(let l=bE(i);null!==l;l=__(l))for(let d=10;d<l.length;d++){const h=l[d];if(1024&h[2]){const m=h[1];Lu(m,h,m.template,h[8])}else h[5]>0&&lI(h)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=mi(a[l],i);Uc(d)&&d[5]>0&&lI(d)}}function cI(i,s){const a=mi(s,i),l=a[1];(function(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),hg(l,a,a[8])}function P_(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function XE(i){for(;i;){i[2]|=64;const s=sg(i);if(Ri(i)&&!s)return i;i=s}return null}function fI(i,s,a){const l=s[10];l.begin&&l.begin();try{Lu(i,s,i.template,a)}catch(d){throw Cg(s,d),d}finally{l.end&&l.end()}}function tw(i){!function(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=h_(a),d=l[1];fg(d,l,d.template,a)}}(i[8])}function nw(i,s,a){No(0),s(i,a)}const rw=(()=>Promise.resolve(null))();function gI(i){return i[7]||(i[7]=[])}function iw(i){return i.cleanup||(i.cleanup=[])}function Cg(i,s){const a=i[9],l=a?a.get(sf,null):null;l&&l.handleError(s)}function _I(i,s,a,l,d){for(let h=0;h<a.length;){const m=a[h++],v=a[h++],w=s[m],T=i.data[m];null!==T.setInput?T.setInput(w,d,l,v):w[v]=d}}function qo(i,s,a){const l=wa(s,i);!function(i,s,a){Nn(i)?i.setValue(s,a):s.textContent=a}(i[11],l,a)}function O_(i,s,a){let l=a?i.styles:null,d=a?i.classes:null,h=0;if(null!==s)for(let m=0;m<s.length;m++){const v=s[m];"number"==typeof v?h=v:1==h?d=oe(d,v):2==h&&(l=oe(l,v+": "+s[++m]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=d:i.classesWithoutHost=d}const Zl=new Mn("INJECTOR",-1);class vI{get(s,a=ft){if(a===ft){const l=new Error(`NullInjectorError: No provider for ${te(s)}!`);throw l.name="NullInjectorError",l}return a}}const ff=new Mn("Set Injector scope."),Ig={},ow={};let aw;function EI(){return void 0===aw&&(aw=new vI),aw}function bI(i,s=null,a=null,l){return new T1(i,a,s||EI(),l)}class T1{constructor(s,a,l,d=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const h=[];a&&ds(a,v=>this.processProvider(v,s,a)),ds([s],v=>this.processInjectorType(v,[],h)),this.records.set(Zl,pf(void 0,this));const m=this.records.get(ff);this.scope=null!=m?m.value:null,this.source=d||("object"==typeof s?null:te(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=ft,l=et.Default){this.assertNotDestroyed();const d=fs(this),h=Wn(void 0);try{if(!(l&et.SkipSelf)){let v=this.records.get(s);if(void 0===v){const w=("function"==typeof(i=s)||"object"==typeof i&&i instanceof Mn)&&Gn(s);v=w&&this.injectableDefInScope(w)?pf(Tg(s),Ig):null,this.records.set(s,v)}if(null!=v)return this.hydrate(s,v)}return(l&et.Self?EI():this.parent).get(s,a=l&et.Optional&&a===ft?null:a)}catch(m){if("NullInjectorError"===m.name){if((m[bt]=m[bt]||[]).unshift(te(s)),d)throw m;return qh(m,s,"R3InjectorError",this.source)}throw m}finally{Wn(h),fs(d)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((l,d)=>s.push(te(d))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(s,a,l){if(!(s=W(s)))return!1;let d=Jr(s);const h=null==d&&s.ngModule||void 0,m=void 0===h?s:h,v=-1!==l.indexOf(m);if(void 0!==h&&(d=Jr(h)),null==d)return!1;if(null!=d.imports&&!v){let x;l.push(m);try{ds(d.imports,k=>{this.processInjectorType(k,a,l)&&(void 0===x&&(x=[]),x.push(k))})}finally{}if(void 0!==x)for(let k=0;k<x.length;k++){const{ngModule:L,providers:q}=x[k];ds(q,Y=>this.processProvider(Y,L,q||G))}}this.injectorDefTypes.add(m);const w=Ks(m)||(()=>new m);this.records.set(m,pf(w,Ig));const T=d.providers;if(null!=T&&!v){const x=s;ds(T,k=>this.processProvider(k,x,T))}return void 0!==h&&void 0!==s.providers}processProvider(s,a,l){let d=gf(s=W(s))?s:W(s&&s.provide);const h=lw(i=s)?pf(void 0,i.useValue):pf(uw(i),Ig);var i;if(gf(s)||!0!==s.multi)this.records.get(d);else{let m=this.records.get(d);m||(m=pf(void 0,Ig,!0),m.factory=()=>es(m.multi),this.records.set(d,m)),d=s,m.multi.push(s)}this.records.set(d,h)}hydrate(s,a){return a.value===Ig&&(a.value=ow,a.value=a.factory()),"object"==typeof a.value&&a.value&&null!==(i=a.value)&&"object"==typeof i&&"function"==typeof i.ngOnDestroy&&this.onDestroy.add(a.value),a.value;var i}injectableDefInScope(s){if(!s.providedIn)return!1;const a=W(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function Tg(i){const s=Gn(i),a=null!==s?s.factory:Ks(i);if(null!==a)return a;if(i instanceof Mn)throw new Error(`Token ${te(i)} is missing a \u0275prov definition.`);if(i instanceof Function)return function(i){const s=i.length;if(s>0){const l=function(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}(s,"?");throw new Error(`Can't resolve all parameters for ${te(i)}: (${l.join(", ")}).`)}const a=function(i){const s=i&&(i[Xr]||i[qn]);if(s){const a=function(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Error("unreachable")}function uw(i,s,a){let l;if(gf(i)){const d=W(i);return Ks(d)||Tg(d)}if(lw(i))l=()=>W(i.useValue);else if(function(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...es(i.deps||[]));else if(function(i){return!(!i||!i.useExisting)}(i))l=()=>Jn(W(i.useExisting));else{const d=W(i&&(i.useClass||i.provide));if(!function(i){return!!i.deps}(i))return Ks(d)||Tg(d);l=()=>new d(...es(i.deps))}return l}function pf(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function lw(i){return null!==i&&"object"==typeof i&&Xi in i}function gf(i){return"function"==typeof i}const cw=function(i,s,a){return function(i,s=null,a=null,l){const d=bI(i,s,a,l);return d._resolveInjectorDefTypes(),d}({name:a},s,i,a)};let Xn=(()=>{class i{static create(a,l){return Array.isArray(a)?cw(a,l,""):cw(a.providers,a.parent,a.name||"")}}return i.THROW_IF_NOT_FOUND=ft,i.NULL=new vI,i.\u0275prov=Kt({token:i,providedIn:"any",factory:()=>Jn(Zl)}),i.__NG_ELEMENT_ID__=-1,i})();function kR(i,s){Ta(h_(i)[1],Cn())}function mf(i){let s=function(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let d;if(us(i))d=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Error("Directives cannot inherit Components");d=s.\u0275dir}if(d){if(a){l.push(d);const m=i;m.inputs=Wa(i.inputs),m.declaredInputs=Wa(i.declaredInputs),m.outputs=Wa(i.outputs);const v=d.hostBindings;v&&VI(i,v);const w=d.viewQuery,T=d.contentQueries;if(w&&PR(i,w),T&&OR(i,T),Ce(i.inputs,d.inputs),Ce(i.declaredInputs,d.declaredInputs),Ce(i.outputs,d.outputs),us(d)&&d.data.animation){const x=i.data;x.animation=(x.animation||[]).concat(d.data.animation)}}const h=d.features;if(h)for(let m=0;m<h.length;m++){const v=h[m];v&&v.ngInherit&&v(i),v===mf&&(a=!1)}}s=Object.getPrototypeOf(s)}!function(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const d=i[l];d.hostVars=s+=d.hostVars,d.hostAttrs=Sl(d.hostAttrs,a=Sl(a,d.hostAttrs))}}(l)}function Wa(i){return i===z?{}:i===G?[]:i}function PR(i,s){const a=i.viewQuery;i.viewQuery=a?(l,d)=>{s(l,d),a(l,d)}:s}function OR(i,s){const a=i.contentQueries;i.contentQueries=a?(l,d,h)=>{s(l,d,h),a(l,d,h)}:s}function VI(i,s){const a=i.hostBindings;i.hostBindings=a?(l,d)=>{s(l,d),a(l,d)}:s}let _f=null;function Vu(){if(!_f){const i=_t.Symbol;if(i&&i.iterator)_f=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(_f=l)}}}return _f}function wd(i){return!!B_(i)&&(Array.isArray(i)||!(i instanceof Map)&&Vu()in i)}function B_(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function wi(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function _w(i,s,a,l){const d=Se();return wi(d,ls(),s)&&(Ft(),oo(Kn(),d,i,s,a,l)),_w}function bd(i,s,a,l){return wi(i,ls(),a)?s+fe(a)+l:Rt}function bf(i,s,a,l,d,h,m,v){const w=Se(),T=Ft(),x=i+20,k=T.firstCreatePass?function(i,s,a,l,d,h,m,v,w){const T=s.consts,x=cg(s,i,4,m||null,Qi(T,v));KE(s,a,x,Qi(T,w)),Ta(s,x);const k=x.tViews=S_(2,x,l,d,h,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T);return null!==s.queries&&(s.queries.template(s,x),k.queries=s.queries.embeddedTView(x)),x}(x,T,w,s,a,l,d,h,m):T.data[x];ni(k,!1);const L=w[11].createComment("");v_(T,w,L,k),Nr(L,w),P_(w,w[x]=pR(L,w,L,k)),au(k)&&GE(T,w,k),null!=m&&mg(w,k,v)}function WI(i){return function(i,s){return i[s]}(wt.lFrame.contextLView,20+i)}function Bu(i,s=et.Default){const a=Se();return null===a?Jn(i,s):Xc(Cn(),a,W(i),s)}function Ii(i,s,a){const l=Se();return wi(l,ls(),s)&&ms(Ft(),Kn(),l,i,s,l[11],a,!1),Ii}function J_(i,s,a,l,d){const m=d?"class":"style";_I(i,a,s.inputs[m],m,l)}function Df(i,s,a,l){const d=Se(),h=Ft(),m=20+i,v=d[11],w=d[m]=IE(v,s,wt.lFrame.currentNamespace),T=h.firstCreatePass?function(i,s,a,l,d,h,m){const v=s.consts,T=cg(s,i,2,d,Qi(v,h));return KE(s,a,T,Qi(v,m)),null!==T.attrs&&O_(T,T.attrs,!1),null!==T.mergedAttrs&&O_(T,T.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,T),T}(m,h,d,0,s,a,l):h.data[m];ni(T,!0);const x=T.mergedAttrs;null!==x&&Qc(v,w,x);const k=T.classes;null!==k&&RE(v,w,k);const L=T.styles;null!==L&&BC(v,w,L),64!=(64&T.flags)&&v_(h,d,w,T),0===wt.lFrame.elementDepthCount&&Nr(w,d),wt.lFrame.elementDepthCount++,au(T)&&(GE(h,d,T),function(i,s,a){if(Rc(s)){const d=s.directiveEnd;for(let h=s.directiveStart;h<d;h++){const m=i.data[h];m.contentQueries&&m.contentQueries(1,a[h],h)}}}(h,T,d)),null!==l&&mg(d,T)}function X_(){let i=Cn();So()?wt.lFrame.isParent=!1:(i=i.parent,ni(i,!1));const s=i;wt.lFrame.elementDepthCount--;const a=Ft();a.firstCreatePass&&(Ta(a,i),Rc(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function(i){return 0!=(16&i.flags)}(s)&&J_(a,s,Se(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function(i){return 0!=(32&i.flags)}(s)&&J_(a,s,Se(),s.stylesWithoutHost,!1)}function ey(i,s,a,l){Df(i,s,a,l),X_()}function ny(){return Se()}function Sf(i){return!!i&&"function"==typeof i.then}function xf(i){return!!i&&"function"==typeof i.subscribe}const ry=xf;function Tw(i,s,a,l){const d=Se(),h=Ft(),m=Cn();return function(i,s,a,l,d,h,m,v){const w=au(l),x=i.firstCreatePass&&iw(i),k=s[8],L=gI(s);let q=!0;if(3&l.type||v){const se=Ni(l,s),Le=v?v(se):se,Ie=L.length,ot=v?St=>v(Xt(St[l.index])):l.index;if(Nn(a)){let St=null;if(!v&&w&&(St=function(i,s,a,l){const d=i.cleanup;if(null!=d)for(let h=0;h<d.length-1;h+=2){const m=d[h];if(m===a&&d[h+1]===l){const v=s[7],w=d[h+2];return v.length>w?v[w]:null}"string"==typeof m&&(h+=2)}return null}(i,s,d,l.index)),null!==St)(St.__ngLastListenerFn__||St).__ngNextListenerFn__=h,St.__ngLastListenerFn__=h,q=!1;else{h=ay(l,s,k,h,!1);const en=a.listen(Le,d,h);L.push(h,en),x&&x.push(d,ot,Ie,Ie+1)}}else h=ay(l,s,k,h,!0),Le.addEventListener(d,h,m),L.push(h),x&&x.push(d,ot,Ie,m)}else h=ay(l,s,k,h,!1);const Y=l.outputs;let he;if(q&&null!==Y&&(he=Y[d])){const se=he.length;if(se)for(let Le=0;Le<se;Le+=2){const Kr=s[he[Le]][he[Le+1]].subscribe(h),_o=L.length;L.push(h,Kr),x&&x.push(d,l.index,_o,-(_o+1))}}}(h,d,d[11],m,i,s,!!a,l),Tw}function Dw(i,s,a,l){try{return!1!==a(l)}catch(d){return Cg(i,d),!1}}function ay(i,s,a,l,d){return function h(m){if(m===Function)return l;const v=2&i.flags?mi(i.index,s):s;0==(32&s[2])&&XE(v);let w=Dw(s,0,l,m),T=h.__ngNextListenerFn__;for(;T;)w=Dw(s,0,T,m)&&w,T=T.__ngNextListenerFn__;return d&&!1===w&&(m.preventDefault(),m.returnValue=!1),w}}function Rf(i,s,a){return Dd(i,"",s,"",a),Rf}function Dd(i,s,a,l,d){const h=Se(),m=bd(h,s,a,l);return m!==Rt&&ms(Ft(),Kn(),h,i,m,h[11],d,!1),Dd}function Mg(i,s,a,l,d){const h=i[a+1],m=null===s;let v=l?Go(h):Mu(h),w=!1;for(;0!==v&&(!1===w||m);){const x=i[v+1];dy(i[v],s)&&(w=!0,i[v+1]=l?C_(x):kE(x)),v=l?Go(x):Mu(x)}w&&(i[a+1]=l?kE(h):C_(h))}function dy(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&fr(i,s)>=0}function py(i,s){return function(i,s,a,l){const d=Se(),h=Ft(),m=function(i){const s=wt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);h.firstUpdatePass&&function(i,s,a,l){const d=i.data;if(null===d[a+1]){const h=d[Sr()],m=function(i,s){return s>=i.expandoStartIndex}(i,a);(function(i,s){return 0!=(i.flags&(s?16:32))})(h,l)&&null===s&&!m&&(s=!1),s=function(i,s,a,l){const d=function(i){const s=wt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let h=l?s.residualClasses:s.residualStyles;if(null===d)0===(l?s.classBindings:s.styleBindings)&&(a=xd(a=gy(null,i,s,a,l),s.attrs,l),h=null);else{const m=s.directiveStylingLast;if(-1===m||i[m]!==d)if(a=gy(d,i,s,a,l),null===h){let w=function(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==Mu(l))return i[Go(l)]}(i,s,l);void 0!==w&&Array.isArray(w)&&(w=gy(null,i,s,w[1],l),w=xd(w,s.attrs,l),function(i,s,a,l){i[Go(a?s.classBindings:s.styleBindings)]=l}(i,s,l,w))}else h=function(i,s,a){let l;const d=s.directiveEnd;for(let h=1+s.directiveStylingLast;h<d;h++)l=xd(l,i[h].hostAttrs,a);return xd(l,s.attrs,a)}(i,s,l)}return void 0!==h&&(l?s.residualClasses=h:s.residualStyles=h),a}(d,h,s,l),function(i,s,a,l,d,h){let m=h?s.classBindings:s.styleBindings,v=Go(m),w=Mu(m);i[l]=a;let x,T=!1;if(Array.isArray(a)){const k=a;x=k[1],(null===x||fr(k,x)>0)&&(T=!0)}else x=a;if(d)if(0!==w){const L=Go(i[v+1]);i[l+1]=Ms(L,v),0!==L&&(i[L+1]=hf(i[L+1],l)),i[v+1]=function(i,s){return 131071&i|s<<17}(i[v+1],l)}else i[l+1]=Ms(v,0),0!==v&&(i[v+1]=hf(i[v+1],l)),v=l;else i[l+1]=Ms(w,0),0===v?v=l:i[w+1]=hf(i[w+1],l),w=l;T&&(i[l+1]=kE(i[l+1])),Mg(i,x,l,!0),Mg(i,x,l,!1),function(i,s,a,l,d){const h=d?i.residualClasses:i.residualStyles;null!=h&&"string"==typeof s&&fr(h,s)>=0&&(a[l+1]=C_(a[l+1]))}(s,x,i,l,h),m=Ms(v,w),h?s.classBindings=m:s.styleBindings=m}(d,h,s,a,m,l)}}(h,i,m,l),s!==Rt&&wi(d,m,s)&&function(i,s,a,l,d,h,m,v){if(!(3&s.type))return;const w=i.data,T=w[v+1];Rd(function(i){return 1==(1&i)}(T)?Of(w,s,a,d,Mu(T),m):void 0)||(Rd(h)||function(i){return 2==(2&i)}(T)&&(h=Of(w,null,a,d,v,m)),function(i,s,a,l,d){const h=Nn(i);if(s)d?h?i.addClass(a,l):a.classList.add(l):h?i.removeClass(a,l):a.classList.remove(l);else{let m=-1===l.indexOf("-")?void 0:ja.DashCase;if(null==d)h?i.removeStyle(a,l,m):a.style.removeProperty(l);else{const v="string"==typeof d&&d.endsWith("!important");v&&(d=d.slice(0,-10),m|=ja.Important),h?i.setStyle(a,l,d,m):a.style.setProperty(l,d,v?"important":"")}}}(l,m,wa(Sr(),a),d,h))}(h,h.data[Sr()],d,d[11],i,d[m+1]=function(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=te(Bo(i)))),i}(s,a),l,m)}(i,s,null,!0),py}function gy(i,s,a,l,d){let h=null;const m=a.directiveEnd;let v=a.directiveStylingLast;for(-1===v?v=a.directiveStart:v++;v<m&&(h=s[v],l=xd(l,h.hostAttrs,d),h!==i);)v++;return null!==i&&(a.directiveStylingLast=v),l}function xd(i,s,a){const l=a?1:2;let d=-1;if(null!==s)for(let h=0;h<s.length;h++){const m=s[h];"number"==typeof m?d=m:d===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Fi(i,m,!!a||s[++h]))}return void 0===i?null:i}function Of(i,s,a,l,d,h){const m=null===s;let v;for(;d>0;){const w=i[d],T=Array.isArray(w),x=T?w[1]:w,k=null===x;let L=a[d+1];L===Rt&&(L=k?G:void 0);let q=k?Li(L,l):x===l?L:void 0;if(T&&!Rd(q)&&(q=Li(w,l)),Rd(q)&&(v=q,m))return v;const Y=i[d+1];d=m?Go(Y):Mu(Y)}if(null!==s){let w=h?s.residualClasses:s.residualStyles;null!=w&&(v=Li(w,l))}return v}function Rd(i){return void 0!==i}function Ff(i,s=""){const a=Se(),l=Ft(),d=i+20,h=l.firstCreatePass?cg(l,d,1,s,null):l.data[d],m=a[d]=function(i,s){return Nn(i)?i.createText(s):i.createTextNode(s)}(a[11],s);v_(l,a,m,h),ni(h,!1)}function Nd(i){return Pw("",i,""),Nd}function Pw(i,s,a){const l=Se(),d=bd(l,i,s,a);return d!==Rt&&qo(l,Sr(),d),Pw}function wy(i,s,a){const l=Se();return wi(l,ls(),s)&&ms(Ft(),Kn(),l,i,s,l[11],a,!0),wy}const nc=void 0;var ks=["en",[["a","p"],["AM","PM"],nc],[["AM","PM"],nc,nc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],nc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],nc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",nc,"{1} 'at' {0}",nc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(i){const s=Math.floor(Math.abs(i)),a=i.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let Md={};function rc(i){const s=function(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Cy(s);if(a)return a;const l=s.split("-")[0];if(a=Cy(l),a)return a;if("en"===l)return ks;throw new Error(`Missing locale data for the locale "${i}".`)}function kT(i){return rc(i)[yt.PluralCase]}function Cy(i){return i in Md||(Md[i]=_t.ng&&_t.ng.common&&_t.ng.common.locales&&_t.ng.common.locales[i]),Md[i]}var yt=(()=>((yt=yt||{})[yt.LocaleId=0]="LocaleId",yt[yt.DayPeriodsFormat=1]="DayPeriodsFormat",yt[yt.DayPeriodsStandalone=2]="DayPeriodsStandalone",yt[yt.DaysFormat=3]="DaysFormat",yt[yt.DaysStandalone=4]="DaysStandalone",yt[yt.MonthsFormat=5]="MonthsFormat",yt[yt.MonthsStandalone=6]="MonthsStandalone",yt[yt.Eras=7]="Eras",yt[yt.FirstDayOfWeek=8]="FirstDayOfWeek",yt[yt.WeekendRange=9]="WeekendRange",yt[yt.DateFormat=10]="DateFormat",yt[yt.TimeFormat=11]="TimeFormat",yt[yt.DateTimeFormat=12]="DateTimeFormat",yt[yt.NumberSymbols=13]="NumberSymbols",yt[yt.NumberFormats=14]="NumberFormats",yt[yt.CurrencyCode=15]="CurrencyCode",yt[yt.CurrencySymbol=16]="CurrencySymbol",yt[yt.CurrencyName=17]="CurrencyName",yt[yt.Currencies=18]="Currencies",yt[yt.Directionality=19]="Directionality",yt[yt.PluralCase=20]="PluralCase",yt[yt.ExtraData=21]="ExtraData",yt))();const Ty="en-US";let LT=Ty;function Ue(i){Pn(i,"Expected localeId to be defined"),"string"==typeof i&&(LT=i.toLowerCase().replace(/_/g,"-"))}function Os(i,s,a,l,d){if(i=W(i),Array.isArray(i))for(let h=0;h<i.length;h++)Os(i[h],s,a,l,d);else{const h=Ft(),m=Se();let v=gf(i)?i:W(i.provide),w=uw(i);const T=Cn(),x=1048575&T.providerIndexes,k=T.directiveStart,L=T.providerIndexes>>20;if(gf(i)||!i.multi){const q=new _u(w,d,Bu),Y=Vf(v,s,d?x:x+L,k);-1===Y?(ut(Po(T,m),h,v),My(h,i,s.length),s.push(v),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(q),m.push(q)):(a[Y]=q,m[Y]=q)}else{const q=Vf(v,s,x+L,k),Y=Vf(v,s,x,x+L),he=q>=0&&a[q],se=Y>=0&&a[Y];if(d&&!se||!d&&!he){ut(Po(T,m),h,v);const Le=function(i,s,a,l,d){const h=new _u(i,a,Bu);return h.multi=[],h.index=s,h.componentProviders=0,mr(h,d,l&&!a),h}(d?Bn:Ti,a.length,d,l,w);!d&&se&&(a[Y].providerFactory=Le),My(h,i,s.length,0),s.push(v),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(Le),m.push(Le)}else My(h,i,q>-1?q:Y,mr(a[d?Y:q],w,!d&&l));!d&&l&&se&&a[Y].componentProviders++}}}function My(i,s,a,l){const d=gf(s);if(d||function(i){return!!i.useClass}(s)){const m=(s.useClass||s).prototype.ngOnDestroy;if(m){const v=i.destroyHooks||(i.destroyHooks=[]);if(!d&&s.multi){const w=v.indexOf(a);-1===w?v.push(a,[l,m]):v[w+1].push(l,m)}else v.push(a,m)}}}function mr(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function Vf(i,s,a,l){for(let d=a;d<l;d++)if(s[d]===i)return d;return-1}function Ti(i,s,a,l){return ky(this.multi,[])}function Bn(i,s,a,l){const d=this.multi;let h;if(this.providerFactory){const m=this.providerFactory.componentProviders,v=vu(a,a[1],this.providerFactory.index,l);h=v.slice(0,m),ky(d,h);for(let w=m;w<v.length;w++)h.push(v[w])}else h=[],ky(d,h);return h}function ky(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function nD(i,s=[]){return a=>{a.providersResolver=(l,d)=>function(i,s,a){const l=Ft();if(l.firstCreatePass){const d=us(i);Os(a,l.data,l.blueprint,d,!0),Os(s,l.data,l.blueprint,d,!1)}}(l,d?d(i):i,s)}}class sc{}const Bf="ngComponent";class Py{resolveComponentFactory(s){throw function(i){const s=Error(`No component factory found for ${te(i)}. Did you add it to @NgModule.entryComponents?`);return s[Bf]=i,s}(s)}}let Bd=(()=>{class i{}return i.NULL=new Py,i})();function Oy(...i){}function jf(i,s){return new Ya(Ni(i,s))}const gN=function(){return jf(Cn(),Se())};let Ya=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=gN,i})();function oD(i){return i instanceof Ya?i.nativeElement:i}class Zu{}let mN=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>zu(),i})();const zu=function(){const i=Se(),a=mi(Cn().index,i);return function(i){return i[11]}(Zs(a)?a:i)};let Jw=(()=>{class i{}return i.\u0275prov=Kt({token:i,providedIn:"root",factory:()=>null}),i})();class Fy{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const zg=new Fy("12.2.16");class Ly{constructor(){}supports(s){return wd(s)}create(s){return new lD(s)}}const Hf=(i,s)=>s;class lD{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||Hf}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,d=0,h=null;for(;a||l;){const m=!l||a&&a.currentIndex<Uy(l,d,h)?a:l,v=Uy(m,d,h),w=m.currentIndex;if(m===l)d--,l=l._nextRemoved;else if(a=a._next,null==m.previousIndex)d++;else{h||(h=[]);const T=v-d,x=w-d;if(T!=x){for(let L=0;L<T;L++){const q=L<h.length?h[L]:h[L]=0,Y=q+L;x<=Y&&Y<T&&(h[L]=q+1)}h[m.previousIndex]=x-T}}v!==w&&s(m,v,w)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!wd(s))throw new Error(`Error trying to diff '${te(s)}'. Only arrays and iterables are allowed`);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d,h,m,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let v=0;v<this.length;v++)h=s[v],m=this._trackByFn(v,h),null!==a&&Object.is(a.trackById,m)?(l&&(a=this._verifyReinsertion(a,h,m,v)),Object.is(a.item,h)||this._addIdentityChange(a,h)):(a=this._mismatch(a,h,m,v),l=!0),a=a._next}else d=0,function(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Vu()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,v=>{m=this._trackByFn(d,v),null!==a&&Object.is(a.trackById,m)?(l&&(a=this._verifyReinsertion(a,v,m,d)),Object.is(a.item,v)||this._addIdentityChange(a,v)):(a=this._mismatch(a,v,m,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,d){let h;return null===s?h=this._itTail:(h=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,h,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,h,d)):s=this._addAfter(new Kg(a,l),h,d),s}_verifyReinsertion(s,a,l,d){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==h?s=this._reinsertAfter(h,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const d=s._prevRemoved,h=s._nextRemoved;return null===d?this._removalsHead=h:d._nextRemoved=h,null===h?this._removalsTail=d:h._prevRemoved=d,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const d=null===a?this._itHead:a._next;return s._next=d,s._prev=a,null===d?this._itTail=s:d._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new Vy),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Vy),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class Kg{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class cD{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class Vy{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new cD,this.map.set(a,l)),l.add(s)}get(s,a){const d=this.map.get(s);return d?d.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Uy(i,s,a){const l=i.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+s+d}class Xw{constructor(){}supports(s){return s instanceof Map||B_(s)}create(){return new dD}}class dD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||B_(s)))throw new Error(`Error trying to diff '${te(s)}'. Only maps and objects are allowed`)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const h=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,h)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const d=this._records.get(s);this._maybeAddToChanges(d,a);const h=d._prev,m=d._next;return h&&(h._next=m),m&&(m._prev=h),d._next=null,d._prev=null,d}const l=new yN(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class yN{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function e0(){return new Yg([new Ly])}let Yg=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||e0()),deps:[[i,new Vn,new Rs]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new Error(`Cannot find a differ supporting object '${a}' of type '${function(i){return i.name||typeof i}(a)}'`)}}return i.\u0275prov=Kt({token:i,providedIn:"root",factory:e0}),i})();function Qg(){return new By([new Xw])}let By=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Qg()),deps:[[i,new Vn,new Rs]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(l)return l;throw new Error(`Cannot find a differ supporting object '${a}'`)}}return i.\u0275prov=Kt({token:i,providedIn:"root",factory:Qg}),i})();function jy(i,s,a,l,d=!1){for(;null!==a;){const h=s[a.index];if(null!==h&&l.push(Xt(h)),ln(h))for(let v=10;v<h.length;v++){const w=h[v],T=w[1].firstChild;null!==T&&jy(w[1],w,T,l)}const m=a.type;if(8&m)jy(i,s,a.child,l);else if(32&m){const v=wE(a,s);let w;for(;w=v();)l.push(w)}else if(16&m){const v=LC(s,a);if(Array.isArray(v))l.push(...v);else{const w=sg(s[16]);jy(w[1],w,v,l,!0)}}a=d?a.projectionNext:a.next}return l}class Gf{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return jy(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(ln(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(og(s,l),vi(a,l))}this._attachedToViewContainer=!1}DE(this._lView[1],this._lView)}onDestroy(s){rI(this._lView[1],this._lView,null,s)}markForCheck(){XE(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){fI(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(i,s,a){Ys(!0);try{fI(i,s,a)}finally{Ys(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var s;this._appRef=null,df(this._lView[1],s=this._lView,s[11],2,null,null)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=s}}class qf extends Gf{constructor(s){super(s),this._view=s}detectChanges(){tw(this._view)}checkNoChanges(){!function(i){Ys(!0);try{tw(i)}finally{Ys(!1)}}(this._view)}get context(){return null}}const Hd=function(i){return function(i,s,a){if(gl(i)&&!a){const l=mi(i.index,s);return new Gf(l,l)}return 47&i.type?new Gf(s[16],s):null}(Cn(),Se(),16==(16&i))};let fD=(()=>{class i{}return i.__NG_ELEMENT_ID__=Hd,i})();const gD=[new Xw],EN=new Yg([new Ly]),wN=new By(gD),$y=function(){return em(Cn(),Se())};let Xg=(()=>{class i{}return i.__NG_ELEMENT_ID__=$y,i})();const n0=Xg,bN=class extends n0{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s){const a=this._declarationTContainer.tViews,l=A_(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const h=this._declarationLView[19];return null!==h&&(l[19]=h.createEmbeddedView(a)),hg(a,l,s),new Gf(l)}};function em(i,s){return 4&i.type?new bN(s,i,jf(i,s)):null}class Qo{}class oc{}const yD=function(){return s0(Cn(),Se())};let ac=(()=>{class i{}return i.__NG_ELEMENT_ID__=yD,i})();const IN=ac,br=class extends IN{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return jf(this._hostTNode,this._hostLView)}get injector(){return new As(this._hostTNode,this._hostLView)}get parentInjector(){const s=Ut(this._hostTNode,this._hostLView);if(Jc(s)){const a=Aa(s,this._hostLView),l=Xs(s);return new As(a[1].data[l+8],a)}return new As(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=an(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){const d=s.createEmbeddedView(a||{});return this.insert(d,l),d}createComponent(s,a,l,d,h){const m=l||this.parentInjector;if(!h&&null==s.ngModule&&m){const w=m.get(Qo,null);w&&(h=w)}const v=s.create(m,d,void 0,h);return this.insert(v.hostView,a),v}insert(s,a){const l=s._lView,d=l[1];if(ln(l[3])){const x=this.indexOf(s);if(-1!==x)this.detach(x);else{const k=l[3],L=new br(k,k[6],k[3]);L.detach(L.indexOf(s))}}const h=this._adjustIndex(a),m=this._lContainer;!function(i,s,a,l){const d=10+l,h=a.length;l>0&&(a[d-1][4]=s),l<h-10?(s[4]=a[d],Pa(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const m=s[17];null!==m&&a!==m&&function(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(m,s);const v=s[19];null!==v&&v.insertView(i),s[2]|=128}(d,l,m,h);const v=E_(h,m),w=l[11],T=Mr(w,m[7]);return null!==T&&function(i,s,a,l,d,h){l[0]=d,l[6]=s,df(i,l,a,1,d,h)}(d,m[6],w,l,T,v),s.attachToViewContainerRef(),Pa(Hy(m),h,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=an(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=og(this._lContainer,a);l&&(vi(Hy(this._lContainer),a),DE(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=og(this._lContainer,a);return l&&null!=vi(Hy(this._lContainer),a)?new Gf(l):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function an(i){return i[8]}function Hy(i){return i[8]||(i[8]=[])}function s0(i,s){let a;const l=s[i.index];if(ln(l))a=l;else{let d;if(8&i.type)d=Xt(l);else{const h=s[11];d=h.createComment("");const m=Ni(i,s);md(h,Mr(h,m),d,function(i,s){return Nn(i)?i.nextSibling(s):s.nextSibling}(h,m),!1)}s[i.index]=a=pR(l,s,d,i),P_(s,a)}return new br(a,i,s)}const hc={};class HD extends Bd{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Tt(s);return new qD(a,this.ngModule)}}function Qf(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}const zd=new Mn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>af});class qD extends sc{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=s.selectors.map(Xx).join(","),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Qf(this.componentDef.inputs)}get outputs(){return Qf(this.componentDef.outputs)}create(s,a,l,d){const h=(d=d||this.ngModule)?function(i,s){return{get:(a,l,d)=>{const h=i.get(a,hc,d);return h!==hc||l===hc?h:s.get(a,l,d)}}}(s,d.injector):s,m=h.get(Zu,To),v=h.get(Jw,null),w=m.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",x=l?function(i,s,a){if(Nn(i))return i.selectRootElement(s,a===qe.ShadowDom);let l="string"==typeof s?i.querySelector(s):s;return l.textContent="",l}(w,l,this.componentDef.encapsulation):IE(m.createRenderer(null,this.componentDef),T,function(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(T)),k=this.componentDef.onPush?576:528,L=function(i,s){return{components:[],scheduler:i||af,clean:rw,playerHandler:s||null,flags:0}}(),q=S_(0,null,null,1,0,null,null,null,null,null),Y=A_(null,q,L,k,null,null,m,w,v,h);let he,se;gu(Y);try{const Le=function(i,s,a,l,d,h){const m=a[1];a[20]=i;const w=cg(m,20,2,"#host",null),T=w.mergedAttrs=s.hostAttrs;null!==T&&(O_(w,T,!0),null!==i&&(Qc(d,i,T),null!==w.classes&&RE(d,i,w.classes),null!==w.styles&&BC(d,i,w.styles)));const x=l.createRenderer(i,s),k=A_(a,_g(s),null,s.onPush?64:16,a[20],w,l,x,h||null,null);return m.firstCreatePass&&(ut(Po(w,a),m,s.type),Ed(m,w),aI(w,a.length,1)),P_(a,k),a[20]=k}(x,this.componentDef,Y,m,w);if(x)if(l)Qc(w,x,["ng-version",zg.full]);else{const{attrs:Ie,classes:ot}=function(i){const s=[],a=[];let l=1,d=2;for(;l<i.length;){let h=i[l];if("string"==typeof h)2===d?""!==h&&s.push(h,i[++l]):8===d&&a.push(h);else{if(!Ho(d))break;d=h}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Ie&&Qc(w,x,Ie),ot&&ot.length>0&&RE(w,x,ot.join(" "))}if(se=Vc(q,20),void 0!==a){const Ie=se.projection=[];for(let ot=0;ot<this.ngContentSelectors.length;ot++){const St=a[ot];Ie.push(null!=St?Array.from(St):null)}}he=function(i,s,a,l,d){const h=a[1],m=function(i,s,a){const l=Cn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),fR(i,l,s,dg(i,s,1,null),a));const d=vu(s,i,l.directiveStart,l);Nr(d,s);const h=Ni(l,s);return h&&Nr(h,s),d}(h,a,s);if(l.components.push(m),i[8]=m,d&&d.forEach(w=>w(m,s)),s.contentQueries){const w=Cn();s.contentQueries(1,m,w.directiveStart)}const v=Cn();return!h.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Qs(v.index),N_(a[1],v,0,v.directiveStart,v.directiveEnd,s),M_(s,m)),m}(Le,this.componentDef,Y,L,[kR]),hg(q,Y,null)}finally{Mo()}return new Jy(this.componentType,he,jf(se,Y),Y,se)}}class Jy extends class{}{constructor(s,a,l,d,h){super(),this.location=l,this._rootLView=d,this._tNode=h,this.instance=a,this.hostView=this.changeDetectorRef=new qf(d),this.componentType=s}get injector(){return new As(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}const Kd=new Map;class ZD extends Qo{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new HD(this);const l=Ln(s),d=s[Pe]||null;d&&Ue(d),this._bootstrapComponents=Ba(l.bootstrap),this._r3Injector=bI(s,a,[{provide:Qo,useValue:this},{provide:Bd,useValue:this.componentFactoryResolver}],te(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=Xn.THROW_IF_NOT_FOUND,l=et.Default){return s===Xn||s===Qo||s===Zl?this:this._r3Injector.get(s,a,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class Jf extends oc{constructor(s){super(),this.moduleType=s,null!==Ln(s)&&function(i){const s=new Set;!function a(l){const d=Ln(l,!0),h=d.id;null!==h&&(function(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${te(s)} vs ${te(s.name)}`)}(h,Kd.get(h),l),Kd.set(h,l));const m=Ba(d.imports);for(const v of m)s.has(v)||(s.add(v),a(v))}(i)}(s)}create(s){return new ZD(this.moduleType,s)}}function C0(i){return s=>{setTimeout(i,void 0,s)}}const ra=class extends f.xQ{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){var d,h,m;let v=s,w=a||(()=>null),T=l;if(s&&"object"==typeof s){const k=s;v=null===(d=k.next)||void 0===d?void 0:d.bind(k),w=null===(h=k.error)||void 0===h?void 0:h.bind(k),T=null===(m=k.complete)||void 0===m?void 0:m.bind(k)}this.__isAsync&&(w=C0(w),v&&(v=C0(v)),T&&(T=C0(T)));const x=super.subscribe({next:v,error:w,complete:T});return s instanceof $.w&&s.add(x),x}};function I0(){return this._results[Vu()]()}class np{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Vu(),l=np.prototype;l[a]||(l[a]=I0)}get changes(){return this._changes||(this._changes=new ra)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const d=yi(s);(this._changesDetected=!function(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let d=i[l],h=s[l];if(a&&(d=a(d),h=a(h)),h!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class T0{constructor(s){this.queryList=s,this.matches=null}clone(){return new T0(this.queryList)}setDirty(){this.queryList.setDirty()}}class fm{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,d=[];for(let h=0;h<l;h++){const m=a.getByIndex(h);d.push(this.queries[m.indexInDeclarationView].clone())}return new fm(d)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==lA(s,a).matches&&this.queries[a].setDirty()}}class D0{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class A0{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,h=this.getByIndex(l).embeddedTView(s,d);h&&(h.indexInDeclarationView=l,null!==a?a.push(h):a=[h])}return null!==a?new A0(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class iv{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new iv(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const h=l[d];this.matchTNodeWithReadOption(s,a,iA(a,h)),this.matchTNodeWithReadOption(s,a,Rl(a,s,h,!1,!1))}else l===Xg?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Rl(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===Ya||d===ac||d===Xg&&4&a.type)this.addMatch(a.index,-2);else{const h=Rl(a,s,d,!1,!1);null!==h&&this.addMatch(a.index,h)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function iA(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function eM(i,s,a,l){return-1===a?function(i,s){return 11&i.type?jf(i,s):4&i.type?em(i,s):null}(s,i):-2===a?function(i,s,a){return a===Ya?jf(s,i):a===Xg?em(s,i):a===ac?s0(s,i):void 0}(i,s,l):vu(i,i[1],a,s)}function oA(i,s,a,l){const d=s[19].queries[l];if(null===d.matches){const h=i.data,m=a.matches,v=[];for(let w=0;w<m.length;w+=2){const T=m[w];v.push(T<0?null:eM(s,h[T],m[w+1],a.metadata.read))}d.matches=v}return d.matches}function sv(i,s,a,l){const d=i.queries.getByIndex(a),h=d.matches;if(null!==h){const m=oA(i,s,d,a);for(let v=0;v<h.length;v+=2){const w=h[v];if(w>0)l.push(m[v/2]);else{const T=h[v+1],x=s[-w];for(let k=10;k<x.length;k++){const L=x[k];L[17]===L[3]&&sv(L[1],L,T,l)}if(null!==x[9]){const k=x[9];for(let L=0;L<k.length;L++){const q=k[L];sv(q[1],q,T,l)}}}}}return l}function aA(i){const s=Se(),a=Ft(),l=Mh();No(l+1);const d=lA(a,l);if(i.dirty&&ba(s)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const h=d.crossesNgTemplate?sv(a,s,l,[]):oA(a,s,d,l);i.reset(h,oD),i.notifyOnChanges()}return!0}return!1}function Jd(i,s,a,l){const d=Ft();if(d.firstCreatePass){const h=Cn();(function(i,s,a){null===i.queries&&(i.queries=new A0),i.queries.track(new iv(s,a))})(d,new D0(s,a,l),h.index),function(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function(i,s,a){const l=new np(4==(4&a));rI(i,s,l,l.destroy),null===s[19]&&(s[19]=new fm),s[19].queries.push(new T0(l))}(d,Se(),a)}function ov(){return i=Se(),s=Mh(),i[19].queries[s].queryList;var i,s}function lA(i,s){return i.queries.getByIndex(s)}const mc=new Mn("Application Initializer");let ia=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Oy,this.reject=Oy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const h=this.appInits[d]();if(Sf(h))a.push(h);else if(ry(h)){const m=new Promise((v,w)=>{h.subscribe({complete:v,error:w})});a.push(m)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Jn(mc,8))},i.\u0275prov=Kt({token:i,factory:i.\u0275fac}),i})();const W0=new Mn("AppId"),pM={provide:W0,useFactory:function(){return`${Z0()}${Z0()}${Z0()}`},deps:[]};function Z0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const mv=new Mn("Platform Initializer"),_v=new Mn("Platform ID"),yv=new Mn("appBootstrapListener");let NA=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Kt({token:i,factory:i.\u0275fac}),i})();const vv=new Mn("LocaleId"),Ev=new Mn("DefaultCurrencyCode");class kA{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}const z0=function(i){return new Jf(i)},vM=z0,K0=function(i){return Promise.resolve(z0(i))},FA=function(i){const s=z0(i),l=Ba(Ln(i).declarations).reduce((d,h)=>{const m=Tt(h);return m&&d.push(new qD(m)),d},[]);return new kA(s,l)},Y0=FA,VA=function(i){return Promise.resolve(FA(i))};let ih=(()=>{class i{constructor(){this.compileModuleSync=vM,this.compileModuleAsync=K0,this.compileModuleAndAllComponentsSync=Y0,this.compileModuleAndAllComponentsAsync=VA}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Kt({token:i,factory:i.\u0275fac}),i})();const Q0=(()=>Promise.resolve(0))();function J0(i){"undefined"==typeof Zone?Q0.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Vs{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ra(!1),this.onMicrotaskEmpty=new ra(!1),this.onStable=new ra(!1),this.onError=new ra(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function(){let i=_t.requestAnimationFrame,s=_t.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function(i){const s=()=>{!function(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(_t,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,bm(i),i.isCheckStableRunning=!0,tb(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),bm(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,h,m,v)=>{try{return sh(i),a.invokeTask(d,h,m,v)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||i.shouldCoalesceRunChangeDetection)&&s(),ib(i)}},onInvoke:(a,l,d,h,m,v,w)=>{try{return sh(i),a.invoke(d,h,m,v,w)}finally{i.shouldCoalesceRunChangeDetection&&s(),ib(i)}},onHasTask:(a,l,d,h)=>{a.hasTask(d,h),l===d&&("microTask"==h.change?(i._hasPendingMicrotasks=h.microTask,bm(i),tb(i)):"macroTask"==h.change&&(i.hasPendingMacrotasks=h.macroTask))},onHandleError:(a,l,d,h)=>(a.handleError(d,h),i.runOutsideAngular(()=>i.onError.emit(h)),!1)})}(d)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Vs.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Vs.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,d){const h=this._inner,m=h.scheduleEventTask("NgZoneEvent: "+d,s,eb,Oy,Oy);try{return h.runTask(m,a,l)}finally{h.cancelTask(m)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const eb={};function tb(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function bm(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function sh(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function ib(i){i._nesting--,tb(i)}class sb{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ra,this.onMicrotaskEmpty=new ra,this.onStable=new ra,this.onError=new ra}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,d){return s.apply(a,l)}}let BA=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Vs.assertNotInAngularZone(),J0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())J0(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let h=-1;l&&l>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==h),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:h,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(Jn(Vs))},i.\u0275prov=Kt({token:i,factory:i.\u0275fac}),i})(),wv=(()=>{class i{constructor(){this._applications=new Map,ab.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return ab.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Kt({token:i,factory:i.\u0275fac}),i})();class tl{addToWindow(s){}findTestabilityInTree(s,a,l){return null}}function ob(i){ab=i}let ab=new tl,bv=!0,jA=!1;function ub(){return jA=!0,bv}function lb(){if(jA)throw new Error("Cannot enable prod mode after platform setup.");bv=!1}let sa;const HA=new Mn("AllowMultipleToken");class pb{constructor(s,a){this.name=s,this.token=a}}function Cv(i,s,a=[]){const l=`Platform: ${s}`,d=new Mn(l);return(h=[])=>{let m=qA();if(!m||m.injector.get(HA,!1))if(i)i(a.concat(h).concat({provide:d,useValue:!0}));else{const v=a.concat(h).concat({provide:d,useValue:!0},{provide:ff,useValue:"platform"});!function(i){if(sa&&!sa.destroyed&&!sa.injector.get(HA,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");sa=i.get(mb);const s=i.get(mv,null);s&&s.forEach(a=>a())}(Xn.create({providers:v,name:l}))}return function(i){const s=qA();if(!s)throw new Error("No platform exists!");if(!s.injector.get(i,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return s}(d)}}function qA(){return sa&&!sa.destroyed?sa:null}let mb=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const v=function(i,s){let a;return a="noop"===i?new sb:("zone.js"===i?void 0:i)||new Vs({enableLongStackTrace:ub(),shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),w=[{provide:Vs,useValue:v}];return v.run(()=>{const T=Xn.create({providers:w,parent:this.injector,name:a.moduleType.name}),x=a.create(T),k=x.injector.get(sf,null);if(!k)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return v.runOutsideAngular(()=>{const L=v.onError.subscribe({next:q=>{k.handleError(q)}});x.onDestroy(()=>{lp(this._modules,x),L.unsubscribe()})}),function(i,s,a){try{const l=a();return Sf(l)?l.catch(d=>{throw s.runOutsideAngular(()=>i.handleError(d)),d}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(k,v,()=>{const L=x.injector.get(ia);return L.runInitializers(),L.donePromise.then(()=>(Ue(x.injector.get(vv,Ty)||Ty),this._moduleDoBootstrap(x),x))})})}bootstrapModule(a,l=[]){const d=Iv({},l);return function(i,s,a){const l=new Jf(a);return Promise.resolve(l)}(0,0,a).then(h=>this.bootstrapModuleFactory(h,d))}_moduleDoBootstrap(a){const l=a.injector.get(up);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Error(`The module ${te(a.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Jn(Xn))},i.\u0275prov=Kt({token:i,factory:i.\u0275fac}),i})();function Iv(i,s){return Array.isArray(s)?s.reduce(Iv,i):Object.assign(Object.assign({},i),s)}let up=(()=>{class i{constructor(a,l,d,h,m){this._zone=a,this._injector=l,this._exceptionHandler=d,this._componentFactoryResolver=h,this._initStatus=m,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new O.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),w=new O.y(T=>{let x;this._zone.runOutsideAngular(()=>{x=this._zone.onStable.subscribe(()=>{Vs.assertNotInAngularZone(),J0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const k=this._zone.onUnstable.subscribe(()=>{Vs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{x.unsubscribe(),k.unsubscribe()}});this.isStable=(0,ae.T)(v,w.pipe((0,ce.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let d;d=a instanceof sc?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(d.componentType);const h=function(i){return i.isBoundToModule}(d)?void 0:this._injector.get(Qo),v=d.create(Xn.NULL,[],l||d.selector,h),w=v.location.nativeElement,T=v.injector.get(BA,null),x=T&&v.injector.get(wv);return T&&x&&x.registerApplication(w,T),v.onDestroy(()=>{this.detachView(v.hostView),lp(this.components,v),x&&x.unregisterApplication(w)}),this._loadComponent(v),v}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;lp(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(yv,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(Jn(Vs),Jn(Xn),Jn(sf),Jn(Bd),Jn(ia))},i.\u0275prov=Kt({token:i,factory:i.\u0275fac}),i})();function lp(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}class DM{}class vb{}const Dv={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Eb=(()=>{class i{constructor(a,l){this._compiler=a,this._config=l||Dv}load(a){return this.loadAndCompile(a)}loadAndCompile(a){let[l,d]=a.split("#");return void 0===d&&(d="default"),V(8255)(l).then(h=>h[d]).then(h=>wb(h,l,d)).then(h=>this._compiler.compileModuleAsync(h))}loadFactory(a){let[l,d]=a.split("#"),h="NgFactory";return void 0===d&&(d="default",h=""),V(8255)(this._config.factoryPathPrefix+l+this._config.factoryPathSuffix).then(m=>m[d+h]).then(m=>wb(m,l,d))}}return i.\u0275fac=function(a){return new(a||i)(Jn(ih),Jn(vb,8))},i.\u0275prov=Kt({token:i,factory:i.\u0275fac}),i})();function wb(i,s,a){if(!i)throw new Error(`Cannot find '${a}' in '${s}'`);return i}const NM=function(i){return null},iS=Cv(null,"core",[{provide:_v,useValue:"unknown"},{provide:mb,deps:[Xn]},{provide:wv,deps:[]},{provide:NA,deps:[]}]),nr=[{provide:up,useClass:up,deps:[Vs,Xn,sf,Bd,ia]},{provide:zd,deps:[Vs],useFactory:function(i){let s=[];return i.onStable.subscribe(()=>{for(;s.length;)s.pop()()}),function(a){s.push(a)}}},{provide:ia,useClass:ia,deps:[[new Rs,mc]]},{provide:ih,useClass:ih,deps:[]},pM,{provide:Yg,useFactory:function(){return EN},deps:[]},{provide:By,useFactory:function(){return wN},deps:[]},{provide:vv,useFactory:function(i){return Ue(i=i||"undefined"!=typeof $localize&&$localize.locale||Ty),i},deps:[[new Tu(vv),new Rs,new Vn]]},{provide:Ev,useValue:"USD"}];let iO=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Jn(up))},i.\u0275mod=K({type:i}),i.\u0275inj=Dn({providers:nr}),i})()},8939:(Qe,Ee,V)=>{"use strict";V.d(Ee,{hO:()=>le,xv:()=>oe,Dh:()=>te,GT:()=>ne,cc:()=>pe,on:()=>U,pX:()=>ce});var f=V(7716),$=V(7841),O=V(2871);Qe=V.hmd(Qe);const ae=["ngOnDestroy"],ce=(fe,De,Ne,Xe={})=>new Proxy(fe,{get:(dt,qt)=>Ne.runOutsideAngular(()=>{var Lt;if(fe[qt])return(null===(Lt=null==Xe?void 0:Xe.spy)||void 0===Lt?void 0:Lt.get)&&Xe.spy.get(qt,fe[qt]),fe[qt];if(ae.indexOf(qt)>-1)return()=>{};const vt=De.toPromise().then(Oe=>{const Fe=Oe&&Oe[qt];return"function"==typeof Fe?Fe.bind(Oe):Fe&&Fe.then?Fe.then($e=>Ne.run(()=>$e)):Ne.run(()=>Fe)});return new Proxy(()=>{},{get:(Oe,Fe)=>vt[Fe],apply:(Oe,Fe,$e)=>vt.then(mt=>{var rt;const Et=mt&&mt(...$e);return(null===(rt=null==Xe?void 0:Xe.spy)||void 0===rt?void 0:rt.apply)&&Xe.spy.apply(qt,$e,Et),Et})})})}),ne=(fe,De)=>{De.forEach(Ne=>{Object.getOwnPropertyNames(Ne.prototype||Ne).forEach(Xe=>{Object.defineProperty(fe.prototype,Xe,Object.getOwnPropertyDescriptor(Ne.prototype||Ne,Xe))})})};class Ce{constructor(De){return De}}const te=new f.OlP("angularfire2.app.options"),oe=new f.OlP("angularfire2.app.name");function U(fe,De,Ne){const dt="object"==typeof Ne&&Ne||{};dt.name=dt.name||"string"==typeof Ne&&Ne||"[DEFAULT]";const Lt=$.Z.apps.filter(vt=>vt&&vt.name===dt.name)[0]||De.runOutsideAngular(()=>$.Z.initializeApp(fe,dt));try{JSON.stringify(fe)!==JSON.stringify(Lt.options)&&H("error",`${Lt.name} Firebase App already initialized with different options${Qe.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(vt){}return new Ce(Lt)}const H=(fe,...De)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[fe](...De)},W={provide:Ce,useFactory:U,deps:[te,f.R0b,[new f.FiY,oe]]};let le=(()=>{class fe{constructor(Ne){$.Z.registerVersion("angularfire",O.q4.full,"core"),$.Z.registerVersion("angularfire",O.q4.full,"app-compat"),$.Z.registerVersion("angular",f.q4F.full,Ne.toString())}static initializeApp(Ne,Xe){return{ngModule:fe,providers:[{provide:te,useValue:Ne},{provide:oe,useValue:Xe}]}}}return fe.\u0275fac=function(Ne){return new(Ne||fe)(f.LFG(f.Lbi))},fe.\u0275mod=f.oAB({type:fe}),fe.\u0275inj=f.cJS({providers:[W]}),fe})();function pe(fe,De,Ne,Xe,dt){const[,qt,Lt]=globalThis.\u0275AngularfireInstanceCache.find(vt=>vt[0]===fe)||[];if(qt)return function(fe,De){try{return fe.toString()===De.toString()}catch(Ne){return fe===De}}(dt,Lt)||(Be("error",`${De} was already initialized on the ${Ne} Firebase App with different settings.${we?" You may need to reload as Firebase is not HMR aware.":""}`),Be("warn",{is:dt,was:Lt})),qt;{const vt=Xe();return globalThis.\u0275AngularfireInstanceCache.push([fe,vt,dt]),vt}}const we=!!Qe.hot,Be=(fe,...De)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[fe](...De)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2871:(Qe,Ee,V)=>{"use strict";V.d(Ee,{q4:()=>e_,iC:()=>Li,fc:()=>nd,HU:()=>$p,vb:()=>Pa,JM:()=>ds});var f=V(7716),$=V(2329),O=V(8239),ae=V(8026),ce=V(3854),ne=V(3910),Ce=V(5422),te=V(4544);const oe="@firebase/installations",U="0.5.9",W=`w:${U}`,le="FIS_v2",De=new ce.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ne(I){return I instanceof ce.ZR&&I.code.includes("request-failed")}function Xe({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function dt(I){return{token:I.token,requestStatus:2,expiresIn:mt(I.expiresIn),creationTime:Date.now()}}function qt(I,A){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,O.Z)(function*(I,A){const B=(yield A.json()).error;return De.create("request-failed",{requestName:I,serverCode:B.code,serverMessage:B.message,serverStatus:B.status})})).apply(this,arguments)}function vt({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function Oe(I,{refreshToken:A}){const M=vt(I);return M.append("Authorization",function(I){return`${le} ${I}`}(A)),M}function Fe(I){return $e.apply(this,arguments)}function $e(){return($e=(0,O.Z)(function*(I){const A=yield I();return A.status>=500&&A.status<600?I():A})).apply(this,arguments)}function mt(I){return Number(I.replace("s","000"))}function Et(I,A){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:A},{fid:M}){const B=Xe(I),re=vt(I),ue=A.getImmediate({optional:!0});if(ue){const ft=yield ue.getHeartbeatsHeader();ft&&re.append("x-firebase-client",ft)}const Je={method:"POST",headers:re,body:JSON.stringify({fid:M,authVersion:le,appId:I.appId,sdkVersion:W})},gt=yield Fe(()=>fetch(B,Je));if(gt.ok){const ft=yield gt.json();return{fid:ft.fid||M,registrationStatus:2,refreshToken:ft.refreshToken,authToken:dt(ft.authToken)}}throw yield qt("Create Installation",gt)})).apply(this,arguments)}function Br(I){return new Promise(A=>{setTimeout(A,I)})}const Zi=/^[cdef][\w-]{21}$/;function Pn(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const M=function(I){return function(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return Zi.test(M)?M:""}catch(I){return""}}function Qr(I){return`${I.appName}!${I.appId}`}const zi=new Map;function os(I,A){const M=Qr(I);Dn(M,A),function(I,A){const M=(!gn&&"BroadcastChannel"in self&&(gn=new BroadcastChannel("[Firebase] FID Change"),gn.onmessage=I=>{Dn(I.data.key,I.data.fid)}),gn);M&&M.postMessage({key:I,fid:A}),0===zi.size&&gn&&(gn.close(),gn=null)}(M,A)}function Dn(I,A){const M=zi.get(I);if(M)for(const B of M)B(A)}let gn=null;const Me="firebase-installations-store";let qn=null;function cr(){return qn||(qn=(0,te.X3)("firebase-installations-database",1,{upgrade:(I,A)=>{switch(A){case 0:I.createObjectStore(Me)}}})),qn}function et(I,A){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,O.Z)(function*(I,A){const M=Qr(I),re=(yield cr()).transaction(Me,"readwrite"),ue=re.objectStore(Me),ke=yield ue.get(M);return yield ue.put(A,M),yield re.done,(!ke||ke.fid!==A.fid)&&os(I,A.fid),A})).apply(this,arguments)}function An(I){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,O.Z)(function*(I){const A=Qr(I),B=(yield cr()).transaction(Me,"readwrite");yield B.objectStore(Me).delete(A),yield B.done})).apply(this,arguments)}function Zn(I,A){return ws.apply(this,arguments)}function ws(){return(ws=(0,O.Z)(function*(I,A){const M=Qr(I),re=(yield cr()).transaction(Me,"readwrite"),ue=re.objectStore(Me),ke=yield ue.get(M),Je=A(ke);return void 0===Je?yield ue.delete(M):yield ue.put(Je,M),yield re.done,Je&&(!ke||ke.fid!==Je.fid)&&os(I,Je.fid),Je})).apply(this,arguments)}function On(I){return _n.apply(this,arguments)}function _n(){return(_n=(0,O.Z)(function*(I){let A;const M=yield Zn(I.appConfig,B=>{const re=Eo(B),ue=cn(I,re);return A=ue.registrationPromise,ue.installationEntry});return""===M.fid?{installationEntry:yield A}:{installationEntry:M,registrationPromise:A}})).apply(this,arguments)}function Eo(I){return _t(I||{fid:Pn(),registrationStatus:0})}function cn(I,A){if(0===A.registrationStatus){if(!navigator.onLine)return{installationEntry:A,registrationPromise:Promise.reject(De.create("app-offline"))};const M={fid:A.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:M,registrationPromise:function(I,A){return at.apply(this,arguments)}(I,M)}}return 1===A.registrationStatus?{installationEntry:A,registrationPromise:as(I)}:{installationEntry:A}}function at(){return(at=(0,O.Z)(function*(I,A){try{const M=yield Et(I,A);return et(I.appConfig,M)}catch(M){throw Ne(M)&&409===M.customData.serverCode?yield An(I.appConfig):yield et(I.appConfig,{fid:A.fid,registrationStatus:0}),M}})).apply(this,arguments)}function as(I){return di.apply(this,arguments)}function di(){return(di=(0,O.Z)(function*(I){let A=yield Jt(I.appConfig);for(;1===A.registrationStatus;)yield Br(100),A=yield Jt(I.appConfig);if(0===A.registrationStatus){const{installationEntry:M,registrationPromise:B}=yield On(I);return B||M}return A})).apply(this,arguments)}function Jt(I){return Zn(I,A=>{if(!A)throw De.create("installation-not-found");return _t(A)})}function _t(I){return function(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function jn(I,A){return z.apply(this,arguments)}function z(){return(z=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:A},M){const B=G(I,M),re=Oe(I,M),ue=A.getImmediate({optional:!0});if(ue){const ft=yield ue.getHeartbeatsHeader();ft&&re.append("x-firebase-client",ft)}const Je={method:"POST",headers:re,body:JSON.stringify({installation:{sdkVersion:W,appId:I.appId}})},gt=yield Fe(()=>fetch(B,Je));if(gt.ok)return dt(yield gt.json());throw yield qt("Generate Auth Token",gt)})).apply(this,arguments)}function G(I,{fid:A}){return`${Xe(I)}/${A}/authTokens:generate`}function J(I){return ve.apply(this,arguments)}function ve(){return(ve=(0,O.Z)(function*(I,A=!1){let M;const B=yield Zn(I.appConfig,ue=>{if(!xt(ue))throw De.create("not-registered");const ke=ue.authToken;if(!A&&yn(ke))return ue;if(1===ke.requestStatus)return M=Z(I,A),ue;{if(!navigator.onLine)throw De.create("app-offline");const Je=dr(ue);return M=ze(I,Je),Je}});return M?yield M:B.authToken})).apply(this,arguments)}function Z(I,A){return ie.apply(this,arguments)}function ie(){return(ie=(0,O.Z)(function*(I,A){let M=yield Pe(I.appConfig);for(;1===M.authToken.requestStatus;)yield Br(100),M=yield Pe(I.appConfig);const B=M.authToken;return 0===B.requestStatus?J(I,A):B})).apply(this,arguments)}function Pe(I){return Zn(I,A=>{if(!xt(A))throw De.create("not-registered");return function(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(A.authToken)?Object.assign(Object.assign({},A),{authToken:{requestStatus:0}}):A})}function ze(I,A){return ht.apply(this,arguments)}function ht(){return(ht=(0,O.Z)(function*(I,A){try{const M=yield jn(I,A),B=Object.assign(Object.assign({},A),{authToken:M});return yield et(I.appConfig,B),M}catch(M){if(!Ne(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const B=Object.assign(Object.assign({},A),{authToken:{requestStatus:0}});yield et(I.appConfig,B)}else yield An(I.appConfig);throw M}})).apply(this,arguments)}function xt(I){return void 0!==I&&2===I.registrationStatus}function yn(I){return 2===I.requestStatus&&!function(I){const A=Date.now();return A<I.creationTime||I.creationTime+I.expiresIn<A+36e5}(I)}function dr(I){const A={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:A})}function K(){return(K=(0,O.Z)(function*(I){const A=I,{installationEntry:M,registrationPromise:B}=yield On(A);return B?B.catch(console.error):J(A).catch(console.error),M.fid})).apply(this,arguments)}function He(){return(He=(0,O.Z)(function*(I,A=!1){const M=I;return yield Mt(M),(yield J(M,A)).token})).apply(this,arguments)}function Mt(I){return kt.apply(this,arguments)}function kt(){return(kt=(0,O.Z)(function*(I){const{registrationPromise:A}=yield On(I);A&&(yield A)})).apply(this,arguments)}function vn(I){return De.create("missing-app-config-values",{valueName:I})}const ei="installations";(0,ae._registerComponent)(new ne.wA(ei,I=>{const A=I.getProvider("app").getImmediate();return{app:A,appConfig:function(I){if(!I||!I.options)throw vn("App Configuration");if(!I.name)throw vn("App Name");const A=["projectId","apiKey","appId"];for(const M of A)if(!I.options[M])throw vn(M);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(A),heartbeatServiceProvider:(0,ae._getProvider)(A,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,ae._registerComponent)(new ne.wA("installations-internal",I=>{const A=I.getProvider("app").getImmediate(),M=(0,ae._getProvider)(A,ei).getImmediate();return{getId:()=>function(I){return K.apply(this,arguments)}(M),getToken:re=>function(I){return He.apply(this,arguments)}(M,re)}},"PRIVATE")),(0,ae.registerVersion)(oe,U),(0,ae.registerVersion)(oe,U,"esm2017");const fi="@firebase/remote-config",yr=new ce.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class au{constructor(A,M,B,re){this.client=A,this.storage=M,this.storageCache=B,this.logger=re}isCachedDataFresh(A,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const B=Date.now()-M,re=B<=A;return this.logger.debug(`Config fetch cache check. Cache age millis: ${B}. Cache max age millis (minimumFetchIntervalMillis setting): ${A}. Is cache hit: ${re}.`),re}fetch(A){var M=this;return(0,O.Z)(function*(){const[B,re]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(re&&M.isCachedDataFresh(A.cacheMaxAgeMillis,B))return re;A.eTag=re&&re.eTag;const ue=yield M.client.fetch(A),ke=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ue.status&&ke.push(M.storage.setLastSuccessfulFetchResponse(ue)),yield Promise.all(ke),ue})()}}function us(I=navigator){return I.languages&&I.languages[0]||I.language}class Ri{constructor(A,M,B,re,ue,ke){this.firebaseInstallations=A,this.sdkVersion=M,this.namespace=B,this.projectId=re,this.apiKey=ue,this.appId=ke}fetch(A){var M=this;return(0,O.Z)(function*(){const[B,re]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),ke=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,Je={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":A.eTag||"*"},gt={sdk_version:M.sdkVersion,app_instance_id:B,app_instance_id_token:re,app_id:M.appId,language_code:us()},ft={method:"POST",headers:Je,body:JSON.stringify(gt)},Qt=fetch(ke,ft),bt=new Promise((Xi,hs)=>{A.signal.addEventListener(()=>{const fs=new Error("The operation was aborted.");fs.name="AbortError",hs(fs)})});let Vi;try{yield Promise.race([Qt,bt]),Vi=yield Qt}catch(Xi){let hs="fetch-client-network";throw"AbortError"===Xi.name&&(hs="fetch-timeout"),yr.create(hs,{originalErrorMessage:Xi.message})}let Qn=Vi.status;const Fa=Vi.headers.get("ETag")||void 0;let Iu,Ol;if(200===Vi.status){let Xi;try{Xi=yield Vi.json()}catch(hs){throw yr.create("fetch-client-parse",{originalErrorMessage:hs.message})}Iu=Xi.entries,Ol=Xi.state}if("INSTANCE_STATE_UNSPECIFIED"===Ol?Qn=500:"NO_CHANGE"===Ol?Qn=304:("NO_TEMPLATE"===Ol||"EMPTY_CONFIG"===Ol)&&(Iu={}),304!==Qn&&200!==Qn)throw yr.create("fetch-status",{httpStatus:Qn});return{status:Qn,eTag:Fa,config:Iu}})()}}class Eh{constructor(A,M){this.client=A,this.storage=M}fetch(A){var M=this;return(0,O.Z)(function*(){const B=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(A,B)})()}attemptFetch(A,{throttleEndTimeMillis:M,backoffCount:B}){var re=this;return(0,O.Z)(function*(){yield function(I,A){return new Promise((M,B)=>{const re=Math.max(A-Date.now(),0),ue=setTimeout(M,re);I.addEventListener(()=>{clearTimeout(ue),B(yr.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}(A.signal,M);try{const ue=yield re.client.fetch(A);return yield re.storage.deleteThrottleMetadata(),ue}catch(ue){if(!function(I){if(!(I instanceof ce.ZR&&I.customData))return!1;const A=Number(I.customData.httpStatus);return 429===A||500===A||503===A||504===A}(ue))throw ue;const ke={throttleEndTimeMillis:Date.now()+(0,ce.$s)(B),backoffCount:B+1};return yield re.storage.setThrottleMetadata(ke),re.attemptFetch(A,ke)}})()}}class bh{constructor(A,M,B,re,ue){this.app=A,this._client=M,this._storageCache=B,this._storage=re,this._logger=ue,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Nc(I,A){const M=I.target.error||void 0;return yr.create(A,{originalErrorMessage:M&&M.message})}const zs="app_namespace_store";class Ih{constructor(A,M,B,re=function(){return new Promise((I,A)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=B=>{A(Nc(B,"storage-open"))},M.onsuccess=B=>{I(B.target.result)},M.onupgradeneeded=B=>{const re=B.target.result;switch(B.oldVersion){case 0:re.createObjectStore(zs,{keyPath:"compositeKey"})}}}catch(M){A(yr.create("storage-open",{originalErrorMessage:M}))}})}()){this.appId=A,this.appName=M,this.namespace=B,this.openDbPromise=re}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(A){return this.set("last_fetch_status",A)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(A){return this.set("last_successful_fetch_timestamp_millis",A)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(A){return this.set("last_successful_fetch_response",A)}getActiveConfig(){return this.get("active_config")}setActiveConfig(A){return this.set("active_config",A)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(A){return this.set("active_config_etag",A)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(A){return this.set("throttle_metadata",A)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(A){var M=this;return(0,O.Z)(function*(){const B=yield M.openDbPromise;return new Promise((re,ue)=>{const Je=B.transaction([zs],"readonly").objectStore(zs),gt=M.createCompositeKey(A);try{const ft=Je.get(gt);ft.onerror=Qt=>{ue(Nc(Qt,"storage-get"))},ft.onsuccess=Qt=>{const bt=Qt.target.result;re(bt?bt.value:void 0)}}catch(ft){ue(yr.create("storage-get",{originalErrorMessage:ft&&ft.message}))}})})()}set(A,M){var B=this;return(0,O.Z)(function*(){const re=yield B.openDbPromise;return new Promise((ue,ke)=>{const gt=re.transaction([zs],"readwrite").objectStore(zs),ft=B.createCompositeKey(A);try{const Qt=gt.put({compositeKey:ft,value:M});Qt.onerror=bt=>{ke(Nc(bt,"storage-set"))},Qt.onsuccess=()=>{ue()}}catch(Qt){ke(yr.create("storage-set",{originalErrorMessage:Qt&&Qt.message}))}})})()}delete(A){var M=this;return(0,O.Z)(function*(){const B=yield M.openDbPromise;return new Promise((re,ue)=>{const Je=B.transaction([zs],"readwrite").objectStore(zs),gt=M.createCompositeKey(A);try{const ft=Je.delete(gt);ft.onerror=Qt=>{ue(Nc(Qt,"storage-delete"))},ft.onsuccess=()=>{re()}}catch(ft){ue(yr.create("storage-delete",{originalErrorMessage:ft&&ft.message}))}})})()}createCompositeKey(A){return[this.appId,this.appName,this.namespace,A].join()}}class Km{constructor(A){this.storage=A}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var A=this;return(0,O.Z)(function*(){const M=A.storage.getLastFetchStatus(),B=A.storage.getLastSuccessfulFetchTimestampMillis(),re=A.storage.getActiveConfig(),ue=yield M;ue&&(A.lastFetchStatus=ue);const ke=yield B;ke&&(A.lastSuccessfulFetchTimestampMillis=ke);const Je=yield re;Je&&(A.activeConfig=Je)})()}setLastFetchStatus(A){return this.lastFetchStatus=A,this.storage.setLastFetchStatus(A)}setLastSuccessfulFetchTimestampMillis(A){return this.lastSuccessfulFetchTimestampMillis=A,this.storage.setLastSuccessfulFetchTimestampMillis(A)}setActiveConfig(A){return this.activeConfig=A,this.storage.setActiveConfig(A)}}function Np(){return _a.apply(this,arguments)}function _a(){return(_a=(0,O.Z)(function*(){if(!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch(I){return!1}})).apply(this,arguments)}(0,ae._registerComponent)(new ne.wA("remote-config",function(A,{instanceIdentifier:M}){const B=A.getProvider("app").getImmediate(),re=A.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw yr.create("registration-window");if(!(0,ce.hl)())throw yr.create("indexed-db-unavailable");const{projectId:ue,apiKey:ke,appId:Je}=B.options;if(!ue)throw yr.create("registration-project-id");if(!ke)throw yr.create("registration-api-key");if(!Je)throw yr.create("registration-app-id");const gt=new Ih(Je,B.name,M=M||"firebase"),ft=new Km(gt),Qt=new Ce.Yd(fi);Qt.logLevel=Ce.in.ERROR;const bt=new Ri(re,ae.SDK_VERSION,M,ue,ke,Je),Vi=new Eh(bt,gt),Qn=new au(Vi,gt,ft,Qt),Fa=new bh(B,Qn,ft,gt,Qt);return function(I){const A=(0,ce.m9)(I);A._initializePromise||(A._initializePromise=A._storageCache.loadFromStorage().then(()=>{A._isInitializationComplete=!0}))}(Fa),Fa},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(fi,"0.3.8"),(0,ae.registerVersion)(fi,"0.3.8","esm2017");const kc="/firebase-messaging-sw.js",Dh="/firebase-cloud-messaging-push-scope",Pc="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ks="google.c.a.c_id",Oc="google.c.a.c_l",bo="google.c.a.ts",Ki="google.c.a.e";var ya=(()=>{return(I=ya||(ya={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",ya;var I})();function or(I){const A=new Uint8Array(I);return btoa(String.fromCharCode(...A)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Mp(I){const M=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),B=atob(M),re=new Uint8Array(B.length);for(let ue=0;ue<B.length;++ue)re[ue]=B.charCodeAt(ue);return re}const va="fcm_token_details_db",Fc="fcm_token_object_Store";function Yi(I){return Co.apply(this,arguments)}function Co(){return(Co=(0,O.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ue=>ue.name).includes(va))return null;let A=null;return(yield(0,te.X3)(va,5,{upgrade:(B=(0,O.Z)(function*(re,ue,ke,Je){var gt;if(ue<2||!re.objectStoreNames.contains(Fc))return;const ft=Je.objectStore(Fc),Qt=yield ft.index("fcmSenderId").get(I);if(yield ft.clear(),Qt)if(2===ue){const bt=Qt;if(!bt.auth||!bt.p256dh||!bt.endpoint)return;A={token:bt.fcmToken,createTime:null!==(gt=bt.createTime)&&void 0!==gt?gt:Date.now(),subscriptionOptions:{auth:bt.auth,p256dh:bt.p256dh,endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:"string"==typeof bt.vapidKey?bt.vapidKey:or(bt.vapidKey)}}}else if(3===ue){const bt=Qt;A={token:bt.fcmToken,createTime:bt.createTime,subscriptionOptions:{auth:or(bt.auth),p256dh:or(bt.p256dh),endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:or(bt.vapidKey)}}}else if(4===ue){const bt=Qt;A={token:bt.fcmToken,createTime:bt.createTime,subscriptionOptions:{auth:or(bt.auth),p256dh:or(bt.p256dh),endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:or(bt.vapidKey)}}}}),function(ue,ke,Je,gt){return B.apply(this,arguments)})})).close(),yield(0,te.Lj)(va),yield(0,te.Lj)("fcm_vapid_details_db"),yield(0,te.Lj)("undefined"),xh(A)?A:null;var B})).apply(this,arguments)}function xh(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:A}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof A.auth&&A.auth.length>0&&"string"==typeof A.p256dh&&A.p256dh.length>0&&"string"==typeof A.endpoint&&A.endpoint.length>0&&"string"==typeof A.swScope&&A.swScope.length>0&&"string"==typeof A.vapidKey&&A.vapidKey.length>0}const ti="firebase-messaging-store";let Rh=null;function Nn(){return Rh||(Rh=(0,te.X3)("firebase-messaging-database",1,{upgrade:(I,A)=>{switch(A){case 0:I.createObjectStore(ti)}}})),Rh}function Io(I){return To.apply(this,arguments)}function To(){return(To=(0,O.Z)(function*(I){const A=wa(I),B=yield(yield Nn()).transaction(ti).objectStore(ti).get(A);if(B)return B;{const re=yield Yi(I.appConfig.senderId);if(re)return yield uu(I,re),re}})).apply(this,arguments)}function uu(I,A){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,O.Z)(function*(I,A){const M=wa(I),re=(yield Nn()).transaction(ti,"readwrite");return yield re.objectStore(ti).put(A,M),yield re.done,A})).apply(this,arguments)}function Ea(I){return Do.apply(this,arguments)}function Do(){return(Do=(0,O.Z)(function*(I){const A=wa(I),B=(yield Nn()).transaction(ti,"readwrite");yield B.objectStore(ti).delete(A),yield B.done})).apply(this,arguments)}function wa({appConfig:I}){return I.appId}const ar=new ce.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Vc(I,A){return gi.apply(this,arguments)}function gi(){return(gi=(0,O.Z)(function*(I,A){const M=yield jr(I),B=wt(A),re={method:"POST",headers:M,body:JSON.stringify(B)};let ue;try{ue=yield(yield fetch(Qi(I.appConfig),re)).json()}catch(ke){throw ar.create("token-subscribe-failed",{errorInfo:ke})}if(ue.error)throw ar.create("token-subscribe-failed",{errorInfo:ue.error.message});if(!ue.token)throw ar.create("token-subscribe-no-token");return ue.token})).apply(this,arguments)}function mi(I,A){return ba.apply(this,arguments)}function ba(){return(ba=(0,O.Z)(function*(I,A){const M=yield jr(I),B=wt(A.subscriptionOptions),re={method:"PATCH",headers:M,body:JSON.stringify(B)};let ue;try{ue=yield(yield fetch(`${Qi(I.appConfig)}/${A.token}`,re)).json()}catch(ke){throw ar.create("token-update-failed",{errorInfo:ke})}if(ue.error)throw ar.create("token-update-failed",{errorInfo:ue.error.message});if(!ue.token)throw ar.create("token-update-no-token");return ue.token})).apply(this,arguments)}function Uc(I,A){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,O.Z)(function*(I,A){const B={method:"DELETE",headers:yield jr(I)};try{const ue=yield(yield fetch(`${Qi(I.appConfig)}/${A}`,B)).json();if(ue.error)throw ar.create("token-unsubscribe-failed",{errorInfo:ue.error.message})}catch(re){throw ar.create("token-unsubscribe-failed",{errorInfo:re})}})).apply(this,arguments)}function Qi({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function jr(I){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,O.Z)(function*({appConfig:I,installations:A}){const M=yield A.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function wt({p256dh:I,auth:A,endpoint:M,vapidKey:B}){const re={web:{endpoint:M,auth:A,p256dh:I}};return B!==Pc&&(re.web.applicationPubKey=B),re}const Bc=6048e5;function vl(I){return El.apply(this,arguments)}function El(){return(El=(0,O.Z)(function*(I){const A=yield lu(I.swRegistration,I.vapidKey),M={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:A.endpoint,auth:or(A.getKey("auth")),p256dh:or(A.getKey("p256dh"))},B=yield Io(I.firebaseDependencies);if(B){if(cu(B.subscriptionOptions,M))return Date.now()>=B.createTime+Bc?Hc(I,{token:B.token,createTime:Date.now(),subscriptionOptions:M}):B.token;try{yield Uc(I.firebaseDependencies,B.token)}catch(re){console.warn(re)}return Se(I.firebaseDependencies,M)}return Se(I.firebaseDependencies,M)})).apply(this,arguments)}function jc(I){return $c.apply(this,arguments)}function $c(){return($c=(0,O.Z)(function*(I){const A=yield Io(I.firebaseDependencies);A&&(yield Uc(I.firebaseDependencies,A.token),yield Ea(I.firebaseDependencies));const M=yield I.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function Hc(I,A){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,O.Z)(function*(I,A){try{const M=yield mi(I.firebaseDependencies,A),B=Object.assign(Object.assign({},A),{token:M,createTime:Date.now()});return yield uu(I.firebaseDependencies,B),M}catch(M){throw yield jc(I),M}})).apply(this,arguments)}function Se(I,A){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,O.Z)(function*(I,A){const B={token:yield Vc(I,A),createTime:Date.now(),subscriptionOptions:A};return yield uu(I,B),B.token})).apply(this,arguments)}function lu(I,A){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,O.Z)(function*(I,A){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Mp(A)})})).apply(this,arguments)}function cu(I,A){return A.vapidKey===I.vapidKey&&A.endpoint===I.endpoint&&A.auth===I.auth&&A.p256dh===I.p256dh}function Is(I){const A={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function(I,A){if(!A.notification)return;I.notification={};const M=A.notification.title;M&&(I.notification.title=M);const B=A.notification.body;B&&(I.notification.body=B);const re=A.notification.image;re&&(I.notification.image=re)}(A,I),function(I,A){!A.data||(I.data=A.data)}(A,I),function(I,A){if(!A.fcmOptions)return;I.fcmOptions={};const M=A.fcmOptions.link;M&&(I.fcmOptions.link=M);const B=A.fcmOptions.analytics_label;B&&(I.fcmOptions.analyticsLabel=B)}(A,I),A}function kp(I){return"object"==typeof I&&!!I&&Ks in I}function wl(I,A){const M=[];for(let B=0;B<I.length;B++)M.push(I.charAt(B)),B<A.length&&M.push(A.charAt(B));return M.join("")}function Ys(I){return ar.create("missing-app-config-values",{valueName:I})}wl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),wl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class hr{constructor(A,M,B){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const re=function(I){if(!I||!I.options)throw Ys("App Configuration Object");if(!I.name)throw Ys("App Name");const A=["projectId","apiKey","appId","messagingSenderId"],{options:M}=I;for(const B of A)if(!M[B])throw Ys(B);return{appName:I.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(A);this.firebaseDependencies={app:A,appConfig:re,installations:M,analyticsProvider:B}}_delete(){return Promise.resolve()}}function ri(I){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,O.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(kc,{scope:Dh}),I.swRegistration.update().catch(()=>{})}catch(A){throw ar.create("failed-service-worker-registration",{browserErrorMessage:A.message})}})).apply(this,arguments)}function ls(I,A){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,O.Z)(function*(I,A){if(!A&&!I.swRegistration&&(yield ri(I)),A||!I.swRegistration){if(!(A instanceof ServiceWorkerRegistration))throw ar.create("invalid-sw-registration");I.swRegistration=A}})).apply(this,arguments)}function Nh(I,A){return xo.apply(this,arguments)}function xo(){return(xo=(0,O.Z)(function*(I,A){A?I.vapidKey=A:I.vapidKey||(I.vapidKey=Pc)})).apply(this,arguments)}function hu(){return(hu=(0,O.Z)(function*(I,A){if(!navigator)throw ar.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ar.create("permission-blocked");return yield Nh(I,null==A?void 0:A.vapidKey),yield ls(I,null==A?void 0:A.serviceWorkerRegistration),vl(I)})).apply(this,arguments)}function Wc(I,A,M){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,O.Z)(function*(I,A,M){const B=Mh(A);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(B,{message_id:M[Ks],message_name:M[Oc],message_time:M[bo],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Mh(I){switch(I){case ya.NOTIFICATION_CLICKED:return"notification_open";case ya.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function fu(){return(fu=(0,O.Z)(function*(I,A){const M=A.data;if(!M.isFirebaseMessaging)return;I.onMessageHandler&&M.messageType===ya.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Is(M)):I.onMessageHandler.next(Is(M)));const B=M.data;kp(B)&&"1"===B[Ki]&&(yield Wc(I,M.messageType,B))})).apply(this,arguments)}const pu="@firebase/messaging";function kh(){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,O.Z)(function*(){try{yield(0,ce.eu)()}catch(I){return!1}return"undefined"!=typeof window&&(0,ce.hl)()&&(0,ce.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,ae._registerComponent)(new ne.wA("messaging",I=>{const A=new hr(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function(I,A){return fu.apply(this,arguments)}(A,M)),A},"PUBLIC")),(0,ae._registerComponent)(new ne.wA("messaging-internal",I=>{const A=I.getProvider("messaging").getImmediate();return{getToken:B=>function(I,A){return hu.apply(this,arguments)}(A,B)}},"PRIVATE")),(0,ae.registerVersion)(pu,"0.9.13"),(0,ae.registerVersion)(pu,"0.9.13","esm2017");const Tl="analytics",Kc="firebase_id",Da="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ko="https://www.googletagmanager.com/gtag/js",ur=new Ce.Yd("@firebase/analytics");function mu(I){return Promise.all(I.map(A=>A.catch(M=>M)))}function Op(I,A){const M=document.createElement("script");M.src=`${ko}?l=${I}&id=${A}`,M.async=!0,document.head.appendChild(M)}function _u(I,A,M,B,re,ue){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,O.Z)(function*(I,A,M,B,re,ue){const ke=B[re];try{if(ke)yield A[ke];else{const gt=(yield mu(M)).find(ft=>ft.measurementId===re);gt&&(yield A[gt.appId])}}catch(Je){ur.error(Je)}I("config",re,ue)})).apply(this,arguments)}function Fp(I,A,M,B,re){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,O.Z)(function*(I,A,M,B,re){try{let ue=[];if(re&&re.send_to){let ke=re.send_to;Array.isArray(ke)||(ke=[ke]);const Je=yield mu(M);for(const gt of ke){const ft=Je.find(bt=>bt.measurementId===gt),Qt=ft&&A[ft.appId];if(!Qt){ue=[];break}ue.push(Qt)}}0===ue.length&&(ue=Object.values(A)),yield Promise.all(ue),I("event",B,re||{})}catch(ue){ur.error(ue)}})).apply(this,arguments)}function Ym(){const I=window.document.getElementsByTagName("script");for(const A of Object.values(I))if(A.src&&A.src.includes(ko))return A;return null}const Ji=new ce.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Sl=new class{constructor(A={},M=1e3){this.throttleMetadata=A,this.intervalMillis=M}getThrottleMetadata(A){return this.throttleMetadata[A]}setThrottleMetadata(A,M){this.throttleMetadata[A]=M}deleteThrottleMetadata(A){delete this.throttleMetadata[A]}};function Up(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Jc(I){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,O.Z)(function*(I){var A;const{appId:M,apiKey:B}=I,re={method:"GET",headers:Up(B)},ue=Da.replace("{app-id}",M),ke=yield fetch(ue,re);if(200!==ke.status&&304!==ke.status){let Je="";try{const gt=yield ke.json();(null===(A=gt.error)||void 0===A?void 0:A.message)&&(Je=gt.error.message)}catch(gt){}throw Ji.create("config-fetch-failed",{httpStatus:ke.status,responseMessage:Je})}return ke.json()})).apply(this,arguments)}function nE(I){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,O.Z)(function*(I,A=Sl,M){const{appId:B,apiKey:re,measurementId:ue}=I.options;if(!B)throw Ji.create("no-app-id");if(!re){if(ue)return{measurementId:ue,appId:B};throw Ji.create("no-api-key")}const ke=A.getThrottleMetadata(B)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Je=new jp;return setTimeout((0,O.Z)(function*(){Je.abort()}),void 0!==M?M:6e4),yu({appId:B,apiKey:re,measurementId:ue},ke,Je,A)})).apply(this,arguments)}function yu(I,A,M){return ki.apply(this,arguments)}function ki(){return(ki=(0,O.Z)(function*(I,{throttleEndTimeMillis:A,backoffCount:M},B,re=Sl){const{appId:ue,measurementId:ke}=I;try{yield Bp(B,A)}catch(Je){if(ke)return ur.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ke} provided in the "measurementId" field in the local Firebase config. [${Je.message}]`),{appId:ue,measurementId:ke};throw Je}try{const Je=yield Jc(I);return re.deleteThrottleMetadata(ue),Je}catch(Je){if(!Oh(Je)){if(re.deleteThrottleMetadata(ue),ke)return ur.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ke} provided in the "measurementId" field in the local Firebase config. [${Je.message}]`),{appId:ue,measurementId:ke};throw Je}const gt=503===Number(Je.customData.httpStatus)?(0,ce.$s)(M,re.intervalMillis,30):(0,ce.$s)(M,re.intervalMillis),ft={throttleEndTimeMillis:Date.now()+gt,backoffCount:M+1};return re.setThrottleMetadata(ue,ft),ur.debug(`Calling attemptFetch again in ${gt} millis`),yu(I,ft,B,re)}})).apply(this,arguments)}function Bp(I,A){return new Promise((M,B)=>{const re=Math.max(A-Date.now(),0),ue=setTimeout(M,re);I.addEventListener(()=>{clearTimeout(ue),B(Ji.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}function Oh(I){if(!(I instanceof ce.ZR&&I.customData))return!1;const A=Number(I.customData.httpStatus);return 429===A||500===A||503===A||504===A}class jp{constructor(){this.listeners=[]}addEventListener(A){this.listeners.push(A)}abort(){this.listeners.forEach(A=>A())}}function Jm(){return Fh.apply(this,arguments)}function Fh(){return(Fh=(0,O.Z)(function*(){if(!(0,ce.hl)())return ur.warn(Ji.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ce.eu)()}catch(I){return ur.warn(Ji.create("indexeddb-unavailable",{errorInfo:I}).message),!1}return!0})).apply(this,arguments)}function Sa(){return(Sa=(0,O.Z)(function*(I,A,M,B,re,ue,ke){var Je;const gt=nE(I);gt.then(Qn=>{M[Qn.measurementId]=Qn.appId,I.options.measurementId&&Qn.measurementId!==I.options.measurementId&&ur.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${Qn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Qn=>ur.error(Qn)),A.push(gt);const ft=Jm().then(Qn=>{if(Qn)return B.getId()}),[Qt,bt]=yield Promise.all([gt,ft]);Ym()||Op(ue,Qt.measurementId),re("js",new Date);const Vi=null!==(Je=null==ke?void 0:ke.config)&&void 0!==Je?Je:{};return Vi.origin="firebase",Vi.update=!0,null!=bt&&(Vi[Kc]=bt),re("config",Qt.measurementId,Vi),Qt.measurementId})).apply(this,arguments)}class xl{constructor(A){this.app=A}_delete(){return delete Ut[this.app.options.appId],Promise.resolve()}}let Ut={},ut=[];const cs={};let Xc,Ds,xa="dataLayer",ii=!1;function vu(I,A,M){!function(){const I=[];if((0,ce.ru)()&&I.push("This is a browser extension environment."),(0,ce.zI)()||I.push("Cookies are not available."),I.length>0){const A=I.map((B,re)=>`(${re+1}) ${B}`).join(" "),M=Ji.create("invalid-analytics-context",{errorInfo:A});ur.warn(M.message)}}();const B=I.options.appId;if(!B)throw Ji.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw Ji.create("no-api-key");ur.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ut[B])throw Ji.create("already-exists",{id:B});if(!ii){!function(I){let A=[];Array.isArray(window[I])?A=window[I]:window[I]=A}(xa);const{wrappedGtag:ue,gtagCore:ke}=function(I,A,M,B,re){let ue=function(...ke){window[B].push(arguments)};return window[re]&&"function"==typeof window[re]&&(ue=window[re]),window[re]=function(I,A,M,B){function ue(){return(ue=(0,O.Z)(function*(ke,Je,gt){try{"event"===ke?yield Fp(I,A,M,Je,gt):"config"===ke?yield _u(I,A,M,B,Je,gt):I("set",Je)}catch(ft){ur.error(ft)}})).apply(this,arguments)}return function(ke,Je,gt){return ue.apply(this,arguments)}}(ue,I,A,M),{gtagCore:ue,wrappedGtag:window[re]}}(Ut,ut,cs,xa,"gtag");Ds=ue,Xc=ke,ii=!0}return Ut[B]=function(I,A,M,B,re,ue,ke){return Sa.apply(this,arguments)}(I,ut,cs,A,Xc,xa,M),new xl(I)}function Eu(){return(Eu=(0,O.Z)(function*(I,A,M,B,re){if(re&&re.global)I("event",M,B);else{const ue=yield A;I("event",M,Object.assign(Object.assign({},B),{send_to:ue}))}})).apply(this,arguments)}function $r(){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,O.Z)(function*(){if((0,ce.ru)()||!(0,ce.zI)()||!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch(I){return!1}})).apply(this,arguments)}const Vh="@firebase/analytics";(0,ae._registerComponent)(new ne.wA(Tl,(A,{options:M})=>vu(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ae._registerComponent)(new ne.wA("analytics-internal",function(A){try{const M=A.getProvider(Tl).getImmediate();return{logEvent:(B,re,ue)=>function(I,A,M,B){I=(0,ce.m9)(I),function(I,A,M,B,re){return Eu.apply(this,arguments)}(Ds,Ut[I.app.options.appId],A,M,B).catch(re=>ur.error(re))}(M,B,re,ue)}}catch(M){throw Ji.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ae.registerVersion)(Vh,"0.7.9"),(0,ae.registerVersion)(Vh,"0.7.9","esm2017");var Bh=V(7771),Xm=V(3637),rE=V(3342),Cu=V(309),Na=V(3101);const e_=new f.GfV("7.3.0"),jh="__angularfire_symbol__analyticsIsSupportedValue",Oi="__angularfire_symbol__analyticsIsSupported",Lo="__angularfire_symbol__remoteConfigIsSupportedValue",td="__angularfire_symbol__remoteConfigIsSupported",wn="__angularfire_symbol__messagingIsSupportedValue",Ma="__angularfire_symbol__messagingIsSupported";function ds(I,A,M){if(A){if(1===A.length)return A[0];const ue=A.filter(ke=>ke.app===M);if(1===ue.length)return ue[0]}return M.container.getProvider(I).getImmediate({optional:!0})}globalThis[Oi]||(globalThis[Oi]=$r().then(I=>globalThis[jh]=I).catch(()=>globalThis[jh]=!1)),globalThis[Ma]||(globalThis[Ma]=kh().then(I=>globalThis[wn]=I).catch(()=>globalThis[wn]=!1)),globalThis[td]||(globalThis[td]=Np().then(I=>globalThis[Lo]=I).catch(()=>globalThis[Lo]=!1));const Pa=(I,A)=>{const M=A?[A]:(0,$.C6)(),B=[];return M.forEach(re=>{re.container.getProvider(I).instances.forEach(ke=>{B.includes(ke)||B.push(ke)})}),B};function vi(){}class xs{constructor(A,M=Bh.N){this.zone=A,this.delegate=M}now(){return this.delegate.now()}schedule(A,M,B){const re=this.zone;return this.delegate.schedule(function(ke){re.runGuarded(()=>{A.apply(this,[ke])})},M,B)}}class $h{constructor(A){this.zone=A,this.task=null}call(A,M){const B=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",vi,{},vi,vi)),M.pipe((0,rE.b)({next:B,complete:B,error:B})).subscribe(A).add(B)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let $p=(()=>{class I{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new xs(Zone.current)),this.insideAngular=M.run(()=>new xs(Zone.current,Xm.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(M){return new(M||I)(f.LFG(f.R0b))},I.\u0275prov=f.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function to(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function nd(I){return I.pipe((0,Cu.QV)(to().outsideAngular))}function Li(I){return to(),function(I){return function(M){return(M=M.lift(new $h(I.ngZone))).pipe((0,Na.R)(I.outsideAngular),(0,Cu.QV)(I.insideAngular))}}(to())(I)}},7014:(Qe,Ee,V)=>{"use strict";V.d(Ee,{$:()=>Gc,A:()=>Pn,B:()=>zi,G:()=>gl,H:()=>ma,J:()=>or,L:()=>Dt,M:()=>uu,N:()=>wa,P:()=>Je,Q:()=>Ni,R:()=>nd,T:()=>ar,U:()=>Do,V:()=>ba,W:()=>Uc,X:()=>wt,Y:()=>So,Z:()=>kp,_:()=>du,a:()=>ed,a0:()=>qc,a1:()=>Wc,a2:()=>Mh,a3:()=>fu,a4:()=>gu,a5:()=>Pp,a6:()=>kh,a7:()=>Mo,a8:()=>zc,a9:()=>Sr,aA:()=>i_,aB:()=>ro,aC:()=>Rs,aD:()=>Tu,aE:()=>ln,aI:()=>vr,aL:()=>gi,aa:()=>tE,ab:()=>Tl,ac:()=>Yc,af:()=>ur,ag:()=>Op,ah:()=>Js,ak:()=>$c,al:()=>Qc,an:()=>Oh,ao:()=>xl,ap:()=>qs,aq:()=>cr,ar:()=>ou,as:()=>pi,at:()=>gn,au:()=>hd,av:()=>ld,aw:()=>mn,ax:()=>Me,ay:()=>Yt,az:()=>Si,b:()=>Ds,c:()=>Ol,d:()=>Wt,e:()=>hs,f:()=>no,g:()=>n_,h:()=>sd,i:()=>Cu,j:()=>r_,k:()=>fd,l:()=>Gh,m:()=>fE,o:()=>Ir,r:()=>A,s:()=>fr,u:()=>ue});var f=V(8239),$=V(3854),O=V(8026);function Ce(E,g){var _={};for(var C in E)Object.prototype.hasOwnProperty.call(E,C)&&g.indexOf(C)<0&&(_[C]=E[C]);if(null!=E&&"function"==typeof Object.getOwnPropertySymbols){var R=0;for(C=Object.getOwnPropertySymbols(E);R<C.length;R++)g.indexOf(C[R])<0&&Object.prototype.propertyIsEnumerable.call(E,C[R])&&(_[C[R]]=E[C[R]])}return _}var Et=V(5422),Ge=V(3910);const Ir={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Pn={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const zi=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},os=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Kt=new $.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Dn=new Et.Yd("@firebase/auth");function Gn(E,...g){Dn.logLevel<=Et.in.ERROR&&Dn.error(`Auth (${O.SDK_VERSION}): ${E}`,...g)}function gn(E,...g){throw Xr(E,...g)}function mn(E,...g){return Xr(E,...g)}function Hs(E,g,_){const C=Object.assign(Object.assign({},os()),{[g]:_});return new $.LL("auth","Firebase",C).create(g,{appName:E.name})}function Jr(E,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&gn(E,"argument-error"),Hs(E,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Xr(E,...g){if("string"!=typeof E){const _=g[0],C=[...g.slice(1)];return C[0]&&(C[0].appName=E.name),E._errorFactory.create(_,...C)}return Kt.create(E,...g)}function Me(E,g,..._){if(!E)throw Xr(g,..._)}function qn(E){const g="INTERNAL ASSERTION FAILED: "+E;throw Gn(g),new Error(g)}function cr(E,g){E||qn(g)}const et=new Map;function Yt(E){cr(E instanceof Function,"Expected a class definition");let g=et.get(E);return g?(cr(g instanceof E,"Instance stored in cache mismatched with class"),g):(g=new E,et.set(E,g),g)}function Zn(){var E;return"undefined"!=typeof self&&(null===(E=self.location)||void 0===E?void 0:E.href)||""}function ws(){return"http:"===On()||"https:"===On()}function On(){var E;return"undefined"!=typeof self&&(null===(E=self.location)||void 0===E?void 0:E.protocol)||null}class cn{constructor(g,_){this.shortDelay=g,this.longDelay=_,cr(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,$.uI)()||(0,$.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ws()||(0,$.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function qe(E,g){cr(E.emulator,"Emulator should always be set here");const{url:_}=E.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class at{static initialize(g,_,C){this.fetchImpl=g,_&&(this.headersImpl=_),C&&(this.responseImpl=C)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void qn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void qn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void qn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const as={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},di=new cn(3e4,6e4);function Jt(E,g){return E.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:E.tenantId}):g}function _t(E,g,_,C){return sr.apply(this,arguments)}function sr(){return(sr=(0,f.Z)(function*(E,g,_,C,R={}){return jn(E,R,(0,f.Z)(function*(){let N={},X={};C&&("GET"===g?X=C:N={body:JSON.stringify(C)});const _e=(0,$.xO)(Object.assign({key:E.config.apiKey},X)).slice(1),je=yield E._getAdditionalHeaders();return je["Content-Type"]="application/json",E.languageCode&&(je["X-Firebase-Locale"]=E.languageCode),at.fetch()(ve(E,E.config.apiHost,_,_e),Object.assign({method:g,headers:je,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function jn(E,g,_){return z.apply(this,arguments)}function z(){return(z=(0,f.Z)(function*(E,g,_){E._canInitEmulator=!1;const C=Object.assign(Object.assign({},as),g);try{const R=new Z(E),N=yield Promise.race([_(),R.promise]);R.clearNetworkTimeout();const X=yield N.json();if("needConfirmation"in X)throw ie(E,"account-exists-with-different-credential",X);if(N.ok&&!("errorMessage"in X))return X;{const _e=N.ok?X.errorMessage:X.error.message,[je,Ve]=_e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===je)throw ie(E,"credential-already-in-use",X);if("EMAIL_EXISTS"===je)throw ie(E,"email-already-in-use",X);if("USER_DISABLED"===je)throw ie(E,"user-disabled",X);const Ke=C[je]||je.toLowerCase().replace(/[_\s]+/g,"-");if(Ve)throw Hs(E,Ke,Ve);gn(E,Ke)}}catch(R){if(R instanceof $.ZR)throw R;gn(E,"network-request-failed")}})).apply(this,arguments)}function G(E,g,_,C){return J.apply(this,arguments)}function J(){return(J=(0,f.Z)(function*(E,g,_,C,R={}){const N=yield _t(E,g,_,C,R);return"mfaPendingCredential"in N&&gn(E,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function ve(E,g,_,C){const R=`${g}${_}?${C}`;return E.config.emulator?qe(E.config,R):`${E.config.apiScheme}://${R}`}class Z{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,C)=>{this.timer=setTimeout(()=>C(mn(this.auth,"network-request-failed")),di.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ie(E,g,_){const C={appName:E.name};_.email&&(C.email=_.email),_.phoneNumber&&(C.phoneNumber=_.phoneNumber);const R=mn(E,g,C);return R.customData._tokenResponse=_,R}function ze(){return(ze=(0,f.Z)(function*(E,g){return _t(E,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function ht(E,g){return xt.apply(this,arguments)}function xt(){return(xt=(0,f.Z)(function*(E,g){return _t(E,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function yn(E,g){return It.apply(this,arguments)}function It(){return(It=(0,f.Z)(function*(E,g){return _t(E,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function dr(E){if(E)try{const g=new Date(Number(E));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function K(){return(K=(0,f.Z)(function*(E,g=!1){const _=(0,$.m9)(E),C=yield _.getIdToken(g),R=He(C);Me(R&&R.exp&&R.auth_time&&R.iat,_.auth,"internal-error");const N="object"==typeof R.firebase?R.firebase:void 0,X=null==N?void 0:N.sign_in_provider;return{claims:R,token:C,authTime:dr(Ae(R.auth_time)),issuedAtTime:dr(Ae(R.iat)),expirationTime:dr(Ae(R.exp)),signInProvider:X||null,signInSecondFactor:(null==N?void 0:N.sign_in_second_factor)||null}})).apply(this,arguments)}function Ae(E){return 1e3*Number(E)}function He(E){const[g,_,C]=E.split(".");if(void 0===g||void 0===_||void 0===C)return Gn("JWT malformed, contained fewer than 3 sections"),null;try{const R=(0,$.tV)(_);return R?JSON.parse(R):(Gn("Failed to decode base64 JWT payload"),null)}catch(R){return Gn("Caught error parsing JWT payload as JSON",R),null}}function kt(E,g){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,f.Z)(function*(E,g,_=!1){if(_)return g;try{return yield g}catch(C){throw C instanceof $.ZR&&un(C)&&E.auth.currentUser===E&&(yield E.auth.signOut()),C}})).apply(this,arguments)}function un({code:E}){return"auth/user-disabled"===E||"auth/user-token-expired"===E}class Fn{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const C=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),C}{this.errorBackoff=3e4;const R=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,R)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const C=this.getInterval(g);this.timerId=setTimeout((0,f.Z)(function*(){yield _.iteration()}),C)}iteration(){var g=this;return(0,f.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_.code&&g.schedule(!0))}g.schedule()})()}}class Ln{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=dr(this.lastLoginAt),this.creationTime=dr(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function $t(E){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,f.Z)(function*(E){var g;const _=E.auth,C=yield E.getIdToken(),R=yield kt(E,yn(_,{idToken:C}));Me(null==R?void 0:R.users.length,_,"internal-error");const N=R.users[0];E._notifyReloadListener(N);const X=(null===(g=N.providerUserInfo)||void 0===g?void 0:g.length)?ei(N.providerUserInfo):[],_e=vn(E.providerData,X),Ke=!!E.isAnonymous&&!(E.email&&N.passwordHash||(null==_e?void 0:_e.length)),hn={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:_e,metadata:new Ln(N.createdAt,N.lastLoginAt),isAnonymous:Ke};Object.assign(E,hn)})).apply(this,arguments)}function Vt(){return(Vt=(0,f.Z)(function*(E){const g=(0,$.m9)(E);yield $t(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function vn(E,g){return[...E.filter(C=>!g.some(R=>R.providerId===C.providerId)),...g]}function ei(E){return E.map(g=>{var{providerId:_}=g,C=Ce(g,["providerId"]);return{providerId:_,uid:C.rawId||"",displayName:C.displayName||null,email:C.email||null,phoneNumber:C.phoneNumber||null,photoURL:C.photoUrl||null}})}function zn(){return(zn=(0,f.Z)(function*(E,g){const _=yield jn(E,{},(0,f.Z)(function*(){const C=(0,$.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:R,apiKey:N}=E.config,X=ve(E,R,"/v1/token",`key=${N}`),_e=yield E._getAdditionalHeaders();return _e["Content-Type"]="application/x-www-form-urlencoded",at.fetch()(X,{method:"POST",headers:_e,body:C})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class hi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){Me(g.idToken,"internal-error"),Me(void 0!==g.idToken,"internal-error"),Me(void 0!==g.refreshToken,"internal-error");const _="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function(E){const g=He(E);return Me(g,"internal-error"),Me(void 0!==g.exp,"internal-error"),Me(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var C=this;return(0,f.Z)(function*(){return Me(!C.accessToken||C.refreshToken,g,"user-token-expired"),_||!C.accessToken||C.isExpired?C.refreshToken?(yield C.refresh(g,C.refreshToken),C.accessToken):null:C.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var C=this;return(0,f.Z)(function*(){const{accessToken:R,refreshToken:N,expiresIn:X}=yield function(E,g){return zn.apply(this,arguments)}(g,_);C.updateTokensAndExpiration(R,N,Number(X))})()}updateTokensAndExpiration(g,_,C){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*C}static fromJSON(g,_){const{refreshToken:C,accessToken:R,expirationTime:N}=_,X=new hi;return C&&(Me("string"==typeof C,"internal-error",{appName:g}),X.refreshToken=C),R&&(Me("string"==typeof R,"internal-error",{appName:g}),X.accessToken=R),N&&(Me("number"==typeof N,"internal-error",{appName:g}),X.expirationTime=N),X}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new hi,this.toJSON())}_performRefresh(){return qn("not implemented")}}function En(E,g){Me("string"==typeof E||void 0===E,"internal-error",{appName:g})}class fi{constructor(g){var{uid:_,auth:C,stsTokenManager:R}=g,N=Ce(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Fn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=C,this.stsTokenManager=R,this.accessToken=R.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new Ln(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,f.Z)(function*(){const C=yield kt(_,_.stsTokenManager.getToken(_.auth,g));return Me(C,_.auth,"internal-error"),_.accessToken!==C&&(_.accessToken=C,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),C})()}getIdTokenResult(g){return function(E){return K.apply(this,arguments)}(this,g)}reload(){return function(E){return Vt.apply(this,arguments)}(this)}_assign(g){this!==g&&(Me(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new fi(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var C=this;return(0,f.Z)(function*(){let R=!1;g.idToken&&g.idToken!==C.stsTokenManager.accessToken&&(C.stsTokenManager.updateFromServerResponse(g),R=!0),_&&(yield $t(C)),yield C.auth._persistUserIfCurrent(C),R&&C.auth._notifyListenersIfCurrent(C)})()}delete(){var g=this;return(0,f.Z)(function*(){const _=yield g.getIdToken();return yield kt(g,function(E,g){return ze.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var C,R,N,X,_e,je,Ve,Ke;const hn=null!==(C=_.displayName)&&void 0!==C?C:void 0,In=null!==(R=_.email)&&void 0!==R?R:void 0,Rr=null!==(N=_.phoneNumber)&&void 0!==N?N:void 0,$o=null!==(X=_.photoURL)&&void 0!==X?X:void 0,Jh=null!==(_e=_.tenantId)&&void 0!==_e?_e:void 0,Xh=null!==(je=_._redirectEventId)&&void 0!==je?je:void 0,d_=null!==(Ve=_.createdAt)&&void 0!==Ve?Ve:void 0,ef=null!==(Ke=_.lastLoginAt)&&void 0!==Ke?Ke:void 0,{uid:io,emailVerified:mE,isAnonymous:Ru,providerData:Nu,stsTokenManager:si}=_;Me(io&&si,g,"internal-error");const Jp=hi.fromJSON(this.name,si);Me("string"==typeof io,g,"internal-error"),En(hn,g.name),En(In,g.name),Me("boolean"==typeof mE,g,"internal-error"),Me("boolean"==typeof Ru,g,"internal-error"),En(Rr,g.name),En($o,g.name),En(Jh,g.name),En(Xh,g.name),En(d_,g.name),En(ef,g.name);const tf=new fi({uid:io,auth:g,email:In,emailVerified:mE,displayName:hn,isAnonymous:Ru,photoURL:$o,phoneNumber:Rr,tenantId:Jh,stsTokenManager:Jp,createdAt:d_,lastLoginAt:ef});return Nu&&Array.isArray(Nu)&&(tf.providerData=Nu.map(Hl=>Object.assign({},Hl))),Xh&&(tf._redirectEventId=Xh),tf}static _fromIdTokenResponse(g,_,C=!1){return(0,f.Z)(function*(){const R=new hi;R.updateFromServerResponse(_);const N=new fi({uid:_.localId,auth:g,stsTokenManager:R,isAnonymous:C});return yield $t(N),N})()}}const Dt=(()=>{class E{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(_,C){var R=this;return(0,f.Z)(function*(){R.storage[_]=C})()}_get(_){var C=this;return(0,f.Z)(function*(){const R=C.storage[_];return void 0===R?null:R})()}_remove(_){var C=this;return(0,f.Z)(function*(){delete C.storage[_]})()}_addListener(_,C){}_removeListener(_,C){}}return E.type="NONE",E})();function Si(E,g,_){return`firebase:${E}:${g}:${_}`}class xi{constructor(g,_,C){this.persistence=g,this.auth=_,this.userKey=C;const{config:R,name:N}=this.auth;this.fullUserKey=Si(this.userKey,R.apiKey,N),this.fullPersistenceKey=Si("persistence",R.apiKey,N),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,f.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?fi._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,f.Z)(function*(){if(_.persistence===g)return;const C=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,C?_.setCurrentUser(C):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,C="authUser"){return(0,f.Z)(function*(){if(!_.length)return new xi(Yt(Dt),g,C);const R=(yield Promise.all(_.map(function(){var Ve=(0,f.Z)(function*(Ke){if(yield Ke._isAvailable())return Ke});return function(Ke){return Ve.apply(this,arguments)}}()))).filter(Ve=>Ve);let N=R[0]||Yt(Dt);const X=Si(C,g.config.apiKey,g.name);let _e=null;for(const Ve of _)try{const Ke=yield Ve._get(X);if(Ke){const hn=fi._fromJSON(g,Ke);Ve!==N&&(_e=hn),N=Ve;break}}catch(Ke){}const je=R.filter(Ve=>Ve._shouldAllowMigration);return N._shouldAllowMigration&&je.length?(N=je[0],_e&&(yield N._set(X,_e.toJSON())),yield Promise.all(_.map(function(){var Ve=(0,f.Z)(function*(Ke){if(Ke!==N)try{yield Ke._remove(X)}catch(hn){}});return function(Ke){return Ve.apply(this,arguments)}}())),new xi(N,g,C)):new xi(N,g,C)})()}}function yr(E){const g=E.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Gs(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(fa(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(dn(g))return"Blackberry";if(vh(g))return"Webos";if(Tr(g))return"Safari";if((g.includes("chrome/")||pa(g))&&!g.includes("edge/"))return"Chrome";if(pi(g))return"Android";{const C=E.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==C?void 0:C.length))return C[1]}return"Other"}function fa(E=(0,$.z$)()){return/firefox\//i.test(E)}function Tr(E=(0,$.z$)()){const g=E.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function pa(E=(0,$.z$)()){return/crios\//i.test(E)}function Gs(E=(0,$.z$)()){return/iemobile/i.test(E)}function pi(E=(0,$.z$)()){return/android/i.test(E)}function dn(E=(0,$.z$)()){return/blackberry/i.test(E)}function vh(E=(0,$.z$)()){return/webos/i.test(E)}function ou(E=(0,$.z$)()){return/iphone|ipad|ipod/i.test(E)}function qs(E=(0,$.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(E)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(E)}function bs(E=(0,$.z$)()){return ou(E)||pi(E)||vh(E)||dn(E)||/windows phone/i.test(E)||Gs(E)}function Dr(E,g=[]){let _;switch(E){case"Browser":_=yr((0,$.z$)());break;case"Worker":_=`${yr((0,$.z$)())}-${E}`;break;default:_=E}const C=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${O.SDK_VERSION}/${C}`}class Wm{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,_){const C=N=>new Promise((X,_e)=>{try{X(g(N))}catch(je){_e(je)}});C.onAbort=_,this.queue.push(C);const R=this.queue.length-1;return()=>{this.queue[R]=()=>Promise.resolve()}}runMiddleware(g){var _=this;return(0,f.Z)(function*(){if(_.auth.currentUser===g)return;const C=[];try{for(const R of _.queue)yield R(g),R.onAbort&&C.push(R.onAbort)}catch(R){C.reverse();for(const N of C)try{N()}catch(X){}throw _.auth._errorFactory.create("login-blocked",{originalMessage:R.message})}})()}}class Zs{constructor(g,_,C){this.app=g,this.heartbeatServiceProvider=_,this.config=C,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Rc(this),this.idTokenSubscription=new Rc(this),this.beforeStateQueue=new Wm(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Kt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=C.sdkClientVersion}_initializeWithPersistence(g,_){var C=this;return _&&(this._popupRedirectResolver=Yt(_)),this._initializationPromise=this.queue((0,f.Z)(function*(){var R,N;if(!C._deleted&&(C.persistenceManager=yield xi.create(C,g),!C._deleted)){if(null===(R=C._popupRedirectResolver)||void 0===R?void 0:R._shouldInitProactively)try{yield C._popupRedirectResolver._initialize(C)}catch(X){}yield C.initializeCurrentUser(_),C.lastNotifiedUid=(null===(N=C.currentUser)||void 0===N?void 0:N.uid)||null,!C._deleted&&(C._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,f.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_,!0)}})()}initializeCurrentUser(g){var _=this;return(0,f.Z)(function*(){var C;const R=yield _.assertedPersistence.getCurrentUser();let N=R,X=!1;if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const _e=null===(C=_.redirectUser)||void 0===C?void 0:C._redirectEventId,je=null==N?void 0:N._redirectEventId,Ve=yield _.tryRedirectSignIn(g);(!_e||_e===je)&&(null==Ve?void 0:Ve.user)&&(N=Ve.user,X=!0)}if(!N)return _.directlySetCurrentUser(null);if(!N._redirectEventId){if(X)try{yield _.beforeStateQueue.runMiddleware(N)}catch(_e){N=R,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(_e))}return N?_.reloadAndSetCurrentUserOrClear(N):_.directlySetCurrentUser(null)}return Me(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===N._redirectEventId?_.directlySetCurrentUser(N):_.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(g){var _=this;return(0,f.Z)(function*(){let C=null;try{C=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch(R){yield _._setRedirectUser(null)}return C})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,f.Z)(function*(){try{yield $t(g)}catch(C){if("auth/network-request-failed"!==C.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const E=navigator;return E.languages&&E.languages[0]||E.language||null}()}_delete(){var g=this;return(0,f.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,f.Z)(function*(){const C=g?(0,$.m9)(g):null;return C&&Me(C.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(C&&C._clone(_))})()}_updateCurrentUser(g,_=!1){var C=this;return(0,f.Z)(function*(){if(!C._deleted)return g&&Me(C.tenantId===g.tenantId,C,"tenant-id-mismatch"),_||(yield C.beforeStateQueue.runMiddleware(g)),C.queue((0,f.Z)(function*(){yield C.directlySetCurrentUser(g),C.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,f.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var _=this;return this.queue((0,f.Z)(function*(){yield _.assertedPersistence.setPersistence(Yt(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new $.LL("auth","Firebase",g())}onAuthStateChanged(g,_,C){return this.registerStateListener(this.authStateSubscription,g,_,C)}beforeAuthStateChanged(g,_){return this.beforeStateQueue.pushCallback(g,_)}onIdTokenChanged(g,_,C){return this.registerStateListener(this.idTokenSubscription,g,_,C)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var C=this;return(0,f.Z)(function*(){const R=yield C.getOrInitRedirectPersistenceManager(_);return null===g?R.removeCurrentUser():R.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,f.Z)(function*(){if(!_.redirectPersistenceManager){const C=g&&Yt(g)||_._popupRedirectResolver;Me(C,_,"argument-error"),_.redirectPersistenceManager=yield xi.create(_,[Yt(C._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,f.Z)(function*(){var C,R;return _._isInitialized&&(yield _.queue((0,f.Z)(function*(){}))),(null===(C=_._currentUser)||void 0===C?void 0:C._redirectEventId)===g?_._currentUser:(null===(R=_.redirectUser)||void 0===R?void 0:R._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,f.Z)(function*(){if(g===_.currentUser)return _.queue((0,f.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const C=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==C&&(this.lastNotifiedUid=C,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,C,R){if(this._deleted)return()=>{};const N="function"==typeof _?_:_.next.bind(_),X=this._isInitialized?Promise.resolve():this._initializationPromise;return Me(X,this,"internal-error"),X.then(()=>N(this.currentUser)),"function"==typeof _?g.addObserver(_,C,R):g.addObserver(_)}directlySetCurrentUser(g){var _=this;return(0,f.Z)(function*(){_.currentUser&&_.currentUser!==g&&(_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh()),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Dr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,f.Z)(function*(){var _;const C={"X-Client-Version":g.clientVersion};g.app.options.appId&&(C["X-Firebase-gmpid"]=g.app.options.appId);const R=yield null===(_=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return R&&(C["X-Firebase-Client"]=R),C})()}}function ln(E){return(0,$.m9)(E)}class Rc{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,$.ne)(_=>this.observer=_)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function gl(E,g,_){const C=ln(E);Me(C._canInitEmulator,C,"emulator-config-failed"),Me(/^https?:\/\//.test(g),C,"invalid-emulator-scheme");const R=!!(null==_?void 0:_.disableWarnings),N=au(g),{host:X,port:_e}=function(E){const g=au(E),_=/(\/\/)?([^?#/]+)/.exec(E.substr(g.length));if(!_)return{host:"",port:null};const C=_[2].split("@").pop()||"",R=/^(\[[^\]]+\])(:|$)/.exec(C);if(R){const N=R[1];return{host:N,port:Ri(C.substr(N.length+1))}}{const[N,X]=C.split(":");return{host:N,port:Ri(X)}}}(g);C.config.emulator={url:`${N}//${X}${null===_e?"":`:${_e}`}/`},C.settings.appVerificationDisabledForTesting=!0,C.emulatorConfig=Object.freeze({host:X,port:_e,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:R})}),R||function(){function E(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",E):E())}()}function au(E){const g=E.indexOf(":");return g<0?"":E.substr(0,g+1)}function Ri(E){if(!E)return null;const g=Number(E);return isNaN(g)?null:g}class ma{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return qn("not implemented")}_getIdTokenResponse(g){return qn("not implemented")}_linkToIdToken(g,_){return qn("not implemented")}_getReauthenticationResolver(g){return qn("not implemented")}}function Eh(E,g){return wh.apply(this,arguments)}function wh(){return(wh=(0,f.Z)(function*(E,g){return _t(E,"POST","/v1/accounts:resetPassword",Jt(E,g))})).apply(this,arguments)}function Rp(E,g){return bh.apply(this,arguments)}function bh(){return(bh=(0,f.Z)(function*(E,g){return _t(E,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Nc(E,g){return zs.apply(this,arguments)}function zs(){return(zs=(0,f.Z)(function*(E,g){return _t(E,"POST","/v1/accounts:update",Jt(E,g))})).apply(this,arguments)}function Ch(){return(Ch=(0,f.Z)(function*(E,g){return G(E,"POST","/v1/accounts:signInWithPassword",Jt(E,g))})).apply(this,arguments)}function Mc(E,g){return Ih.apply(this,arguments)}function Ih(){return(Ih=(0,f.Z)(function*(E,g){return _t(E,"POST","/v1/accounts:sendOobCode",Jt(E,g))})).apply(this,arguments)}function Km(E,g){return Th.apply(this,arguments)}function Th(){return(Th=(0,f.Z)(function*(E,g){return Mc(E,g)})).apply(this,arguments)}function eE(E,g){return ml.apply(this,arguments)}function ml(){return(ml=(0,f.Z)(function*(E,g){return Mc(E,g)})).apply(this,arguments)}function Np(E,g){return _a.apply(this,arguments)}function _a(){return(_a=(0,f.Z)(function*(E,g){return Mc(E,g)})).apply(this,arguments)}function kc(E,g){return Dh.apply(this,arguments)}function Dh(){return(Dh=(0,f.Z)(function*(E,g){return Mc(E,g)})).apply(this,arguments)}function _l(){return(_l=(0,f.Z)(function*(E,g){return G(E,"POST","/v1/accounts:signInWithEmailLink",Jt(E,g))})).apply(this,arguments)}function Oc(){return(Oc=(0,f.Z)(function*(E,g){return G(E,"POST","/v1/accounts:signInWithEmailLink",Jt(E,g))})).apply(this,arguments)}class bo extends ma{constructor(g,_,C,R=null){super("password",C),this._email=g,this._password=_,this._tenantId=R}static _fromEmailAndPassword(g,_){return new bo(g,_,"password")}static _fromEmailAndCode(g,_,C=null){return new bo(g,_,"emailLink",C)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,f.Z)(function*(){switch(_.signInMethod){case"password":return function(E,g){return Ch.apply(this,arguments)}(g,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function(E,g){return _l.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:gn(g,"internal-error")}})()}_linkToIdToken(g,_){var C=this;return(0,f.Z)(function*(){switch(C.signInMethod){case"password":return Rp(g,{idToken:_,returnSecureToken:!0,email:C._email,password:C._password});case"emailLink":return function(E,g){return Oc.apply(this,arguments)}(g,{idToken:_,email:C._email,oobCode:C._password});default:gn(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Ki(E,g){return Ah.apply(this,arguments)}function Ah(){return(Ah=(0,f.Z)(function*(E,g){return G(E,"POST","/v1/accounts:signInWithIdp",Jt(E,g))})).apply(this,arguments)}class or extends ma{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new or(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):gn("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:C,signInMethod:R}=_,N=Ce(_,["providerId","signInMethod"]);if(!C||!R)return null;const X=new or(C,R);return X.idToken=N.idToken||void 0,X.accessToken=N.accessToken||void 0,X.secret=N.secret,X.nonce=N.nonce,X.pendingToken=N.pendingToken||null,X}_getIdTokenResponse(g){return Ki(g,this.buildRequest())}_linkToIdToken(g,_){const C=this.buildRequest();return C.idToken=_,Ki(g,C)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,Ki(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,$.xO)(_)}return g}}function Mp(E,g){return va.apply(this,arguments)}function va(){return(va=(0,f.Z)(function*(E,g){return _t(E,"POST","/v1/accounts:sendVerificationCode",Jt(E,g))})).apply(this,arguments)}function Fc(){return(Fc=(0,f.Z)(function*(E,g){return G(E,"POST","/v1/accounts:signInWithPhoneNumber",Jt(E,g))})).apply(this,arguments)}function Co(){return(Co=(0,f.Z)(function*(E,g){const _=yield G(E,"POST","/v1/accounts:signInWithPhoneNumber",Jt(E,g));if(_.temporaryProof)throw ie(E,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const xh={USER_NOT_FOUND:"user-not-found"};function Lc(){return(Lc=(0,f.Z)(function*(E,g){return G(E,"POST","/v1/accounts:signInWithPhoneNumber",Jt(E,Object.assign(Object.assign({},g),{operation:"REAUTH"})),xh)})).apply(this,arguments)}class ti extends ma{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new ti({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new ti({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function(E,g){return Fc.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function(E,g){return Co.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function(E,g){return Lc.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:C,verificationCode:R}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:C,code:R}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:C,phoneNumber:R,temporaryProof:N}=g;return C||_||R||N?new ti({verificationId:_,verificationCode:C,phoneNumber:R,temporaryProof:N}):null}}class Io{constructor(g){var _,C,R,N,X,_e;const je=(0,$.zd)((0,$.pd)(g)),Ve=null!==(_=je.apiKey)&&void 0!==_?_:null,Ke=null!==(C=je.oobCode)&&void 0!==C?C:null,hn=function(E){switch(E){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(R=je.mode)&&void 0!==R?R:null);Me(Ve&&Ke&&hn,"argument-error"),this.apiKey=Ve,this.operation=hn,this.code=Ke,this.continueUrl=null!==(N=je.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(X=je.languageCode)&&void 0!==X?X:null,this.tenantId=null!==(_e=je.tenantId)&&void 0!==_e?_e:null}static parseLink(g){const _=function(E){const g=(0,$.zd)((0,$.pd)(E)).link,_=g?(0,$.zd)((0,$.pd)(g)).deep_link_id:null,C=(0,$.zd)((0,$.pd)(E)).deep_link_id;return(C?(0,$.zd)((0,$.pd)(C)).link:null)||C||_||g||E}(g);try{return new Io(_)}catch(C){return null}}}let uu=(()=>{class E{constructor(){this.providerId=E.PROVIDER_ID}static credential(_,C){return bo._fromEmailAndPassword(_,C)}static credentialWithLink(_,C){const R=Io.parseLink(C);return Me(R,"argument-error"),bo._fromEmailAndCode(_,R.code,R.tenantId)}}return E.PROVIDER_ID="password",E.EMAIL_PASSWORD_SIGN_IN_METHOD="password",E.EMAIL_LINK_SIGN_IN_METHOD="emailLink",E})();class Xt{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Ea extends Xt{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Do extends Ea{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return Me("providerId"in _&&"signInMethod"in _,"argument-error"),or._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return Me(g.idToken||g.accessToken,"argument-error"),or._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Do.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Do.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:C,oauthTokenSecret:R,pendingToken:N,nonce:X,providerId:_e}=g;if(!C&&!R&&!_&&!N||!_e)return null;try{return new Do(_e)._credential({idToken:_,accessToken:C,nonce:X,pendingToken:N})}catch(je){return null}}}let wa=(()=>{class E extends Ea{constructor(){super("facebook.com")}static credential(_){return or._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return E.credential(_.oauthAccessToken)}catch(C){return null}}}return E.FACEBOOK_SIGN_IN_METHOD="facebook.com",E.PROVIDER_ID="facebook.com",E})(),Ni=(()=>{class E extends Ea{constructor(){super("google.com"),this.addScope("profile")}static credential(_,C){return or._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:C})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:C,oauthAccessToken:R}=_;if(!C&&!R)return null;try{return E.credential(C,R)}catch(N){return null}}}return E.GOOGLE_SIGN_IN_METHOD="google.com",E.PROVIDER_ID="google.com",E})(),ar=(()=>{class E extends Ea{constructor(){super("github.com")}static credential(_){return or._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return E.credential(_.oauthAccessToken)}catch(C){return null}}}return E.GITHUB_SIGN_IN_METHOD="github.com",E.PROVIDER_ID="github.com",E})();class gi extends ma{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return Ki(g,this.buildRequest())}_linkToIdToken(g,_){const C=this.buildRequest();return C.idToken=_,Ki(g,C)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,Ki(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:C,signInMethod:R,pendingToken:N}=_;return C&&R&&N&&C===R?new gi(C,N):null}static _create(g,_){return new gi(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ba extends Xt{constructor(g){Me(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return ba.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return ba.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=gi.fromJSON(g);return Me(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:C}=g;if(!_||!C)return null;try{return gi._create(C,_)}catch(R){return null}}}let Uc=(()=>{class E extends Ea{constructor(){super("twitter.com")}static credential(_,C){return or._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:C})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:C,oauthTokenSecret:R}=_;if(!C||!R)return null;try{return E.credential(C,R)}catch(N){return null}}}return E.TWITTER_SIGN_IN_METHOD="twitter.com",E.PROVIDER_ID="twitter.com",E})();function Ao(E,g){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,f.Z)(function*(E,g){return G(E,"POST","/v1/accounts:signUp",Jt(E,g))})).apply(this,arguments)}class jr{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,C,R=!1){return(0,f.Z)(function*(){const N=yield fi._fromIdTokenResponse(g,C,R),X=Ca(C);return new jr({user:N,providerId:X,_tokenResponse:C,operationType:_})})()}static _forOperation(g,_,C){return(0,f.Z)(function*(){yield g._updateTokensIfNecessary(C,!0);const R=Ca(C);return new jr({user:g,providerId:R,_tokenResponse:C,operationType:_})})()}}function Ca(E){return E.providerId?E.providerId:"phoneNumber"in E?"phone":null}function wt(E){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,f.Z)(function*(E){var g;const _=ln(E);if(yield _._initializationPromise,null===(g=_.currentUser)||void 0===g?void 0:g.isAnonymous)return new jr({user:_.currentUser,providerId:null,operationType:"signIn"});const C=yield Ao(_,{returnSecureToken:!0}),R=yield jr._fromIdTokenResponse(_,"signIn",C,!0);return yield _._updateCurrentUser(R.user),R})).apply(this,arguments)}class vl extends $.ZR{constructor(g,_,C,R){var N;super(_.code,_.message),this.operationType=C,this.user=R,Object.setPrototypeOf(this,vl.prototype),this.customData={appName:g.name,tenantId:null!==(N=g.tenantId)&&void 0!==N?N:void 0,_serverResponse:_.customData._serverResponse,operationType:C}}static _fromErrorAndOperation(g,_,C,R){return new vl(g,_,C,R)}}function El(E,g,_,C){return("reauthenticate"===g?_._getReauthenticationResolver(E):_._getIdTokenResponse(E)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?vl._fromErrorAndOperation(E,N,g,C):N})}function jc(E){return new Set(E.map(({providerId:g})=>g).filter(g=>!!g))}function $c(E,g){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,f.Z)(function*(E,g){const _=(0,$.m9)(E);yield Ft(!0,_,g);const{providerUserInfo:C}=yield ht(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),R=jc(C||[]);return _.providerData=_.providerData.filter(N=>R.has(N.providerId)),R.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function Cs(E,g){return Se.apply(this,arguments)}function Se(){return(Se=(0,f.Z)(function*(E,g,_=!1){const C=yield kt(E,g._linkToIdToken(E.auth,yield E.getIdToken()),_);return jr._forOperation(E,"link",C)})).apply(this,arguments)}function Ft(E,g,_){return lu.apply(this,arguments)}function lu(){return(lu=(0,f.Z)(function*(E,g,_){yield $t(g);const R=!1===E?"provider-already-linked":"no-such-provider";Me(jc(g.providerData).has(_)===E,g.auth,R)})).apply(this,arguments)}function Cn(E,g){return cu.apply(this,arguments)}function cu(){return(cu=(0,f.Z)(function*(E,g,_=!1){const{auth:C}=E,R="reauthenticate";try{const N=yield kt(E,El(C,R,g,E),_);Me(N.idToken,C,"internal-error");const X=He(N.idToken);Me(X,C,"internal-error");const{sub:_e}=X;return Me(E.uid===_e,C,"user-mismatch"),jr._forOperation(E,R,N)}catch(N){throw"auth/user-not-found"===(null==N?void 0:N.code)&&gn(C,"user-mismatch"),N}})).apply(this,arguments)}function Is(E,g){return ni.apply(this,arguments)}function ni(){return(ni=(0,f.Z)(function*(E,g,_=!1){const C="signIn",R=yield El(E,C,g),N=yield jr._fromIdTokenResponse(E,C,R);return _||(yield E._updateCurrentUser(N.user)),N})).apply(this,arguments)}function So(E,g){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,f.Z)(function*(E,g){return Is(ln(E),g)})).apply(this,arguments)}function kp(E,g){return wl.apply(this,arguments)}function wl(){return(wl=(0,f.Z)(function*(E,g){const _=(0,$.m9)(E);return yield Ft(!1,_,g.providerId),Cs(_,g)})).apply(this,arguments)}function du(E,g){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,f.Z)(function*(E,g){return Cn((0,$.m9)(E),g)})).apply(this,arguments)}function hr(E,g){return ri.apply(this,arguments)}function ri(){return(ri=(0,f.Z)(function*(E,g){return G(E,"POST","/v1/accounts:signInWithCustomToken",Jt(E,g))})).apply(this,arguments)}function Gc(E,g){return ls.apply(this,arguments)}function ls(){return(ls=(0,f.Z)(function*(E,g){const _=ln(E),C=yield hr(_,{token:g,returnSecureToken:!0}),R=yield jr._fromIdTokenResponse(_,"signIn",C);return yield _._updateCurrentUser(R.user),R})).apply(this,arguments)}class Ar{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?Nh._fromServerResponse(g,_):gn(g,"internal-error")}}class Nh extends Ar{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new Nh(_)}}function xo(E,g,_){var C;Me((null===(C=_.url)||void 0===C?void 0:C.length)>0,E,"invalid-continue-uri"),Me(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,E,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(Me(_.iOS.bundleId.length>0,E,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(Me(_.android.packageName.length>0,E,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function qc(E,g,_){return hu.apply(this,arguments)}function hu(){return(hu=(0,f.Z)(function*(E,g,_){const C=(0,$.m9)(E),R={requestType:"PASSWORD_RESET",email:g};_&&xo(C,R,_),yield eE(C,R)})).apply(this,arguments)}function Wc(E,g,_){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,f.Z)(function*(E,g,_){yield Eh((0,$.m9)(E),{oobCode:g,newPassword:_})})).apply(this,arguments)}function Mh(E,g){return No.apply(this,arguments)}function No(){return(No=(0,f.Z)(function*(E,g){yield Nc((0,$.m9)(E),{oobCode:g})})).apply(this,arguments)}function fu(E,g){return pu.apply(this,arguments)}function pu(){return(pu=(0,f.Z)(function*(E,g){const _=(0,$.m9)(E),C=yield Eh(_,{oobCode:g}),R=C.requestType;switch(Me(R,_,"internal-error"),R){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Me(C.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Me(C.mfaInfo,_,"internal-error");default:Me(C.email,_,"internal-error")}let N=null;return C.mfaInfo&&(N=Ar._fromServerResponse(ln(_),C.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.newEmail:C.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.email:C.newEmail)||null,multiFactorInfo:N},operation:R}})).apply(this,arguments)}function gu(E,g){return bl.apply(this,arguments)}function bl(){return(bl=(0,f.Z)(function*(E,g){const{data:_}=yield fu((0,$.m9)(E),g);return _.email})).apply(this,arguments)}function Pp(E,g,_){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,f.Z)(function*(E,g,_){const C=ln(E),R=yield Ao(C,{returnSecureToken:!0,email:g,password:_}),N=yield jr._fromIdTokenResponse(C,"signIn",R);return yield C._updateCurrentUser(N.user),N})).apply(this,arguments)}function kh(E,g,_){return So((0,$.m9)(E),uu.credential(g,_))}function Mo(E,g,_){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,f.Z)(function*(E,g,_){const C=(0,$.m9)(E),R={requestType:"EMAIL_SIGNIN",email:g};Me(_.handleCodeInApp,C,"argument-error"),_&&xo(C,R,_),yield Np(C,R)})).apply(this,arguments)}function zc(E,g){const _=Io.parseLink(g);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}function Sr(E,g,_){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,f.Z)(function*(E,g,_){const C=(0,$.m9)(E),R=uu.credentialWithLink(g,_||Zn());return Me(R._tenantId===(C.tenantId||null),C,"tenant-id-mismatch"),So(C,R)})).apply(this,arguments)}function Kn(E,g){return Il.apply(this,arguments)}function Il(){return(Il=(0,f.Z)(function*(E,g){return _t(E,"POST","/v1/accounts:createAuthUri",Jt(E,g))})).apply(this,arguments)}function tE(E,g){return Ph.apply(this,arguments)}function Ph(){return(Ph=(0,f.Z)(function*(E,g){const C={identifier:g,continueUri:ws()?Zn():"http://localhost"},{signinMethods:R}=yield Kn((0,$.m9)(E),C);return R||[]})).apply(this,arguments)}function Tl(E,g){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,f.Z)(function*(E,g){const _=(0,$.m9)(E),R={requestType:"VERIFY_EMAIL",idToken:yield E.getIdToken()};g&&xo(_.auth,R,g);const{email:N}=yield Km(_.auth,R);N!==E.email&&(yield E.reload())})).apply(this,arguments)}function Yc(E,g,_){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,f.Z)(function*(E,g,_){const C=(0,$.m9)(E),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield E.getIdToken(),newEmail:g};_&&xo(C.auth,N,_);const{email:X}=yield kc(C.auth,N);X!==E.email&&(yield E.reload())})).apply(this,arguments)}function Da(E,g){return ko.apply(this,arguments)}function ko(){return(ko=(0,f.Z)(function*(E,g){return _t(E,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function ur(E,g){return mu.apply(this,arguments)}function mu(){return(mu=(0,f.Z)(function*(E,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const C=(0,$.m9)(E),N={idToken:yield C.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},X=yield kt(C,Da(C.auth,N));C.displayName=X.displayName||null,C.photoURL=X.photoUrl||null;const _e=C.providerData.find(({providerId:je})=>"password"===je);_e&&(_e.displayName=C.displayName,_e.photoURL=C.photoURL),yield C._updateTokensIfNecessary(X)})).apply(this,arguments)}function Op(E,g){return _u((0,$.m9)(E),g,null)}function Js(E,g){return _u((0,$.m9)(E),null,g)}function _u(E,g,_){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,f.Z)(function*(E,g,_){const{auth:C}=E,N={idToken:yield E.getIdToken(),returnSecureToken:!0};g&&(N.email=g),_&&(N.password=_);const X=yield kt(E,Rp(C,N));yield E._updateTokensIfNecessary(X,!0)})).apply(this,arguments)}class Mi{constructor(g,_,C={}){this.isNewUser=g,this.providerId=_,this.profile=C}}class Al extends Mi{constructor(g,_,C,R){super(g,_,C),this.username=R}}class Lp extends Mi{constructor(g,_){super(g,"facebook.com",_)}}class Ym extends Al{constructor(g,_){super(g,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class Qm extends Mi{constructor(g,_){super(g,"google.com",_)}}class Ji extends Al{constructor(g,_,C){super(g,"twitter.com",_,C)}}function Qc(E){const{user:g,_tokenResponse:_}=E;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function(E){var g,_;if(!E)return null;const{providerId:C}=E,R=E.rawUserInfo?JSON.parse(E.rawUserInfo):{},N=E.isNewUser||"identitytoolkit#SignupNewUserResponse"===E.kind;if(!C&&(null==E?void 0:E.idToken)){const X=null===(_=null===(g=He(E.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(X)return new Mi(N,"anonymous"!==X&&"custom"!==X?X:null)}if(!C)return null;switch(C){case"facebook.com":return new Lp(N,R);case"github.com":return new Ym(N,R);case"google.com":return new Qm(N,R);case"twitter.com":return new Ji(N,R,E.screenName||null);case"custom":case"anonymous":return new Mi(N,null);default:return new Mi(N,C,R)}}(_)}class ki{constructor(g,_){this.type=g,this.credential=_}static _fromIdtoken(g){return new ki("enroll",g)}static _fromMfaPendingCredential(g){return new ki("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,C;if(null==g?void 0:g.multiFactorSession){if(null===(_=g.multiFactorSession)||void 0===_?void 0:_.pendingCredential)return ki._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(C=g.multiFactorSession)||void 0===C?void 0:C.idToken)return ki._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Bp{constructor(g,_,C){this.session=g,this.hints=_,this.signInResolver=C}static _fromError(g,_){const C=ln(g),R=_.customData._serverResponse,N=(R.mfaInfo||[]).map(_e=>Ar._fromServerResponse(C,_e));Me(R.mfaPendingCredential,C,"internal-error");const X=ki._fromMfaPendingCredential(R.mfaPendingCredential);return new Bp(X,N,function(){var _e=(0,f.Z)(function*(je){const Ve=yield je._process(C,X);delete R.mfaInfo,delete R.mfaPendingCredential;const Ke=Object.assign(Object.assign({},R),{idToken:Ve.idToken,refreshToken:Ve.refreshToken});switch(_.operationType){case"signIn":const hn=yield jr._fromIdTokenResponse(C,_.operationType,Ke);return yield C._updateCurrentUser(hn.user),hn;case"reauthenticate":return Me(_.user,C,"internal-error"),jr._forOperation(_.user,_.operationType,Ke);default:gn(C,"internal-error")}});return function(je){return _e.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,f.Z)(function*(){return _.signInResolver(g)})()}}function Oh(E,g){var _;const C=(0,$.m9)(E),R=g;return Me(g.customData.operationType,C,"argument-error"),Me(null===(_=R.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,C,"argument-error"),Bp._fromError(C,R)}function jp(E,g){return _t(E,"POST","/v2/accounts/mfaEnrollment:start",Jt(E,g))}class Po{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(C=>Ar._fromServerResponse(g.auth,C)))})}static _fromUser(g){return new Po(g)}getSession(){var g=this;return(0,f.Z)(function*(){return ki._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,_){var C=this;return(0,f.Z)(function*(){const R=g,N=yield C.getSession(),X=yield kt(C.user,R._process(C.user.auth,N,_));return yield C.user._updateTokensIfNecessary(X),C.user.reload()})()}unenroll(g){var _=this;return(0,f.Z)(function*(){const C="string"==typeof g?g:g.uid,R=yield _.user.getIdToken(),N=yield kt(_.user,function(E,g){return _t(E,"POST","/v2/accounts/mfaEnrollment:withdraw",Jt(E,g))}(_.user.auth,{idToken:R,mfaEnrollmentId:C}));_.enrolledFactors=_.enrolledFactors.filter(({uid:X})=>X!==C),yield _.user._updateTokensIfNecessary(N);try{yield _.user.reload()}catch(X){if("auth/user-token-expired"!==X.code)throw X}})()}}const Sa=new WeakMap;function xl(E){const g=(0,$.m9)(E);return Sa.has(g)||Sa.set(g,Po._fromUser(g)),Sa.get(g)}const Ut="__sak";class ut{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Ut,"1"),this.storage.removeItem(Ut),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ds=(()=>{class E extends ut{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,C)=>this.onStorageEvent(_,C),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const E=(0,$.z$)();return Tr(E)||ou(E)}()&&function(){try{return!(!window||window===window.top)}catch(E){return!1}}(),this.fallbackToPolling=bs(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const C of Object.keys(this.listeners)){const R=this.storage.getItem(C),N=this.localCache[C];R!==N&&_(C,N,R)}}onStorageEvent(_,C=!1){if(!_.key)return void this.forAllChangedKeys((_e,je,Ve)=>{this.notifyListeners(_e,Ve)});const R=_.key;if(C?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const _e=this.storage.getItem(R);if(_.newValue!==_e)null!==_.newValue?this.storage.setItem(R,_.newValue):this.storage.removeItem(R);else if(this.localCache[R]===_.newValue&&!C)return}const N=()=>{const _e=this.storage.getItem(R);!C&&this.localCache[R]===_e||this.notifyListeners(R,_e)},X=this.storage.getItem(R);(0,$.w1)()&&10===document.documentMode&&X!==_.newValue&&_.newValue!==_.oldValue?setTimeout(N,10):N()}notifyListeners(_,C){this.localCache[_]=C;const R=this.listeners[_];if(R)for(const N of Array.from(R))N(C&&JSON.parse(C))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,C,R)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:C,newValue:R}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,C){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(C)}_removeListener(_,C){this.listeners[_]&&(this.listeners[_].delete(C),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,C){var R=()=>super._set,N=this;return(0,f.Z)(function*(){yield R().call(N,_,C),N.localCache[_]=JSON.stringify(C)})()}_get(_){var C=()=>super._get,R=this;return(0,f.Z)(function*(){const N=yield C().call(R,_);return R.localCache[_]=JSON.stringify(N),N})()}_remove(_){var C=()=>super._remove,R=this;return(0,f.Z)(function*(){yield C().call(R,_),delete R.localCache[_]})()}}return E.type="LOCAL",E})(),ed=(()=>{class E extends ut{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,C){}_removeListener(_,C){}}return E.type="SESSION",E})();let vu=(()=>{class E{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const C=this.receivers.find(N=>N.isListeningto(_));if(C)return C;const R=new E(_);return this.receivers.push(R),R}isListeningto(_){return this.eventTarget===_}handleEvent(_){var C=this;return(0,f.Z)(function*(){const R=_,{eventId:N,eventType:X,data:_e}=R.data,je=C.handlersMap[X];if(!(null==je?void 0:je.size))return;R.ports[0].postMessage({status:"ack",eventId:N,eventType:X});const Ve=Array.from(je).map(function(){var hn=(0,f.Z)(function*(In){return In(R.origin,_e)});return function(In){return hn.apply(this,arguments)}}()),Ke=yield function(E){return Promise.all(E.map(function(){var g=(0,f.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(C){return{fulfilled:!1,reason:C}}});return function(_){return g.apply(this,arguments)}}()))}(Ve);R.ports[0].postMessage({status:"done",eventId:N,eventType:X,response:Ke})})()}_subscribe(_,C){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(C)}_unsubscribe(_,C){this.handlersMap[_]&&C&&this.handlersMap[_].delete(C),(!C||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return E.receivers=[],E})();function vr(E="",g=10){let _="";for(let C=0;C<g;C++)_+=Math.floor(10*Math.random());return E+_}class Eu{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,C=50){var R=this;return(0,f.Z)(function*(){const N="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let X,_e;return new Promise((je,Ve)=>{const Ke=vr("",20);N.port1.start();const hn=setTimeout(()=>{Ve(new Error("unsupported_event"))},C);_e={messageChannel:N,onMessage(In){const Rr=In;if(Rr.data.eventId===Ke)switch(Rr.data.status){case"ack":clearTimeout(hn),X=setTimeout(()=>{Ve(new Error("timeout"))},3e3);break;case"done":clearTimeout(X),je(Rr.data.response);break;default:clearTimeout(hn),clearTimeout(X),Ve(new Error("invalid_response"))}}},R.handlers.add(_e),N.port1.addEventListener("message",_e.onMessage),R.target.postMessage({eventType:g,eventId:Ke,data:_},[N.port2])}).finally(()=>{_e&&R.removeMessageHandler(_e)})})()}}function Yn(){return window}function Nl(){return void 0!==Yn().WorkerGlobalScope&&"function"==typeof Yn().importScripts}function bu(){return(bu=(0,f.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(E){return null}})).apply(this,arguments)}const Pi="firebaseLocalStorageDb",eo="firebaseLocalStorage",$r="fbase_key";class Fo{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Lh(E,g){return E.transaction([eo],g?"readwrite":"readonly").objectStore(eo)}function Ra(){const E=indexedDB.open(Pi,1);return new Promise((g,_)=>{E.addEventListener("error",()=>{_(E.error)}),E.addEventListener("upgradeneeded",()=>{const C=E.result;try{C.createObjectStore(eo,{keyPath:$r})}catch(R){_(R)}}),E.addEventListener("success",(0,f.Z)(function*(){const C=E.result;C.objectStoreNames.contains(eo)?g(C):(C.close(),yield function(){const E=indexedDB.deleteDatabase(Pi);return new Fo(E).toPromise()}(),g(yield Ra()))}))})}function lr(E,g,_){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,f.Z)(function*(E,g,_){const C=Lh(E,!0).put({[$r]:g,value:_});return new Fo(C).toPromise()})).apply(this,arguments)}function kl(){return(kl=(0,f.Z)(function*(E,g){const _=Lh(E,!1).get(g),C=yield new Fo(_).toPromise();return void 0===C?null:C.value})).apply(this,arguments)}function Uh(E,g){const _=Lh(E,!0).delete(g);return new Fo(_).toPromise()}const Cu=(()=>{class E{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,f.Z)(function*(){return _.db||(_.db=yield Ra()),_.db})()}_withRetries(_){var C=this;return(0,f.Z)(function*(){let R=0;for(;;)try{const N=yield C._openDb();return yield _(N)}catch(N){if(R++>3)throw N;C.db&&(C.db.close(),C.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,f.Z)(function*(){return Nl()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,f.Z)(function*(){_.receiver=vu._getInstance(Nl()?self:null),_.receiver._subscribe("keyChanged",function(){var C=(0,f.Z)(function*(R,N){return{keyProcessed:(yield _._poll()).includes(N.key)}});return function(R,N){return C.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var C=(0,f.Z)(function*(R,N){return["keyChanged"]});return function(R,N){return C.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,f.Z)(function*(){var C,R;if(_.activeServiceWorker=yield function(){return bu.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Eu(_.activeServiceWorker);const N=yield _.sender._send("ping",{},800);!N||(null===(C=N[0])||void 0===C?void 0:C.fulfilled)&&(null===(R=N[0])||void 0===R?void 0:R.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var C=this;return(0,f.Z)(function*(){if(C.sender&&C.activeServiceWorker&&function(){var E;return(null===(E=null==navigator?void 0:navigator.serviceWorker)||void 0===E?void 0:E.controller)||null}()===C.activeServiceWorker)try{yield C.sender._send("keyChanged",{key:_},C.serviceWorkerReceiverAvailable?800:50)}catch(R){}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Ra();return yield lr(_,Ut,"1"),yield Uh(_,Ut),!0}catch(_){}return!1})()}_withPendingWrite(_){var C=this;return(0,f.Z)(function*(){C.pendingWrites++;try{yield _()}finally{C.pendingWrites--}})()}_set(_,C){var R=this;return(0,f.Z)(function*(){return R._withPendingWrite((0,f.Z)(function*(){return yield R._withRetries(N=>lr(N,_,C)),R.localCache[_]=C,R.notifyServiceWorker(_)}))})()}_get(_){var C=this;return(0,f.Z)(function*(){const R=yield C._withRetries(N=>function(E,g){return kl.apply(this,arguments)}(N,_));return C.localCache[_]=R,R})()}_remove(_){var C=this;return(0,f.Z)(function*(){return C._withPendingWrite((0,f.Z)(function*(){return yield C._withRetries(R=>Uh(R,_)),delete C.localCache[_],C.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,f.Z)(function*(){const C=yield _._withRetries(X=>{const _e=Lh(X,!1).getAll();return new Fo(_e).toPromise()});if(!C)return[];if(0!==_.pendingWrites)return[];const R=[],N=new Set;for(const{fbase_key:X,value:_e}of C)N.add(X),JSON.stringify(_.localCache[X])!==JSON.stringify(_e)&&(_.notifyListeners(X,_e),R.push(X));for(const X of Object.keys(_.localCache))_.localCache[X]&&!N.has(X)&&(_.notifyListeners(X,null),R.push(X));return R})()}notifyListeners(_,C){this.localCache[_]=C;const R=this.listeners[_];if(R)for(const N of Array.from(R))N(C)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,C){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(C)}_removeListener(_,C){this.listeners[_]&&(this.listeners[_].delete(C),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return E.type="LOCAL",E})();function Na(E,g){return _t(E,"POST","/v2/accounts/mfaSignIn:start",Jt(E,g))}function Oi(){return(Oi=(0,f.Z)(function*(E){return(yield _t(E,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function td(E){return new Promise((g,_)=>{const C=document.createElement("script");C.setAttribute("src",E),C.onload=g,C.onerror=R=>{const N=mn("internal-error");N.customData=R,_(N)},C.type="text/javascript",C.charset="UTF-8",function(){var E,g;return null!==(g=null===(E=document.getElementsByTagName("head"))||void 0===E?void 0:E[0])&&void 0!==g?g:document}().appendChild(C)})}function wn(E){return`__${E}${Math.floor(1e6*Math.random())}`}const xr=1e12;class Pl{constructor(g){this.auth=g,this.counter=xr,this._widgets=new Map}render(g,_){const C=this.counter;return this._widgets.set(C,new yi(g,this.auth.name,_||{})),this.counter++,C}reset(g){var _;const C=g||xr;null===(_=this._widgets.get(C))||void 0===_||_.delete(),this._widgets.delete(C)}getResponse(g){var _;return(null===(_=this._widgets.get(g||xr))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,f.Z)(function*(){var C;return null===(C=_._widgets.get(g||xr))||void 0===C||C.execute(),""})()}}class yi{constructor(g,_,C){this.params=C,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const R="string"==typeof g?document.getElementById(g):g;Me(R,"argument-error",{appName:_}),this.container=R,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(E){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let C=0;C<50;C++)g.push(_.charAt(Math.floor(Math.random()*_.length)));return g.join("")}();const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch(C){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(C){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Pa=wn("rcb"),vi=new cn(3e4,6e4);class $h{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Yn().grecaptcha}load(g,_=""){return Me((E=_).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(E),g,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(Yn().grecaptcha):new Promise((C,R)=>{const N=Yn().setTimeout(()=>{R(mn(g,"network-request-failed"))},vi.get());Yn()[Pa]=()=>{Yn().clearTimeout(N),delete Yn()[Pa];const _e=Yn().grecaptcha;if(!_e)return void R(mn(g,"internal-error"));const je=_e.render;_e.render=(Ve,Ke)=>{const hn=je(Ve,Ke);return this.counter++,hn},this.hostLanguage=_,C(_e)},td(`https://www.google.com/recaptcha/api.js??${(0,$.xO)({onload:Pa,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(N),R(mn(g,"internal-error"))})});var E}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){return!!Yn().grecaptcha&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class to{load(g){return(0,f.Z)(function*(){return new Pl(g)})()}clearedOneInstance(){}}const Hp="recaptcha",Oa={theme:"light",type:"image"};class nd{constructor(g,_=Object.assign({},Oa),C){this.parameters=_,this.type=Hp,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ln(C),this.isInvisible="invisible"===this.parameters.size,Me("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const R="string"==typeof g?document.getElementById(g):g;Me(R,this.auth,"argument-error"),this.container=R,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new to:new $h,this.validateStartingState()}verify(){var g=this;return(0,f.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),C=g.getAssertedRecaptcha();return C.getResponse(_)||new Promise(N=>{const X=_e=>{!_e||(g.tokenChangeListeners.delete(X),N(_e))};g.tokenChangeListeners.add(X),g.isInvisible&&C.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){Me(!this.parameters.sitekey,this.auth,"argument-error"),Me(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Me("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(C=>C(_)),"function"==typeof g)g(_);else if("string"==typeof g){const C=Yn()[g];"function"==typeof C&&C(_)}}}assertNotDestroyed(){Me(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,f.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const C=document.createElement("div");_.appendChild(C),_=C}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,f.Z)(function*(){Me(ws()&&!Nl(),g.auth,"internal-error"),yield function(){let E=null;return new Promise(g=>{"complete"!==document.readyState?(E=()=>g(),window.addEventListener("load",E)):g()}).catch(g=>{throw E&&window.removeEventListener("load",E),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function(E){return Oi.apply(this,arguments)}(g.auth);Me(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return Me(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Li{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=ti._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function fr(E,g,_){return Hh.apply(this,arguments)}function Hh(){return(Hh=(0,f.Z)(function*(E,g,_){const C=ln(E),R=yield B(C,g,(0,$.m9)(_));return new Li(R,N=>So(C,N))})).apply(this,arguments)}function Gh(E,g,_){return I.apply(this,arguments)}function I(){return(I=(0,f.Z)(function*(E,g,_){const C=(0,$.m9)(E);yield Ft(!1,C,"phone");const R=yield B(C.auth,g,(0,$.m9)(_));return new Li(R,N=>kp(C,N))})).apply(this,arguments)}function A(E,g,_){return M.apply(this,arguments)}function M(){return(M=(0,f.Z)(function*(E,g,_){const C=(0,$.m9)(E),R=yield B(C.auth,g,(0,$.m9)(_));return new Li(R,N=>du(C,N))})).apply(this,arguments)}function B(E,g,_){return re.apply(this,arguments)}function re(){return(re=(0,f.Z)(function*(E,g,_){var C;const R=yield _.verify();try{let N;if(Me("string"==typeof R,E,"argument-error"),Me(_.type===Hp,E,"argument-error"),N="string"==typeof g?{phoneNumber:g}:g,"session"in N){const X=N.session;if("phoneNumber"in N)return Me("enroll"===X.type,E,"internal-error"),(yield jp(E,{idToken:X.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:R}})).phoneSessionInfo.sessionInfo;{Me("signin"===X.type,E,"internal-error");const _e=(null===(C=N.multiFactorHint)||void 0===C?void 0:C.uid)||N.multiFactorUid;return Me(_e,E,"missing-multi-factor-info"),(yield Na(E,{mfaPendingCredential:X.credential,mfaEnrollmentId:_e,phoneSignInInfo:{recaptchaToken:R}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:X}=yield Mp(E,{phoneNumber:N.phoneNumber,recaptchaToken:R});return X}}finally{_._reset()}})).apply(this,arguments)}function ue(E,g){return ke.apply(this,arguments)}function ke(){return(ke=(0,f.Z)(function*(E,g){yield Cs((0,$.m9)(E),g)})).apply(this,arguments)}let Je=(()=>{class E{constructor(_){this.providerId=E.PROVIDER_ID,this.auth=ln(_)}verifyPhoneNumber(_,C){return B(this.auth,_,(0,$.m9)(C))}static credential(_,C){return ti._fromVerification(_,C)}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:C,temporaryProof:R}=_;return C&&R?ti._fromTokenResponse(C,R):null}}return E.PROVIDER_ID="phone",E.PHONE_SIGN_IN_METHOD="phone",E})();function gt(E,g){return g?Yt(g):(Me(E._popupRedirectResolver,E,"argument-error"),E._popupRedirectResolver)}class ft extends ma{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Ki(g,this._buildIdpRequest())}_linkToIdToken(g,_){return Ki(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return Ki(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function Qt(E){return Is(E.auth,new ft(E),E.bypassAuthState)}function bt(E){const{auth:g,user:_}=E;return Me(_,g,"internal-error"),Cn(_,new ft(E),E.bypassAuthState)}function Vi(E){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,f.Z)(function*(E){const{auth:g,user:_}=E;return Me(_,g,"internal-error"),Cs(_,new ft(E),E.bypassAuthState)})).apply(this,arguments)}class Fa{constructor(g,_,C,R,N=!1){this.auth=g,this.resolver=C,this.user=R,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,f.Z)(function*(C,R){g.pendingPromise={resolve:C,reject:R};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(N){g.reject(N)}});return function(C,R){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,f.Z)(function*(){const{urlResponse:C,sessionId:R,postBody:N,tenantId:X,error:_e,type:je}=g;if(_e)return void _.reject(_e);const Ve={auth:_.auth,requestUri:C,sessionId:R,tenantId:X||void 0,postBody:N||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(je)(Ve))}catch(Ke){_.reject(Ke)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Qt;case"linkViaPopup":case"linkViaRedirect":return Vi;case"reauthViaPopup":case"reauthViaRedirect":return bt;default:gn(this.auth,"internal-error")}}resolve(g){cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Iu=new cn(2e3,1e4);function Ol(E,g,_){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,f.Z)(function*(E,g,_){const C=ln(E);Jr(E,g,Xt);const R=gt(C,_);return new Vo(C,"signInViaPopup",g,R).executeNotNull()})).apply(this,arguments)}function hs(E,g,_){return fs.apply(this,arguments)}function fs(){return(fs=(0,f.Z)(function*(E,g,_){const C=(0,$.m9)(E);Jr(C.auth,g,Xt);const R=gt(C.auth,_);return new Vo(C.auth,"reauthViaPopup",g,R,C).executeNotNull()})).apply(this,arguments)}function Wt(E,g,_){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,f.Z)(function*(E,g,_){const C=(0,$.m9)(E);Jr(C.auth,g,Xt);const R=gt(C.auth,_);return new Vo(C.auth,"linkViaPopup",g,R,C).executeNotNull()})).apply(this,arguments)}let Vo=(()=>{class E extends Fa{constructor(_,C,R,N,X){super(_,C,N,X),this.provider=R,this.authWindow=null,this.pollId=null,E.currentPopupAction&&E.currentPopupAction.cancel(),E.currentPopupAction=this}executeNotNull(){var _=this;return(0,f.Z)(function*(){const C=yield _.execute();return Me(C,_.auth,"internal-error"),C})()}onExecution(){var _=this;return(0,f.Z)(function*(){cr(1===_.filter.length,"Popup operations only handle one event");const C=vr();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],C),_.authWindow.associatedEvent=C,_.resolver._originValidation(_.auth).catch(R=>{_.reject(R)}),_.resolver._isIframeWebStorageSupported(_.auth,R=>{R||_.reject(mn(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(mn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,E.currentPopupAction=null}pollUserCancellation(){const _=()=>{var C,R;this.pollId=(null===(R=null===(C=this.authWindow)||void 0===C?void 0:C.window)||void 0===R?void 0:R.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(mn(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,Iu.get())};_()}}return E.currentPopupAction=null,E})();const es=new Map;class rd extends Fa{constructor(g,_,C=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,C),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,f.Z)(function*(){let C=es.get(_.auth._key());if(!C){try{const N=(yield function(E,g){return qh.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;C=()=>Promise.resolve(N)}catch(R){C=()=>Promise.reject(R)}es.set(_.auth._key(),C)}return _.bypassAuthState||es.set(_.auth._key(),()=>Promise.resolve(null)),C()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,C=this;return(0,f.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(C,g);if("unknown"!==g.type){if(g.eventId){const R=yield C.auth._redirectUserForId(g.eventId);if(R)return C.user=R,_().call(C,g);C.resolve(null)}}else C.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function qh(){return(qh=(0,f.Z)(function*(E,g){const _=Vn(g),C=Wh(E);if(!(yield C._isAvailable()))return!1;const R="true"===(yield C._get(_));return yield C._remove(_),R})).apply(this,arguments)}function ts(E,g){return Gp.apply(this,arguments)}function Gp(){return(Gp=(0,f.Z)(function*(E,g){return Wh(E)._set(Vn(g),"true")})).apply(this,arguments)}function Tu(){es.clear()}function Rs(E,g){es.set(E._key(),g)}function Wh(E){return Yt(E._redirectPersistence)}function Vn(E){return Si("pendingRedirect",E.config.apiKey,E.name)}function no(E,g,_){return function(E,g,_){return id.apply(this,arguments)}(E,g,_)}function id(){return(id=(0,f.Z)(function*(E,g,_){const C=ln(E);Jr(E,g,Xt);const R=gt(C,_);return yield ts(R,C),R._openRedirect(C,g,"signInViaRedirect")})).apply(this,arguments)}function sd(E,g,_){return function(E,g,_){return Wp.apply(this,arguments)}(E,g,_)}function Wp(){return(Wp=(0,f.Z)(function*(E,g,_){const C=(0,$.m9)(E);Jr(C.auth,g,Xt);const R=gt(C.auth,_);yield ts(R,C.auth);const N=yield ad(C);return R._openRedirect(C.auth,g,"reauthViaRedirect",N)})).apply(this,arguments)}function n_(E,g,_){return function(E,g,_){return La.apply(this,arguments)}(E,g,_)}function La(){return(La=(0,f.Z)(function*(E,g,_){const C=(0,$.m9)(E);Jr(C.auth,g,Xt);const R=gt(C.auth,_);yield Ft(!1,C,g.providerId),yield ts(R,C.auth);const N=yield ad(C);return R._openRedirect(C.auth,g,"linkViaRedirect",N)})).apply(this,arguments)}function r_(E,g){return od.apply(this,arguments)}function od(){return(od=(0,f.Z)(function*(E,g){return yield ln(E)._initializationPromise,ro(E,g,!1)})).apply(this,arguments)}function ro(E,g){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,f.Z)(function*(E,g,_=!1){const C=ln(E),R=gt(C,g),X=yield new rd(C,R,_).execute();return X&&!_&&(delete X.user._redirectEventId,yield C._persistUserIfCurrent(X.user),yield C._setRedirectUser(null,g)),X})).apply(this,arguments)}function ad(E){return Zp.apply(this,arguments)}function Zp(){return(Zp=(0,f.Z)(function*(E){const g=vr(`${E.uid}:::`);return E._redirectEventId=g,yield E.auth._setRedirectUser(E),yield E.auth._persistUserIfCurrent(E),g})).apply(this,arguments)}class i_{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(C=>{this.isEventForConsumer(g,C)&&(_=!0,this.sendToConsumer(g,C),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function(E){switch(E.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ud(E);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var C;if(g.error&&!ud(g)){const R=(null===(C=g.error.code)||void 0===C?void 0:C.split("auth/")[1])||"internal-error";_.onError(mn(this.auth,R))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const C=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&C}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Au(g))}saveEventToCache(g){this.cachedEventUids.add(Au(g)),this.lastProcessedEventTime=Date.now()}}function Au(E){return[E.type,E.eventId,E.sessionId,E.tenantId].filter(g=>g).join("-")}function ud({type:E,error:g}){return"unknown"===E&&"auth/no-auth-event"===(null==g?void 0:g.code)}function ld(E){return Su.apply(this,arguments)}function Su(){return(Su=(0,f.Z)(function*(E,g={}){return _t(E,"GET","/v1/projects",g)})).apply(this,arguments)}const oE=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xu=/^https?/;function Vl(){return(Vl=(0,f.Z)(function*(E){if(E.config.emulator)return;const{authorizedDomains:g}=yield ld(E);for(const _ of g)try{if(cd(_))return}catch(C){}gn(E,"unauthorized-domain")})).apply(this,arguments)}function cd(E){const g=Zn(),{protocol:_,hostname:C}=new URL(g);if(E.startsWith("chrome-extension://")){const X=new URL(E);return""===X.hostname&&""===C?"chrome-extension:"===_&&E.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&X.hostname===C}if(!xu.test(_))return!1;if(oE.test(E))return C===E;const R=E.replace(/\./g,"\\.");return new RegExp("^(.+\\."+R+"|"+R+")$","i").test(C)}const Kp=new cn(3e4,6e4);function Uo(){const E=Yn().___jsl;if(null==E?void 0:E.H)for(const g of Object.keys(E.H))if(E.H[g].r=E.H[g].r||[],E.H[g].L=E.H[g].L||[],E.H[g].r=[...E.H[g].L],E.CP)for(let _=0;_<E.CP.length;_++)E.CP[_]=null}let Zh=null;function uE(E){return Zh=Zh||function(E){return new Promise((g,_)=>{var C,R,N;function X(){Uo(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Uo(),_(mn(E,"network-request-failed"))},timeout:Kp.get()})}if(null===(R=null===(C=Yn().gapi)||void 0===C?void 0:C.iframes)||void 0===R?void 0:R.Iframe)g(gapi.iframes.getContext());else{if(!(null===(N=Yn().gapi)||void 0===N?void 0:N.load)){const _e=wn("iframefcb");return Yn()[_e]=()=>{gapi.load?X():_(mn(E,"network-request-failed"))},td(`https://apis.google.com/js/api.js?onload=${_e}`).catch(je=>_(je))}X()}}).catch(g=>{throw Zh=null,g})}(E),Zh}const zh=new cn(5e3,15e3),Ul={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},s_=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cE(E){const g=E.config;Me(g.authDomain,E,"auth-domain-config-required");const _=g.emulator?qe(g,"emulator/auth/iframe"):`https://${E.config.authDomain}/__/auth/iframe`,C={apiKey:g.apiKey,appName:E.name,v:O.SDK_VERSION},R=s_.get(E.config.apiHost);R&&(C.eid=R);const N=E._getFrameworks();return N.length&&(C.fw=N.join(",")),`${_}?${(0,$.xO)(C).slice(1)}`}function dd(){return(dd=(0,f.Z)(function*(E){const g=yield uE(E),_=Yn().gapi;return Me(_,E,"internal-error"),g.open({where:document.body,url:cE(E),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ul,dontclear:!0},C=>new Promise(function(){var R=(0,f.Z)(function*(N,X){yield C.restyle({setHideOnLeave:!1});const _e=mn(E,"network-request-failed"),je=Yn().setTimeout(()=>{X(_e)},zh.get());function Ve(){Yn().clearTimeout(je),N(C)}C.ping(Ve).then(Ve,()=>{X(_e)})});return function(N,X){return R.apply(this,arguments)}}()))})).apply(this,arguments)}const Yp={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class l_{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function hd(E,g,_,C,R,N){Me(E.config.authDomain,E,"auth-domain-config-required"),Me(E.config.apiKey,E,"invalid-api-key");const X={apiKey:E.config.apiKey,appName:E.name,authType:_,redirectUrl:C,v:O.SDK_VERSION,eventId:R};if(g instanceof Xt){g.setDefaultLanguage(E.languageCode),X.providerId=g.providerId||"",(0,$.xb)(g.getCustomParameters())||(X.customParameters=JSON.stringify(g.getCustomParameters()));for(const[je,Ve]of Object.entries(N||{}))X[je]=Ve}if(g instanceof Ea){const je=g.getScopes().filter(Ve=>""!==Ve);je.length>0&&(X.scopes=je.join(","))}E.tenantId&&(X.tid=E.tenantId);const _e=X;for(const je of Object.keys(_e))void 0===_e[je]&&delete _e[je];return`${function({config:E}){return E.emulator?qe(E,"emulator/auth/handler"):`https://${E.authDomain}/__/auth/handler`}(E)}?${(0,$.xO)(_e).slice(1)}`}const Ua="webStorageSupport",fd=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ed,this._completeRedirectFn=ro,this._overrideRedirectResult=Rs}_openPopup(g,_,C,R){var N=this;return(0,f.Z)(function*(){var X;cr(null===(X=N.eventManagers[g._key()])||void 0===X?void 0:X.manager,"_initialize() not called before _openPopup()");const _e=hd(g,_,C,Zn(),R);return function(E,g,_,C=500,R=600){const N=Math.max((window.screen.availHeight-R)/2,0).toString(),X=Math.max((window.screen.availWidth-C)/2,0).toString();let _e="";const je=Object.assign(Object.assign({},Yp),{width:C.toString(),height:R.toString(),top:N,left:X}),Ve=(0,$.z$)().toLowerCase();_&&(_e=pa(Ve)?"_blank":_),fa(Ve)&&(g=g||"http://localhost",je.scrollbars="yes");const Ke=Object.entries(je).reduce((In,[Rr,$o])=>`${In}${Rr}=${$o},`,"");if(function(E=(0,$.z$)()){var g;return ou(E)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(Ve)&&"_self"!==_e)return function(E,g){const _=document.createElement("a");_.href=E,_.target=g;const C=document.createEvent("MouseEvent");C.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(C)}(g||"",_e),new l_(null);const hn=window.open(g||"",_e,Ke);Me(hn,E,"popup-blocked");try{hn.focus()}catch(In){}return new l_(hn)}(g,_e,vr())})()}_openRedirect(g,_,C,R){var N=this;return(0,f.Z)(function*(){return yield N._originValidation(g),E=hd(g,_,C,Zn(),R),Yn().location.href=E,new Promise(()=>{});var E})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:R,promise:N}=this.eventManagers[_];return R?Promise.resolve(R):(cr(N,"If manager is not set, promise should be"),N)}const C=this.initAndGetManager(g);return this.eventManagers[_]={promise:C},C.catch(()=>{delete this.eventManagers[_]}),C}initAndGetManager(g){var _=this;return(0,f.Z)(function*(){const C=yield function(E){return dd.apply(this,arguments)}(g),R=new i_(g);return C.register("authEvent",N=>(Me(null==N?void 0:N.authEvent,g,"invalid-auth-event"),{status:R.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:R},_.iframes[g._key()]=C,R})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send(Ua,{type:Ua},R=>{var N;const X=null===(N=null==R?void 0:R[0])||void 0===N?void 0:N[Ua];void 0!==X&&_(!!X),gn(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function(E){return Vl.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return bs()||Tr()||ou()}};class pd extends class{constructor(g){this.factorId=g}_process(g,_,C){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,C);case"signin":return this._finalizeSignIn(g,_.credential);default:return qn("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new pd(g)}_finalizeEnroll(g,_,C){return function(E,g){return _t(E,"POST","/v2/accounts/mfaEnrollment:finalize",Jt(E,g))}(g,{idToken:_,displayName:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function(E,g){return _t(E,"POST","/v2/accounts/mfaSignIn:finalize",Jt(E,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let fE=(()=>{class E{constructor(){}static assertion(_){return pd._fromCredential(_)}}return E.FACTOR_ID="phone",E})();var E,pE="@firebase/auth";class Qp{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,f.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(C=>{var R;g((null===(R=C)||void 0===R?void 0:R.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);!_||(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}E="Browser",(0,O._registerComponent)(new Ge.wA("auth",(g,{options:_})=>{const C=g.getProvider("app").getImmediate(),R=g.getProvider("heartbeat"),{apiKey:N,authDomain:X}=C.options;return((_e,je)=>{Me(N&&!N.includes(":"),"invalid-api-key",{appName:_e.name}),Me(!(null==X?void 0:X.includes(":")),"argument-error",{appName:_e.name});const Ve={apiKey:N,authDomain:X,clientPlatform:E,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Dr(E)},Ke=new Zs(_e,je,Ve);return function(E,g){const _=(null==g?void 0:g.persistence)||[],C=(Array.isArray(_)?_:[_]).map(Yt);(null==g?void 0:g.errorMap)&&E._updateErrorMap(g.errorMap),E._initializeWithPersistence(C,null==g?void 0:g.popupRedirectResolver)}(Ke,_),Ke})(C,R)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,C)=>{g.getProvider("auth-internal").initialize()})),(0,O._registerComponent)(new Ge.wA("auth-internal",g=>{const _=ln(g.getProvider("auth").getImmediate());return new Qp(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,O.registerVersion)(pE,"0.20.2",void 0),(0,O.registerVersion)(pE,"0.20.2","esm2017")},3854:(Qe,Ee,V)=>{"use strict";V.d(Ee,{BH:()=>le,LL:()=>Ge,ZR:()=>Et,gQ:()=>Me,zI:()=>$e,hu:()=>$,g5:()=>O,US:()=>ne,tV:()=>oe,h$:()=>Ce,L:()=>te,$s:()=>Jt,r3:()=>Kt,Sg:()=>pe,ne:()=>qn,p$:()=>U,vZ:()=>gn,ZB:()=>H,gK:()=>Zn,pd:()=>Xr,m9:()=>jn,z$:()=>Te,GJ:()=>os,jU:()=>fe,ru:()=>De,d:()=>Xe,xb:()=>Dn,w1:()=>dt,hl:()=>Oe,uI:()=>we,UG:()=>Be,Yr:()=>Lt,b$:()=>Ne,G6:()=>vt,Mn:()=>qt,w9:()=>zi,cI:()=>Zi,UI:()=>Gn,xO:()=>Hs,zd:()=>Jr,DV:()=>Es,ug:()=>cn,dS:()=>Eo,Pz:()=>Yr,Dv:()=>Wn,Wj:()=>On,lb:()=>_n,eu:()=>Fe});const $=function(z,G){if(!z)throw O(G)},O=function(z){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+z)},ae=function(z){const G=[];let J=0;for(let ve=0;ve<z.length;ve++){let Z=z.charCodeAt(ve);Z<128?G[J++]=Z:Z<2048?(G[J++]=Z>>6|192,G[J++]=63&Z|128):55296==(64512&Z)&&ve+1<z.length&&56320==(64512&z.charCodeAt(ve+1))?(Z=65536+((1023&Z)<<10)+(1023&z.charCodeAt(++ve)),G[J++]=Z>>18|240,G[J++]=Z>>12&63|128,G[J++]=Z>>6&63|128,G[J++]=63&Z|128):(G[J++]=Z>>12|224,G[J++]=Z>>6&63|128,G[J++]=63&Z|128)}return G},ne={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(z,G){if(!Array.isArray(z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const J=G?this.byteToCharMapWebSafe_:this.byteToCharMap_,ve=[];for(let Z=0;Z<z.length;Z+=3){const ie=z[Z],Pe=Z+1<z.length,ze=Pe?z[Z+1]:0,ht=Z+2<z.length,xt=ht?z[Z+2]:0;let dr=(15&ze)<<2|xt>>6,de=63&xt;ht||(de=64,Pe||(dr=64)),ve.push(J[ie>>2],J[(3&ie)<<4|ze>>4],J[dr],J[de])}return ve.join("")},encodeString(z,G){return this.HAS_NATIVE_SUPPORT&&!G?btoa(z):this.encodeByteArray(ae(z),G)},decodeString(z,G){return this.HAS_NATIVE_SUPPORT&&!G?atob(z):function(z){const G=[];let J=0,ve=0;for(;J<z.length;){const Z=z[J++];if(Z<128)G[ve++]=String.fromCharCode(Z);else if(Z>191&&Z<224){const ie=z[J++];G[ve++]=String.fromCharCode((31&Z)<<6|63&ie)}else if(Z>239&&Z<365){const ht=((7&Z)<<18|(63&z[J++])<<12|(63&z[J++])<<6|63&z[J++])-65536;G[ve++]=String.fromCharCode(55296+(ht>>10)),G[ve++]=String.fromCharCode(56320+(1023&ht))}else{const ie=z[J++],Pe=z[J++];G[ve++]=String.fromCharCode((15&Z)<<12|(63&ie)<<6|63&Pe)}}return G.join("")}(this.decodeStringToByteArray(z,G))},decodeStringToByteArray(z,G){this.init_();const J=G?this.charToByteMapWebSafe_:this.charToByteMap_,ve=[];for(let Z=0;Z<z.length;){const ie=J[z.charAt(Z++)],ze=Z<z.length?J[z.charAt(Z)]:0;++Z;const xt=Z<z.length?J[z.charAt(Z)]:64;++Z;const It=Z<z.length?J[z.charAt(Z)]:64;if(++Z,null==ie||null==ze||null==xt||null==It)throw Error();ve.push(ie<<2|ze>>4),64!==xt&&(ve.push(ze<<4&240|xt>>2),64!==It&&ve.push(xt<<6&192|It))}return ve},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let z=0;z<this.ENCODED_VALS.length;z++)this.byteToCharMap_[z]=this.ENCODED_VALS.charAt(z),this.charToByteMap_[this.byteToCharMap_[z]]=z,this.byteToCharMapWebSafe_[z]=this.ENCODED_VALS_WEBSAFE.charAt(z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[z]]=z,z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(z)]=z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(z)]=z)}}},Ce=function(z){const G=ae(z);return ne.encodeByteArray(G,!0)},te=function(z){return Ce(z).replace(/\./g,"")},oe=function(z){try{return ne.decodeString(z,!0)}catch(G){console.error("base64Decode failed: ",G)}return null};function U(z){return H(void 0,z)}function H(z,G){if(!(G instanceof Object))return G;switch(G.constructor){case Date:return new Date(G.getTime());case Object:void 0===z&&(z={});break;case Array:z=[];break;default:return G}for(const J in G)!G.hasOwnProperty(J)||!W(J)||(z[J]=H(z[J],G[J]));return z}function W(z){return"__proto__"!==z}class le{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((G,J)=>{this.resolve=G,this.reject=J})}wrapCallback(G){return(J,ve)=>{J?this.reject(J):this.resolve(ve),"function"==typeof G&&(this.promise.catch(()=>{}),1===G.length?G(J):G(J,ve))}}}function pe(z,G){if(z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ve=G||"demo-project",Z=z.iat||0,ie=z.sub||z.user_id;if(!ie)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Pe=Object.assign({iss:`https://securetoken.google.com/${ve}`,aud:ve,iat:Z,exp:Z+3600,auth_time:Z,sub:ie,user_id:ie,firebase:{sign_in_provider:"custom",identities:{}}},z);return[te(JSON.stringify({alg:"none",type:"JWT"})),te(JSON.stringify(Pe)),""].join(".")}function Te(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function we(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Te())}function Be(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(z){return!1}}function fe(){return"object"==typeof self&&self.self===self}function De(){const z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof z&&void 0!==z.id}function Ne(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Xe(){return Te().indexOf("Electron/")>=0}function dt(){const z=Te();return z.indexOf("MSIE ")>=0||z.indexOf("Trident/")>=0}function qt(){return Te().indexOf("MSAppHost/")>=0}function Lt(){return!1}function vt(){return!Be()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Oe(){return"object"==typeof indexedDB}function Fe(){return new Promise((z,G)=>{try{let J=!0;const ve="validate-browser-context-for-indexeddb-analytics-module",Z=self.indexedDB.open(ve);Z.onsuccess=()=>{Z.result.close(),J||self.indexedDB.deleteDatabase(ve),z(!0)},Z.onupgradeneeded=()=>{J=!1},Z.onerror=()=>{var ie;G((null===(ie=Z.error)||void 0===ie?void 0:ie.message)||"")}}catch(J){G(J)}})}function $e(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Et extends Error{constructor(G,J,ve){super(J),this.code=G,this.customData=ve,this.name="FirebaseError",Object.setPrototypeOf(this,Et.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ge.prototype.create)}}class Ge{constructor(G,J,ve){this.service=G,this.serviceName=J,this.errors=ve}create(G,...J){const ve=J[0]||{},Z=`${this.service}/${G}`,ie=this.errors[G],Pe=ie?function(z,G){return z.replace(Ir,(J,ve)=>{const Z=G[ve];return null!=Z?String(Z):`<${ve}?>`})}(ie,ve):"Error";return new Et(Z,`${this.serviceName}: ${Pe} (${Z}).`,ve)}}const Ir=/\{\$([^}]+)}/g;function Zi(z){return JSON.parse(z)}function Yr(z){return JSON.stringify(z)}const Pn=function(z){let G={},J={},ve={},Z="";try{const ie=z.split(".");G=Zi(oe(ie[0])||""),J=Zi(oe(ie[1])||""),Z=ie[2],ve=J.d||{},delete J.d}catch(ie){}return{header:G,claims:J,data:ve,signature:Z}},zi=function(z){const J=Pn(z).claims;return!!J&&"object"==typeof J&&J.hasOwnProperty("iat")},os=function(z){const G=Pn(z).claims;return"object"==typeof G&&!0===G.admin};function Kt(z,G){return Object.prototype.hasOwnProperty.call(z,G)}function Es(z,G){if(Object.prototype.hasOwnProperty.call(z,G))return z[G]}function Dn(z){for(const G in z)if(Object.prototype.hasOwnProperty.call(z,G))return!1;return!0}function Gn(z,G,J){const ve={};for(const Z in z)Object.prototype.hasOwnProperty.call(z,Z)&&(ve[Z]=G.call(J,z[Z],Z,z));return ve}function gn(z,G){if(z===G)return!0;const J=Object.keys(z),ve=Object.keys(G);for(const Z of J){if(!ve.includes(Z))return!1;const ie=z[Z],Pe=G[Z];if(mn(ie)&&mn(Pe)){if(!gn(ie,Pe))return!1}else if(ie!==Pe)return!1}for(const Z of ve)if(!J.includes(Z))return!1;return!0}function mn(z){return null!==z&&"object"==typeof z}function Hs(z){const G=[];for(const[J,ve]of Object.entries(z))Array.isArray(ve)?ve.forEach(Z=>{G.push(encodeURIComponent(J)+"="+encodeURIComponent(Z))}):G.push(encodeURIComponent(J)+"="+encodeURIComponent(ve));return G.length?"&"+G.join("&"):""}function Jr(z){const G={};return z.replace(/^\?/,"").split("&").forEach(ve=>{if(ve){const[Z,ie]=ve.split("=");G[decodeURIComponent(Z)]=decodeURIComponent(ie)}}),G}function Xr(z){const G=z.indexOf("?");if(!G)return"";const J=z.indexOf("#",G);return z.substring(G,J>0?J:void 0)}class Me{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let G=1;G<this.blockSize;++G)this.pad_[G]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(G,J){J||(J=0);const ve=this.W_;if("string"==typeof G)for(let It=0;It<16;It++)ve[It]=G.charCodeAt(J)<<24|G.charCodeAt(J+1)<<16|G.charCodeAt(J+2)<<8|G.charCodeAt(J+3),J+=4;else for(let It=0;It<16;It++)ve[It]=G[J]<<24|G[J+1]<<16|G[J+2]<<8|G[J+3],J+=4;for(let It=16;It<80;It++){const dr=ve[It-3]^ve[It-8]^ve[It-14]^ve[It-16];ve[It]=4294967295&(dr<<1|dr>>>31)}let xt,yn,Z=this.chain_[0],ie=this.chain_[1],Pe=this.chain_[2],ze=this.chain_[3],ht=this.chain_[4];for(let It=0;It<80;It++){It<40?It<20?(xt=ze^ie&(Pe^ze),yn=1518500249):(xt=ie^Pe^ze,yn=1859775393):It<60?(xt=ie&Pe|ze&(ie|Pe),yn=2400959708):(xt=ie^Pe^ze,yn=3395469782);const dr=(Z<<5|Z>>>27)+xt+ht+yn+ve[It]&4294967295;ht=ze,ze=Pe,Pe=4294967295&(ie<<30|ie>>>2),ie=Z,Z=dr}this.chain_[0]=this.chain_[0]+Z&4294967295,this.chain_[1]=this.chain_[1]+ie&4294967295,this.chain_[2]=this.chain_[2]+Pe&4294967295,this.chain_[3]=this.chain_[3]+ze&4294967295,this.chain_[4]=this.chain_[4]+ht&4294967295}update(G,J){if(null==G)return;void 0===J&&(J=G.length);const ve=J-this.blockSize;let Z=0;const ie=this.buf_;let Pe=this.inbuf_;for(;Z<J;){if(0===Pe)for(;Z<=ve;)this.compress_(G,Z),Z+=this.blockSize;if("string"==typeof G){for(;Z<J;)if(ie[Pe]=G.charCodeAt(Z),++Pe,++Z,Pe===this.blockSize){this.compress_(ie),Pe=0;break}}else for(;Z<J;)if(ie[Pe]=G[Z],++Pe,++Z,Pe===this.blockSize){this.compress_(ie),Pe=0;break}}this.inbuf_=Pe,this.total_+=J}digest(){const G=[];let J=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Z=this.blockSize-1;Z>=56;Z--)this.buf_[Z]=255&J,J/=256;this.compress_(this.buf_);let ve=0;for(let Z=0;Z<5;Z++)for(let ie=24;ie>=0;ie-=8)G[ve]=this.chain_[Z]>>ie&255,++ve;return G}}function qn(z,G){const J=new cr(z,G);return J.subscribe.bind(J)}class cr{constructor(G,J){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=J,this.task.then(()=>{G(this)}).catch(ve=>{this.error(ve)})}next(G){this.forEachObserver(J=>{J.next(G)})}error(G){this.forEachObserver(J=>{J.error(G)}),this.close(G)}complete(){this.forEachObserver(G=>{G.complete()}),this.close()}subscribe(G,J,ve){let Z;if(void 0===G&&void 0===J&&void 0===ve)throw new Error("Missing Observer.");Z=function(z,G){if("object"!=typeof z||null===z)return!1;for(const J of["next","error","complete"])if(J in z&&"function"==typeof z[J])return!0;return!1}(G)?G:{next:G,error:J,complete:ve},void 0===Z.next&&(Z.next=An),void 0===Z.error&&(Z.error=An),void 0===Z.complete&&(Z.complete=An);const ie=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Z.error(this.finalError):Z.complete()}catch(Pe){}}),this.observers.push(Z),ie}unsubscribeOne(G){void 0===this.observers||void 0===this.observers[G]||(delete this.observers[G],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(G){if(!this.finalized)for(let J=0;J<this.observers.length;J++)this.sendOne(J,G)}sendOne(G,J){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[G])try{J(this.observers[G])}catch(ve){"undefined"!=typeof console&&console.error&&console.error(ve)}})}close(G){this.finalized||(this.finalized=!0,void 0!==G&&(this.finalError=G),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function An(){}const Wn=function(z,G,J,ve){let Z;if(ve<G?Z="at least "+G:ve>J&&(Z=0===J?"none":"no more than "+J),Z)throw new Error(z+" failed: Was called with "+ve+(1===ve?" argument.":" arguments.")+" Expects "+Z+".")};function Zn(z,G){return`${z} failed: ${G} argument `}function On(z,G,J,ve){if((!ve||J)&&"function"!=typeof J)throw new Error(Zn(z,G)+"must be a valid function.")}function _n(z,G,J,ve){if((!ve||J)&&("object"!=typeof J||null===J))throw new Error(Zn(z,G)+"must be a valid context object.")}const Eo=function(z){const G=[];let J=0;for(let ve=0;ve<z.length;ve++){let Z=z.charCodeAt(ve);if(Z>=55296&&Z<=56319){const ie=Z-55296;ve++,$(ve<z.length,"Surrogate pair missing trail surrogate."),Z=65536+(ie<<10)+(z.charCodeAt(ve)-56320)}Z<128?G[J++]=Z:Z<2048?(G[J++]=Z>>6|192,G[J++]=63&Z|128):Z<65536?(G[J++]=Z>>12|224,G[J++]=Z>>6&63|128,G[J++]=63&Z|128):(G[J++]=Z>>18|240,G[J++]=Z>>12&63|128,G[J++]=Z>>6&63|128,G[J++]=63&Z|128)}return G},cn=function(z){let G=0;for(let J=0;J<z.length;J++){const ve=z.charCodeAt(J);ve<128?G++:ve<2048?G+=2:ve>=55296&&ve<=56319?(G+=4,J++):G+=3}return G};function Jt(z,G=1e3,J=2){const ve=G*Math.pow(J,z),Z=Math.round(.5*ve*(Math.random()-.5)*2);return Math.min(144e5,ve+Z)}function jn(z){return z&&z._delegate?z._delegate:z}},2329:(Qe,Ee,V)=>{"use strict";V.d(Ee,{Mq:()=>f.getApp,C6:()=>f.getApps});var f=V(8026);(0,f.registerVersion)("firebase","9.8.2","app")},7841:(Qe,Ee,V)=>{"use strict";V.d(Ee,{Z:()=>f.Z});var f=V(3394);f.Z.registerVersion("firebase","9.8.2","app-compat")},4828:(Qe,Ee,V)=>{"use strict";V.r(Ee);var f=V(8239),$=V(3394),O=V(7014),ae=V(3854),Ce=(V(8026),V(5422),V(3910));function te(){return window}function H(){return(H=(0,f.Z)(function*(de,ee,K){var Ae;const{BuildInfo:He}=te();(0,O.aq)(ee.sessionId,"AuthEvent did not contain a session ID");const Mt=yield fe(ee.sessionId),kt={};return(0,O.ar)()?kt.ibi=He.packageName:(0,O.as)()?kt.apn=He.packageName:(0,O.at)(de,"operation-not-supported-in-this-environment"),He.displayName&&(kt.appDisplayName=He.displayName),kt.sessionId=Mt,(0,O.au)(de,K,ee.type,void 0,null!==(Ae=ee.eventId)&&void 0!==Ae?Ae:void 0,kt)})).apply(this,arguments)}function le(){return(le=(0,f.Z)(function*(de){const{BuildInfo:ee}=te(),K={};(0,O.ar)()?K.iosBundleId=ee.packageName:(0,O.as)()?K.androidPackageName=ee.packageName:(0,O.at)(de,"operation-not-supported-in-this-environment"),yield(0,O.av)(de,K)})).apply(this,arguments)}function we(){return(we=(0,f.Z)(function*(de,ee,K){const{cordova:Ae}=te();let He=()=>{};try{yield new Promise((Mt,kt)=>{let Tt=null;function un(){var $t;Mt();const Rn=null===($t=Ae.plugins.browsertab)||void 0===$t?void 0:$t.close;"function"==typeof Rn&&Rn(),"function"==typeof(null==K?void 0:K.close)&&K.close()}function Fn(){Tt||(Tt=window.setTimeout(()=>{kt((0,O.aw)(de,"redirect-cancelled-by-user"))},2e3))}function Ln(){"visible"===(null==document?void 0:document.visibilityState)&&Fn()}ee.addPassiveListener(un),document.addEventListener("resume",Fn,!1),(0,O.as)()&&document.addEventListener("visibilitychange",Ln,!1),He=()=>{ee.removePassiveListener(un),document.removeEventListener("resume",Fn,!1),document.removeEventListener("visibilitychange",Ln,!1),Tt&&window.clearTimeout(Tt)}})}finally{He()}})).apply(this,arguments)}function fe(de){return De.apply(this,arguments)}function De(){return(De=(0,f.Z)(function*(de){const ee=Ne(de),K=yield crypto.subtle.digest("SHA-256",ee);return Array.from(new Uint8Array(K)).map(He=>He.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ne(de){if((0,O.aq)(/[0-9a-zA-Z]+/.test(de),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(de);const ee=new ArrayBuffer(de.length),K=new Uint8Array(ee);for(let Ae=0;Ae<de.length;Ae++)K[Ae]=de.charCodeAt(Ae);return K}class dt extends O.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(ee=>{this.resolveInialized=ee})}addPassiveListener(ee){this.passiveListeners.add(ee)}removePassiveListener(ee){this.passiveListeners.delete(ee)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(ee){return this.resolveInialized(),this.passiveListeners.forEach(K=>K(ee)),super.onEvent(ee)}initialized(){var ee=this;return(0,f.Z)(function*(){yield ee.initPromise})()}}function vt(de){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,f.Z)(function*(de){const ee=yield mt()._get(rt(de));return ee&&(yield mt()._remove(rt(de))),ee})).apply(this,arguments)}function $e(){const de=[],ee="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let K=0;K<20;K++){const Ae=Math.floor(Math.random()*ee.length);de.push(ee.charAt(Ae))}return de.join("")}function mt(){return(0,O.ay)(O.b)}function rt(de){return(0,O.az)("authEvent",de.config.apiKey,de.name)}function Br(de){if(!(null==de?void 0:de.includes("?")))return{};const[ee,...K]=de.split("?");return(0,ae.zd)(K.join("?"))}function Pn(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,O.aw)("no-auth-event")}}function Kt(){var de;return(null===(de=null==self?void 0:self.location)||void 0===de?void 0:de.protocol)||null}function Dn(de=(0,ae.z$)()){return!("file:"!==Kt()&&"ionic:"!==Kt()&&"capacitor:"!==Kt()||!de.toLowerCase().match(/iphone|ipad|ipod|android/))}function Jr(){try{const de=self.localStorage,ee=O.aI();if(de)return de.setItem(ee,"1"),de.removeItem(ee),!function(de=(0,ae.z$)()){return(0,ae.w1)()&&11===(null==document?void 0:document.documentMode)||function(de=(0,ae.z$)()){return/Edge\/\d+/.test(de)}(de)}()||(0,ae.hl)()}catch(de){return Xr()&&(0,ae.hl)()}return!1}function Xr(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Me(){return("http:"===Kt()||"https:"===Kt()||(0,ae.ru)()||Dn())&&!((0,ae.b$)()||(0,ae.UG)())&&Jr()&&!Xr()}function qn(){return Dn()&&"undefined"!=typeof document}function et(){return(et=(0,f.Z)(function*(){return!!qn()&&new Promise(de=>{const ee=setTimeout(()=>{de(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(ee),de(!0)})})})).apply(this,arguments)}const An={LOCAL:"local",NONE:"none",SESSION:"session"},Wn=O.ax,Zn="persistence";function On(de){return _n.apply(this,arguments)}function _n(){return(_n=(0,f.Z)(function*(de){yield de._initializationPromise;const ee=cn(),K=O.az(Zn,de.config.apiKey,de.name);ee&&ee.setItem(K,de._getPersistence())})).apply(this,arguments)}function cn(){var de;try{return(null===(de="undefined"!=typeof window?window:null)||void 0===de?void 0:de.sessionStorage)||null}catch(ee){return null}}const qe=O.ax;class at{constructor(){this.browserResolver=O.ay(O.k),this.cordovaResolver=O.ay(class{constructor(){this._redirectPersistence=O.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=O.aB,this._overrideRedirectResult=O.aC}_initialize(ee){var K=this;return(0,f.Z)(function*(){const Ae=ee._key();let He=K.eventManagers.get(Ae);return He||(He=new dt(ee),K.eventManagers.set(Ae,He),K.attachCallbackListeners(ee,He)),He})()}_openPopup(ee){(0,O.at)(ee,"operation-not-supported-in-this-environment")}_openRedirect(ee,K,Ae,He){var Mt=this;return(0,f.Z)(function*(){!function(de){var ee,K,Ae,He,Mt,kt,Tt,un,Fn,Ln;const $t=te();(0,O.ax)("function"==typeof(null===(ee=null==$t?void 0:$t.universalLinks)||void 0===ee?void 0:ee.subscribe),de,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,O.ax)(void 0!==(null===(K=null==$t?void 0:$t.BuildInfo)||void 0===K?void 0:K.packageName),de,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,O.ax)("function"==typeof(null===(Mt=null===(He=null===(Ae=null==$t?void 0:$t.cordova)||void 0===Ae?void 0:Ae.plugins)||void 0===He?void 0:He.browsertab)||void 0===Mt?void 0:Mt.openUrl),de,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.ax)("function"==typeof(null===(un=null===(Tt=null===(kt=null==$t?void 0:$t.cordova)||void 0===kt?void 0:kt.plugins)||void 0===Tt?void 0:Tt.browsertab)||void 0===un?void 0:un.isAvailable),de,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.ax)("function"==typeof(null===(Ln=null===(Fn=null==$t?void 0:$t.cordova)||void 0===Fn?void 0:Fn.InAppBrowser)||void 0===Ln?void 0:Ln.open),de,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(ee);const kt=yield Mt._initialize(ee);yield kt.initialized(),kt.resetRedirect(),(0,O.aD)(),yield Mt._originValidation(ee);const Tt=function(de,ee,K=null){return{type:ee,eventId:K,urlResponse:null,sessionId:$e(),postBody:null,tenantId:de.tenantId,error:(0,O.aw)(de,"no-auth-event")}}(ee,Ae,He);yield function(de,ee){return mt()._set(rt(de),ee)}(ee,Tt);const un=yield function(de,ee,K){return H.apply(this,arguments)}(ee,Tt,K),Fn=yield function(de){const{cordova:ee}=te();return new Promise(K=>{ee.plugins.browsertab.isAvailable(Ae=>{let He=null;Ae?ee.plugins.browsertab.openUrl(de):He=ee.InAppBrowser.open(de,(0,O.ap)()?"_blank":"_system","location=yes"),K(He)})})}(un);return function(de,ee,K){return we.apply(this,arguments)}(ee,kt,Fn)})()}_isIframeWebStorageSupported(ee,K){throw new Error("Method not implemented.")}_originValidation(ee){const K=ee._key();return this.originValidationPromises[K]||(this.originValidationPromises[K]=function(de){return le.apply(this,arguments)}(ee)),this.originValidationPromises[K]}attachCallbackListeners(ee,K){const{universalLinks:Ae,handleOpenURL:He,BuildInfo:Mt}=te(),kt=setTimeout((0,f.Z)(function*(){yield vt(ee),K.onEvent(Pn())}),500),Tt=function(){var Ln=(0,f.Z)(function*($t){clearTimeout(kt);const Rn=yield vt(ee);let We=null;Rn&&(null==$t?void 0:$t.url)&&(We=function(de,ee){var K,Ae;const He=function(de){const ee=Br(de),K=ee.link?decodeURIComponent(ee.link):void 0,Ae=Br(K).link,He=ee.deep_link_id?decodeURIComponent(ee.deep_link_id):void 0;return Br(He).link||He||Ae||K||de}(ee);if(He.includes("/__/auth/callback")){const Mt=Br(He),kt=Mt.firebaseError?function(de){try{return JSON.parse(de)}catch(ee){return null}}(decodeURIComponent(Mt.firebaseError)):null,Tt=null===(Ae=null===(K=null==kt?void 0:kt.code)||void 0===K?void 0:K.split("auth/"))||void 0===Ae?void 0:Ae[1],un=Tt?(0,O.aw)(Tt):null;return un?{type:de.type,eventId:de.eventId,tenantId:de.tenantId,error:un,urlResponse:null,sessionId:null,postBody:null}:{type:de.type,eventId:de.eventId,tenantId:de.tenantId,sessionId:de.sessionId,urlResponse:He,postBody:null}}return null}(Rn,$t.url)),K.onEvent(We||Pn())});return function(Rn){return Ln.apply(this,arguments)}}();void 0!==Ae&&"function"==typeof Ae.subscribe&&Ae.subscribe(null,Tt);const un=He,Fn=`${Mt.packageName.toLowerCase()}://`;te().handleOpenURL=function(){var Ln=(0,f.Z)(function*($t){if($t.toLowerCase().startsWith(Fn)&&Tt({url:$t}),"function"==typeof un)try{un($t)}catch(Rn){console.error(Rn)}});return function($t){return Ln.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=O.a,this._completeRedirectFn=O.aB,this._overrideRedirectResult=O.aC}_initialize(ee){var K=this;return(0,f.Z)(function*(){return yield K.selectUnderlyingResolver(),K.assertedUnderlyingResolver._initialize(ee)})()}_openPopup(ee,K,Ae,He){var Mt=this;return(0,f.Z)(function*(){return yield Mt.selectUnderlyingResolver(),Mt.assertedUnderlyingResolver._openPopup(ee,K,Ae,He)})()}_openRedirect(ee,K,Ae,He){var Mt=this;return(0,f.Z)(function*(){return yield Mt.selectUnderlyingResolver(),Mt.assertedUnderlyingResolver._openRedirect(ee,K,Ae,He)})()}_isIframeWebStorageSupported(ee,K){this.assertedUnderlyingResolver._isIframeWebStorageSupported(ee,K)}_originValidation(ee){return this.assertedUnderlyingResolver._originValidation(ee)}get _shouldInitProactively(){return qn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return qe(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var ee=this;return(0,f.Z)(function*(){if(ee.underlyingResolver)return;const K=yield function(){return et.apply(this,arguments)}();ee.underlyingResolver=K?ee.cordovaResolver:ee.browserResolver})()}}function as(de){return de.unwrap()}function Jt(de){return sr(de)}function sr(de){const{_tokenResponse:ee}=de instanceof ae.ZR?de.customData:de;if(!ee)return null;if(!(de instanceof ae.ZR)&&"temporaryProof"in ee&&"phoneNumber"in ee)return O.P.credentialFromResult(de);const K=ee.providerId;if(!K||K===O.o.PASSWORD)return null;let Ae;switch(K){case O.o.GOOGLE:Ae=O.Q;break;case O.o.FACEBOOK:Ae=O.N;break;case O.o.GITHUB:Ae=O.T;break;case O.o.TWITTER:Ae=O.W;break;default:const{oauthIdToken:He,oauthAccessToken:Mt,oauthTokenSecret:kt,pendingToken:Tt,nonce:un}=ee;return Mt||kt||He||Tt?Tt?K.startsWith("saml.")?O.aL._create(K,Tt):O.J._fromParams({providerId:K,signInMethod:K,pendingToken:Tt,idToken:He,accessToken:Mt}):new O.U(K).credential({idToken:He,accessToken:Mt,rawNonce:un}):null}return de instanceof ae.ZR?Ae.credentialFromError(de):Ae.credentialFromResult(de)}function jn(de,ee){return ee.catch(K=>{throw K instanceof ae.ZR&&function(de,ee){var K;const Ae=null===(K=ee.customData)||void 0===K?void 0:K._tokenResponse;if("auth/multi-factor-auth-required"===ee.code)ee.resolver=new J(de,O.an(de,ee));else if(Ae){const He=sr(ee),Mt=ee;He&&(Mt.credential=He,Mt.tenantId=Ae.tenantId||void 0,Mt.email=Ae.email||void 0,Mt.phoneNumber=Ae.phoneNumber||void 0)}}(de,K),K}).then(K=>{const He=K.user;return{operationType:K.operationType,credential:Jt(K),additionalUserInfo:O.al(K),user:ve.getOrCreate(He)}})}function z(de,ee){return G.apply(this,arguments)}function G(){return(G=(0,f.Z)(function*(de,ee){const K=yield ee;return{verificationId:K.verificationId,confirm:Ae=>jn(de,K.confirm(Ae))}})).apply(this,arguments)}class J{constructor(ee,K){this.resolver=K,this.auth=ee.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(ee){return jn(as(this.auth),this.resolver.resolveSignIn(ee))}}class ve{constructor(ee){this._delegate=ee,this.multiFactor=O.ao(ee)}static getOrCreate(ee){return ve.USER_MAP.has(ee)||ve.USER_MAP.set(ee,new ve(ee)),ve.USER_MAP.get(ee)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(ee){return this._delegate.getIdTokenResult(ee)}getIdToken(ee){return this._delegate.getIdToken(ee)}linkAndRetrieveDataWithCredential(ee){return this.linkWithCredential(ee)}linkWithCredential(ee){var K=this;return(0,f.Z)(function*(){return jn(K.auth,O.Z(K._delegate,ee))})()}linkWithPhoneNumber(ee,K){var Ae=this;return(0,f.Z)(function*(){return z(Ae.auth,O.l(Ae._delegate,ee,K))})()}linkWithPopup(ee){var K=this;return(0,f.Z)(function*(){return jn(K.auth,O.d(K._delegate,ee,at))})()}linkWithRedirect(ee){var K=this;return(0,f.Z)(function*(){return yield On(O.aE(K.auth)),O.g(K._delegate,ee,at)})()}reauthenticateAndRetrieveDataWithCredential(ee){return this.reauthenticateWithCredential(ee)}reauthenticateWithCredential(ee){var K=this;return(0,f.Z)(function*(){return jn(K.auth,O._(K._delegate,ee))})()}reauthenticateWithPhoneNumber(ee,K){return z(this.auth,O.r(this._delegate,ee,K))}reauthenticateWithPopup(ee){return jn(this.auth,O.e(this._delegate,ee,at))}reauthenticateWithRedirect(ee){var K=this;return(0,f.Z)(function*(){return yield On(O.aE(K.auth)),O.h(K._delegate,ee,at)})()}sendEmailVerification(ee){return O.ab(this._delegate,ee)}unlink(ee){var K=this;return(0,f.Z)(function*(){return yield O.ak(K._delegate,ee),K})()}updateEmail(ee){return O.ag(this._delegate,ee)}updatePassword(ee){return O.ah(this._delegate,ee)}updatePhoneNumber(ee){return O.u(this._delegate,ee)}updateProfile(ee){return O.af(this._delegate,ee)}verifyBeforeUpdateEmail(ee,K){return O.ac(this._delegate,ee,K)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ve.USER_MAP=new WeakMap;const Z=O.ax;let ie=(()=>{class de{constructor(K,Ae){if(this.app=K,Ae.isInitialized())return this._delegate=Ae.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:He}=K.options;Z(He,"invalid-api-key",{appName:K.name}),Z(He,"invalid-api-key",{appName:K.name});const Mt="undefined"!=typeof window?at:void 0;this._delegate=Ae.initialize({options:{persistence:ze(He,K.name),popupRedirectResolver:Mt}}),this._delegate._updateErrorMap(O.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ve.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(K){this._delegate.languageCode=K}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(K){this._delegate.tenantId=K}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(K,Ae){O.G(this._delegate,K,Ae)}applyActionCode(K){return O.a2(this._delegate,K)}checkActionCode(K){return O.a3(this._delegate,K)}confirmPasswordReset(K,Ae){return O.a1(this._delegate,K,Ae)}createUserWithEmailAndPassword(K,Ae){var He=this;return(0,f.Z)(function*(){return jn(He._delegate,O.a5(He._delegate,K,Ae))})()}fetchProvidersForEmail(K){return this.fetchSignInMethodsForEmail(K)}fetchSignInMethodsForEmail(K){return O.aa(this._delegate,K)}isSignInWithEmailLink(K){return O.a8(this._delegate,K)}getRedirectResult(){var K=this;return(0,f.Z)(function*(){Z(Me(),K._delegate,"operation-not-supported-in-this-environment");const Ae=yield O.j(K._delegate,at);return Ae?jn(K._delegate,Promise.resolve(Ae)):{credential:null,user:null}})()}addFrameworkForLogging(K){!function(de,ee){(0,O.aE)(de)._logFramework(ee)}(this._delegate,K)}onAuthStateChanged(K,Ae,He){const{next:Mt,error:kt,complete:Tt}=Pe(K,Ae,He);return this._delegate.onAuthStateChanged(Mt,kt,Tt)}onIdTokenChanged(K,Ae,He){const{next:Mt,error:kt,complete:Tt}=Pe(K,Ae,He);return this._delegate.onIdTokenChanged(Mt,kt,Tt)}sendSignInLinkToEmail(K,Ae){return O.a7(this._delegate,K,Ae)}sendPasswordResetEmail(K,Ae){return O.a0(this._delegate,K,Ae||void 0)}setPersistence(K){var Ae=this;return(0,f.Z)(function*(){let He;switch(function(de,ee){Wn(Object.values(An).includes(ee),de,"invalid-persistence-type"),(0,ae.b$)()?Wn(ee!==An.SESSION,de,"unsupported-persistence-type"):(0,ae.UG)()?Wn(ee===An.NONE,de,"unsupported-persistence-type"):Xr()?Wn(ee===An.NONE||ee===An.LOCAL&&(0,ae.hl)(),de,"unsupported-persistence-type"):Wn(ee===An.NONE||Jr(),de,"unsupported-persistence-type")}(Ae._delegate,K),K){case An.SESSION:He=O.a;break;case An.LOCAL:He=(yield O.ay(O.i)._isAvailable())?O.i:O.b;break;case An.NONE:He=O.L;break;default:return O.at("argument-error",{appName:Ae._delegate.name})}return Ae._delegate.setPersistence(He)})()}signInAndRetrieveDataWithCredential(K){return this.signInWithCredential(K)}signInAnonymously(){return jn(this._delegate,O.X(this._delegate))}signInWithCredential(K){return jn(this._delegate,O.Y(this._delegate,K))}signInWithCustomToken(K){return jn(this._delegate,O.$(this._delegate,K))}signInWithEmailAndPassword(K,Ae){return jn(this._delegate,O.a6(this._delegate,K,Ae))}signInWithEmailLink(K,Ae){return jn(this._delegate,O.a9(this._delegate,K,Ae))}signInWithPhoneNumber(K,Ae){return z(this._delegate,O.s(this._delegate,K,Ae))}signInWithPopup(K){var Ae=this;return(0,f.Z)(function*(){return Z(Me(),Ae._delegate,"operation-not-supported-in-this-environment"),jn(Ae._delegate,O.c(Ae._delegate,K,at))})()}signInWithRedirect(K){var Ae=this;return(0,f.Z)(function*(){return Z(Me(),Ae._delegate,"operation-not-supported-in-this-environment"),yield On(Ae._delegate),O.f(Ae._delegate,K,at)})()}updateCurrentUser(K){return this._delegate.updateCurrentUser(K)}verifyPasswordResetCode(K){return O.a4(this._delegate,K)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return de.Persistence=An,de})();function Pe(de,ee,K){let Ae=de;"function"!=typeof de&&({next:Ae,error:ee,complete:K}=de);const He=Ae;return{next:kt=>He(kt&&ve.getOrCreate(kt)),error:ee,complete:K}}function ze(de,ee){const K=function(de,ee){const K=cn();if(!K)return[];const Ae=O.az(Zn,de,ee);switch(K.getItem(Ae)){case An.NONE:return[O.L];case An.LOCAL:return[O.i,O.a];case An.SESSION:return[O.a];default:return[]}}(de,ee);if("undefined"!=typeof self&&!K.includes(O.i)&&K.push(O.i),"undefined"!=typeof window)for(const Ae of[O.b,O.a])K.includes(Ae)||K.push(Ae);return K.includes(O.L)||K.push(O.L),K}class ht{constructor(){this.providerId="phone",this._delegate=new O.P(as($.Z.auth()))}static credential(ee,K){return O.P.credential(ee,K)}verifyPhoneNumber(ee,K){return this._delegate.verifyPhoneNumber(ee,K)}unwrap(){return this._delegate}}ht.PHONE_SIGN_IN_METHOD=O.P.PHONE_SIGN_IN_METHOD,ht.PROVIDER_ID=O.P.PROVIDER_ID;const xt=O.ax;var de;(de=$.Z).INTERNAL.registerComponent(new Ce.wA("auth-compat",ee=>{const K=ee.getProvider("app-compat").getImmediate(),Ae=ee.getProvider("auth");return new ie(K,Ae)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:O.A.EMAIL_SIGNIN,PASSWORD_RESET:O.A.PASSWORD_RESET,RECOVER_EMAIL:O.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:O.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:O.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:O.A.VERIFY_EMAIL}},EmailAuthProvider:O.M,FacebookAuthProvider:O.N,GithubAuthProvider:O.T,GoogleAuthProvider:O.Q,OAuthProvider:O.U,SAMLAuthProvider:O.V,PhoneAuthProvider:ht,PhoneMultiFactorGenerator:O.m,RecaptchaVerifier:class{constructor(ee,K,Ae=$.Z.app()){var He;xt(null===(He=Ae.options)||void 0===He?void 0:He.apiKey,"invalid-api-key",{appName:Ae.name}),this._delegate=new O.R(ee,K,Ae.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:O.W,Auth:ie,AuthCredential:O.H,Error:ae.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),de.registerVersion("@firebase/auth-compat","0.2.15")},7574:(Qe,Ee,V)=>{"use strict";V.d(Ee,{y:()=>H});var f=V(7393),O=V(9181),ae=V(6490),ne=V(6554),Ce=V(4487);var U=V(2494);let H=(()=>{class le{constructor(Te){this._isScalar=!1,Te&&(this._subscribe=Te)}lift(Te){const we=new le;return we.source=this,we.operator=Te,we}subscribe(Te,we,Be){const{operator:fe}=this,De=function(le,pe,Te){if(le){if(le instanceof f.L)return le;if(le[O.b])return le[O.b]()}return le||pe||Te?new f.L(le,pe,Te):new f.L(ae.c)}(Te,we,Be);if(De.add(fe?fe.call(De,this.source):this.source||U.v.useDeprecatedSynchronousErrorHandling&&!De.syncErrorThrowable?this._subscribe(De):this._trySubscribe(De)),U.v.useDeprecatedSynchronousErrorHandling&&De.syncErrorThrowable&&(De.syncErrorThrowable=!1,De.syncErrorThrown))throw De.syncErrorValue;return De}_trySubscribe(Te){try{return this._subscribe(Te)}catch(we){U.v.useDeprecatedSynchronousErrorHandling&&(Te.syncErrorThrown=!0,Te.syncErrorValue=we),function(le){for(;le;){const{closed:pe,destination:Te,isStopped:we}=le;if(pe||we)return!1;le=Te&&Te instanceof f.L?Te:null}return!0}(Te)?Te.error(we):console.warn(we)}}forEach(Te,we){return new(we=W(we))((Be,fe)=>{let De;De=this.subscribe(Ne=>{try{Te(Ne)}catch(Xe){fe(Xe),De&&De.unsubscribe()}},fe,Be)})}_subscribe(Te){const{source:we}=this;return we&&we.subscribe(Te)}[ne.L](){return this}pipe(...Te){return 0===Te.length?this:function(le){return 0===le.length?Ce.y:1===le.length?le[0]:function(Te){return le.reduce((we,Be)=>Be(we),Te)}}(Te)(this)}toPromise(Te){return new(Te=W(Te))((we,Be)=>{let fe;this.subscribe(De=>fe=De,De=>Be(De),()=>we(fe))})}}return le.create=pe=>new le(pe),le})();function W(le){if(le||(le=U.v.Promise||Promise),!le)throw new Error("no Promise impl found");return le}},6490:(Qe,Ee,V)=>{"use strict";V.d(Ee,{c:()=>O});var f=V(2494),$=V(4449);const O={closed:!0,next(ae){},error(ae){if(f.v.useDeprecatedSynchronousErrorHandling)throw ae;(0,$.z)(ae)},complete(){}}},9765:(Qe,Ee,V)=>{"use strict";V.d(Ee,{Yc:()=>Ce,xQ:()=>te});var f=V(7574),$=V(7393),O=V(5319),ae=V(7971),ce=V(8858),ne=V(9181);class Ce extends $.L{constructor(H){super(H),this.destination=H}}let te=(()=>{class U extends f.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[ne.b](){return new Ce(this)}lift(W){const le=new oe(this,this);return le.operator=W,le}next(W){if(this.closed)throw new ae.N;if(!this.isStopped){const{observers:le}=this,pe=le.length,Te=le.slice();for(let we=0;we<pe;we++)Te[we].next(W)}}error(W){if(this.closed)throw new ae.N;this.hasError=!0,this.thrownError=W,this.isStopped=!0;const{observers:le}=this,pe=le.length,Te=le.slice();for(let we=0;we<pe;we++)Te[we].error(W);this.observers.length=0}complete(){if(this.closed)throw new ae.N;this.isStopped=!0;const{observers:W}=this,le=W.length,pe=W.slice();for(let Te=0;Te<le;Te++)pe[Te].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(W){if(this.closed)throw new ae.N;return super._trySubscribe(W)}_subscribe(W){if(this.closed)throw new ae.N;return this.hasError?(W.error(this.thrownError),O.w.EMPTY):this.isStopped?(W.complete(),O.w.EMPTY):(this.observers.push(W),new ce.W(this,W))}asObservable(){const W=new f.y;return W.source=this,W}}return U.create=(H,W)=>new oe(H,W),U})();class oe extends te{constructor(H,W){super(),this.destination=H,this.source=W}next(H){const{destination:W}=this;W&&W.next&&W.next(H)}error(H){const{destination:W}=this;W&&W.error&&this.destination.error(H)}complete(){const{destination:H}=this;H&&H.complete&&this.destination.complete()}_subscribe(H){const{source:W}=this;return W?this.source.subscribe(H):O.w.EMPTY}}},8858:(Qe,Ee,V)=>{"use strict";V.d(Ee,{W:()=>$});var f=V(5319);class $ extends f.w{constructor(ae,ce){super(),this.subject=ae,this.subscriber=ce,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const ae=this.subject,ce=ae.observers;if(this.subject=null,!ce||0===ce.length||ae.isStopped||ae.closed)return;const ne=ce.indexOf(this.subscriber);-1!==ne&&ce.splice(ne,1)}}},7393:(Qe,Ee,V)=>{"use strict";V.d(Ee,{L:()=>Ce});var f=V(9105),$=V(6490),O=V(5319),ae=V(9181),ce=V(2494),ne=V(4449);class Ce extends O.w{constructor(U,H,W){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=$.c;break;case 1:if(!U){this.destination=$.c;break}if("object"==typeof U){U instanceof Ce?(this.syncErrorThrowable=U.syncErrorThrowable,this.destination=U,U.add(this)):(this.syncErrorThrowable=!0,this.destination=new te(this,U));break}default:this.syncErrorThrowable=!0,this.destination=new te(this,U,H,W)}}[ae.b](){return this}static create(U,H,W){const le=new Ce(U,H,W);return le.syncErrorThrowable=!1,le}next(U){this.isStopped||this._next(U)}error(U){this.isStopped||(this.isStopped=!0,this._error(U))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(U){this.destination.next(U)}_error(U){this.destination.error(U),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:U}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=U,this}}class te extends Ce{constructor(U,H,W,le){super(),this._parentSubscriber=U;let pe,Te=this;(0,f.m)(H)?pe=H:H&&(pe=H.next,W=H.error,le=H.complete,H!==$.c&&(Te=Object.create(H),(0,f.m)(Te.unsubscribe)&&this.add(Te.unsubscribe.bind(Te)),Te.unsubscribe=this.unsubscribe.bind(this))),this._context=Te,this._next=pe,this._error=W,this._complete=le}next(U){if(!this.isStopped&&this._next){const{_parentSubscriber:H}=this;ce.v.useDeprecatedSynchronousErrorHandling&&H.syncErrorThrowable?this.__tryOrSetError(H,this._next,U)&&this.unsubscribe():this.__tryOrUnsub(this._next,U)}}error(U){if(!this.isStopped){const{_parentSubscriber:H}=this,{useDeprecatedSynchronousErrorHandling:W}=ce.v;if(this._error)W&&H.syncErrorThrowable?(this.__tryOrSetError(H,this._error,U),this.unsubscribe()):(this.__tryOrUnsub(this._error,U),this.unsubscribe());else if(H.syncErrorThrowable)W?(H.syncErrorValue=U,H.syncErrorThrown=!0):(0,ne.z)(U),this.unsubscribe();else{if(this.unsubscribe(),W)throw U;(0,ne.z)(U)}}}complete(){if(!this.isStopped){const{_parentSubscriber:U}=this;if(this._complete){const H=()=>this._complete.call(this._context);ce.v.useDeprecatedSynchronousErrorHandling&&U.syncErrorThrowable?(this.__tryOrSetError(U,H),this.unsubscribe()):(this.__tryOrUnsub(H),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(U,H){try{U.call(this._context,H)}catch(W){if(this.unsubscribe(),ce.v.useDeprecatedSynchronousErrorHandling)throw W;(0,ne.z)(W)}}__tryOrSetError(U,H,W){if(!ce.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{H.call(this._context,W)}catch(le){return ce.v.useDeprecatedSynchronousErrorHandling?(U.syncErrorValue=le,U.syncErrorThrown=!0,!0):((0,ne.z)(le),!0)}return!1}_unsubscribe(){const{_parentSubscriber:U}=this;this._context=null,this._parentSubscriber=null,U.unsubscribe()}}},5319:(Qe,Ee,V)=>{"use strict";V.d(Ee,{w:()=>ne});var f=V(9796),$=V(1555),O=V(9105);const ce=(()=>{function te(oe){return Error.call(this),this.message=oe?`${oe.length} errors occurred during unsubscription:\n${oe.map((U,H)=>`${H+1}) ${U.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=oe,this}return te.prototype=Object.create(Error.prototype),te})();class ne{constructor(oe){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,oe&&(this._ctorUnsubscribe=!0,this._unsubscribe=oe)}unsubscribe(){let oe;if(this.closed)return;let{_parentOrParents:U,_ctorUnsubscribe:H,_unsubscribe:W,_subscriptions:le}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,U instanceof ne)U.remove(this);else if(null!==U)for(let pe=0;pe<U.length;++pe)U[pe].remove(this);if((0,O.m)(W)){H&&(this._unsubscribe=void 0);try{W.call(this)}catch(pe){oe=pe instanceof ce?Ce(pe.errors):[pe]}}if((0,f.k)(le)){let pe=-1,Te=le.length;for(;++pe<Te;){const we=le[pe];if((0,$.K)(we))try{we.unsubscribe()}catch(Be){oe=oe||[],Be instanceof ce?oe=oe.concat(Ce(Be.errors)):oe.push(Be)}}}if(oe)throw new ce(oe)}add(oe){let U=oe;if(!oe)return ne.EMPTY;switch(typeof oe){case"function":U=new ne(oe);case"object":if(U===this||U.closed||"function"!=typeof U.unsubscribe)return U;if(this.closed)return U.unsubscribe(),U;if(!(U instanceof ne)){const le=U;U=new ne,U._subscriptions=[le]}break;default:throw new Error("unrecognized teardown "+oe+" added to Subscription.")}let{_parentOrParents:H}=U;if(null===H)U._parentOrParents=this;else if(H instanceof ne){if(H===this)return U;U._parentOrParents=[H,this]}else{if(-1!==H.indexOf(this))return U;H.push(this)}const W=this._subscriptions;return null===W?this._subscriptions=[U]:W.push(U),U}remove(oe){const U=this._subscriptions;if(U){const H=U.indexOf(oe);-1!==H&&U.splice(H,1)}}}var te;function Ce(te){return te.reduce((oe,U)=>oe.concat(U instanceof ce?U.errors:U),[])}ne.EMPTY=((te=new ne).closed=!0,te)},2494:(Qe,Ee,V)=>{"use strict";V.d(Ee,{v:()=>$});let f=!1;const $={Promise:void 0,set useDeprecatedSynchronousErrorHandling(O){if(O){const ae=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+ae.stack)}else f&&console.log("RxJS: Back to a better error behavior. Thank you. <3");f=O},get useDeprecatedSynchronousErrorHandling(){return f}}},5345:(Qe,Ee,V)=>{"use strict";V.d(Ee,{IY:()=>ae,Ds:()=>ne,ft:()=>te});var f=V(7393),$=V(7574),O=V(7444);class ae extends f.L{constructor(U){super(),this.parent=U}_next(U){this.parent.notifyNext(U)}_error(U){this.parent.notifyError(U),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class ne extends f.L{notifyNext(U){this.destination.next(U)}notifyError(U){this.destination.error(U)}notifyComplete(){this.destination.complete()}}function te(oe,U){if(U.closed)return;if(oe instanceof $.y)return oe.subscribe(U);let H;try{H=(0,O.s)(oe)(U)}catch(W){U.error(W)}return H}},2441:(Qe,Ee,V)=>{"use strict";V.d(Ee,{c:()=>ce,N:()=>ne});var f=V(9765),$=V(7574),O=V(5319),ae=V(1307);class ce extends $.y{constructor(H,W){super(),this.source=H,this.subjectFactory=W,this._refCount=0,this._isComplete=!1}_subscribe(H){return this.getSubject().subscribe(H)}getSubject(){const H=this._subject;return(!H||H.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let H=this._connection;return H||(this._isComplete=!1,H=this._connection=new O.w,H.add(this.source.subscribe(new Ce(this.getSubject(),this))),H.closed&&(this._connection=null,H=O.w.EMPTY)),H}refCount(){return(0,ae.x)()(this)}}const ne=(()=>{const U=ce.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:U._subscribe},_isComplete:{value:U._isComplete,writable:!0},getSubject:{value:U.getSubject},connect:{value:U.connect},refCount:{value:U.refCount}}})();class Ce extends f.Yc{constructor(H,W){super(H),this.connectable=W}_error(H){this._unsubscribe(),super._error(H)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const H=this.connectable;if(H){this.connectable=null;const W=H._connection;H._refCount=0,H._subject=null,H._connection=null,W&&W.unsubscribe()}}}},9193:(Qe,Ee,V)=>{"use strict";V.d(Ee,{E:()=>$,c:()=>O});var f=V(7574);const $=new f.y(ce=>ce.complete());function O(ce){return ce?function(ce){return new f.y(ne=>ce.schedule(()=>ne.complete()))}(ce):$}},4402:(Qe,Ee,V)=>{"use strict";V.d(Ee,{D:()=>Te});var f=V(7574),$=V(7444),O=V(5319),ae=V(6554),Ce=V(4087),te=V(377),H=V(4072),W=V(9489);function Te(we,Be){return Be?function(we,Be){if(null!=we){if(function(we){return we&&"function"==typeof we[ae.L]}(we))return function(we,Be){return new f.y(fe=>{const De=new O.w;return De.add(Be.schedule(()=>{const Ne=we[ae.L]();De.add(Ne.subscribe({next(Xe){De.add(Be.schedule(()=>fe.next(Xe)))},error(Xe){De.add(Be.schedule(()=>fe.error(Xe)))},complete(){De.add(Be.schedule(()=>fe.complete()))}}))})),De})}(we,Be);if((0,H.t)(we))return function(we,Be){return new f.y(fe=>{const De=new O.w;return De.add(Be.schedule(()=>we.then(Ne=>{De.add(Be.schedule(()=>{fe.next(Ne),De.add(Be.schedule(()=>fe.complete()))}))},Ne=>{De.add(Be.schedule(()=>fe.error(Ne)))}))),De})}(we,Be);if((0,W.z)(we))return(0,Ce.r)(we,Be);if(function(we){return we&&"function"==typeof we[te.hZ]}(we)||"string"==typeof we)return function(we,Be){if(!we)throw new Error("Iterable cannot be null");return new f.y(fe=>{const De=new O.w;let Ne;return De.add(()=>{Ne&&"function"==typeof Ne.return&&Ne.return()}),De.add(Be.schedule(()=>{Ne=we[te.hZ](),De.add(Be.schedule(function(){if(fe.closed)return;let Xe,dt;try{const qt=Ne.next();Xe=qt.value,dt=qt.done}catch(qt){return void fe.error(qt)}dt?fe.complete():(fe.next(Xe),this.schedule())}))})),De})}(we,Be)}throw new TypeError((null!==we&&typeof we||we)+" is not observable")}(we,Be):we instanceof f.y?we:new f.y((0,$.s)(we))}},6693:(Qe,Ee,V)=>{"use strict";V.d(Ee,{n:()=>ae});var f=V(7574),$=V(5015),O=V(4087);function ae(ce,ne){return ne?(0,O.r)(ce,ne):new f.y((0,$.V)(ce))}},6682:(Qe,Ee,V)=>{"use strict";V.d(Ee,{T:()=>ce});var f=V(7574),$=V(4869),O=V(3282),ae=V(6693);function ce(...ne){let Ce=Number.POSITIVE_INFINITY,te=null,oe=ne[ne.length-1];return(0,$.K)(oe)?(te=ne.pop(),ne.length>1&&"number"==typeof ne[ne.length-1]&&(Ce=ne.pop())):"number"==typeof oe&&(Ce=ne.pop()),null===te&&1===ne.length&&ne[0]instanceof f.y?ne[0]:(0,O.J)(Ce)((0,ae.n)(ne,te))}},5917:(Qe,Ee,V)=>{"use strict";V.d(Ee,{of:()=>ae});var f=V(4869),$=V(6693),O=V(4087);function ae(...ce){let ne=ce[ce.length-1];return(0,f.K)(ne)?(ce.pop(),(0,O.r)(ce,ne)):(0,$.n)(ce)}},8002:(Qe,Ee,V)=>{"use strict";V.d(Ee,{U:()=>$});var f=V(7393);function $(ce,ne){return function(te){if("function"!=typeof ce)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return te.lift(new O(ce,ne))}}class O{constructor(ne,Ce){this.project=ne,this.thisArg=Ce}call(ne,Ce){return Ce.subscribe(new ae(ne,this.project,this.thisArg))}}class ae extends f.L{constructor(ne,Ce,te){super(ne),this.project=Ce,this.count=0,this.thisArg=te||this}_next(ne){let Ce;try{Ce=this.project.call(this.thisArg,ne,this.count++)}catch(te){return void this.destination.error(te)}this.destination.next(Ce)}}},3282:(Qe,Ee,V)=>{"use strict";V.d(Ee,{J:()=>O});var f=V(9773),$=V(4487);function O(ae=Number.POSITIVE_INFINITY){return(0,f.zg)($.y,ae)}},9773:(Qe,Ee,V)=>{"use strict";V.d(Ee,{zg:()=>ae});var f=V(8002),$=V(4402),O=V(5345);function ae(te,oe,U=Number.POSITIVE_INFINITY){return"function"==typeof oe?H=>H.pipe(ae((W,le)=>(0,$.D)(te(W,le)).pipe((0,f.U)((pe,Te)=>oe(W,pe,le,Te))),U)):("number"==typeof oe&&(U=oe),H=>H.lift(new ce(te,U)))}class ce{constructor(oe,U=Number.POSITIVE_INFINITY){this.project=oe,this.concurrent=U}call(oe,U){return U.subscribe(new ne(oe,this.project,this.concurrent))}}class ne extends O.Ds{constructor(oe,U,H=Number.POSITIVE_INFINITY){super(oe),this.project=U,this.concurrent=H,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(oe){this.active<this.concurrent?this._tryNext(oe):this.buffer.push(oe)}_tryNext(oe){let U;const H=this.index++;try{U=this.project(oe,H)}catch(W){return void this.destination.error(W)}this.active++,this._innerSub(U)}_innerSub(oe){const U=new O.IY(this),H=this.destination;H.add(U);const W=(0,O.ft)(oe,U);W!==U&&H.add(W)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(oe){this.destination.next(oe)}notifyComplete(){const oe=this.buffer;this.active--,oe.length>0?this._next(oe.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(Qe,Ee,V)=>{"use strict";V.d(Ee,{ht:()=>H,QV:()=>oe});var f=V(7393),$=V(9193),O=V(5917),ae=V(7574);class te{constructor(pe,Te,we){this.kind=pe,this.value=Te,this.error=we,this.hasValue="N"===pe}observe(pe){switch(this.kind){case"N":return pe.next&&pe.next(this.value);case"E":return pe.error&&pe.error(this.error);case"C":return pe.complete&&pe.complete()}}do(pe,Te,we){switch(this.kind){case"N":return pe&&pe(this.value);case"E":return Te&&Te(this.error);case"C":return we&&we()}}accept(pe,Te,we){return pe&&"function"==typeof pe.next?this.observe(pe):this.do(pe,Te,we)}toObservable(){switch(this.kind){case"N":return(0,O.of)(this.value);case"E":return le=this.error,new ae.y(Te=>Te.error(le));case"C":return(0,$.c)()}var le;throw new Error("unexpected notification kind value")}static createNext(pe){return void 0!==pe?new te("N",pe):te.undefinedValueNotification}static createError(pe){return new te("E",void 0,pe)}static createComplete(){return te.completeNotification}}function oe(le,pe=0){return function(we){return we.lift(new U(le,pe))}}te.completeNotification=new te("C"),te.undefinedValueNotification=new te("N",void 0);class U{constructor(pe,Te=0){this.scheduler=pe,this.delay=Te}call(pe,Te){return Te.subscribe(new H(pe,this.scheduler,this.delay))}}class H extends f.L{constructor(pe,Te,we=0){super(pe),this.scheduler=Te,this.delay=we}static dispatch(pe){const{notification:Te,destination:we}=pe;Te.observe(we),this.unsubscribe()}scheduleMessage(pe){this.destination.add(this.scheduler.schedule(H.dispatch,this.delay,new W(pe,this.destination)))}_next(pe){this.scheduleMessage(te.createNext(pe))}_error(pe){this.scheduleMessage(te.createError(pe)),this.unsubscribe()}_complete(){this.scheduleMessage(te.createComplete()),this.unsubscribe()}}class W{constructor(pe,Te){this.notification=pe,this.destination=Te}}},1307:(Qe,Ee,V)=>{"use strict";V.d(Ee,{x:()=>$});var f=V(7393);function $(){return function(ne){return ne.lift(new O(ne))}}class O{constructor(ne){this.connectable=ne}call(ne,Ce){const{connectable:te}=this;te._refCount++;const oe=new ae(ne,te),U=Ce.subscribe(oe);return oe.closed||(oe.connection=te.connect()),U}}class ae extends f.L{constructor(ne,Ce){super(ne),this.connectable=Ce}_unsubscribe(){const{connectable:ne}=this;if(!ne)return void(this.connection=null);this.connectable=null;const Ce=ne._refCount;if(Ce<=0)return void(this.connection=null);if(ne._refCount=Ce-1,Ce>1)return void(this.connection=null);const{connection:te}=this,oe=ne._connection;this.connection=null,oe&&(!te||oe===te)&&oe.unsubscribe()}}},8819:(Qe,Ee,V)=>{"use strict";V.d(Ee,{B:()=>Ce});var f=V(2441);var ae=V(1307),ce=V(9765);function ne(){return new ce.xQ}function Ce(){return te=>(0,ae.x)()(function(te,oe){return function(H){let W;W="function"==typeof te?te:function(){return te};const le=Object.create(H,f.N);return le.source=H,le.subjectFactory=W,le}}(ne)(te))}},3101:(Qe,Ee,V)=>{"use strict";V.d(Ee,{R:()=>Be});var f=V(7574);let $=1;const O=Promise.resolve(),ae={};function ce(De){return De in ae&&(delete ae[De],!0)}const ne={setImmediate(De){const Ne=$++;return ae[Ne]=!0,O.then(()=>ce(Ne)&&De()),Ne},clearImmediate(De){ce(De)}};var te=V(6465),U=V(6102);const le=new class extends U.v{flush(Ne){this.active=!0,this.scheduled=void 0;const{actions:Xe}=this;let dt,qt=-1,Lt=Xe.length;Ne=Ne||Xe.shift();do{if(dt=Ne.execute(Ne.state,Ne.delay))break}while(++qt<Lt&&(Ne=Xe.shift()));if(this.active=!1,dt){for(;++qt<Lt&&(Ne=Xe.shift());)Ne.unsubscribe();throw dt}}}(class extends te.o{constructor(Ne,Xe){super(Ne,Xe),this.scheduler=Ne,this.work=Xe}requestAsyncId(Ne,Xe,dt=0){return null!==dt&&dt>0?super.requestAsyncId(Ne,Xe,dt):(Ne.actions.push(this),Ne.scheduled||(Ne.scheduled=ne.setImmediate(Ne.flush.bind(Ne,null))))}recycleAsyncId(Ne,Xe,dt=0){if(null!==dt&&dt>0||null===dt&&this.delay>0)return super.recycleAsyncId(Ne,Xe,dt);0===Ne.actions.length&&(ne.clearImmediate(Xe),Ne.scheduled=void 0)}});var pe=V(9796);class we extends f.y{constructor(Ne,Xe=0,dt=le){var De;super(),this.source=Ne,this.delayTime=Xe,this.scheduler=dt,(!(!(0,pe.k)(De=Xe)&&De-parseFloat(De)+1>=0)||Xe<0)&&(this.delayTime=0),(!dt||"function"!=typeof dt.schedule)&&(this.scheduler=le)}static create(Ne,Xe=0,dt=le){return new we(Ne,Xe,dt)}static dispatch(Ne){const{source:Xe,subscriber:dt}=Ne;return this.add(Xe.subscribe(dt))}_subscribe(Ne){return this.scheduler.schedule(we.dispatch,this.delayTime,{source:this.source,subscriber:Ne})}}function Be(De,Ne=0){return function(dt){return dt.lift(new fe(De,Ne))}}class fe{constructor(Ne,Xe){this.scheduler=Ne,this.delay=Xe}call(Ne,Xe){return new we(Xe,this.delay,this.scheduler).subscribe(Ne)}}},3342:(Qe,Ee,V)=>{"use strict";V.d(Ee,{b:()=>ae});var f=V(7393);function $(){}var O=V(9105);function ae(Ce,te,oe){return function(H){return H.lift(new ce(Ce,te,oe))}}class ce{constructor(te,oe,U){this.nextOrObserver=te,this.error=oe,this.complete=U}call(te,oe){return oe.subscribe(new ne(te,this.nextOrObserver,this.error,this.complete))}}class ne extends f.L{constructor(te,oe,U,H){super(te),this._tapNext=$,this._tapError=$,this._tapComplete=$,this._tapError=U||$,this._tapComplete=H||$,(0,O.m)(oe)?(this._context=this,this._tapNext=oe):oe&&(this._context=oe,this._tapNext=oe.next||$,this._tapError=oe.error||$,this._tapComplete=oe.complete||$)}_next(te){try{this._tapNext.call(this._context,te)}catch(oe){return void this.destination.error(oe)}this.destination.next(te)}_error(te){try{this._tapError.call(this._context,te)}catch(oe){return void this.destination.error(oe)}this.destination.error(te)}_complete(){try{this._tapComplete.call(this._context)}catch(te){return void this.destination.error(te)}return this.destination.complete()}}},4087:(Qe,Ee,V)=>{"use strict";V.d(Ee,{r:()=>O});var f=V(7574),$=V(5319);function O(ae,ce){return new f.y(ne=>{const Ce=new $.w;let te=0;return Ce.add(ce.schedule(function(){te!==ae.length?(ne.next(ae[te++]),ne.closed||Ce.add(this.schedule())):ne.complete()})),Ce})}},6465:(Qe,Ee,V)=>{"use strict";V.d(Ee,{o:()=>O});var f=V(5319);class $ extends f.w{constructor(ce,ne){super()}schedule(ce,ne=0){return this}}class O extends ${constructor(ce,ne){super(ce,ne),this.scheduler=ce,this.work=ne,this.pending=!1}schedule(ce,ne=0){if(this.closed)return this;this.state=ce;const Ce=this.id,te=this.scheduler;return null!=Ce&&(this.id=this.recycleAsyncId(te,Ce,ne)),this.pending=!0,this.delay=ne,this.id=this.id||this.requestAsyncId(te,this.id,ne),this}requestAsyncId(ce,ne,Ce=0){return setInterval(ce.flush.bind(ce,this),Ce)}recycleAsyncId(ce,ne,Ce=0){if(null!==Ce&&this.delay===Ce&&!1===this.pending)return ne;clearInterval(ne)}execute(ce,ne){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ce=this._execute(ce,ne);if(Ce)return Ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ce,ne){let te,Ce=!1;try{this.work(ce)}catch(oe){Ce=!0,te=!!oe&&oe||new Error(oe)}if(Ce)return this.unsubscribe(),te}_unsubscribe(){const ce=this.id,ne=this.scheduler,Ce=ne.actions,te=Ce.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==te&&Ce.splice(te,1),null!=ce&&(this.id=this.recycleAsyncId(ne,ce,null)),this.delay=null}}},6102:(Qe,Ee,V)=>{"use strict";V.d(Ee,{v:()=>$});let f=(()=>{class O{constructor(ce,ne=O.now){this.SchedulerAction=ce,this.now=ne}schedule(ce,ne=0,Ce){return new this.SchedulerAction(this,ce).schedule(Ce,ne)}}return O.now=()=>Date.now(),O})();class $ extends f{constructor(ae,ce=f.now){super(ae,()=>$.delegate&&$.delegate!==this?$.delegate.now():ce()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(ae,ce=0,ne){return $.delegate&&$.delegate!==this?$.delegate.schedule(ae,ce,ne):super.schedule(ae,ce,ne)}flush(ae){const{actions:ce}=this;if(this.active)return void ce.push(ae);let ne;this.active=!0;do{if(ne=ae.execute(ae.state,ae.delay))break}while(ae=ce.shift());if(this.active=!1,ne){for(;ae=ce.shift();)ae.unsubscribe();throw ne}}}},3637:(Qe,Ee,V)=>{"use strict";V.d(Ee,{z:()=>O,P:()=>ae});var f=V(6465);const O=new(V(6102).v)(f.o),ae=O},7771:(Qe,Ee,V)=>{"use strict";V.d(Ee,{c:()=>ne,N:()=>ce});var f=V(6465),O=V(6102);const ce=new class extends O.v{}(class extends f.o{constructor(te,oe){super(te,oe),this.scheduler=te,this.work=oe}schedule(te,oe=0){return oe>0?super.schedule(te,oe):(this.delay=oe,this.state=te,this.scheduler.flush(this),this)}execute(te,oe){return oe>0||this.closed?super.execute(te,oe):this._execute(te,oe)}requestAsyncId(te,oe,U=0){return null!==U&&U>0||null===U&&this.delay>0?super.requestAsyncId(te,oe,U):te.flush(this)}}),ne=ce},377:(Qe,Ee,V)=>{"use strict";V.d(Ee,{hZ:()=>$});const $="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(Qe,Ee,V)=>{"use strict";V.d(Ee,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(Qe,Ee,V)=>{"use strict";V.d(Ee,{b:()=>f});const f="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(Qe,Ee,V)=>{"use strict";V.d(Ee,{N:()=>$});const $=(()=>{function O(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return O.prototype=Object.create(Error.prototype),O})()},4449:(Qe,Ee,V)=>{"use strict";function f($){setTimeout(()=>{throw $},0)}V.d(Ee,{z:()=>f})},4487:(Qe,Ee,V)=>{"use strict";function f($){return $}V.d(Ee,{y:()=>f})},9796:(Qe,Ee,V)=>{"use strict";V.d(Ee,{k:()=>f});const f=Array.isArray||($=>$&&"number"==typeof $.length)},9489:(Qe,Ee,V)=>{"use strict";V.d(Ee,{z:()=>f});const f=$=>$&&"number"==typeof $.length&&"function"!=typeof $},9105:(Qe,Ee,V)=>{"use strict";function f($){return"function"==typeof $}V.d(Ee,{m:()=>f})},1555:(Qe,Ee,V)=>{"use strict";function f($){return null!==$&&"object"==typeof $}V.d(Ee,{K:()=>f})},4072:(Qe,Ee,V)=>{"use strict";function f($){return!!$&&"function"!=typeof $.subscribe&&"function"==typeof $.then}V.d(Ee,{t:()=>f})},4869:(Qe,Ee,V)=>{"use strict";function f($){return $&&"function"==typeof $.schedule}V.d(Ee,{K:()=>f})},7444:(Qe,Ee,V)=>{"use strict";V.d(Ee,{s:()=>H});var f=V(5015),$=V(4449),ae=V(377),ne=V(6554),te=V(9489),oe=V(4072),U=V(1555);const H=W=>{if(W&&"function"==typeof W[ne.L])return(W=>le=>{const pe=W[ne.L]();if("function"!=typeof pe.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return pe.subscribe(le)})(W);if((0,te.z)(W))return(0,f.V)(W);if((0,oe.t)(W))return(W=>le=>(W.then(pe=>{le.closed||(le.next(pe),le.complete())},pe=>le.error(pe)).then(null,$.z),le))(W);if(W&&"function"==typeof W[ae.hZ])return(W=>le=>{const pe=W[ae.hZ]();for(;;){let Te;try{Te=pe.next()}catch(we){return le.error(we),le}if(Te.done){le.complete();break}if(le.next(Te.value),le.closed)break}return"function"==typeof pe.return&&le.add(()=>{pe.return&&pe.return()}),le})(W);{const pe=`You provided ${(0,U.K)(W)?"an invalid object":`'${W}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(pe)}}},5015:(Qe,Ee,V)=>{"use strict";V.d(Ee,{V:()=>f});const f=$=>O=>{for(let ae=0,ce=$.length;ae<ce&&!O.closed;ae++)O.next($[ae]);O.complete()}},6944:(Qe,Ee,V)=>{"use strict";var f=V(7716);let $=null;function O(){return $}const Ce=new f.OlP("DocumentToken");let te=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,f.Yz7)({factory:oe,token:n,providedIn:"platform"}),n})();function oe(){return(0,f.LFG)(H)}const U=new f.OlP("Location Initialized");let H=(()=>{class n extends te{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){W()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){W()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ce))},n.\u0275prov=(0,f.Yz7)({factory:le,token:n,providedIn:"platform"}),n})();function W(){return!!window.history.pushState}function le(){return new H((0,f.LFG)(Ce))}function pe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Te(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function we(n){return n&&"?"!==n[0]?"?"+n:n}let Be=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,f.Yz7)({factory:fe,token:n,providedIn:"root"}),n})();function fe(n){const e=(0,f.LFG)(Ce).location;return new Ne((0,f.LFG)(te),e&&e.origin||"")}const De=new f.OlP("appBaseHref");let Ne=(()=>{class n extends Be{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return pe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+we(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const c=this.prepareExternalUrl(o+we(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,o,u){const c=this.prepareExternalUrl(o+we(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(te),f.LFG(De,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Xe=(()=>{class n extends Be{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=pe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let c=this.prepareExternalUrl(o+we(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,o,u){let c=this.prepareExternalUrl(o+we(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(te),f.LFG(De,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),dt=(()=>{class n{constructor(t,r){this._subject=new f.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Te(vt(o)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+we(r))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,vt(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+we(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+we(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Be),f.LFG(te))},n.normalizeQueryParams=we,n.joinWithSlash=pe,n.stripTrailingSlash=Te,n.\u0275prov=(0,f.Yz7)({factory:qt,token:n,providedIn:"root"}),n})();function qt(){return new dt((0,f.LFG)(Be),(0,f.LFG)(te))}function vt(n){return n.replace(/\/index.html$/,"")}var $e=(()=>(($e=$e||{})[$e.Zero=0]="Zero",$e[$e.One=1]="One",$e[$e.Two=2]="Two",$e[$e.Few=3]="Few",$e[$e.Many=4]="Many",$e[$e.Other=5]="Other",$e))();const Xr=f.kL8;class Si{}let yr=(()=>{class n extends Si{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(Xr(r||this.locale)(t)){case $e.Zero:return"zero";case $e.One:return"one";case $e.Two:return"two";case $e.Few:return"few";case $e.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.soG))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),qs=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new xc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ga("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ga("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class xc{constructor(){this.$implicit=null,this.ngIf=null}}function ga(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}let bo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[{provide:Si,useClass:yr}]}),n})();function va(n){return"server"===n}let Co=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new xh((0,f.LFG)(Ce),window)}),n})();class xh{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=yl(this.window.history)||yl(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function yl(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Io extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new Io,$||($=n)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(To=To||document.querySelector("base"),To?To.getAttribute("href"):null);return null==t?null:function(n){Xt=Xt||document.createElement("a"),Xt.setAttribute("href",n);const e=Xt.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){To=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Xt,To=null;const Do=new f.OlP("TRANSITION_ID"),Ni=[{provide:f.ip1,useFactory:function(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[Do,Ce,f.zs3],multi:!0}];class ar{static init(){(0,f.VLi)(new ar)}addToWindow(e){f.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const o=f.dqk.getAllAngularTestabilities();let u=o.length,c=!1;const p=function(y){c=c||y,u--,0==u&&r(c)};o.forEach(function(y){y.whenStable(p)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Vc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Cs=new f.OlP("EventManagerPlugins");let Se=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const c=o[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Cs),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Ft{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let lu=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Cn=(()=>{class n extends lu{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,o.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(cu),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(cu))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ce))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function cu(n){O().remove(n)}const Is={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ni=/%COMP%/g;function hr(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?hr(n,o,t):(o=o.replace(ni,n),t.push(o))}return t}function ri(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ls=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Ar(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case f.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new hu(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case f.ifc.ShadowDom:return new Wc(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=hr(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Se),f.LFG(Cn),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Ar{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(Is[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=Is[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=Is[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,o&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,ri(r)):this.eventManager.addEventListener(e,t,ri(r))}}class hu extends Ar{constructor(e,t,r,o){super(e),this.component=r;const u=hr(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr="_ngcontent-%COMP%".replace(ni,o+"-"+r.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(ni,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Wc extends Ar{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=hr(o.id,o.styles,[]);for(let c=0;c<u.length;c++){const p=document.createElement("style");p.textContent=u[c],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Ro=(()=>{class n extends Ft{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ce))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Mo=["alt","control","meta","shift"],zc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Sr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ph={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Tl=(()=>{class n extends Ft{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let c="";if(Mo.forEach(y=>{const b=r.indexOf(y);b>-1&&(r.splice(b,1),c+=y+".")}),c+=u,0!=r.length||0===u.length)return null;const p={};return p.domEventName=o,p.fullKey=c,p}static getEventFullKey(t){let r="",o=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Sr.hasOwnProperty(e)&&(e=Sr[e]))}return zc[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Mo.forEach(u=>{u!=o&&Ph[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ce))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Mi=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function(){Io.makeCurrent(),ar.init()},multi:!0},{provide:Ce,useFactory:function(){return(0,f.RDi)(document),document},deps:[]}]),Al=[[],{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function(){return new f.qLn},deps:[]},{provide:Cs,useClass:Ro,multi:!0,deps:[Ce,f.R0b,f.Lbi]},{provide:Cs,useClass:Tl,multi:!0,deps:[Ce]},[],{provide:ls,useClass:ls,deps:[Se,Cn,f.AFp]},{provide:f.FYo,useExisting:ls},{provide:lu,useExisting:Cn},{provide:Cn,useClass:Cn,deps:[Ce]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b]},{provide:Se,useClass:Se,deps:[Cs,f.R0b]},{provide:class{},useClass:Vc,deps:[]},[]];let Lp=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:Do,useExisting:f.AFp},Ni]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(n,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:Al,imports:[bo,f.hGG]}),n})();"undefined"!=typeof window&&window;const xl_firebase={apiKey:"AIzaSyACAe5MLGpzHwnmmudbq_G6PYxdFGJudZs",authDomain:"portal-ae5ef.firebaseapp.com",projectId:"portal-ae5ef",storageBucket:"portal-ae5ef.appspot.com",messagingSenderId:"172240261404",appId:"1:172240261404:web:2a4c96f816f170a8bdaad9",measurementId:"G-JLDG13LNCR"};var Ut=V(4402),ut=V(5917),cs=V(9765),xa=V(7971);class _i extends cs.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new xa.N;return this._value}next(e){super.next(this._value=e)}}var Xc=V(4869),Ds=V(9796),ii=V(7393);class ed extends ii.L{notifyNext(e,t,r,o,u){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class Rl extends ii.L{constructor(e,t,r){super(),this.parent=e,this.outerValue=t,this.outerIndex=r,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var vu=V(7444),vr=V(7574);function Eu(n,e,t,r,o=new Rl(n,t,r)){if(!o.closed)return e instanceof vr.y?e.subscribe(o):(0,vu.s)(e)(o)}var Yn=V(6693);const As={};class wu{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new bu(e,this.resultSelector))}}class bu extends ed{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(As),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let r=0;r<t;r++)this.add(Eu(this,e[r],void 0,r))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,r){const o=this.values,c=this.toRespond?o[r]===As?--this.toRespond:this.toRespond:0;o[r]=t,0===c&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}const Ss=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();var Pi=V(3282);function eo(...n){return(0,Pi.J)(1)((0,ut.of)(...n))}var $r=V(9193);function Fo(n){return new vr.y(e=>{let t;try{t=n()}catch(o){return void e.error(o)}return(t?(0,Ut.D)(t):(0,$r.c)()).subscribe(e)})}var Lh=V(2441),At=V(8002),Ra=V(5345);function lr(n,e){return"function"==typeof e?t=>t.pipe(lr((r,o)=>(0,Ut.D)(n(r,o)).pipe((0,At.U)((u,c)=>e(r,u,o,c))))):t=>t.lift(new Mn(n))}class Mn{constructor(e){this.project=e}call(e,t){return t.subscribe(new Vh(e,this.project))}}class Vh extends Ra.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const r=this.index++;try{t=this.project(e,r)}catch(o){return void this.destination.error(o)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const r=new Ra.IY(this),o=this.destination;o.add(r),this.innerSubscription=(0,Ra.ft)(e,r),this.innerSubscription!==r&&o.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const Uh=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function Bh(n){return e=>0===n?(0,$r.c)():e.lift(new Xm(n))}class Xm{constructor(e){if(this.total=e,this.total<0)throw new Uh}call(e,t){return t.subscribe(new rE(e,this.total))}}class rE extends ii.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))}}function Cu(...n){const e=n[n.length-1];return(0,Xc.K)(e)?(n.pop(),t=>eo(n,t,e)):t=>eo(n,t)}function Na(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(o){return o.lift(new e_(n,e,t))}}class e_{constructor(e,t,r=!1){this.accumulator=e,this.seed=t,this.hasSeed=r}call(e,t){return t.subscribe(new jh(e,this.accumulator,this.seed,this.hasSeed))}}class jh extends ii.L{constructor(e,t,r,o){super(e),this.accumulator=t,this._seed=r,this.hasSeed=o,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let r;try{r=this.accumulator(this.seed,e,t)}catch(o){this.destination.error(o)}this.seed=r,this.destination.next(r)}}function Oi(n,e){return function(r){return r.lift(new Lo(n,e))}}class Lo{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new td(e,this.predicate,this.thisArg))}}class td extends ii.L{constructor(e,t,r){super(e),this.predicate=t,this.thisArg=r,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}t&&this.destination.next(e)}}function wn(n){return function(t){const r=new Ma(n),o=t.lift(r);return r.caught=o}}class Ma{constructor(e){this.selector=e}call(e,t){return t.subscribe(new ka(e,this.selector,this.caught))}}class ka extends Ra.Ds{constructor(e,t,r){super(e),this.selector=t,this.caught=r}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(u){return void super.error(u)}this._unsubscribeAndRecycle();const r=new Ra.IY(this);this.add(r);const o=(0,Ra.ft)(t,r);o!==r&&this.add(o)}}}var xr=V(9773);function Pl(n,e){return(0,xr.zg)(n,e,1)}function yi(n){return function(t){return 0===n?(0,$r.c)():t.lift(new ds(n))}}class ds{constructor(e){if(this.total=e,this.total<0)throw new Uh}call(e,t){return t.subscribe(new Pa(e,this.total))}}class Pa extends ii.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,r=this.total,o=this.count++;t.length<r?t.push(e):t[o%r]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const r=this.count>=this.total?this.total:this.count,o=this.ring;for(let u=0;u<r;u++){const c=t++%r;e.next(o[c])}}e.complete()}}function vi(n=$p){return e=>e.lift(new xs(n))}class xs{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new $h(e,this.errorFactory))}}class $h extends ii.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function $p(){return new Ss}function to(n=null){return e=>e.lift(new Hp(n))}class Hp{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new Oa(e,this.defaultValue))}}class Oa extends ii.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var nd=V(4487);function Li(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Oi((o,u)=>n(o,u,r)):nd.y,Bh(1),t?to(e):vi(()=>new Ss))}var fr=V(3342),Hh=V(1307),Gh=V(5319);class A{constructor(e){this.callback=e}call(e,t){return t.subscribe(new M(e,this.callback))}}class M extends ii.L{constructor(e,t){super(e),this.add(new Gh.w(t))}}class B{constructor(e,t){this.id=e,this.url=t}}class re extends B{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ue extends B{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ke extends B{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Je extends B{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class gt extends B{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ft extends B{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qt extends B{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class bt extends B{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vi extends B{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qn{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Fa{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Iu{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ol{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xi{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hs{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fs{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Wt="primary";class Jn{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Vo(n){return new Jn(n)}const iE="ngNavigationCancelingError";function es(n){const e=Error("NavigationCancelingError: "+n);return e[iE]=!0,e}function sE(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const c=r[u],p=n[u];if(c.startsWith(":"))o[c.substring(1)]=p;else if(c!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function ts(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!Gp(n[o],e[o]))return!1;return!0}function Gp(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function Tu(n){return Array.prototype.concat.apply([],n)}function Rs(n){return n.length>0?n[n.length-1]:null}function Vn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function no(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,Ut.D)(Promise.resolve(n)):(0,ut.of)(n)}const id={exact:function n_(n,e,t){if(!Du(n.segments,e.segments)||!od(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!n_(n.children[r],e.children[r],t))return!1;return!0},subset:La},sd={exact:function(n,e){return ts(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Gp(n[t],e[t]))},ignored:()=>!0};function qp(n,e,t){return id[t.paths](n.root,e.root,t.matrixParams)&&sd[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function La(n,e,t){return r_(n,e,e.segments,t)}function r_(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!Du(o,t)||e.hasChildren()||!od(o,t,r))}if(n.segments.length===t.length){if(!Du(n.segments,t)||!od(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!La(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Du(n.segments,o)&&od(n.segments,o,r)&&n.children[Wt])&&r_(n.children[Wt],e,u,r)}}function od(n,e,t){return e.every((r,o)=>sd[t](n[o].parameters,r.parameters))}class ro{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Vo(this.queryParams)),this._queryParamMap}toString(){return Ll.serialize(this)}}class Zt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Vn(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ld(this)}}class ad{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Vo(this.parameters)),this._parameterMap}toString(){return Uo(this)}}function Du(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Au{}class ud{parse(e){const t=new cE(e);return new ro(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){var n;return`${`/${Su(e.root,!0)}`}${function(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${xu(t)}=${xu(o)}`).join("&"):`${xu(t)}=${xu(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${n=e.fragment,encodeURI(n)}`:""}`}}const Ll=new ud;function ld(n){return n.segments.map(e=>Uo(e)).join("/")}function Su(n,e){if(!n.hasChildren())return ld(n);if(e){const t=n.children[Wt]?Su(n.children[Wt],!1):"",r=[];return Vn(n.children,(o,u)=>{u!==Wt&&r.push(`${u}:${Su(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function(n,e){let t=[];return Vn(n.children,(r,o)=>{o===Wt&&(t=t.concat(e(r,o)))}),Vn(n.children,(r,o)=>{o!==Wt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Wt?[Su(n.children[Wt],!1)]:[`${o}:${Su(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Wt]?`${ld(n)}/${t[0]}`:`${ld(n)}/(${t.join("//")})`}}function oE(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xu(n){return oE(n).replace(/%3B/gi,";")}function Vl(n){return oE(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function cd(n){return decodeURIComponent(n)}function Kp(n){return cd(n.replace(/\+/g,"%20"))}function Uo(n){return`${Vl(n.path)}${function(n){return Object.keys(n).map(e=>`;${Vl(e)}=${Vl(n[e])}`).join("")}(n.parameters)}`}const uE=/^[^\/()?;=#]+/;function zh(n){const e=n.match(uE);return e?e[0]:""}const lE=/^[^=?&#]+/,Ul=/^[^?&#]+/;class cE{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Zt([],{}):new Zt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Wt]=new Zt(e,t)),r}parseSegment(){const e=zh(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new ad(cd(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=zh(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=zh(this.remaining);o&&(r=o,this.capture(r))}e[cd(t)]=cd(r)}parseQueryParam(e){const t=function(n){const e=n.match(lE);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function(n){const e=n.match(Ul);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const o=Kp(t),u=Kp(r);if(e.hasOwnProperty(o)){let c=e[o];Array.isArray(c)||(c=[c],e[o]=c),c.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=zh(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Wt);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[Wt]:new Zt([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class o_{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=dd(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=dd(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Yp(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Yp(e,this._root).map(t=>t.value)}}function dd(n,e){if(n===e.value)return e;for(const t of e.children){const r=dd(n,t);if(r)return r}return null}function Yp(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Yp(n,t);if(r.length)return r.unshift(e),r}return[]}class jo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Bl(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class a_ extends o_{constructor(e,t){super(e),this.snapshot=t,ps(this,e)}toString(){return this.snapshot.toString()}}function u_(n,e){const t=function(n,e){const c=new Va([],{},{},"",{},Wt,e,null,n.root,-1,{});return new hd("",new jo(c,[]))}(n,e),r=new _i([new ad("",{})]),o=new _i({}),u=new _i({}),c=new _i({}),p=new _i(""),y=new jl(r,o,c,p,u,Wt,e,t.root);return y.snapshot=t.root,new a_(new jo(y,[]),t)}class jl{constructor(e,t,r,o,u,c,p,y){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=c,this.component=p,this._futureSnapshot=y}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,At.U)(e=>Vo(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,At.U)(e=>Vo(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function dE(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Va{constructor(e,t,r,o,u,c,p,y,b,D,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=c,this.component=p,this.routeConfig=y,this._urlSegment=b,this._lastPathIndex=D,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Vo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Vo(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class hd extends o_{constructor(e,t){super(t),this.url=e,ps(this,t)}toString(){return Ua(this._root)}}function ps(n,e){e.value._routerState=n,e.children.forEach(t=>ps(n,t))}function Ua(n){const e=n.children.length>0?` { ${n.children.map(Ua).join(", ")} } `:"";return`${n.value}${e}`}function Kh(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ts(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ts(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ts(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ts(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function fd(n,e){return ts(n.params,e.params)&&function(n,e){return Du(n,e)&&n.every((t,r)=>ts(t.parameters,e[r].parameters))}(n.url,e.url)&&!(!n.parent!=!e.parent)&&(!n.parent||fd(n.parent,e.parent))}function pd(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return pd(n,r,o);return pd(n,r)})}(n,e,t);return new jo(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return fE(e,c),c}}const r=function(n){return new jl(new _i(n.url),new _i(n.params),new _i(n.queryParams),new _i(n.fragment),new _i(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>pd(n,u));return new jo(r,o)}}function fE(n,e){if(n.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=n.value;for(let t=0;t<n.children.length;++t)fE(n.children[t],e.children[t])}function $l(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Qh(n){return"object"==typeof n&&null!=n&&n.outlets}function gE(n,e,t,r,o){let u={};return r&&Vn(r,(c,p)=>{u[p]=Array.isArray(c)?c.map(y=>`${y}`):`${c}`}),new ro(t.root===n?e:E(t.root,n,e),u,o)}function E(n,e,t){const r={};return Vn(n.children,(o,u)=>{r[u]=o===e?t:E(o,e,t)}),new Zt(n.segments,r)}class g{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&$l(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(Qh);if(o&&o!==Rs(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class C{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function _e(n,e,t){if(n||(n=new Zt([],{})),0===n.segments.length&&n.hasChildren())return je(n,e,t);const r=function(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const c=n.segments[o],p=t[r];if(Qh(p))break;const y=`${p}`,b=r<t.length-1?t[r+1]:null;if(o>0&&void 0===y)break;if(y&&b&&"object"==typeof b&&void 0===b.outlets){if(!Rr(y,b,c))return u;r+=2}else{if(!Rr(y,{},c))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Zt(n.segments.slice(0,r.pathIndex),{});return u.children[Wt]=new Zt(n.segments.slice(r.pathIndex),n.children),je(u,0,o)}return r.match&&0===o.length?new Zt(n.segments,{}):r.match&&!n.hasChildren()?Ke(n,e,t):r.match?je(n,0,o):Ke(n,e,t)}function je(n,e,t){if(0===t.length)return new Zt(n.segments,{});{const r=function(n){return Qh(n[0])?n[0].outlets:{[Wt]:n}}(t),o={};return Vn(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[c]=_e(n.children[c],e,u))}),Vn(n.children,(u,c)=>{void 0===r[c]&&(o[c]=u)}),new Zt(n.segments,o)}}function Ke(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(Qh(u)){const y=hn(u.outlets);return new Zt(r,y)}if(0===o&&$l(t[0])){r.push(new ad(n.segments[e].path,In(t[0]))),o++;continue}const c=Qh(u)?u.outlets[Wt]:`${u}`,p=o<t.length-1?t[o+1]:null;c&&p&&$l(p)?(r.push(new ad(c,In(p))),o+=2):(r.push(new ad(c,{})),o++)}return new Zt(r,{})}function hn(n){const e={};return Vn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Ke(new Zt([],{}),0,t))}),e}function In(n){const e={};return Vn(n,(t,r)=>e[r]=`${t}`),e}function Rr(n,e,t){return n==t.path&&ts(e,t.parameters)}class Jh{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Kh(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=Bl(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,o[c],r),delete o[c]}),Vn(o,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const c=r.getContext(o.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet);if(r&&r.outlet){const o=r.outlet.detach(),u=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:u})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Bl(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=Bl(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new hs(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Ol(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(Kh(o),o===u)if(o.component){const c=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const c=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const p=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),c.children.onOutletReAttached(p.contexts),c.attachRef=p.componentRef,c.route=p.route.value,c.outlet&&c.outlet.attach(p.componentRef,p.route.value),Xh(p.route)}else{const p=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),y=p?p.module.componentFactoryResolver:null;c.attachRef=null,c.route=o,c.resolver=y,c.outlet&&c.outlet.activateWith(o,y),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}function Xh(n){Kh(n.value),n.children.forEach(Xh)}class ef{constructor(e,t){this.routes=e,this.module=t}}function io(n){return"function"==typeof n}function Ru(n){return n instanceof ro}const Hl=Symbol("INITIAL_VALUE");function Nr(){return lr(n=>function(...n){let e,t;return(0,Xc.K)(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&(0,Ds.k)(n[0])&&(n=n[0]),(0,Yn.n)(n,t).lift(new wu(e))}(n.map(e=>e.pipe(Bh(1),Cu(Hl)))).pipe(Na((e,t)=>{let r=!1;return t.reduce((o,u,c)=>o!==Hl?o:(u===Hl&&(r=!0),r||!1!==u&&c!==t.length-1&&!Ru(u)?o:u),e)},Hl),Oi(e=>e!==Hl),(0,At.U)(e=>Ru(e)?e:!0===e),Bh(1)))}let nf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},directives:function(){return[cf]},encapsulation:2}),n})();function h_(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];wx(r,bx(e,r))}}function wx(n,e){n.children&&h_(n.children,e)}function bx(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function f_(n){const e=n.children&&n.children.map(f_),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Wt&&(t.component=nf),t}function so(n){return n.outlet||Wt}function _E(n,e){const t=n.filter(r=>so(r)===e);return t.push(...n.filter(r=>so(r)!==e)),t}const IC={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Xp(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},IC):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const u=(e.matcher||sE)(t,n,e);if(!u)return Object.assign({},IC);const c={};Vn(u.posParams,(y,b)=>{c[b]=y.path});const p=u.consumed.length>0?Object.assign(Object.assign({},c),u.consumed[u.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:u.consumed,lastChild:u.consumed.length,parameters:p,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function p_(n,e,t,r,o="corrected"){if(t.length>0&&function(n,e,t){return t.some(r=>eg(n,e,r)&&so(r)!==Wt)}(n,t,r)){const c=new Zt(e,function(n,e,t,r){const o={};o[Wt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&so(u)!==Wt){const c=new Zt([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,o[so(u)]=c}return o}(n,e,r,new Zt(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(r=>eg(n,e,r))}(n,t,r)){const c=new Zt(n.segments,function(n,e,t,r,o,u){const c={};for(const p of r)if(eg(n,t,p)&&!o[so(p)]){const y=new Zt([],{});y._sourceSegment=n,y._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[so(p)]=y}return Object.assign(Object.assign({},o),c)}(n,e,t,r,n.children,o));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new Zt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function eg(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function DC(n,e,t,r){return!!(so(n)===r||r!==Wt&&eg(e,t,n))&&("**"===n.path||Xp(e,n,t).matched)}function Tx(n,e,t){return 0===e.length&&!n.children[t]}class rf{constructor(e){this.segmentGroup=e||null}}class tg{constructor(e){this.urlTree=e}}function g_(n){return new vr.y(e=>e.error(new rf(n)))}function AC(n){return new vr.y(e=>e.error(new tg(n)))}function sf(n){return new vr.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class Sx{constructor(e,t,r,o,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(f.h0i)}apply(){const e=p_(this.urlTree.root,[],[],this.config).segmentGroup,t=new Zt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Wt).pipe((0,At.U)(u=>this.createUrlTree(vE(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(wn(u=>{if(u instanceof tg)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof rf?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Wt).pipe((0,At.U)(o=>this.createUrlTree(vE(o),e.queryParams,e.fragment))).pipe(wn(o=>{throw o instanceof rf?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new Zt([],{[Wt]:e}):e;return new ro(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,At.U)(u=>new Zt([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,Ut.D)(o).pipe(Pl(u=>{const c=r.children[u],p=_E(t,u);return this.expandSegmentGroup(e,p,c,u).pipe((0,At.U)(y=>({segment:y,outlet:u})))}),Na((u,c)=>(u[c.outlet]=c.segment,u),{}),function(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Oi((o,u)=>n(o,u,r)):nd.y,yi(1),t?to(e):vi(()=>new Ss))}())}expandSegment(e,t,r,o,u,c){return(0,Ut.D)(r).pipe(Pl(p=>this.expandSegmentAgainstRoute(e,t,r,p,o,u,c).pipe(wn(b=>{if(b instanceof rf)return(0,ut.of)(null);throw b}))),Li(p=>!!p),wn((p,y)=>{if(p instanceof Ss||"EmptyError"===p.name){if(Tx(t,o,u))return(0,ut.of)(new Zt([],{}));throw new rf(t)}throw p}))}expandSegmentAgainstRoute(e,t,r,o,u,c,p){return DC(o,t,u,c)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,c):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,c):g_(t):g_(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,c){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?AC(u):this.lineralizeSegments(r,u).pipe((0,xr.zg)(c=>{const p=new Zt(c,{});return this.expandSegment(e,p,t,c,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,c){const{matched:p,consumedSegments:y,lastChild:b,positionalParamSegments:D}=Xp(t,o,u);if(!p)return g_(t);const S=this.applyRedirectCommands(y,o.redirectTo,D);return o.redirectTo.startsWith("/")?AC(S):this.lineralizeSegments(o,S).pipe((0,xr.zg)(P=>this.expandSegment(e,t,r,P.concat(u.slice(b)),c,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?(0,ut.of)(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,At.U)(P=>(r._loadedConfig=P,new Zt(o,{})))):(0,ut.of)(new Zt(o,{}));const{matched:c,consumedSegments:p,lastChild:y}=Xp(t,r,o);if(!c)return g_(t);const b=o.slice(y);return this.getChildConfig(e,r,o).pipe((0,xr.zg)(S=>{const P=S.module,j=S.routes,{segmentGroup:Q,slicedSegments:ye}=p_(t,p,b,j),xe=new Zt(Q.segments,Q.children);if(0===ye.length&&xe.hasChildren())return this.expandChildren(P,j,xe).pipe((0,At.U)(st=>new Zt(p,st)));if(0===j.length&&0===ye.length)return(0,ut.of)(new Zt(p,{}));const ct=so(r)===u;return this.expandSegment(P,xe,j,ye,ct?Wt:u,!0).pipe((0,At.U)(nt=>new Zt(p.concat(nt.segments),nt.children)))}))}getChildConfig(e,t,r){return t.children?(0,ut.of)(new ef(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,ut.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,xr.zg)(o=>{return o?this.configLoader.load(e.injector,t).pipe((0,At.U)(u=>(t._loadedConfig=u,u))):(n=t,new vr.y(e=>e.error(es(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):(0,ut.of)(new ef([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;if(!o||0===o.length)return(0,ut.of)(!0);const u=o.map(c=>{const p=e.get(c);let y;if((n=p)&&io(n.canLoad))y=p.canLoad(t,r);else{if(!io(p))throw new Error("Invalid CanLoad guard");y=p(t,r)}var n;return no(y)});return(0,ut.of)(u).pipe(Nr(),(0,fr.b)(c=>{if(!Ru(c))return;const p=es(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw p.url=c,p}),(0,At.U)(c=>!0===c))}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return(0,ut.of)(r);if(o.numberOfChildren>1||!o.children[Wt])return sf(e.redirectTo);o=o.children[Wt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new ro(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Vn(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const p=o.substring(1);r[u]=t[p]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let c={};return Vn(t.children,(p,y)=>{c[y]=this.createSegmentGroup(e,p,r,o)}),new Zt(u,c)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function vE(n){const e={};for(const r of Object.keys(n.children)){const u=vE(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function(n){if(1===n.numberOfChildren&&n.children[Wt]){const e=n.children[Wt];return new Zt(n.segments.concat(e.segments),e.children)}return n}(new Zt(n.segments,e))}class Ns{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class ng{constructor(e,t){this.component=e,this.route=t}}function Rx(n,e,t){const r=n._root;return af(r,e?e._root:null,t,[r.value])}function rg(n,e,t){const r=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function af(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=Bl(e);return n.children.forEach(c=>{(function(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const y=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Du(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Du(n.url,e.url)||!ts(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!fd(n,e)||!ts(n.queryParams,e.queryParams);case"paramsChange":default:return!fd(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);y?o.canActivateChecks.push(new Ns(r)):(u.data=c.data,u._resolvedData=c._resolvedData),af(n,e,u.component?p?p.children:null:t,r,o),y&&p&&p.outlet&&p.outlet.isActivated&&o.canDeactivateChecks.push(new ng(p.outlet.component,c))}else c&&ig(e,p,o),o.canActivateChecks.push(new Ns(r)),af(n,null,u.component?p?p.children:null:t,r,o)})(c,u[c.value.outlet],t,r.concat([c.value]),o),delete u[c.value.outlet]}),Vn(u,(c,p)=>ig(c,t.getContext(p),o)),o}function ig(n,e,t){const r=Bl(n),o=n.value;Vn(r,(u,c)=>{ig(u,o.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new ng(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class wE{}function xC(n){return new vr.y(e=>e.error(n))}class sg{constructor(e,t,r,o,u,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=c}recognize(){const e=p_(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Wt);if(null===t)return null;const r=new Va([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Wt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new jo(r,t),u=new hd(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=dE(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const c=t.children[u],p=_E(e,u),y=this.processSegmentGroup(p,c,u);if(null===y)return null;r.push(...y)}const o=__(r);return o.sort((e,t)=>e.value.outlet===Wt?-1:t.value.outlet===Wt?1:e.value.outlet.localeCompare(t.value.outlet)),o}processSegment(e,t,r,o){for(const u of e){const c=this.processSegmentAgainstRoute(u,t,r,o);if(null!==c)return c}return Tx(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!DC(e,t,r,o))return null;let u,c=[],p=[];if("**"===e.path){const j=r.length>0?Rs(r).parameters:{};u=new Va(r,j,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,y_(e),so(e),e.component,e,Ox(t),gd(t)+r.length,CE(e))}else{const j=Xp(t,e,r);if(!j.matched)return null;c=j.consumedSegments,p=r.slice(j.lastChild),u=new Va(c,j.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,y_(e),so(e),e.component,e,Ox(t),gd(t)+c.length,CE(e))}const y=(n=e).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:b,slicedSegments:D}=p_(t,c,p,y.filter(j=>void 0===j.redirectTo),this.relativeLinkResolution);var n;if(0===D.length&&b.hasChildren()){const j=this.processChildren(y,b);return null===j?null:[new jo(u,j)]}if(0===y.length&&0===D.length)return[new jo(u,[])];const S=so(e)===o,P=this.processSegment(y,b,D,S?Wt:o);return null===P?null:[new jo(u,P)]}}function bE(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function __(n){const e=[],t=new Set;for(const r of n){if(!bE(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=__(r.children);e.push(new jo(r.value,o))}return e.filter(r=>!t.has(r))}function Ox(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function gd(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function y_(n){return n.data||{}}function CE(n){return n.resolve||{}}function TE(n){return lr(e=>{const t=n(e);return t?(0,Ut.D)(t).pipe((0,At.U)(()=>e)):(0,ut.of)(e)})}class kC extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const og=new f.OlP("ROUTES");class DE{constructor(e,t,r,o){this.loader=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,At.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=u.create(e);return new ef(Tu(c.injector.get(og,void 0,f.XFs.Self|f.XFs.Optional)).map(f_),c)}),wn(u=>{throw t._loader$=void 0,u}));return t._loader$=new Lh.c(o,()=>new cs.xQ).pipe((0,Hh.x)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?(0,Ut.D)(this.loader.load(e)):no(e()).pipe((0,xr.zg)(t=>t instanceof f.YKP?(0,ut.of)(t):(0,Ut.D)(this.compiler.compileModuleAsync(t))))}}class AE{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new lf,this.attachRef=null}}class lf{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new AE,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class PC{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function OC(n){throw n}function md(n,e,t){return e.parse("/")}function SE(n,e){return(0,ut.of)(null)}const FC={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Hx={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Mr=(()=>{class n{constructor(t,r,o,u,c,p,y,b){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=b,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new cs.xQ,this.errorHandler=OC,this.malformedUriErrorHandler=md,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:SE,afterPreactivation:SE},this.urlHandlingStrategy=new PC,this.routeReuseStrategy=new kC,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(f.h0i),this.console=c.get(f.c2e);const P=c.get(f.R0b);this.isNgZoneEnabled=P instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(b),this.currentUrlTree=new ro(new Zt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new DE(p,y,j=>this.triggerEvent(new Qn(j)),j=>this.triggerEvent(new Fa(j))),this.routerState=u_(this.currentUrlTree,this.rootComponentType),this.transitions=new _i({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Oi(o=>0!==o.id),(0,At.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),lr(o=>{let u=!1,c=!1;return(0,ut.of)(o).pipe((0,fr.b)(p=>{this.currentNavigation={id:p.id,initialUrl:p.currentRawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),lr(p=>{const y=this.browserUrlTree.toString(),b=!this.navigated||p.extractedUrl.toString()!==y||y!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return ag(p.source)&&(this.browserUrlTree=p.extractedUrl),(0,ut.of)(p).pipe(lr(S=>{const P=this.transitions.getValue();return r.next(new re(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),P!==this.transitions.getValue()?$r.E:Promise.resolve(S)}),function(n,e,t,r){return lr(o=>function(n,e,t,r,o){return new Sx(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,At.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,fr.b)(S=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:S.urlAfterRedirects})}),function(n,e,t,r,o){return(0,xr.zg)(u=>function(n,e,t,r,o="emptyOnly",u="legacy"){try{const c=new sg(n,e,t,r,o,u).recognize();return null===c?xC(new wE):(0,ut.of)(c)}catch(c){return xC(c)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,At.U)(c=>Object.assign(Object.assign({},u),{targetSnapshot:c}))))}(this.rootComponentType,this.config,S=>this.serializeUrl(S),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,fr.b)(S=>{"eager"===this.urlUpdateStrategy&&(S.extras.skipLocationChange||this.setBrowserUrl(S.urlAfterRedirects,S),this.browserUrlTree=S.urlAfterRedirects);const P=new gt(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(P)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:P,extractedUrl:j,source:Q,restoredState:ye,extras:xe}=p,ct=new re(P,this.serializeUrl(j),Q,ye);r.next(ct);const lt=u_(j,this.rootComponentType).snapshot;return(0,ut.of)(Object.assign(Object.assign({},p),{targetSnapshot:lt,urlAfterRedirects:j,extras:Object.assign(Object.assign({},xe),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=p.rawUrl,this.browserUrlTree=p.urlAfterRedirects,p.resolve(null),$r.E}),TE(p=>{const{targetSnapshot:y,id:b,extractedUrl:D,rawUrl:S,extras:{skipLocationChange:P,replaceUrl:j}}=p;return this.hooks.beforePreactivation(y,{navigationId:b,appliedUrlTree:D,rawUrlTree:S,skipLocationChange:!!P,replaceUrl:!!j})}),(0,fr.b)(p=>{const y=new ft(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}),(0,At.U)(p=>Object.assign(Object.assign({},p),{guards:Rx(p.targetSnapshot,p.currentSnapshot,this.rootContexts)})),function(n,e){return(0,xr.zg)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?(0,ut.of)(Object.assign(Object.assign({},t),{guardsResult:!0})):function(n,e,t,r){return(0,Ut.D)(n).pipe((0,xr.zg)(o=>function(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!u||0===u.length)return(0,ut.of)(!0);const c=u.map(p=>{const y=rg(p,e,o);let b;if(function(n){return n&&io(n.canDeactivate)}(y))b=no(y.canDeactivate(n,e,t,r));else{if(!io(y))throw new Error("Invalid CanDeactivate guard");b=no(y(n,e,t,r))}return b.pipe(Li())});return(0,ut.of)(c).pipe(Nr())}(o.component,o.route,t,e,r)),Li(o=>!0!==o,!0))}(c,r,o,n).pipe((0,xr.zg)(p=>p&&function(n){return"boolean"==typeof n}(p)?function(n,e,t,r){return(0,Ut.D)(e).pipe(Pl(o=>eo(function(n,e){return null!==n&&e&&e(new Iu(n)),(0,ut.of)(!0)}(o.route.parent,r),function(n,e){return null!==n&&e&&e(new Xi(n)),(0,ut.of)(!0)}(o.route,r),function(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>Fo(()=>{const p=c.guards.map(y=>{const b=rg(y,c.node,t);let D;if(function(n){return n&&io(n.canActivateChild)}(b))D=no(b.canActivateChild(r,n));else{if(!io(b))throw new Error("Invalid CanActivateChild guard");D=no(b(r,n))}return D.pipe(Li())});return(0,ut.of)(p).pipe(Nr())}));return(0,ut.of)(u).pipe(Nr())}(n,o.path,t),function(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,ut.of)(!0);const o=r.map(u=>Fo(()=>{const c=rg(u,e,t);let p;if(function(n){return n&&io(n.canActivate)}(c))p=no(c.canActivate(e,n));else{if(!io(c))throw new Error("Invalid CanActivate guard");p=no(c(e,n))}return p.pipe(Li())}));return(0,ut.of)(o).pipe(Nr())}(n,o.route,t))),Li(o=>!0!==o,!0))}(r,u,n,e):(0,ut.of)(p)),(0,At.U)(p=>Object.assign(Object.assign({},t),{guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),(0,fr.b)(p=>{if(Ru(p.guardsResult)){const b=es(`Redirecting to "${this.serializeUrl(p.guardsResult)}"`);throw b.url=p.guardsResult,b}const y=new Qt(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(y)}),Oi(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,""),!1)),TE(p=>{if(p.guards.canActivateChecks.length)return(0,ut.of)(p).pipe((0,fr.b)(y=>{const b=new bt(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(b)}),lr(y=>{let b=!1;return(0,ut.of)(y).pipe(function(n,e){return(0,xr.zg)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return(0,ut.of)(t);let u=0;return(0,Ut.D)(o).pipe(Pl(c=>function(n,e,t,r){return function(n,e,t,r){const o=Object.keys(n);if(0===o.length)return(0,ut.of)({});const u={};return(0,Ut.D)(o).pipe((0,xr.zg)(c=>function(n,e,t,r){const o=rg(n,e,r);return no(o.resolve?o.resolve(e,t):o(e,t))}(n[c],e,t,r).pipe((0,fr.b)(p=>{u[c]=p}))),yi(1),(0,xr.zg)(()=>Object.keys(u).length===o.length?(0,ut.of)(u):$r.E))}(n._resolve,n,e,r).pipe((0,At.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),dE(n,t).resolve),null)))}(c.route,r,n,e)),(0,fr.b)(()=>u++),yi(1),(0,xr.zg)(c=>u===o.length?(0,ut.of)(t):$r.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,fr.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(y),this.cancelNavigationTransition(y,"At least one route resolver didn't emit any value."))}}))}),(0,fr.b)(y=>{const b=new Vi(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(b)}))}),TE(p=>{const{targetSnapshot:y,id:b,extractedUrl:D,rawUrl:S,extras:{skipLocationChange:P,replaceUrl:j}}=p;return this.hooks.afterPreactivation(y,{navigationId:b,appliedUrlTree:D,rawUrlTree:S,skipLocationChange:!!P,replaceUrl:!!j})}),(0,At.U)(p=>{const y=function(n,e,t){const r=pd(n,e._root,t?t._root:void 0);return new a_(r,e)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return Object.assign(Object.assign({},p),{targetRouterState:y})}),(0,fr.b)(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((n,e,t)=>(0,At.U)(r=>(new Jh(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),(0,fr.b)({next(){u=!0},complete(){u=!0}}),function(n){return e=>e.lift(new A(n))}(()=>{var p;if(!u&&!c){const y=`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(o),this.cancelNavigationTransition(o,y)):this.cancelNavigationTransition(o,y)}(null===(p=this.currentNavigation)||void 0===p?void 0:p.id)===o.id&&(this.currentNavigation=null)}),wn(p=>{if(c=!0,function(n){return n&&n[iE]}(p)){const y=Ru(p.url);y||(this.navigated=!0,this.restoreHistory(o,!0));const b=new ke(o.id,this.serializeUrl(o.extractedUrl),p.message);r.next(b),y?setTimeout(()=>{const D=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),S={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ag(o.source)};this.scheduleNavigation(D,"imperative",null,S,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const y=new Je(o.id,this.serializeUrl(o.extractedUrl),p);r.next(y);try{o.resolve(this.errorHandler(p))}catch(b){o.reject(b)}}return $r.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,r)&&setTimeout(()=>{const{source:o,state:u,urlTree:c}=r,p={replaceUrl:!0};if(u){const y=Object.assign({},u);delete y.navigationId,delete y.\u0275routerPageId,0!==Object.keys(y).length&&(p.state=y)}this.scheduleNavigation(c,o,u,p)},0),this.lastLocationChangeInfo=r}))}extractLocationChangeInfoFromEvent(t){var r;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(r=t.state)||void 0===r?void 0:r.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,r){if(!t)return!0;const o=r.urlTree.toString()===t.urlTree.toString();return r.transitionId!==t.transitionId||!o||!("hashchange"===r.source&&"popstate"===t.source||"popstate"===r.source&&"hashchange"===t.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){h_(t),this.config=t.map(f_),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:c,queryParamsHandling:p,preserveFragment:y}=r,b=o||this.routerState.root,D=y?this.currentUrlTree.fragment:c;let S=null;switch(p){case"merge":S=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=u||null}return null!==S&&(S=this.removeEmptyProps(S)),function(n,e,t,r,o){if(0===t.length)return gE(e.root,e.root,e,r,o);const u=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new g(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const p={};return Vn(u.outlets,(y,b)=>{p[b]="string"==typeof y?y.split("/"):y}),[...o,{outlets:p}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===c?(u.split("/").forEach((p,y)=>{0==y&&"."===p||(0==y&&""===p?t=!0:".."===p?e++:""!=p&&o.push(p))}),o):[...o,u]},[]);return new g(t,e,r)}(t);if(u.toRoot())return gE(e.root,new Zt([],{}),e,r,o);const c=function(n,e,t){if(n.isAbsolute)return new C(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new C(u,u===e.root,0)}const r=$l(n.commands[0])?0:1;return function(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new C(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),p=c.processChildren?je(c.segmentGroup,c.index,u.commands):_e(c.segmentGroup,c.index,u.commands);return gE(c.segmentGroup,p,e,r,o)}(b,this.currentUrlTree,t,S,null!=D?D:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Ru(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},FC):!1===r?Object.assign({},Hx):r,Ru(t))return qp(this.currentUrlTree,t,o);const u=this.parseUrl(t);return qp(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new ue(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,c){var p,y;if(this.disposed)return Promise.resolve(!1);const b=this.getTransition(),D=ag(r)&&b&&!ag(b.source),j=(this.lastSuccessfulId===b.id||this.currentNavigation?b.rawUrl:b.urlAfterRedirects).toString()===t.toString();if(D&&j)return Promise.resolve(!0);let Q,ye,xe;c?(Q=c.resolve,ye=c.reject,xe=c.promise):xe=new Promise((nt,st)=>{Q=nt,ye=st});const ct=++this.navigationId;let lt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),lt=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(p=this.browserPageId)&&void 0!==p?p:0:(null!==(y=this.browserPageId)&&void 0!==y?y:0)+1):lt=0,this.setTransition({id:ct,targetPageId:lt,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:Q,reject:ye,promise:xe,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),xe.catch(nt=>Promise.reject(nt))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===c?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new ke(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.DyG),f.LFG(Au),f.LFG(lf),f.LFG(dt),f.LFG(f.zs3),f.LFG(f.v3s),f.LFG(f.Sil),f.LFG(void 0))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function ag(n){return"imperative"!==n}let Gl=(()=>{class n{constructor(t,r,o,u,c){this.router=t,this.route=r,this.commands=[],this.onChanges=new cs.xQ,null==o&&u.setAttribute(c.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:ql(this.skipLocationChange),replaceUrl:ql(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ql(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Mr),f.Y36(jl),f.$8M("tabindex"),f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&f.NdJ("click",function(){return r.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[f.TTD]}),n})(),$a=(()=>{class n{constructor(t,r,o){this.router=t,this.route=r,this.locationStrategy=o,this.commands=[],this.onChanges=new cs.xQ,this.subscription=t.events.subscribe(u=>{u instanceof ue&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,o,u,c){if(0!==t||r||o||u||c||"string"==typeof this.target&&"_self"!=this.target)return!0;const p={skipLocationChange:ql(this.skipLocationChange),replaceUrl:ql(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,p),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ql(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Mr),f.Y36(jl),f.Y36(Be))},n.\u0275dir=f.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&f.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&(f.Ikx("href",r.href,f.LSH),f.uIk("target",r.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[f.TTD]}),n})();function ql(n){return""===n||!!n}let _d=(()=>{class n{constructor(t,r,o,u,c,p){this.router=t,this.element=r,this.renderer=o,this.cdr=u,this.link=c,this.linkWithHref=p,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=t.events.subscribe(y=>{y instanceof ue&&this.update()})}ngAfterContentInit(){(0,ut.of)(this.links.changes,this.linksWithHrefs.changes,(0,ut.of)(null)).pipe((0,Pi.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const r=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(o=>!!o).map(o=>o.onChanges);this.linkInputChangesSubscription=(0,Ut.D)(r).pipe((0,Pi.J)()).subscribe(o=>{this.isActive!==this.isLinkActive(this.router)(o)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(o=>!!o)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}))})}isLinkActive(t){const r=function(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return o=>t.isActive(o.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Mr),f.Y36(f.SBq),f.Y36(f.Qsj),f.Y36(f.sBO),f.Y36(Gl,8),f.Y36($a,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,o){if(1&t&&(f.Suo(o,Gl,5),f.Suo(o,$a,5)),2&t){let u;f.iGM(u=f.CRH())&&(r.links=u),f.iGM(u=f.CRH())&&(r.linksWithHrefs=u)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[f.TTD]}),n})(),cf=(()=>{class n{constructor(t,r,o,u,c){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.name=u||Wt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),p=this.parentContexts.getOrCreateContext(this.name).children,y=new LC(t,p,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,y),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(lf),f.Y36(f.s_b),f.Y36(f._Vd),f.$8M("name"),f.Y36(f.sBO))},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),n})();class LC{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===jl?this.route:e===lf?this.childContexts:this.parent.get(e,t)}}class E_{}class w_{preload(e,t){return(0,ut.of)(null)}}let df=(()=>{class n{constructor(t,r,o,u,c){this.router=t,this.injector=u,this.preloadingStrategy=c,this.loader=new DE(r,o,b=>t.triggerEvent(new Qn(b)),b=>t.triggerEvent(new Fa(b)))}setUpPreloading(){this.subscription=this.router.events.pipe(Oi(t=>t instanceof ue),Pl(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(f.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const c=u._loadedConfig;o.push(this.processRoutes(c.module,c.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children));return(0,Ut.D)(o).pipe((0,Pi.J)(),(0,At.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?(0,ut.of)(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,xr.zg)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Mr),f.LFG(f.v3s),f.LFG(f.Sil),f.LFG(f.zs3),f.LFG(E_))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),xE=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof re?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ue&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof fs&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new fs(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Mr),f.LFG(Co),f.LFG(void 0))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const yd=new f.OlP("ROUTER_CONFIGURATION"),UC=new f.OlP("ROUTER_FORROOT_GUARD"),RE=[dt,{provide:Au,useClass:ud},{provide:Mr,useFactory:function(n,e,t,r,o,u,c,p={},y,b){const D=new Mr(null,n,e,t,r,o,u,Tu(c));return y&&(D.urlHandlingStrategy=y),b&&(D.routeReuseStrategy=b),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy)}(p,D),p.enableTracing&&D.events.subscribe(S=>{var P,j;null===(P=console.group)||void 0===P||P.call(console,`Router Event: ${S.constructor.name}`),console.log(S.toString()),console.log(S),null===(j=console.groupEnd)||void 0===j||j.call(console)}),D},deps:[Au,lf,dt,f.zs3,f.v3s,f.Sil,og,yd,[class{},new f.FiY],[class{},new f.FiY]]},lf,{provide:jl,useFactory:function(n){return n.routerState.root},deps:[Mr]},{provide:f.v3s,useClass:f.EAV},df,w_,class{preload(e,t){return t().pipe(wn(()=>(0,ut.of)(null)))}},{provide:yd,useValue:{enableTracing:!1}}];function jC(){return new f.PXZ("Router",Mr)}let $C=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[RE,qC(t),{provide:UC,useFactory:GC,deps:[[Mr,new f.FiY,new f.tp0]]},{provide:yd,useValue:r||{}},{provide:Be,useFactory:Wx,deps:[te,[new f.tBr(De),new f.FiY],yd]},{provide:xE,useFactory:HC,deps:[Mr,Co,yd]},{provide:E_,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:w_},{provide:f.PXZ,multi:!0,useFactory:jC},[b_,{provide:f.ip1,multi:!0,useFactory:Kx,deps:[b_]},{provide:WC,useFactory:Yx,deps:[b_]},{provide:f.tb,multi:!0,useExisting:WC}]]}}static forChild(t){return{ngModule:n,providers:[qC(t)]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(UC,8),f.LFG(Mr,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function HC(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new xE(n,e,t)}function Wx(n,e,t={}){return t.useHash?new Xe(n,e):new Ne(n,e)}function GC(n){return"guarded"}function qC(n){return[{provide:f.deG,multi:!0,useValue:n},{provide:og,multi:!0,useValue:n}]}let b_=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new cs.xQ}appInitializer(){return this.injector.get(U,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(p=>r=p),u=this.injector.get(Mr),c=this.injector.get(yd);return"disabled"===c.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?(0,ut.of)(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(yd),o=this.injector.get(df),u=this.injector.get(xE),c=this.injector.get(Mr),p=this.injector.get(f.z2F);t===p.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),o.setUpPreloading(),u.init(),c.resetRootComponentType(p.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.zs3))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Kx(n){return n.appInitializer.bind(n)}function Yx(n){return n.bootstrapListener.bind(n)}const WC=new f.OlP("Router Initializer");let Xx=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-not-found"]],decls:15,vars:0,consts:[[1,"page_404"],[1,"container"],[1,"row"],[1,"col-sm-12"],[1,"col-sm-10","col-sm-offset-1","text-center"],[1,"four_zero_four_bg"],[1,"text-center"],[1,"contant_box_404"],[1,"h2"],["routerLink","",1,"link_404"]],template:function(t,r){1&t&&(f.TgZ(0,"section",0),f.TgZ(1,"div",1),f.TgZ(2,"div",2),f.TgZ(3,"div",3),f.TgZ(4,"div",4),f.TgZ(5,"div",5),f.TgZ(6,"h1",6),f._uU(7,"404"),f.qZA(),f.qZA(),f.TgZ(8,"div",7),f.TgZ(9,"h3",8),f._uU(10," Look like you're lost "),f.qZA(),f.TgZ(11,"p"),f._uU(12,"the page you are looking for not avaible!"),f.qZA(),f.TgZ(13,"a",9),f._uU(14,"Go to Home"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA())},directives:[$a],styles:['.page_404[_ngcontent-%COMP%]{padding:40px 0;background:#fff;font-family:"Arvo",serif}.page_404[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.four_zero_four_bg[_ngcontent-%COMP%]{background-image:url(https://cdn.dribbble.com/users/285475/screenshots/2083086/dribbble_1.gif);height:400px;background-position:center}.four_zero_four_bg[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:80px}.four_zero_four_bg[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:80px}.link_404[_ngcontent-%COMP%]{color:#fff!important;padding:10px 20px;background:#39ac31;margin:20px 0;display:inline-block}.contant_box_404[_ngcontent-%COMP%]{margin-top:-50px}']}),n})();var eR=V(1555);function Rt(n,e){return new vr.y(t=>{const r=n.length;if(0===r)return void t.complete();const o=new Array(r);let u=0,c=0;for(let p=0;p<r;p++){const y=(0,Ut.D)(n[p]);let b=!1;t.add(y.subscribe({next:D=>{b||(b=!0,c++),o[p]=D},error:D=>t.error(D),complete:()=>{u++,(u===r||!b)&&(c===r&&t.next(e?e.reduce((D,S,P)=>(D[S]=o[P],D),{}):o),t.complete())}}))}})}let NE=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),Wl=(()=>{class n extends NE{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const Ms=new f.OlP("NgValueAccessor"),nR={provide:Ms,useExisting:(0,f.Gpc)(()=>hf),multi:!0},Mu=new f.OlP("CompositionEventMode");let hf=(()=>{class n extends NE{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(Mu,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[f._Bn([nR]),f.qOj]}),n})();function ku(n){return null==n||0===n.length}function C_(n){return null!=n&&"number"==typeof n.length}const ns=new f.OlP("NgValidators"),Pu=new f.OlP("NgAsyncValidators"),g1=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class gs{static min(e){return function(n){return e=>{if(ku(e.value)||ku(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function(n){return e=>{if(ku(e.value)||ku(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return I_(e)}static requiredTrue(e){return function(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function(n){return ku(n.value)||g1.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function(n){return e=>ku(e.value)||!C_(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function(n){return e=>C_(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function(n){if(!n)return vd;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(ku(r.value))return null;const o=r.value;return e.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}(e)}static nullValidator(e){return null}static compose(e){return oR(e)}static composeAsync(e){return aR(e)}}function I_(n){return ku(n.value)?{required:!0}:null}function vd(n){return null}function OE(n){return null!=n}function FE(n){const e=(0,f.QGY)(n)?(0,Ut.D)(n):n;return(0,f.CqO)(e),e}function KC(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function T_(n,e){return e.map(t=>t(n))}function sR(n){return n.map(e=>function(n){return!n.validate}(e)?e:t=>e.validate(t))}function oR(n){if(!n)return null;const e=n.filter(OE);return 0==e.length?null:function(t){return KC(T_(t,e))}}function YC(n){return null!=n?oR(sR(n)):null}function aR(n){if(!n)return null;const e=n.filter(OE);return 0==e.length?null:function(t){return function(...n){if(1===n.length){const e=n[0];if((0,Ds.k)(e))return Rt(e,null);if((0,eR.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Rt(t.map(r=>e[r]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return Rt(n=1===n.length&&(0,Ds.k)(n[0])?n[0]:n,null).pipe((0,At.U)(t=>e(...t)))}return Rt(n,null)}(T_(t,e).map(FE)).pipe((0,At.U)(KC))}}function QC(n){return null!=n?aR(sR(n)):null}function uR(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function lR(n){return n._rawValidators}function cR(n){return n._rawAsyncValidators}function JC(n){return n?Array.isArray(n)?n:[n]:[]}function LE(n,e){return Array.isArray(n)?n.includes(e):n===e}function Ou(n,e){const t=JC(e);return JC(n).forEach(o=>{LE(t,o)||t.push(o)}),t}function D_(n,e){return JC(e).filter(t=>!LE(n,t))}let XC=(()=>{class n{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=YC(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=QC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,r){return!!this.control&&this.control.hasError(t,r)}getError(t,r){return this.control?this.control.getError(t,r):null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n}),n})(),Ui=(()=>{class n extends XC{get formDirective(){return null}get path(){return null}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();class Ha extends XC{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class VE{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let Fu=(()=>{class n extends VE{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Ha,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[f.qOj]}),n})(),UE=(()=>{class n extends VE{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Ui,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[f.qOj]}),n})();function fg(n,e){mg(n,e),e.valueAccessor.writeValue(n.value),function(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&qE(n,e)})}(n,e),function(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&qE(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function pg(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),_g(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function gg(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function mg(n,e){const t=lR(n);null!==e.validator?n.setValidators(uR(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=cR(n);null!==e.asyncValidator?n.setAsyncValidators(uR(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();gg(e._rawValidators,o),gg(e._rawAsyncValidators,o)}function _g(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=lR(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(c=>c!==e.validator);u.length!==o.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const o=cR(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(c=>c!==e.asyncValidator);u.length!==o.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return gg(e._rawValidators,r),gg(e._rawAsyncValidators,r),t}function qE(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function x_(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const R_="VALID",yg="INVALID",vg="PENDING",Eg="DISABLED";function N_(n){return(M_(n)?n.validators:n)||null}function sI(n){return Array.isArray(n)?YC(n):n||null}function YE(n,e){return(M_(e)?e.asyncValidators:n)||null}function oI(n){return Array.isArray(n)?QC(n):n||null}function M_(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class QE{constructor(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=sI(this._rawValidators),this._composedAsyncValidatorFn=oI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===R_}get invalid(){return this.status===yg}get pending(){return this.status==vg}get disabled(){return this.status===Eg}get enabled(){return this.status!==Eg}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=sI(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=oI(e)}addValidators(e){this.setValidators(Ou(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Ou(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(D_(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(D_(e,this._rawAsyncValidators))}hasValidator(e){return LE(this._rawValidators,e)}hasAsyncValidator(e){return LE(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=vg,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Eg,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=R_,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===R_||this.status===vg)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Eg:R_}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=vg,this._hasOwnPendingAsyncValidator=!0;const t=FE(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=r instanceof wg?r.controls.hasOwnProperty(o)?r.controls[o]:null:r instanceof JE&&r.at(o)||null}),r}(this,e)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?Eg:this.errors?yg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(vg)?vg:this._anyControlsHaveStatus(yg)?yg:R_}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){M_(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Ed extends QE{constructor(e=null,t,r){super(N_(t),YE(r,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){x_(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){x_(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class wg extends QE{constructor(e,t,r){super(N_(t),YE(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t instanceof Ed?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class JE extends QE{constructor(e,t,r){super(N_(t),YE(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((r,o)=>{this._throwIfControlMissing(o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof Ed?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let tw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const rw=new f.OlP("NgModelWithFormControlWarning"),mI={provide:Ui,useExisting:(0,f.Gpc)(()=>Cg)};let Cg=(()=>{class n extends Ui{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new f.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(_g(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return fg(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){pg(t.control||null,t,!1),x_(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(pg(r||null,t),o instanceof Ed&&(fg(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function(n,e){mg(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function(n,e){return _g(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){mg(this.form,this),this._oldForm&&_g(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ns,10),f.Y36(Pu,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&f.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([mI]),f.qOj,f.TTD]}),n})();const I1={provide:Ha,useExisting:(0,f.Gpc)(()=>Zl)};let Zl=(()=>{class n extends Ha{constructor(t,r,o,u,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new f.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===hf?t=u:function(n){return Object.getPrototypeOf(n.constructor)===Wl}(u)?r=u:o=u}),o||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Ui,13),f.Y36(ns,10),f.Y36(Pu,10),f.Y36(Ms,10),f.Y36(rw,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[f._Bn([I1]),f.qOj,f.TTD]}),n._ngModelWarningSentOnce=!1,n})();const gf={provide:ns,useExisting:(0,f.Gpc)(()=>F_),multi:!0};let F_=(()=>{class n{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&"false"!=`${t}`,this._onChange&&this._onChange()}validate(t){return this.required?I_(t):null}registerOnValidatorChange(t){this._onChange=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&f.uIk("required",r.required?"":null)},inputs:{required:"required"},features:[f._Bn([gf])]}),n})(),SI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[tw]]}),n})(),TR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[SI]}),n})(),dw=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:rw,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[SI]}),n})(),RI=(()=>{class n{group(t,r=null){const o=this._reduceControls(t);let p,u=null,c=null;return null!=r&&(function(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(u=null!=r.validators?r.validators:null,c=null!=r.asyncValidators?r.asyncValidators:null,p=null!=r.updateOn?r.updateOn:void 0):(u=null!=r.validator?r.validator:null,c=null!=r.asyncValidator?r.asyncValidator:null)),new wg(o,{asyncValidators:c,updateOn:p,validators:u})}control(t,r,o){return new Ed(t,r,o)}array(t,r,o){const u=t.map(c=>this._createControl(c));return new JE(u,r,o)}_reduceControls(t){const r={};return Object.keys(t).forEach(o=>{r[o]=this._createControl(t[o])}),r}_createControl(t){return t instanceof Ed||t instanceof wg||t instanceof JE?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,f.Yz7)({factory:function(){return new n},token:n,providedIn:dw}),n})(),AR=(()=>{class n{constructor(t){this.fb=t,this.submitLoader=!1,this.title="Contact form",this.ngUnsubscribe=new cs.xQ,this.contactForm=this.fb.group({firstName:["",[gs.required]],lastName:["",[gs.required]],email:["",[gs.required]],description:["",[gs.required,gs.minLength(10),gs.maxLength(50)]]})}ngOnInit(){}submit(t){alert(` ${t.firstName} ${t.lastName} ${t.email} ${t.description},  Now this form is demo form I'll integrated with database,  Thank you`)}isFieldInvalid(t){var r,o;return null===(o=null===(r=this.contactForm)||void 0===r?void 0:r.get(t))||void 0===o?void 0:o.invalid}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(RI))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-contact-us"]],decls:44,vars:2,consts:[[1,"header"],["routerLink","",1,"logo"],[1,"header-right"],["routerLink","/home","routerLinkActive","active"],["routerLink","/contact","routerLinkActive","active"],["routerLink","/about","routerLinkActive","active"],["routerLink","/register-user","routerLinkActive","active"],["routerLink","/sign-in","routerLinkActive","active"],[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock",3,"formGroup"],[1,"formGroup"],["for","fname"],["type","text","formControlName","firstName","placeholder","First Name","required","",1,"formControl"],["firstName",""],["for","lname"],["type","text","formControlName","lastName","placeholder","Last Name","required","",1,"formControl"],["lastName",""],["for","email"],["type","email","formControlName","email","placeholder","abc@gmail.com","required","",1,"formControl"],["email",""],["for","subject"],["id","subject","name","subject","formControlName","description","placeholder","Write something..","required","",2,"height","200px"],["type","submit","value","Submit",3,"disabled","click"],[1,"footer"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"a",1),f._uU(2,"Logo"),f.qZA(),f.TgZ(3,"div",2),f.TgZ(4,"a",3),f._uU(5,"Home"),f.qZA(),f.TgZ(6,"a",4),f._uU(7,"Contact"),f.qZA(),f.TgZ(8,"a",5),f._uU(9,"About"),f.qZA(),f.TgZ(10,"a",6),f._uU(11,"Sign Up"),f.qZA(),f.TgZ(12,"a",7),f._uU(13,"Sign In"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(14,"div",8),f.TgZ(15,"div",9),f.TgZ(16,"div",10),f.TgZ(17,"h3"),f._uU(18,"Contact Us"),f.qZA(),f._UZ(19,"hr"),f.TgZ(20,"div",11),f.TgZ(21,"label",12),f._uU(22,"First Name"),f.qZA(),f._UZ(23,"input",13,14),f.qZA(),f.TgZ(25,"div",11),f.TgZ(26,"label",15),f._uU(27,"Last Name"),f.qZA(),f._UZ(28,"input",16,17),f.qZA(),f.TgZ(30,"div",11),f.TgZ(31,"label",18),f._uU(32,"Email"),f.qZA(),f._UZ(33,"input",19,20),f.qZA(),f.TgZ(35,"div",11),f.TgZ(36,"label",21),f._uU(37,"Subject"),f.qZA(),f._UZ(38,"textarea",22),f.qZA(),f.TgZ(39,"div",11),f.TgZ(40,"input",23),f.NdJ("click",function(){return r.submit(r.contactForm.value)}),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(41,"div",24),f.TgZ(42,"p"),f._uU(43," \xa9 copyright 2022 designed by Bhuwan Paneru "),f.qZA(),f.qZA()),2&t&&(f.xp6(16),f.Q6J("formGroup",r.contactForm),f.xp6(24),f.Q6J("disabled",r.contactForm.invalid))},directives:[$a,_d,UE,Cg,hf,Fu,Zl,F_],styles:["input[type=text][_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box;margin-top:6px;margin-bottom:16px;resize:vertical}input[type=submit][_ngcontent-%COMP%]{background-color:#04aa6d;color:#fff;padding:12px 20px;border:none;border-radius:4px;cursor:pointer}input[type=submit][_ngcontent-%COMP%]:hover{background-color:#45a049}"]}),n})(),SR=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-about"]],decls:25,vars:0,consts:[[1,"header"],["routerLink","",1,"logo"],[1,"header-right"],["routerLink","/home","routerLinkActive","active"],["routerLink","/contact","routerLinkActive","active"],["routerLink","/about","routerLinkActive","active"],["routerLink","/register-user","routerLinkActive","active"],["routerLink","/sign-in","routerLinkActive","active"],[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"footer"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"a",1),f._uU(2,"Logo"),f.qZA(),f.TgZ(3,"div",2),f.TgZ(4,"a",3),f._uU(5,"Home"),f.qZA(),f.TgZ(6,"a",4),f._uU(7,"Contact"),f.qZA(),f.TgZ(8,"a",5),f._uU(9,"About"),f.qZA(),f.TgZ(10,"a",6),f._uU(11,"Sign Up"),f.qZA(),f.TgZ(12,"a",7),f._uU(13,"Sign In"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(14,"div",8),f.TgZ(15,"div",9),f.TgZ(16,"div",10),f.TgZ(17,"h3"),f._uU(18,"About Us"),f.qZA(),f._UZ(19,"hr"),f.TgZ(20,"p"),f._uU(21," What is Lorem Ipsum?\nLorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum. Why do we use it?\nIt is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like). Where does it come from?\nContrary to popular belief, Lorem Ipsum is not simply random text. It has roots in a piece of classical Latin literature from 45 BC, making it over 2000 years old. Richard McClintock, a Latin professor at Hampden-Sydney College in Virginia, looked up one of the more obscure Latin words, consectetur, from a Lorem Ipsum passage, and going through the cites of the word in classical literature, discovered the undoubtable source. Lorem Ipsum comes from sections 1.10.32 and 1.10.33 of \"de Finibus Bonorum et Malorum\" (The Extremes of Good and Evil) by Cicero, written in 45 BC. This book is a treatise on the theory of ethics, very popular during the Renaissance. The first line of Lorem Ipsum, \"Lorem ipsum dolor sit amet..\", comes from a line in section 1.10.32. The standard chunk of Lorem Ipsum used since the 1500s is reproduced below for those interested. Sections 1.10.32 and 1.10.33 from \"de Finibus Bonorum et Malorum\" by Cicero are also reproduced in their exact original form, accompanied by English versions from the 1914 translation by H. Rackham. Where can I get some?\nThere are many variations of passages of Lorem Ipsum available, but the majority have suffered alteration in some form, by injected humour, or randomised words which don't look even slightly believable. If you are going to use a passage of Lorem Ipsum, you need to be sure there isn't anything embarrassing hidden in the middle of text. All the Lorem Ipsum generators on the Internet tend to repeat predefined chunks as necessary, making this the first true generator on the Internet. It uses a dictionary of over 200 Latin words, combined with a handful of model sentence structures, to generate Lorem Ipsum which looks reasonable. The generated Lorem Ipsum is therefore always free from repetition, injected humour, or non-characteristic words etc. "),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(22,"div",11),f.TgZ(23,"p"),f._uU(24," \xa9 copyright 2022 designed by Bhuwan Paneru "),f.qZA(),f.qZA())},directives:[$a,_d],styles:[""]}),n})(),Dg=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-landing"]],decls:25,vars:0,consts:[[1,"header"],["routerLink","",1,"logo"],[1,"header-right"],["routerLink","","routerLinkActive","active"],["routerLink","/contact","routerLinkActive","active"],["routerLink","/about","routerLinkActive","active"],["routerLink","/register-user","routerLinkActive","active"],["routerLink","/sign-in","routerLinkActive","active"],[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"footer"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"a",1),f._uU(2,"Logo"),f.qZA(),f.TgZ(3,"div",2),f.TgZ(4,"a",3),f._uU(5,"Home"),f.qZA(),f.TgZ(6,"a",4),f._uU(7,"Contact"),f.qZA(),f.TgZ(8,"a",5),f._uU(9,"About"),f.qZA(),f.TgZ(10,"a",6),f._uU(11,"Sign Up"),f.qZA(),f.TgZ(12,"a",7),f._uU(13,"Sign In"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(14,"div",8),f.TgZ(15,"div",9),f.TgZ(16,"div",10),f.TgZ(17,"h3"),f._uU(18,"Home"),f.qZA(),f._UZ(19,"hr"),f.TgZ(20,"p"),f._uU(21,' Contrary to popular belief, Lorem Ipsum is not simply random text. It has roots in a piece of classical Latin literature from 45 BC, making it over 2000 years old. Richard McClintock, a Latin professor at Hampden-Sydney College in Virginia, looked up one of the more obscure Latin words, consectetur, from a Lorem Ipsum passage, and going through the cites of the word in classical literature, discovered the undoubtable source. Lorem Ipsum comes from sections 1.10.32 and 1.10.33 of "de Finibus Bonorum et Malorum" (The Extremes of Good and Evil) by Cicero, written in 45 BC. This book is a treatise on the theory of ethics, very popular during the Renaissance. The first line of Lorem Ipsum, "Lorem ipsum dolor sit amet..", comes from a line in section 1.10.32. The standard chunk of Lorem Ipsum used since the 1500s is reproduced below for those interested. Sections 1.10.32 and 1.10.33 from "de Finibus Bonorum et Malorum" by Cicero are also reproduced in their exact original form, accompanied by English versions from the 1914 translation by H. Rackham '),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(22,"div",11),f.TgZ(23,"p"),f._uU(24," \xa9 copyright 2022 designed by Bhuwan Paneru "),f.qZA(),f.qZA())},directives:[$a,_d],styles:[""]}),n})();var hw=V(7014),F=V(3854),Bi=V(8026),ao=V(5422),uo=V(3910),fw=V(3637),bn=V(2871);function pw(){return n=>n.lift(new xR)}class xR{call(e,t){return t.subscribe(new NI(e))}}class NI extends ii.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}function RR(n,e){return t=>t.lift(new MI(n,e))}class MI{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new NR(e,this.compare,this.keySelector))}}class NR extends ii.L{constructor(e,t,r){super(e),this.keySelector=r,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:o}=this;t=o?o(e):e}catch(o){return this.destination.error(o)}let r=!1;if(this.hasKey)try{const{compare:o}=this;r=o(this.key,t)}catch(o){return this.destination.error(o)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))}}var tt,Hr=V(8939),kI=(V(4828),V(3394)),be=V(8239),MR="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},qa={},PI=PI||{},pt=MR||self;function gw(){}function OI(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function V_(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var U_="closure_uid_"+(1e9*Math.random()>>>0),LI=0;function kR(n,e,t){return n.call.apply(n.bind,arguments)}function A1(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function oi(n,e,t){return(oi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?kR:A1).apply(null,arguments)}function mf(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Ei(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var c=Array(arguments.length-2),p=2;p<arguments.length;p++)c[p-2]=arguments[p];return e.prototype[o].apply(r,c)}}function Wa(){this.s=this.s,this.o=this.o}var OR={};Wa.prototype.s=!1,Wa.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,U_)&&n[U_]||(n[U_]=++LI)}(this);delete OR[n]}},Wa.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const VI=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},UI=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function BI(n){return Array.prototype.concat.apply([],arguments)}function _f(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Vu(n){return/^[\s\xa0]*$/.test(n)}var rs,mw=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function $n(n,e){return-1!=n.indexOf(e)}function wd(n,e){return n<e?-1:n>e?1:0}e:{var jI=pt.navigator;if(jI){var B_=jI.userAgent;if(B_){rs=B_;break e}}rs=""}function lo(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function yf(n){const e={};for(const t in n)e[t]=n[t];return e}var wi="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function zl(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<wi.length;u++)t=wi[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function vf(n){return vf[" "](n),n}vf[" "]=gw;var Uu,n,_w=$n(rs,"Opera"),Wo=$n(rs,"Trident")||$n(rs,"MSIE"),bd=$n(rs,"Edge"),Kl=bd||Wo,Cd=$n(rs,"Gecko")&&!($n(rs.toLowerCase(),"webkit")&&!$n(rs,"Edge"))&&!($n(rs,"Trident")||$n(rs,"MSIE"))&&!$n(rs,"Edge"),Ef=$n(rs.toLowerCase(),"webkit")&&!$n(rs,"Edge");function Id(){var n=pt.document;return n?n.documentMode:void 0}e:{var Yl="",Ql=(n=rs,Cd?/rv:([^\);]+)(\)|;)/.exec(n):bd?/Edge\/([\d\.]+)/.exec(n):Wo?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Ef?/WebKit\/(\S+)/.exec(n):_w?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Ql&&(Yl=Ql?Ql[1]:""),Wo){var j_=Id();if(null!=j_&&j_>parseFloat(Yl)){Uu=String(j_);break e}}Uu=Yl}var $I={};function HI(){return e=$I,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let n=0;const e=mw(String(Uu)).split("."),t=mw("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var o=e[c]||"",u=t[c]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=wd(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||wd(0==o[2].length,0==u[2].length)||wd(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n}();var e}var GI=pt.document&&Wo&&(Id()||parseInt(Uu,10))||void 0,qI=function(){if(!pt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{pt.addEventListener("test",gw,e),pt.removeEventListener("test",gw,e)}catch(t){}return n}();function bi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function wf(n,e){if(bi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Cd){e:{try{vf(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:LR[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&wf.Z.h.call(this)}}bi.prototype.h=function(){this.defaultPrevented=!0},Ei(wf,bi);var LR={2:"touch",3:"pen",4:"mouse"};wf.prototype.h=function(){wf.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var bf="closure_listenable_"+(1e6*Math.random()|0),VR=0;function WI(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++VR,this.ca=this.fa=!1}function Ag(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function H_(n){this.src=n,this.g={},this.h=0}function ZI(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=VI(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(Ag(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function vw(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}H_.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=vw(n,e,r,o);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new WI(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var G_="closure_lm_"+(1e6*Math.random()|0),Ew={};function ww(n,e,t,r,o){if(r&&r.once)return BR(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)ww(n,e[u],t,r,o);return null}return t=QI(t),n&&n[bf]?n.N(e,t,V_(r)?!!r.capture:!!r,o):zI(n,e,t,!1,r,o)}function zI(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var c=V_(o)?!!o.capture:!!o,p=YI(n);if(p||(n[G_]=p=new H_(n)),(t=p.add(e,t,r,c,u)).proxy)return t;if(r=function(){var e=S1;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)qI||(o=c),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(jR(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function BR(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)BR(n,e[u],t,r,o);return null}return t=QI(t),n&&n[bf]?n.O(e,t,V_(r)?!!r.capture:!!r,o):zI(n,e,t,!0,r,o)}function KI(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)KI(n,e[u],t,r,o);else r=V_(r)?!!r.capture:!!r,t=QI(t),n&&n[bf]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=vw(u=n.g[e],t,r,o))&&(Ag(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=YI(n))&&(e=n.g[e.toString()],n=-1,e&&(n=vw(e,t,r,o)),(t=-1<n?e[n]:null)&&q_(t))}function q_(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[bf])ZI(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(jR(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=YI(e))?(ZI(t,n),0==t.h&&(t.src=null,e[G_]=null)):Ag(n)}}}function jR(n){return n in Ew?Ew[n]:Ew[n]="on"+n}function S1(n,e){if(n.ca)n=!0;else{e=new wf(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&q_(n),n=t.call(r,e)}return n}function YI(n){return(n=n[G_])instanceof H_?n:null}var bw="__closure_events_fn_"+(1e9*Math.random()>>>0);function QI(n){return"function"==typeof n?n:(n[bw]||(n[bw]=function(e){return n.handleEvent(e)}),n[bw])}function ai(){Wa.call(this),this.i=new H_(this),this.P=this,this.I=null}function Ci(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new bi(e,n);else if(e instanceof bi)e.target=e.target||n;else{var o=e;zl(e=new bi(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];o=Cf(c,r,!0,e)&&o}if(o=Cf(c=e.g=n,r,!0,e)&&o,o=Cf(c,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=Cf(c=e.g=t[u],r,!1,e)&&o}function Cf(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ca&&c.capture==t){var p=c.listener,y=c.ia||c.src;c.fa&&ZI(n.i,c),o=!1!==p.call(y,r)&&o}}return o&&!r.defaultPrevented}Ei(ai,Wa),ai.prototype[bf]=!0,ai.prototype.removeEventListener=function(n,e,t,r){KI(this,n,e,t,r)},ai.prototype.M=function(){if(ai.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Ag(t[r]);delete n.g[e],n.h--}}this.I=null},ai.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ai.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Sg=pt.JSON.stringify;function $R(){var n=XI;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var JI,HR=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new R1,n=>n.reset());class R1{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function GR(n){pt.setTimeout(()=>{throw n},0)}function W_(n,e){JI||function(){var n=pt.Promise.resolve(void 0);JI=function(){n.then(eT)}}(),Jl||(JI(),Jl=!0),XI.add(n,e)}var Jl=!1,XI=new class{constructor(){this.h=this.g=null}add(e,t){const r=HR.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function eT(){for(var n;n=$R();){try{n.h.call(n.g)}catch(t){GR(t)}var e=HR;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Jl=!1}function Z_(n,e){ai.call(this),this.h=n||1,this.g=e||pt,this.j=oi(this.kb,this),this.l=Date.now()}function z_(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function If(n,e,t){if("function"==typeof n)t&&(n=oi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=oi(n.handleEvent,n)}return 2147483647<Number(e)?-1:pt.setTimeout(n,e||0)}function tT(n){n.g=If(()=>{n.g=null,n.i&&(n.i=!1,tT(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Ei(Z_,ai),(tt=Z_.prototype).da=!1,tt.S=null,tt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ci(this,"tick"),this.da&&(z_(this),this.start()))}},tt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},tt.M=function(){Z_.Z.M.call(this),z_(this),delete this.g};class nT extends Wa{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:tT(this)}M(){super.M(),this.g&&(pt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xg(n){Wa.call(this),this.h=n,this.g={}}Ei(xg,Wa);var rT=[];function iT(n,e,t,r){Array.isArray(t)||(t&&(rT[0]=t.toString()),t=rT);for(var o=0;o<t.length;o++){var u=ww(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function sT(n){lo(n.g,function(e,t){this.g.hasOwnProperty(t)&&q_(e)},n),n.g={}}function K_(){this.g=!0}function Td(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<o.length;c++)o[c]=""}}}return Sg(t)}catch(p){return e}}(n,t)+(r?" "+r:"")})}xg.prototype.M=function(){xg.Z.M.call(this),sT(this)},xg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},K_.prototype.Aa=function(){this.g=!1},K_.prototype.info=function(){};var Tf={},Y_=null;function Q_(){return Y_=Y_||new ai}function ZR(n){bi.call(this,Tf.Ma,n)}function Bu(n){const e=Q_();Ci(e,new ZR(e,n))}function uT(n,e){bi.call(this,Tf.STAT_EVENT,n),this.stat=e}function Ii(n){const e=Q_();Ci(e,new uT(e,n))}function J_(n,e){bi.call(this,Tf.Na,n),this.size=e}function Rg(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return pt.setTimeout(function(){n()},e)}Tf.Ma="serverreachability",Ei(ZR,bi),Tf.STAT_EVENT="statevent",Ei(uT,bi),Tf.Na="timingevent",Ei(J_,bi);var Df={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},X_={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ey(){}function lT(){}ey.prototype.h=null;var ny,Af={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ty(){bi.call(this,"d")}function Iw(){bi.call(this,"c")}function Sf(){}function xf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new xg(this),this.P=Tw,this.W=new Z_(n=Kl?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new ry}function ry(){this.i=null,this.g="",this.h=!1}Ei(ty,bi),Ei(Iw,bi),Ei(Sf,ey),Sf.prototype.g=function(){return new XMLHttpRequest},Sf.prototype.i=function(){return{}},ny=new Sf;var Tw=45e3,iy={},sy={};function oy(n,e,t){n.K=1,n.v=hy(ju(e)),n.s=t,n.U=!0,Dw(n,null)}function Dw(n,e){n.F=Date.now(),Ng(n),n.A=ju(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),_T(t.h,"t",r),n.C=0,t=n.l.H,n.h=new ry,n.g=Ww(n.l,t?e:null,!n.s),0<n.O&&(n.L=new nT(oi(n.Ia,n,n.g),n.O)),iT(n.V,n.g,"readystatechange",n.gb),e=n.H?yf(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Bu(1),function(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var c="",p=u.split("&"),y=0;y<p.length;y++){var b=p[y].split("=");if(1<b.length){var D=b[0];b=b[1];var S=D.split("_");c=2<=S.length&&"type"==S[1]?c+(D+"=")+b+"&":c+(D+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function ay(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function cT(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=KR(n,t),o==sy){4==e&&(n.o=4,Ii(14),r=!1),Td(n.j,n.m,null,"[Incomplete Response]");break}if(o==iy){n.o=4,Ii(15),Td(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Td(n.j,n.m,o,null),uy(n,o)}ay(n)&&o!=sy&&o!=iy&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ii(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Ey(e),e.L=!0,Ii(11))):(Td(n.j,n.m,t,"[Invalid Chunked Response]"),Xl(n),Dd(n))}function KR(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?sy:(t=Number(e.substring(t,r)),isNaN(t)?iy:(r+=1)+t>e.length?sy:(e=e.substr(r,t),n.C=r+t,e))}function Ng(n){n.Y=Date.now()+n.P,dT(n,n.P)}function dT(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Rg(oi(n.eb,n),e)}function Rf(n){n.B&&(pt.clearTimeout(n.B),n.B=null)}function Dd(n){0==n.l.G||n.I||Hw(n.l,n)}function Xl(n){Rf(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,z_(n.W),sT(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function uy(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Rw(t.i,n)))if(t.I=n.N,!n.J&&Rw(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(b){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=Rg(oi(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Fg(t),_y(t)}vy(t),Ii(18)}if(1>=vT(t.i)&&t.ka){try{t.ka()}catch(b){}t.ka=void 0}}else tc(t,11)}else if((n.J||t.g==n)&&Fg(t),!Vu(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let b=o[e];if(t.U=b[0],b=b[1],2==t.G)if("c"==b[0]){t.J=b[1],t.la=b[2];const D=b[3];null!=D&&(t.ma=D,t.h.info("VER="+t.ma));const S=b[4];null!=S&&(t.za=S,t.h.info("SVER="+t.za));const P=b[5];null!=P&&"number"==typeof P&&0<P&&(t.K=r=1.5*P,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const j=n.g;if(j){const Q=j.g?j.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Q){var u=r.i;!u.g&&($n(Q,"spdy")||$n(Q,"quic")||$n(Q,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(Nw(u,u.h),u.h=null))}if(r.D){const ye=j.g?j.g.getResponseHeader("X-HTTP-Session-Id"):null;ye&&(r.sa=ye,er(r.F,r.D,ye))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=wy(r,r.H?r.la:null,r.W),c.J){ET(r.i,c);var p=c,y=r.K;y&&p.setTimeout(y),p.B&&(Rf(p),Ng(p)),r.g=c}else jw(r);0<t.l.length&&yy(t)}else"stop"!=b[0]&&"close"!=b[0]||tc(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?tc(t,7):Uw(t):"noop"!=b[0]&&t.j&&t.j.wa(b),t.A=0)}Bu(4)}catch(b){}}function ly(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(OI(n)||"string"==typeof n)UI(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(OI(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;o=(r=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(OI(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n)).length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function Ad(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Ad)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function cy(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];ec(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)ec(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function ec(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(tt=xf.prototype).setTimeout=function(n){this.P=n},tt.gb=function(n){n=n.target;const e=this.L;e&&3==Hu(n)?e.l():this.Ia(n)},tt.Ia=function(n){try{if(n==this.g)e:{const D=Hu(this.g);var e=this.g.Da();const S=this.g.ba();if(!(3>D)&&(3!=D||Kl||this.g&&(this.h.h||this.g.ga()||ST(this.g)))){this.I||4!=D||7==e||Bu(8==e||0>=S?3:2),Rf(this);var t=this.g.ba();this.N=t;t:if(ay(this)){var r=ST(this.g);n="";var o=r.length,u=4==Hu(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Xl(this),Dd(this);var c="";break t}this.h.i=new pt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function(n,e,t,r,o,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.X,D,t),this.i){if(this.$&&!this.J){t:{if(this.g){var p,y=this.g;if((p=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Vu(p)){var b=p;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,Ii(12),Xl(this),Dd(this);break e}Td(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,uy(this,t)}this.U?(cT(this,D,c),Kl&&this.i&&3==D&&(iT(this.V,this.W,"tick",this.fb),this.W.start())):(Td(this.j,this.m,c,null),uy(this,c)),4==D&&Xl(this),this.i&&!this.I&&(4==D?Hw(this.l,this):(this.i=!1,Ng(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Ii(12)):(this.o=0,Ii(13)),Xl(this),Dd(this)}}}catch(D){}},tt.fb=function(){if(this.g){var n=Hu(this.g),e=this.g.ga();this.C<e.length&&(Rf(this),cT(this,n,e),this.i&&4!=n&&Ng(this))}},tt.cancel=function(){this.I=!0,Xl(this)},tt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Bu(3),Ii(17)),Xl(this),this.o=2,Dd(this)):dT(this,this.Y-n)},(tt=Ad.prototype).R=function(){cy(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},tt.T=function(){return cy(this),this.g.concat()},tt.get=function(n,e){return ec(this.h,n)?this.h[n]:e},tt.set=function(n,e){ec(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},tt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var Aw=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Sd(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Sd){this.g=void 0!==e?e:n.g,Mg(this,n.j),this.s=n.s,dy(this,n.i),pr(this,n.m),this.l=n.l,e=n.h;var t=new fy;t.i=e.i,e.g&&(t.g=new Ad(e.g),t.h=e.h),Sw(this,t),this.o=n.o}else n&&(t=String(n).match(Aw))?(this.g=!!e,Mg(this,t[1]||"",!0),this.s=Nf(t[2]||""),dy(this,t[3]||"",!0),pr(this,t[4]),this.l=Nf(t[5]||"",!0),Sw(this,t[6]||"",!0),this.o=Nf(t[7]||"")):(this.g=!!e,this.h=new fy(null,this.g))}function ju(n){return new Sd(n)}function Mg(n,e,t){n.j=t?Nf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function dy(n,e,t){n.i=t?Nf(e,!0):e}function pr(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Sw(n,e,t){e instanceof fy?(n.h=e,function(n,e){e&&!n.j&&($u(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(py(this,r),_T(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Mf(e,JR)),n.h=new fy(e,n.g))}function er(n,e,t){n.h.set(e,t)}function hy(n){return er(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Nf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Mf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,kf),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function kf(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Sd.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Mf(e,pT,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Mf(e,pT,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Mf(t,"/"==t.charAt(0)?gT:QR,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Mf(t,mT)),n.join("")};var pT=/[#\/\?@]/g,QR=/[#\?:]/g,gT=/[#\?]/g,JR=/[#\?@]/g,mT=/#/g;function fy(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function $u(n){n.g||(n.g=new Ad,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function py(n,e){$u(n),e=Pf(n,e),ec(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,ec((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&cy(n)))}function Zo(n,e){return $u(n),e=Pf(n,e),ec(n.g.h,e)}function _T(n,e,t){py(n,e),0<t.length&&(n.i=null,n.g.set(Pf(n,e),_f(t)),n.h+=t.length)}function Pf(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function ho(n){this.l=n||yT,n=pt.PerformanceNavigationTiming?0<(n=pt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(pt.g&&pt.g.Ea&&pt.g.Ea()&&pt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(tt=fy.prototype).add=function(n,e){$u(this),this.i=null,n=Pf(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},tt.forEach=function(n,e){$u(this),this.g.forEach(function(t,r){UI(t,function(o){n.call(e,o,r,this)},this)},this)},tt.T=function(){$u(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},tt.R=function(n){$u(this);var e=[];if("string"==typeof n)Zo(this,n)&&(e=BI(e,this.g.get(Pf(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=BI(e,n[t])}return e},tt.set=function(n,e){return $u(this),this.i=null,Zo(this,n=Pf(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},tt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},tt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var c=o;""!==r[u]&&(c+="="+encodeURIComponent(String(r[u]))),n.push(c)}}return this.i=n.join("&")};var yT=10;function xw(n){return!!n.h||!!n.g&&n.g.size>=n.j}function vT(n){return n.h?1:n.g?n.g.size:0}function Rw(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Nw(n,e){n.g?n.g.add(e):n.h=e}function ET(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function gy(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return _f(n.i)}function xd(){}function XR(){this.g=new xd}function wT(n,e,t){const r=t||"";try{ly(n,function(o,u){let c=o;V_(o)&&(c=Sg(o)),e.push(r+u+"="+encodeURIComponent(c))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function kg(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function Of(n){this.l=n.$b||null,this.j=n.ib||!1}function Rd(n,e){ai.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Mw,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ho.prototype.cancel=function(){if(this.i=gy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},xd.prototype.stringify=function(n){return pt.JSON.stringify(n,void 0)},xd.prototype.parse=function(n){return pt.JSON.parse(n,void 0)},Ei(Of,ey),Of.prototype.g=function(){return new Rd(this.l,this.j)},Of.prototype.i=function(n){return function(){return n}}({}),Ei(Rd,ai);var Mw=0;function kw(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Ff(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Nd(n)}function Nd(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(tt=Rd.prototype).open=function(n,e){if(this.readyState!=Mw)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Nd(this)},tt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||pt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},tt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ff(this)),this.readyState=Mw},tt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Nd(this)),this.g&&(this.readyState=3,Nd(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==pt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;kw(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},tt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Ff(this):Nd(this),3==this.readyState&&kw(this)}},tt.Ua=function(n){this.g&&(this.response=this.responseText=n,Ff(this))},tt.Ta=function(n){this.g&&(this.response=n,Ff(this))},tt.ha=function(){this.g&&Ff(this)},tt.setRequestHeader=function(n,e){this.v.append(n,e)},tt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},tt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Rd.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Pw=pt.JSON.parse;function Er(n){ai.call(this),this.headers=new Ad,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Ow,this.K=this.L=!1}Ei(Er,ai);var Ow="",bT=/^https?$/i,CT=["POST","PUT"];function TT(n){return"content-type"==n.toLowerCase()}function Fw(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Lw(n),my(n)}function Lw(n){n.D||(n.D=!0,Ci(n,"complete"),Ci(n,"error"))}function DT(n){if(n.h&&void 0!==PI&&(!n.C[1]||4!=Hu(n)||2!=n.ba()))if(n.v&&4==Hu(n))If(n.Fa,0,n);else if(Ci(n,"readystatechange"),4==Hu(n)){n.h=!1;try{const p=n.ba();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===p){var o=String(n.H).match(Aw)[1]||null;if(!o&&pt.self&&pt.self.location){var u=pt.self.location.protocol;o=u.substr(0,u.length-1)}r=!bT.test(o?o.toLowerCase():"")}t=r}if(t)Ci(n,"complete"),Ci(n,"success");else{n.m=6;try{var c=2<Hu(n)?n.g.statusText:""}catch(y){c=""}n.j=c+" ["+n.ba()+"]",Lw(n)}}finally{my(n)}}}function my(n,e){if(n.g){AT(n);const t=n.g,r=n.C[0]?gw:null;n.g=null,n.C=null,e||Ci(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function AT(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(pt.clearTimeout(n.A),n.A=null)}function Hu(n){return n.g?n.g.readyState:0}function ST(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Ow:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Vw(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function(n){let e="";return lo(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):er(n,e,t))}function Pg(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function xT(n){this.za=0,this.l=[],this.h=new K_,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Pg("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Pg("baseRetryDelayMs",5e3,n),this.$a=Pg("retryDelaySeedMs",1e4,n),this.Ya=Pg("forwardChannelMaxRetries",2,n),this.ra=Pg("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new ho(n&&n.concurrentRequestLimit),this.Ca=new XR,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Uw(n){if(RT(n),3==n.G){var e=n.V++,t=ju(n.F);er(t,"SID",n.J),er(t,"RID",e),er(t,"TYPE","terminate"),Og(n,t),(e=new xf(n,n.h,e,void 0)).K=2,e.v=hy(ju(t)),t=!1,pt.navigator&&pt.navigator.sendBeacon&&(t=pt.navigator.sendBeacon(e.v.toString(),"")),!t&&pt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Ww(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Ng(e)}qw(n)}function _y(n){n.g&&(Ey(n),n.g.cancel(),n.g=null)}function RT(n){_y(n),n.u&&(pt.clearTimeout(n.u),n.u=null),Fg(n),n.i.cancel(),n.m&&("number"==typeof n.m&&pt.clearTimeout(n.m),n.m=null)}function Bw(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&yy(n)}function yy(n){xw(n.i)||n.m||(n.m=!0,W_(n.Ha,n),n.C=0)}function NT(n,e){var t;t=e?e.m:n.V++;const r=ju(n.F);er(r,"SID",n.J),er(r,"RID",t),er(r,"AID",n.U),Og(n,r),n.o&&n.s&&Vw(r,n.o,n.s),t=new xf(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=MT(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Nw(n.i,t),oy(t,r,e)}function Og(n,e){n.j&&ly({},function(t,r){er(e,r,t)})}function MT(n,e,t){t=Math.min(n.l.length,t);var r=n.j?oi(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=o[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let p=!0;for(let y=0;y<t;y++){let b=o[y].h;const D=o[y].g;if(b-=u,0>b)u=Math.max(0,o[y].h-100),p=!1;else try{wT(D,c,"req"+b+"_")}catch(S){r&&r(D)}}if(p){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function jw(n){n.g||n.u||(n.Y=1,W_(n.Ga,n),n.A=0)}function vy(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Rg(oi(n.Ga,n),Gw(n,n.A)),n.A++,0))}function Ey(n){null!=n.B&&(pt.clearTimeout(n.B),n.B=null)}function $w(n){n.g=new xf(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=ju(n.oa);er(e,"RID","rpc"),er(e,"SID",n.J),er(e,"CI",n.N?"0":"1"),er(e,"AID",n.U),Og(n,e),er(e,"TYPE","xmlhttp"),n.o&&n.s&&Vw(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=hy(ju(e)),t.s=null,t.U=!0,Dw(t,n)}function Fg(n){null!=n.v&&(pt.clearTimeout(n.v),n.v=null)}function Hw(n,e){var t=null;if(n.g==e){Fg(n),Ey(n),n.g=null;var r=2}else{if(!Rw(n.i,e))return;t=e.D,ET(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Ci(r=Q_(),new J_(r,t,e,o)),yy(n)}else jw(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function(n,e){return!(vT(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Rg(oi(n.Ha,n,e),Gw(n,n.C)),n.C++,0)))}(n,e)||2==r&&vy(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:tc(n,5);break;case 4:tc(n,10);break;case 3:tc(n,6);break;default:tc(n,2)}}function Gw(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function tc(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=oi(n.jb,n);t||(t=new Sd("//www.google.com/images/cleardot.gif"),pt.location&&"http"==pt.location.protocol||Mg(t,"https"),hy(t)),function(n,e){const t=new K_;if(pt.Image){const r=new Image;r.onload=mf(kg,t,r,"TestLoadImage: loaded",!0,e),r.onerror=mf(kg,t,r,"TestLoadImage: error",!1,e),r.onabort=mf(kg,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=mf(kg,t,r,"TestLoadImage: timeout",!1,e),pt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ii(2);n.G=0,n.j&&n.j.va(e),qw(n),RT(n)}function qw(n){n.G=0,n.I=-1,n.j&&((0!=gy(n.i).length||0!=n.l.length)&&(n.i.i.length=0,_f(n.l),n.l.length=0),n.j.ua())}function wy(n,e,t){let r=function(n){return n instanceof Sd?ju(n):new Sd(n,void 0)}(t);if(""!=r.i)e&&dy(r,e+"."+r.i),pr(r,r.m);else{const o=pt.location;r=function(n,e,t,r){var o=new Sd(null,void 0);return n&&Mg(o,n),e&&dy(o,e),t&&pr(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&lo(n.aa,function(o,u){er(r,u,o)}),t=n.sa,(e=n.D)&&t&&er(r,e,t),er(r,"VER",n.ma),Og(n,r),r}function Ww(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Er(t&&n.Ba&&!n.qa?new Of({ib:!0}):n.qa)).L=n.H,e}function nc(){}function by(){if(Wo&&!(10<=Number(GI)))throw Error("Environmental error: no available transport.")}function ks(n,e){ai.call(this),this.g=new xT(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Vu(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Vu(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new rc(this)}function Md(n){ty.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function rN(){Iw.call(this),this.status=1}function rc(n){this.g=n}(tt=Er.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ny.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:ny),this.g.onreadystatechange=oi(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void Fw(this,u)}n=t||"";const o=new Ad(this.headers);r&&ly(r,function(u,c){o.set(c,u)}),r=function(n){e:{var e=TT;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=pt.FormData&&n instanceof pt.FormData,!(0<=VI(CT,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,c){this.g.setRequestHeader(c,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{AT(this),0<this.B&&((this.K=function(n){return Wo&&HI()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=oi(this.pa,this)):this.A=If(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Fw(this,u)}},tt.pa=function(){void 0!==PI&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ci(this,"timeout"),this.abort(8))},tt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ci(this,"complete"),Ci(this,"abort"),my(this))},tt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),my(this,!0)),Er.Z.M.call(this)},tt.Fa=function(){this.s||(this.F||this.v||this.l?DT(this):this.cb())},tt.cb=function(){DT(this)},tt.ba=function(){try{return 2<Hu(this)?this.g.status:-1}catch(n){return-1}},tt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},tt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Pw(e)}},tt.Da=function(){return this.m},tt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(tt=xT.prototype).ma=8,tt.G=1,tt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},tt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new xf(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=yf(u),zl(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=MT(this,o,e),er(t=ju(this.F),"RID",n),er(t,"CVER",22),this.D&&er(t,"X-HTTP-Session-Id",this.D),Og(this,t),this.o&&u&&Vw(t,this.o,u),Nw(this.i,o),this.Ra&&er(t,"TYPE","init"),this.ja?(er(t,"$req",e),er(t,"SID","null"),o.$=!0,oy(o,t,null)):oy(o,t,e),this.G=2}}else 3==this.G&&(n?NT(this,n):0==this.l.length||xw(this.i)||NT(this))},tt.Ga=function(){if(this.u=null,$w(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Rg(oi(this.bb,this),n)}},tt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ii(10),_y(this),$w(this))},tt.ab=function(){null!=this.v&&(this.v=null,_y(this),vy(this),Ii(19))},tt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Ii(2)):(this.h.info("Failed to ping google.com"),Ii(1))},(tt=nc.prototype).xa=function(){},tt.wa=function(){},tt.va=function(){},tt.ua=function(){},tt.Oa=function(){},by.prototype.g=function(n,e){return new ks(n,e)},Ei(ks,ai),ks.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),W_(oi(n.hb,n,e))),Ii(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=wy(n,null,n.W),yy(n)},ks.prototype.close=function(){Uw(this.g)},ks.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Bw(this.g,e)}else this.v?((e={}).__data__=Sg(n),Bw(this.g,e)):Bw(this.g,n)},ks.prototype.M=function(){this.g.j=null,delete this.j,Uw(this.g),delete this.g,ks.Z.M.call(this)},Ei(Md,ty),Ei(rN,Iw),Ei(rc,nc),rc.prototype.xa=function(){Ci(this.g,"a")},rc.prototype.wa=function(n){Ci(this.g,new Md(n))},rc.prototype.va=function(n){Ci(this.g,new rN(n))},rc.prototype.ua=function(){Ci(this.g,"b")},by.prototype.createWebChannel=by.prototype.g,ks.prototype.send=ks.prototype.u,ks.prototype.open=ks.prototype.m,ks.prototype.close=ks.prototype.close,Df.NO_ERROR=0,Df.TIMEOUT=8,Df.HTTP_ERROR=6,X_.COMPLETE="complete",lT.EventType=Af,Af.OPEN="a",Af.CLOSE="b",Af.ERROR="c",Af.MESSAGE="d",ai.prototype.listen=ai.prototype.N,Er.prototype.listenOnce=Er.prototype.O,Er.prototype.getLastError=Er.prototype.La,Er.prototype.getLastErrorCode=Er.prototype.Da,Er.prototype.getStatus=Er.prototype.ba,Er.prototype.getResponseJson=Er.prototype.Qa,Er.prototype.getResponseText=Er.prototype.ga,Er.prototype.send=Er.prototype.ea;var M1=qa.createWebChannelTransport=function(){return new by},kT=qa.getStatEventTarget=function(){return Q_()},Cy=qa.ErrorCode=Df,k1=qa.EventType=X_,yt=qa.Event=Tf,PT=qa.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},iN=qa.FetchXmlHttpFactory=Of,Iy=qa.WebChannel=lT,Ty=qa.XhrIo=Er;const OT="@firebase/firestore";class kr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}kr.UNAUTHENTICATED=new kr(null),kr.GOOGLE_CREDENTIALS=new kr("google-credentials-uid"),kr.FIRST_PARTY=new kr("first-party-uid"),kr.MOCK_USER=new kr("mock-user");let Gu="9.8.0";const Sn=new ao.Yd("@firebase/firestore");function FT(){return Sn.logLevel}function Ue(n,...e){if(Sn.logLevel<=ao.in.DEBUG){const t=e.map(Dy);Sn.debug(`Firestore (${Gu}): ${n}`,...t)}}function Pr(n,...e){if(Sn.logLevel<=ao.in.ERROR){const t=e.map(Dy);Sn.error(`Firestore (${Gu}): ${n}`,...t)}}function Lf(n,...e){if(Sn.logLevel<=ao.in.WARN){const t=e.map(Dy);Sn.warn(`Firestore (${Gu}): ${n}`,...t)}}function Dy(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function it(n="Unexpected state"){const e=`FIRESTORE (${Gu}) INTERNAL ASSERTION FAILED: `+n;throw Pr(e),new Error(e)}function Nt(n,e){n||it()}function Ye(n,e){return n}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends F.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ui{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class VT{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class oN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(kr.UNAUTHENTICATED))}shutdown(){}}class Ay{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class UT{constructor(e){this.t=e,this.currentUser=kr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=b=>this.i!==o?(o=this.i,t(b)):Promise.resolve();let c=new ui;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ui,e.enqueueRetryable(()=>u(this.currentUser))};const p=()=>{const b=c;e.enqueueRetryable((0,be.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},y=b=>{Ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(b=>y(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?y(b):(Ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ui)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Nt("string"==typeof r.accessToken),new VT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Nt(null===e||"string"==typeof e),new kr(e)}}class BT{constructor(e,t,r){this.type="FirstParty",this.user=kr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class jT{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new BT(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(kr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $T{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Lg{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.p;return this.p=u.token,Ue("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?o(u):Ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Nt("string"==typeof t.token),this.p=t.token,new $T(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Ps{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function aN(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Ps.A=-1;class HT{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=aN(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Bt(n,e){return n<e?-1:n>e?1:0}function kd(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function Zw(n){return n+"\0"}class wr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Re(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return wr.fromMillis(Date.now())}static fromDate(e){return wr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new wr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Bt(this.nanoseconds,e.nanoseconds):Bt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ct{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ct(e)}static min(){return new Ct(new wr(0,0))}static max(){return new Ct(new wr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function GT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Pd(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function uN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class xy{constructor(e,t,r){void 0===t?t=0:t>e.length&&it(),void 0===r?r=e.length-t:r>e.length-t&&it(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===xy.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof xy?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),c=t.get(o);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class fn extends xy{construct(e,t,r){return new fn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new fn(t)}static emptyPath(){return new fn([])}}const P1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Or extends xy{construct(e,t,r){return new Or(e,t,r)}static isValidIdentifier(e){return P1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Or.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Or(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Re(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;o<e.length;){const p=e[o];if("\\"===p){if(o+1===e.length)throw new Re(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if("\\"!==y&&"."!==y&&"`"!==y)throw new Re(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,o+=2}else"`"===p?(c=!c,o++):"."!==p||c?(r+=p,o++):(u(),o++)}if(u(),c)throw new Re(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Or(t)}static emptyPath(){return new Or([])}}class qu{constructor(e){this.fields=e,e.sort(Or.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return kd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Gr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Gr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Gr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Bt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gr.EMPTY_BYTE_STRING=new Gr("");const qT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fo(n){if(Nt(!!n),"string"==typeof n){let e=0;const t=qT.exec(n);if(Nt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:gr(n.seconds),nanos:gr(n.nanos)}}function gr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Od(n){return"string"==typeof n?Gr.fromBase64String(n):Gr.fromUint8Array(n)}function zw(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function WT(n){const e=n.mapValue.fields.__previous_value__;return zw(e)?WT(e):e}function Vg(n){const e=fo(n.mapValue.fields.__local_write_time__.timestampValue);return new wr(e.seconds,e.nanos)}class ZT{constructor(e,t,r,o,u,c,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=p,this.useFetchStreams=y}}class Wu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Wu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Wu&&e.projectId===this.projectId&&e.database===this.database}}function Ug(n){return null==n}function za(n){return 0===n&&1/n==-1/0}function zT(n){return"number"==typeof n&&Number.isInteger(n)&&!za(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Ze{constructor(e){this.path=e}static fromPath(e){return new Ze(fn.fromString(e))}static fromName(e){return new Ze(fn.fromString(e).popFirst(5))}static empty(){return new Ze(fn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===fn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return fn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ze(new fn(e.slice()))}}const ic={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Bg={nullValue:"NULL_VALUE"};function Fd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?zw(n)?4:QT(n)?9007199254740991:10:it()}function Ko(n,e){if(n===e)return!0;const t=Fd(n);if(t!==Fd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Vg(n).isEqual(Vg(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=fo(r.timestampValue),c=fo(o.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Od(n.bytesValue).isEqual(Od(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return gr(r.geoPointValue.latitude)===gr(o.geoPointValue.latitude)&&gr(r.geoPointValue.longitude)===gr(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return gr(r.integerValue)===gr(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=gr(r.doubleValue),c=gr(o.doubleValue);return u===c?za(u)===za(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return kd(n.arrayValue.values||[],e.arrayValue.values||[],Ko);case 10:return function(r,o){const u=r.mapValue.fields||{},c=o.mapValue.fields||{};if(GT(u)!==GT(c))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(void 0===c[p]||!Ko(u[p],c[p])))return!1;return!0}(n,e);default:return it()}var o}function jg(n,e){return void 0!==(n.values||[]).find(t=>Ko(t,e))}function Ka(n,e){if(n===e)return 0;const t=Fd(n),r=Fd(e);if(t!==r)return Bt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Bt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const c=gr(o.integerValue||o.doubleValue),p=gr(u.integerValue||u.doubleValue);return c<p?-1:c>p?1:c===p?0:isNaN(c)?isNaN(p)?0:-1:1}(n,e);case 3:return KT(n.timestampValue,e.timestampValue);case 4:return KT(Vg(n),Vg(e));case 5:return Bt(n.stringValue,e.stringValue);case 6:return function(o,u){const c=Od(o),p=Od(u);return c.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const c=o.split("/"),p=u.split("/");for(let y=0;y<c.length&&y<p.length;y++){const b=Bt(c[y],p[y]);if(0!==b)return b}return Bt(c.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const c=Bt(gr(o.latitude),gr(u.latitude));return 0!==c?c:Bt(gr(o.longitude),gr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const c=o.values||[],p=u.values||[];for(let y=0;y<c.length&&y<p.length;++y){const b=Ka(c[y],p[y]);if(b)return b}return Bt(c.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===ic.mapValue&&u===ic.mapValue)return 0;if(o===ic.mapValue)return 1;if(u===ic.mapValue)return-1;const c=o.fields||{},p=Object.keys(c),y=u.fields||{},b=Object.keys(y);p.sort(),b.sort();for(let D=0;D<p.length&&D<b.length;++D){const S=Bt(p[D],b[D]);if(0!==S)return S;const P=Ka(c[p[D]],y[b[D]]);if(0!==P)return P}return Bt(p.length,b.length)}(n.mapValue,e.mapValue);default:throw it()}}function KT(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Bt(n,e);const t=fo(n),r=fo(e),o=Bt(t.seconds,r.seconds);return 0!==o?o:Bt(t.nanos,r.nanos)}function Ld(n){return Ry(n)}function Ry(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=fo(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Od(n.bytesValue).toBase64():"referenceValue"in n?Ze.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const c of r.values||[])u?u=!1:o+=",",o+=Ry(c);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const p of o)c?c=!1:u+=",",u+=`${p}:${Ry(r.fields[p])}`;return u+"}"}(n.mapValue):it();var e}function Vd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Kw(n){return!!n&&"integerValue"in n}function $g(n){return!!n&&"arrayValue"in n}function Ny(n){return!!n&&"nullValue"in n}function YT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Hg(n){return!!n&&"mapValue"in n}function Gg(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Pd(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Gg(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Gg(n.arrayValue.values[t]);return e}return Object.assign({},n)}function QT(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function cN(n){return"nullValue"in n?Bg:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Vd(Wu.empty(),Ze.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:it()}function dN(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Vd(Wu.empty(),Ze.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?ic:it()}function JT(n,e){const t=Ka(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function XT(n,e){const t=Ka(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ji{constructor(e){this.value=e}static empty(){return new ji({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Hg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gg(t)}setAll(e){let t=Or.emptyPath(),r={},o=[];e.forEach((c,p)=>{if(!t.isImmediateParentOf(p)){const y=this.getFieldsMap(t);this.applyChanges(y,r,o),r={},o=[],t=p.popLast()}c?r[p.lastSegment()]=Gg(c):o.push(p.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());Hg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ko(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Hg(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Pd(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new ji(Gg(this.value))}}function eD(n){const e=[];return Pd(n.fields,(t,r)=>{const o=new Or([t]);if(Hg(r)){const u=eD(r.mapValue).fields;if(0===u.length)e.push(o);else for(const c of u)e.push(o.child(c))}else e.push(o)}),new qu(e)}class Un{constructor(e,t,r,o,u,c){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=c}static newInvalidDocument(e){return new Un(e,0,Ct.min(),Ct.min(),ji.empty(),0)}static newFoundDocument(e,t,r){return new Un(e,1,t,Ct.min(),r,0)}static newNoDocument(e,t){return new Un(e,2,t,Ct.min(),ji.empty(),0)}static newUnknownDocument(e,t){return new Un(e,3,t,Ct.min(),ji.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ji.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ji.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Un(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class qg{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function Yw(n){return n.fields.find(e=>2===e.kind)}function Ud(n){return n.fields.filter(e=>2!==e.kind)}qg.UNKNOWN_ID=-1;class Wg{constructor(e,t){this.fieldPath=e,this.kind=t}}class Zg{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Zg(0,Os.min())}}function tD(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=Ct.fromTimestamp(1e9===r?new wr(t+1,0):new wr(t,r));return new Os(o,Ze.empty(),e)}function hN(n){return new Os(n.readTime,n.key,-1)}class Os{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Os(Ct.min(),Ze.empty(),-1)}static max(){return new Os(Ct.max(),Ze.empty(),-1)}}function My(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ze.comparator(n.documentKey,e.documentKey),0!==t?t:Bt(n.largestBatchId,e.largestBatchId))}class mr{constructor(e,t){this.comparator=e,this.root=t||Ti.EMPTY}insert(e,t){return new mr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ti.BLACK,null,null))}remove(e){return new mr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ti.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vf(this.root,e,this.comparator,!0)}}class Vf{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ti{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:Ti.RED,this.left=null!=o?o:Ti.EMPTY,this.right=null!=u?u:Ti.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Ti(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ti.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Ti.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ti.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ti.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw it();const e=this.left.check();if(e!==this.right.check())throw it();return e+(this.isRed()?0:1)}}Ti.EMPTY=null,Ti.RED=!0,Ti.BLACK=!1,Ti.EMPTY=new class{constructor(){this.size=0}get key(){throw it()}get value(){throw it()}get color(){throw it()}get left(){throw it()}get right(){throw it()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Ti(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Bn{constructor(e){this.comparator=e,this.data=new mr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ky(this.data.getIterator())}getIteratorFrom(e){return new ky(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Bn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Bn(this.comparator);return t.data=e,t}}class ky{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Uf(n){return n.hasNext()?n.getNext():void 0}class nD{constructor(e,t=null,r=[],o=[],u=null,c=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=c,this.endAt=p,this.P=null}}function rD(n,e=null,t=[],r=[],o=null,u=null,c=null){return new nD(n,e,t,r,o,u,c)}function sc(n){const e=Ye(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+Ld(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Ug(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ld(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ld(r)).join(",")),e.P=t}return e.P}function Bf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!mN(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!Ko(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!_N(n.startAt,e.startAt)&&_N(n.endAt,e.endAt)}function Qw(n){return Ze.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Py(n,e){return n.filters.filter(t=>t instanceof qr&&t.field.isEqual(e))}function Bd(n,e,t){let r=Bg,o=!0;for(const u of Py(n,e)){let c=Bg,p=!0;switch(u.op){case"<":case"<=":c=cN(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,p=!1;break;case"!=":case"not-in":c=Bg}JT({value:r,inclusive:o},{value:c,inclusive:p})<0&&(r=c,o=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];JT({value:r,inclusive:o},{value:c,inclusive:t.inclusive})<0&&(r=c,o=t.inclusive);break}return{value:r,inclusive:o}}function fN(n,e,t){let r=ic,o=!0;for(const u of Py(n,e)){let c=ic,p=!0;switch(u.op){case">=":case">":c=dN(u.value),p=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,p=!1;break;case"!=":case"not-in":c=ic}XT({value:r,inclusive:o},{value:c,inclusive:p})>0&&(r=c,o=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];XT({value:r,inclusive:o},{value:c,inclusive:t.inclusive})>0&&(r=c,o=t.inclusive);break}return{value:r,inclusive:o}}class qr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new Oy(e,t,r):"array-contains"===t?new O1(e,r):"in"===t?new gN(e,r):"not-in"===t?new Ya(e,r):"array-contains-any"===t?new oD(e,r):new qr(e,t,r)}static V(e,t,r){return"in"===t?new pN(e,r):new jf(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Ka(t,this.value)):null!==t&&Fd(this.value)===Fd(t)&&this.v(Ka(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return it()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Oy extends qr{constructor(e,t,r){super(e,t,r),this.key=Ze.fromName(r.referenceValue)}matches(e){const t=Ze.comparator(e.key,this.key);return this.v(t)}}class pN extends qr{constructor(e,t){super(e,"in",t),this.keys=sD(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class jf extends qr{constructor(e,t){super(e,"not-in",t),this.keys=sD(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function sD(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ze.fromName(r.referenceValue))}class O1 extends qr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return $g(t)&&jg(t.arrayValue,this.value)}}class gN extends qr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&jg(this.value.arrayValue,t)}}class Ya extends qr{constructor(e,t){super(e,"not-in",t)}matches(e){if(jg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!jg(this.value.arrayValue,t)}}class oD extends qr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!$g(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>jg(this.value.arrayValue,r))}}class jd{constructor(e,t){this.position=e,this.inclusive=t}}class Zu{constructor(e,t="asc"){this.field=e,this.dir=t}}function mN(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function aD(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],c=n.position[o];if(r=u.field.isKeyField()?Ze.comparator(Ze.fromName(c.referenceValue),t.key):Ka(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function _N(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ko(n.position[t],e.position[t]))return!1;return!0}class zu{constructor(e,t=null,r=[],o=[],u=null,c="F",p=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=c,this.startAt=p,this.endAt=y,this.D=null,this.C=null}}function uD(n,e,t,r,o,u,c,p){return new zu(n,e,t,r,o,u,c,p)}function $f(n){return new zu(n)}function Fy(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function zg(n){for(const e of n.filters)if(e.S())return e.field;return null}function Ly(n){return null!==n.collectionGroup}function Hf(n){const e=Ye(n);if(null===e.D){e.D=[];const t=zg(e),r=Fy(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Zu(t)),e.D.push(new Zu(Or.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Zu(Or.keyField(),u))}}}return e.D}function Yo(n){const e=Ye(n);if(!e.C)if("F"===e.limitType)e.C=rD(e.path,e.collectionGroup,Hf(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Hf(e))t.push(new Zu(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new jd(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new jd(e.startAt.position,e.startAt.inclusive):null;e.C=rD(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.C}function lD(n,e,t){return new zu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Kg(n,e){return Bf(Yo(n),Yo(e))&&n.limitType===e.limitType}function cD(n){return`${sc(Yo(n))}|lt:${n.limitType}`}function Vy(n){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Ld(r.value)}`;var r}).join(", ")}]`),Ug(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Ld(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Ld(t)).join(",")),`Target(${e})`}(Yo(n))}; limitType=${n.limitType})`}function Uy(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Ze.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,c){const p=aD(o,u,c);return o.inclusive?p<=0:p<0}(t.startAt,Hf(t),r)||t.endAt&&!function(o,u,c){const p=aD(o,u,c);return o.inclusive?p>=0:p>0}(t.endAt,Hf(t),r)));var t,r}function Xw(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function dD(n){return(e,t)=>{let r=!1;for(const o of Hf(n)){const u=yN(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function yN(n,e,t){const r=n.field.isKeyField()?Ze.comparator(e.key,t.key):function(o,u,c){const p=u.data.field(o),y=c.data.field(o);return null!==p&&null!==y?Ka(p,y):it()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return it()}}function e0(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:za(e)?"-0":e}}function Yg(n){return{integerValue:""+n}}function hD(n,e){return zT(e)?Yg(e):e0(n,e)}class Qg{constructor(){this._=void 0}}function By(n,e,t){return n instanceof qf?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof $d?vN(n,e):n instanceof Hd?fD(n,e):function(r,o){const u=Gf(r,o),c=pD(u)+pD(r.k);return Kw(u)&&Kw(r.k)?Yg(c):e0(r.M,c)}(n,e)}function jy(n,e,t){return n instanceof $d?vN(n,e):n instanceof Hd?fD(n,e):t}function Gf(n,e){return n instanceof Wf?Kw(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class qf extends Qg{}class $d extends Qg{constructor(e){super(),this.elements=e}}function vN(n,e){const t=gD(e);for(const r of n.elements)t.some(o=>Ko(o,r))||t.push(r);return{arrayValue:{values:t}}}class Hd extends Qg{constructor(e){super(),this.elements=e}}function fD(n,e){let t=gD(e);for(const r of n.elements)t=t.filter(o=>!Ko(o,r));return{arrayValue:{values:t}}}class Wf extends Qg{constructor(e,t){super(),this.M=e,this.k=t}}function pD(n){return gr(n.integerValue||n.doubleValue)}function gD(n){return $g(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Jg{constructor(e,t){this.field=e,this.transform=t}}class wN{constructor(e,t){this.version=e,this.transformResults=t}}class Fr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Fr}static exists(e){return new Fr(void 0,e)}static updateTime(e){return new Fr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function t0(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class $y{}function Xg(n,e,t){n instanceof Qo?function(r,o,u){const c=r.value.clone(),p=CN(r.fieldTransforms,o,u.transformResults);c.setAll(p),o.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof oc?function(r,o,u){if(!t0(r.precondition,o))return void o.convertToUnknownDocument(u.version);const c=CN(r.fieldTransforms,o,u.transformResults),p=o.data;p.setAll(_D(r)),p.setAll(c),o.convertToFoundDocument(u.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function n0(n,e,t){var o;n instanceof Qo?function(r,o,u){if(!t0(r.precondition,o))return;const c=r.value.clone(),p=yD(r.fieldTransforms,u,o);c.setAll(p),o.convertToFoundDocument(em(o),c).setHasLocalMutations()}(n,e,t):n instanceof oc?function(r,o,u){if(!t0(r.precondition,o))return;const c=yD(r.fieldTransforms,u,o),p=o.data;p.setAll(_D(r)),p.setAll(c),o.convertToFoundDocument(em(o),p).setHasLocalMutations()}(n,e,t):t0(n.precondition,o=e)&&o.convertToNoDocument(Ct.min())}function bN(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=Gf(r.transform,o||null);null!=u&&(null==t&&(t=ji.empty()),t.set(r.field,u))}return t||null}function mD(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&kd(t,r,(o,u)=>function(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof $d&&r instanceof $d||t instanceof Hd&&r instanceof Hd?kd(t.elements,r.elements,Ko):t instanceof Wf&&r instanceof Wf?Ko(t.k,r.k):t instanceof qf&&r instanceof qf);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function em(n){return n.isFoundDocument()?n.version:Ct.min()}class Qo extends $y{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class oc extends $y{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}}function _D(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function CN(n,e,t){const r=new Map;Nt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],c=u.transform,p=e.data.field(u.field);r.set(u.field,jy(c,p,t[o]))}return r}function yD(n,e,t){const r=new Map;for(const o of n){const u=o.transform,c=t.data.field(o.field);r.set(o.field,By(u,c,e))}return r}class ac extends $y{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class r0 extends $y{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class IN{constructor(e){this.count=e}}var br,an;function Hy(n){switch(n){default:return it();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0}}function s0(n){if(void 0===n)return Pr("GRPC error has no .code"),ge.UNKNOWN;switch(n){case br.OK:return ge.OK;case br.CANCELLED:return ge.CANCELLED;case br.UNKNOWN:return ge.UNKNOWN;case br.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case br.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case br.INTERNAL:return ge.INTERNAL;case br.UNAVAILABLE:return ge.UNAVAILABLE;case br.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case br.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case br.NOT_FOUND:return ge.NOT_FOUND;case br.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case br.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case br.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case br.ABORTED:return ge.ABORTED;case br.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case br.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case br.DATA_LOSS:return ge.DATA_LOSS;default:return it()}}(an=br||(br={}))[an.OK=0]="OK",an[an.CANCELLED=1]="CANCELLED",an[an.UNKNOWN=2]="UNKNOWN",an[an.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",an[an.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",an[an.NOT_FOUND=5]="NOT_FOUND",an[an.ALREADY_EXISTS=6]="ALREADY_EXISTS",an[an.PERMISSION_DENIED=7]="PERMISSION_DENIED",an[an.UNAUTHENTICATED=16]="UNAUTHENTICATED",an[an.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",an[an.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",an[an.ABORTED=10]="ABORTED",an[an.OUT_OF_RANGE=11]="OUT_OF_RANGE",an[an.UNIMPLEMENTED=12]="UNIMPLEMENTED",an[an.INTERNAL=13]="INTERNAL",an[an.UNAVAILABLE=14]="UNAVAILABLE",an[an.DATA_LOSS=15]="DATA_LOSS";class Ku{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Pd(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return uN(this.inner)}size(){return this.innerSize}}const TN=new mr(Ze.comparator);function po(){return TN}const vD=new mr(Ze.comparator);function o0(...n){let e=vD;for(const t of n)e=e.insert(t.key,t);return e}function Zf(){return new Ku(n=>n.toString(),(n,e)=>n.isEqual(e))}const Gy=new mr(Ze.comparator),qy=new Bn(Ze.comparator);function xn(...n){let e=qy;for(const t of n)e=e.add(t);return e}const tm=new Bn(Bt);function pn(){return tm}class go{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Qa.createSynthesizedTargetChangeForCurrentChange(e,t)),new go(Ct.min(),r,pn(),po(),xn())}}class Qa{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Qa(Gr.EMPTY_BYTE_STRING,t,xn(),xn(),xn())}}class uc{constructor(e,t,r,o){this.O=e,this.removedTargetIds=t,this.key=r,this.F=o}}class DN{constructor(e,t){this.targetId=e,this.$=t}}class Ot{constructor(e,t,r=Gr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class Fs{constructor(){this.B=0,this.L=AN(),this.U=Gr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=xn(),t=xn(),r=xn();return this.L.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:it()}}),new Qa(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=AN()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class a0{constructor(e){this.nt=e,this.st=new Map,this.it=po(),this.rt=lc(),this.ot=new Bn(Bt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:it()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,o)=>{this.ft(o)&&t(o)})}_t(e){const t=e.targetId,r=e.$.count,o=this.wt(t);if(o){const u=o.target;if(Qw(u))if(0===r){const c=new Ze(u.path);this.ct(t,c,Un.newNoDocument(c,Ct.min()))}else Nt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,c)=>{const p=this.wt(c);if(p){if(u.current&&Qw(p.target)){const y=new Ze(p.target.path);null!==this.it.get(y)||this.It(c,y)||this.ct(c,y,Un.newNoDocument(y,e))}u.j&&(t.set(c,u.H()),u.J())}});let r=xn();this.rt.forEach((u,c)=>{let p=!0;c.forEachWhile(y=>{const b=this.wt(y);return!b||2===b.purpose||(p=!1,!1)}),p&&(r=r.add(u))}),this.it.forEach((u,c)=>c.setReadTime(e));const o=new go(e,t,this.ot,this.it,r);return this.it=po(),this.rt=lc(),this.ot=new Bn(Bt),o}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,t)?o.Y(t,1):o.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Fs,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Bn(Bt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Ue("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new Fs),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function lc(){return new mr(Ze.comparator)}function AN(){return new mr(Ze.comparator)}const ED={asc:"ASCENDING",desc:"DESCENDING"},wD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class F1{constructor(e,t){this.databaseId=e,this.N=t}}function nm(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bD(n,e){return n.N?e.toBase64():e.toUint8Array()}function mo(n,e){return nm(n,e.toTimestamp())}function zt(n){return Nt(!!n),Ct.fromTimestamp(function(e){const t=fo(e);return new wr(t.seconds,t.nanos)}(n))}function Ls(n,e){return(t=n,new fn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function u0(n){const e=fn.fromString(n);return Nt(Pt(e)),e}function rm(n,e){return Ls(n.databaseId,e.path)}function Jo(n,e){const t=u0(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ze(CD(t))}function im(n,e){return Ls(n.databaseId,e)}function Gd(n){const e=u0(n);return 4===e.length?fn.emptyPath():CD(e)}function Yu(n){return new fn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function CD(n){return Nt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function cc(n,e,t){return{name:rm(n,e),fields:t.value.mapValue.fields}}function ID(n,e,t){const r=Jo(n,e.name),o=zt(e.updateTime),u=new ji({mapValue:{fields:e.fields}}),c=Un.newFoundDocument(r,o,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function Qu(n,e){let t;if(e instanceof Qo)t={update:cc(n,e.key,e.value)};else if(e instanceof ac)t={delete:rm(n,e.key)};else if(e instanceof oc)t={update:cc(n,e.key,e.data),updateMask:V1(e.fieldMask)};else{if(!(e instanceof r0))return it();t={verify:rm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const c=u.transform;if(c instanceof qf)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof $d)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Hd)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Wf)return{fieldPath:u.field.canonicalString(),increment:c.k};throw it()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:mo(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:it()),t;var o}function sm(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Fr.updateTime(zt(o.updateTime)):void 0!==o.exists?Fr.exists(o.exists):Fr.none():Fr.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,c){let p=null;"setToServerValue"in c?(Nt("REQUEST_TIME"===c.setToServerValue),p=new qf):"appendMissingElements"in c?p=new $d(c.appendMissingElements.values||[]):"removeAllFromArray"in c?p=new Hd(c.removeAllFromArray.values||[]):"increment"in c?p=new Wf(u,c.increment):it();const y=Or.fromServerFormat(c.fieldPath);return new Jg(y,p)}(n,o)):[];var o;if(e.update){const o=Jo(n,e.update.name),u=new ji({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new qu((e.updateMask.fieldPaths||[]).map(b=>Or.fromServerFormat(b)));return new oc(o,u,c,t,r)}return new Qo(o,u,t,r)}if(e.delete){const o=Jo(n,e.delete);return new ac(o,t)}if(e.verify){const o=Jo(n,e.verify);return new r0(o,t)}return it()}function qd(n,e){return{documents:[im(n,e.path)]}}function AD(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=im(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=im(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(y){if(0===y.length)return;const b=y.map(D=>function(S){if("=="===S.op){if(YT(S.value))return{unaryFilter:{field:zf(S.field),op:"IS_NAN"}};if(Ny(S.value))return{unaryFilter:{field:zf(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(YT(S.value))return{unaryFilter:{field:zf(S.field),op:"IS_NOT_NAN"}};if(Ny(S.value))return{unaryFilter:{field:zf(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zf(S.field),op:Wy(S.op),value:S.value}}}(D));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(y){if(0!==y.length)return y.map(b=>{return{field:zf((D=b).field),direction:xD(D.dir)};var D})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(b=e.limit,n.N||Ug(b)?b:{value:b});var b,p,y;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(p=e.startAt).inclusive,values:p.position}),e.endAt&&(t.structuredQuery.endAt={before:!(y=e.endAt).inclusive,values:y.position}),t}function om(n){let e=Gd(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Nt(1===r);const D=t.from[0];D.allDescendants?o=D.collectionId:e=e.child(D.collectionId)}let u=[];t.where&&(u=c0(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(D=>{return new Zu(dc((S=D).field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let p=null;t.limit&&(p=function(D){let S;return S="object"==typeof D?D.value:D,Ug(S)?null:S}(t.limit));let y=null;var D;t.startAt&&(y=new jd((D=t.startAt).values||[],!!D.before));let b=null;return t.endAt&&(b=function(D){return new jd(D.values||[],!D.before)}(t.endAt)),uD(e,o,c,u,p,"F",y,b)}function c0(n){return n?void 0!==n.unaryFilter?[L1(n)]:void 0!==n.fieldFilter?[d0(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>c0(e)).reduce((e,t)=>e.concat(t)):it():[]}function xD(n){return ED[n]}function Wy(n){return wD[n]}function zf(n){return{fieldPath:n.canonicalString()}}function dc(n){return Or.fromServerFormat(n.fieldPath)}function d0(n){return qr.create(dc(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return it()}}(n.fieldFilter.op),n.fieldFilter.value)}function L1(n){switch(n.unaryFilter.op){case"IS_NAN":const e=dc(n.unaryFilter.field);return qr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=dc(n.unaryFilter.field);return qr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=dc(n.unaryFilter.field);return qr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=dc(n.unaryFilter.field);return qr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return it()}}function V1(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Pt(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function _s(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=RD(e)),e=am(n.get(t),e);return RD(e)}function am(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function RD(n){return n+"\x01\x01"}function Ja(n){const e=n.length;if(Nt(e>=2),2===e)return Nt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),fn.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&it(),n.charAt(c+1)){case"\x01":const p=n.substring(u,c);let y;0===o.length?y=p:(o+=p,y=o,o=""),r.push(y);break;case"\x10":o+=n.substring(u,c),o+="\0";break;case"\x11":o+=n.substring(u,c+1);break;default:it()}u=c+2}return new fn(r)}const ND=["userId","batchId"];function h0(n,e){return[n,_s(e)]}function SN(n,e,t){return[n,_s(e),t]}const xN={},$i=["prefixPath","collectionGroup","readTime","documentId"],RN=["prefixPath","collectionGroup","documentId"],NN=["collectionGroup","readTime","prefixPath","documentId"],f0=["canonicalId","targetId"],MN=["targetId","path"],kN=["path","targetId"],PN=["collectionId","parent"],ON=["indexId","uid"],FN=["uid","sequenceNumber"],LN=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],p0=["indexId","uid","orderedDocumentKey"],VN=["userId","collectionPath","documentId"],UN=["userId","collectionPath","largestBatchId"],MD=["userId","collectionGroup","largestBatchId"],Zy=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],BN=[...Zy,"documentOverlays"],jN=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],$N=[...jN,"indexConfiguration","indexState","indexEntries"],kD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&it(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new me((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof me?t:me.resolve(t)}catch(t){return me.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):me.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):me.reject(t)}static resolve(e){return new me((t,r)=>{t(e)})}static reject(e){return new me((t,r)=>{r(e)})}static waitFor(e){return new me((t,r)=>{let o=0,u=0,c=!1;e.forEach(p=>{++o,p.next(()=>{++u,c&&u===o&&t()},y=>r(y))}),c=!0,u===o&&t()})}static or(e){let t=me.resolve(!1);for(const r of e)t=t.next(o=>o?me.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}}class zy{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new ui,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new lm(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const o=Ky(r.target.error);this.At.reject(new lm(e,o))}}static open(e,t,r,o){try{return new zy(t,e.transaction(o,r))}catch(u){throw new lm(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Ue("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new OD(t)}}class Xo{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===Xo.Vt((0,F.z$)())&&Pr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ue("SimpleDb","Removing database:",e),ea(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,F.hl)())return!1;if(Xo.St())return!0;const e=(0,F.z$)(),t=Xo.Vt(e),r=0<t&&t<10,o=Xo.Dt(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,be.Z)(function*(){return t.db||(Ue("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{o(new lm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const p=c.target.error;o("VersionError"===p.name?new Re(ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new Re(ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new lm(e,p))},u.onupgradeneeded=c=>{Ue("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.Pt.kt(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{Ue("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,be.Z)(function*(){const c="readonly"===t;let p=0;for(;;){++p;try{u.db=yield u.Nt(e);const y=zy.open(u.db,e,c?"readonly":"readwrite",r),b=o(y).next(D=>(y.bt(),D)).catch(D=>(y.abort(D),me.reject(D))).toPromise();return b.catch(()=>{}),yield y.Rt,b}catch(y){const b="FirebaseError"!==y.name&&p<3;if(Ue("SimpleDb","Transaction failed with error:",y.message,"Retrying:",b),u.close(),!b)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class um{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return ea(this.Ft.delete())}}class lm extends Re{constructor(e,t){super(ge.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Wd(n){return"IndexedDbTransactionError"===n.name}class OD{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ue("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ue("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ea(r)}add(e){return Ue("SimpleDb","ADD",this.store.name,e,e),ea(this.store.add(e))}get(e){return ea(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ue("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ue("SimpleDb","DELETE",this.store.name,e),ea(this.store.delete(e))}count(){return Ue("SimpleDb","COUNT",this.store.name),ea(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.Kt(o,(c,p)=>{u.push(p)}).next(()=>u)}{const o=this.store.getAll(r.range);return new me((u,c)=>{o.onerror=p=>{c(p.target.error)},o.onsuccess=p=>{u(p.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new me((o,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{o(c.target.result)}})}Qt(e,t){Ue("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const o=this.cursor(r);return this.Kt(o,(u,c,p)=>p.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Kt(o,t)}zt(e){const t=this.cursor({});return new me((r,o)=>{t.onerror=u=>{const c=Ky(u.target.error);o(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(p=>{p?c.continue():r()}):r()}})}Kt(e,t){const r=[];return new me((o,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const p=c.target.result;if(!p)return void o();const y=new um(p),b=t(p.primaryKey,p.value,y);if(b instanceof me){const D=b.catch(S=>(y.done(),me.reject(S)));r.push(D)}y.isDone?o():null===y.Lt?p.continue():p.continue(y.Lt)}}).next(()=>me.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ea(n){return new me((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=Ky(r.target.error);t(o)}})}let HN=!1;function Ky(n){const e=Xo.Vt((0,F.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return HN||(HN=!0,setTimeout(()=>{throw r},0)),r}}return n}class FD extends PD{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function li(n,e){const t=Ye(n);return Xo.xt(t.Ht,e)}class g0{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&Xg(u,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&n0(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&n0(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(Ct.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),xn())}isEqual(e){return this.batchId===e.batchId&&kd(this.mutations,e.mutations,(t,r)=>mD(t,r))&&kd(this.baseMutations,e.baseMutations,(t,r)=>mD(t,r))}}class m0{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Nt(e.mutations.length===r.length);let o=Gy;const u=e.mutations;for(let c=0;c<u.length;c++)o=o.insert(u[c].key,r[c].version);return new m0(e,t,r,o)}}class _0{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ju{constructor(e,t,r,o,u=Ct.min(),c=Ct.min(),p=Gr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=p}withSequenceNumber(e){return new Ju(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ju(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ju(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class LD{constructor(e){this.Jt=e}}function qN(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:y0(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:rm(o=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:nm(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Kf(e.version)};else{if(!e.isUnknownDocument())return it();r.unknownDocument={path:t.path.toArray(),version:Kf(e.version)}}var o,u;return r}function y0(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Kf(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Xu(n){const e=new wr(n.seconds,n.nanoseconds);return Ct.fromTimestamp(e)}function Yf(n,e){const t=(e.baseMutations||[]).map(u=>sm(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>sm(n.Jt,u)),o=wr.fromMillis(e.localWriteTimeMs);return new g0(e.batchId,o,t,r)}function cm(n){const e=Xu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Xu(n.lastLimboFreeSnapshotVersion):Ct.min();let r;var o;return void 0!==n.query.documents?(Nt(1===(o=n.query).documents.length),r=Yo($f(Gd(o.documents[0])))):r=Yo(om(n.query)),new Ju(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Gr.fromBase64String(n.resumeToken))}function VD(n,e){const t=Kf(e.snapshotVersion),r=Kf(e.lastLimboFreeSnapshotVersion);let o;o=Qw(e.target)?qd(n.Jt,e.target):AD(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:sc(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function v0(n){const e=om({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?lD(e,e.limit,"L"):e}function E0(n,e){return new _0(e.largestBatchId,sm(n.Jt,e.overlayMutation))}function UD(n,e){const t=e.path.lastSegment();return[n,_s(e.path.popLast()),t]}class BD{getBundleMetadata(e,t){return Yy(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Xu(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return Yy(e).put({bundleId:(r=t).id,createTime:Kf(zt(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return jD(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:v0(o.bundledQuery),readTime:Xu(o.readTime)};var o})}saveNamedQuery(e,t){return jD(e).put({name:(r=t).name,readTime:Kf(zt(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Yy(n){return li(n,"bundles")}function jD(n){return li(n,"namedQueries")}class hc{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new hc(e,t.uid||"")}getOverlay(e,t){return Lr(e).get(UD(this.userId,t)).next(r=>r?E0(this.M,r):null)}saveOverlays(e,t,r){const o=[];return r.forEach((u,c)=>{const p=new _0(t,c);o.push(this.Xt(e,p))}),me.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(c=>o.add(_s(c.getCollectionPath())));const u=[];return o.forEach(c=>{const p=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(Lr(e).Qt("collectionPathOverlayIndex",p))}),me.waitFor(u)}getOverlaysForCollection(e,t,r){const o=Zf(),u=_s(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Lr(e).qt("collectionPathOverlayIndex",c).next(p=>{for(const y of p){const b=E0(this.M,y);o.set(b.getKey(),b)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=Zf();let c;const p=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Lr(e).Wt({index:"collectionGroupOverlayIndex",range:p},(y,b,D)=>{const S=E0(this.M,b);u.size()<o||S.largestBatchId===c?(u.set(S.getKey(),S),c=S.largestBatchId):D.done()}).next(()=>u)}Xt(e,t){return Lr(e).put(function(r,o,u){const[c,p,y]=UD(o,u.mutation.key);return{userId:o,collectionPath:p,documentId:y,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Qu(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function Lr(n){return li(n,"documentOverlays")}class fc{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(gr(e.integerValue));else if("doubleValue"in e){const r=gr(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),za(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Od(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?QT(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):it()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const o of Object.keys(r))this.re(o,t),this.te(r[o],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const o of r)this.te(o,t)}ae(e,t){this.ne(t,37),Ze.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function ta(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Qy(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=ta(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}fc.fe=new fc;class WN{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const o=t.codePointAt(0);this._e(240|o>>>18),this._e(128|63&o>>>12),this._e(128|63&o>>>6),this._e(128|63&o)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const o=t.codePointAt(0);this.ge(240|o>>>18),this.ge(128|63&o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o)}}this.ye()}Te(e){const t=this.Ee(e),r=Qy(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Re(e){const t=this.Ee(e),r=Qy(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class $D{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class HD{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Qf{constructor(){this.De=new WN,this.Ce=new $D(this.De),this.xe=new HD(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Zd{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Zd(this.indexId,this.documentKey,this.arrayValue,r)}}function zd(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=GD(n.arrayValue,e.arrayValue),0!==t?t:(t=GD(n.directionalValue,e.directionalValue),0!==t?t:Ze.comparator(n.documentKey,e.documentKey)))}function GD(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class qD{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=Yw(e);if(void 0!==t&&!this.Be(t))return!1;const r=Ud(e);let o=0,u=0;for(;o<r.length&&this.Be(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Fe){const c=r[o];if(!this.Le(this.Fe,c)||!this.Ue(this.Me[u++],c))return!1;++o}for(;o<r.length;++o){const c=r[o];if(u>=this.Me.length||!this.Ue(this.Me[u++],c))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class ZN{constructor(){this.qe=new WD}addToCollectionParentIndex(e,t){return this.qe.add(t),me.resolve()}getCollectionParents(e,t){return me.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return me.resolve()}deleteFieldIndex(e,t){return me.resolve()}getDocumentsMatchingTarget(e,t){return me.resolve(null)}getIndexType(e,t){return me.resolve(0)}getFieldIndexes(e,t){return me.resolve([])}getNextCollectionGroupToUpdate(e){return me.resolve(null)}getMinOffset(e,t){return me.resolve(Os.min())}updateCollectionGroup(e,t,r){return me.resolve()}updateIndexEntries(e,t){return me.resolve()}}class WD{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Bn(fn.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Bn(fn.comparator)).toArray()}}const Jy=new Uint8Array(0);class zN{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new WD,this.Ge=new Ku(r=>sc(r),(r,o)=>Bf(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:_s(o)};return Kd(e).put(u)}return me.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[Zw(t),""],!1,!0);return Kd(e).qt(o).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(Ja(c.parent))}return r})}addFieldIndex(e,t){const r=dm(e),o={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var u;return delete o.indexId,r.add(o).next()}deleteFieldIndex(e,t){const r=dm(e),o=ev(e),u=Xy(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Xy(e);let o=!0;const u=new Map;return me.forEach(this.Qe(t),c=>this.je(e,c).next(p=>{o&&(o=!!p),u.set(c,p)})).next(()=>{if(o){let c=xn();const p=[];return me.forEach(u,(y,b)=>{var D;Ue("IndexedDbIndexManager",`Using index ${D=y,`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map(nt=>`${nt.fieldPath}:${nt.kind}`).join(",")}`} to execute ${sc(t)}`);const S=function(nt,st){const jt=Yw(st);if(void 0===jt)return null;for(const on of Py(nt,jt.fieldPath))switch(on.op){case"array-contains-any":return on.value.arrayValue.values||[];case"array-contains":return[on.value]}return null}(b,y),P=function(nt,st){const jt=new Map;for(const on of Ud(st))for(const ci of Py(nt,on.fieldPath))switch(ci.op){case"==":case"in":jt.set(on.fieldPath.canonicalString(),ci.value);break;case"not-in":case"!=":return jt.set(on.fieldPath.canonicalString(),ci.value),Array.from(jt.values())}return null}(b,y),j=function(nt,st){const jt=[];let on=!0;for(const ci of Ud(st)){const pl=0===ci.kind?Bd(nt,ci.fieldPath,nt.startAt):fN(nt,ci.fieldPath,nt.startAt);jt.push(pl.value),on&&(on=pl.inclusive)}return new jd(jt,on)}(b,y),Q=function(nt,st){const jt=[];let on=!0;for(const ci of Ud(st)){const pl=0===ci.kind?fN(nt,ci.fieldPath,nt.endAt):Bd(nt,ci.fieldPath,nt.endAt);jt.push(pl.value),on&&(on=pl.inclusive)}return new jd(jt,on)}(b,y),ye=this.We(y,b,j),xe=this.We(y,b,Q),ct=this.ze(y,b,P),lt=this.He(y.indexId,S,ye,j.inclusive,xe,Q.inclusive,ct);return me.forEach(lt,nt=>r.Gt(nt,t.limit).next(st=>{st.forEach(jt=>{const on=Ze.fromSegments(jt.documentKey);c.has(on)||(c=c.add(on),p.push(on))})}))}).next(()=>p)}return me.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,o,u,c,p){const y=(null!=t?t.length:1)*Math.max(r.length,u.length),b=y/(null!=t?t.length:1),D=[];for(let S=0;S<y;++S){const P=t?this.Je(t[S/b]):Jy,j=this.Ye(e,P,r[S%b],o),Q=this.Xe(e,P,u[S%b],c),ye=p.map(xe=>this.Ye(e,P,xe,!0));D.push(...this.createRange(j,Q,ye))}return D}Ye(e,t,r,o){const u=new Zd(e,Ze.empty(),t,r);return o?u:u.ke()}Xe(e,t,r,o){const u=new Zd(e,Ze.empty(),t,r);return o?u.ke():u}je(e,t){const r=new qD(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let c=null;for(const p of u)r.$e(p)&&(!c||p.fields.length>c.fields.length)&&(c=p);return c})}getIndexType(e,t){let r=2;return me.forEach(this.Qe(t),o=>this.je(e,o).next(u=>{u?0!==r&&u.fields.length<function(c){let p=new Bn(Or.comparator),y=!1;for(const b of c.filters){const D=b;D.field.isKeyField()||("array-contains"===D.op||"array-contains-any"===D.op?y=!0:p=p.add(D.field))}for(const b of c.orderBy)b.field.isKeyField()||(p=p.add(b.field));return p.size+(y?1:0)}(o)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new Qf;for(const o of Ud(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const c=r.Ne(o.kind);fc.fe.Zt(u,c)}return r.Se()}Je(e){const t=new Qf;return fc.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new Qf;return fc.fe.Zt(Vd(this.databaseId,t),r.Ne(function(o){const u=Ud(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let o=[];o.push(new Qf);let u=0;for(const c of Ud(e)){const p=r[u++];for(const y of o)if(this.en(t,c.fieldPath)&&$g(p))o=this.nn(o,c,p);else{const b=y.Ne(c.kind);fc.fe.Zt(p,b)}}return this.sn(o)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const o=[...e],u=[];for(const c of r.arrayValue.values||[])for(const p of o){const y=new Qf;y.seed(p.Se()),fc.fe.Zt(c,y.Ne(t.kind)),u.push(y)}return u}en(e,t){return!!e.filters.find(r=>r instanceof qr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=dm(e),o=ev(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const c=[];return me.forEach(u,p=>o.get([p.indexId,this.uid]).next(y=>{c.push(function(b,D){const S=D?new Zg(D.sequenceNumber,new Os(Xu(D.readTime),new Ze(Ja(D.documentKey)),D.largestBatchId)):Zg.empty(),P=b.fields.map(([j,Q])=>new Wg(Or.fromServerFormat(j),Q));return new qg(b.indexId,b.collectionGroup,P,S)}(p,y))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Bt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=dm(e),u=ev(e);return this.rn(e).next(c=>o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(p=>me.forEach(p,y=>{return u.put({indexId:y.indexId,uid:this.user.uid||"",sequenceNumber:c,readTime:Kf((P=r).readTime),documentKey:_s(P.documentKey.path),largestBatchId:P.largestBatchId});var P})))}updateIndexEntries(e,t){const r=new Map;return me.forEach(t,(o,u)=>{const c=r.get(o.collectionGroup);return(c?me.resolve(c):this.getFieldIndexes(e,o.collectionGroup)).next(p=>(r.set(o.collectionGroup,p),me.forEach(p,y=>this.on(e,o,y).next(b=>{const D=this.un(u,y);return b.isEqual(D)?me.resolve():this.an(e,u,y,b,D)}))))})}cn(e,t,r,o){return Xy(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,o){return Xy(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const o=Xy(e);let u=new Bn(zd);return o.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(c,p)=>{u=u.add(new Zd(r.indexId,t,p.arrayValue,p.directionalValue))}).next(()=>u)}un(e,t){let r=new Bn(zd);const o=this.Ze(t,e);if(null==o)return r;const u=Yw(t);if(null!=u){const c=e.data.field(u.fieldPath);if($g(c))for(const p of c.arrayValue.values||[])r=r.add(new Zd(t.indexId,e.key,this.Je(p),o))}else r=r.add(new Zd(t.indexId,e.key,Jy,o));return r}an(e,t,r,o,u){Ue("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(p,y,b,D,S){const P=p.getIterator(),j=y.getIterator();let Q=Uf(P),ye=Uf(j);for(;Q||ye;){let xe=!1,ct=!1;if(Q&&ye){const lt=b(Q,ye);lt<0?ct=!0:lt>0&&(xe=!0)}else null!=Q?ct=!0:xe=!0;xe?(D(ye),ye=Uf(j)):ct?(S(Q),Q=Uf(P)):(Q=Uf(P),ye=Uf(j))}}(o,u,zd,p=>{c.push(this.cn(e,t,r,p))},p=>{c.push(this.hn(e,t,r,p))}),me.waitFor(c)}rn(e){let t=1;return ev(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,p)=>zd(c,p)).filter((c,p,y)=>!p||0!==zd(c,y[p-1]));const o=[];o.push(e);for(const c of r){const p=zd(c,e),y=zd(c,t);if(0===p)o[0]=e.ke();else if(p>0&&y<0)o.push(c),o.push(c.ke());else if(y>0)break}o.push(t);const u=[];for(let c=0;c<o.length;c+=2)u.push(IDBKeyRange.bound([o[c].indexId,this.uid,o[c].arrayValue,o[c].directionalValue,Jy,[]],[o[c+1].indexId,this.uid,o[c+1].arrayValue,o[c+1].directionalValue,Jy,[]]));return u}getMinOffset(e,t){let r;return me.forEach(this.Qe(t),o=>this.je(e,o).next(u=>{u?(!r||My(u.indexState.offset,r)<0)&&(r=u.indexState.offset):r=Os.min()})).next(()=>r)}}function Kd(n){return li(n,"collectionParents")}function Xy(n){return li(n,"indexEntries")}function dm(n){return li(n,"indexConfiguration")}function ev(n){return li(n,"indexState")}const KN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class is{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new is(e,is.DEFAULT_COLLECTION_PERCENTILE,is.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function ZD(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let p=0;const y=r.Wt({range:c},(D,S,P)=>(p++,P.delete()));u.push(y.next(()=>{Nt(1===p)}));const b=[];for(const D of t.mutations){const S=SN(e,D.key.path,t.batchId);u.push(o.delete(S)),b.push(D.key)}return me.waitFor(u).next(()=>b)}function Jf(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw it();e=n.noDocument}return JSON.stringify(e).length}is.DEFAULT_COLLECTION_PERCENTILE=10,is.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,is.DEFAULT=new is(41943040,is.DEFAULT_COLLECTION_PERCENTILE,is.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),is.DISABLED=new is(-1,0,0);class w0{constructor(e,t,r,o){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=o,this.ln={}}static Yt(e,t,r,o){Nt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new w0(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return pc(e).Wt({index:"userMutationsIndex",range:r},(o,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=Xf(e),c=pc(e);return c.add({}).next(p=>{Nt("number"==typeof p);const y=new g0(p,t,r,o),b=function(P,j,Q){const ye=Q.baseMutations.map(ct=>Qu(P.Jt,ct)),xe=Q.mutations.map(ct=>Qu(P.Jt,ct));return{userId:j,batchId:Q.batchId,localWriteTimeMs:Q.localWriteTime.toMillis(),baseMutations:ye,mutations:xe}}(this.M,this.userId,y),D=[];let S=new Bn((P,j)=>Bt(P.canonicalString(),j.canonicalString()));for(const P of o){const j=SN(this.userId,P.key.path,p);S=S.add(P.key.path.popLast()),D.push(c.put(b)),D.push(u.put(j,xN))}return S.forEach(P=>{D.push(this.indexManager.addToCollectionParentIndex(e,P))}),e.addOnCommittedListener(()=>{this.ln[p]=y.keys()}),me.waitFor(D).next(()=>y)})}lookupMutationBatch(e,t){return pc(e).get(t).next(r=>r?(Nt(r.userId===this.userId),Yf(this.M,r)):null)}fn(e,t){return this.ln[t]?me.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.ln[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return pc(e).Wt({index:"userMutationsIndex",range:o},(c,p,y)=>{p.userId===this.userId&&(Nt(p.batchId>=r),u=Yf(this.M,p)),y.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return pc(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(o,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return pc(e).qt("userMutationsIndex",t).next(r=>r.map(o=>Yf(this.M,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=h0(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Xf(e).Wt({range:o},(c,p,y)=>{const[b,D,S]=c,P=Ja(D);if(b===this.userId&&t.path.isEqual(P))return pc(e).get(S).next(j=>{if(!j)throw it();Nt(j.userId===this.userId),u.push(Yf(this.M,j))});y.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Bn(Bt);const o=[];return t.forEach(u=>{const c=h0(this.userId,u.path),p=IDBKeyRange.lowerBound(c),y=Xf(e).Wt({range:p},(b,D,S)=>{const[P,j,Q]=b,ye=Ja(j);P===this.userId&&u.path.isEqual(ye)?r=r.add(Q):S.done()});o.push(y)}),me.waitFor(o).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=h0(this.userId,r),c=IDBKeyRange.lowerBound(u);let p=new Bn(Bt);return Xf(e).Wt({range:c},(y,b,D)=>{const[S,P,j]=y,Q=Ja(P);S===this.userId&&r.isPrefixOf(Q)?Q.length===o&&(p=p.add(j)):D.done()}).next(()=>this.dn(e,p))}dn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(pc(e).get(u).next(c=>{if(null===c)throw it();Nt(c.userId===this.userId),r.push(Yf(this.M,c))}))}),me.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return ZD(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),me.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return me.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Xf(e).Wt({range:r},(u,c,p)=>{if(u[0]===this.userId){const y=Ja(u[1]);o.push(y)}else p.done()}).next(()=>{Nt(0===o.length)})})}containsKey(e,t){return zD(e,this.userId,t)}wn(e){return KD(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function zD(n,e,t){const r=h0(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return Xf(n).Wt({range:u,jt:!0},(p,y,b)=>{const[D,S,P]=p;D===e&&S===o&&(c=!0),b.done()}).next(()=>c)}function pc(n){return li(n,"mutations")}function Xf(n){return li(n,"documentMutations")}function KD(n){return li(n,"mutationQueues")}class Yd{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new Yd(0)}static yn(){return new Yd(-1)}}class YN{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new Yd(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>Ct.fromTimestamp(new wr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.In(e,o)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ep(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(Nt(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return ep(e).Wt((c,p)=>{const y=cm(p);y.sequenceNumber<=t&&null===r.get(y.targetId)&&(o++,u.push(this.removeTargetData(e,y)))}).next(()=>me.waitFor(u)).next(()=>o)}forEachTarget(e,t){return ep(e).Wt((r,o)=>{const u=cm(o);t(u)})}pn(e){return YD(e).get("targetGlobalKey").next(t=>(Nt(null!==t),t))}In(e,t){return YD(e).put("targetGlobalKey",t)}Tn(e,t){return ep(e).put(VD(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=sc(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return ep(e).Wt({range:o,index:"queryTargetsIndex"},(c,p,y)=>{const b=cm(p);Bf(t,b.target)&&(u=b,y.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=gc(e);return t.forEach(c=>{const p=_s(c.path);o.push(u.put({targetId:r,path:p})),o.push(this.referenceDelegate.addReference(e,r,c))}),me.waitFor(o)}removeMatchingKeys(e,t,r){const o=gc(e);return me.forEach(t,u=>{const c=_s(u.path);return me.waitFor([o.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=gc(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=gc(e);let u=xn();return o.Wt({range:r,jt:!0},(c,p,y)=>{const b=Ja(c[1]),D=new Ze(b);u=u.add(D)}).next(()=>u)}containsKey(e,t){const r=_s(t.path),o=IDBKeyRange.bound([r],[Zw(r)],!1,!0);let u=0;return gc(e).Wt({index:"documentTargetsIndex",jt:!0,range:o},([c,p],y,b)=>{0!==c&&(u++,b.done())}).next(()=>u>0)}Et(e,t){return ep(e).get(t).next(r=>r?cm(r):null)}}function ep(n){return li(n,"targets")}function YD(n){return li(n,"targetGlobal")}function gc(n){return li(n,"targetDocuments")}function na(n){return tv.apply(this,arguments)}function tv(){return(tv=(0,be.Z)(function*(n){if(n.code!==ge.FAILED_PRECONDITION||n.message!==kD)throw n;Ue("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function b0([n,e],[t,r]){const o=Bt(n,t);return 0===o?Bt(e,r):o}class QD{constructor(e){this.An=e,this.buffer=new Bn(b0),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();b0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class JD{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Ue("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,be.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){Wd(o)?Ue("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield na(o)}yield t.Sn(e)}))}}class XD{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return me.resolve(Ps.A);const r=new QD(t);return this.Dn.forEachTarget(e,o=>r.Pn(o.sequenceNumber)).next(()=>this.Dn.xn(e,o=>r.Pn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(KN)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),KN):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,o,u,c,p,y,b;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,c=Date.now(),this.nthSequenceNumber(e,o))).next(S=>(r=S,p=Date.now(),this.removeTargets(e,r,t))).next(S=>(u=S,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(b=Date.now(),FT()<=ao.in.DEBUG&&Ue("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-D}ms\n\tDetermined least recently used ${o} in `+(p-c)+`ms\n\tRemoved ${u} targets in `+(y-p)+`ms\n\tRemoved ${S} documents in `+(b-y)+`ms\nTotal Duration: ${b-D}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:S})))}}class QN{constructor(e,t){this.db=e,this.garbageCollector=new XD(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,o)=>t(o))}addReference(e,t,r){return nv(e,r)}removeReference(e,t,r){return nv(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return nv(e,t)}On(e,t){return function(r,o){let u=!1;return KD(r).zt(c=>zD(r,c,o).next(p=>(p&&(u=!0),me.resolve(!p)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Mn(e,(c,p)=>{if(p<=t){const y=this.On(e,c).next(b=>{if(!b)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Ct.min()),gc(e).delete([0,_s(c.path)])))});o.push(y)}}).next(()=>me.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return nv(e,t)}Mn(e,t){const r=gc(e);let o,u=Ps.A;return r.Wt({index:"documentTargetsIndex"},([c,p],{path:y,sequenceNumber:b})=>{0===c?(u!==Ps.A&&t(new Ze(Ja(o)),u),u=b,o=y):u=Ps.A}).next(()=>{u!==Ps.A&&t(new Ze(Ja(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function nv(n,e){return gc(n).put((r=n.currentSequenceNumber,{targetId:0,path:_s(e.path),sequenceNumber:r}));var r}class eA{constructor(){this.changes=new Ku(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Un.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?me.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class JN{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Qd(e).put(r)}removeEntry(e,t,r){return Qd(e).delete(function(o,u){const c=o.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],y0(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=Un.newInvalidDocument(t);return Qd(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(el(t))},(o,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:Un.newInvalidDocument(t)};return Qd(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(el(t))},(o,u)=>{r={document:this.$n(t,u),size:Jf(u)}}).next(()=>r)}getEntries(e,t){let r=po();return this.Ln(e,t,(o,u)=>{const c=this.$n(o,u);r=r.insert(o,c)}).next(()=>r)}Un(e,t){let r=po(),o=new mr(Ze.comparator);return this.Ln(e,t,(u,c)=>{const p=this.$n(u,c);r=r.insert(u,p),o=o.insert(u,Jf(c))}).next(()=>({documents:r,qn:o}))}Ln(e,t,r){if(t.isEmpty())return me.resolve();let o=new Bn(nA);t.forEach(y=>o=o.add(y));const u=IDBKeyRange.bound(el(o.first()),el(o.last())),c=o.getIterator();let p=c.getNext();return Qd(e).Wt({index:"documentKeyIndex",range:u},(y,b,D)=>{const S=Ze.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;p&&nA(p,S)<0;)r(p,null),p=c.getNext();p&&p.isEqual(S)&&(r(p,b),p=c.hasNext()?c.getNext():null),p?D.Ut(el(p)):D.done()}).next(()=>{for(;p;)r(p,null),p=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),y0(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Qd(e).qt(IDBKeyRange.bound(o,u,!0)).next(c=>{let p=po();for(const y of c){const b=this.$n(Ze.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);p=p.insert(b.key,b)}return p})}getAllFromCollectionGroup(e,t,r,o){let u=po();const c=tp(t,r),p=tp(t,Os.max());return Qd(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,p,!0)},(y,b,D)=>{const S=this.$n(Ze.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(S.key,S),u.size===o&&D.done()}).next(()=>u)}newChangeBuffer(e){return new XN(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return tA(e).get("remoteDocumentGlobalKey").next(t=>(Nt(!!t),t))}Fn(e,t){return tA(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function(n,e){let t;if(e.document)t=ID(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ze.fromSegments(e.noDocument.path),o=Xu(e.noDocument.readTime);t=Un.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return it();{const r=Ze.fromSegments(e.unknownDocument.path),o=Xu(e.unknownDocument.version);t=Un.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new wr(r[0],r[1]);return Ct.fromTimestamp(o)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(Ct.min()))return r}return Un.newInvalidDocument(e)}}class XN extends eA{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new Ku(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new Bn((u,c)=>Bt(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const p=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,p.readTime)),c.isValidDocument()){const y=qN(this.Kn.M,c);o=o.add(u.path.popLast()),r+=Jf(y)-p.size,t.push(this.Kn.addEntry(e,u,y))}else if(r-=p.size,this.trackRemovals){const y=qN(this.Kn.M,c.convertToNoDocument(Ct.min()));t.push(this.Kn.addEntry(e,u,y))}}),o.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),me.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:o})=>(o.forEach((u,c)=>{this.Gn.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function tA(n){return li(n,"remoteDocumentGlobal")}function Qd(n){return li(n,"remoteDocumentsV14")}function el(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function tp(n,e){const t=e.documentKey.path.toArray();return[n,y0(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function nA(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Bt(t[u],r[u]),o)return o;return o=Bt(t.length,r.length),o||(o=Bt(t[t.length-2],r[r.length-2]),o||Bt(t[t.length-1],r[r.length-1]))}class C0{constructor(e){this.M=e}kt(e,t,r,o){const u=new zy("createOrUpgrade",t);var p;r<1&&o>=1&&(e.createObjectStore("owner"),(p=e).createObjectStore("mutationQueues",{keyPath:"userId"}),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ND,{unique:!0}),p.createObjectStore("documentMutations"),ra(e),function(p){p.createObjectStore("remoteDocuments")}(e));let c=me.resolve();return r<3&&o>=3&&(0!==r&&(function(p){p.deleteObjectStore("targetDocuments"),p.deleteObjectStore("targets"),p.deleteObjectStore("targetGlobal")}(e),ra(e)),c=c.next(()=>function(p){const y=p.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ct.min().toTimestamp(),targetCount:0};return y.put("targetGlobalKey",b)}(u))),r<4&&o>=4&&(0!==r&&(c=c.next(()=>function(p,y){return y.store("mutations").qt().next(b=>{p.deleteObjectStore("mutations"),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ND,{unique:!0});const D=y.store("mutations"),S=b.map(P=>D.put(P));return me.waitFor(S)})}(e,u))),c=c.next(()=>{!function(p){p.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(c=c.next(()=>this.Qn(u))),r<6&&o>=6&&(c=c.next(()=>(function(p){p.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&o>=7&&(c=c.next(()=>this.Wn(u))),r<8&&o>=8&&(c=c.next(()=>this.zn(e,u))),r<9&&o>=9&&(c=c.next(()=>{!function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(c=c.next(()=>this.Hn(u))),r<11&&o>=11&&(c=c.next(()=>{(function(p){p.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(p){p.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(c=c.next(()=>{!function(p){const y=p.createObjectStore("documentOverlays",{keyPath:VN});y.createIndex("collectionPathOverlayIndex",UN,{unique:!1}),y.createIndex("collectionGroupOverlayIndex",MD,{unique:!1})}(e)})),r<13&&o>=13&&(c=c.next(()=>function(p){const y=p.createObjectStore("remoteDocumentsV14",{keyPath:$i});y.createIndex("documentKeyIndex",RN),y.createIndex("collectionGroupIndex",NN)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(c=c.next(()=>{!function(p){p.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),p.createObjectStore("indexState",{keyPath:ON}).createIndex("sequenceNumberIndex",FN,{unique:!1}),p.createObjectStore("indexEntries",{keyPath:LN}).createIndex("documentKeyIndex",p0,{unique:!1})}(e)})),c}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,o)=>{t+=Jf(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(o=>me.forEach(o,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",c).next(p=>me.forEach(p,y=>{Nt(y.userId===u.userId);const b=Yf(this.M,y);return ZD(e,u.userId,b).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Wt((c,p)=>{const y=new fn(c),b=[0,_s(y)];u.push(t.get(b).next(D=>D?me.resolve():t.put({targetId:0,path:_s(y),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>me.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:PN});const r=t.store("collectionParents"),o=new WD,u=c=>{if(o.add(c)){const p=c.lastSegment(),y=c.popLast();return r.put({collectionId:p,parent:_s(y)})}};return t.store("remoteDocuments").Wt({jt:!0},(c,p)=>{const y=new fn(c);return u(y.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([c,p,y],b)=>{const D=Ja(p);return u(D.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,o)=>{const u=cm(o),c=VD(this.M,u);return t.put(c)})}Jn(e,t){const r=t.store("remoteDocuments"),o=[];return r.Wt((u,c)=>{const p=t.store("remoteDocumentsV14"),y=(b=c,b.document?new Ze(fn.fromString(b.document.name).popFirst(5)):b.noDocument?Ze.fromSegments(b.noDocument.path):b.unknownDocument?Ze.fromSegments(b.unknownDocument.path):it()).path.toArray();var b;const D={prefixPath:y.slice(0,y.length-2),collectionGroup:y[y.length-2],documentId:y[y.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};o.push(p.put(D))}).next(()=>me.waitFor(o))}}function ra(n){n.createObjectStore("targetDocuments",{keyPath:MN}).createIndex("documentTargetsIndex",kN,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",f0,{unique:!0}),n.createObjectStore("targetGlobal")}const I0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class np{constructor(e,t,r,o,u,c,p,y,b,D,S=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=c,this.document=p,this.Xn=b,this.Zn=D,this.ts=S,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=P=>Promise.resolve(),!np.vt())throw new Re(ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new QN(this,o),this.hs=t+"main",this.M=new LD(y),this.ls=new Xo(this.hs,this.ts,new C0(this.M)),this.fs=new YN(this.referenceDelegate,this.M),this.ds=new JN(this.M),this._s=new BD,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===D&&Pr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(ge.FAILED_PRECONDITION,I0);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Ps(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,be.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,be.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,be.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>rv(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(Wd(e))return Ue("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ue("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return hm(e).get("owner").next(t=>me.resolve(this.Ps(t)))}Vs(e){return rv(e).delete(this.clientId)}vs(){var e=this;return(0,be.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=li(r,"clientMetadata");return o.qt().next(u=>{const c=e.Ds(u,18e5),p=u.filter(y=>-1===c.indexOf(y));return me.forEach(p,y=>o.delete(y.clientId)).next(()=>p)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?me.resolve(!0):hm(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new Re(ge.FAILED_PRECONDITION,I0);return!1}}return!(!this.networkEnabled||!this.inForeground)||rv(e).qt().next(r=>void 0===this.Ds(r,5e3).find(o=>{if(this.clientId!==o.clientId){const c=!this.inForeground&&o.inForeground,p=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||c&&p)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ue("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,be.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new FD(t,Ps.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>rv(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return w0.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new zN(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return hc.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Ue("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=14===(c=this.ts)?$N:13===c?jN:12===c?BN:11===c?Zy:void it();var c;let p;return this.ls.runTransaction(e,o,u,y=>(p=new FD(y,this.es?this.es.next():Ps.A),"readwrite-primary"===t?this.Es(p).next(b=>!!b||this.As(p)).next(b=>{if(!b)throw Pr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Re(ge.FAILED_PRECONDITION,kD);return r(p)}).next(b=>this.bs(p).next(()=>b)):this.$s(p).next(()=>r(p)))).then(y=>(p.raiseOnCommittedEvent(),y))}$s(e){return hm(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Re(ge.FAILED_PRECONDITION,I0)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return hm(e).put("owner",t)}static vt(){return Xo.vt()}Rs(e){const t=hm(e);return t.get("owner").next(r=>this.Ps(r)?(Ue("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):me.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(Pr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,F.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Ue("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Pr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){Pr("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function hm(n){return li(n,"owner")}function rv(n){return li(n,"clientMetadata")}function rA(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class T0{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(o=>{for(const u of r)u.applyToLocalView(o);return o})}qs(e,t){e.forEach((r,o)=>{for(const u of t)u.applyToLocalView(o)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return Ze.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.js(e,t.path):Ly(t)?this.Ws(e,t,r):this.zs(e,t,r);var o}js(e,t){return this.Ls(e,new Ze(t)).next(r=>{let o=o0();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Ws(e,t,r){const o=t.collectionGroup;let u=o0();return this.indexManager.getCollectionParents(e,o).next(c=>me.forEach(c,p=>{const y=(b=t,D=p.child(o),new zu(D,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,D;return this.zs(e,y,r).next(b=>{b.forEach((D,S)=>{u=u.insert(D,S)})})}).next(()=>u))}zs(e,t,r){let o;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const c of u)for(const p of c.mutations){const y=p.key;let b=o.get(y);null==b&&(b=Un.newInvalidDocument(y),o=o.insert(y,b)),n0(p,b,c.localWriteTime),b.isFoundDocument()||(o=o.remove(y))}}).next(()=>(o.forEach((u,c)=>{Uy(t,c)||(o=o.remove(u))}),o))}}class fm{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=o}static Ys(e,t){let r=xn(),o=xn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new fm(e,t.fromCache,r,o)}}class D0{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,o){return this.ti(e,t).next(u=>u||this.ei(e,t,o,r)).next(u=>u||this.ni(e,t))}ti(e,t){return me.resolve(null)}ei(e,t,r,o){return function(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||o.isEqual(Ct.min())?this.ni(e,t):this.Zs.Ks(e,r).next(u=>{const c=this.si(t,u);return this.ii(t,c,r,o)?this.ni(e,t):(FT()<=ao.in.DEBUG&&Ue("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Vy(t)),this.ri(e,c,t,tD(o,-1)))})}si(e,t){let r=new Bn(dD(e));return t.forEach((o,u)=>{Uy(e,u)&&(r=r.add(u))}),r}ii(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ni(e,t){return FT()<=ao.in.DEBUG&&Ue("QueryEngine","Using full collection scan to execute query:",Vy(t)),this.Zs.Qs(e,t,Os.min())}ri(e,t,r,o){return this.Zs.Qs(e,r,o).next(u=>(t.forEach(c=>{u=u.insert(c.key,c)}),u))}}class A0{constructor(e,t,r,o){this.persistence=e,this.oi=t,this.M=o,this.ui=new mr(Bt),this.ai=new Ku(u=>sc(u),Bf),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new T0(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function iv(n,e,t,r){return new A0(n,e,t,r)}function iA(n,e){return S0.apply(this,arguments)}function S0(){return(S0=(0,be.Z)(function*(n,e){const t=Ye(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.Bs.getAllMutationBatches(r).next(u=>(o=u,t.li(e),t.Bs.getAllMutationBatches(r))).next(u=>{const c=[],p=[];let y=xn();for(const b of o){c.push(b.batchId);for(const D of b.mutations)y=y.add(D.key)}for(const b of u){p.push(b.batchId);for(const D of b.mutations)y=y.add(D.key)}return t.fi.Ks(r,y).next(b=>({di:b,removedBatchIds:c,addedBatchIds:p}))})})})).apply(this,arguments)}function eM(n,e){const t=Ye(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.hi.newChangeBuffer({trackRemovals:!0});return function(c,p,y,b){const D=y.batch,S=D.keys();let P=me.resolve();return S.forEach(j=>{P=P.next(()=>b.getEntry(p,j)).next(Q=>{const ye=y.docVersions.get(j);Nt(null!==ye),Q.version.compareTo(ye)<0&&(D.applyToRemoteDocument(Q,y),Q.isValidDocument()&&(Q.setReadTime(y.commitVersion),b.addEntry(Q)))})}),P.next(()=>c.Bs.removeMutationBatch(p,D))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,o))})}function sA(n){const e=Ye(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function oA(n,e){const t=Ye(n),r=e.snapshotVersion;let o=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.hi.newChangeBuffer({trackRemovals:!0});o=t.ui;const p=[];e.targetChanges.forEach((b,D)=>{const S=o.get(D);if(!S)return;p.push(t.fs.removeMatchingKeys(u,b.removedDocuments,D).next(()=>t.fs.addMatchingKeys(u,b.addedDocuments,D)));let P=S.withSequenceNumber(u.currentSequenceNumber);var j,Q,ye;e.targetMismatches.has(D)?P=P.withResumeToken(Gr.EMPTY_BYTE_STRING,Ct.min()).withLastLimboFreeSnapshotVersion(Ct.min()):b.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(b.resumeToken,r)),o=o.insert(D,P),Q=P,ye=b,(0===(j=S).resumeToken.approximateByteSize()||Q.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=3e8||ye.addedDocuments.size+ye.modifiedDocuments.size+ye.removedDocuments.size>0)&&p.push(t.fs.updateTargetData(u,P))});let y=po();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(u,b))}),p.push(sv(u,c,e.documentUpdates).next(b=>{y=b})),!r.isEqual(Ct.min())){const b=t.fs.getLastRemoteSnapshotVersion(u).next(D=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));p.push(b)}return me.waitFor(p).next(()=>c.apply(u)).next(()=>t.fi.Gs(u,y)).next(()=>y)}).then(u=>(t.ui=o,u))}function sv(n,e,t){let r=xn();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=po();return t.forEach((c,p)=>{const y=o.get(c);p.isNoDocument()&&p.version.isEqual(Ct.min())?(e.removeEntry(c,p.readTime),u=u.insert(c,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||0===p.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(p),u=u.insert(c,p)):Ue("LocalStore","Ignoring outdated watch update for ",c,". Current version:",y.version," Watch version:",p.version)}),u})}function aA(n,e){const t=Ye(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function rp(n,e){const t=Ye(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.fs.getTargetData(r,e).next(u=>u?(o=u,me.resolve(o)):t.fs.allocateTargetId(r).next(c=>(o=new Ju(e,c,0,r.currentSequenceNumber),t.fs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.ui.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function Jd(n,e,t){return ov.apply(this,arguments)}function ov(){return(ov=(0,be.Z)(function*(n,e,t){const r=Ye(n),o=r.ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!Wd(c))throw c;Ue("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.ui=r.ui.remove(e),r.ai.delete(o.target)})).apply(this,arguments)}function av(n,e,t){const r=Ye(n);let o=Ct.min(),u=xn();return r.persistence.runTransaction("Execute query","readonly",c=>function(p,y,b){const D=Ye(p),S=D.ai.get(b);return void 0!==S?me.resolve(D.ui.get(S)):D.fs.getTargetData(y,b)}(r,c,Yo(e)).next(p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(c,p.targetId).next(y=>{u=y})}).next(()=>r.oi.Qs(c,e,t?o:Ct.min(),t?u:xn())).next(p=>(uA(r,Xw(e),p),{documents:p,_i:u})))}function x0(n,e){const t=Ye(n),r=Ye(t.fs),o=t.ui.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(c=>c?c.target:null))}function R0(n,e){const t=Ye(n),r=t.ci.get(e)||Ct.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.hi.getAllFromCollectionGroup(o,e,tD(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(uA(t,e,o),o))}function uA(n,e,t){let r=Ct.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ci.set(e,r)}function N0(){return(N0=(0,be.Z)(function*(n,e,t,r){const o=Ye(n);let u=xn(),c=po();for(const b of t){const D=e.wi(b.metadata.name);b.document&&(u=u.add(D));const S=e.mi(b);S.setReadTime(e.gi(b.metadata.readTime)),c=c.insert(D,S)}const p=o.hi.newChangeBuffer({trackRemovals:!0}),y=yield rp(o,(b=r,Yo($f(fn.fromString(`__bundle__/docs/${b}`)))));var b;return o.persistence.runTransaction("Apply bundle documents","readwrite",b=>sv(b,p,c).next(D=>(p.apply(b),D)).next(D=>o.fs.removeMatchingKeysForTargetId(b,y.targetId).next(()=>o.fs.addMatchingKeys(b,u,y.targetId)).next(()=>o.fi.Gs(b,D)).next(()=>D)))})).apply(this,arguments)}function U1(n,e){return Di.apply(this,arguments)}function Di(){return(Di=(0,be.Z)(function*(n,e,t=xn()){const r=yield rp(n,Yo(v0(e.bundledQuery))),o=Ye(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const c=zt(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return o._s.saveNamedQuery(u,e);const p=r.withResumeToken(Gr.EMPTY_BYTE_STRING,c);return o.ui=o.ui.insert(p.targetId,p),o.fs.updateTargetData(u,p).next(()=>o.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.fs.addMatchingKeys(u,t,r.targetId)).next(()=>o._s.saveNamedQuery(u,e))})})).apply(this,arguments)}class ip{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return me.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:zt(r.createTime)}),me.resolve()}getNamedQuery(e,t){return me.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:v0(r.bundledQuery),readTime:zt(r.readTime)}),me.resolve();var r}}class tM{constructor(){this.overlays=new mr(Ze.comparator),this.Ii=new Map}getOverlay(e,t){return me.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.Xt(e,t,u)}),me.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Ii.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Ii.delete(r)),me.resolve()}getOverlaysForCollection(e,t,r){const o=Zf(),u=t.length+1,c=new Ze(t.child("")),p=this.overlays.getIteratorFrom(c);for(;p.hasNext();){const y=p.getNext().value,b=y.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&y.largestBatchId>r&&o.set(y.getKey(),y)}return me.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new mr((b,D)=>b-D);const c=this.overlays.getIterator();for(;c.hasNext();){const b=c.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let D=u.get(b.largestBatchId);null===D&&(D=Zf(),u=u.insert(b.largestBatchId,D)),D.set(b.getKey(),b)}}const p=Zf(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((b,D)=>p.set(b,D)),!(p.size()>=o)););return me.resolve(p)}Xt(e,t,r){if(null===r)return;const o=this.overlays.get(r.key);if(null!==o){const c=this.Ii.get(o.largestBatchId).delete(r.key);this.Ii.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new _0(t,r));let u=this.Ii.get(t);void 0===u&&(u=xn(),this.Ii.set(t,u)),this.Ii.set(t,u.add(r.key))}}class M0{constructor(){this.Ti=new Bn(Ai.Ei),this.Ai=new Bn(Ai.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new Ai(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new Ai(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new Ze(new fn([])),r=new Ai(t,e),o=new Ai(t,e+1),u=[];return this.Ai.forEachInRange([r,o],c=>{this.Pi(c),u.push(c.key)}),u}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new Ze(new fn([])),r=new Ai(t,e),o=new Ai(t,e+1);let u=xn();return this.Ai.forEachInRange([r,o],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new Ai(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ai{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return Ze.comparator(e.key,t.key)||Bt(e.Ci,t.Ci)}static Ri(e,t){return Bt(e.Ci,t.Ci)||Ze.comparator(e.key,t.key)}}class pm{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new Bn(Ai.Ei)}checkEmpty(e){return me.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,o){const u=this.xi;this.xi++;const c=new g0(u,t,r,o);this.Bs.push(c);for(const p of o)this.Ni=this.Ni.add(new Ai(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return me.resolve(c)}lookupMutationBatch(e,t){return me.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.Mi(t+1),u=o<0?0:o;return me.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return me.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ai(t,0),o=new Ai(t,Number.POSITIVE_INFINITY),u=[];return this.Ni.forEachInRange([r,o],c=>{const p=this.ki(c.Ci);u.push(p)}),me.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Bn(Bt);return t.forEach(o=>{const u=new Ai(o,0),c=new Ai(o,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([u,c],p=>{r=r.add(p.Ci)})}),me.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;Ze.isDocumentKey(u)||(u=u.child(""));const c=new Ai(new Ze(u),0);let p=new Bn(Bt);return this.Ni.forEachWhile(y=>{const b=y.key.path;return!!r.isPrefixOf(b)&&(b.length===o&&(p=p.add(y.Ci)),!0)},c),me.resolve(this.Oi(p))}Oi(e){const t=[];return e.forEach(r=>{const o=this.ki(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){Nt(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return me.forEach(t.mutations,o=>{const u=new Ai(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new Ai(t,0),o=this.Ni.firstAfterOrEqual(r);return me.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return me.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class nM{constructor(e){this.$i=e,this.docs=new mr(Ze.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,c=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return me.resolve(r?r.document.mutableCopy():Un.newInvalidDocument(t))}getEntries(e,t){let r=po();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Un.newInvalidDocument(o))}),me.resolve(r)}getAllFromCollection(e,t,r){let o=po();const u=new Ze(t.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:p,value:{document:y}}=c.getNext();if(!t.isPrefixOf(p.path))break;p.path.length>t.length+1||My(hN(y),r)<=0||(o=o.insert(y.key,y.mutableCopy()))}return me.resolve(o)}getAllFromCollectionGroup(e,t,r,o){it()}Bi(e,t){return me.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new k0(this)}getSize(e){return me.resolve(this.size)}}class k0 extends eA{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Kn.addEntry(e,o)):this.Kn.removeEntry(r)}),me.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class rM{constructor(e){this.persistence=e,this.Li=new Ku(t=>sc(t),Bf),this.lastRemoteSnapshotVersion=Ct.min(),this.highestTargetId=0,this.Ui=0,this.qi=new M0,this.targetCount=0,this.Ki=Yd.gn()}forEachTarget(e,t){return this.Li.forEach((r,o)=>t(o)),me.resolve()}getLastRemoteSnapshotVersion(e){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return me.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),me.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new Yd(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,me.resolve()}updateTargetData(e,t){return this.Tn(t),me.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,me.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Li.forEach((c,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.Li.delete(c),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)}),me.waitFor(u).next(()=>o)}getTargetCount(e){return me.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return me.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),me.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(c=>{u.push(o.markPotentiallyOrphaned(e,c))}),me.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),me.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return me.resolve(r)}containsKey(e,t){return me.resolve(this.qi.containsKey(t))}}class cA{constructor(e,t){this.Gi={},this.overlays={},this.es=new Ps(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new rM(this),this.indexManager=new ZN,this.ds=new nM(r=>this.referenceDelegate.Qi(r)),this.M=new LD(t),this._s=new ip(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new tM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new pm(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Ue("MemoryPersistence","Starting transaction:",e);const o=new iM(this.es.next());return this.referenceDelegate.ji(),r(o).next(u=>this.referenceDelegate.Wi(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}zi(e,t){return me.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class iM extends PD{constructor(e){super(),this.currentSequenceNumber=e}}class P0{constructor(e){this.persistence=e,this.Hi=new M0,this.Ji=null}static Yi(e){return new P0(e)}get Xi(){if(this.Ji)return this.Ji;throw it()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),me.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),me.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),me.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(o=>this.Xi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Xi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.Xi,r=>{const o=Ze.fromPath(r);return this.Zi(e,o).next(u=>{u||t.removeEntry(o,Ct.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return me.or([()=>me.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function uv(n,e){return`firestore_clients_${n}_${e}`}function O0(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function lv(n,e){return`firestore_targets_${n}_${e}`}class Xd{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static tr(e,t,r){const o=JSON.parse(r);let u,c="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return c&&o.error&&(c="string"==typeof o.error.message&&"string"==typeof o.error.code,c&&(u=new Re(o.error.code,o.error.message))),c?new Xd(e,t,o.state,u):(Pr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class eh{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Re(r.error.code,r.error.message))),u?new eh(e,r.state,o):(Pr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class F0{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=pn();for(let c=0;o&&c<r.activeTargetIds.length;++c)o=zT(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return o?new F0(e,u):(Pr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class cv{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new cv(t.clientId,t.onlineState):(Pr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class L0{constructor(){this.activeTargetIds=pn()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dv{constructor(e,t,r,o,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new mr(Bt),this.started=!1,this.cr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.hr=uv(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new L0),this.dr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(p){return`firestore_bundle_loaded_v2_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,be.Z)(function*(){const t=yield e.syncEngine.Fs();for(const o of t){if(o===e.ir)continue;const u=e.getItem(uv(e.persistenceKey,o));if(u){const c=F0.tr(o,u);c&&(e.ar=e.ar.insert(c.clientId,c))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const o=e.pr(r);o&&e.Ir(o)}for(const o of e.cr)e.ur(o);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(lv(this.persistenceKey,e));if(r){const o=eh.tr(e,r);o&&(t=o.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(lv(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Ar(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ue("SharedClientState","READ",e,t),t}setItem(e,t){Ue("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ue("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ue("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void Pr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,be.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const o=t.vr(r.key);return t.Sr(o,null)}{const o=t.Dr(r.key,r.newValue);if(o)return t.Sr(o.clientId,o)}}else if(t._r.test(r.key)){if(null!==r.newValue){const o=t.Cr(r.key,r.newValue);if(o)return t.Nr(o)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const o=t.kr(r.key,r.newValue);if(o)return t.Mr(o)}}else if(r.key===t.mr){if(null!==r.newValue){const o=t.pr(r.newValue);if(o)return t.Ir(o)}}else if(r.key===t.lr){const o=function(u){let c=Ps.A;if(null!=u)try{const p=JSON.parse(u);Nt("number"==typeof p),c=p}catch(p){Pr("SharedClientState","Failed to read sequence number from WebStorage",p)}return c}(r.newValue);o!==Ps.A&&t.sequenceNumberHandler(o)}else if(r.key===t.gr){const o=t.Or(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Fr(u)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const o=new Xd(this.currentUser,e,t,r),u=O0(this.persistenceKey,this.currentUser,e);this.setItem(u,o.er())}Ar(e){const t=O0(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const o=lv(this.persistenceKey,e),u=new eh(e,t,r);this.setItem(o,u.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return F0.tr(r,t)}Cr(e,t){const r=this._r.exec(e),o=Number(r[1]);return Xd.tr(new kr(void 0!==r[2]?r[2]:null),o,t)}kr(e,t){const r=this.wr.exec(e),o=Number(r[1]);return eh.tr(o,t)}pr(e){return cv.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,be.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);Ue("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),o=this.Tr(this.ar),u=this.Tr(r),c=[],p=[];return u.forEach(y=>{o.has(y)||c.push(y)}),o.forEach(y=>{u.has(y)||p.push(y)}),this.syncEngine.Lr(c,p).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=pn();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class gm{constructor(){this.Ur=new L0,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new L0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class dA{Kr(e){}shutdown(){}}class hA{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){Ue("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){Ue("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const V0={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class U0{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class sM extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,o,u){const c=this.ho(e,t);Ue("RestConnection","Sending: ",c,r);const p={};return this.lo(p,o,u),this.fo(e,c,p,r).then(y=>(Ue("RestConnection","Received: ",y),y),y=>{throw Lf("RestConnection",`${e} failed with error: `,y,"url: ",c,"request:",r),y})}_o(e,t,r,o,u){return this.co(e,t,r,o,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Gu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}ho(e,t){return`${this.uo}/v1/${t}:${V0[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,o){return new Promise((u,c)=>{const p=new Ty;p.listenOnce(k1.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Cy.NO_ERROR:const b=p.getResponseJson();Ue("Connection","XHR received:",JSON.stringify(b)),u(b);break;case Cy.TIMEOUT:Ue("Connection",'RPC "'+e+'" timed out'),c(new Re(ge.DEADLINE_EXCEEDED,"Request time out"));break;case Cy.HTTP_ERROR:const D=p.getStatus();if(Ue("Connection",'RPC "'+e+'" failed with status:',D,"response text:",p.getResponseText()),D>0){const S=p.getResponseJson().error;if(S&&S.status&&S.message){const P=function(j){const Q=j.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(Q)>=0?Q:ge.UNKNOWN}(S.status);c(new Re(P,S.message))}else c(new Re(ge.UNKNOWN,"Server responded with status "+p.getStatus()))}else c(new Re(ge.UNAVAILABLE,"Connection failed."));break;default:it()}}finally{Ue("Connection",'RPC "'+e+'" completed.')}});const y=JSON.stringify(o);p.send(t,"POST",y,r,15)})}wo(e,t,r){const o=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=M1(),c=kT(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(p.xmlHttpFactory=new iN({})),this.lo(p.initMessageHeaders,t,r),(0,F.uI)()||(0,F.b$)()||(0,F.d)()||(0,F.w1)()||(0,F.Mn)()||(0,F.ru)()||(p.httpHeadersOverwriteParam="$httpHeaders");const y=o.join("");Ue("Connection","Creating WebChannel: "+y,p);const b=u.createWebChannel(y,p);let D=!1,S=!1;const P=new U0({Jr:Q=>{S?Ue("Connection","Not sending because WebChannel is closed:",Q):(D||(Ue("Connection","Opening WebChannel transport."),b.open(),D=!0),Ue("Connection","WebChannel sending:",Q),b.send(Q))},Yr:()=>b.close()}),j=(Q,ye,xe)=>{Q.listen(ye,ct=>{try{xe(ct)}catch(lt){setTimeout(()=>{throw lt},0)}})};return j(b,Iy.EventType.OPEN,()=>{S||Ue("Connection","WebChannel transport opened.")}),j(b,Iy.EventType.CLOSE,()=>{S||(S=!0,Ue("Connection","WebChannel transport closed"),P.ro())}),j(b,Iy.EventType.ERROR,Q=>{S||(S=!0,Lf("Connection","WebChannel transport errored:",Q),P.ro(new Re(ge.UNAVAILABLE,"The operation could not be completed")))}),j(b,Iy.EventType.MESSAGE,Q=>{var ye;if(!S){const xe=Q.data[0];Nt(!!xe);const ct=xe,lt=ct.error||(null===(ye=ct[0])||void 0===ye?void 0:ye.error);if(lt){Ue("Connection","WebChannel received error:",lt);const nt=lt.status;let st=function(on){const ci=br[on];if(void 0!==ci)return s0(ci)}(nt),jt=lt.message;void 0===st&&(st=ge.INTERNAL,jt="Unknown error status: "+nt+" with message "+lt.message),S=!0,P.ro(new Re(st,jt)),b.close()}else Ue("Connection","WebChannel received:",xe),P.oo(xe)}}),j(c,yt.STAT_EVENT,Q=>{Q.stat===PT.PROXY?Ue("Connection","Detected buffering proxy"):Q.stat===PT.NOPROXY&&Ue("Connection","Detected no buffering proxy")}),setTimeout(()=>{P.io()},0),P}}function fA(){return"undefined"!=typeof window?window:null}function mm(){return"undefined"!=typeof document?document:null}function sp(n){return new F1(n,!0)}class hv{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=o,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),o=Math.max(0,t-r);o>0&&Ue("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,o,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class pA{constructor(e,t,r,o,u,c,p,y){this.Yn=e,this.Vo=r,this.vo=o,this.So=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=p,this.listener=y,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new hv(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,be.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,be.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,be.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===ge.RESOURCE_EXHAUSTED?(Pr(t.toString()),Pr("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===ge.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Do===t&&this.Qo(r,o)},r=>{e(()=>{const o=new Re(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(o)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(o=>{r(()=>this.jo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Oo(){var e=this;this.state=5,this.No.Ro((0,be.Z)(function*(){e.state=0,e.start()}))}jo(e){return Ue("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(Ue("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gA extends pA{constructor(e,t,r,o,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,c),this.M=u}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:it(),o=e.targetChange.targetIds||[],u=function(y,b){return y.N?(Nt(void 0===b||"string"==typeof b),Gr.fromBase64String(b||"")):(Nt(void 0===b||b instanceof Uint8Array),Gr.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,p=c&&function(y){const b=void 0===y.code?ge.UNKNOWN:s0(y.code);return new Re(b,y.message||"")}(c);t=new Ot(r,o,u,p||null)}else if("documentChange"in e){const r=e.documentChange,o=Jo(n,r.document.name),u=zt(r.document.updateTime),c=new ji({mapValue:{fields:r.document.fields}}),p=Un.newFoundDocument(o,u,c);t=new uc(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,o=Jo(n,r.document),u=r.readTime?zt(r.readTime):Ct.min(),c=Un.newNoDocument(o,u);t=new uc([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,o=Jo(n,r.document);t=new uc([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return it();{const r=e.filter,u=new IN(r.count||0);t=new DN(r.targetId,u)}}var y;return t}(this.M,e),r=function(o){if(!("targetChange"in o))return Ct.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?Ct.min():u.readTime?zt(u.readTime):Ct.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=Yu(this.M),t.addTarget=function(o,u){let c;const p=u.target;return c=Qw(p)?{documents:qd(o,p)}:{query:AD(o,p)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=bD(o,u.resumeToken):u.snapshotVersion.compareTo(Ct.min())>0&&(c.readTime=nm(o,u.snapshotVersion.toTimestamp())),c}(this.M,e);const r=function(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return it()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=Yu(this.M),t.removeTarget=e,this.Lo(t)}}class mA extends pA{constructor(e,t,r,o,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,c),this.M=u,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(Nt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function(n,e){return n&&n.length>0?(Nt(void 0!==e),n.map(t=>function(r,o){let u=zt(r.updateTime?r.updateTime:o);return u.isEqual(Ct.min())&&(u=zt(o)),new wN(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=zt(e.commitTime);return this.listener.tu(r,t)}return Nt(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=Yu(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Qu(this.M,r))};this.Lo(t)}}class oM extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=o,this.su=!1}iu(){if(this.su)throw new Re(ge.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.So.co(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Re(ge.UNKNOWN,o.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.So._o(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Re(ge.UNKNOWN,o.toString())})}terminate(){this.su=!0}}class aM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(Pr(t),this.uu=!1):Ue("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class _A{constructor(e,t,r,o,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=u,this.gu.Kr(p=>{r.enqueueAndForget((0,be.Z)(function*(){var y;nh(c)&&(Ue("RemoteStore","Restarting streams for network reachability change."),yield(y=(0,be.Z)(function*(b){const D=Ye(b);D.wu.add(4),yield th(D),D.yu.set("Unknown"),D.wu.delete(4),yield _m(D)}),function(b){return y.apply(this,arguments)})(c))}))}),this.yu=new aM(r,o)}}function _m(n){return fv.apply(this,arguments)}function fv(){return(fv=(0,be.Z)(function*(n){if(nh(n))for(const e of n.mu)yield e(!0)})).apply(this,arguments)}function th(n){return pv.apply(this,arguments)}function pv(){return(pv=(0,be.Z)(function*(n){for(const e of n.mu)yield e(!1)})).apply(this,arguments)}function ym(n,e){const t=Ye(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),vA(t)?gv(t):op(t).Mo()&&B0(t,e))}function vm(n,e){const t=Ye(n),r=op(t);t._u.delete(e),r.Mo()&&yA(t,e),0===t._u.size&&(r.Mo()?r.$o():nh(t)&&t.yu.set("Unknown"))}function B0(n,e){n.pu.Z(e.targetId),op(n).Ho(e)}function yA(n,e){n.pu.Z(e),op(n).Jo(e)}function gv(n){n.pu=new a0({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),op(n).start(),n.yu.au()}function vA(n){return nh(n)&&!op(n).ko()&&n._u.size>0}function nh(n){return 0===Ye(n).wu.size}function uM(n){n.pu=void 0}function B1(n){return EA.apply(this,arguments)}function EA(){return(EA=(0,be.Z)(function*(n){n._u.forEach((e,t)=>{B0(n,e)})})).apply(this,arguments)}function j1(n,e){return wA.apply(this,arguments)}function wA(){return(wA=(0,be.Z)(function*(n,e){uM(n),vA(n)?(n.yu.lu(e),gv(n)):n.yu.set("Unknown")})).apply(this,arguments)}function $1(n,e,t){return bA.apply(this,arguments)}function bA(){return(bA=(0,be.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof Ot&&2===e.state&&e.cause)try{yield(r=(0,be.Z)(function*(o,u){const c=u.cause;for(const p of u.targetIds)o._u.has(p)&&(yield o.remoteSyncer.rejectListen(p,c),o._u.delete(p),o.pu.removeTarget(p))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Ue("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield j0(n,r)}else if(e instanceof uc?n.pu.ut(e):e instanceof DN?n.pu._t(e):n.pu.ht(e),!t.isEqual(Ct.min()))try{const r=yield sA(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const c=o.pu.yt(u);return c.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const b=o._u.get(y);b&&o._u.set(y,b.withResumeToken(p.resumeToken,u))}}),c.targetMismatches.forEach(p=>{const y=o._u.get(p);if(!y)return;o._u.set(p,y.withResumeToken(Gr.EMPTY_BYTE_STRING,y.snapshotVersion)),yA(o,p);const b=new Ju(y.target,p,1,y.sequenceNumber);B0(o,b)}),o.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Ue("RemoteStore","Failed to raise snapshot:",r),yield j0(n,r)}var r})).apply(this,arguments)}function j0(n,e,t){return CA.apply(this,arguments)}function CA(){return(CA=(0,be.Z)(function*(n,e,t){if(!Wd(e))throw e;n.wu.add(1),yield th(n),n.yu.set("Offline"),t||(t=()=>sA(n.localStore)),n.asyncQueue.enqueueRetryable((0,be.Z)(function*(){Ue("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield _m(n)}))})).apply(this,arguments)}function lM(n,e){return e().catch(t=>j0(n,t,e))}function Em(n){return IA.apply(this,arguments)}function IA(){return(IA=(0,be.Z)(function*(n){const e=Ye(n),t=rh(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;H1(e);)try{const o=yield aA(e.localStore,r);if(null===o){0===e.du.length&&t.$o();break}r=o.batchId,G1(e,o)}catch(o){yield j0(e,o)}cM(e)&&TA(e)})).apply(this,arguments)}function H1(n){return nh(n)&&n.du.length<10}function G1(n,e){n.du.push(e);const t=rh(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function cM(n){return nh(n)&&!rh(n).ko()&&n.du.length>0}function TA(n){rh(n).start()}function dM(n){return $0.apply(this,arguments)}function $0(){return($0=(0,be.Z)(function*(n){rh(n).nu()})).apply(this,arguments)}function q1(n){return DA.apply(this,arguments)}function DA(){return(DA=(0,be.Z)(function*(n){const e=rh(n);for(const t of n.du)e.Zo(t.mutations)})).apply(this,arguments)}function W1(n,e,t){return H0.apply(this,arguments)}function H0(){return(H0=(0,be.Z)(function*(n,e,t){const r=n.du.shift(),o=m0.from(r,e,t);yield lM(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Em(n)})).apply(this,arguments)}function hM(n,e){return G0.apply(this,arguments)}function G0(){return(G0=(0,be.Z)(function*(n,e){var t;e&&rh(n).Xo&&(yield(t=(0,be.Z)(function*(r,o){if(Hy(u=o.code)&&u!==ge.ABORTED){const c=r.du.shift();rh(r).Fo(),yield lM(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,o)),yield Em(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),cM(n)&&TA(n)})).apply(this,arguments)}function fM(n,e){return AA.apply(this,arguments)}function AA(){return(AA=(0,be.Z)(function*(n,e){const t=Ye(n);t.asyncQueue.verifyOperationInProgress(),Ue("RemoteStore","RemoteStore received new credentials");const r=nh(t);t.wu.add(3),yield th(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield _m(t)})).apply(this,arguments)}function SA(n,e){return xA.apply(this,arguments)}function xA(){return(xA=(0,be.Z)(function*(n,e){const t=Ye(n);e?(t.wu.delete(2),yield _m(t)):e||(t.wu.add(2),yield th(t),t.yu.set("Unknown"))})).apply(this,arguments)}function op(n){return n.Iu||(n.Iu=function(e,t,r){const o=Ye(e);return o.iu(),new gA(t,o.So,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Xr:B1.bind(null,n),eo:j1.bind(null,n),zo:$1.bind(null,n)}),n.mu.push(function(){var e=(0,be.Z)(function*(t){t?(n.Iu.Fo(),vA(n)?gv(n):n.yu.set("Unknown")):(yield n.Iu.stop(),uM(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function rh(n){return n.Tu||(n.Tu=function(e,t,r){const o=Ye(e);return o.iu(),new mA(t,o.So,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Xr:dM.bind(null,n),eo:hM.bind(null,n),eu:q1.bind(null,n),tu:W1.bind(null,n)}),n.mu.push(function(){var e=(0,be.Z)(function*(t){t?(n.Tu.Fo(),yield Em(n)):(yield n.Tu.stop(),n.du.length>0&&(Ue("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class q0{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new ui,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,o,u){const c=Date.now()+r,p=new q0(e,t,c,o,u);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Re(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mc(n,e){if(Pr("AsyncQueue",`${e}: ${n}`),Wd(n))return new Re(ge.UNAVAILABLE,`${e}: ${n}`);throw n}class ia{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ze.comparator(t.key,r.key):(t,r)=>Ze.comparator(t.key,r.key),this.keyedMap=o0(),this.sortedSet=new mr(this.comparator)}static emptySet(e){return new ia(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ia)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new ia;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class W0{constructor(){this.Eu=new mr(Ze.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):it():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class ap{constructor(e,t,r,o,u,c,p,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=p,this.excludesMetadataChanges=y}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(c=>{u.push({type:0,doc:c})}),new ap(e,t,ia.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class pM{constructor(){this.Ru=void 0,this.listeners=[]}}class Z0{constructor(){this.queries=new Ku(e=>cD(e),Kg),this.onlineState="Unknown",this.bu=new Set}}function mv(n,e){return _v.apply(this,arguments)}function _v(){return(_v=(0,be.Z)(function*(n,e){const t=Ye(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new pM),o)try{u.Ru=yield t.onListen(r)}catch(c){const p=mc(c,`Initialization of query '${Vy(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,u),u.listeners.push(e),e.Pu(t.onlineState),u.Ru&&e.Vu(u.Ru)&&Ev(t)})).apply(this,arguments)}function yv(n,e){return RA.apply(this,arguments)}function RA(){return(RA=(0,be.Z)(function*(n,e){const t=Ye(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)})).apply(this,arguments)}function NA(n,e){const t=Ye(n);let r=!1;for(const o of e){const c=t.queries.get(o.query);if(c){for(const p of c.listeners)p.Vu(o)&&(r=!0);c.Ru=o}}r&&Ev(t)}function vv(n,e,t){const r=Ye(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function Ev(n){n.bu.forEach(e=>{e.next()})}class MA{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new ap(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=ap.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class Z1{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class gM{constructor(e){this.M=e}wi(e){return Jo(this.M,e)}mi(e){return e.metadata.exists?ID(this.M,e.document,!1):Un.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return zt(e)}}class mM{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=_M(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=fn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new gM(this.M);for(const o of e)if(o.metadata.queries){const u=r.wi(o.metadata.name);for(const c of o.metadata.queries){const p=(t.get(c)||xn()).add(u);t.set(c,p)}}return t}complete(){var e=this;return(0,be.Z)(function*(){const t=yield function(n,e,t,r){return N0.apply(this,arguments)}(e.localStore,new gM(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const o of e.queries)yield U1(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function _M(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class wm{constructor(e){this.key=e}}class kA{constructor(e){this.key=e}}class yM{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=xn(),this.mutatedKeys=xn(),this.Gu=dD(e),this.Qu=new ia(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new W0,o=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,c=o,p=!1;const y="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,b="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((D,S)=>{const P=o.get(D),j=Uy(this.query,S)?S:null,Q=!!P&&this.mutatedKeys.has(P.key),ye=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let xe=!1;P&&j?P.data.isEqual(j.data)?Q!==ye&&(r.track({type:3,doc:j}),xe=!0):this.Hu(P,j)||(r.track({type:2,doc:j}),xe=!0,(y&&this.Gu(j,y)>0||b&&this.Gu(j,b)<0)&&(p=!0)):!P&&j?(r.track({type:0,doc:j}),xe=!0):P&&!j&&(r.track({type:1,doc:P}),xe=!0,(y||b)&&(p=!0)),xe&&(j?(c=c.add(j),u=ye?u.add(D):u.delete(D)):(c=c.delete(D),u=u.delete(D)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const D="F"===this.query.limitType?c.last():c.first();c=c.delete(D.key),u=u.delete(D.key),r.track({type:1,doc:D})}return{Qu:c,zu:r,ii:p,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Au();u.sort((b,D)=>function(S,P){const j=Q=>{switch(Q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return it()}};return j(S)-j(P)}(b.type,D.type)||this.Gu(b.doc,D.doc)),this.Ju(r);const c=t?this.Yu():[],p=0===this.Ku.size&&this.current?1:0,y=p!==this.qu;return this.qu=p,0!==u.length||y?{snapshot:new ap(this.query,e.Qu,o,u,e.mutatedKeys,0===p,y,!1),Xu:c}:{Xu:c}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new W0,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=xn(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new kA(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new wm(r))}),t}ta(e){this.Uu=e._i,this.Ku=xn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return ap.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class z1{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class z0{constructor(e){this.key=e,this.na=!1}}class vM{constructor(e,t,r,o,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.sa={},this.ia=new Ku(p=>cD(p),Kg),this.ra=new Map,this.oa=new Set,this.ua=new mr(Ze.comparator),this.aa=new Map,this.ca=new M0,this.ha={},this.la=new Map,this.fa=Yd.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function K1(n,e){return PA.apply(this,arguments)}function PA(){return(PA=(0,be.Z)(function*(n,e){const t=gb(n);let r,o;const u=t.ia.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.ea();else{const c=yield rp(t.localStore,Yo(e));t.isPrimaryClient&&ym(t.remoteStore,c);const p=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,o=yield K0(t,e,r,"current"===p)}return o})).apply(this,arguments)}function K0(n,e,t,r){return OA.apply(this,arguments)}function OA(){return(OA=(0,be.Z)(function*(n,e,t,r){n._a=(D,S,P)=>{return(j=(0,be.Z)(function*(Q,ye,xe,ct){let lt=ye.view.Wu(xe);lt.ii&&(lt=yield av(Q.localStore,ye.query,!1).then(({documents:jt})=>ye.view.Wu(jt,lt)));const nt=ct&&ct.targetChanges.get(ye.targetId),st=ye.view.applyChanges(lt,Q.isPrimaryClient,nt);return sb(Q,ye.targetId,st.Xu),st.snapshot}),function(Q,ye,xe,ct){return j.apply(this,arguments)})(n,D,S,P);var j};const o=yield av(n.localStore,e,!0),u=new yM(e,o._i),c=u.Wu(o.documents),p=Qa.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),y=u.applyChanges(c,n.isPrimaryClient,p);sb(n,t,y.Xu);const b=new z1(e,t,u);return n.ia.set(e,b),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),y.snapshot})).apply(this,arguments)}function FA(n,e){return Y0.apply(this,arguments)}function Y0(){return(Y0=(0,be.Z)(function*(n,e){const t=Ye(n),r=t.ia.get(e),o=t.ra.get(r.targetId);if(o.length>1)return t.ra.set(r.targetId,o.filter(u=>!Kg(u,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Jd(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),vm(t.remoteStore,r.targetId),sh(t,r.targetId)}).catch(na))):(sh(t,r.targetId),yield Jd(t.localStore,r.targetId,!0))})).apply(this,arguments)}function LA(){return(LA=(0,be.Z)(function*(n,e,t){const r=GA(n);try{const o=yield function(u,c){const p=Ye(u),y=wr.now(),b=c.reduce((S,P)=>S.add(P.key),xn());let D;return p.persistence.runTransaction("Locally write mutations","readwrite",S=>p.fi.Ks(S,b).next(P=>{D=P;const j=[];for(const Q of c){const ye=bN(Q,D.get(Q.key));null!=ye&&j.push(new oc(Q.key,ye,eD(ye.value.mapValue),Fr.exists(!0)))}return p.Bs.addMutationBatch(S,y,j,c)})).then(S=>(S.applyToLocalDocumentSet(D),{batchId:S.batchId,changes:D}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,c,p){let y=u.ha[u.currentUser.toKey()];y||(y=new mr(Bt)),y=y.insert(c,p),u.ha[u.currentUser.toKey()]=y}(r,o.batchId,t),yield tl(r,o.changes),yield Em(r.remoteStore)}catch(o){const u=mc(o,"Failed to persist write");t.reject(u)}})).apply(this,arguments)}function VA(n,e){return ih.apply(this,arguments)}function ih(){return(ih=(0,be.Z)(function*(n,e){const t=Ye(n);try{const r=yield oA(t.localStore,e);e.targetChanges.forEach((o,u)=>{const c=t.aa.get(u);c&&(Nt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?c.na=!0:o.modifiedDocuments.size>0?Nt(c.na):o.removedDocuments.size>0&&(Nt(c.na),c.na=!1))}),yield tl(t,r,e)}catch(r){yield na(r)}})).apply(this,arguments)}function UA(n,e,t){const r=Ye(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ia.forEach((u,c)=>{const p=c.view.Pu(e);p.snapshot&&o.push(p.snapshot)}),function(u,c){const p=Ye(u);p.onlineState=c;let y=!1;p.queries.forEach((b,D)=>{for(const S of D.listeners)S.Pu(c)&&(y=!0)}),y&&Ev(p)}(r.eventManager,e),o.length&&r.sa.zo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function EM(n,e,t){return Q0.apply(this,arguments)}function Q0(){return(Q0=(0,be.Z)(function*(n,e,t){const r=Ye(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.aa.get(e),u=o&&o.key;if(u){let c=new mr(Ze.comparator);c=c.insert(u,Un.newNoDocument(u,Ct.min()));const p=xn().add(u),y=new go(Ct.min(),new Map,new Bn(Bt),c,p);yield VA(r,y),r.ua=r.ua.remove(u),r.aa.delete(e),wv(r)}else yield Jd(r.localStore,e,!1).then(()=>sh(r,e,t)).catch(na)})).apply(this,arguments)}function J0(n,e){return X0.apply(this,arguments)}function X0(){return(X0=(0,be.Z)(function*(n,e){const t=Ye(n),r=e.batch.batchId;try{const o=yield eM(t.localStore,e);bm(t,r,null),rb(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield tl(t,o)}catch(o){yield na(o)}})).apply(this,arguments)}function Vs(n,e,t){return eb.apply(this,arguments)}function eb(){return(eb=(0,be.Z)(function*(n,e,t){const r=Ye(n);try{const o=yield function(u,c){const p=Ye(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let b;return p.Bs.lookupMutationBatch(y,c).next(D=>(Nt(null!==D),b=D.keys(),p.Bs.removeMutationBatch(y,D))).next(()=>p.Bs.performConsistencyCheck(y)).next(()=>p.fi.Ks(y,b))})}(r.localStore,e);bm(r,e,t),rb(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield tl(r,o)}catch(o){yield na(o)}})).apply(this,arguments)}function nb(){return(nb=(0,be.Z)(function*(n,e){const t=Ye(n);nh(t.remoteStore)||Ue("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=Ye(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>c.Bs.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const o=t.la.get(r)||[];o.push(e),t.la.set(r,o)}catch(r){const o=mc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}})).apply(this,arguments)}function rb(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function bm(n,e,t){const r=Ye(n);let o=r.ha[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.ha[r.currentUser.toKey()]=o}}function sh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||ib(n,r)})}function ib(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(vm(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),wv(n))}function sb(n,e,t){for(const r of t)r instanceof wm?(n.ca.addReference(r.key,e),BA(n,r)):r instanceof kA?(Ue("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||ib(n,r.key)):it()}function BA(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||(Ue("SyncEngine","New document in limbo: "+t),n.oa.add(r),wv(n))}function wv(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new Ze(fn.fromString(e)),r=n.fa.next();n.aa.set(r,new z0(t)),n.ua=n.ua.insert(t,r),ym(n.remoteStore,new Ju(Yo($f(t.path)),r,2,Ps.A))}}function tl(n,e,t){return ob.apply(this,arguments)}function ob(){return(ob=(0,be.Z)(function*(n,e,t){const r=Ye(n),o=[],u=[],c=[];var p;r.ia.isEmpty()||(r.ia.forEach((p,y)=>{c.push(r._a(y,e,t).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(y.targetId,b.fromCache?"not-current":"current"),o.push(b);const D=fm.Ys(y.targetId,b);u.push(D)}}))}),yield Promise.all(c),r.sa.zo(o),yield(p=(0,be.Z)(function*(y,b){const D=Ye(y);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>me.forEach(b,P=>me.forEach(P.Hs,j=>D.persistence.referenceDelegate.addReference(S,P.targetId,j)).next(()=>me.forEach(P.Js,j=>D.persistence.referenceDelegate.removeReference(S,P.targetId,j)))))}catch(S){if(!Wd(S))throw S;Ue("LocalStore","Failed to update sequence numbers: "+S)}for(const S of b){const P=S.targetId;if(!S.fromCache){const j=D.ui.get(P),ye=j.withLastLimboFreeSnapshotVersion(j.snapshotVersion);D.ui=D.ui.insert(P,ye)}}}),function(y,b){return p.apply(this,arguments)})(r.localStore,u))})).apply(this,arguments)}function ab(n,e){return bv.apply(this,arguments)}function bv(){return(bv=(0,be.Z)(function*(n,e){const t=Ye(n);if(!t.currentUser.isEqual(e)){Ue("SyncEngine","User change. New user:",e.toKey());const r=yield iA(t.localStore,e);t.currentUser=e,(o=t).la.forEach(c=>{c.forEach(p=>{p.reject(new Re(ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield tl(t,r.di)}var o})).apply(this,arguments)}function jA(n,e){const t=Ye(n),r=t.aa.get(e);if(r&&r.na)return xn().add(r.key);{let o=xn();const u=t.ra.get(e);if(!u)return o;for(const c of u){const p=t.ia.get(c);o=o.unionWith(p.view.ju)}return o}}function ub(n,e){return lb.apply(this,arguments)}function lb(){return(lb=(0,be.Z)(function*(n,e){const t=Ye(n),r=yield av(t.localStore,e.query,!0),o=e.view.ta(r);return t.isPrimaryClient&&sb(t,e.targetId,o.Xu),o})).apply(this,arguments)}function sa(n,e){return cb.apply(this,arguments)}function cb(){return(cb=(0,be.Z)(function*(n,e){const t=Ye(n);return R0(t.localStore,e).then(r=>tl(t,r))})).apply(this,arguments)}function Q1(n,e,t,r){return db.apply(this,arguments)}function db(){return(db=(0,be.Z)(function*(n,e,t,r){const o=Ye(n),u=yield function(c,p){const y=Ye(c),b=Ye(y.Bs);return y.persistence.runTransaction("Lookup mutation documents","readonly",D=>b.fn(D,p).next(S=>S?y.fi.Ks(D,S):me.resolve(null)))}(o.localStore,e);var p;null!==u?("pending"===t?yield Em(o.remoteStore):"acknowledged"===t||"rejected"===t?(bm(o,e,r||null),rb(o,e),p=e,Ye(Ye(o.localStore).Bs)._n(p)):it(),yield tl(o,u)):Ue("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function hb(){return(hb=(0,be.Z)(function*(n,e){const t=Ye(n);if(gb(t),GA(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield $A(t,r.toArray());t.da=!0,yield SA(t.remoteStore,!0);for(const u of o)ym(t.remoteStore,u)}else if(!1===e&&!1!==t.da){const r=[];let o=Promise.resolve();t.ra.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):o=o.then(()=>(sh(t,c),Jd(t.localStore,c,!0))),vm(t.remoteStore,c)}),yield o,yield $A(t,r),function(u){const c=Ye(u);c.aa.forEach((p,y)=>{vm(c.remoteStore,y)}),c.ca.Si(),c.aa=new Map,c.ua=new mr(Ze.comparator)}(t),t.da=!1,yield SA(t.remoteStore,!1)}})).apply(this,arguments)}function $A(n,e,t){return fb.apply(this,arguments)}function fb(){return(fb=(0,be.Z)(function*(n,e,t){const r=Ye(n),o=[],u=[];for(const c of e){let p;const y=r.ra.get(c);if(y&&0!==y.length){p=yield rp(r.localStore,Yo(y[0]));for(const b of y){const D=r.ia.get(b),S=yield ub(r,D);S.snapshot&&u.push(S.snapshot)}}else{const b=yield x0(r.localStore,c);p=yield rp(r.localStore,b),yield K0(r,wM(b),c,!1)}o.push(p)}return r.sa.zo(u),o})).apply(this,arguments)}function wM(n){return uD(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function bM(n){const e=Ye(n);return Ye(Ye(e.localStore).persistence).Fs()}function HA(n,e,t,r){return pb.apply(this,arguments)}function pb(){return(pb=(0,be.Z)(function*(n,e,t,r){const o=Ye(n);if(o.da)return void Ue("SyncEngine","Ignoring unexpected query state notification.");const u=o.ra.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield R0(o.localStore,Xw(u[0])),p=go.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield tl(o,c,p);break}case"rejected":yield Jd(o.localStore,e,!0),sh(o,e,r);break;default:it()}})).apply(this,arguments)}function CM(n,e,t){return Cv.apply(this,arguments)}function Cv(){return(Cv=(0,be.Z)(function*(n,e,t){const r=gb(n);if(r.da){for(const o of e){if(r.ra.has(o)){Ue("SyncEngine","Adding an already active target "+o);continue}const u=yield x0(r.localStore,o),c=yield rp(r.localStore,u);yield K0(r,wM(u),c.targetId,!1),ym(r.remoteStore,c)}for(const o of t)r.ra.has(o)&&(yield Jd(r.localStore,o,!1).then(()=>{vm(r.remoteStore,o),sh(r,o)}).catch(na))}})).apply(this,arguments)}function gb(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=VA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=EM.bind(null,e),e.sa.zo=NA.bind(null,e.eventManager),e.sa.wa=vv.bind(null,e.eventManager),e}function GA(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=J0.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Vs.bind(null,e),e}class mb{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,be.Z)(function*(){t.M=sp(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return iv(this.persistence,new D0,e.initialUser,this.M)}ya(e){return new cA(P0.Yi,this.M)}ga(e){return new gm}terminate(){var e=this;return(0,be.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class WA extends mb{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,be.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield GA(r.Ta.syncEngine),yield Em(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return iv(this.persistence,new D0,e.initialUser,this.M)}pa(e){return new JD(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=rA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?is.withCacheSize(this.cacheSizeBytes):is.DEFAULT;return new np(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,fA(),mm(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new gm}}class IM extends WA{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,be.Z)(function*(){yield t().call(r,e);const o=r.Ta.syncEngine;r.sharedClientState instanceof dv&&(r.sharedClientState.syncEngine={$r:Q1.bind(null,o),Br:HA.bind(null,o),Lr:CM.bind(null,o),Fs:bM.bind(null,o),Fr:sa.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,be.Z)(function*(c){yield function(n,e){return hb.apply(this,arguments)}(r.Ta.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):c||r.gcScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}ga(e){const t=fA();if(!dv.vt(t))throw new Re(ge.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=rA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new dv(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Iv{initialize(e,t){var r=this;return(0,be.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>UA(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=ab.bind(null,r.syncEngine),yield SA(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Z0}createDatastore(e){const t=sp(e.databaseInfo.databaseId),r=new sM(e.databaseInfo);return new oM(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=p=>UA(this.syncEngine,p,0),c=hA.vt()?new hA:new dA,new _A(t,r,o,u,c);var t,r,o,u,c}createSyncEngine(e,t){return function(r,o,u,c,p,y,b){const D=new vM(r,o,u,c,p,y);return b&&(D.da=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,be.Z)(function*(t){const r=Ye(t);Ue("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield th(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function up(n,e=10240){let t=0;return{read:()=>(0,be.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,be.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class lp{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class ZA{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new ui,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,be.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,be.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,be.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),o=Number(r);isNaN(o)&&e.va(`length string (${r}) is not valid number`);const u=yield e.Sa(o);return new Z1(JSON.parse(u),t.length+o)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,be.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,be.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,be.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class TM{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,be.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Re(ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,be.Z)(function*(u,c){const p=Ye(u),y=Yu(p.M)+"/documents",b={documents:c.map(j=>rm(p.M,j))},D=yield p._o("BatchGetDocuments",y,b),S=new Map;D.forEach(j=>{const Q=function(n,e){return"found"in e?function(t,r){Nt(!!r.found);const o=Jo(t,r.found.name),u=zt(r.found.updateTime),c=new ji({mapValue:{fields:r.found.fields}});return Un.newFoundDocument(o,u,c)}(n,e):"missing"in e?function(t,r){Nt(!!r.missing),Nt(!!r.readTime);const o=Jo(t,r.missing),u=zt(r.readTime);return Un.newNoDocument(o,u)}(n,e):it()}(p.M,j);S.set(Q.key.toString(),Q)});const P=[];return c.forEach(j=>{const Q=S.get(j.toString());Nt(!!Q),P.push(Q)}),P}),function(u,c){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ac(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,be.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=Ze.fromPath(o);e.mutations.push(new r0(u,e.precondition(u)))}),yield(r=(0,be.Z)(function*(o,u){const c=Ye(o),p=Yu(c.M)+"/documents",y={writes:u.map(b=>Qu(c.M,b))};yield c.co("Commit",p,y)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw it();t=Ct.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Re(ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Fr.updateTime(t):Fr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ct.min()))throw new Re(ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Fr.updateTime(t)}return Fr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class DM{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.xa=r.maxAttempts,this.No=new hv(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,be.Z)(function*(){const t=new TM(e.datastore),r=e.ka(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Ma(u)}))}).catch(o=>{e.Ma(o)})}))}ka(e){try{const t=this.updateFunction(e);return!Ug(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Hy(t)}return!1}}class X1{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=kr.UNAUTHENTICATED,this.clientId=HT.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,be.Z)(function*(p){Ue("FirestoreClient","Received user=",p.uid),yield u.authCredentialListener(p),u.user=p});return function(p){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Ue("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,be.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Re(ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ui;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,be.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=mc(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function AM(n,e){return zA.apply(this,arguments)}function zA(){return(zA=(0,be.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ue("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,be.Z)(function*(u){r.isEqual(u)||(yield iA(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e})).apply(this,arguments)}function _b(n,e){return Tv.apply(this,arguments)}function Tv(){return(Tv=(0,be.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield yb(n);Ue("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>fM(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>fM(e.remoteStore,u)),n.onlineComponents=e})).apply(this,arguments)}function yb(n){return vb.apply(this,arguments)}function vb(){return(vb=(0,be.Z)(function*(n){return n.offlineComponents||(Ue("FirestoreClient","Using default OfflineComponentProvider"),yield AM(n,new mb)),n.offlineComponents})).apply(this,arguments)}function Dv(n){return Eb.apply(this,arguments)}function Eb(){return(Eb=(0,be.Z)(function*(n){return n.onlineComponents||(Ue("FirestoreClient","Using default OnlineComponentProvider"),yield _b(n,new Iv)),n.onlineComponents})).apply(this,arguments)}function wb(n){return yb(n).then(e=>e.persistence)}function KA(n){return yb(n).then(e=>e.localStore)}function SM(n){return Dv(n).then(e=>e.remoteStore)}function bb(n){return Dv(n).then(e=>e.syncEngine)}function _c(n){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,be.Z)(function*(n){const e=yield Dv(n),t=e.eventManager;return t.onListen=K1.bind(null,e.syncEngine),t.onUnlisten=FA.bind(null,e.syncEngine),t})).apply(this,arguments)}function JA(n,e,t={}){const r=new ui;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(o,u,c,p,y){const b=new lp({next:S=>{u.enqueueAndForget(()=>yv(o,D));const P=S.docs.has(c);!P&&S.fromCache?y.reject(new Re(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&S.fromCache&&p&&"server"===p.source?y.reject(new Re(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(S)},error:S=>y.reject(S)}),D=new MA($f(c.path),b,{includeMetadataChanges:!0,ku:!0});return mv(o,D)}(yield _c(n),n.asyncQueue,e,t,r)})),r.promise}function XA(n,e,t={}){const r=new ui;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(o,u,c,p,y){const b=new lp({next:S=>{u.enqueueAndForget(()=>yv(o,D)),S.fromCache&&"server"===p.source?y.reject(new Re(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(S)},error:S=>y.reject(S)}),D=new MA(c,b,{includeMetadataChanges:!0,ku:!0});return mv(o,D)}(yield _c(n),n.asyncQueue,e,t,r)})),r.promise}const Sv=new Map;function Cm(n,e,t){if(!t)throw new Re(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function nS(n,e,t,r){if(!0===e&&!0===r)throw new Re(ge.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Im(n){if(!Ze.isDocumentKey(n))throw new Re(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function rS(n){if(Ze.isDocumentKey(n))throw new Re(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function cp(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":it()}function rn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=cp(n);throw new Re(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Wr(n,e){if(e<=0)throw new Re(ge.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class RM{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Re(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Re(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,nS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Tm{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new RM({}),this._settingsFrozen=!1,e instanceof Wu?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Re(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wu(o.options.projectId)}(e))}get app(){if(!this._app)throw new Re(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Re(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new RM(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new oN;switch(t.type){case"gapi":const r=t.client;return Nt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new jT(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Re(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Sv.get(e);t&&(Ue("ComponentProvider","Removing Datastore"),Sv.delete(e),t.terminate())}(this),Promise.resolve()}}class tr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new tr(this.firestore,e,this._key)}}class Zr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Zr(this.firestore,e,this._query)}}class Xa extends Zr{constructor(e,t,r){super(e,t,$f(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new tr(this.firestore,null,new Ze(e))}withConverter(e){return new Xa(this.firestore,e,this._path)}}function MM(n,e,...t){if(n=(0,F.m9)(n),Cm("collection","path",e),n instanceof Tm){const r=fn.fromString(e,...t);return rS(r),new Xa(n,null,r)}{if(!(n instanceof tr||n instanceof Xa))throw new Re(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(fn.fromString(e,...t));return rS(r),new Xa(n.firestore,null,r)}}function Cb(n,e,...t){if(n=(0,F.m9)(n),1===arguments.length&&(e=HT.R()),Cm("doc","path",e),n instanceof Tm){const r=fn.fromString(e,...t);return Im(r),new tr(n,null,new Ze(r))}{if(!(n instanceof tr||n instanceof Xa))throw new Re(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(fn.fromString(e,...t));return Im(r),new tr(n.firestore,n instanceof Xa?n.converter:null,new Ze(r))}}function iS(n,e){return n=(0,F.m9)(n),e=(0,F.m9)(e),(n instanceof tr||n instanceof Xa)&&(e instanceof tr||e instanceof Xa)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function sS(n,e){return n=(0,F.m9)(n),e=(0,F.m9)(e),n instanceof Zr&&e instanceof Zr&&n.firestore===e.firestore&&Kg(n._query,e._query)&&n.converter===e.converter}class kM{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new hv(this,"async_queue_retry"),this.Qa=()=>{const t=mm();t&&Ue("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=mm();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=mm();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new ui;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,be.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!Wd(t))throw t;Ue("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,Pr("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const o=q0.createAndSchedule(this,e,t,r,u=>this.Ha(u));return this.La.push(o),o}ja(){this.Ua&&it()}verifyOperationInProgress(){}Ja(){var e=this;return(0,be.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function Ib(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class PM{constructor(){this._progressObserver={},this._taskCompletionResolver=new ui,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class nr extends Tm{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new kM,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||OM(this),this._firestoreClient.terminate()}}function zr(n){return n._firestoreClient||OM(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function OM(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new ZT(n._databaseId,u,n._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));var u,p;n._firestoreClient=new X1(n._authCredentials,n._appCheckCredentials,n._queue,r)}function oS(n,e,t){const r=new ui;return n.asyncQueue.enqueue((0,be.Z)(function*(){try{yield AM(n,t),yield _b(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(u=o).name?u.code===ge.FAILED_PRECONDITION||u.code===ge.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var u})).then(()=>r.promise)}function HM(n){if(n._initialized||n._terminated)throw new Re(ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class nl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Re(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Or(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class eu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new eu(Gr.fromBase64String(e))}catch(t){throw new Re(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new eu(Gr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class aa{constructor(e){this._methodName=e}}class Dm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Bt(this._lat,e._lat)||Bt(this._long,e._long)}}const aO=/^__.*__$/;class GM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new oc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Qo(e,this.data,t,this.fieldTransforms)}}class qM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new oc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function WM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw it()}}class Tb{constructor(e,t,r,o,u,c){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=o,void 0===u&&this.tc(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new Tb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.nc({path:r,ic:!1});return o.rc(e),o}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.nc({path:r,ic:!1});return o.tc(),o}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return lh(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(WM(this.ec)&&aO.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class Db{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||sp(e)}lc(e,t,r,o=!1){return new Tb({ec:e,methodName:t,hc:r,path:Or.emptyPath(),ic:!1,cc:o},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function ah(n){const e=n._freezeSettings(),t=sp(n._databaseId);return new Db(n._databaseId,!!e.ignoreUndefinedProperties,t)}function xv(n,e,t,r,o,u={}){const c=n.lc(u.merge||u.mergeFields?2:0,e,t,o);Sm("Data must be an object, but it was:",c,r);const p=Sb(r,c);let y,b;if(u.merge)y=new qu(c.fieldMask),b=c.fieldTransforms;else if(u.mergeFields){const D=[];for(const S of u.mergeFields){const P=xm(e,S,t);if(!c.contains(P))throw new Re(ge.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);Nb(D,P)||D.push(P)}y=new qu(D),b=c.fieldTransforms.filter(S=>y.covers(S.field))}else y=null,b=c.fieldTransforms;return new GM(new ji(p),y,b)}class Am extends aa{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Am}}function ZM(n,e,t){return new Tb({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class Ab extends aa{_toFieldTransform(e){return new Jg(e.path,new qf)}isEqual(e){return e instanceof Ab}}class zM extends aa{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=ZM(this,e,!0),r=this.fc.map(u=>yc(u,t)),o=new $d(r);return new Jg(e.path,o)}isEqual(e){return this===e}}class KM extends aa{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=ZM(this,e,!0),r=this.fc.map(u=>yc(u,t)),o=new Hd(r);return new Jg(e.path,o)}isEqual(e){return this===e}}class ua extends aa{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new Wf(e.M,hD(e.M,this.dc));return new Jg(e.path,t)}isEqual(e){return this===e}}function aS(n,e,t,r){const o=n.lc(1,e,t);Sm("Data must be an object, but it was:",o,r);const u=[],c=ji.empty();Pd(r,(y,b)=>{const D=uh(e,y,t);b=(0,F.m9)(b);const S=o.oc(D);if(b instanceof Am)u.push(D);else{const P=yc(b,S);null!=P&&(u.push(D),c.set(D,P))}});const p=new qu(u);return new qM(c,p,o.fieldTransforms)}function Rv(n,e,t,r,o,u){const c=n.lc(1,e,t),p=[xm(e,r,t)],y=[o];if(u.length%2!=0)throw new Re(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<u.length;P+=2)p.push(xm(e,u[P])),y.push(u[P+1]);const b=[],D=ji.empty();for(let P=p.length-1;P>=0;--P)if(!Nb(b,p[P])){const j=p[P];let Q=y[P];Q=(0,F.m9)(Q);const ye=c.oc(j);if(Q instanceof Am)b.push(j);else{const xe=yc(Q,ye);null!=xe&&(b.push(j),D.set(j,xe))}}const S=new qu(b);return new qM(D,S,c.fieldTransforms)}function uS(n,e,t,r=!1){return yc(t,n.lc(r?4:3,e))}function yc(n,e){if(xb(n=(0,F.m9)(n)))return Sm("Unsupported field value:",e,n),Sb(n,e);if(n instanceof aa)return function(t,r){if(!WM(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const c of t){let p=yc(c,r.uc(u));null==p&&(p={nullValue:"NULL_VALUE"}),o.push(p),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,F.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return hD(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=wr.fromDate(t);return{timestampValue:nm(r.M,o)}}if(t instanceof wr){const o=new wr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:nm(r.M,o)}}if(t instanceof Dm)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof eu)return{bytesValue:bD(r.M,t._byteString)};if(t instanceof tr){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.ac(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Ls(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${cp(t)}`)}(n,e)}function Sb(n,e){const t={};return uN(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Pd(n,(r,o)=>{const u=yc(o,e.sc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function xb(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof wr||n instanceof Dm||n instanceof eu||n instanceof tr||n instanceof aa)}function Sm(n,e,t){if(!xb(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=cp(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function xm(n,e,t){if((e=(0,F.m9)(e))instanceof nl)return e._internalPath;if("string"==typeof e)return uh(n,e);throw lh("Field path arguments must be of type string or ",n,!1,void 0,t)}const Rb=new RegExp("[~\\*/\\[\\]]");function uh(n,e,t){if(e.search(Rb)>=0)throw lh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new nl(...e.split("."))._internalPath}catch(r){throw lh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function lh(n,e,t,r,o){const u=r&&!r.isEmpty(),c=void 0!==o;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let y="";return(u||c)&&(y+=" (found",u&&(y+=` in field ${r}`),c&&(y+=` in document ${o}`),y+=")"),new Re(ge.INVALID_ARGUMENT,p+n+y)}function Nb(n,e){return n.some(t=>t.isEqual(e))}class dp{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new tr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new YM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Nv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class YM extends dp{data(){return super.data()}}function Nv(n,e){return"string"==typeof e?uh(n,e):e instanceof nl?e._internalPath:e._delegate._internalPath}class vc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class rl extends dp{constructor(e,t,r,o,u,c){super(e,t,r,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Rm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Nv("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Rm extends rl{data(e={}){return super.data(e)}}class Ec{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new vc(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Rm(this._firestore,this._userDataWriter,r.key,r,new vc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new Rm(r._firestore,r._userDataWriter,c.doc.key,c.doc,new vc(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>o||3!==c.type).map(c=>{const p=new Rm(r._firestore,r._userDataWriter,c.doc.key,c.doc,new vc(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let y=-1,b=-1;return 0!==c.type&&(y=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),b=u.indexOf(c.doc.key)),{type:Mb(c.type),doc:p,oldIndex:y,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Mb(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return it()}}function lS(n,e){return n instanceof rl&&e instanceof rl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ec&&e instanceof Ec&&n._firestore===e._firestore&&sS(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function Hi(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Re(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class il{}function la(n,...e){for(const t of e)n=t._apply(n);return n}class cS extends il{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=ah(e.firestore),r=function(o,u,c,p,y,b,D){let S;if(y.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Re(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){kv(D,b);const j=[];for(const Q of D)j.push(hp(p,o,Q));S={arrayValue:{values:j}}}else S=hp(p,o,D)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||kv(D,b),S=uS(c,"where",D,"in"===b||"not-in"===b);const P=qr.create(y,b,S);return function(j,Q){if(Q.S()){const xe=zg(j);if(null!==xe&&!xe.isEqual(Q.field))throw new Re(ge.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${xe.toString()}' and '${Q.field.toString()}'`);const ct=Fy(j);null!==ct&&gS(0,Q.field,ct)}const ye=function(xe,ct){for(const lt of xe.filters)if(ct.indexOf(lt.op)>=0)return lt.op;return null}(j,function(xe){switch(xe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Q.op));if(null!==ye)throw new Re(ge.INVALID_ARGUMENT,ye===Q.op?`Invalid query. You cannot use more than one '${Q.op.toString()}' filter.`:`Invalid query. You cannot use '${Q.op.toString()}' filters with '${ye.toString()}' filters.`)}(o,P),P}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new Zr(e.firestore,e.converter,function(o,u){const c=o.filters.concat([u]);return new zu(o.path,o.collectionGroup,o.explicitOrderBy.slice(),c,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class kb extends il{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Re(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Re(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Zu(o,u);return function(p,y){if(null===Fy(p)){const b=zg(p);null!==b&&gS(0,b,y.field)}}(r,c),c}(e._query,this._c,this.gc);return new Zr(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new zu(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class Nm extends il{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new Zr(e.firestore,e.converter,lD(e._query,this.yc,this.Ic))}}class hS extends il{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=sl(e,this.type,this.Tc,this.Ec);return new Zr(e.firestore,e.converter,(o=t,new zu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class pS extends il{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=sl(e,this.type,this.Tc,this.Ec);return new Zr(e.firestore,e.converter,(o=t,new zu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function sl(n,e,t,r){if(t[0]=(0,F.m9)(t[0]),t[0]instanceof dp)return function(o,u,c,p,y){if(!p)throw new Re(ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const b=[];for(const D of Hf(o))if(D.field.isKeyField())b.push(Vd(u,p.key));else{const S=p.data.field(D.field);if(zw(S))throw new Re(ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const P=D.field.canonicalString();throw new Re(ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${P}' (used as the orderBy) does not exist.`)}b.push(S)}return new jd(b,y)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=ah(n.firestore);return function(u,c,p,y,b,D){const S=u.explicitOrderBy;if(b.length>S.length)throw new Re(ge.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const P=[];for(let j=0;j<b.length;j++){const Q=b[j];if(S[j].field.isKeyField()){if("string"!=typeof Q)throw new Re(ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof Q}`);if(!Ly(u)&&-1!==Q.indexOf("/"))throw new Re(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${Q}' contains a slash.`);const ye=u.path.child(fn.fromString(Q));if(!Ze.isDocumentKey(ye))throw new Re(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${ye}' is not because it contains an odd number of segments.`);const xe=new Ze(ye);P.push(Vd(c,xe))}else{const ye=uS(p,y,Q);P.push(ye)}}return new jd(P,D)}(n._query,n.firestore._databaseId,o,e,t,r)}}function hp(n,e,t){if("string"==typeof(t=(0,F.m9)(t))){if(""===t)throw new Re(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ly(e)&&-1!==t.indexOf("/"))throw new Re(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(fn.fromString(t));if(!Ze.isDocumentKey(r))throw new Re(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Vd(n,new Ze(r))}if(t instanceof tr)return Vd(n,t._key);throw new Re(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cp(t)}.`)}function kv(n,e){if(!Array.isArray(n)||0===n.length)throw new Re(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Re(ge.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function gS(n,e,t){if(!t.isEqual(e))throw new Re(ge.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const nk={maxAttempts:5};class Pb{convertValue(e,t="none"){switch(Fd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Od(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw it()}}convertObject(e,t){const r={};return Pd(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new Dm(gr(e.latitude),gr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=WT(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Vg(e));default:return null}}convertTimestamp(e){const t=fo(e);return new wr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=fn.fromString(e);Nt(Pt(r));const o=new Wu(r.get(1),r.get(3)),u=new Ze(r.popFirst(5));return o.isEqual(t)||Pr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function fp(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class rk extends Pb{constructor(e){super(),this.firestore=e}convertBytes(e){return new eu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new tr(this.firestore,null,t)}}class Ob{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ah(e)}set(e,t,r){this._verifyNotCommitted();const o=ol(e,this._firestore),u=fp(o.converter,t,r),c=xv(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(c.toMutation(o._key,Fr.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=ol(e,this._firestore);let c;return c="string"==typeof(t=(0,F.m9)(t))||t instanceof nl?Rv(this._dataReader,"WriteBatch.update",u._key,t,r,o):aS(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,Fr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ol(e,this._firestore);return this._mutations=this._mutations.concat(new ac(t._key,Fr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ol(n,e){if((n=(0,F.m9)(n)).firestore!==e)throw new Re(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class ch extends Pb{constructor(e){super(),this.firestore=e}convertBytes(e){return new eu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new tr(this.firestore,null,t)}}function dh(n,e,t){n=rn(n,tr);const r=rn(n.firestore,nr),o=fp(n.converter,e,t);return hh(r,[xv(ah(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Fr.none())])}function mS(n,e,t,...r){n=rn(n,tr);const o=rn(n.firestore,nr),u=ah(o);let c;return c="string"==typeof(e=(0,F.m9)(e))||e instanceof nl?Rv(u,"updateDoc",n._key,e,t,r):aS(u,"updateDoc",n._key,e),hh(o,[c.toMutation(n._key,Fr.exists(!0))])}function Fb(n,...e){var t,r,o;n=(0,F.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||Ib(e[c])||(u=e[c],c++);const p={includeMetadataChanges:u.includeMetadataChanges};if(Ib(e[c])){const S=e[c];e[c]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[c+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[c+2]=null===(o=S.complete)||void 0===o?void 0:o.bind(S)}let y,b,D;if(n instanceof tr)b=rn(n.firestore,nr),D=$f(n._key.path),y={next:S=>{e[c]&&e[c](Ov(b,n,S))},error:e[c+1],complete:e[c+2]};else{const S=rn(n,Zr);b=rn(S.firestore,nr),D=S._query;const P=new ch(b);y={next:j=>{e[c]&&e[c](new Ec(b,P,S,j))},error:e[c+1],complete:e[c+2]},Hi(n._query)}return function(S,P,j,Q){const ye=new lp(Q),xe=new MA(P,ye,j);return S.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return mv(yield _c(S),xe)})),()=>{ye.Aa(),S.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return yv(yield _c(S),xe)}))}}(zr(b),D,p,y)}function hh(n,e){return function(t,r){const o=new ui;return t.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(n,e,t){return LA.apply(this,arguments)}(yield bb(t),r,o)})),o.promise}(zr(n),e)}function Ov(n,e,t){const r=t.docs.get(e._key),o=new ch(n);return new rl(n,o,e._key,r,new vc(t.hasPendingWrites,t.fromCache),e.converter)}class Lb extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ah(e)}get(e){const t=ol(e,this._firestore),r=new rk(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return it();const u=o[0];if(u.isFoundDocument())return new dp(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new dp(this._firestore,r,t._key,null,t.converter);throw it()})}set(e,t,r){const o=ol(e,this._firestore),u=fp(o.converter,t,r),c=xv(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,c),this}update(e,t,r,...o){const u=ol(e,this._firestore);let c;return c="string"==typeof(t=(0,F.m9)(t))||t instanceof nl?Rv(this._dataReader,"Transaction.update",u._key,t,r,o):aS(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=ol(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ol(e,this._firestore),r=new ch(this._firestore);return super.get(e).then(o=>new rl(this._firestore,r,t._key,o._document,new vc(!1,!1),t.converter))}}function Ub(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function vS(){if("undefined"==typeof Uint8Array)throw new Re("unimplemented","Uint8Arrays are not available in this environment.")}function hk(){if("undefined"==typeof atob)throw new Re("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Gu=Bi.SDK_VERSION,(0,Bi._registerComponent)(new uo.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new nr(o,new UT(t.getProvider("auth-internal")),new Lg(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,Bi.registerVersion)(OT,"3.4.9",n),(0,Bi.registerVersion)(OT,"3.4.9","esm2017")}();class Fv{constructor(e){this._delegate=e}static fromBase64String(e){return hk(),new Fv(eu.fromBase64String(e))}static fromUint8Array(e){return vS(),new Fv(eu.fromUint8Array(e))}toBase64(){return hk(),this._delegate.toBase64()}toUint8Array(){return vS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function ES(n){return function(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of["next","error","complete"])if(r in t&&"function"==typeof t[r])return!0;return!1}(n)}class fk{enableIndexedDbPersistence(e,t){return function(n,e){HM(n=rn(n,nr));const t=zr(n),r=n._freezeSettings(),o=new Iv;return oS(t,o,new WA(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(n){HM(n=rn(n,nr));const e=zr(n),t=n._freezeSettings(),r=new Iv;return oS(e,r,new IM(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(n){if(n._initialized&&!n._terminated)throw new Re(ge.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ui;return n._queue.enqueueAndForgetEvenWhileRestricted((0,be.Z)(function*(){try{yield(t=(0,be.Z)(function*(r){if(!Xo.vt())return Promise.resolve();const o=r+"main";yield Xo.delete(o)}),function(r){return t.apply(this,arguments)})(rA(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class pk{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Wu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Lf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function(n,e,t,r={}){var o;const u=(n=rn(n,Tm))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Lf("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,p;if("string"==typeof r.mockUserToken)c=r.mockUserToken,p=kr.MOCK_USER;else{c=(0,F.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Re(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new kr(y)}n._authCredentials=new Ay(new VT(c,p))}}(this._delegate,e,t,r)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,be.Z)(function*(){const e=yield wb(n),t=yield SM(n);return e.setNetworkEnabled(!0),function(r){const o=Ye(r);return o.wu.delete(0),_m(o)}(t)}))}(zr(n=rn(n,nr)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,be.Z)(function*(){const e=yield wb(n),t=yield SM(n);return e.setNetworkEnabled(!1),(r=(0,be.Z)(function*(o){const u=Ye(o);u.wu.add(0),yield th(u),u.yu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(zr(n=rn(n,nr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,nS("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(e){const t=new ui;return e.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(n,e){return nb.apply(this,arguments)}(yield bb(e),t)})),t.promise}(zr(n=rn(n,nr)))}(this._delegate)}onSnapshotsInSync(e){return function(n,e){return function(n,e){const t=new lp(e);return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return r=yield _c(n),o=t,Ye(r).bu.add(o),void o.next();var r,o})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return r=yield _c(n),o=t,void Ye(r).bu.delete(o);var r,o}))}}(zr(n=rn(n,nr)),Ib(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new k(this,MM(this._delegate,e))}catch(t){throw l(t,"collection()","Firestore.collection()")}}doc(e){try{return new a(this,Cb(this._delegate,e))}catch(t){throw l(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new w(this,function(n,e){if(n=rn(n,Tm),Cm("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Re(ge.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Zr(n,null,(t=e,new zu(fn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw l(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(n,e,t){n=rn(n,nr);const r=Object.assign(Object.assign({},nk),t);return function(o){if(o.maxAttempts<1)throw new Re(ge.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(n,e,t){const r=new ui;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){const o=yield(u=n,Dv(u).then(c=>c.datastore));var u;new DM(n.asyncQueue,o,t,e,r).run()})),r.promise}(zr(n),o=>e(new Lb(n,o)),r)}(this._delegate,t=>e(new gk(this,t)))}batch(){return zr(this._delegate),new i(new Ob(this._delegate,e=>hh(this._delegate,e)))}loadBundle(e){return function(n,e){const t=zr(n=rn(n,nr)),r=new PM;return function(n,e,t,r){const o=function(u,c){let p;return p="string"==typeof u?(new TextEncoder).encode(u):u,y=function(y,b){if(y instanceof Uint8Array)return up(y,b);if(y instanceof ArrayBuffer)return up(new Uint8Array(y),b);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new ZA(y,c);var y}(t,sp(e));n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){!function(n,e,t){const r=Ye(n);var o;(o=(0,be.Z)(function*(u,c,p){try{const y=yield c.getMetadata();if(yield function(P,j){const Q=Ye(P),ye=zt(j.createTime);return Q.persistence.runTransaction("hasNewerBundle","readonly",xe=>Q._s.getBundleMetadata(xe,j.id)).then(xe=>!!xe&&xe.createTime.compareTo(ye)>=0)}(u.localStore,y))return yield c.close(),p._completeWith({taskState:"Success",documentsLoaded:(P=y).totalDocuments,bytesLoaded:P.totalBytes,totalDocuments:P.totalDocuments,totalBytes:P.totalBytes}),Promise.resolve(new Set);p._updateProgress(_M(y));const b=new mM(y,u.localStore,c.M);let D=yield c.ma();for(;D;){const P=yield b.Fu(D);P&&p._updateProgress(P),D=yield c.ma()}const S=yield b.complete();return yield tl(u,S.Lu,void 0),yield function(P,j){const Q=Ye(P);return Q.persistence.runTransaction("Save bundle","readwrite",ye=>Q._s.saveBundleMetadata(ye,j))}(u.localStore,y),p._completeWith(S.progress),Promise.resolve(S.Bu)}catch(y){return Lf("SyncEngine",`Loading bundle failed with ${y}`),p._failWith(y),Promise.resolve(new Set)}var P}),function(u,c,p){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield bb(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function(n,e){return function(n,e){return n.asyncQueue.enqueue((0,be.Z)(function*(){return function(t,r){const o=Ye(t);return o.persistence.runTransaction("Get named query","readonly",u=>o._s.getNamedQuery(u,r))}(yield KA(n),e)}))}(zr(n=rn(n,nr)),e).then(t=>t?new Zr(n,null,t.query):null)}(this._delegate,e).then(t=>t?new w(this,t):null)}}class Bb extends Pb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fv(new eu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return a.forKey(t,this.firestore,null)}}class gk{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Bb(e)}get(e){const t=L(e);return this._delegate.get(t).then(r=>new m(this._firestore,new rl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=L(e);return r?(Ub("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=L(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=L(e);return this._delegate.delete(t),this}}class i{constructor(e){this._delegate=e}set(e,t,r){const o=L(e);return r?(Ub("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=L(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=L(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class s{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Rm(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new v(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=s.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new s(e,new Bb(e),t),o.set(t,u)),u}}s.INSTANCES=new WeakMap;class a{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Bb(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new a(t,new tr(t._delegate,r,new Ze(e)))}static forKey(e,t,r){return new a(t,new tr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new k(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new k(this.firestore,MM(this._delegate,e))}catch(t){throw l(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,F.m9)(e))instanceof tr&&iS(this._delegate,e)}set(e,t){t=Ub("DocumentReference.set",t);try{return t?dh(this._delegate,e,t):dh(this._delegate,e)}catch(r){throw l(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?mS(this._delegate,e):mS(this._delegate,e,t,...r)}catch(o){throw l(o,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return hh(rn(n.firestore,nr),[new ac(n._key,Fr.none())])}(this._delegate)}onSnapshot(...e){const t=d(e),r=h(e,o=>new m(this.firestore,new rl(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return Fb(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=rn(n,tr);const e=rn(n.firestore,nr),t=zr(e),r=new ch(e);return function(n,e){const t=new ui;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return(r=(0,be.Z)(function*(o,u,c){try{const p=yield function(y,b){const D=Ye(y);return D.persistence.runTransaction("read document","readonly",S=>D.fi.Ls(S,b))}(o,u);p.isFoundDocument()?c.resolve(p):p.isNoDocument()?c.resolve(null):c.reject(new Re(ge.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const y=mc(p,`Failed to get document '${u} from cache`);c.reject(y)}}),function(o,u,c){return r.apply(this,arguments)})(yield KA(n),e,t);var r})),t.promise}(t,n._key).then(o=>new rl(e,r,n._key,o,new vc(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=rn(n,tr);const e=rn(n.firestore,nr);return JA(zr(e),n._key,{source:"server"}).then(t=>Ov(e,n,t))}(this._delegate):function(n){n=rn(n,tr);const e=rn(n.firestore,nr);return JA(zr(e),n._key).then(t=>Ov(e,n,t))}(this._delegate),t.then(r=>new m(this.firestore,new rl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new a(this.firestore,this._delegate.withConverter(e?s.getInstance(this.firestore,e):null))}}function l(n,e,t){return n.message=n.message.replace(e,t),n}function d(n){for(const e of n)if("object"==typeof e&&!ES(e))return e;return{}}function h(n,e){var t,r;let o;return o=ES(n[0])?n[0]:ES(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class m{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new a(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return lS(this._delegate,e._delegate)}}class v extends m{data(e){const t=this._delegate.data(e);return function(n,e){n||it()}(void 0!==t),t}}class w{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Bb(e)}where(e,t,r){try{return new w(this.firestore,la(this._delegate,function(n,e,t){const r=e,o=Nv("where",n);return new cS(o,r,t)}(e,t,r)))}catch(o){throw l(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new w(this.firestore,la(this._delegate,function(n,e="asc"){const t=e,r=Nv("orderBy",n);return new kb(r,t)}(e,t)))}catch(r){throw l(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new w(this.firestore,la(this._delegate,function(n){return Wr("limit",n),new Nm("limit",n,"F")}(e)))}catch(t){throw l(t,"limit()","Query.limit()")}}limitToLast(e){try{return new w(this.firestore,la(this._delegate,function(n){return Wr("limitToLast",n),new Nm("limitToLast",n,"L")}(e)))}catch(t){throw l(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new w(this.firestore,la(this._delegate,function(...n){return new hS("startAt",n,!0)}(...e)))}catch(t){throw l(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new w(this.firestore,la(this._delegate,function(...n){return new hS("startAfter",n,!1)}(...e)))}catch(t){throw l(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new w(this.firestore,la(this._delegate,function(...n){return new pS("endBefore",n,!1)}(...e)))}catch(t){throw l(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new w(this.firestore,la(this._delegate,function(...n){return new pS("endAt",n,!0)}(...e)))}catch(t){throw l(t,"endAt()","Query.endAt()")}}isEqual(e){return sS(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=rn(n,Zr);const e=rn(n.firestore,nr),t=zr(e),r=new ch(e);return function(n,e){const t=new ui;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return(r=(0,be.Z)(function*(o,u,c){try{const p=yield av(o,u,!0),y=new yM(u,p._i),b=y.Wu(p.documents),D=y.applyChanges(b,!1);c.resolve(D.snapshot)}catch(p){const y=mc(p,`Failed to execute query '${u} against cache`);c.reject(y)}}),function(o,u,c){return r.apply(this,arguments)})(yield KA(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Ec(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=rn(n,Zr);const e=rn(n.firestore,nr),t=zr(e),r=new ch(e);return XA(t,n._query,{source:"server"}).then(o=>new Ec(e,r,n,o))}(this._delegate):function(n){n=rn(n,Zr);const e=rn(n.firestore,nr),t=zr(e),r=new ch(e);return Hi(n._query),XA(t,n._query).then(o=>new Ec(e,r,n,o))}(this._delegate),t.then(r=>new x(this.firestore,new Ec(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=d(e),r=h(e,o=>new x(this.firestore,new Ec(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return Fb(this._delegate,t,r)}withConverter(e){return new w(this.firestore,this._delegate.withConverter(e?s.getInstance(this.firestore,e):null))}}class T{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new v(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class x{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new w(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new v(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new T(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new v(this._firestore,r))})}isEqual(e){return lS(this._delegate,e._delegate)}}class k extends w{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new a(this.firestore,e):null}doc(e){try{return new a(this.firestore,void 0===e?Cb(this._delegate):Cb(this._delegate,e))}catch(t){throw l(t,"doc()","CollectionReference.doc()")}}add(e){return function(n,e){const t=rn(n.firestore,nr),r=Cb(n),o=fp(n.converter,e);return hh(t,[xv(ah(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Fr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new a(this.firestore,t))}isEqual(e){return iS(this._delegate,e._delegate)}withConverter(e){return new k(this.firestore,this._delegate.withConverter(e?s.getInstance(this.firestore,e):null))}}function L(n){return rn(n,tr)}class q{constructor(...e){this._delegate=new nl(...e)}static documentId(){return new q(Or.keyField().canonicalString())}isEqual(e){return(e=(0,F.m9)(e))instanceof nl&&this._delegate._internalPath.isEqual(e._internalPath)}}class Y{constructor(e){this._delegate=e}static serverTimestamp(){const e=new Ab("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Y(e)}static delete(){const e=new Am("deleteField");return e._methodName="FieldValue.delete",new Y(e)}static arrayUnion(...e){const t=function(...n){return new zM("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Y(t)}static arrayRemove(...e){const t=function(...n){return new KM("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Y(t)}static increment(e){const t=function(n){return new ua("increment",n)}(e);return t._methodName="FieldValue.increment",new Y(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const he={Firestore:pk,GeoPoint:Dm,Timestamp:wr,Blob:Fv,Transaction:gk,WriteBatch:i,DocumentReference:a,DocumentSnapshot:m,Query:w,QueryDocumentSnapshot:v,QuerySnapshot:x,CollectionReference:k,FieldPath:q,FieldValue:Y,setLogLevel:function(n){!function(n){Sn.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function(n){(function(n,e){n.INTERNAL.registerComponent(new uo.wA("firestore-compat",t=>((e,t)=>new pk(e,t,new fk))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},he)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.18")}(kI.Z);var Ie=V(6682),ot=V(309),St=V(7771),en=V(8858);class Kr extends cs.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new _o(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,r=t?this._events:this._trimBufferThenGetEvents(),o=this.scheduler,u=r.length;let c;if(this.closed)throw new xa.N;if(this.isStopped||this.hasError?c=Gh.w.EMPTY:(this.observers.push(e),c=new en.W(this,e)),o&&e.add(e=new ot.ht(e,o)),t)for(let p=0;p<u&&!e.closed;p++)e.next(r[p]);else for(let p=0;p<u&&!e.closed;p++)e.next(r[p].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),c}_getNow(){return(this.scheduler||St.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,r=this._windowTime,o=this._events,u=o.length;let c=0;for(;c<u&&!(e-o[c].time<r);)c++;return u>t&&(c=Math.max(c,u-t)),c>0&&o.splice(0,c),o}}class _o{constructor(e,t){this.time=e,this.value=t}}function gp(n,e,t){let r;return r=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},o=>o.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:r}){let o,c,u=0,p=!1,y=!1;return function(D){let S;u++,!o||p?(p=!1,o=new Kr(n,e,r),S=o.subscribe(this),c=D.subscribe({next(P){o.next(P)},error(P){p=!0,o.error(P)},complete(){y=!0,c=void 0,o.complete()}}),y&&(c=void 0)):S=o.subscribe(this),this.add(()=>{u--,S.unsubscribe(),S=void 0,c&&!y&&t&&0===u&&(c.unsubscribe(),c=void 0,o=void 0)})}}(r))}function ph(n,e){return e?lr(()=>n,e):lr(()=>n)}var wc=V(3101);V(2329);const fO=new Map,iU={activated:!1,tokenObservers:[]},sU={initialized:!1,enabled:!1};function Gi(n){return fO.get(n)||iU}function ul(n,e){fO.set(n,e)}function bS(){return sU}class cU{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,be.Z)(function*(){t.stop();try{t.pending=new F.BH,yield function(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new F.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Us=new F.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function gO(n){if(!Gi(n).activated)throw Us.create("use-before-activation",{appName:n.name})}function vk(n,e){return Ek.apply(this,arguments)}function Ek(){return(Ek=(0,be.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const S=yield o.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const u={method:"POST",body:JSON.stringify(e),headers:r};let c,p;try{c=yield fetch(n,u)}catch(S){throw Us.create("fetch-network-error",{originalErrorMessage:S.message})}if(200!==c.status)throw Us.create("fetch-status-error",{httpStatus:c.status});try{p=yield c.json()}catch(S){throw Us.create("fetch-parse-error",{originalErrorMessage:S.message})}const y=p.ttl.match(/^([\d.]+)(s)$/);if(!y||!y[2]||isNaN(Number(y[1])))throw Us.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${p.ttl}`});const b=1e3*Number(y[1]),D=Date.now();return{token:p.token,expireTimeMillis:D+b,issuedAtTimeMillis:D}})).apply(this,arguments)}function mU(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const Hb="firebase-app-check-store";let TS=null;function _O(){return TS||(TS=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(Us.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{const o=r.target.result;switch(r.oldVersion){case 0:o.createObjectStore(Hb,{keyPath:"compositeKey"})}}}catch(t){e(Us.create("storage-open",{originalErrorMessage:t.message}))}}),TS)}function wk(){return(wk=(0,be.Z)(function*(n,e){const r=(yield _O()).transaction(Hb,"readwrite"),u=r.objectStore(Hb).put({compositeKey:n,value:e});return new Promise((c,p)=>{u.onsuccess=y=>{c()},r.onerror=y=>{var b;p(Us.create("storage-set",{originalErrorMessage:null===(b=y.target.error)||void 0===b?void 0:b.message}))}})})).apply(this,arguments)}const Gb=new ao.Yd("@firebase/app-check");function wO(n,e){return(0,F.hl)()?function(n,e){return function(n,e){return wk.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Gb.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function bO(){return bS().enabled}function CO(){return Tk.apply(this,arguments)}function Tk(){return(Tk=(0,be.Z)(function*(){const n=bS();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const DU={error:"UNKNOWN_ERROR"};function AU(n){return F.US.encodeString(JSON.stringify(n),!1)}function DS(n){return Dk.apply(this,arguments)}function Dk(){return(Dk=(0,be.Z)(function*(n,e=!1){const t=n.app;gO(t);const r=Gi(t);let u,o=r.token;if(!o){const y=yield r.cachedTokenPromise;y&&AS(y)&&(o=y)}if(!e&&o&&AS(o))return{token:o.token};let p,c=!1;if(bO()){r.exchangeTokenPromise||(r.exchangeTokenPromise=vk(mU(t,yield CO()),n.heartbeatServiceProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),c=!0);const y=yield r.exchangeTokenPromise;return yield wO(t,y),ul(t,Object.assign(Object.assign({},r),{token:y})),{token:y.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(y=>(r.exchangeTokenPromise=void 0,y)),c=!0),o=yield r.exchangeTokenPromise}catch(y){"appCheck/throttled"===y.code?Gb.warn(y.message):Gb.error(y),u=y}return o?(p={token:o.token},ul(t,Object.assign(Object.assign({},r),{token:o})),yield wO(t,o)):p=xU(u),c&&TO(t,p),p})).apply(this,arguments)}function Sk(n,e){const t=Gi(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),ul(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function IO(n){const{app:e}=n,t=Gi(e);let r=t.tokenRefresher;r||(r=function(n){const{app:e}=n;return new cU((0,be.Z)(function*(){let r;if(r=Gi(e).token?yield DS(n,!0):yield DS(n),r.error)throw r.error}),()=>!0,()=>{const t=Gi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),ul(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function TO(n,e){const t=Gi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function AS(n){return n.expireTimeMillis-Date.now()>0}function xU(n){return{token:AU(DU),error:n}}class RU{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Gi(this.app);for(const t of e)Sk(this.app,t.next);return Promise.resolve()}}const kO="app-check-internal";(0,Bi._registerComponent)(new uo.wA("app-check",n=>function(n,e){return new RU(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(kO).initialize()})),(0,Bi._registerComponent)(new uo.wA(kO,n=>function(n){return{getToken:e=>DS(n,e),addTokenListener:e=>function(n,e,t,r){const{app:o}=n,u=Gi(o),c={next:t,error:r,type:e};if(ul(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,c]})),u.token&&AS(u.token)){const p=u.token;Promise.resolve().then(()=>{t({token:p.token}),IO(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>IO(n))}(n,"INTERNAL",e),removeTokenListener:e=>Sk(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Bi.registerVersion)("@firebase/app-check","0.5.8");class qb{constructor(){return(0,bn.vb)("app-check")}}"undefined"!=typeof window&&window;var xS=V(7841);const kk=new f.OlP("angularfire2.auth.use-emulator"),Pk=new f.OlP("angularfire2.auth.settings"),Ok=new f.OlP("angularfire2.auth.tenant-id"),Fk=new f.OlP("angularfire2.auth.langugage-code"),Lk=new f.OlP("angularfire2.auth.use-device-language"),Vk=new f.OlP("angularfire.auth.persistence"),Uk=(n,e,t,r,o,u,c,p)=>(0,Hr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const y=e.runOutsideAngular(()=>n.auth());if(t&&y.useEmulator(...t),r&&(y.tenantId=r),y.languageCode=o,u&&y.useDeviceLanguage(),c)for(const[b,D]of Object.entries(c))y.settings[b]=D;return p&&y.setPersistence(p),y},[t,r,o,u,c,p]);let Wb=(()=>{class n{constructor(t,r,o,u,c,p,y,b,D,S,P,j){const Q=new cs.xQ,ye=(0,ut.of)(void 0).pipe((0,ot.QV)(c.outsideAngular),lr(()=>u.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,4828)))),(0,At.U)(()=>(0,Hr.on)(t,u,r)),(0,At.U)(xe=>Uk(xe,u,p,b,D,S,y,P)),gp({bufferSize:1,refCount:!1}));if(va(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ut.of)(null);else{ye.pipe(Li()).subscribe();const ct=ye.pipe(lr(st=>st.getRedirectResult().then(jt=>jt,()=>null)),bn.iC,gp({bufferSize:1,refCount:!1})),lt=ye.pipe(lr(st=>new vr.y(jt=>({unsubscribe:u.runOutsideAngular(()=>st.onAuthStateChanged(on=>jt.next(on),on=>jt.error(on),()=>jt.complete()))})))),nt=ye.pipe(lr(st=>new vr.y(jt=>({unsubscribe:u.runOutsideAngular(()=>st.onIdTokenChanged(on=>jt.next(on),on=>jt.error(on),()=>jt.complete()))}))));this.authState=ct.pipe(ph(lt),(0,wc.R)(c.outsideAngular),(0,ot.QV)(c.insideAngular)),this.user=ct.pipe(ph(nt),(0,wc.R)(c.outsideAngular),(0,ot.QV)(c.insideAngular)),this.idToken=this.user.pipe(lr(st=>st?(0,Ut.D)(st.getIdToken()):(0,ut.of)(null))),this.idTokenResult=this.user.pipe(lr(st=>st?(0,Ut.D)(st.getIdTokenResult()):(0,ut.of)(null))),this.credential=(0,Ie.T)(ct,Q,this.authState.pipe(Oi(st=>!st))).pipe((0,At.U)(st=>(null==st?void 0:st.user)?st:null),(0,wc.R)(c.outsideAngular),(0,ot.QV)(c.insideAngular))}return(0,Hr.pX)(this,ye,u,{spy:{apply:(xe,ct,lt)=>{(xe.startsWith("signIn")||xe.startsWith("createUser"))&&lt.then(nt=>Q.next(nt))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Hr.Dh),f.LFG(Hr.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(bn.HU),f.LFG(kk,8),f.LFG(Pk,8),f.LFG(Ok,8),f.LFG(Fk,8),f.LFG(Lk,8),f.LFG(Vk,8),f.LFG(qb,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),YU=(()=>{class n{constructor(){xS.Z.registerVersion("angularfire",bn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[Wb]}),n})();function OO(n,e){return function(n,e=fw.z){return new vr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function Bk(n,e){return OO(n,e).pipe((0,At.U)(t=>({payload:t,type:"query"})))}function RS(n,e){return Bk(n,e).pipe(Cu(void 0),pw(),(0,At.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,p)=>{const y=o.find(D=>D.doc.ref.isEqual(c.ref)),b=null==t?void 0:t.payload.docs.find(D=>D.ref.isEqual(c.ref));y&&JSON.stringify(y.doc.metadata)===JSON.stringify(c.metadata)||!y&&b&&JSON.stringify(b.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:c}})}),u}))}function FO(n,e,t){return RS(n,t).pipe(Na((r,o)=>function(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return jk(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return jk(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return jk(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),RR(),(0,At.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function jk(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function LO(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class VO{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=RS(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,At.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(Cu(void 0),pw(),Oi(([r,o])=>o.length>0||!r),(0,At.U)(([r,o])=>o),bn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Na((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=LO(e);return FO(this.query,t,this.afs.schedulers.outsideAngular).pipe(bn.iC)}valueChanges(e={}){return Bk(this.query,this.afs.schedulers.outsideAngular).pipe((0,At.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),bn.iC)}get(e){return(0,Ut.D)(this.query.get(e)).pipe(bn.iC)}add(e){return this.ref.add(e)}doc(e){return new UO(this.ref.doc(e),this.afs)}}class UO{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=$O(r,t);return new VO(o,u,this.afs)}snapshotChanges(){return function(n,e){return OO(n,e).pipe(Cu(void 0),pw(),(0,At.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(bn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,At.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Ut.D)(this.ref.get(e)).pipe(bn.iC)}}class t2{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?RS(this.query,this.afs.schedulers.outsideAngular).pipe((0,At.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Oi(t=>t.length>0),bn.iC):RS(this.query,this.afs.schedulers.outsideAngular).pipe(bn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Na((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=LO(e);return FO(this.query,t,this.afs.schedulers.outsideAngular).pipe(bn.iC)}valueChanges(e={}){return Bk(this.query,this.afs.schedulers.outsideAngular).pipe((0,At.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),bn.iC)}get(e){return(0,Ut.D)(this.query.get(e)).pipe(bn.iC)}}const BO=new f.OlP("angularfire2.enableFirestorePersistence"),jO=new f.OlP("angularfire2.firestore.persistenceSettings"),n2=new f.OlP("angularfire2.firestore.settings"),r2=new f.OlP("angularfire2.firestore.use-emulator");function $O(n,e=(t=>t)){return{query:e(n),ref:n}}let HO=(()=>{class n{constructor(t,r,o,u,c,p,y,b,D,S,P,j,Q,ye,xe,ct,lt){this.schedulers=y;const nt=(0,Hr.on)(t,p,r),st=D;S&&Uk(nt,p,P,Q,ye,xe,j,ct),[this.firestore,this.persistenceEnabled$]=(0,Hr.cc)(`${nt.name}.firestore`,"AngularFirestore",nt.name,()=>{const jt=p.runOutsideAngular(()=>nt.firestore());if(u&&jt.settings(u),st&&jt.useEmulator(...st),o&&!va(c)){const on=()=>{try{return(0,Ut.D)(jt.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(ci){return"undefined"!=typeof console&&console.warn(ci),(0,ut.of)(!1)}};return[jt,p.runOutsideAngular(on)]}return[jt,(0,ut.of)(!1)]},[u,st,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=$O(o,r),p=this.schedulers.ngZone.run(()=>u);return new VO(p,c,this)}collectionGroup(t,r){const o=r||(c=>c),u=this.firestore.collectionGroup(t);return new t2(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new UO(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Hr.Dh),f.LFG(Hr.xv,8),f.LFG(BO,8),f.LFG(n2,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(bn.HU),f.LFG(jO,8),f.LFG(r2,8),f.LFG(Wb,8),f.LFG(kk,8),f.LFG(Pk,8),f.LFG(Ok,8),f.LFG(Fk,8),f.LFG(Lk,8),f.LFG(Vk,8),f.LFG(qb,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),i2=(()=>{class n{constructor(){xS.Z.registerVersion("angularfire",bn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:BO,useValue:!0},{provide:jO,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[HO]}),n})(),yp=(()=>{class n{constructor(t,r,o,u){this.afs=t,this.afAuth=r,this.router=o,this.ngZone=u,this.afAuth.authState.subscribe(c=>{c?(console.log(typeof c),this.userData=c,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(o=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(o.user)}).catch(o=>{window.alert(o.message)})}SignUp(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r).then(o=>{this.SendVerificationMail(),this.SetUserData(o.user)}).catch(o=>{window.alert(o.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}GoogleAuth(){return this.AuthLogin(new hw.Q).then(t=>{t&&this.router.navigate(["dashboard"])})}AuthLogin(t){return this.afAuth.signInWithPopup(t).then(r=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(r.user)}).catch(r=>{window.alert(r)})}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(HO),f.LFG(Wb),f.LFG(Mr),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function s2(n,e){if(1&n&&(f.TgZ(0,"div",4),f.TgZ(1,"div",18),f.TgZ(2,"div",19),f._UZ(3,"img",20),f.TgZ(4,"div",21),f.TgZ(5,"h1"),f._uU(6,"Hello: "),f.TgZ(7,"strong"),f._uU(8),f.qZA(),f.qZA(),f.TgZ(9,"p"),f._uU(10,"User ID: "),f.TgZ(11,"strong"),f._uU(12),f.qZA(),f.qZA(),f.TgZ(13,"p"),f._uU(14,"Email: "),f.TgZ(15,"strong"),f._uU(16),f.qZA(),f.qZA(),f.TgZ(17,"p"),f._uU(18,"Email Verified: "),f.TgZ(19,"strong"),f._uU(20),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&n){const t=e.ngIf;f.xp6(3),f.s9C("src",t.photoURL?t.photoURL:"/assets/dummy-user.png",f.LSH),f.s9C("alt",t.displayName),f.xp6(5),f.Oqu(t.displayName?t.displayName:"User"),f.xp6(4),f.Oqu(t.uid),f.xp6(4),f.Oqu(t.email),f.xp6(4),f.Oqu(t.emailVerified)}}let o2=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(yp))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-dashboard"]],decls:22,vars:1,consts:[[1,"navbar","navbar-dark","fixed-top","bg-dark","flex-md-nowrap","p-0","shadow"],[1,"navbar-brand","col-sm-3","col-md-2","mr-0"],["src","assets/logo-positronx-white.svg","alt","Logo",1,"brand-logo"],[1,"container-fluid"],[1,"row"],[1,"col-md-2","d-md-block","bg-light","sidebar"],[1,"sidebar-sticky"],[1,"nav","flex-column"],[1,"nav-item"],[1,"nav-link","active"],[1,"fas","fa-user"],[1,"nav-link",3,"click"],[1,"fas","fa-sign-out-alt"],["role","main",1,"col-md-9","ml-sm-auto","col-lg-10","px-4"],[1,"inner-adjust"],[1,"pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],["class","row",4,"ngIf"],[1,"col-md-12"],[1,"media"],[1,"align-self-start","mr-5","img-thumbnail","rounded-circle",3,"src","alt"],[1,"media-body"]],template:function(t,r){1&t&&(f.TgZ(0,"nav",0),f.TgZ(1,"a",1),f._UZ(2,"img",2),f.qZA(),f.qZA(),f.TgZ(3,"div",3),f.TgZ(4,"div",4),f.TgZ(5,"nav",5),f.TgZ(6,"div",6),f.TgZ(7,"ul",7),f.TgZ(8,"li",8),f.TgZ(9,"a",9),f._UZ(10,"i",10),f._uU(11,"User Profile "),f.qZA(),f.qZA(),f.TgZ(12,"li",8),f.TgZ(13,"a",11),f.NdJ("click",function(){return r.authService.SignOut()}),f._UZ(14,"i",12),f._uU(15,"Log out "),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(16,"main",13),f.TgZ(17,"div",14),f.TgZ(18,"div",15),f.TgZ(19,"h1",16),f._uU(20,"User Profile"),f.qZA(),f.qZA(),f.YNc(21,s2,21,6,"div",17),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&t&&(f.xp6(21),f.Q6J("ngIf",r.authService.userData))},directives:[qs],styles:[""]}),n})(),a2=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(yp))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-forgot-password"]],decls:17,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"text-center"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["passwordResetEmail",""],["type","submit","value","Reset Password",1,"btn","btnPrimary",3,"click"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,r){if(1&t){const o=f.EpF();f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"div",2),f.TgZ(3,"h3"),f._uU(4,"Reset Password"),f.qZA(),f.TgZ(5,"p",3),f._uU(6,"Please enter your email address to request a password reset."),f.qZA(),f.TgZ(7,"div",4),f._UZ(8,"input",5,6),f.qZA(),f.TgZ(10,"div",4),f.TgZ(11,"input",7),f.NdJ("click",function(){f.CHM(o);const c=f.MAs(9);return r.authService.ForgotPassword(c.value)}),f.qZA(),f.qZA(),f.qZA(),f.TgZ(12,"div",8),f.TgZ(13,"span"),f._uU(14,"Go back to ? "),f.TgZ(15,"span",9),f._uU(16,"Log In"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()}},directives:[Gl],styles:[""]}),n})(),u2=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(yp))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-sign-in"]],decls:43,vars:0,consts:[[1,"header"],["routerLink","",1,"logo"],[1,"header-right"],["routerLink","/home","routerLinkActive","active"],["routerLink","/contact","routerLinkActive","active"],["routerLink","/about","routerLinkActive","active"],["routerLink","/register-user","routerLinkActive","active"],["routerLink","/sign-in","routerLinkActive","active"],[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","text","placeholder","Username","required","",1,"formControl"],["userName",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPassword",""],["type","button","value","Log in",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],["type","button",1,"btn","googleBtn",3,"click"],[1,"fab","fa-google-plus-g"],[1,"forgotPassword"],["routerLink","/forgot-password"],[1,"redirectToLogin"],["routerLink","/register-user",1,"redirect"]],template:function(t,r){if(1&t){const o=f.EpF();f.TgZ(0,"div",0),f.TgZ(1,"a",1),f._uU(2,"Logo"),f.qZA(),f.TgZ(3,"div",2),f.TgZ(4,"a",3),f._uU(5,"Home"),f.qZA(),f.TgZ(6,"a",4),f._uU(7,"Contact"),f.qZA(),f.TgZ(8,"a",5),f._uU(9,"About"),f.qZA(),f.TgZ(10,"a",6),f._uU(11,"Sign Up"),f.qZA(),f.TgZ(12,"a",7),f._uU(13,"Sign In"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(14,"div",8),f.TgZ(15,"div",9),f.TgZ(16,"div",10),f.TgZ(17,"h3"),f._uU(18,"Sign In"),f.qZA(),f.TgZ(19,"div",11),f._UZ(20,"input",12,13),f.qZA(),f.TgZ(22,"div",11),f._UZ(23,"input",14,15),f.qZA(),f.TgZ(25,"div",11),f.TgZ(26,"input",16),f.NdJ("click",function(){f.CHM(o);const c=f.MAs(21),p=f.MAs(24);return r.authService.SignIn(c.value,p.value)}),f.qZA(),f.qZA(),f.TgZ(27,"div",11),f.TgZ(28,"span",17),f.TgZ(29,"span",18),f._uU(30,"Or"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(31,"div",11),f.TgZ(32,"button",19),f.NdJ("click",function(){return r.authService.GoogleAuth()}),f._UZ(33,"i",20),f._uU(34," Log in with Google "),f.qZA(),f.qZA(),f.TgZ(35,"div",21),f.TgZ(36,"span",22),f._uU(37,"Forgot Password?"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(38,"div",23),f.TgZ(39,"span"),f._uU(40,"Don't have an account?"),f.TgZ(41,"span",24),f._uU(42," Sign Up"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()}},directives:[$a,_d,Gl],styles:[""]}),n})(),l2=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(yp))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-sign-up"]],decls:40,vars:0,consts:[[1,"header"],["routerLink","",1,"logo"],[1,"header-right"],["routerLink","/home","routerLinkActive","active"],["routerLink","/contact","routerLinkActive","active"],["routerLink","/about","routerLinkActive","active"],["routerLink","/register-user","routerLinkActive","active"],["routerLink","/sign-in","routerLinkActive","active"],[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["userEmail",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPwd",""],["type","button","value","Sign Up",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],["type","button",1,"btn","googleBtn",3,"click"],[1,"fab","fa-google-plus-g"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,r){if(1&t){const o=f.EpF();f.TgZ(0,"div",0),f.TgZ(1,"a",1),f._uU(2,"Logo"),f.qZA(),f.TgZ(3,"div",2),f.TgZ(4,"a",3),f._uU(5,"Home"),f.qZA(),f.TgZ(6,"a",4),f._uU(7,"Contact"),f.qZA(),f.TgZ(8,"a",5),f._uU(9,"About"),f.qZA(),f.TgZ(10,"a",6),f._uU(11,"Sign Up"),f.qZA(),f.TgZ(12,"a",7),f._uU(13,"Sign In"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(14,"div",8),f.TgZ(15,"div",9),f.TgZ(16,"div",10),f.TgZ(17,"h3"),f._uU(18,"Sign Up"),f.qZA(),f.TgZ(19,"div",11),f._UZ(20,"input",12,13),f.qZA(),f.TgZ(22,"div",11),f._UZ(23,"input",14,15),f.qZA(),f.TgZ(25,"div",11),f.TgZ(26,"input",16),f.NdJ("click",function(){f.CHM(o);const c=f.MAs(21),p=f.MAs(24);return r.authService.SignUp(c.value,p.value)}),f.qZA(),f.qZA(),f.TgZ(27,"div",11),f.TgZ(28,"span",17),f.TgZ(29,"span",18),f._uU(30,"Or"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(31,"div",11),f.TgZ(32,"button",19),f.NdJ("click",function(){return r.authService.GoogleAuth()}),f._UZ(33,"i",20),f._uU(34," Continue with Google "),f.qZA(),f.qZA(),f.qZA(),f.TgZ(35,"div",21),f.TgZ(36,"span"),f._uU(37,"Already have an account? "),f.TgZ(38,"span",22),f._uU(39,"Log In"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()}},directives:[$a,_d,Gl],styles:[""]}),n})();function c2(n,e){if(1&n&&(f.TgZ(0,"div",4),f.TgZ(1,"p",9),f._uU(2,"We have sent a confirmation email to "),f.TgZ(3,"strong"),f._uU(4),f.qZA(),f._uU(5,"."),f.qZA(),f.TgZ(6,"p",9),f._uU(7,"Please check your email and click on the link to verfiy your email address."),f.qZA(),f.qZA()),2&n){const t=e.ngIf;f.xp6(4),f.Oqu(t.email)}}let d2=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(yp))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-verify-email"]],decls:15,vars:1,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],["class","formGroup",4,"ngIf"],[1,"formGroup"],["type","button",1,"btn","btnPrimary",3,"click"],[1,"fas","fa-redo-alt"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"],[1,"text-center"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"div",2),f.TgZ(3,"h3"),f._uU(4,"Thank You for Registering"),f.qZA(),f.YNc(5,c2,8,1,"div",3),f.TgZ(6,"div",4),f.TgZ(7,"button",5),f.NdJ("click",function(){return r.authService.SendVerificationMail()}),f._UZ(8,"i",6),f._uU(9," Resend Verification Email "),f.qZA(),f.qZA(),f.qZA(),f.TgZ(10,"div",7),f.TgZ(11,"span"),f._uU(12,"Go back to?"),f.TgZ(13,"span",8),f._uU(14," Sign in"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&t&&(f.xp6(5),f.Q6J("ngIf",r.authService.userData))},directives:[qs,Gl],styles:[""]}),n})(),h2=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return!0===this.authService.isLoggedIn||(this.router.navigate(["sign-in"]),!1)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(yp),f.LFG(Mr))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),km=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return 1!=this.authService.isLoggedIn||(this.router.navigate(["dashboard"]),!1)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(yp),f.LFG(Mr))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const f2=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"home",component:Dg,canActivate:[km]},{path:"sign-in",component:u2,canActivate:[km]},{path:"register-user",component:l2,canActivate:[km]},{path:"dashboard",component:o2,canActivate:[h2]},{path:"forgot-password",component:a2,canActivate:[km]},{path:"verify-email-address",component:d2,canActivate:[km]},{path:"contact",component:AR,canActivate:[km]},{path:"about",component:SR,canActivate:[km]},{path:"**",component:Xx}];let p2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[$C.forRoot(f2)],$C]}),n})(),g2=(()=>{class n{constructor(){this.title="portal"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},directives:[cf],styles:[""]}),n})();class _2{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new y2(e,this.dueTime,this.scheduler))}}class y2 extends ii.L{constructor(e,t,r){super(e),this.dueTime=t,this.scheduler=r,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(v2,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function v2(n){n.debouncedNext()}const GO="firebasestorage.googleapis.com",qO="storageBucket";class Ur extends F.ZR{constructor(e,t){super($k(e),`Firebase Storage: ${t} (${$k(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ur.prototype)}_codeEquals(e){return $k(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function $k(n){return"storage/"+n}function Hk(){return new Ur("unknown","An unknown error occurred, please check the error payload for server response.")}function WO(){return new Ur("canceled","User canceled the upload/download.")}function ZO(){return new Ur("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Vv(n){return new Ur("invalid-argument",n)}function zO(){return new Ur("app-deleted","The Firebase app was deleted.")}function KO(n){return new Ur("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Zb(n,e){return new Ur("invalid-format","String does not match format '"+n+"': "+e)}function zb(n){throw new Ur("internal-error","Internal error: "+n)}class ys{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ys.makeFromUrl(e,t)}catch(o){return new ys(e,"")}if(""===r.path)return r;throw function(n){return new Ur("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const o="([A-Za-z0-9.\\-_]+)",p=new RegExp("^gs://"+o+"(/(.*))?$","i");function b(st){st.path_=decodeURIComponent(st.path)}const S=t.replace(/[.]/g,"\\."),nt=[{regex:p,indices:{bucket:1,path:3},postModify:function(st){"/"===st.path.charAt(st.path.length-1)&&(st.path_=st.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${o}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:b},{regex:new RegExp(`^https?://${t===GO?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${o}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:b}];for(let st=0;st<nt.length;st++){const jt=nt[st],on=jt.regex.exec(e);if(on){let pl=on[jt.indices.path];pl||(pl=""),r=new ys(on[jt.indices.bucket],pl),jt.postModify(r);break}}if(null==r)throw function(n){return new Ur("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class k2{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function NS(n){return"string"==typeof n||n instanceof String}function YO(n){return Gk()&&n instanceof Blob}function Gk(){return"undefined"!=typeof Blob}function qk(n,e,t,r){if(r<e)throw Vv(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Vv(`Invalid value for '${n}'. Expected ${t} or less.`)}function gh(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function QO(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var vp=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(vp||(vp={})),vp))();class U2{constructor(e,t,r,o,u,c,p,y,b,D,S){this.url_=e,this.method_=t,this.headers_=r,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=c,this.callback_=p,this.errorCallback_=y,this.timeout_=b,this.progressCallback_=D,this.connectionFactory_=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((P,j)=>{this.resolve_=P,this.reject_=j,this.start_()})}start_(){const t=(r,o)=>{const u=this.resolve_,c=this.reject_,p=o.connection;if(o.wasSuccessCode)try{const y=this.callback_(p,p.getResponse());!function(n){return void 0!==n}(y)?u():u(y)}catch(y){c(y)}else if(null!==p){const y=Hk();y.serverResponse=p.getErrorText(),c(this.errorCallback_?this.errorCallback_(p,y):y)}else c(o.canceled?this.appDelete_?zO():WO():new Ur("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))};this.canceled_?t(0,new MS(!1,null,!0)):this.backoffId_=function(n,e,t){let r=1,o=null,u=null,c=!1,p=0;function y(){return 2===p}let b=!1;function D(...xe){b||(b=!0,e.apply(null,xe))}function S(xe){o=setTimeout(()=>{o=null,n(j,y())},xe)}function P(){u&&clearTimeout(u)}function j(xe,...ct){if(b)return void P();if(xe)return P(),void D.call(null,xe,...ct);if(y()||c)return P(),void D.call(null,xe,...ct);let nt;r<64&&(r*=2),1===p?(p=2,nt=0):nt=1e3*(r+Math.random()),S(nt)}let Q=!1;function ye(xe){Q||(Q=!0,P(),!b&&(null!==o?(xe||(p=2),clearTimeout(o),S(0)):xe||(p=1)))}return S(0),u=setTimeout(()=>{c=!0,ye(!0)},t),ye}((r,o)=>{if(o)return void r(!1,new MS(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const c=p=>{null!==this.progressCallback_&&this.progressCallback_(p.loaded,p.lengthComputable?p.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(c),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(c),this.pendingConnection_=null;const p=u.getErrorCode()===vp.NO_ERROR,y=u.getStatus();if(!p||this.isRetryStatusCode_(y)){const D=u.getErrorCode()===vp.ABORT;return void r(!1,new MS(!1,null,D))}const b=-1!==this.successCodes_.indexOf(y);r(!0,new MS(b,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,o=-1!==[408,429].indexOf(e),u=-1!==this.additionalRetryCodes_.indexOf(e);return t||o||u}}class MS{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function W2(...n){const e="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(Gk())return new Blob(n);throw new Ur("unsupported-environment","This browser doesn't seem to support creating Blobs")}const ca={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Wk{constructor(e,t){this.data=e,this.contentType=t||null}}function Zk(n,e){switch(n){case ca.RAW:return new Wk(JO(e));case ca.BASE64:case ca.BASE64URL:return new Wk(XO(n,e));case ca.DATA_URL:return new Wk(function(n){const e=new eF(n);return e.base64?XO(ca.BASE64,e.rest):function(n){let e;try{e=decodeURIComponent(n)}catch(t){throw Zb(ca.DATA_URL,"Malformed data URL.")}return JO(e)}(e.rest)}(e),function(n){return new eF(n).contentType}(e))}throw Hk()}function JO(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function XO(n,e){switch(n){case ca.BASE64:{const o=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(o||u)throw Zb(n,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case ca.BASE64URL:{const o=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(o||u)throw Zb(n,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function(n){return atob(n)}(e)}catch(o){throw Zb(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}class eF{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Zb(ca.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=e.substring(e.indexOf(",")+1)}}class bc{constructor(e,t){let r=0,o="";YO(e)?(this.data_=e,r=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(YO(this.data_)){const o=function(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===o?null:new bc(o)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new bc(r,!0)}}static getBlob(...e){if(Gk()){const t=e.map(r=>r instanceof bc?r.data_:r);return new bc(W2.apply(null,t))}{const t=e.map(c=>NS(c)?Zk(ca.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const o=new Uint8Array(r);let u=0;return t.forEach(c=>{for(let p=0;p<c.length;p++)o[u++]=c[p]}),new bc(o,!0)}}uploadData(){return this.data_}}function zk(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function tF(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function tB(n,e){return e}class Bs{constructor(e,t,r,o){this.server=e,this.local=t||e,this.writable=!!r,this.xform=o||tB}}let kS=null;function Kb(){if(kS)return kS;const n=[];n.push(new Bs("bucket")),n.push(new Bs("generation")),n.push(new Bs("metageneration")),n.push(new Bs("name","fullPath",!0));const t=new Bs("name");t.xform=function(u,c){return function(n){return!NS(n)||n.length<2?n:tF(n)}(c)},n.push(t);const o=new Bs("size");return o.xform=function(u,c){return void 0!==c?Number(c):c},n.push(o),n.push(new Bs("timeCreated")),n.push(new Bs("updated")),n.push(new Bs("md5Hash",null,!0)),n.push(new Bs("cacheControl",null,!0)),n.push(new Bs("contentDisposition",null,!0)),n.push(new Bs("contentEncoding",null,!0)),n.push(new Bs("contentLanguage",null,!0)),n.push(new Bs("contentType",null,!0)),n.push(new Bs("metadata","customMetadata",!0)),kS=n,kS}function nF(n,e,t){const r=zk(e);return null===r?null:function(n,e,t){const r={type:"file"},o=t.length;for(let u=0;u<o;u++){const c=t[u];r[c.local]=c.xform(r,e[c.server])}return function(n,e){Object.defineProperty(n,"ref",{get:function(){const u=new ys(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function Kk(n,e){const t={},r=e.length;for(let o=0;o<r;o++){const u=e[o];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const rF="prefixes";class Cc{constructor(e,t,r,o){this.url=e,this.method=t,this.handler=r,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ic(n){if(!n)throw Hk()}function PS(n,e){return function(r,o){const u=nF(n,o,e);return Ic(null!==u),u}}function Uv(n){return function(t,r){let o;return o=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?new Ur("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Ur("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?function(n){return new Ur("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function(n){return new Ur("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,o.serverResponse=r.serverResponse,o}}function Yb(n){const e=Uv(n);return function(r,o){let u=e(r,o);return 404===r.getStatus()&&(u=function(n){return new Ur("object-not-found","Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=o.serverResponse,u}}function sF(n,e,t){const o=gh(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,p=new Cc(o,"GET",PS(n,t),c);return p.errorHandler=Yb(e),p}function cB(n,e,t,r,o){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),o&&(u.maxResults=o);const p=gh(e.bucketOnlyServerUrl(),n.host,n._protocol),b=n.maxOperationRetryTime,D=new Cc(p,"GET",function(n,e){return function(r,o){const u=function(n,e,t){const r=zk(t);return null===r?null:function(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[rF])for(const o of t[rF]){const u=o.replace(/\/$/,""),c=n._makeStorageReference(new ys(e,u));r.prefixes.push(c)}if(t.items)for(const o of t.items){const u=n._makeStorageReference(new ys(e,o.name));r.items.push(u)}return r}(n,e,r)}(n,e,o);return Ic(null!==u),u}}(n,e.bucket),b);return D.urlParams=u,D.errorHandler=Uv(e),D}function aF(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function(n,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}class OS{constructor(e,t,r,o){this.current=e,this.total=t,this.finalized=!!r,this.metadata=o||null}}function Yk(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(o){Ic(!1)}return Ic(!!t&&-1!==(e||["active"]).indexOf(t)),t}const yB={STATE_CHANGED:"state_changed"},js={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Qk(n){switch(n){case"running":case"pausing":case"canceling":return js.RUNNING;case"paused":return js.PAUSED;case"success":return js.SUCCESS;case"canceled":return js.CANCELED;case"error":default:return js.ERROR}}class vB{constructor(e,t,r){if(function(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function Bv(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class wB extends class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=vp.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=vp.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=vp.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,o){if(this.sent_)throw zb("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==o)for(const u in o)o.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,o[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw zb("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw zb("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw zb("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw zb("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function ll(){return new wB}class dF{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Kb(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=o=>{this._request=void 0,this._chunkMultiplier=1,o._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=o,this._transition("error"))},this._metadataErrorHandler=o=>{this._request=void 0,o._codeEquals("canceled")?this.completeTransitions_():(this._error=o,this._transition("error"))},this._promise=new Promise((o,u)=>{this._resolve=o,this._reject=u,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function(n,e,t,r,o){const u=e.bucketOnlyServerUrl(),c=aF(e,r,o),p={name:c.fullPath},y=gh(u,n.host,n._protocol),D={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},S=Kk(c,t),Q=new Cc(y,"POST",function(ye){let xe;Yk(ye);try{xe=ye.getResponseHeader("X-Goog-Upload-URL")}catch(ct){Ic(!1)}return Ic(NS(xe)),xe},n.maxUploadRetryTime);return Q.urlParams=p,Q.headers=D,Q.body=S,Q.errorHandler=Uv(e),Q}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,ll,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const o=function(n,e,t,r){const y=new Cc(t,"POST",function(b){const D=Yk(b,["active","final"]);let S=null;try{S=b.getResponseHeader("X-Goog-Upload-Size-Received")}catch(j){Ic(!1)}S||Ic(!1);const P=Number(S);return Ic(!isNaN(P)),new OS(P,r.size(),"final"===D)},n.maxUploadRetryTime);return y.headers={"X-Goog-Upload-Command":"query"},y.errorHandler=Uv(e),y}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(o,ll,t,r);this._request=u,u.getPromise().then(c=>{c=c,this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new OS(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((o,u)=>{let c;try{c=function(n,e,t,r,o,u,c,p){const y=new OS(0,0);if(c?(y.current=c.current,y.total=c.total):(y.current=0,y.total=r.size()),r.size()!==y.total)throw new Ur("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");const b=y.total-y.current;let D=b;o>0&&(D=Math.min(D,o));const S=y.current,Q={"X-Goog-Upload-Command":D===b?"upload, finalize":"upload","X-Goog-Upload-Offset":`${y.current}`},ye=r.slice(S,S+D);if(null===ye)throw ZO();const nt=new Cc(t,"POST",function(st,jt){const on=Yk(st,["active","final"]),ci=y.current+D,pl=r.size();let c1;return c1="final"===on?PS(e,u)(st,jt):null,new OS(ci,pl,"final"===on,c1)},e.maxUploadRetryTime);return nt.headers=Q,nt.body=ye.uploadData(),nt.progressCallback=p||null,nt.errorHandler=Uv(n),nt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(y){return this._error=y,void this._transition("error")}const p=this._ref.storage._makeRequest(c,ll,o,u);this._request=p,p.getPromise().then(y=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(y.current),y.finalized?(this._metadata=y.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=sF(this._ref.storage,this._ref._location,this._mappings),o=this._ref.storage._makeRequest(r,ll,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function(n,e,t,r,o){const u=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},y=function(){let nt="";for(let st=0;st<2;st++)nt+=Math.random().toString().slice(2);return nt}();c["Content-Type"]="multipart/related; boundary="+y;const b=aF(e,r,o),D=Kk(b,t),j=bc.getBlob("--"+y+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+D+"\r\n--"+y+"\r\nContent-Type: "+b.contentType+"\r\n\r\n",r,"\r\n--"+y+"--");if(null===j)throw ZO();const Q={name:b.fullPath},ye=gh(u,n.host,n._protocol),ct=n.maxUploadRetryTime,lt=new Cc(ye,"POST",PS(n,t),ct);return lt.urlParams=Q,lt.headers=c,lt.body=j.uploadData(),lt.errorHandler=Uv(e),lt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,ll,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=WO(),this._state=e,this._notifyObservers();break;case"error":case"success":this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Qk(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,o){const u=new vB(t||void 0,r||void 0,o||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Qk(this._state)){case js.SUCCESS:Bv(this._resolve.bind(null,this.snapshot))();break;case js.CANCELED:case js.ERROR:Bv(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Qk(this._state)){case js.RUNNING:case js.PAUSED:e.next&&Bv(e.next.bind(e,this.snapshot))();break;case js.SUCCESS:e.complete&&Bv(e.complete.bind(e))();break;case js.CANCELED:case js.ERROR:e.error&&Bv(e.error.bind(e,this._error))();break;default:e.error&&Bv(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Pm{constructor(e,t){this._service=e,this._location=t instanceof ys?t:ys.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Pm(e,t)}get root(){const e=new ys(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return tF(this._location.path)}get storage(){return this._service}get parent(){const e=function(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ys(this._location.bucket,e);return new Pm(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw KO(e)}}function fF(n,e,t){return Jk.apply(this,arguments)}function Jk(){return(Jk=(0,be.Z)(function*(n,e,t){const o=yield pF(n,{pageToken:t});e.prefixes.push(...o.prefixes),e.items.push(...o.items),null!=o.nextPageToken&&(yield fF(n,e,o.nextPageToken))})).apply(this,arguments)}function pF(n,e){null!=e&&"number"==typeof e.maxResults&&qk("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=cB(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,ll)}function kB(n){n._throwIfRoot("getDownloadURL");const e=function(n,e,t){const o=gh(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,p=new Cc(o,"GET",function(n,e){return function(r,o){const u=nF(n,o,e);return Ic(null!==u),function(n,e,t,r){const o=zk(e);if(null===o||!NS(o.downloadTokens))return null;const u=o.downloadTokens;if(0===u.length)return null;const c=encodeURIComponent;return u.split(",").map(b=>{const S=n.fullPath;return gh("/b/"+c(n.bucket)+"/o/"+c(S),t,r)+QO({alt:"media",token:b})})[0]}(u,o,n.host,n._protocol)}}(n,t),c);return p.errorHandler=Yb(e),p}(n.storage,n._location,Kb());return n.storage.makeRequestWithTokens(e,ll).then(t=>{if(null===t)throw new Ur("no-download-url","The given file does not have any download URLs.");return t})}function gF(n,e){const t=function(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new ys(n._location.bucket,t);return new Pm(n.storage,r)}function mF(n,e){if(n instanceof Xk){const t=n;if(null==t._bucket)throw new Ur("no-default-bucket","No default bucket found. Did you set the '"+qO+"' property when initializing the app?");const r=new Pm(t,t._bucket);return null!=e?mF(r,e):r}return void 0!==e?gF(n,e):n}function LB(n,e){if(e&&function(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof Xk)return function(n,e){return new Pm(n,e)}(n,e);throw Vv("To use ref(service, url), the first argument must be a Storage instance.")}return mF(n,e)}function _F(n,e){const t=null==e?void 0:e[qO];return null==t?null:ys.makeFromBucketSpec(t,n)}class Xk{constructor(e,t,r,o,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=o,this._firebaseVersion=u,this._bucket=null,this._host=GO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=o?ys.makeFromBucketSpec(o,this._host):_F(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ys.makeFromBucketSpec(this._url,e):_F(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){qk("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){qk("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,be.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,be.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Pm(this,e)}_makeRequest(e,t,r,o){if(this._deleted)return new k2(zO());{const u=function(n,e,t,r,o,u){const c=QO(n.urlParams),p=n.url+c,y=Object.assign({},n.headers);return function(n,e){e&&(n["X-Firebase-GMPID"]=e)}(y,e),function(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(y,t),function(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(y,u),function(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(y,r),new U2(p,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o)}(e,this._appId,r,o,t,this._firebaseVersion);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e,t){var r=this;return(0,be.Z)(function*(){const[o,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,o,u).getPromise()})()}}const yF="@firebase/storage";function wF(n,e){return LB(n=(0,F.m9)(n),e)}(0,Bi._registerComponent)(new uo.wA("storage",function(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new Xk(t,r,o,e,Bi.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,Bi.registerVersion)(yF,"0.9.6",""),(0,Bi.registerVersion)(yF,"0.9.6","esm2017");class FS{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class bF{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new FS(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new FS(r,this,this._ref))},t)}on(e,t,r,o){let u;return t&&(u="function"==typeof t?c=>t(new FS(c,this,this._ref)):{next:t.next?c=>t.next(new FS(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,o||void 0)}}class CF{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new mh(e,this._service))}get items(){return this._delegate.items.map(e=>new mh(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class mh{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function(n,e){return gF(n,e)}(this._delegate,e);return new mh(t,this.storage)}get root(){return new mh(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new mh(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new bF(function(n,e,t){return function(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new dF(n,new bc(e),t)}(n=(0,F.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=ca.RAW,r){this._throwIfRoot("putString");const o=Zk(t,e),u=Object.assign({},r);return null==u.contentType&&null!=o.contentType&&(u.contentType=o.contentType),new bF(new dF(this._delegate,new bc(o.data,!0),u),this)}listAll(){return function(n){return function(n){const e={prefixes:[],items:[]};return fF(n,e).then(()=>e)}(n=(0,F.m9)(n))}(this._delegate).then(e=>new CF(e,this.storage))}list(e){return function(n,e){return pF(n=(0,F.m9)(n),e)}(this._delegate,e||void 0).then(t=>new CF(t,this.storage))}getMetadata(){return function(n){return function(n){n._throwIfRoot("getMetadata");const e=sF(n.storage,n._location,Kb());return n.storage.makeRequestWithTokens(e,ll)}(n=(0,F.m9)(n))}(this._delegate)}updateMetadata(e){return function(n,e){return function(n,e){n._throwIfRoot("updateMetadata");const t=function(n,e,t,r){const u=gh(e.fullServerUrl(),n.host,n._protocol),p=Kk(t,r),b=n.maxOperationRetryTime,D=new Cc(u,"PATCH",PS(n,r),b);return D.headers={"Content-Type":"application/json; charset=utf-8"},D.body=p,D.errorHandler=Yb(e),D}(n.storage,n._location,e,Kb());return n.storage.makeRequestWithTokens(t,ll)}(n=(0,F.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function(n){return kB(n=(0,F.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(n){return function(n){n._throwIfRoot("deleteObject");const e=function(n,e){const r=gh(e.fullServerUrl(),n.host,n._protocol),p=new Cc(r,"DELETE",function(y,b){},n.maxOperationRetryTime);return p.successCodes=[200,204],p.errorHandler=Yb(e),p}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,ll)}(n=(0,F.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw KO(e)}}class IF{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(TF(e))throw Vv("ref() expected a child path but got a URL, use refFromURL instead.");return new mh(wF(this._delegate,e),this)}refFromURL(e){if(!TF(e))throw Vv("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ys.makeFromUrl(e,this._delegate.host)}catch(t){throw Vv("refFromUrl() expected a valid full URL but got an invalid one.")}return new mh(wF(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function(n,e,t,r={}){!function(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:o}=r;o&&(n._overrideAuthToken="string"==typeof o?o:(0,F.Sg)(o,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function TF(n){return/^[A-Za-z]+:\/\//.test(n)}function XB(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new IF(t,r)}function DF(n){const e=function(n){return new vr.y(e=>{const t=c=>e.next(c);t(n.snapshot);const u=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){u()}}).pipe(function(n,e=fw.P){return t=>t.lift(new _2(n,e))}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,At.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function LS(n){return{getDownloadURL:()=>(0,ut.of)(void 0).pipe(bn.fc,lr(()=>n.getDownloadURL()),bn.iC),getMetadata:()=>(0,ut.of)(void 0).pipe(bn.fc,lr(()=>n.getMetadata()),bn.iC),delete:()=>(0,Ut.D)(n.delete()),child:e=>LS(n.child(e)),updateMetadata:e=>(0,Ut.D)(n.updateMetadata(e)),put:(e,t)=>DF(n.put(e,t)),putString:(e,t,r)=>DF(n.putString(e,t,r)),list:e=>(0,Ut.D)(n.list(e)),listAll:()=>(0,Ut.D)(n.listAll())}}!function(n){const e={TaskState:js,TaskEvent:yB,StringFormat:ca,Storage:IF,Reference:mh};n.INTERNAL.registerComponent(new uo.wA("storage-compat",XB,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.14")}(kI.Z);const nj=new f.OlP("angularfire2.storageBucket"),rj=new f.OlP("angularfire2.storage.maxUploadRetryTime"),ij=new f.OlP("angularfire2.storage.maxOperationRetryTime"),sj=new f.OlP("angularfire2.storage.use-emulator");let oj=(()=>{class n{constructor(t,r,o,u,c,p,y,b,D,S){const P=(0,Hr.on)(t,c,r);this.storage=(0,Hr.cc)(`${P.name}.storage.${o}`,"AngularFireStorage",P.name,()=>{const j=c.runOutsideAngular(()=>P.storage(o||void 0)),Q=D;return Q&&j.useEmulator(...Q),y&&j.setMaxUploadRetryTime(y),b&&j.setMaxOperationRetryTime(b),j},[y,b])}ref(t){return LS(this.storage.ref(t))}refFromURL(t){return LS(this.storage.refFromURL(t))}upload(t,r,o){return LS(this.storage.ref(t)).put(r,o)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Hr.Dh),f.LFG(Hr.xv,8),f.LFG(nj,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(bn.HU),f.LFG(rj,8),f.LFG(ij,8),f.LFG(sj,8),f.LFG(qb,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),aj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})(),uj=(()=>{class n{constructor(){xS.Z.registerVersion("angularfire",bn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[oj],imports:[aj]}),n})();var lj=V(8819);class dj{constructor(e,t){this.observables=e,this.project=t}call(e,t){return t.subscribe(new hj(e,this.observables,this.project))}}class hj extends ed{constructor(e,t,r){super(e),this.observables=t,this.project=r,this.toRespond=[];const o=t.length;this.values=new Array(o);for(let u=0;u<o;u++)this.toRespond.push(u);for(let u=0;u<o;u++)this.add(Eu(this,t[u],void 0,u))}notifyNext(e,t,r){this.values[r]=t;const o=this.toRespond;if(o.length>0){const u=o.indexOf(r);-1!==u&&o.splice(u,1)}}notifyComplete(){}_next(e){if(0===this.toRespond.length){const t=[e,...this.values];this.project?this._tryProject(t):this.destination.next(t)}}_tryProject(e){let t;try{t=this.project.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}class pj{constructor(e){this.predicate=e}call(e,t){return t.subscribe(new gj(e,this.predicate))}}class gj extends ii.L{constructor(e,t){super(e),this.predicate=t,this.skipping=!0,this.index=0}_next(e){const t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)}tryCallPredicate(e){try{const t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(t){this.destination.error(t)}}}const AF="@firebase/database";let eP="";function xF(n){eP=n}class mj{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,F.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,F.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class _j{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,F.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const RF=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new mj(e)}}catch(e){}return new _j},Om=RF("localStorage"),tP=RF("sessionStorage"),jv=new ao.Yd("@firebase/database"),NF=function(){let n=1;return function(){return n++}}(),MF=function(n){const e=(0,F.dS)(n),t=new F.gQ;t.update(e);const r=t.digest();return F.US.encodeByteArray(r)},Qb=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Qb.apply(null,r):e+="object"==typeof r?(0,F.Pz)(r):r,e+=" "}return e};let Fm=null,kF=!0;const PF=function(n,e){(0,F.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(jv.logLevel=ao.in.VERBOSE,Fm=jv.log.bind(jv),e&&tP.set("logging_enabled",!0)):"function"==typeof n?Fm=n:(Fm=null,tP.remove("logging_enabled"))},qi=function(...n){if(!0===kF&&(kF=!1,null===Fm&&!0===tP.get("logging_enabled")&&PF(!0)),Fm){const e=Qb.apply(null,n);Fm(e)}},Jb=function(n){return function(...e){qi(n,...e)}},nP=function(...n){const e="FIREBASE INTERNAL ERROR: "+Qb(...n);jv.error(e)},Tc=function(...n){const e=`FIREBASE FATAL ERROR: ${Qb(...n)}`;throw jv.error(e),new Error(e)},vs=function(...n){const e="FIREBASE WARNING: "+Qb(...n);jv.warn(e)},VS=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},_h="[MIN_NAME]",Dc="[MAX_NAME]",Lm=function(n,e){if(n===e)return 0;if(n===_h||e===Dc)return-1;if(e===_h||n===Dc)return 1;{const t=US(n),r=US(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},Ej=function(n,e){return n===e?0:n<e?-1:1},Xb=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,F.Pz)(e))},rP=function(n){if("object"!=typeof n||null===n)return(0,F.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,F.Pz)(e[r]),t+=":",t+=rP(n[e[r]]);return t+="}",t},OF=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let o=0;o<t;o+=e)r.push(n.substring(o,o+e>t?t:o+e));return r};function Wi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const FF=function(n){(0,F.hu)(!VS(n),"Invalid JSON number");const r=1023;let o,u,c,p,y;0===n?(u=0,c=0,o=1/n==-1/0?1:0):(o=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(p=Math.min(Math.floor(Math.log(n)/Math.LN2),r),u=p+r,c=Math.round(n*Math.pow(2,52-p)-Math.pow(2,52))):(u=0,c=Math.round(n/Math.pow(2,-1074))));const b=[];for(y=52;y;y-=1)b.push(c%2?1:0),c=Math.floor(c/2);for(y=11;y;y-=1)b.push(u%2?1:0),u=Math.floor(u/2);b.push(o?1:0),b.reverse();const D=b.join("");let S="";for(y=0;y<64;y+=8){let P=parseInt(D.substr(y,8),2).toString(16);1===P.length&&(P="0"+P),S+=P}return S.toLowerCase()},Ij=new RegExp("^-?(0*)\\d{1,10}$"),LF=-2147483648,iP=2147483647,US=function(n){if(Ij.test(n)){const e=Number(n);if(e>=LF&&e<=iP)return e}return null},$v=function(n){try{n()}catch(e){setTimeout(()=>{throw vs("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},eC=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class Dj{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){vs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Aj{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(o=>this.auth_=o)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(qi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',vs(e)}}let tC=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const $F=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,qF="websocket",WF="long_polling";class oP{constructor(e,t,r,o,u=!1,c="",p=!1){this.secure=t,this.namespace=r,this.webSocketOnly=o,this.nodeAdmin=u,this.persistenceKey=c,this.includeNamespaceInQueryParams=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Om.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Om.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function ZF(n,e,t){let r;if((0,F.hu)("string"==typeof e,"typeof type must == string"),(0,F.hu)("object"==typeof t,"typeof params must == object"),e===qF)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==WF)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const o=[];return Wi(t,(u,c)=>{o.push(u+"="+c)}),r+o.join("&")}class xj{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,F.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,F.p$)(this.counters_)}}const aP={},uP={};function lP(n){const e=n.toString();return aP[e]||(aP[e]=new xj),aP[e]}class Nj{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<r.length;++o)r[o]&&$v(()=>{this.onMessage_(r[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Ep{constructor(e,t,r,o,u,c,p){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=o,this.authToken=u,this.transportSessionId=c,this.lastSessionId=p,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Jb(e),this.stats_=lP(t),this.urlFn=y=>(this.appCheckToken&&(y.ac=this.appCheckToken),ZF(t,WF,y))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Nj(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,F.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new cP((...u)=>{const[c,p,y,b,D]=u;if(this.incrementIncomingBytes_(u),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=p,this.password=y;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);p?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(p,()=>{this.onClosed_()})):this.onClosed_()}},(...u)=>{const[c,p]=u;this.incrementIncomingBytes_(u),this.myPacketOrderer.handleResponse(c,p)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&$F.test(location.hostname)&&(r.r="f");const o=this.urlFn(r);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ep.forceAllow_=!0}static forceDisallow(){Ep.forceDisallow_=!0}static isAvailable(){return!((0,F.Yr)()||!Ep.forceAllow_&&(Ep.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,F.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,F.h$)(t),o=OF(r,1840);for(let u=0;u<o.length;u++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[u]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,F.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,F.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class cP{constructor(e,t,r,o){if(this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,F.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=NF(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=cP.createIFrame_();let u="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(u='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+u+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(p){qi("frame writing exception"),p.stack&&qi(p.stack),qi(p)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||qi("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+o+"="+c.seg+"&ts"+o+"="+c.ts+"&d"+o+"="+c.d,o++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},o=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(o),r()})}addTag(e,t){(0,F.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const o=r.readyState;(!o||"loaded"===o||"complete"===o)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{qi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let jS=null;"undefined"!=typeof MozWebSocket?jS=MozWebSocket:"undefined"!=typeof WebSocket&&(jS=WebSocket);let Hv=(()=>{class n{constructor(t,r,o,u,c,p,y){this.connId=t,this.applicationId=o,this.appCheckToken=u,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Jb(this.connId),this.stats_=lP(r),this.connURL=n.connectionURL_(r,p,y,u,o),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,o,u,c){const p={v:"5"};return!(0,F.Yr)()&&"undefined"!=typeof location&&location.hostname&&$F.test(location.hostname)&&(p.r="f"),r&&(p.s=r),o&&(p.ls=o),u&&(p.ac=u),c&&(p.p=c),ZF(t,qF,p)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Om.set("previous_websocket_failure",!0);try{let o;if((0,F.Yr)()){const c={headers:{"User-Agent":`Firebase/5/${eP}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(c.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(c.headers["X-Firebase-AppCheck"]=this.appCheckToken);const p=process.env,y=0===this.connURL.indexOf("wss://")?p.HTTPS_PROXY||p.https_proxy:p.HTTP_PROXY||p.http_proxy;y&&(c.proxy={origin:y})}this.mySock=new jS(this.connURL,[],o)}catch(o){this.log_("Error instantiating WebSocket.");const u=o.message||o.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=o=>{this.handleIncomingFrame(o)},this.mySock.onerror=o=>{this.log_("WebSocket error.  Closing connection.");const u=o.message||o.data;u&&this.log_(u),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const o=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);o&&o.length>1&&parseFloat(o[1])<4.4&&(t=!0)}return!t&&null!==jS&&!n.forceDisallow_}static previouslyFailed(){return Om.isInMemoryStorage||!0===Om.get("previous_websocket_failure")}markConnectionHealthy(){Om.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const o=(0,F.cI)(r);this.onMessage(o)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,F.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const o=this.extractFrameCount_(r);null!==o&&this.appendFrame_(o)}}send(t){this.resetKeepAlive();const r=(0,F.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const o=OF(r,16384);o.length>1&&this.sendString_(String(o.length));for(let u=0;u<o.length;u++)this.sendString_(o[u])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),eL=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Ep,Hv]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Hv&&Hv.isAvailable();let o=r&&!Hv.previouslyFailed();if(t.webSocketOnly&&(r||vs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[Hv];else{const u=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&u.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class aL{constructor(e,t,r,o,u,c,p,y,b,D){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=o,this.authToken_=u,this.onMessage_=c,this.onReady_=p,this.onDisconnect_=y,this.onKill_=b,this.lastSessionId=D,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Jb("c:"+this.id+":"),this.transportManager_=new eL(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=eC(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Xb("t",e),r=Xb("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Xb("t",e),r=Xb("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Xb("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?nP("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):nP("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,o=e.h;this.sessionId=e.s,this.repoInfo_.host=o,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&vs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),eC(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):eC(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Om.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class uL{put(e,t,r,o){}merge(e,t,r,o){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class lL{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,F.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let o=0;o<r.length;o++)r[o].callback.apply(r[o].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const o=this.getInitialEvent(e);o&&t.apply(r,o)}off(e,t,r){this.validateEventType_(e);const o=this.listeners_[e]||[];for(let u=0;u<o.length;u++)if(o[u].callback===t&&(!r||r===o[u].context))return void o.splice(u,1)}validateEventType_(e){(0,F.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class $S extends lL{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,F.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new $S}getInitialEvent(e){return(0,F.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class kn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[r]=this.pieces_[o],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Tn(){return new kn("")}function tn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function wp(n){return n.pieces_.length-n.pieceNum_}function Hn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new kn(n.pieces_,e)}function hP(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function nC(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function hL(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new kn(e,0)}function _r(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof kn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let o=0;o<r.length;o++)r[o].length>0&&t.push(r[o])}return new kn(t,0)}function nn(n){return n.pieceNum_>=n.pieces_.length}function $s(n,e){const t=tn(n),r=tn(e);if(null===t)return e;if(t===r)return $s(Hn(n),Hn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function Xj(n,e){const t=nC(n,0),r=nC(e,0);for(let o=0;o<t.length&&o<r.length;o++){const u=Lm(t[o],r[o]);if(0!==u)return u}return t.length===r.length?0:t.length<r.length?-1:1}function fP(n,e){if(wp(n)!==wp(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function tu(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(wp(n)>wp(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class e${constructor(e,t){this.errorPrefix_=t,this.parts_=nC(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,F.ug)(this.parts_[r]);fL(this)}}function fL(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Vm(n))}function Vm(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class pP extends lL{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new pP}getInitialEvent(e){return(0,F.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const rC=1e3;let GS,Um=(()=>{class n extends uL{constructor(t,r,o,u,c,p,y,b){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=o,this.onConnectStatus_=u,this.onServerInfoUpdate_=c,this.authTokenProvider_=p,this.appCheckTokenProvider_=y,this.authOverride_=b,this.id=n.nextPersistentConnectionId_++,this.log_=Jb("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=rC,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,b&&!(0,F.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");pP.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&$S.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,o){const u=++this.requestNumber_,c={r:u,a:t,b:r};this.log_((0,F.Pz)(c)),(0,F.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),o&&(this.requestCBHash_[u]=o)}get(t){this.initConnection_();const r=new F.BH,o={p:t._path.toString(),q:t._queryObject},u={action:"g",request:o,onComplete:p=>{const y=p.d;"ok"===p.s?(this.onDataUpdate_(o.p,y,!1,null),r.resolve(y)):r.reject(y)}};this.outstandingGets_.push(u),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const p=this.outstandingGets_[c];void 0===p||u!==p||(delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+c+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(c),r.promise}listen(t,r,o,u){this.initConnection_();const c=t._queryIdentifier,p=t._path.toString();this.log_("Listen called for "+p+" "+c),this.listens.has(p)||this.listens.set(p,new Map),(0,F.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,F.hu)(!this.listens.get(p).has(c),"listen() called twice for same path/queryId.");const y={onComplete:u,hashFn:r,query:t,tag:o};this.listens.get(p).set(c,y),this.connected_&&this.sendListen_(y)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,o=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(o)})}sendListen_(t){const r=t.query,o=r._path.toString(),u=r._queryIdentifier;this.log_("Listen on "+o+" for "+u);const c={p:o};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,y=>{const b=y.d,D=y.s;n.warnOnListenWarnings_(b,r),(this.listens.get(o)&&this.listens.get(o).get(u))===t&&(this.log_("listen response",y),"ok"!==D&&this.removeListen_(o,u),t.onComplete&&t.onComplete(D,b))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,F.r3)(t,"w")){const o=(0,F.DV)(t,"w");if(Array.isArray(o)&&~o.indexOf("no_index")){const u='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();vs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${u} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,F.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,F.w9)(t)?"auth":"gauth",o={cred:t};null===this.authOverride_?o.noauth=!0:"object"==typeof this.authOverride_&&(o.authvar=this.authOverride_),this.sendRequest(r,o,u=>{const c=u.s,p=u.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,p))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,o=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,o)})}unlisten(t,r){const o=t._path.toString(),u=t._queryIdentifier;this.log_("Unlisten called for "+o+" "+u),(0,F.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(o,u)&&this.connected_&&this.sendUnlisten_(o,u,t._queryObject,r)}sendUnlisten_(t,r,o,u){this.log_("Unlisten on "+t+" for "+r);const c={p:t};u&&(c.q=o,c.t=u),this.sendRequest("n",c)}onDisconnectPut(t,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:o})}onDisconnectMerge(t,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:o})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,o,u){const c={p:r,d:o};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,p=>{u&&setTimeout(()=>{u(p.s,p.d)},Math.floor(0))})}put(t,r,o,u){this.putInternal("p",t,r,o,u)}merge(t,r,o,u){this.putInternal("m",t,r,o,u)}putInternal(t,r,o,u,c){this.initConnection_();const p={p:r,d:o};void 0!==c&&(p.h=c),this.outstandingPuts_.push({action:t,request:p,onComplete:u}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,o=this.outstandingPuts_[t].request,u=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,o,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),u&&u(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,o=>{"ok"!==o.s&&this.log_("reportStats","Error sending stats: "+o.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,F.Pz)(t));const r=t.r,o=this.requestCBHash_[r];o&&(delete this.requestCBHash_[r],o(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):nP("Unrecognized action received from server: "+(0,F.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,F.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=rC,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=rC,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=rC),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,be.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),o=t.onReady_.bind(t),u=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,p=t.lastSessionId;let y=!1,b=null;const D=function(){b?b.close():(y=!0,u())};t.realtime_={close:D,sendRequest:function(j){(0,F.hu)(b,"sendRequest call when we're not connected not allowed."),b.sendRequest(j)}};const P=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[j,Q]=yield Promise.all([t.authTokenProvider_.getToken(P),t.appCheckTokenProvider_.getToken(P)]);y?qi("getToken() completed but was canceled"):(qi("getToken() completed. Creating connection."),t.authToken_=j&&j.accessToken,t.appCheckToken_=Q&&Q.token,b=new aL(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,o,u,ye=>{vs(ye+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},p))}catch(j){t.log_("Failed to get token: "+j),y||(t.repoInfo_.nodeAdmin&&vs(j),D())}}})()}interrupt(t){qi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){qi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,F.xb)(this.interruptReasons_)&&(this.reconnectDelay_=rC,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let o;o=r?r.map(c=>rP(c)).join("$"):"default";const u=this.removeListen_(t,o);u&&u.onComplete&&u.onComplete("permission_denied")}removeListen_(t,r){const o=new kn(t).toString();let u;if(this.listens.has(o)){const c=this.listens.get(o);u=c.get(r),c.delete(r),0===c.size&&this.listens.delete(o)}else u=void 0;return u}onAuthRevoked_(t,r){qi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){qi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,F.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+eP.replace(/\./g,"-")]=1,(0,F.uI)()?t["framework.cordova"]=1:(0,F.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=$S.getInstance().currentlyOnline();return(0,F.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class sn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new sn(e,t)}}class HS{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new sn(_h,e),o=new sn(_h,t);return 0!==this.compare(r,o)}minPost(){return sn.MIN}}class mL extends HS{static get __EMPTY_NODE(){return GS}static set __EMPTY_NODE(e){GS=e}compare(e,t){return Lm(e.name,t.name)}isDefinedOn(e){throw(0,F.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return sn.MIN}maxPost(){return new sn(Dc,GS)}makePost(e,t){return(0,F.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new sn(e,GS)}toString(){return".key"}}const Ac=new mL;class qS{constructor(e,t,r,o,u=null){this.isReverse_=o,this.resultGenerator_=u,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=t?r(e.key,t):1,o&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let mP,cl=(()=>{class n{constructor(t,r,o,u,c){this.key=t,this.value=r,this.color=null!=o?o:n.RED,this.left=null!=u?u:yo.EMPTY_NODE,this.right=null!=c?c:yo.EMPTY_NODE}copy(t,r,o,u,c){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=o?o:this.color,null!=u?u:this.left,null!=c?c:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,o){let u=this;const c=o(t,u.key);return u=c<0?u.copy(null,null,null,u.left.insert(t,r,o),null):0===c?u.copy(null,r,null,null,null):u.copy(null,null,null,null,u.right.insert(t,r,o)),u.fixUp_()}removeMin_(){if(this.left.isEmpty())return yo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let o,u;if(o=this,r(t,o.key)<0)!o.left.isEmpty()&&!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.remove(t,r),null);else{if(o.left.isRed_()&&(o=o.rotateRight_()),!o.right.isEmpty()&&!o.right.isRed_()&&!o.right.left.isRed_()&&(o=o.moveRedRight_()),0===r(t,o.key)){if(o.right.isEmpty())return yo.EMPTY_NODE;u=o.right.min_(),o=o.copy(u.key,u.value,null,null,o.right.removeMin_())}o=o.copy(null,null,null,null,o.right.remove(t,r))}return o.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class yo{constructor(e,t=yo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new yo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,cl.BLACK,null,null))}remove(e){return new yo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,cl.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,o=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return o?o.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(o=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new qS(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new qS(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new qS(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new qS(this.root_,null,this.comparator_,!0,e)}}function l$(n,e){return Lm(n.name,e.name)}function gP(n,e){return Lm(n,e)}yo.EMPTY_NODE=new class{copy(e,t,r,o,u){return this}insert(e,t,r){return new cl(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const _L=function(n){return"number"==typeof n?"number:"+FF(n):"string:"+n},yL=function(n){if(n.isLeafNode()){const e=n.val();(0,F.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,F.r3)(e,".sv"),"Priority must be a string or number.")}else(0,F.hu)(n===mP||n.isEmpty(),"priority of unexpected type.");(0,F.hu)(n===mP||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let vL,EL,wL,Gv=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,F.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),yL(this.priorityNode_)}static set __childrenNodeConstructor(t){vL=t}static get __childrenNodeConstructor(){return vL}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return nn(t)?this:".priority"===tn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const o=tn(t);return null===o?r:r.isEmpty()&&".priority"!==o?this:((0,F.hu)(".priority"!==o||1===wp(t),".priority must be the last token in a path"),this.updateImmediateChild(o,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Hn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+_L(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?FF(this.value_):this.value_,this.lazyHash_=MF(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,F.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,o=typeof this.value_,u=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(o);return(0,F.hu)(u>=0,"Unknown leaf type: "+r),(0,F.hu)(c>=0,"Unknown leaf type: "+o),u===c?"object"===o?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-u}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const rr=new class extends HS{compare(e,t){const r=e.node.getPriority(),o=t.node.getPriority(),u=r.compareTo(o);return 0===u?Lm(e.name,t.name):u}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return sn.MIN}maxPost(){return new sn(Dc,new Gv("[PRIORITY-POST]",wL))}makePost(e,t){const r=EL(e);return new sn(t,new Gv("[PRIORITY-POST]",r))}toString(){return".priority"}},p$=Math.log(2);class g${constructor(e){this.count=parseInt(Math.log(e+1)/p$,10),this.current_=this.count-1;const o=(u=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&o}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const WS=function(n,e,t,r){n.sort(e);const o=function(y,b){const D=b-y;let S,P;if(0===D)return null;if(1===D)return S=n[y],P=t?t(S):S,new cl(P,S.node,cl.BLACK,null,null);{const j=parseInt(D/2,10)+y,Q=o(y,j),ye=o(j+1,b);return S=n[j],P=t?t(S):S,new cl(P,S.node,cl.BLACK,Q,ye)}},p=function(y){let b=null,D=null,S=n.length;const P=function(Q,ye){const xe=S-Q,ct=S;S-=Q;const lt=o(xe+1,ct),nt=n[xe],st=t?t(nt):nt;j(new cl(st,nt.node,ye,null,lt))},j=function(Q){b?(b.left=Q,b=Q):(D=Q,b=Q)};for(let Q=0;Q<y.count;++Q){const ye=y.nextBitIsOne(),xe=Math.pow(2,y.count-(Q+1));ye?P(xe,cl.BLACK):(P(xe,cl.BLACK),P(xe,cl.RED))}return D}(new g$(n.length));return new yo(r||e,p)};let _P;const qv={};class yh{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,F.hu)(qv&&rr,"ChildrenNode.ts has not been loaded"),_P=_P||new yh({".priority":qv},{".priority":rr}),_P}get(e){const t=(0,F.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof yo?t:null}hasIndex(e){return(0,F.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,F.hu)(e!==Ac,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let o=!1;const u=t.getIterator(sn.Wrap);let p,c=u.getNext();for(;c;)o=o||e.isDefinedOn(c.node),r.push(c),c=u.getNext();p=o?WS(r,e.getCompare()):qv;const y=e.toString(),b=Object.assign({},this.indexSet_);b[y]=e;const D=Object.assign({},this.indexes_);return D[y]=p,new yh(D,b)}addToIndexes(e,t){const r=(0,F.UI)(this.indexes_,(o,u)=>{const c=(0,F.DV)(this.indexSet_,u);if((0,F.hu)(c,"Missing index implementation for "+u),o===qv){if(c.isDefinedOn(e.node)){const p=[],y=t.getIterator(sn.Wrap);let b=y.getNext();for(;b;)b.name!==e.name&&p.push(b),b=y.getNext();return p.push(e),WS(p,c.getCompare())}return qv}{const p=t.get(e.name);let y=o;return p&&(y=y.remove(new sn(e.name,p))),y.insert(e,e.node)}});return new yh(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,F.UI)(this.indexes_,o=>{if(o===qv)return o;{const u=t.get(e.name);return u?o.remove(new sn(e.name,u)):o}});return new yh(r,this.indexSet_)}}let iC,Gt=(()=>{class n{constructor(t,r,o){this.children_=t,this.priorityNode_=r,this.indexMap_=o,this.lazyHash_=null,this.priorityNode_&&yL(this.priorityNode_),this.children_.isEmpty()&&(0,F.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return iC||(iC=new n(new yo(gP),null,yh.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||iC}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?iC:r}}getChild(t){const r=tn(t);return null===r?this:this.getImmediateChild(r).getChild(Hn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,F.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const o=new sn(t,r);let u,c;r.isEmpty()?(u=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(o,this.children_)):(u=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(o,this.children_));const p=u.isEmpty()?iC:this.priorityNode_;return new n(u,p,c)}}updateChild(t,r){const o=tn(t);if(null===o)return r;{(0,F.hu)(".priority"!==tn(t)||1===wp(t),".priority must be the last token in a path");const u=this.getImmediateChild(o).updateChild(Hn(t),r);return this.updateImmediateChild(o,u)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let o=0,u=0,c=!0;if(this.forEachChild(rr,(p,y)=>{r[p]=y.val(t),o++,c&&n.INTEGER_REGEXP_.test(p)?u=Math.max(u,Number(p)):c=!1}),!t&&c&&u<2*o){const p=[];for(const y in r)p[y]=r[y];return p}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+_L(this.getPriority().val())+":"),this.forEachChild(rr,(r,o)=>{const u=o.hash();""!==u&&(t+=":"+r+":"+u)}),this.lazyHash_=""===t?"":MF(t)}return this.lazyHash_}getPredecessorChildName(t,r,o){const u=this.resolveIndex_(o);if(u){const c=u.getPredecessorKey(new sn(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const o=r.minKey();return o&&o.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new sn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const o=r.maxKey();return o&&o.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new sn(r,this.children_.get(r)):null}forEachChild(t,r){const o=this.resolveIndex_(t);return o?o.inorderTraversal(u=>r(u.name,u.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const o=this.resolveIndex_(r);if(o)return o.getIteratorFrom(t,u=>u);{const u=this.children_.getIteratorFrom(t.name,sn.Wrap);let c=u.peek();for(;null!=c&&r.compare(c,t)<0;)u.getNext(),c=u.peek();return u}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const o=this.resolveIndex_(r);if(o)return o.getReverseIteratorFrom(t,u=>u);{const u=this.children_.getReverseIteratorFrom(t.name,sn.Wrap);let c=u.peek();for(;null!=c&&r.compare(c,t)>0;)u.getNext(),c=u.peek();return u}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===sC?-1:0}withIndex(t){if(t===Ac||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Ac||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const o=this.getIterator(rr),u=r.getIterator(rr);let c=o.getNext(),p=u.getNext();for(;c&&p;){if(c.name!==p.name||!c.node.equals(p.node))return!1;c=o.getNext(),p=u.getNext()}return null===c&&null===p}return!1}return!1}}resolveIndex_(t){return t===Ac?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const sC=new class extends Gt{constructor(){super(new yo(gP),Gt.EMPTY_NODE,yh.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Gt.EMPTY_NODE}isEmpty(){return!1}};function Cr(n,e=null){if(null===n)return Gt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,F.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Gv(n,Cr(e));if(n instanceof Array){let t=Gt.EMPTY_NODE;return Wi(n,(r,o)=>{if((0,F.r3)(n,r)&&"."!==r.substring(0,1)){const u=Cr(o);(u.isLeafNode()||!u.isEmpty())&&(t=t.updateImmediateChild(r,u))}}),t.updatePriority(Cr(e))}{const t=[];let r=!1;if(Wi(n,(c,p)=>{if("."!==c.substring(0,1)){const y=Cr(p);y.isEmpty()||(r=r||!y.getPriority().isEmpty(),t.push(new sn(c,y)))}}),0===t.length)return Gt.EMPTY_NODE;const u=WS(t,l$,c=>c.name,gP);if(r){const c=WS(t,rr.getCompare());return new Gt(u,Cr(e),new yh({".priority":c},{".priority":rr}))}return new Gt(u,Cr(e),yh.Default)}}Object.defineProperties(sn,{MIN:{value:new sn(_h,Gt.EMPTY_NODE)},MAX:{value:new sn(Dc,sC)}}),mL.__EMPTY_NODE=Gt.EMPTY_NODE,Gv.__childrenNodeConstructor=Gt,function(n){mP=n}(sC),function(n){wL=n}(sC),function(n){EL=n}(Cr);class yP extends HS{constructor(e){super(),this.indexPath_=e,(0,F.hu)(!nn(e)&&".priority"!==tn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),o=this.extractChild(t.node),u=r.compareTo(o);return 0===u?Lm(e.name,t.name):u}makePost(e,t){const r=Cr(e),o=Gt.EMPTY_NODE.updateChild(this.indexPath_,r);return new sn(t,o)}maxPost(){const e=Gt.EMPTY_NODE.updateChild(this.indexPath_,sC);return new sn(Dc,e)}toString(){return nC(this.indexPath_,0).join("/")}}const vP=new class extends HS{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Lm(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return sn.MIN}maxPost(){return sn.MAX}makePost(e,t){const r=Cr(e);return new sn(t,r)}toString(){return".value"}},Wv="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",v$=function(){let n=0;const e=[];return function(t){const r=t===n;let o;n=t;const u=new Array(8);for(o=7;o>=0;o--)u[o]=Wv.charAt(t%64),t=Math.floor(t/64);(0,F.hu)(0===t,"Cannot push at time == 0");let c=u.join("");if(r){for(o=11;o>=0&&63===e[o];o--)e[o]=0;e[o]++}else for(o=0;o<12;o++)e[o]=Math.floor(64*Math.random());for(o=0;o<12;o++)c+=Wv.charAt(e[o]);return(0,F.hu)(20===c.length,"nextPushId: Length should be 20."),c}}(),IL=function(n){if(n===""+iP)return"-";const e=US(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let c=0;c<t.length;c++)t[c]=n.charAt(c);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Dc;const u=Wv.charAt(Wv.indexOf(t[r])+1);return t[r]=u,t.slice(0,r+1).join("")},TL=function(n){if(n===""+LF)return _h;const e=US(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+iP:(delete t[t.length-1],t.join("")):(t[t.length-1]=Wv.charAt(Wv.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function DL(n){return{type:"value",snapshotNode:n}}function Zv(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function oC(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function aC(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class wP{constructor(e){this.index_=e}updateChild(e,t,r,o,u,c){(0,F.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const p=e.getImmediateChild(t);return p.getChild(o).equals(r.getChild(o))&&p.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?e.hasChild(t)?c.trackChildChange(oC(t,p)):(0,F.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):p.isEmpty()?c.trackChildChange(Zv(t,r)):c.trackChildChange(aC(t,r,p))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(rr,(o,u)=>{t.hasChild(o)||r.trackChildChange(oC(o,u))}),t.isLeafNode()||t.forEachChild(rr,(o,u)=>{if(e.hasChild(o)){const c=e.getImmediateChild(o);c.equals(u)||r.trackChildChange(aC(o,u,c))}else r.trackChildChange(Zv(o,u))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Gt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class uC{constructor(e){this.indexedFilter_=new wP(e.getIndex()),this.index_=e.getIndex(),this.startPost_=uC.getStartPost_(e),this.endPost_=uC.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,o,u,c){return this.matches(new sn(t,r))||(r=Gt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,o,u,c)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Gt.EMPTY_NODE);let o=t.withIndex(this.index_);o=o.updatePriority(Gt.EMPTY_NODE);const u=this;return t.forEachChild(rr,(c,p)=>{u.matches(new sn(c,p))||(o=o.updateImmediateChild(c,Gt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,o,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class w${constructor(e){this.rangedFilter_=new uC(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,o,u,c){return this.rangedFilter_.matches(new sn(t,r))||(r=Gt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,o,u,c):this.fullLimitUpdateChild_(e,t,r,u,c)}updateFullNode(e,t,r){let o;if(t.isLeafNode()||t.isEmpty())o=Gt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let u;o=Gt.EMPTY_NODE.withIndex(this.index_),u=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;u.hasNext()&&c<this.limit_;){const p=u.getNext();let y;if(y=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),p)<=0:this.index_.compare(p,this.rangedFilter_.getEndPost())<=0,!y)break;o=o.updateImmediateChild(p.name,p.node),c++}}else{let u,c,p,y;if(o=t.withIndex(this.index_),o=o.updatePriority(Gt.EMPTY_NODE),this.reverse_){y=o.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const S=this.index_.getCompare();p=(P,j)=>S(j,P)}else y=o.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),p=this.index_.getCompare();let b=0,D=!1;for(;y.hasNext();){const S=y.getNext();!D&&p(u,S)<=0&&(D=!0),D&&b<this.limit_&&p(S,c)<=0?b++:o=o.updateImmediateChild(S.name,Gt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,o,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,o,u){let c;if(this.reverse_){const S=this.index_.getCompare();c=(P,j)=>S(j,P)}else c=this.index_.getCompare();const p=e;(0,F.hu)(p.numChildren()===this.limit_,"");const y=new sn(t,r),b=this.reverse_?p.getFirstChild(this.index_):p.getLastChild(this.index_),D=this.rangedFilter_.matches(y);if(p.hasChild(t)){const S=p.getImmediateChild(t);let P=o.getChildAfterChild(this.index_,b,this.reverse_);for(;null!=P&&(P.name===t||p.hasChild(P.name));)P=o.getChildAfterChild(this.index_,P,this.reverse_);const j=null==P?1:c(P,y);if(D&&!r.isEmpty()&&j>=0)return null!=u&&u.trackChildChange(aC(t,r,S)),p.updateImmediateChild(t,r);{null!=u&&u.trackChildChange(oC(t,S));const ye=p.updateImmediateChild(t,Gt.EMPTY_NODE);return null!=P&&this.rangedFilter_.matches(P)?(null!=u&&u.trackChildChange(Zv(P.name,P.node)),ye.updateImmediateChild(P.name,P.node)):ye}}return r.isEmpty()?e:D&&c(b,y)>=0?(null!=u&&(u.trackChildChange(oC(b.name,b.node)),u.trackChildChange(Zv(t,r))),p.updateImmediateChild(t,r).updateImmediateChild(b.name,Gt.EMPTY_NODE)):e}}class ZS{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=rr}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:_h}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Dc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,F.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===rr}copy(){const e=new ZS;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function bP(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function CP(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function zS(n,e){const t=n.copy();return t.index_=e,t}function AL(n){const e={};if(n.isDefault())return e;let t;return n.index_===rr?t="$priority":n.index_===vP?t="$value":n.index_===Ac?t="$key":((0,F.hu)(n.index_ instanceof yP,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,F.Pz)(t),n.startSet_&&(e.startAt=(0,F.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,F.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,F.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,F.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function SL(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==rr&&(e.i=n.index_.toString()),e}class KS extends uL{constructor(e,t,r,o){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=o,this.log_=Jb("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,F.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,o){const u=e._path.toString();this.log_("Listen called for "+u+" "+e._queryIdentifier);const c=KS.getListenId_(e,r),p={};this.listens_[c]=p;const y=AL(e._queryParams);this.restRequest_(u+".json",y,(b,D)=>{let S=D;if(404===b&&(S=null,b=null),null===b&&this.onDataUpdate_(u,S,!1,r),(0,F.DV)(this.listens_,c)===p){let P;P=b?401===b?"permission_denied":"rest_error:"+b:"ok",o(P,null)}})}unlisten(e,t){const r=KS.getListenId_(e,t);delete this.listens_[r]}get(e){const t=AL(e._queryParams),r=e._path.toString(),o=new F.BH;return this.restRequest_(r+".json",t,(u,c)=>{let p=c;404===u&&(p=null,u=null),null===u?(this.onDataUpdate_(r,p,!1,null),o.resolve(p)):o.reject(new Error(p))}),o.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,u])=>{o&&o.accessToken&&(t.auth=o.accessToken),u&&u.token&&(t.ac=u.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,F.xO)(t);this.log_("Sending REST request for "+c);const p=new XMLHttpRequest;p.onreadystatechange=()=>{if(r&&4===p.readyState){this.log_("REST Response for "+c+" received. status:",p.status,"response:",p.responseText);let y=null;if(p.status>=200&&p.status<300){try{y=(0,F.cI)(p.responseText)}catch(b){vs("Failed to parse JSON response for "+c+": "+p.responseText)}r(null,y)}else 401!==p.status&&404!==p.status&&vs("Got unsuccessful REST response for "+c+" Status: "+p.status),r(p.status);r=null}},p.open("GET",c,!0),p.send()})}}class A${constructor(){this.rootNode_=Gt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function YS(){return{value:null,children:new Map}}function zv(n,e,t){if(nn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=tn(e);n.children.has(r)||n.children.set(r,YS()),zv(n.children.get(r),e=Hn(e),t)}}function IP(n,e){if(nn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(rr,(r,o)=>{zv(n,new kn(r),o)}),IP(n,e)}}if(n.children.size>0){const t=tn(e);return e=Hn(e),n.children.has(t)&&IP(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function TP(n,e,t){null!==n.value?t(e,n.value):function(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,o)=>{TP(o,new kn(e.toString()+"/"+r),t)})}class x${constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Wi(this.last_,(r,o)=>{t[r]=t[r]-o}),this.last_=e,t}}class M${constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new x$(e);const r=1e4+2e4*Math.random();eC(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Wi(e,(o,u)=>{u>0&&(0,F.r3)(this.statsToReport_,o)&&(t[o]=u,r=!0)}),r&&this.server_.reportStats(t),eC(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var nu=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(nu||(nu={})),nu))();function SP(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class QS{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=nu.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(nn(this.path)){if(null!=this.affectedTree.value)return(0,F.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new kn(e));return new QS(Tn(),t,this.revert)}}return(0,F.hu)(tn(this.path)===e,"operationForChild called for unrelated child."),new QS(Hn(this.path),this.affectedTree,this.revert)}}class lC{constructor(e,t){this.source=e,this.path=t,this.type=nu.LISTEN_COMPLETE}operationForChild(e){return nn(this.path)?new lC(this.source,Tn()):new lC(this.source,Hn(this.path))}}class Bm{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=nu.OVERWRITE}operationForChild(e){return nn(this.path)?new Bm(this.source,Tn(),this.snap.getImmediateChild(e)):new Bm(this.source,Hn(this.path),this.snap)}}class Kv{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=nu.MERGE}operationForChild(e){if(nn(this.path)){const t=this.children.subtree(new kn(e));return t.isEmpty()?null:t.value?new Bm(this.source,Tn(),t.value):new Kv(this.source,Tn(),t)}return(0,F.hu)(tn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Kv(this.source,Hn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class bp{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(nn(e))return this.isFullyInitialized()&&!this.filtered_;const t=tn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class k${constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function cC(n,e,t,r,o,u){const c=r.filter(p=>p.type===t);c.sort((p,y)=>function(n,e,t){if(null==e.childName||null==t.childName)throw(0,F.g5)("Should only compare child_ events.");const r=new sn(e.childName,e.snapshotNode),o=new sn(t.childName,t.snapshotNode);return n.index_.compare(r,o)}(n,p,y)),c.forEach(p=>{const y=function(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,p,u);o.forEach(b=>{b.respondsTo(p.type)&&e.push(b.createEvent(y,n.query_))})})}function JS(n,e){return{eventCache:n,serverCache:e}}function dC(n,e,t,r){return JS(new bp(e,t,r),n.serverCache)}function RL(n,e,t,r){return JS(n.eventCache,new bp(e,t,r))}function XS(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function jm(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let xP;class ir{constructor(e,t=(()=>(xP||(xP=new yo(Ej)),xP))()){this.value=e,this.children=t}static fromObject(e){let t=new ir(null);return Wi(e,(r,o)=>{t=t.set(new kn(r),o)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Tn(),value:this.value};if(nn(e))return null;{const r=tn(e),o=this.children.get(r);if(null!==o){const u=o.findRootMostMatchingPathAndValue(Hn(e),t);return null!=u?{path:_r(new kn(r),u.path),value:u.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(nn(e))return this;{const t=tn(e),r=this.children.get(t);return null!==r?r.subtree(Hn(e)):new ir(null)}}set(e,t){if(nn(e))return new ir(t,this.children);{const r=tn(e),u=(this.children.get(r)||new ir(null)).set(Hn(e),t),c=this.children.insert(r,u);return new ir(this.value,c)}}remove(e){if(nn(e))return this.children.isEmpty()?new ir(null):new ir(null,this.children);{const t=tn(e),r=this.children.get(t);if(r){const o=r.remove(Hn(e));let u;return u=o.isEmpty()?this.children.remove(t):this.children.insert(t,o),null===this.value&&u.isEmpty()?new ir(null):new ir(this.value,u)}return this}}get(e){if(nn(e))return this.value;{const t=tn(e),r=this.children.get(t);return r?r.get(Hn(e)):null}}setTree(e,t){if(nn(e))return t;{const r=tn(e),u=(this.children.get(r)||new ir(null)).setTree(Hn(e),t);let c;return c=u.isEmpty()?this.children.remove(r):this.children.insert(r,u),new ir(this.value,c)}}fold(e){return this.fold_(Tn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((o,u)=>{r[o]=u.fold_(_r(e,o),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Tn(),t)}findOnPath_(e,t,r){const o=!!this.value&&r(t,this.value);if(o)return o;if(nn(e))return null;{const u=tn(e),c=this.children.get(u);return c?c.findOnPath_(Hn(e),_r(t,u),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Tn(),t)}foreachOnPath_(e,t,r){if(nn(e))return this;{this.value&&r(t,this.value);const o=tn(e),u=this.children.get(o);return u?u.foreachOnPath_(Hn(e),_r(t,o),r):new ir(null)}}foreach(e){this.foreach_(Tn(),e)}foreach_(e,t){this.children.inorderTraversal((r,o)=>{o.foreach_(_r(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class dl{constructor(e){this.writeTree_=e}static empty(){return new dl(new ir(null))}}function hC(n,e,t){if(nn(e))return new dl(new ir(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const o=r.path;let u=r.value;const c=$s(o,e);return u=u.updateChild(c,t),new dl(n.writeTree_.set(o,u))}{const o=new ir(t),u=n.writeTree_.setTree(e,o);return new dl(u)}}}function RP(n,e,t){let r=n;return Wi(t,(o,u)=>{r=hC(r,_r(e,o),u)}),r}function NL(n,e){if(nn(e))return dl.empty();{const t=n.writeTree_.setTree(e,new ir(null));return new dl(t)}}function NP(n,e){return null!=$m(n,e)}function $m(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild($s(t.path,e)):null}function ML(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(rr,(r,o)=>{e.push(new sn(r,o))}):n.writeTree_.children.inorderTraversal((r,o)=>{null!=o.value&&e.push(new sn(r,o.value))}),e}function Cp(n,e){if(nn(e))return n;{const t=$m(n,e);return new dl(null!=t?new ir(t):n.writeTree_.subtree(e))}}function MP(n){return n.writeTree_.isEmpty()}function Yv(n,e){return kL(Tn(),n.writeTree_,e)}function kL(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((o,u)=>{".priority"===o?((0,F.hu)(null!==u.value,"Priority writes must always be leaf nodes"),r=u.value):t=kL(_r(n,o),u,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(_r(n,".priority"),r)),t}}function ex(n,e){return VL(e,n)}function $$(n,e){if(n.snap)return tu(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&tu(_r(n.path,t),e))return!0;return!1}function G$(n){return n.visible}function PL(n,e,t){let r=dl.empty();for(let o=0;o<n.length;++o){const u=n[o];if(e(u)){const c=u.path;let p;if(u.snap)tu(t,c)?(p=$s(t,c),r=hC(r,p,u.snap)):tu(c,t)&&(p=$s(c,t),r=hC(r,Tn(),u.snap.getChild(p)));else{if(!u.children)throw(0,F.g5)("WriteRecord should have .snap or .children");if(tu(t,c))p=$s(t,c),r=RP(r,p,u.children);else if(tu(c,t))if(p=$s(c,t),nn(p))r=RP(r,Tn(),u.children);else{const y=(0,F.DV)(u.children,tn(p));if(y){const b=y.getChild(Hn(p));r=hC(r,Tn(),b)}}}}}return r}function OL(n,e,t,r,o){if(r||o){const u=Cp(n.visibleWrites,e);return!o&&MP(u)?t:o||null!=t||NP(u,Tn())?Yv(PL(n.allWrites,function(b){return(b.visible||o)&&(!r||!~r.indexOf(b.writeId))&&(tu(b.path,e)||tu(e,b.path))},e),t||Gt.EMPTY_NODE):null}{const u=$m(n.visibleWrites,e);if(null!=u)return u;{const c=Cp(n.visibleWrites,e);return MP(c)?t:null!=t||NP(c,Tn())?Yv(c,t||Gt.EMPTY_NODE):null}}}function tx(n,e,t,r){return OL(n.writeTree,n.treePath,e,t,r)}function kP(n,e){return function(n,e,t){let r=Gt.EMPTY_NODE;const o=$m(n.visibleWrites,e);if(o)return o.isLeafNode()||o.forEachChild(rr,(u,c)=>{r=r.updateImmediateChild(u,c)}),r;if(t){const u=Cp(n.visibleWrites,e);return t.forEachChild(rr,(c,p)=>{const y=Yv(Cp(u,new kn(c)),p);r=r.updateImmediateChild(c,y)}),ML(u).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return ML(Cp(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function FL(n,e,t,r){return function(n,e,t,r,o){(0,F.hu)(r||o,"Either existingEventSnap or existingServerSnap must exist");const u=_r(e,t);if(NP(n.visibleWrites,u))return null;{const c=Cp(n.visibleWrites,u);return MP(c)?o.getChild(t):Yv(c,o.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function nx(n,e){return function(n,e){return $m(n.visibleWrites,e)}(n.writeTree,_r(n.treePath,e))}function PP(n,e,t){return function(n,e,t,r){const o=_r(e,t),u=$m(n.visibleWrites,o);return null!=u?u:r.isCompleteForChild(t)?Yv(Cp(n.visibleWrites,o),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function LL(n,e){return VL(_r(n.treePath,e),n.writeTree)}function VL(n,e){return{treePath:n,writeTree:e}}class J${constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,F.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,F.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const o=this.changeMap.get(r);if(o){const u=o.type;if("child_added"===t&&"child_removed"===u)this.changeMap.set(r,aC(r,e.snapshotNode,o.snapshotNode));else if("child_removed"===t&&"child_added"===u)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===u)this.changeMap.set(r,oC(r,o.oldSnap));else if("child_changed"===t&&"child_added"===u)this.changeMap.set(r,Zv(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==u)throw(0,F.g5)("Illegal combination of changes: "+e+" occurred after "+o);this.changeMap.set(r,aC(r,e.snapshotNode,o.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const UL=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class OP{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new bp(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return PP(this.writes_,e,r)}}getChildAfterChild(e,t,r){const o=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:jm(this.viewCache_),u=function(n,e,t,r,o,u){return function(n,e,t,r,o,u,c){let p;const y=Cp(n.visibleWrites,e),b=$m(y,Tn());if(null!=b)p=b;else{if(null==t)return[];p=Yv(y,t)}if(p=p.withIndex(c),p.isEmpty()||p.isLeafNode())return[];{const D=[],S=c.getCompare(),P=u?p.getReverseIteratorFrom(r,c):p.getIteratorFrom(r,c);let j=P.getNext();for(;j&&D.length<o;)0!==S(j,r)&&D.push(j),j=P.getNext();return D}}(n.writeTree,n.treePath,e,t,r,o,u)}(this.writes_,o,t,1,r,e);return 0===u.length?null:u[0]}}function BL(n,e,t,r,o,u){const c=e.eventCache;if(null!=nx(r,t))return e;{let p,y;if(nn(t))if((0,F.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const b=jm(e),S=kP(r,b instanceof Gt?b:Gt.EMPTY_NODE);p=n.filter.updateFullNode(e.eventCache.getNode(),S,u)}else{const b=tx(r,jm(e));p=n.filter.updateFullNode(e.eventCache.getNode(),b,u)}else{const b=tn(t);if(".priority"===b){(0,F.hu)(1===wp(t),"Can't have a priority with additional path components");const D=c.getNode();y=e.serverCache.getNode();const S=FL(r,t,D,y);p=null!=S?n.filter.updatePriority(D,S):c.getNode()}else{const D=Hn(t);let S;if(c.isCompleteForChild(b)){y=e.serverCache.getNode();const P=FL(r,t,c.getNode(),y);S=null!=P?c.getNode().getImmediateChild(b).updateChild(D,P):c.getNode().getImmediateChild(b)}else S=PP(r,b,e.serverCache);p=null!=S?n.filter.updateChild(c.getNode(),b,S,D,o,u):c.getNode()}}return dC(e,p,c.isFullyInitialized()||nn(t),n.filter.filtersNodes())}}function rx(n,e,t,r,o,u,c,p){const y=e.serverCache;let b;const D=c?n.filter:n.filter.getIndexedFilter();if(nn(t))b=D.updateFullNode(y.getNode(),r,null);else if(D.filtersNodes()&&!y.isFiltered()){const j=y.getNode().updateChild(t,r);b=D.updateFullNode(y.getNode(),j,null)}else{const j=tn(t);if(!y.isCompleteForPath(t)&&wp(t)>1)return e;const Q=Hn(t),xe=y.getNode().getImmediateChild(j).updateChild(Q,r);b=".priority"===j?D.updatePriority(y.getNode(),xe):D.updateChild(y.getNode(),j,xe,Q,UL,null)}const S=RL(e,b,y.isFullyInitialized()||nn(t),D.filtersNodes());return BL(n,S,t,o,new OP(o,S,u),p)}function FP(n,e,t,r,o,u,c){const p=e.eventCache;let y,b;const D=new OP(o,e,u);if(nn(t))b=n.filter.updateFullNode(e.eventCache.getNode(),r,c),y=dC(e,b,!0,n.filter.filtersNodes());else{const S=tn(t);if(".priority"===S)b=n.filter.updatePriority(e.eventCache.getNode(),r),y=dC(e,b,p.isFullyInitialized(),p.isFiltered());else{const P=Hn(t),j=p.getNode().getImmediateChild(S);let Q;if(nn(P))Q=r;else{const ye=D.getCompleteChild(S);Q=null!=ye?".priority"===hP(P)&&ye.getChild(hL(P)).isEmpty()?ye:ye.updateChild(P,r):Gt.EMPTY_NODE}y=j.equals(Q)?e:dC(e,n.filter.updateChild(p.getNode(),S,Q,P,D,c),p.isFullyInitialized(),n.filter.filtersNodes())}}return y}function jL(n,e){return n.eventCache.isCompleteForChild(e)}function $L(n,e,t){return t.foreach((r,o)=>{e=e.updateChild(r,o)}),e}function LP(n,e,t,r,o,u,c,p){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let b,y=e;b=nn(t)?r:new ir(null).setTree(t,r);const D=e.serverCache.getNode();return b.children.inorderTraversal((S,P)=>{if(D.hasChild(S)){const Q=$L(0,e.serverCache.getNode().getImmediateChild(S),P);y=rx(n,y,new kn(S),Q,o,u,c,p)}}),b.children.inorderTraversal((S,P)=>{const j=!e.serverCache.isCompleteForChild(S)&&void 0===P.value;if(!D.hasChild(S)&&!j){const ye=$L(0,e.serverCache.getNode().getImmediateChild(S),P);y=rx(n,y,new kn(S),ye,o,u,c,p)}}),y}class uH{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,o=new wP(r.getIndex()),u=function(n){return n.loadsAllData()?new wP(n.getIndex()):n.hasLimit()?new w$(n):new uC(n)}(r);this.processor_=function(n){return{filter:n}}(u);const c=t.serverCache,p=t.eventCache,y=o.updateFullNode(Gt.EMPTY_NODE,c.getNode(),null),b=u.updateFullNode(Gt.EMPTY_NODE,p.getNode(),null),D=new bp(y,c.isFullyInitialized(),o.filtersNodes()),S=new bp(b,p.isFullyInitialized(),u.filtersNodes());this.viewCache_=JS(S,D),this.eventGenerator_=new k$(this.query_)}get query(){return this.query_}}function dH(n,e){const t=jm(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!nn(e)&&!t.getImmediateChild(tn(e)).isEmpty())?t.getChild(e):null}function HL(n){return 0===n.eventRegistrations_.length}function GL(n,e,t){const r=[];if(t){(0,F.hu)(null==e,"A cancel should cancel all event registrations.");const o=n.query._path;n.eventRegistrations_.forEach(u=>{const c=u.createCancelEvent(t,o);c&&r.push(c)})}if(e){let o=[];for(let u=0;u<n.eventRegistrations_.length;++u){const c=n.eventRegistrations_[u];if(c.matches(e)){if(e.hasAnyCallback()){o=o.concat(n.eventRegistrations_.slice(u+1));break}}else o.push(c)}n.eventRegistrations_=o}else n.eventRegistrations_=[];return r}function qL(n,e,t,r){e.type===nu.MERGE&&null!==e.source.queryId&&((0,F.hu)(jm(n.viewCache_),"We should always have a full cache before handling merges"),(0,F.hu)(XS(n.viewCache_),"Missing event cache, even though we have a server cache"));const o=n.viewCache_,u=function(n,e,t,r,o){const u=new J$;let c,p;if(t.type===nu.OVERWRITE){const b=t;b.source.fromUser?c=FP(n,e,b.path,b.snap,r,o,u):((0,F.hu)(b.source.fromServer,"Unknown source."),p=b.source.tagged||e.serverCache.isFiltered()&&!nn(b.path),c=rx(n,e,b.path,b.snap,r,o,p,u))}else if(t.type===nu.MERGE){const b=t;b.source.fromUser?c=function(n,e,t,r,o,u,c){let p=e;return r.foreach((y,b)=>{const D=_r(t,y);jL(e,tn(D))&&(p=FP(n,p,D,b,o,u,c))}),r.foreach((y,b)=>{const D=_r(t,y);jL(e,tn(D))||(p=FP(n,p,D,b,o,u,c))}),p}(n,e,b.path,b.children,r,o,u):((0,F.hu)(b.source.fromServer,"Unknown source."),p=b.source.tagged||e.serverCache.isFiltered(),c=LP(n,e,b.path,b.children,r,o,p,u))}else if(t.type===nu.ACK_USER_WRITE){const b=t;c=b.revert?function(n,e,t,r,o,u){let c;if(null!=nx(r,t))return e;{const p=new OP(r,e,o),y=e.eventCache.getNode();let b;if(nn(t)||".priority"===tn(t)){let D;if(e.serverCache.isFullyInitialized())D=tx(r,jm(e));else{const S=e.serverCache.getNode();(0,F.hu)(S instanceof Gt,"serverChildren would be complete if leaf node"),D=kP(r,S)}D=D,b=n.filter.updateFullNode(y,D,u)}else{const D=tn(t);let S=PP(r,D,e.serverCache);null==S&&e.serverCache.isCompleteForChild(D)&&(S=y.getImmediateChild(D)),b=null!=S?n.filter.updateChild(y,D,S,Hn(t),p,u):e.eventCache.getNode().hasChild(D)?n.filter.updateChild(y,D,Gt.EMPTY_NODE,Hn(t),p,u):y,b.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=tx(r,jm(e)),c.isLeafNode()&&(b=n.filter.updateFullNode(b,c,u)))}return c=e.serverCache.isFullyInitialized()||null!=nx(r,Tn()),dC(e,b,c,n.filter.filtersNodes())}}(n,e,b.path,r,o,u):function(n,e,t,r,o,u,c){if(null!=nx(o,t))return e;const p=e.serverCache.isFiltered(),y=e.serverCache;if(null!=r.value){if(nn(t)&&y.isFullyInitialized()||y.isCompleteForPath(t))return rx(n,e,t,y.getNode().getChild(t),o,u,p,c);if(nn(t)){let b=new ir(null);return y.getNode().forEachChild(Ac,(D,S)=>{b=b.set(new kn(D),S)}),LP(n,e,t,b,o,u,p,c)}return e}{let b=new ir(null);return r.foreach((D,S)=>{const P=_r(t,D);y.isCompleteForPath(P)&&(b=b.set(D,y.getNode().getChild(P)))}),LP(n,e,t,b,o,u,p,c)}}(n,e,b.path,b.affectedTree,r,o,u)}else{if(t.type!==nu.LISTEN_COMPLETE)throw(0,F.g5)("Unknown operation type: "+t.type);c=function(n,e,t,r,o){const u=e.serverCache;return BL(n,RL(e,u.getNode(),u.isFullyInitialized()||nn(t),u.isFiltered()),t,r,UL,o)}(n,e,t.path,r,u)}const y=u.getChanges();return function(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const o=r.getNode().isLeafNode()||r.getNode().isEmpty(),u=XS(n);(t.length>0||!n.eventCache.isFullyInitialized()||o&&!r.getNode().equals(u)||!r.getNode().getPriority().equals(u.getPriority()))&&t.push(DL(XS(e)))}}(e,c,y),{viewCache:c,changes:y}}(n.processor_,o,e,t,r);return function(n,e){(0,F.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,F.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,u.viewCache),(0,F.hu)(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=u.viewCache,WL(n,u.changes,u.viewCache.eventCache.getNode(),null)}function WL(n,e,t,r){return function(n,e,t,r){const o=[],u=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&u.push(function(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),cC(n,o,"child_removed",e,r,t),cC(n,o,"child_added",e,r,t),cC(n,o,"child_moved",u,r,t),cC(n,o,"child_changed",e,r,t),cC(n,o,"value",e,r,t),o}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let ix,ox;class ZL{constructor(){this.views=new Map}}function VP(n,e,t,r){const o=e.source.queryId;if(null!==o){const u=n.views.get(o);return(0,F.hu)(null!=u,"SyncTree gave us an op for an invalid query."),qL(u,e,t,r)}{let u=[];for(const c of n.views.values())u=u.concat(qL(c,e,t,r));return u}}function zL(n,e,t,r,o){const c=n.views.get(e._queryIdentifier);if(!c){let p=tx(t,o?r:null),y=!1;p?y=!0:r instanceof Gt?(p=kP(t,r),y=!1):(p=Gt.EMPTY_NODE,y=!1);const b=JS(new bp(p,y,!1),new bp(r,o,!1));return new uH(e,b)}return c}function KL(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Ip(n,e){let t=null;for(const r of n.views.values())t=t||dH(r,e);return t}function YL(n,e){return e._queryParams.loadsAllData()?sx(n):n.views.get(e._queryIdentifier)}function QL(n,e){return null!=YL(n,e)}function Tp(n){return null!=sx(n)}function sx(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let wH=1;class JL{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ir(null),this.pendingWriteTree_={visibleWrites:dl.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function UP(n,e,t,r,o){return function(n,e,t,r,o){(0,F.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:o}),o&&(n.visibleWrites=hC(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,o),o?Qv(n,new Bm({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Dp(n,e,t=!1){const r=function(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function(n,e){const t=n.allWrites.findIndex(p=>p.writeId===e);(0,F.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let o=r.visible,u=!1,c=n.allWrites.length-1;for(;o&&c>=0;){const p=n.allWrites[c];p.visible&&(c>=t&&$$(p,r.path)?o=!1:tu(r.path,p.path)&&(u=!0)),c--}return!!o&&(u?(function(n){n.visibleWrites=PL(n.allWrites,G$,Tn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=NL(n.visibleWrites,r.path):Wi(r.children,y=>{n.visibleWrites=NL(n.visibleWrites,_r(r.path,y))}),!0))}(n.pendingWriteTree_,e)){let u=new ir(null);return null!=r.snap?u=u.set(Tn(),!0):Wi(r.children,c=>{u=u.set(new kn(c),!0)}),Qv(n,new QS(r.path,u,t))}return[]}function fC(n,e,t){return Qv(n,new Bm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function BP(n,e,t,r){const o=e._path,u=n.syncPointTree_.get(o);let c=[];if(u&&("default"===e._queryIdentifier||QL(u,e))){const p=function(n,e,t,r){const o=e._queryIdentifier,u=[];let c=[];const p=Tp(n);if("default"===o)for(const[y,b]of n.views.entries())c=c.concat(GL(b,t,r)),HL(b)&&(n.views.delete(y),b.query._queryParams.loadsAllData()||u.push(b.query));else{const y=n.views.get(o);y&&(c=c.concat(GL(y,t,r)),HL(y)&&(n.views.delete(o),y.query._queryParams.loadsAllData()||u.push(y.query)))}return p&&!Tp(n)&&u.push(new((0,F.hu)(ix,"Reference.ts has not been loaded"),ix)(e._repo,e._path)),{removed:u,events:c}}(u,e,t,r);(function(n){return 0===n.views.size})(u)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const y=p.removed;c=p.events;const b=-1!==y.findIndex(S=>S._queryParams.loadsAllData()),D=n.syncPointTree_.findOnPath(o,(S,P)=>Tp(P));if(b&&!D){const S=n.syncPointTree_.subtree(o);if(!S.isEmpty()){const P=function(n){return n.fold((e,t,r)=>{if(t&&Tp(t))return[sx(t)];{let o=[];return t&&(o=KL(t)),Wi(r,(u,c)=>{o=o.concat(c)}),o}})}(S);for(let j=0;j<P.length;++j){const Q=P[j],ye=Q.query,xe=nV(n,Q);n.listenProvider_.startListening(pC(ye),ux(n,ye),xe.hashFn,xe.onComplete)}}}if(!D&&y.length>0&&!r)if(b){const S=null;n.listenProvider_.stopListening(pC(e),S)}else y.forEach(S=>{const P=n.queryToTagMap.get(lx(S));n.listenProvider_.stopListening(pC(S),P)});!function(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const o=lx(r),u=n.queryToTagMap.get(o);n.queryToTagMap.delete(o),n.tagToQueryMap.delete(u)}}}(n,y)}return c}function XL(n,e,t){const r=e._path;let o=null,u=!1;n.syncPointTree_.foreachOnPath(r,(S,P)=>{const j=$s(S,r);o=o||Ip(P,j),u=u||Tp(P)});let p,c=n.syncPointTree_.get(r);c?(u=u||Tp(c),o=o||Ip(c,Tn())):(c=new ZL,n.syncPointTree_=n.syncPointTree_.set(r,c)),null!=o?p=!0:(p=!1,o=Gt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((P,j)=>{const Q=Ip(j,Tn());Q&&(o=o.updateImmediateChild(P,Q))}));const y=QL(c,e);if(!y&&!e._queryParams.loadsAllData()){const S=lx(e);(0,F.hu)(!n.queryToTagMap.has(S),"View does not exist, but we have a tag");const P=wH++;n.queryToTagMap.set(S,P),n.tagToQueryMap.set(P,S)}let D=function(n,e,t,r,o,u){const c=zL(n,e,r,o,u);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function(n,e){n.eventRegistrations_.push(e)}(c,t),function(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(rr,(u,c)=>{r.push(Zv(u,c))}),t.isFullyInitialized()&&r.push(DL(t.getNode())),WL(n,r,t.getNode(),e)}(c,t)}(c,e,t,ex(n.pendingWriteTree_,r),o,p);if(!y&&!u){const S=YL(c,e);D=D.concat(function(n,e,t){const r=e._path,o=ux(n,e),u=nV(n,t),c=n.listenProvider_.startListening(pC(e),o,u.hashFn,u.onComplete),p=n.syncPointTree_.subtree(r);if(o)(0,F.hu)(!Tp(p.value),"If we're adding a query, it shouldn't be shadowed");else{const y=p.fold((b,D,S)=>{if(!nn(b)&&D&&Tp(D))return[sx(D).query];{let P=[];return D&&(P=P.concat(KL(D).map(j=>j.query))),Wi(S,(j,Q)=>{P=P.concat(Q)}),P}});for(let b=0;b<y.length;++b){const D=y[b];n.listenProvider_.stopListening(pC(D),ux(n,D))}}return c}(n,e,S))}return D}function ax(n,e,t){const o=n.pendingWriteTree_,u=n.syncPointTree_.findOnPath(e,(c,p)=>{const b=Ip(p,$s(c,e));if(b)return b});return OL(o,e,u,t,!0)}function Qv(n,e){return eV(e,n.syncPointTree_,null,ex(n.pendingWriteTree_,Tn()))}function eV(n,e,t,r){if(nn(n.path))return tV(n,e,t,r);{const o=e.get(Tn());null==t&&null!=o&&(t=Ip(o,Tn()));let u=[];const c=tn(n.path),p=n.operationForChild(c),y=e.children.get(c);if(y&&p){const b=t?t.getImmediateChild(c):null,D=LL(r,c);u=u.concat(eV(p,y,b,D))}return o&&(u=u.concat(VP(o,n,r,t))),u}}function tV(n,e,t,r){const o=e.get(Tn());null==t&&null!=o&&(t=Ip(o,Tn()));let u=[];return e.children.inorderTraversal((c,p)=>{const y=t?t.getImmediateChild(c):null,b=LL(r,c),D=n.operationForChild(c);D&&(u=u.concat(tV(D,p,y,b)))}),o&&(u=u.concat(VP(o,n,r,t))),u}function nV(n,e){const t=e.query,r=ux(n,t);return{hashFn:()=>(function(n){return n.viewCache_.serverCache.getNode()}(e)||Gt.EMPTY_NODE).hash(),onComplete:o=>{if("ok"===o)return r?function(n,e,t){const r=jP(n,t);if(r){const o=$P(r),u=o.path,c=o.queryId,p=$s(u,e);return HP(n,u,new lC(SP(c),p))}return[]}(n,t._path,r):function(n,e){return Qv(n,new lC({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const u=function(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(o,t);return BP(n,t,null,u)}}}}function ux(n,e){const t=lx(e);return n.queryToTagMap.get(t)}function lx(n){return n._path.toString()+"$"+n._queryIdentifier}function jP(n,e){return n.tagToQueryMap.get(e)}function $P(n){const e=n.indexOf("$");return(0,F.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new kn(n.substr(0,e))}}function HP(n,e,t){const r=n.syncPointTree_.get(e);return(0,F.hu)(r,"Missing sync point for query tag that we're tracking"),VP(r,t,ex(n.pendingWriteTree_,e),null)}function pC(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new((0,F.hu)(ox,"Reference.ts has not been loaded"),ox)(n._repo,n._path):n}class GP{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new GP(t)}node(){return this.node_}}class qP{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=_r(this.path_,e);return new qP(this.syncTree_,t)}node(){return ax(this.syncTree_,this.path_)}}const rV=function(n,e,t){return n&&"object"==typeof n?((0,F.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?PH(n[".sv"],e,t):"object"==typeof n[".sv"]?OH(n[".sv"],e):void(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},PH=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:(0,F.hu)(!1,"Unexpected server value: "+n)}},OH=function(n,e,t){n.hasOwnProperty("increment")||(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,F.hu)(!1,"Unexpected increment value: "+r);const o=e.node();if((0,F.hu)(null!=o,"Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;const c=o.getValue();return"number"!=typeof c?r:c+r},iV=function(n,e,t,r){return ZP(e,new qP(t,n),r)},WP=function(n,e,t){return ZP(n,new GP(e),t)};function ZP(n,e,t){const r=n.getPriority().val(),o=rV(r,e.getImmediateChild(".priority"),t);let u;if(n.isLeafNode()){const c=n,p=rV(c.getValue(),e,t);return p!==c.getValue()||o!==c.getPriority().val()?new Gv(p,Cr(o)):n}{const c=n;return u=c,o!==c.getPriority().val()&&(u=u.updatePriority(new Gv(o))),c.forEachChild(rr,(p,y)=>{const b=ZP(y,e.getImmediateChild(p),t);b!==y&&(u=u.updateImmediateChild(p,b))}),u}}class zP{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function cx(n,e){let t=e instanceof kn?e:new kn(e),r=n,o=tn(t);for(;null!==o;){const u=(0,F.DV)(r.node.children,o)||{children:{},childCount:0};r=new zP(o,r,u),t=Hn(t),o=tn(t)}return r}function Hm(n){return n.node.value}function KP(n,e){n.node.value=e,YP(n)}function sV(n){return n.node.childCount>0}function dx(n,e){Wi(n.node.children,(t,r)=>{e(new zP(t,n,r))})}function oV(n,e,t,r){t&&!r&&e(n),dx(n,o=>{oV(o,e,!0,r)}),t&&r&&e(n)}function gC(n){return new kn(null===n.parent?n.name:gC(n.parent)+"/"+n.name)}function YP(n){null!==n.parent&&function(n,e,t){const r=function(n){return void 0===Hm(n)&&!sV(n)}(t),o=(0,F.r3)(n.node.children,e);r&&o?(delete n.node.children[e],n.node.childCount--,YP(n)):!r&&!o&&(n.node.children[e]=t.node,n.node.childCount++,YP(n))}(n.parent,n.name,n)}const UH=/[\[\].#$\/\u0000-\u001F\u007F]/,BH=/[\[\].#$\u0000-\u001F\u007F]/,QP=10485760,hx=function(n){return"string"==typeof n&&0!==n.length&&!UH.test(n)},aV=function(n){return"string"==typeof n&&0!==n.length&&!BH.test(n)},mC=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!VS(n)||n&&"object"==typeof n&&(0,F.r3)(n,".sv")},Sc=function(n,e,t,r){r&&void 0===e||_C((0,F.gK)(n,"value"),e,t)},_C=function(n,e,t){const r=t instanceof kn?new e$(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Vm(r));if("function"==typeof e)throw new Error(n+"contains a function "+Vm(r)+" with contents = "+e.toString());if(VS(e))throw new Error(n+"contains "+e.toString()+" "+Vm(r));if("string"==typeof e&&e.length>QP/3&&(0,F.ug)(e)>QP)throw new Error(n+"contains a string greater than "+QP+" utf8 bytes "+Vm(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let o=!1,u=!1;if(Wi(e,(c,p)=>{if(".value"===c)o=!0;else if(".priority"!==c&&".sv"!==c&&(u=!0,!hx(c)))throw new Error(n+" contains an invalid key ("+c+") "+Vm(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,F.ug)(e),fL(n)})(r,c),_C(n,p,r),function(n){const e=n.parts_.pop();n.byteLength_-=(0,F.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),o&&u)throw new Error(n+' contains ".value" child '+Vm(r)+" in addition to actual children.")}},uV=function(n,e,t,r){if(r&&void 0===e)return;const o=(0,F.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(o+" must be an object containing the children to replace.");const u=[];Wi(e,(c,p)=>{const y=new kn(c);if(_C(o,p,_r(t,y)),".priority"===hP(y)&&!mC(p))throw new Error(o+"contains an invalid value for '"+y.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");u.push(y)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const u=nC(r);for(let c=0;c<u.length;c++)if((".priority"!==u[c]||c!==u.length-1)&&!hx(u[c]))throw new Error(n+"contains an invalid key ("+u[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(Xj);let o=null;for(t=0;t<e.length;t++){if(r=e[t],null!==o&&tu(o,r))throw new Error(n+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(o,u)},JP=function(n,e,t){if(!t||void 0!==e){if(VS(e))throw new Error((0,F.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!mC(e))throw new Error((0,F.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},yC=function(n,e,t,r){if(!(r&&void 0===t||hx(t)))throw new Error((0,F.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},vC=function(n,e,t,r){if(!(r&&void 0===t||aV(t)))throw new Error((0,F.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ru=function(n,e){if(".info"===tn(e))throw new Error(n+" failed = Can't modify data under /.info/")},lV=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!hx(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),aV(n)}(t))throw new Error((0,F.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class GH{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function fx(n,e){let t=null;for(let r=0;r<e.length;r++){const o=e[r],u=o.getPath();null!==t&&!fP(u,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:u}),t.events.push(o)}t&&n.eventLists_.push(t)}function XP(n,e,t){fx(n,t),cV(n,r=>fP(r,e))}function iu(n,e,t){fx(n,t),cV(n,r=>tu(r,e)||tu(e,r))}function cV(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const o=n.eventLists_[r];o&&(e(o.path)?(qH(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function qH(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Fm&&qi("event: "+t.toString()),$v(r)}}}const dV="repo_interrupt";class ZH{constructor(e,t,r,o){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new GH,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=YS(),this.transactionQueueTree_=new zP,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function hV(n){const t=n.infoData_.getNode(new kn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function EC(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:hV(n)})}function fV(n,e,t,r,o){n.dataUpdateCount++;const u=new kn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(o)if(r){const y=(0,F.UI)(t,b=>Cr(b));c=function(n,e,t,r){const o=jP(n,r);if(o){const u=$P(o),c=u.path,p=u.queryId,y=$s(c,e),b=ir.fromObject(t);return HP(n,c,new Kv(SP(p),y,b))}return[]}(n.serverSyncTree_,u,y,o)}else{const y=Cr(t);c=function(n,e,t,r){const o=jP(n,r);if(null!=o){const u=$P(o),c=u.path,p=u.queryId,y=$s(c,e);return HP(n,c,new Bm(SP(p),y,t))}return[]}(n.serverSyncTree_,u,y,o)}else if(r){const y=(0,F.UI)(t,b=>Cr(b));c=function(n,e,t){const r=ir.fromObject(t);return Qv(n,new Kv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,u,y)}else{const y=Cr(t);c=fC(n.serverSyncTree_,u,y)}let p=u;c.length>0&&(p=Xv(n,u)),iu(n.eventQueue_,p,c)}function pV(n,e){e1(n,"connected",e),!1===e&&function(n){Jv(n,"onDisconnectEvents");const e=EC(n),t=YS();TP(n.onDisconnect_,Tn(),(o,u)=>{const c=iV(o,u,n.serverSyncTree_,e);zv(t,o,c)});let r=[];TP(t,Tn(),(o,u)=>{r=r.concat(fC(n.serverSyncTree_,o,u));const c=i1(n,o);Xv(n,c)}),n.onDisconnect_=YS(),iu(n.eventQueue_,Tn(),r)}(n)}function e1(n,e,t){const r=new kn("/.info/"+e),o=Cr(t);n.infoData_.updateSnapshot(r,o);const u=fC(n.infoSyncTree_,r,o);iu(n.eventQueue_,r,u)}function px(n){return n.nextWriteId_++}function t1(n,e,t,r,o){Jv(n,"set",{path:e.toString(),value:t,priority:r});const u=EC(n),c=Cr(t,r),p=ax(n.serverSyncTree_,e),y=WP(c,p,u),b=px(n),D=UP(n.serverSyncTree_,e,y,b,!0);fx(n.eventQueue_,D),n.server_.put(e.toString(),c.val(!0),(P,j)=>{const Q="ok"===P;Q||vs("set at "+e+" failed: "+P);const ye=Dp(n.serverSyncTree_,b,!Q);iu(n.eventQueue_,e,ye),Ap(0,o,P,j)});const S=i1(n,e);Xv(n,S),iu(n.eventQueue_,S,[])}function XH(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,o)=>{"ok"===r&&IP(n.onDisconnect_,e),Ap(0,t,r,o)})}function gV(n,e,t,r){const o=Cr(t);n.server_.onDisconnectPut(e.toString(),o.val(!0),(u,c)=>{"ok"===u&&zv(n.onDisconnect_,e,o),Ap(0,r,u,c)})}function n1(n,e,t){let r;r=".info"===tn(e._path)?BP(n.infoSyncTree_,e,t):BP(n.serverSyncTree_,e,t),XP(n.eventQueue_,e._path,r)}function mV(n){n.persistentConnection_&&n.persistentConnection_.interrupt(dV)}function Jv(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),qi(t,...e)}function Ap(n,e,t,r){e&&$v(()=>{if("ok"===t)e(null);else{const o=(t||"error").toUpperCase();let u=o;r&&(u+=": "+r);const c=new Error(u);c.code=o,e(c)}})}function r1(n,e,t){return ax(n.serverSyncTree_,e,t)||Gt.EMPTY_NODE}function gx(n,e=n.transactionQueueTree_){if(e||mx(n,e),Hm(e)){const t=yV(n,e);(0,F.hu)(t.length>0,"Sending zero length transaction queue"),t.every(o=>0===o.status)&&function(n,e,t){const r=t.map(b=>b.currentWriteId),o=r1(n,e,r);let u=o;const c=o.hash();for(let b=0;b<t.length;b++){const D=t[b];(0,F.hu)(0===D.status,"tryToSendTransactionQueue_: items in queue should all be run."),D.status=1,D.retryCount++;const S=$s(e,D.path);u=u.updateChild(S,D.currentOutputSnapshotRaw)}const p=u.val(!0),y=e;n.server_.put(y.toString(),p,b=>{Jv(n,"transaction put response",{path:y.toString(),status:b});let D=[];if("ok"===b){const S=[];for(let P=0;P<t.length;P++)t[P].status=2,D=D.concat(Dp(n.serverSyncTree_,t[P].currentWriteId)),t[P].onComplete&&S.push(()=>t[P].onComplete(null,!0,t[P].currentOutputSnapshotResolved)),t[P].unwatcher();mx(n,cx(n.transactionQueueTree_,e)),gx(n,n.transactionQueueTree_),iu(n.eventQueue_,e,D);for(let P=0;P<S.length;P++)$v(S[P])}else{if("datastale"===b)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{vs("transaction at "+y.toString()+" failed: "+b);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=b}Xv(n,e)}},c)}(n,gC(e),t)}else sV(e)&&dx(e,t=>{gx(n,t)})}function Xv(n,e){const t=_V(n,e),r=gC(t);return function(n,e,t){if(0===e.length)return;const r=[];let o=[];const c=e.filter(p=>0===p.status).map(p=>p.currentWriteId);for(let p=0;p<e.length;p++){const y=e[p],b=$s(t,y.path);let S,D=!1;if((0,F.hu)(null!==b,"rerunTransactionsUnderNode_: relativePath should not be null."),4===y.status)D=!0,S=y.abortReason,o=o.concat(Dp(n.serverSyncTree_,y.currentWriteId,!0));else if(0===y.status)if(y.retryCount>=25)D=!0,S="maxretry",o=o.concat(Dp(n.serverSyncTree_,y.currentWriteId,!0));else{const P=r1(n,y.path,c);y.currentInputSnapshot=P;const j=e[p].update(P.val());if(void 0!==j){_C("transaction failed: Data returned ",j,y.path);let Q=Cr(j);"object"==typeof j&&null!=j&&(0,F.r3)(j,".priority")||(Q=Q.updatePriority(P.getPriority()));const xe=y.currentWriteId,ct=EC(n),lt=WP(Q,P,ct);y.currentOutputSnapshotRaw=Q,y.currentOutputSnapshotResolved=lt,y.currentWriteId=px(n),c.splice(c.indexOf(xe),1),o=o.concat(UP(n.serverSyncTree_,y.path,lt,y.currentWriteId,y.applyLocally)),o=o.concat(Dp(n.serverSyncTree_,xe,!0))}else D=!0,S="nodata",o=o.concat(Dp(n.serverSyncTree_,y.currentWriteId,!0))}iu(n.eventQueue_,t,o),o=[],D&&(e[p].status=2,setTimeout(e[p].unwatcher,Math.floor(0)),e[p].onComplete&&r.push("nodata"===S?()=>e[p].onComplete(null,!1,e[p].currentInputSnapshot):()=>e[p].onComplete(new Error(S),!1,null)))}mx(n,n.transactionQueueTree_);for(let p=0;p<r.length;p++)$v(r[p]);gx(n,n.transactionQueueTree_)}(n,yV(n,t),r),r}function _V(n,e){let t,r=n.transactionQueueTree_;for(t=tn(e);null!==t&&void 0===Hm(r);)r=cx(r,t),t=tn(e=Hn(e));return r}function yV(n,e){const t=[];return vV(n,e,t),t.sort((r,o)=>r.order-o.order),t}function vV(n,e,t){const r=Hm(e);if(r)for(let o=0;o<r.length;o++)t.push(r[o]);dx(e,o=>{vV(n,o,t)})}function mx(n,e){const t=Hm(e);if(t){let r=0;for(let o=0;o<t.length;o++)2!==t[o].status&&(t[r]=t[o],r++);t.length=r,KP(e,t.length>0?t:void 0)}dx(e,r=>{mx(n,r)})}function i1(n,e){const t=gC(_V(n,e)),r=cx(n.transactionQueueTree_,e);return function(n,e,t){let r=n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,o=>{s1(n,o)}),s1(n,r),oV(r,o=>{s1(n,o)}),t}function s1(n,e){const t=Hm(e);if(t){const r=[];let o=[],u=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,F.hu)(u===c-1,"All SENT items should be at beginning of queue."),u=c,t[c].status=3,t[c].abortReason="set"):((0,F.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),o=o.concat(Dp(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===u?KP(e,void 0):t.length=u+1,iu(n.eventQueue_,gC(e),o);for(let c=0;c<r.length;c++)$v(r[c])}}const o1=function(n,e){const t=l3(n),r=t.namespace;return"firebase.com"===t.domain&&Tc(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Tc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&vs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new oP(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new kn(t.pathString)}},l3=function(n){let e="",t="",r="",o="",u="",c=!0,p="https",y=443;if("string"==typeof n){let b=n.indexOf("//");b>=0&&(p=n.substring(0,b-1),n=n.substring(b+2));let D=n.indexOf("/");-1===D&&(D=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(D,S)),D<S&&(o=function(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let o=t[r];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch(u){}e+="/"+o}return e}(n.substring(D,S)));const P=function(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):vs(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));b=e.indexOf(":"),b>=0?(c="https"===p||"wss"===p,y=parseInt(e.substring(b+1),10)):b=e.length;const j=e.slice(0,b);if("localhost"===j.toLowerCase())t="localhost";else if(j.split(".").length<=2)t=j;else{const Q=e.indexOf(".");r=e.substring(0,Q).toLowerCase(),t=e.substring(Q+1),u=r}"ns"in P&&(u=P.ns)}return{host:e,port:y,domain:t,subdomain:r,secure:c,scheme:p,pathString:o,namespace:u}};class EV{constructor(e,t,r,o){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=o}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,F.Pz)(this.snapshot.exportVal())}}class wV{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class bV{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,F.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class CV{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new F.BH;return XH(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){ru("OnDisconnect.remove",this._path);const e=new F.BH;return gV(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){ru("OnDisconnect.set",this._path),Sc("OnDisconnect.set",e,this._path,!1);const t=new F.BH;return gV(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){ru("OnDisconnect.setWithPriority",this._path),Sc("OnDisconnect.setWithPriority",e,this._path,!1),JP("OnDisconnect.setWithPriority",t,!1);const r=new F.BH;return function(n,e,t,r,o){const u=Cr(t,r);n.server_.onDisconnectPut(e.toString(),u.val(!0),(c,p)=>{"ok"===c&&zv(n.onDisconnect_,e,u),Ap(0,o,c,p)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){ru("OnDisconnect.update",this._path),uV("OnDisconnect.update",e,this._path,!1);const t=new F.BH;return function(n,e,t,r){if((0,F.xb)(t))return qi("onDisconnect().update() called with empty data.  Don't do anything."),void Ap(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(o,u)=>{"ok"===o&&Wi(t,(c,p)=>{const y=Cr(p);zv(n.onDisconnect_,_r(e,c),y)}),Ap(0,r,o,u)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class vo{constructor(e,t,r,o){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=o}get key(){return nn(this._path)?null:hP(this._path)}get ref(){return new su(this._repo,this._path)}get _queryIdentifier(){const e=SL(this._queryParams),t=rP(e);return"{}"===t?"default":t}get _queryObject(){return SL(this._queryParams)}isEqual(e){if(!((e=(0,F.m9)(e))instanceof vo))return!1;const t=this._repo===e._repo,r=fP(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function _x(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Sp(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Ac){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==_h)throw new Error(r);if("string"!=typeof e)throw new Error(o)}if(n.hasEnd()){if(n.getIndexEndName()!==Dc)throw new Error(r);if("string"!=typeof t)throw new Error(o)}}else if(n.getIndex()===rr){if(null!=e&&!mC(e)||null!=t&&!mC(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,F.hu)(n.getIndex()instanceof yP||n.getIndex()===vP,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function yx(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class su extends vo{constructor(e,t){super(e,t,new ZS,!1)}get parent(){const e=hL(this._path);return null===e?null:new su(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Gm{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new kn(e),r=qm(this.ref,e);return new Gm(this._node.getChild(t),r,rr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,o)=>e(new Gm(o,qm(this.ref,r),rr)))}hasChild(e){const t=new kn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function IV(n,e){return(n=(0,F.m9)(n))._checkNotDeleted("ref"),void 0!==e?qm(n._root,e):n._root}function TV(n,e){(n=(0,F.m9)(n))._checkNotDeleted("refFromURL");const t=o1(e,n._repo.repoInfo_.nodeAdmin);lV("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Tc("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),IV(n,t.path.toString())}function qm(n,e){return null===tn((n=(0,F.m9)(n))._path)?((t=e)&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),vC("child","path",t,!1)):vC("child","path",e,!1),new su(n._repo,_r(n._path,e));var t}function a1(n,e){n=(0,F.m9)(n),ru("set",n._path),Sc("set",e,n._path,!1);const t=new F.BH;return t1(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function p3(n,e){uV("update",e,n._path,!1);const t=new F.BH;return function(n,e,t,r){Jv(n,"update",{path:e.toString(),value:t});let o=!0;const u=EC(n),c={};if(Wi(t,(p,y)=>{o=!1,c[p]=iV(_r(e,p),Cr(y),n.serverSyncTree_,u)}),o)qi("update() called with empty data.  Don't do anything."),Ap(0,r,"ok",void 0);else{const p=px(n),y=function(n,e,t,r){!function(n,e,t,r){(0,F.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=RP(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const o=ir.fromObject(t);return Qv(n,new Kv({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,o))}(n.serverSyncTree_,e,c,p);fx(n.eventQueue_,y),n.server_.merge(e.toString(),t,(b,D)=>{const S="ok"===b;S||vs("update at "+e+" failed: "+b);const P=Dp(n.serverSyncTree_,p,!S),j=P.length>0?Xv(n,e):e;iu(n.eventQueue_,j,P),Ap(0,r,b,D)}),Wi(t,b=>{const D=i1(n,_r(e,b));Xv(n,D)}),iu(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function g3(n){return function(n,e){const t=function(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(b,D)=>{const S=$s(b,t);r=r||Ip(D,S)});let o=n.syncPointTree_.get(t);o?r=r||Ip(o,Tn()):(o=new ZL,n.syncPointTree_=n.syncPointTree_.set(t,o));const u=null!=r,c=u?new bp(r,!0,!1):null;return function(n){return XS(n.viewCache_)}(zL(o,e,ex(n.pendingWriteTree_,e._path),u?c.getNode():Gt.EMPTY_NODE,u))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const o=Cr(r).withIndex(e._queryParams.getIndex()),u=fC(n.serverSyncTree_,e._path,o);return XP(n.eventQueue_,e._path,u),Promise.resolve(o)},r=>(Jv(n,"get for query "+(0,F.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,F.m9)(n))._repo,n).then(e=>new Gm(e,new su(n._repo,n._path),n._queryParams.getIndex()))}class vx{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new EV("value",this,new Gm(e.snapshotNode,new su(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new wV(this,e,t):null}matches(e){return e instanceof vx&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Ex{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new wV(this,e,t):null}createEvent(e,t){(0,F.hu)(null!=e.childName,"Child events should have a childName.");const r=qm(new su(t._repo,t._path),e.childName),o=t._queryParams.getIndex();return new EV(e.type,this,new Gm(e.snapshotNode,r,o),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Ex&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function wC(n,e,t,r,o){let u;if("object"==typeof r&&(u=void 0,o=r),"function"==typeof r&&(u=r),o&&o.onlyOnce){const y=t,b=(D,S)=>{n1(n._repo,n,p),y(D,S)};b.userCallback=t.userCallback,b.context=t.context,t=b}const c=new bV(t,u||void 0),p="value"===e?new vx(c):new Ex(e,c);return function(n,e,t){let r;r=".info"===tn(e._path)?XL(n.infoSyncTree_,e,t):XL(n.serverSyncTree_,e,t),XP(n.eventQueue_,e._path,r)}(n._repo,n,p),()=>n1(n._repo,n,p)}function u1(n,e,t,r){return wC(n,"value",e,t,r)}function DV(n,e,t,r){return wC(n,"child_added",e,t,r)}function AV(n,e,t,r){return wC(n,"child_changed",e,t,r)}function SV(n,e,t,r){return wC(n,"child_moved",e,t,r)}function xV(n,e,t,r){return wC(n,"child_removed",e,t,r)}function RV(n,e,t){let r=null;const o=t?new bV(t):null;"value"===e?r=new vx(o):e&&(r=new Ex(e,o)),n1(n._repo,n,r)}class hl{}class NV extends hl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Sc("endAt",this._value,e._path,!0);const t=CP(e._queryParams,this._value,this._key);if(yx(t),Sp(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new vo(e._repo,e._path,t,e._orderByCalled)}}class _3 extends hl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Sc("endBefore",this._value,e._path,!1);const t=function(n,e,t){let r,o;return n.index_===Ac?("string"==typeof e&&(e=TL(e)),o=CP(n,e,t)):(r=null==t?_h:TL(t),o=CP(n,e,r)),o.endBeforeSet_=!0,o}(e._queryParams,this._value,this._key);if(yx(t),Sp(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new vo(e._repo,e._path,t,e._orderByCalled)}}class MV extends hl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Sc("startAt",this._value,e._path,!0);const t=bP(e._queryParams,this._value,this._key);if(yx(t),Sp(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new vo(e._repo,e._path,t,e._orderByCalled)}}class E3 extends hl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Sc("startAfter",this._value,e._path,!1);const t=function(n,e,t){let r;if(n.index_===Ac)"string"==typeof e&&(e=IL(e)),r=bP(n,e,t);else{let o;o=null==t?Dc:IL(t),r=bP(n,e,o)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(yx(t),Sp(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new vo(e._repo,e._path,t,e._orderByCalled)}}class b3 extends hl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new vo(e._repo,e._path,function(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class I3 extends hl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new vo(e._repo,e._path,function(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class D3 extends hl{constructor(e){super(),this._path=e}_apply(e){_x(e,"orderByChild");const t=new kn(this._path);if(nn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new yP(t),o=zS(e._queryParams,r);return Sp(o),new vo(e._repo,e._path,o,!0)}}class S3 extends hl{_apply(e){_x(e,"orderByKey");const t=zS(e._queryParams,Ac);return Sp(t),new vo(e._repo,e._path,t,!0)}}class R3 extends hl{_apply(e){_x(e,"orderByPriority");const t=zS(e._queryParams,rr);return Sp(t),new vo(e._repo,e._path,t,!0)}}class M3 extends hl{_apply(e){_x(e,"orderByValue");const t=zS(e._queryParams,vP);return Sp(t),new vo(e._repo,e._path,t,!0)}}class P3 extends hl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Sc("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new NV(this._value,this._key)._apply(new MV(this._value,this._key)._apply(e))}}function fl(n,...e){let t=(0,F.m9)(n);for(const r of e)t=r._apply(t);return t}(function(n){(0,F.hu)(!ix,"__referenceConstructor has already been defined"),ix=n})(su),function(n){(0,F.hu)(!ox,"__referenceConstructor has already been defined"),ox=n}(su);const l1={};function PV(n,e,t,r,o){let u=r||n.options.databaseURL;void 0===u&&(n.options.projectId||Tc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),qi("Using default host for project ",n.options.projectId),u=`${n.options.projectId}-default-rtdb.firebaseio.com`);let y,b,c=o1(u,o),p=c.repoInfo;"undefined"!=typeof process&&process.env&&(b=process.env.FIREBASE_DATABASE_EMULATOR_HOST),b?(y=!0,u=`http://${b}?ns=${p.namespace}`,c=o1(u,o),p=c.repoInfo):y=!c.repoInfo.secure;const D=o&&y?new tC(tC.OWNER):new Aj(n.name,n.options,e);lV("Invalid Firebase Database URL",c),nn(c.path)||Tc("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function(n,e,t,r){let o=l1[e.name];o||(o={},l1[e.name]=o);let u=o[n.toURLString()];return u&&Tc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),u=new ZH(n,false,t,r),o[n.toURLString()]=u,u}(p,n,D,new Dj(n.name,t));return new j3(S,n)}class j3{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(n,e,t){if(n.stats_=lP(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new KS(n.repoInfo_,(r,o,u,c)=>{fV(n,r,o,u,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>pV(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,F.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Um(n.repoInfo_,e,(r,o,u,c)=>{fV(n,r,o,u,c)},r=>{pV(n,r)},r=>{!function(n,e){Wi(e,(t,r)=>{e1(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function(n,e){const t=n.toString();return uP[t]||(uP[t]=e()),uP[t]}(n.repoInfo_,()=>new M$(n.stats_,n.server_)),n.infoData_=new A$,n.infoSyncTree_=new JL({startListening:(r,o,u,c)=>{let p=[];const y=n.infoData_.getNode(r._path);return y.isEmpty()||(p=fC(n.infoSyncTree_,r._path,y),setTimeout(()=>{c("ok")},0)),p},stopListening:()=>{}}),e1(n,"connected",!1),n.serverSyncTree_=new JL({startListening:(r,o,u,c)=>(n.server_.listen(r,u,o,(p,y)=>{const b=c(p,y);iu(n.eventQueue_,r._path,b)}),[]),stopListening:(r,o)=>{n.server_.unlisten(r,o)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new su(this._repo,Tn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(n,e){const t=l1[e];(!t||t[n.key]!==n)&&Tc(`Database ${e}(${n.repoInfo_}) has already been deleted.`),mV(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Tc("Cannot call "+e+" on a deleted database.")}}function OV(){eL.IS_TRANSPORT_INITIALIZED&&vs("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function $3(){OV(),Ep.forceDisallow()}function H3(){OV(),Hv.forceDisallow(),Ep.forceAllow()}function Z3(n,e){PF(n,e)}class J3{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Um.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Um.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},xF(Bi.SDK_VERSION),(0,Bi._registerComponent)(new uo.wA("database",(e,{instanceIdentifier:t})=>PV(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Bi.registerVersion)(AF,"0.13.0",void 0),(0,Bi.registerVersion)(AF,"0.13.0","esm2017");const nG=new ao.Yd("@firebase/database-compat"),FV=function(n){nG.warn("FIREBASE WARNING: "+n)};class sG{constructor(e){this._delegate=e}cancel(e){(0,F.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,F.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,F.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,F.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,F.Dv)("OnDisconnect.set",1,2,arguments.length),(0,F.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),o=>t(o)),r}setWithPriority(e,t,r){(0,F.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,F.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const o=this._delegate.setWithPriority(e,t);return r&&o.then(()=>r(null),u=>r(u)),o}update(e,t){if((0,F.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const o={};for(let u=0;u<e.length;++u)o[""+u]=e[u];e=o,FV("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,F.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),o=>t(o)),r}}class oG{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,F.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class xp{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,F.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,F.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,F.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,F.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,F.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),vC("DataSnapshot.child","path",e,!1),new xp(this._database,this._delegate.child(e))}hasChild(e){return(0,F.Dv)("DataSnapshot.hasChild",1,1,arguments.length),vC("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,F.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,F.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,F.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new xp(this._database,t)))}hasChildren(){return(0,F.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,F.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,F.Dv)("DataSnapshot.ref",0,0,arguments.length),new da(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ss{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,o){var u;(0,F.Dv)("Query.on",2,4,arguments.length),(0,F.Wj)("Query.on","callback",t,!1);const c=ss.getCancelAndContextArgs_("Query.on",r,o),p=(b,D)=>{t.call(c.context,new xp(this.database,b),D)};p.userCallback=t,p.context=c.context;const y=null===(u=c.cancel)||void 0===u?void 0:u.bind(c.context);switch(e){case"value":return u1(this._delegate,p,y),t;case"child_added":return DV(this._delegate,p,y),t;case"child_removed":return xV(this._delegate,p,y),t;case"child_changed":return AV(this._delegate,p,y),t;case"child_moved":return SV(this._delegate,p,y),t;default:throw new Error((0,F.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,F.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,F.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,F.Wj)("Query.off","callback",t,!0),(0,F.lb)("Query.off","context",r,!0),t){const o=()=>{};o.userCallback=t,o.context=r,RV(this._delegate,e,o)}else RV(this._delegate,e)}get(){return g3(this._delegate).then(e=>new xp(this.database,e))}once(e,t,r,o){(0,F.Dv)("Query.once",1,4,arguments.length),(0,F.Wj)("Query.once","callback",t,!0);const u=ss.getCancelAndContextArgs_("Query.once",r,o),c=new F.BH,p=(b,D)=>{const S=new xp(this.database,b);t&&t.call(u.context,S,D),c.resolve(S)};p.userCallback=t,p.context=u.context;const y=b=>{u.cancel&&u.cancel.call(u.context,b),c.reject(b)};switch(e){case"value":u1(this._delegate,p,y,{onlyOnce:!0});break;case"child_added":DV(this._delegate,p,y,{onlyOnce:!0});break;case"child_removed":xV(this._delegate,p,y,{onlyOnce:!0});break;case"child_changed":AV(this._delegate,p,y,{onlyOnce:!0});break;case"child_moved":SV(this._delegate,p,y,{onlyOnce:!0});break;default:throw new Error((0,F.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,F.Dv)("Query.limitToFirst",1,1,arguments.length),new ss(this.database,fl(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new b3(n)}(e)))}limitToLast(e){return(0,F.Dv)("Query.limitToLast",1,1,arguments.length),new ss(this.database,fl(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new I3(n)}(e)))}orderByChild(e){return(0,F.Dv)("Query.orderByChild",1,1,arguments.length),new ss(this.database,fl(this._delegate,function(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return vC("orderByChild","path",n,!1),new D3(n)}(e)))}orderByKey(){return(0,F.Dv)("Query.orderByKey",0,0,arguments.length),new ss(this.database,fl(this._delegate,new S3))}orderByPriority(){return(0,F.Dv)("Query.orderByPriority",0,0,arguments.length),new ss(this.database,fl(this._delegate,new R3))}orderByValue(){return(0,F.Dv)("Query.orderByValue",0,0,arguments.length),new ss(this.database,fl(this._delegate,new M3))}startAt(e=null,t){return(0,F.Dv)("Query.startAt",0,2,arguments.length),new ss(this.database,fl(this._delegate,function(n=null,e){return yC("startAt","key",e,!0),new MV(n,e)}(e,t)))}startAfter(e=null,t){return(0,F.Dv)("Query.startAfter",0,2,arguments.length),new ss(this.database,fl(this._delegate,function(n,e){return yC("startAfter","key",e,!0),new E3(n,e)}(e,t)))}endAt(e=null,t){return(0,F.Dv)("Query.endAt",0,2,arguments.length),new ss(this.database,fl(this._delegate,function(n,e){return yC("endAt","key",e,!0),new NV(n,e)}(e,t)))}endBefore(e=null,t){return(0,F.Dv)("Query.endBefore",0,2,arguments.length),new ss(this.database,fl(this._delegate,function(n,e){return yC("endBefore","key",e,!0),new _3(n,e)}(e,t)))}equalTo(e,t){return(0,F.Dv)("Query.equalTo",1,2,arguments.length),new ss(this.database,fl(this._delegate,function(n,e){return yC("equalTo","key",e,!0),new P3(n,e)}(e,t)))}toString(){return(0,F.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,F.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,F.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof ss))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const o={cancel:void 0,context:void 0};if(t&&r)o.cancel=t,(0,F.Wj)(e,"cancel",o.cancel,!0),o.context=r,(0,F.lb)(e,"context",o.context,!0);else if(t)if("object"==typeof t&&null!==t)o.context=t;else{if("function"!=typeof t)throw new Error((0,F.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");o.cancel=t}return o}get ref(){return new da(this.database,new su(this._delegate._repo,this._delegate._path))}}class da extends ss{constructor(e,t){super(e,new vo(t._repo,t._path,new ZS,!1)),this.database=e,this._delegate=t}getKey(){return(0,F.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,F.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new da(this.database,qm(this._delegate,e))}getParent(){(0,F.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new da(this.database,e):null}getRoot(){return(0,F.Dv)("Reference.root",0,0,arguments.length),new da(this.database,this._delegate.root)}set(e,t){(0,F.Dv)("Reference.set",1,2,arguments.length),(0,F.Wj)("Reference.set","onComplete",t,!0);const r=a1(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}update(e,t){if((0,F.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const o={};for(let u=0;u<e.length;++u)o[""+u]=e[u];e=o,FV("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ru("Reference.update",this._delegate._path),(0,F.Wj)("Reference.update","onComplete",t,!0);const r=p3(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}setWithPriority(e,t,r){(0,F.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,F.Wj)("Reference.setWithPriority","onComplete",r,!0);const o=function(n,e,t){if(ru("setWithPriority",n._path),Sc("setWithPriority",e,n._path,!1),JP("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new F.BH;return t1(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&o.then(()=>r(null),u=>r(u)),o}remove(e){(0,F.Dv)("Reference.remove",0,1,arguments.length),(0,F.Wj)("Reference.remove","onComplete",e,!0);const t=function(n){return ru("remove",n._path),a1(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,F.Dv)("Reference.transaction",1,3,arguments.length),(0,F.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,F.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,F.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const o=function(n,e,t){var r;if(n=(0,F.m9)(n),ru("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const o=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,u=new F.BH,p=u1(n,()=>{});return function(n,e,t,r,o,u){Jv(n,"transaction on "+e);const c={path:e,update:t,onComplete:r,status:null,order:NF(),applyLocally:u,retryCount:0,unwatcher:o,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},p=r1(n,e,void 0);c.currentInputSnapshot=p;const y=c.update(p.val());if(void 0===y)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{_C("transaction failed: Data returned ",y,c.path),c.status=0;const b=cx(n.transactionQueueTree_,e),D=Hm(b)||[];let S;D.push(c),KP(b,D),"object"==typeof y&&null!==y&&(0,F.r3)(y,".priority")?(S=(0,F.DV)(y,".priority"),(0,F.hu)(mC(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(ax(n.serverSyncTree_,e)||Gt.EMPTY_NODE).getPriority().val();const P=EC(n),j=Cr(y,S),Q=WP(j,p,P);c.currentOutputSnapshotRaw=j,c.currentOutputSnapshotResolved=Q,c.currentWriteId=px(n);const ye=UP(n.serverSyncTree_,e,Q,c.currentWriteId,c.applyLocally);iu(n.eventQueue_,e,ye),gx(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(y,b,D)=>{let S=null;y?u.reject(y):(S=new Gm(D,new su(n._repo,n._path),rr),u.resolve(new J3(b,S)))},p,o),u.promise}(this._delegate,e,{applyLocally:r}).then(u=>new oG(u.committed,new xp(this.database,u.snapshot)));return t&&o.then(u=>t(null,u.committed,u.snapshot),u=>t(u,!1,null)),o}setPriority(e,t){(0,F.Dv)("Reference.setPriority",1,2,arguments.length),(0,F.Wj)("Reference.setPriority","onComplete",t,!0);const r=function(n,e){n=(0,F.m9)(n),ru("setPriority",n._path),JP("setPriority",e,!1);const t=new F.BH;return t1(n._repo,_r(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}push(e,t){(0,F.Dv)("Reference.push",0,2,arguments.length),(0,F.Wj)("Reference.push","onComplete",t,!0);const r=function(n,e){n=(0,F.m9)(n),ru("push",n._path),Sc("push",e,n._path,!0);const t=hV(n._repo),r=v$(t),o=qm(n,r),u=qm(n,r);let c;return c=null!=e?a1(u,e).then(()=>u):Promise.resolve(u),o.then=c.then.bind(c),o.catch=c.then.bind(c,void 0),o}(this._delegate,e),o=r.then(c=>new da(this.database,c));t&&o.then(()=>t(null),c=>t(c));const u=new da(this.database,r);return u.then=o.then.bind(o),u.catch=o.catch.bind(o,void 0),u}onDisconnect(){return ru("Reference.onDisconnect",this._delegate._path),new sG(new CV(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class bC{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:$3,forceLongPolling:H3}}useEmulator(e,t,r={}){!function(n,e,t,r={}){(n=(0,F.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Tc("Cannot call useEmulator() after instance has already been initialized.");const o=n._repoInternal;let u;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&Tc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),u=new tC(tC.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,F.Sg)(r.mockUserToken,n.app.options.projectId);u=new tC(c)}!function(n,e,t,r){n.repoInfo_=new oP(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(o,e,t,u)}(this._delegate,e,t,r)}ref(e){if((0,F.Dv)("database.ref",0,1,arguments.length),e instanceof da){const t=TV(this._delegate,e.toString());return new da(this,t)}{const t=IV(this._delegate,e);return new da(this,t)}}refFromURL(e){(0,F.Dv)("database.refFromURL",1,1,arguments.length);const r=TV(this._delegate,e);return new da(this,r)}goOffline(){return(0,F.Dv)("database.goOffline",0,0,arguments.length),function(n){(n=(0,F.m9)(n))._checkNotDeleted("goOffline"),mV(n._repo)}(this._delegate)}goOnline(){return(0,F.Dv)("database.goOnline",0,0,arguments.length),function(n){(n=(0,F.m9)(n))._checkNotDeleted("goOnline"),function(n){n.persistentConnection_&&n.persistentConnection_.resume(dV)}(n._repo)}(this._delegate)}}bC.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:n=>function(n){return{".sv":{increment:n}}}(n)};var uG=Object.freeze({__proto__:null,initStandalone:function({app:n,url:e,version:t,customAuthImpl:r,namespace:o,nodeAdmin:u=!1}){xF(t);const c=new uo.zt("auth-internal",new uo.H0("database-standalone"));return c.setComponent(new uo.wA("auth-internal",()=>r,"PRIVATE")),{instance:new bC(PV(n,c,void 0,e,u),n),namespace:o}}});const lG=bC.ServerValue;function LV(n){return null==n}function VV(n){return"function"==typeof n.set}function UV(n,e){return VV(e)?e:n.ref(e)}function BV(n,e){if(function(n){return"string"==typeof n}(n))return e.stringCase();if(VV(n))return e.firebaseCase();if(function(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function CC(n,e,t="on",r=fw.z){return new vr.y(o=>{let u=null;return u=n[t](e,(c,p)=>{r.schedule(()=>{o.next({snapshot:c,prevKey:p})}),"once"===t&&r.schedule(()=>o.complete())},c=>{r.schedule(()=>o.error(c))}),"on"===t?{unsubscribe(){null!=u&&n.off(e,u)}}:{unsubscribe(){}}}).pipe((0,At.U)(o=>{const{snapshot:u,prevKey:c}=o;let p=null;return u.exists()&&(p=u.key),{type:e,payload:u,prevKey:c,key:p}}),(0,lj.B)())}function jV(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function gG(n,e){const{payload:t,prevKey:r,key:o}=e,u=jV(n,o),c=function(n,e){if(LV(e))return 0;{const t=jV(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let p=null;e.payload.forEach(y=>{const b={payload:y,type:"value",prevKey:p,key:y.key};return p=y.key,n=[...n,b],!1})}return n;case"child_added":if(u>-1){const p=n[u-1];(p&&p.key||null)!==r&&(n=n.filter(y=>y.payload.key!==t.key)).splice(c,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(p=>p.payload.key!==t.key);case"child_changed":return n.map(p=>p.payload.key===o?e:p);case"child_moved":if(u>-1){const p=n.splice(u,1)[0];return(n=n.slice()).splice(c,0,p),n}return n;default:return n}}function $V(n){return(LV(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function HV(n,e,t){return function(n,e,t){return CC(n,"value","once",t).pipe(lr(r=>{const o=[(0,ut.of)(r)];return e.forEach(u=>o.push(CC(n,u,"on",t))),(0,Ie.T)(...o).pipe(Na(gG,[]))}),RR())}(n,e=$V(e),t)}function GV(n,e,t){const r=(e=$V(e)).map(o=>CC(n,o,"on",t));return(0,Ie.T)(...r)}function qV(n,e){return function(r,o){return BV(r,{stringCase:()=>n.child(r)[e](o),firebaseCase:()=>r[e](o),snapshotCase:()=>r.ref[e](o)})}}function vG(n){return function(t){return t?BV(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function WV(n,e){return function(){return CC(n,"value","on",e)}}!function(n){n.INTERNAL.registerComponent(new uo.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),o=e.getProvider("database").getImmediate({identifier:t});return new bC(o,r)},"PUBLIC").setServiceProps({Reference:da,Query:ss,Database:bC,DataSnapshot:xp,enableLogging:Z3,INTERNAL:uG,ServerValue:lG}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.0")}(kI.Z);const bG=new f.OlP("angularfire2.realtimeDatabaseURL"),CG=new f.OlP("angularfire2.database.use-emulator");let IG=(()=>{class n{constructor(t,r,o,u,c,p,y,b,D,S,P,j,Q,ye,xe){this.schedulers=p;const ct=y,lt=(0,Hr.on)(t,c,r);b&&Uk(lt,c,D,P,j,Q,S,ye),this.database=(0,Hr.cc)(`${lt.name}.database.${o}`,"AngularFireDatabase",lt.name,()=>{const nt=c.runOutsideAngular(()=>lt.database(o||void 0));return ct&&nt.useEmulator(...ct),nt},[ct])}list(t,r){const o=this.schedulers.ngZone.runOutsideAngular(()=>UV(this.database,t));let u=o;return r&&(u=r(o)),function(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:qV(r,"update"),set:qV(r,"set"),push:o=>r.push(o),remove:vG(r),snapshotChanges:o=>HV(n,o,t).pipe(bn.iC),stateChanges:o=>GV(n,o,t).pipe(bn.iC),auditTrail:o=>function(n,e,t){return function(n,e,t){return function(n,e){return CC(n,"value","on",e).pipe((0,At.U)(t=>{let r;return t.payload.forEach(o=>(r=o.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function(...n){return e=>{let t;return"function"==typeof n[n.length-1]&&(t=n.pop()),e.lift(new dj(n,t))}}(e),(0,At.U)(([o,u])=>{const c=o.lastKeyToLoad,p=u.map(y=>y.key);return{actions:u,lastKeyToLoad:c,loadedKeys:p}}),function(n){return e=>e.lift(new pj(n))}(o=>-1===o.loadedKeys.indexOf(o.lastKeyToLoad)),(0,At.U)(o=>o.actions))}(n,GV(n,e).pipe(Na((o,u)=>[...o,u],[])),t)}(n,o,t).pipe(bn.iC),valueChanges:(o,u)=>HV(n,o,t).pipe((0,At.U)(p=>p.map(y=>u&&u.idField?Object.assign(Object.assign({},y.payload.val()),{[u.idField]:y.key}):y.payload.val())),bn.iC)}}(u,this)}object(t){return function(n,e){return{query:n,snapshotChanges:()=>WV(n,e.schedulers.outsideAngular)().pipe(bn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>WV(n,e.schedulers.outsideAngular)().pipe(bn.iC,(0,At.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>UV(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Hr.Dh),f.LFG(Hr.xv,8),f.LFG(bG,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(bn.HU),f.LFG(CG,8),f.LFG(Wb,8),f.LFG(kk,8),f.LFG(Pk,8),f.LFG(Ok,8),f.LFG(Fk,8),f.LFG(Lk,8),f.LFG(Vk,8),f.LFG(qb,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),TG=(()=>{class n{constructor(){xS.Z.registerVersion("angularfire",bn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[IG]}),n})(),DG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[g2]}),n.\u0275inj=f.cJS({providers:[yp],imports:[[Lp,dw,TR,p2,$C,Hr.hO.initializeApp(xl_firebase),YU,i2,uj,TG]]}),n})();(0,f.G48)(),Mi().bootstrapModule(DG).catch(n=>console.error(n))},3394:(Qe,Ee,V)=>{"use strict";V.d(Ee,{Z:()=>Te});var f=V(3854),$=V(3910),O=V(8026),ae=V(5422);class ce{constructor(Be,fe){this._delegate=Be,this.firebase=fe,(0,O._addComponent)(Be,new $.wA("app-compat",()=>this,"PUBLIC")),this.container=Be.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Be){this._delegate.automaticDataCollectionEnabled=Be}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Be=>{this._delegate.checkDestroyed(),Be()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(Be,fe=O._DEFAULT_ENTRY_NAME){var De;this._delegate.checkDestroyed();const Ne=this._delegate.container.getProvider(Be);return!Ne.isInitialized()&&"EXPLICIT"===(null===(De=Ne.getComponent())||void 0===De?void 0:De.instantiationMode)&&Ne.initialize(),Ne.getImmediate({identifier:fe})}_removeServiceInstance(Be,fe=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Be).clearInstance(fe)}_addComponent(Be){(0,O._addComponent)(this._delegate,Be)}_addOrOverwriteComponent(Be){(0,O._addOrOverwriteComponent)(this._delegate,Be)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ce=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),U=function oe(){const we=function(we){const Be={},fe={__esModule:!0,initializeApp:function(vt,Oe={}){const Fe=O.initializeApp(vt,Oe);if((0,f.r3)(Be,Fe.name))return Be[Fe.name];const $e=new we(Fe,fe);return Be[Fe.name]=$e,$e},app:Ne,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function(vt){const Oe=vt.name,Fe=Oe.replace("-compat","");if(O._registerComponent(vt)&&"PUBLIC"===vt.type){const $e=(mt=Ne())=>{if("function"!=typeof mt[Fe])throw Ce.create("invalid-app-argument",{appName:Oe});return mt[Fe]()};void 0!==vt.serviceProps&&(0,f.ZB)($e,vt.serviceProps),fe[Fe]=$e,we.prototype[Fe]=function(...mt){return this._getService.bind(this,Oe).apply(this,vt.multipleInstances?mt:[])}}return"PUBLIC"===vt.type?fe[Fe]:null},removeApp:function(vt){delete Be[vt]},useAsService:function(vt,Oe){return"serverAuth"===Oe?null:Oe},modularAPIs:O}};function Ne(vt){if(!(0,f.r3)(Be,vt=vt||O._DEFAULT_ENTRY_NAME))throw Ce.create("no-app",{appName:vt});return Be[vt]}return fe.default=fe,Object.defineProperty(fe,"apps",{get:function(){return Object.keys(Be).map(vt=>Be[vt])}}),Ne.App=we,fe}(ce);return we.INTERNAL=Object.assign(Object.assign({},we.INTERNAL),{createFirebaseNamespace:oe,extendNamespace:function(fe){(0,f.ZB)(we,fe)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),we}(),H=new ae.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const we=self.firebase.SDK_VERSION;we&&we.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Te=U;(0,O.registerVersion)("@firebase/app-compat","0.1.26",undefined)},8026:(Qe,Ee,V)=>{"use strict";V.r(Ee),V.d(Ee,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>Jr,_DEFAULT_ENTRY_NAME:()=>Yr,_addComponent:()=>zi,_addOrOverwriteComponent:()=>os,_apps:()=>Ht,_clearComponents:()=>Gn,_components:()=>Qr,_getProvider:()=>Es,_registerComponent:()=>Kt,_removeServiceInstance:()=>Dn,deleteApp:()=>cr,getApp:()=>Me,getApps:()=>qn,initializeApp:()=>Xr,onLog:()=>An,registerVersion:()=>Yt,setLogLevel:()=>Wn});var f=V(8239),$=V(3910),O=V(5422),ae=V(3854),ce=V(4544);class ne{constructor(ie){this.container=ie}getPlatformInfoString(){return this.container.getProviders().map(Pe=>{if(function(Z){const ie=Z.getComponent();return"VERSION"===(null==ie?void 0:ie.type)}(Pe)){const ze=Pe.getImmediate();return`${ze.library}/${ze.version}`}return null}).filter(Pe=>Pe).join(" ")}}const te="@firebase/app",U=new O.Yd("@firebase/app"),Yr="[DEFAULT]",Pn={[te]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ht=new Map,Qr=new Map;function zi(Z,ie){try{Z.container.addComponent(ie)}catch(Pe){U.debug(`Component ${ie.name} failed to register with FirebaseApp ${Z.name}`,Pe)}}function os(Z,ie){Z.container.addOrOverwriteComponent(ie)}function Kt(Z){const ie=Z.name;if(Qr.has(ie))return U.debug(`There were multiple attempts to register component ${ie}.`),!1;Qr.set(ie,Z);for(const Pe of Ht.values())zi(Pe,Z);return!0}function Es(Z,ie){const Pe=Z.container.getProvider("heartbeat").getImmediate({optional:!0});return Pe&&Pe.triggerHeartbeat(),Z.container.getProvider(ie)}function Dn(Z,ie,Pe=Yr){Es(Z,ie).clearInstance(Pe)}function Gn(){Qr.clear()}const mn=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Hs{constructor(ie,Pe,ze){this._isDeleted=!1,this._options=Object.assign({},ie),this._config=Object.assign({},Pe),this._name=Pe.name,this._automaticDataCollectionEnabled=Pe.automaticDataCollectionEnabled,this._container=ze,this.container.addComponent(new $.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ie){this.checkDestroyed(),this._automaticDataCollectionEnabled=ie}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ie){this._isDeleted=ie}checkDestroyed(){if(this.isDeleted)throw mn.create("app-deleted",{appName:this._name})}}const Jr="9.8.2";function Xr(Z,ie={}){"object"!=typeof ie&&(ie={name:ie});const Pe=Object.assign({name:Yr,automaticDataCollectionEnabled:!1},ie),ze=Pe.name;if("string"!=typeof ze||!ze)throw mn.create("bad-app-name",{appName:String(ze)});const ht=Ht.get(ze);if(ht){if((0,ae.vZ)(Z,ht.options)&&(0,ae.vZ)(Pe,ht.config))return ht;throw mn.create("duplicate-app",{appName:ze})}const xt=new $.H0(ze);for(const It of Qr.values())xt.addComponent(It);const yn=new Hs(Z,Pe,xt);return Ht.set(ze,yn),yn}function Me(Z=Yr){const ie=Ht.get(Z);if(!ie)throw mn.create("no-app",{appName:Z});return ie}function qn(){return Array.from(Ht.values())}function cr(Z){return et.apply(this,arguments)}function et(){return(et=(0,f.Z)(function*(Z){const ie=Z.name;Ht.has(ie)&&(Ht.delete(ie),yield Promise.all(Z.container.getProviders().map(Pe=>Pe.delete())),Z.isDeleted=!0)})).apply(this,arguments)}function Yt(Z,ie,Pe){var ze;let ht=null!==(ze=Pn[Z])&&void 0!==ze?ze:Z;Pe&&(ht+=`-${Pe}`);const xt=ht.match(/\s|\//),yn=ie.match(/\s|\//);if(xt||yn){const It=[`Unable to register library "${ht}" with version "${ie}":`];return xt&&It.push(`library name "${ht}" contains illegal characters (whitespace or "/")`),xt&&yn&&It.push("and"),yn&&It.push(`version name "${ie}" contains illegal characters (whitespace or "/")`),void U.warn(It.join(" "))}Kt(new $.wA(`${ht}-version`,()=>({library:ht,version:ie}),"VERSION"))}function An(Z,ie){if(null!==Z&&"function"!=typeof Z)throw mn.create("invalid-log-argument");(0,O.Am)(Z,ie)}function Wn(Z){(0,O.Ub)(Z)}const On="firebase-heartbeat-store";let _n=null;function Eo(){return _n||(_n=(0,ce.X3)("firebase-heartbeat-database",1,{upgrade:(Z,ie)=>{switch(ie){case 0:Z.createObjectStore(On)}}}).catch(Z=>{throw mn.create("storage-open",{originalErrorMessage:Z.message})})),_n}function qe(){return(qe=(0,f.Z)(function*(Z){try{return(yield Eo()).transaction(On).objectStore(On).get(di(Z))}catch(ie){throw mn.create("storage-get",{originalErrorMessage:ie.message})}})).apply(this,arguments)}function at(Z,ie){return as.apply(this,arguments)}function as(){return(as=(0,f.Z)(function*(Z,ie){try{const ze=(yield Eo()).transaction(On,"readwrite");return yield ze.objectStore(On).put(ie,di(Z)),ze.done}catch(Pe){throw mn.create("storage-set",{originalErrorMessage:Pe.message})}})).apply(this,arguments)}function di(Z){return`${Z.name}!${Z.options.appId}`}class sr{constructor(ie){this.container=ie,this._heartbeatsCache=null;const Pe=this.container.getProvider("app").getImmediate();this._storage=new G(Pe),this._heartbeatsCachePromise=this._storage.read().then(ze=>(this._heartbeatsCache=ze,ze))}triggerHeartbeat(){var ie=this;return(0,f.Z)(function*(){const ze=ie.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ht=jn();if(null===ie._heartbeatsCache&&(ie._heartbeatsCache=yield ie._heartbeatsCachePromise),ie._heartbeatsCache.lastSentHeartbeatDate!==ht&&!ie._heartbeatsCache.heartbeats.some(xt=>xt.date===ht))return ie._heartbeatsCache.heartbeats.push({date:ht,agent:ze}),ie._heartbeatsCache.heartbeats=ie._heartbeatsCache.heartbeats.filter(xt=>{const yn=new Date(xt.date).valueOf();return Date.now()-yn<=2592e6}),ie._storage.overwrite(ie._heartbeatsCache)})()}getHeartbeatsHeader(){var ie=this;return(0,f.Z)(function*(){if(null===ie._heartbeatsCache&&(yield ie._heartbeatsCachePromise),null===ie._heartbeatsCache||0===ie._heartbeatsCache.heartbeats.length)return"";const Pe=jn(),{heartbeatsToSend:ze,unsentEntries:ht}=function(Z,ie=1024){const Pe=[];let ze=Z.slice();for(const ht of Z){const xt=Pe.find(yn=>yn.agent===ht.agent);if(xt){if(xt.dates.push(ht.date),J(Pe)>ie){xt.dates.pop();break}}else if(Pe.push({agent:ht.agent,dates:[ht.date]}),J(Pe)>ie){Pe.pop();break}ze=ze.slice(1)}return{heartbeatsToSend:Pe,unsentEntries:ze}}(ie._heartbeatsCache.heartbeats),xt=(0,ae.L)(JSON.stringify({version:2,heartbeats:ze}));return ie._heartbeatsCache.lastSentHeartbeatDate=Pe,ht.length>0?(ie._heartbeatsCache.heartbeats=ht,yield ie._storage.overwrite(ie._heartbeatsCache)):(ie._heartbeatsCache.heartbeats=[],ie._storage.overwrite(ie._heartbeatsCache)),xt})()}}function jn(){return(new Date).toISOString().substring(0,10)}class G{constructor(ie){this.app=ie,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ie=this;return(0,f.Z)(function*(){return(yield ie._canUseIndexedDBPromise)&&(yield function(Z){return qe.apply(this,arguments)}(ie.app))||{heartbeats:[]}})()}overwrite(ie){var Pe=this;return(0,f.Z)(function*(){var ze;if(yield Pe._canUseIndexedDBPromise){const xt=yield Pe.read();return at(Pe.app,{lastSentHeartbeatDate:null!==(ze=ie.lastSentHeartbeatDate)&&void 0!==ze?ze:xt.lastSentHeartbeatDate,heartbeats:ie.heartbeats})}})()}add(ie){var Pe=this;return(0,f.Z)(function*(){var ze;if(yield Pe._canUseIndexedDBPromise){const xt=yield Pe.read();return at(Pe.app,{lastSentHeartbeatDate:null!==(ze=ie.lastSentHeartbeatDate)&&void 0!==ze?ze:xt.lastSentHeartbeatDate,heartbeats:[...xt.heartbeats,...ie.heartbeats]})}})()}}function J(Z){return(0,ae.L)(JSON.stringify({version:2,heartbeats:Z})).length}Kt(new $.wA("platform-logger",ie=>new ne(ie),"PRIVATE")),Kt(new $.wA("heartbeat",ie=>new sr(ie),"PRIVATE")),Yt(te,"0.7.25",""),Yt(te,"0.7.25","esm2017"),Yt("fire-js","")},3910:(Qe,Ee,V)=>{"use strict";V.d(Ee,{wA:()=>O,H0:()=>te,zt:()=>ce});var f=V(8239),$=V(3854);class O{constructor(U,H,W){this.name=U,this.instanceFactory=H,this.type=W,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(U){return this.instantiationMode=U,this}setMultipleInstances(U){return this.multipleInstances=U,this}setServiceProps(U){return this.serviceProps=U,this}setInstanceCreatedCallback(U){return this.onInstanceCreated=U,this}}const ae="[DEFAULT]";class ce{constructor(U,H){this.name=U,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(U){const H=this.normalizeInstanceIdentifier(U);if(!this.instancesDeferred.has(H)){const W=new $.BH;if(this.instancesDeferred.set(H,W),this.isInitialized(H)||this.shouldAutoInitialize())try{const le=this.getOrInitializeService({instanceIdentifier:H});le&&W.resolve(le)}catch(le){}}return this.instancesDeferred.get(H).promise}getImmediate(U){var H;const W=this.normalizeInstanceIdentifier(null==U?void 0:U.identifier),le=null!==(H=null==U?void 0:U.optional)&&void 0!==H&&H;if(!this.isInitialized(W)&&!this.shouldAutoInitialize()){if(le)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:W})}catch(pe){if(le)return null;throw pe}}getComponent(){return this.component}setComponent(U){if(U.name!==this.name)throw Error(`Mismatching Component ${U.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=U,this.shouldAutoInitialize()){if("EAGER"===U.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:ae})}catch(H){}for(const[H,W]of this.instancesDeferred.entries()){const le=this.normalizeInstanceIdentifier(H);try{const pe=this.getOrInitializeService({instanceIdentifier:le});W.resolve(pe)}catch(pe){}}}}clearInstance(U=ae){this.instancesDeferred.delete(U),this.instancesOptions.delete(U),this.instances.delete(U)}delete(){var U=this;return(0,f.Z)(function*(){const H=Array.from(U.instances.values());yield Promise.all([...H.filter(W=>"INTERNAL"in W).map(W=>W.INTERNAL.delete()),...H.filter(W=>"_delete"in W).map(W=>W._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(U=ae){return this.instances.has(U)}getOptions(U=ae){return this.instancesOptions.get(U)||{}}initialize(U={}){const{options:H={}}=U,W=this.normalizeInstanceIdentifier(U.instanceIdentifier);if(this.isInitialized(W))throw Error(`${this.name}(${W}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const le=this.getOrInitializeService({instanceIdentifier:W,options:H});for(const[pe,Te]of this.instancesDeferred.entries())W===this.normalizeInstanceIdentifier(pe)&&Te.resolve(le);return le}onInit(U,H){var W;const le=this.normalizeInstanceIdentifier(H),pe=null!==(W=this.onInitCallbacks.get(le))&&void 0!==W?W:new Set;pe.add(U),this.onInitCallbacks.set(le,pe);const Te=this.instances.get(le);return Te&&U(Te,le),()=>{pe.delete(U)}}invokeOnInitCallbacks(U,H){const W=this.onInitCallbacks.get(H);if(W)for(const le of W)try{le(U,H)}catch(pe){}}getOrInitializeService({instanceIdentifier:U,options:H={}}){let W=this.instances.get(U);if(!W&&this.component&&(W=this.component.instanceFactory(this.container,{instanceIdentifier:(oe=U,oe===ae?void 0:oe),options:H}),this.instances.set(U,W),this.instancesOptions.set(U,H),this.invokeOnInitCallbacks(W,U),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,U,W)}catch(le){}var oe;return W||null}normalizeInstanceIdentifier(U=ae){return this.component?this.component.multipleInstances?U:ae:U}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class te{constructor(U){this.name=U,this.providers=new Map}addComponent(U){const H=this.getProvider(U.name);if(H.isComponentSet())throw new Error(`Component ${U.name} has already been registered with ${this.name}`);H.setComponent(U)}addOrOverwriteComponent(U){this.getProvider(U.name).isComponentSet()&&this.providers.delete(U.name),this.addComponent(U)}getProvider(U){if(this.providers.has(U))return this.providers.get(U);const H=new ce(U,this);return this.providers.set(U,H),H}getProviders(){return Array.from(this.providers.values())}}},5422:(Qe,Ee,V)=>{"use strict";V.d(Ee,{in:()=>$,Yd:()=>Ce,Ub:()=>te,Am:()=>oe});const f=[];var $=(()=>{return(U=$||($={}))[U.DEBUG=0]="DEBUG",U[U.VERBOSE=1]="VERBOSE",U[U.INFO=2]="INFO",U[U.WARN=3]="WARN",U[U.ERROR=4]="ERROR",U[U.SILENT=5]="SILENT",$;var U})();const O={debug:$.DEBUG,verbose:$.VERBOSE,info:$.INFO,warn:$.WARN,error:$.ERROR,silent:$.SILENT},ae=$.INFO,ce={[$.DEBUG]:"log",[$.VERBOSE]:"log",[$.INFO]:"info",[$.WARN]:"warn",[$.ERROR]:"error"},ne=(U,H,...W)=>{if(H<U.logLevel)return;const le=(new Date).toISOString(),pe=ce[H];if(!pe)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[pe](`[${le}]  ${U.name}:`,...W)};class Ce{constructor(H){this.name=H,this._logLevel=ae,this._logHandler=ne,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in $))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?O[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,$.DEBUG,...H),this._logHandler(this,$.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,$.VERBOSE,...H),this._logHandler(this,$.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,$.INFO,...H),this._logHandler(this,$.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,$.WARN,...H),this._logHandler(this,$.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,$.ERROR,...H),this._logHandler(this,$.ERROR,...H)}}function te(U){f.forEach(H=>{H.setLogLevel(U)})}function oe(U,H){for(const W of f){let le=null;H&&H.level&&(le=O[H.level]),W.userLogHandler=null===U?null:(pe,Te,...we)=>{const Be=we.map(fe=>{if(null==fe)return null;if("string"==typeof fe)return fe;if("number"==typeof fe||"boolean"==typeof fe)return fe.toString();if(fe instanceof Error)return fe.message;try{return JSON.stringify(fe)}catch(De){return null}}).filter(fe=>fe).join(" ");Te>=(null!=le?le:pe.logLevel)&&U({level:$[Te].toLowerCase(),message:Be,args:we,type:pe.name})}}}},4544:(Qe,Ee,V)=>{"use strict";V.d(Ee,{Lj:()=>Xe,X3:()=>Ne});var f=V(8239);let O,ae;const Ce=new WeakMap,te=new WeakMap,oe=new WeakMap,U=new WeakMap,H=new WeakMap;let pe={get(Oe,Fe,$e){if(Oe instanceof IDBTransaction){if("done"===Fe)return te.get(Oe);if("objectStoreNames"===Fe)return Oe.objectStoreNames||oe.get(Oe);if("store"===Fe)return $e.objectStoreNames[1]?void 0:$e.objectStore($e.objectStoreNames[0])}return fe(Oe[Fe])},set:(Oe,Fe,$e)=>(Oe[Fe]=$e,!0),has:(Oe,Fe)=>Oe instanceof IDBTransaction&&("done"===Fe||"store"===Fe)||Fe in Oe};function Be(Oe){return"function"==typeof Oe?function(Oe){return Oe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(Oe)?function(...Fe){return Oe.apply(De(this),Fe),fe(Ce.get(this))}:function(...Fe){return fe(Oe.apply(De(this),Fe))}:function(Fe,...$e){const mt=Oe.call(De(this),Fe,...$e);return oe.set(mt,Fe.sort?Fe.sort():[Fe]),fe(mt)}}(Oe):(Oe instanceof IDBTransaction&&function(Oe){if(te.has(Oe))return;const Fe=new Promise(($e,mt)=>{const rt=()=>{Oe.removeEventListener("complete",Et),Oe.removeEventListener("error",Ge),Oe.removeEventListener("abort",Ge)},Et=()=>{$e(),rt()},Ge=()=>{mt(Oe.error||new DOMException("AbortError","AbortError")),rt()};Oe.addEventListener("complete",Et),Oe.addEventListener("error",Ge),Oe.addEventListener("abort",Ge)});te.set(Oe,Fe)}(Oe),((Oe,Fe)=>Fe.some($e=>Oe instanceof $e))(Oe,O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(Oe,pe):Oe)}function fe(Oe){if(Oe instanceof IDBRequest)return function(Oe){const Fe=new Promise(($e,mt)=>{const rt=()=>{Oe.removeEventListener("success",Et),Oe.removeEventListener("error",Ge)},Et=()=>{$e(fe(Oe.result)),rt()},Ge=()=>{mt(Oe.error),rt()};Oe.addEventListener("success",Et),Oe.addEventListener("error",Ge)});return Fe.then($e=>{$e instanceof IDBCursor&&Ce.set($e,Oe)}).catch(()=>{}),H.set(Fe,Oe),Fe}(Oe);if(U.has(Oe))return U.get(Oe);const Fe=Be(Oe);return Fe!==Oe&&(U.set(Oe,Fe),H.set(Fe,Oe)),Fe}const De=Oe=>H.get(Oe);function Ne(Oe,Fe,{blocked:$e,upgrade:mt,blocking:rt,terminated:Et}={}){const Ge=indexedDB.open(Oe,Fe),Br=fe(Ge);return mt&&Ge.addEventListener("upgradeneeded",Ir=>{mt(fe(Ge.result),Ir.oldVersion,Ir.newVersion,fe(Ge.transaction))}),$e&&Ge.addEventListener("blocked",()=>$e()),Br.then(Ir=>{Et&&Ir.addEventListener("close",()=>Et()),rt&&Ir.addEventListener("versionchange",()=>rt())}).catch(()=>{}),Br}function Xe(Oe,{blocked:Fe}={}){const $e=indexedDB.deleteDatabase(Oe);return Fe&&$e.addEventListener("blocked",()=>Fe()),fe($e).then(()=>{})}const dt=["get","getKey","getAll","getAllKeys","count"],qt=["put","add","delete","clear"],Lt=new Map;function vt(Oe,Fe){if(!(Oe instanceof IDBDatabase)||Fe in Oe||"string"!=typeof Fe)return;if(Lt.get(Fe))return Lt.get(Fe);const $e=Fe.replace(/FromIndex$/,""),mt=Fe!==$e,rt=qt.includes($e);if(!($e in(mt?IDBIndex:IDBObjectStore).prototype)||!rt&&!dt.includes($e))return;const Et=function(){var Ge=(0,f.Z)(function*(Br,...Ir){const Zi=this.transaction(Br,rt?"readwrite":"readonly");let Yr=Zi.store;return mt&&(Yr=Yr.index(Ir.shift())),(yield Promise.all([Yr[$e](...Ir),rt&&Zi.done]))[0]});return function(Ir){return Ge.apply(this,arguments)}}();return Lt.set(Fe,Et),Et}var Oe;pe=YV(KV({},Oe=pe),{get:(Fe,$e,mt)=>vt(Fe,$e)||Oe.get(Fe,$e,mt),has:(Fe,$e)=>!!vt(Fe,$e)||Oe.has(Fe,$e)})},8239:(Qe,Ee,V)=>{"use strict";function f(O,ae,ce,ne,Ce,te,oe){try{var U=O[te](oe),H=U.value}catch(W){return void ce(W)}U.done?ae(H):Promise.resolve(H).then(ne,Ce)}function $(O){return function(){var ae=this,ce=arguments;return new Promise(function(ne,Ce){var te=O.apply(ae,ce);function oe(H){f(te,ne,Ce,oe,U,"next",H)}function U(H){f(te,ne,Ce,oe,U,"throw",H)}oe(void 0)})}}V.d(Ee,{Z:()=>$})}},Qe=>{Qe(Qe.s=6944)}]);